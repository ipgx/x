<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>maplibregl</title>
<script>(function() {
  // If window.HTMLWidgets is already defined, then use it; otherwise create a
  // new object. This allows preceding code to set options that affect the
  // initialization process (though none currently exist).
  window.HTMLWidgets = window.HTMLWidgets || {};

  // See if we're running in a viewer pane. If not, we're in a web browser.
  var viewerMode = window.HTMLWidgets.viewerMode =
      /\bviewer_pane=1\b/.test(window.location);

  // See if we're running in Shiny mode. If not, it's a static document.
  // Note that static widgets can appear in both Shiny and static modes, but
  // obviously, Shiny widgets can only appear in Shiny apps/documents.
  var shinyMode = window.HTMLWidgets.shinyMode =
      typeof(window.Shiny) !== "undefined" && !!window.Shiny.outputBindings;

  // We can't count on jQuery being available, so we implement our own
  // version if necessary.
  function querySelectorAll(scope, selector) {
    if (typeof(jQuery) !== "undefined" && scope instanceof jQuery) {
      return scope.find(selector);
    }
    if (scope.querySelectorAll) {
      return scope.querySelectorAll(selector);
    }
  }

  function asArray(value) {
    if (value === null)
      return [];
    if ($.isArray(value))
      return value;
    return [value];
  }

  // Implement jQuery's extend
  function extend(target /*, ... */) {
    if (arguments.length == 1) {
      return target;
    }
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];
      for (var prop in source) {
        if (source.hasOwnProperty(prop)) {
          target[prop] = source[prop];
        }
      }
    }
    return target;
  }

  // IE8 doesn't support Array.forEach.
  function forEach(values, callback, thisArg) {
    if (values.forEach) {
      values.forEach(callback, thisArg);
    } else {
      for (var i = 0; i < values.length; i++) {
        callback.call(thisArg, values[i], i, values);
      }
    }
  }

  // Replaces the specified method with the return value of funcSource.
  //
  // Note that funcSource should not BE the new method, it should be a function
  // that RETURNS the new method. funcSource receives a single argument that is
  // the overridden method, it can be called from the new method. The overridden
  // method can be called like a regular function, it has the target permanently
  // bound to it so "this" will work correctly.
  function overrideMethod(target, methodName, funcSource) {
    var superFunc = target[methodName] || function() {};
    var superFuncBound = function() {
      return superFunc.apply(target, arguments);
    };
    target[methodName] = funcSource(superFuncBound);
  }

  // Add a method to delegator that, when invoked, calls
  // delegatee.methodName. If there is no such method on
  // the delegatee, but there was one on delegator before
  // delegateMethod was called, then the original version
  // is invoked instead.
  // For example:
  //
  // var a = {
  //   method1: function() { console.log('a1'); }
  //   method2: function() { console.log('a2'); }
  // };
  // var b = {
  //   method1: function() { console.log('b1'); }
  // };
  // delegateMethod(a, b, "method1");
  // delegateMethod(a, b, "method2");
  // a.method1();
  // a.method2();
  //
  // The output would be "b1", "a2".
  function delegateMethod(delegator, delegatee, methodName) {
    var inherited = delegator[methodName];
    delegator[methodName] = function() {
      var target = delegatee;
      var method = delegatee[methodName];

      // The method doesn't exist on the delegatee. Instead,
      // call the method on the delegator, if it exists.
      if (!method) {
        target = delegator;
        method = inherited;
      }

      if (method) {
        return method.apply(target, arguments);
      }
    };
  }

  // Implement a vague facsimilie of jQuery's data method
  function elementData(el, name, value) {
    if (arguments.length == 2) {
      return el["htmlwidget_data_" + name];
    } else if (arguments.length == 3) {
      el["htmlwidget_data_" + name] = value;
      return el;
    } else {
      throw new Error("Wrong number of arguments for elementData: " +
        arguments.length);
    }
  }

  // http://stackoverflow.com/questions/3446170/escape-string-for-use-in-javascript-regex
  function escapeRegExp(str) {
    return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
  }

  function hasClass(el, className) {
    var re = new RegExp("\\b" + escapeRegExp(className) + "\\b");
    return re.test(el.className);
  }

  // elements - array (or array-like object) of HTML elements
  // className - class name to test for
  // include - if true, only return elements with given className;
  //   if false, only return elements *without* given className
  function filterByClass(elements, className, include) {
    var results = [];
    for (var i = 0; i < elements.length; i++) {
      if (hasClass(elements[i], className) == include)
        results.push(elements[i]);
    }
    return results;
  }

  function on(obj, eventName, func) {
    if (obj.addEventListener) {
      obj.addEventListener(eventName, func, false);
    } else if (obj.attachEvent) {
      obj.attachEvent(eventName, func);
    }
  }

  function off(obj, eventName, func) {
    if (obj.removeEventListener)
      obj.removeEventListener(eventName, func, false);
    else if (obj.detachEvent) {
      obj.detachEvent(eventName, func);
    }
  }

  // Translate array of values to top/right/bottom/left, as usual with
  // the "padding" CSS property
  // https://developer.mozilla.org/en-US/docs/Web/CSS/padding
  function unpackPadding(value) {
    if (typeof(value) === "number")
      value = [value];
    if (value.length === 1) {
      return {top: value[0], right: value[0], bottom: value[0], left: value[0]};
    }
    if (value.length === 2) {
      return {top: value[0], right: value[1], bottom: value[0], left: value[1]};
    }
    if (value.length === 3) {
      return {top: value[0], right: value[1], bottom: value[2], left: value[1]};
    }
    if (value.length === 4) {
      return {top: value[0], right: value[1], bottom: value[2], left: value[3]};
    }
  }

  // Convert an unpacked padding object to a CSS value
  function paddingToCss(paddingObj) {
    return paddingObj.top + "px " + paddingObj.right + "px " + paddingObj.bottom + "px " + paddingObj.left + "px";
  }

  // Makes a number suitable for CSS
  function px(x) {
    if (typeof(x) === "number")
      return x + "px";
    else
      return x;
  }

  // Retrieves runtime widget sizing information for an element.
  // The return value is either null, or an object with fill, padding,
  // defaultWidth, defaultHeight fields.
  function sizingPolicy(el) {
    var sizingEl = document.querySelector("script[data-for='" + el.id + "'][type='application/htmlwidget-sizing']");
    if (!sizingEl)
      return null;
    var sp = JSON.parse(sizingEl.textContent || sizingEl.text || "{}");
    if (viewerMode) {
      return sp.viewer;
    } else {
      return sp.browser;
    }
  }

  // @param tasks Array of strings (or falsy value, in which case no-op).
  //   Each element must be a valid JavaScript expression that yields a
  //   function. Or, can be an array of objects with "code" and "data"
  //   properties; in this case, the "code" property should be a string
  //   of JS that's an expr that yields a function, and "data" should be
  //   an object that will be added as an additional argument when that
  //   function is called.
  // @param target The object that will be "this" for each function
  //   execution.
  // @param args Array of arguments to be passed to the functions. (The
  //   same arguments will be passed to all functions.)
  function evalAndRun(tasks, target, args) {
    if (tasks) {
      forEach(tasks, function(task) {
        var theseArgs = args;
        if (typeof(task) === "object") {
          theseArgs = theseArgs.concat([task.data]);
          task = task.code;
        }
        var taskFunc = tryEval(task);
        if (typeof(taskFunc) !== "function") {
          throw new Error("Task must be a function! Source:\n" + task);
        }
        taskFunc.apply(target, theseArgs);
      });
    }
  }

  // Attempt eval() both with and without enclosing in parentheses.
  // Note that enclosing coerces a function declaration into
  // an expression that eval() can parse
  // (otherwise, a SyntaxError is thrown)
  function tryEval(code) {
    var result = null;
    try {
      result = eval("(" + code + ")");
    } catch(error) {
      if (!(error instanceof SyntaxError)) {
        throw error;
      }
      try {
        result = eval(code);
      } catch(e) {
        if (e instanceof SyntaxError) {
          throw error;
        } else {
          throw e;
        }
      }
    }
    return result;
  }

  function initSizing(el) {
    var sizing = sizingPolicy(el);
    if (!sizing)
      return;

    var cel = document.getElementById("htmlwidget_container");
    if (!cel)
      return;

    if (typeof(sizing.padding) !== "undefined") {
      document.body.style.margin = "0";
      document.body.style.padding = paddingToCss(unpackPadding(sizing.padding));
    }

    if (sizing.fill) {
      document.body.style.overflow = "hidden";
      document.body.style.width = "100%";
      document.body.style.height = "100%";
      document.documentElement.style.width = "100%";
      document.documentElement.style.height = "100%";
      cel.style.position = "absolute";
      var pad = unpackPadding(sizing.padding);
      cel.style.top = pad.top + "px";
      cel.style.right = pad.right + "px";
      cel.style.bottom = pad.bottom + "px";
      cel.style.left = pad.left + "px";
      el.style.width = "100%";
      el.style.height = "100%";

      return {
        getWidth: function() { return cel.getBoundingClientRect().width; },
        getHeight: function() { return cel.getBoundingClientRect().height; }
      };

    } else {
      el.style.width = px(sizing.width);
      el.style.height = px(sizing.height);

      return {
        getWidth: function() { return cel.getBoundingClientRect().width; },
        getHeight: function() { return cel.getBoundingClientRect().height; }
      };
    }
  }

  // Default implementations for methods
  var defaults = {
    find: function(scope) {
      return querySelectorAll(scope, "." + this.name);
    },
    renderError: function(el, err) {
      var $el = $(el);

      this.clearError(el);

      // Add all these error classes, as Shiny does
      var errClass = "shiny-output-error";
      if (err.type !== null) {
        // use the classes of the error condition as CSS class names
        errClass = errClass + " " + $.map(asArray(err.type), function(type) {
          return errClass + "-" + type;
        }).join(" ");
      }
      errClass = errClass + " htmlwidgets-error";

      // Is el inline or block? If inline or inline-block, just display:none it
      // and add an inline error.
      var display = $el.css("display");
      $el.data("restore-display-mode", display);

      if (display === "inline" || display === "inline-block") {
        $el.hide();
        if (err.message !== "") {
          var errorSpan = $("<span>").addClass(errClass);
          errorSpan.text(err.message);
          $el.after(errorSpan);
        }
      } else if (display === "block") {
        // If block, add an error just after the el, set visibility:none on the
        // el, and position the error to be on top of the el.
        // Mark it with a unique ID and CSS class so we can remove it later.
        $el.css("visibility", "hidden");
        if (err.message !== "") {
          var errorDiv = $("<div>").addClass(errClass).css("position", "absolute")
            .css("top", el.offsetTop)
            .css("left", el.offsetLeft)
            // setting width can push out the page size, forcing otherwise
            // unnecessary scrollbars to appear and making it impossible for
            // the element to shrink; so use max-width instead
            .css("maxWidth", el.offsetWidth)
            .css("height", el.offsetHeight);
          errorDiv.text(err.message);
          $el.after(errorDiv);

          // Really dumb way to keep the size/position of the error in sync with
          // the parent element as the window is resized or whatever.
          var intId = setInterval(function() {
            if (!errorDiv[0].parentElement) {
              clearInterval(intId);
              return;
            }
            errorDiv
              .css("top", el.offsetTop)
              .css("left", el.offsetLeft)
              .css("maxWidth", el.offsetWidth)
              .css("height", el.offsetHeight);
          }, 500);
        }
      }
    },
    clearError: function(el) {
      var $el = $(el);
      var display = $el.data("restore-display-mode");
      $el.data("restore-display-mode", null);

      if (display === "inline" || display === "inline-block") {
        if (display)
          $el.css("display", display);
        $(el.nextSibling).filter(".htmlwidgets-error").remove();
      } else if (display === "block"){
        $el.css("visibility", "inherit");
        $(el.nextSibling).filter(".htmlwidgets-error").remove();
      }
    },
    sizing: {}
  };

  // Called by widget bindings to register a new type of widget. The definition
  // object can contain the following properties:
  // - name (required) - A string indicating the binding name, which will be
  //   used by default as the CSS classname to look for.
  // - initialize (optional) - A function(el) that will be called once per
  //   widget element; if a value is returned, it will be passed as the third
  //   value to renderValue.
  // - renderValue (required) - A function(el, data, initValue) that will be
  //   called with data. Static contexts will cause this to be called once per
  //   element; Shiny apps will cause this to be called multiple times per
  //   element, as the data changes.
  window.HTMLWidgets.widget = function(definition) {
    if (!definition.name) {
      throw new Error("Widget must have a name");
    }
    if (!definition.type) {
      throw new Error("Widget must have a type");
    }
    // Currently we only support output widgets
    if (definition.type !== "output") {
      throw new Error("Unrecognized widget type '" + definition.type + "'");
    }
    // TODO: Verify that .name is a valid CSS classname

    // Support new-style instance-bound definitions. Old-style class-bound
    // definitions have one widget "object" per widget per type/class of
    // widget; the renderValue and resize methods on such widget objects
    // take el and instance arguments, because the widget object can't
    // store them. New-style instance-bound definitions have one widget
    // object per widget instance; the definition that's passed in doesn't
    // provide renderValue or resize methods at all, just the single method
    //   factory(el, width, height)
    // which returns an object that has renderValue(x) and resize(w, h).
    // This enables a far more natural programming style for the widget
    // author, who can store per-instance state using either OO-style
    // instance fields or functional-style closure variables (I guess this
    // is in contrast to what can only be called C-style pseudo-OO which is
    // what we required before).
    if (definition.factory) {
      definition = createLegacyDefinitionAdapter(definition);
    }

    if (!definition.renderValue) {
      throw new Error("Widget must have a renderValue function");
    }

    // For static rendering (non-Shiny), use a simple widget registration
    // scheme. We also use this scheme for Shiny apps/documents that also
    // contain static widgets.
    window.HTMLWidgets.widgets = window.HTMLWidgets.widgets || [];
    // Merge defaults into the definition; don't mutate the original definition.
    var staticBinding = extend({}, defaults, definition);
    overrideMethod(staticBinding, "find", function(superfunc) {
      return function(scope) {
        var results = superfunc(scope);
        // Filter out Shiny outputs, we only want the static kind
        return filterByClass(results, "html-widget-output", false);
      };
    });
    window.HTMLWidgets.widgets.push(staticBinding);

    if (shinyMode) {
      // Shiny is running. Register the definition with an output binding.
      // The definition itself will not be the output binding, instead
      // we will make an output binding object that delegates to the
      // definition. This is because we foolishly used the same method
      // name (renderValue) for htmlwidgets definition and Shiny bindings
      // but they actually have quite different semantics (the Shiny
      // bindings receive data that includes lots of metadata that it
      // strips off before calling htmlwidgets renderValue). We can't
      // just ignore the difference because in some widgets it's helpful
      // to call this.renderValue() from inside of resize(), and if
      // we're not delegating, then that call will go to the Shiny
      // version instead of the htmlwidgets version.

      // Merge defaults with definition, without mutating either.
      var bindingDef = extend({}, defaults, definition);

      // This object will be our actual Shiny binding.
      var shinyBinding = new Shiny.OutputBinding();

      // With a few exceptions, we'll want to simply use the bindingDef's
      // version of methods if they are available, otherwise fall back to
      // Shiny's defaults. NOTE: If Shiny's output bindings gain additional
      // methods in the future, and we want them to be overrideable by
      // HTMLWidget binding definitions, then we'll need to add them to this
      // list.
      delegateMethod(shinyBinding, bindingDef, "getId");
      delegateMethod(shinyBinding, bindingDef, "onValueChange");
      delegateMethod(shinyBinding, bindingDef, "onValueError");
      delegateMethod(shinyBinding, bindingDef, "renderError");
      delegateMethod(shinyBinding, bindingDef, "clearError");
      delegateMethod(shinyBinding, bindingDef, "showProgress");

      // The find, renderValue, and resize are handled differently, because we
      // want to actually decorate the behavior of the bindingDef methods.

      shinyBinding.find = function(scope) {
        var results = bindingDef.find(scope);

        // Only return elements that are Shiny outputs, not static ones
        var dynamicResults = results.filter(".html-widget-output");

        // It's possible that whatever caused Shiny to think there might be
        // new dynamic outputs, also caused there to be new static outputs.
        // Since there might be lots of different htmlwidgets bindings, we
        // schedule execution for later--no need to staticRender multiple
        // times.
        if (results.length !== dynamicResults.length)
          scheduleStaticRender();

        return dynamicResults;
      };

      // Wrap renderValue to handle initialization, which unfortunately isn't
      // supported natively by Shiny at the time of this writing.

      shinyBinding.renderValue = function(el, data) {
        Shiny.renderDependencies(data.deps);
        // Resolve strings marked as javascript literals to objects
        if (!(data.evals instanceof Array)) data.evals = [data.evals];
        for (var i = 0; data.evals && i < data.evals.length; i++) {
          window.HTMLWidgets.evaluateStringMember(data.x, data.evals[i]);
        }
        if (!bindingDef.renderOnNullValue) {
          if (data.x === null) {
            el.style.visibility = "hidden";
            return;
          } else {
            el.style.visibility = "inherit";
          }
        }
        if (!elementData(el, "initialized")) {
          initSizing(el);

          elementData(el, "initialized", true);
          if (bindingDef.initialize) {
            var rect = el.getBoundingClientRect();
            var result = bindingDef.initialize(el, rect.width, rect.height);
            elementData(el, "init_result", result);
          }
        }
        bindingDef.renderValue(el, data.x, elementData(el, "init_result"));
        evalAndRun(data.jsHooks.render, elementData(el, "init_result"), [el, data.x]);
      };

      // Only override resize if bindingDef implements it
      if (bindingDef.resize) {
        shinyBinding.resize = function(el, width, height) {
          // Shiny can call resize before initialize/renderValue have been
          // called, which doesn't make sense for widgets.
          if (elementData(el, "initialized")) {
            bindingDef.resize(el, width, height, elementData(el, "init_result"));
          }
        };
      }

      Shiny.outputBindings.register(shinyBinding, bindingDef.name);
    }
  };

  var scheduleStaticRenderTimerId = null;
  function scheduleStaticRender() {
    if (!scheduleStaticRenderTimerId) {
      scheduleStaticRenderTimerId = setTimeout(function() {
        scheduleStaticRenderTimerId = null;
        window.HTMLWidgets.staticRender();
      }, 1);
    }
  }

  // Render static widgets after the document finishes loading
  // Statically render all elements that are of this widget's class
  window.HTMLWidgets.staticRender = function() {
    var bindings = window.HTMLWidgets.widgets || [];
    forEach(bindings, function(binding) {
      var matches = binding.find(document.documentElement);
      forEach(matches, function(el) {
        var sizeObj = initSizing(el, binding);

        var getSize = function(el) {
          if (sizeObj) {
            return {w: sizeObj.getWidth(), h: sizeObj.getHeight()}
          } else {
            var rect = el.getBoundingClientRect();
            return {w: rect.width, h: rect.height}
          }
        };

        if (hasClass(el, "html-widget-static-bound"))
          return;
        el.className = el.className + " html-widget-static-bound";

        var initResult;
        if (binding.initialize) {
          var size = getSize(el);
          initResult = binding.initialize(el, size.w, size.h);
          elementData(el, "init_result", initResult);
        }

        if (binding.resize) {
          var lastSize = getSize(el);
          var resizeHandler = function(e) {
            var size = getSize(el);
            if (size.w === 0 && size.h === 0)
              return;
            if (size.w === lastSize.w && size.h === lastSize.h)
              return;
            lastSize = size;
            binding.resize(el, size.w, size.h, initResult);
          };

          on(window, "resize", resizeHandler);

          // This is needed for cases where we're running in a Shiny
          // app, but the widget itself is not a Shiny output, but
          // rather a simple static widget. One example of this is
          // an rmarkdown document that has runtime:shiny and widget
          // that isn't in a render function. Shiny only knows to
          // call resize handlers for Shiny outputs, not for static
          // widgets, so we do it ourselves.
          if (window.jQuery) {
            window.jQuery(document).on(
              "shown.htmlwidgets shown.bs.tab.htmlwidgets shown.bs.collapse.htmlwidgets",
              resizeHandler
            );
            window.jQuery(document).on(
              "hidden.htmlwidgets hidden.bs.tab.htmlwidgets hidden.bs.collapse.htmlwidgets",
              resizeHandler
            );
          }

          // This is needed for the specific case of ioslides, which
          // flips slides between display:none and display:block.
          // Ideally we would not have to have ioslide-specific code
          // here, but rather have ioslides raise a generic event,
          // but the rmarkdown package just went to CRAN so the
          // window to getting that fixed may be long.
          if (window.addEventListener) {
            // It's OK to limit this to window.addEventListener
            // browsers because ioslides itself only supports
            // such browsers.
            on(document, "slideenter", resizeHandler);
            on(document, "slideleave", resizeHandler);
          }
        }

        var scriptData = document.querySelector("script[data-for='" + el.id + "'][type='application/json']");
        if (scriptData) {
          var data = JSON.parse(scriptData.textContent || scriptData.text);
          // Resolve strings marked as javascript literals to objects
          if (!(data.evals instanceof Array)) data.evals = [data.evals];
          for (var k = 0; data.evals && k < data.evals.length; k++) {
            window.HTMLWidgets.evaluateStringMember(data.x, data.evals[k]);
          }
          binding.renderValue(el, data.x, initResult);
          evalAndRun(data.jsHooks.render, initResult, [el, data.x]);
        }
      });
    });

    invokePostRenderHandlers();
  }


  function has_jQuery3() {
    if (!window.jQuery) {
      return false;
    }
    var $version = window.jQuery.fn.jquery;
    var $major_version = parseInt($version.split(".")[0]);
    return $major_version >= 3;
  }

  /*
  / Shiny 1.4 bumped jQuery from 1.x to 3.x which means jQuery's
  / on-ready handler (i.e., $(fn)) is now asyncronous (i.e., it now
  / really means $(setTimeout(fn)).
  / https://jquery.com/upgrade-guide/3.0/#breaking-change-document-ready-handlers-are-now-asynchronous
  /
  / Since Shiny uses $() to schedule initShiny, shiny>=1.4 calls initShiny
  / one tick later than it did before, which means staticRender() is
  / called renderValue() earlier than (advanced) widget authors might be expecting.
  / https://github.com/rstudio/shiny/issues/2630
  /
  / For a concrete example, leaflet has some methods (e.g., updateBounds)
  / which reference Shiny methods registered in initShiny (e.g., setInputValue).
  / Since leaflet is privy to this life-cycle, it knows to use setTimeout() to
  / delay execution of those methods (until Shiny methods are ready)
  / https://github.com/rstudio/leaflet/blob/18ec981/javascript/src/index.js#L266-L268
  /
  / Ideally widget authors wouldn't need to use this setTimeout() hack that
  / leaflet uses to call Shiny methods on a staticRender(). In the long run,
  / the logic initShiny should be broken up so that method registration happens
  / right away, but binding happens later.
  */
  function maybeStaticRenderLater() {
    if (shinyMode && has_jQuery3()) {
      window.jQuery(window.HTMLWidgets.staticRender);
    } else {
      window.HTMLWidgets.staticRender();
    }
  }

  if (document.addEventListener) {
    document.addEventListener("DOMContentLoaded", function() {
      document.removeEventListener("DOMContentLoaded", arguments.callee, false);
      maybeStaticRenderLater();
    }, false);
  } else if (document.attachEvent) {
    document.attachEvent("onreadystatechange", function() {
      if (document.readyState === "complete") {
        document.detachEvent("onreadystatechange", arguments.callee);
        maybeStaticRenderLater();
      }
    });
  }


  window.HTMLWidgets.getAttachmentUrl = function(depname, key) {
    // If no key, default to the first item
    if (typeof(key) === "undefined")
      key = 1;

    var link = document.getElementById(depname + "-" + key + "-attachment");
    if (!link) {
      throw new Error("Attachment " + depname + "/" + key + " not found in document");
    }
    return link.getAttribute("href");
  };

  window.HTMLWidgets.dataframeToD3 = function(df) {
    var names = [];
    var length;
    for (var name in df) {
        if (df.hasOwnProperty(name))
            names.push(name);
        if (typeof(df[name]) !== "object" || typeof(df[name].length) === "undefined") {
            throw new Error("All fields must be arrays");
        } else if (typeof(length) !== "undefined" && length !== df[name].length) {
            throw new Error("All fields must be arrays of the same length");
        }
        length = df[name].length;
    }
    var results = [];
    var item;
    for (var row = 0; row < length; row++) {
        item = {};
        for (var col = 0; col < names.length; col++) {
            item[names[col]] = df[names[col]][row];
        }
        results.push(item);
    }
    return results;
  };

  window.HTMLWidgets.transposeArray2D = function(array) {
      if (array.length === 0) return array;
      var newArray = array[0].map(function(col, i) {
          return array.map(function(row) {
              return row[i]
          })
      });
      return newArray;
  };
  // Split value at splitChar, but allow splitChar to be escaped
  // using escapeChar. Any other characters escaped by escapeChar
  // will be included as usual (including escapeChar itself).
  function splitWithEscape(value, splitChar, escapeChar) {
    var results = [];
    var escapeMode = false;
    var currentResult = "";
    for (var pos = 0; pos < value.length; pos++) {
      if (!escapeMode) {
        if (value[pos] === splitChar) {
          results.push(currentResult);
          currentResult = "";
        } else if (value[pos] === escapeChar) {
          escapeMode = true;
        } else {
          currentResult += value[pos];
        }
      } else {
        currentResult += value[pos];
        escapeMode = false;
      }
    }
    if (currentResult !== "") {
      results.push(currentResult);
    }
    return results;
  }
  // Function authored by Yihui/JJ Allaire
  window.HTMLWidgets.evaluateStringMember = function(o, member) {
    var parts = splitWithEscape(member, '.', '\\');
    for (var i = 0, l = parts.length; i < l; i++) {
      var part = parts[i];
      // part may be a character or 'numeric' member name
      if (o !== null && typeof o === "object" && part in o) {
        if (i == (l - 1)) { // if we are at the end of the line then evalulate
          if (typeof o[part] === "string")
            o[part] = tryEval(o[part]);
        } else { // otherwise continue to next embedded object
          o = o[part];
        }
      }
    }
  };

  // Retrieve the HTMLWidget instance (i.e. the return value of an
  // HTMLWidget binding's initialize() or factory() function)
  // associated with an element, or null if none.
  window.HTMLWidgets.getInstance = function(el) {
    return elementData(el, "init_result");
  };

  // Finds the first element in the scope that matches the selector,
  // and returns the HTMLWidget instance (i.e. the return value of
  // an HTMLWidget binding's initialize() or factory() function)
  // associated with that element, if any. If no element matches the
  // selector, or the first matching element has no HTMLWidget
  // instance associated with it, then null is returned.
  //
  // The scope argument is optional, and defaults to window.document.
  window.HTMLWidgets.find = function(scope, selector) {
    if (arguments.length == 1) {
      selector = scope;
      scope = document;
    }

    var el = scope.querySelector(selector);
    if (el === null) {
      return null;
    } else {
      return window.HTMLWidgets.getInstance(el);
    }
  };

  // Finds all elements in the scope that match the selector, and
  // returns the HTMLWidget instances (i.e. the return values of
  // an HTMLWidget binding's initialize() or factory() function)
  // associated with the elements, in an array. If elements that
  // match the selector don't have an associated HTMLWidget
  // instance, the returned array will contain nulls.
  //
  // The scope argument is optional, and defaults to window.document.
  window.HTMLWidgets.findAll = function(scope, selector) {
    if (arguments.length == 1) {
      selector = scope;
      scope = document;
    }

    var nodes = scope.querySelectorAll(selector);
    var results = [];
    for (var i = 0; i < nodes.length; i++) {
      results.push(window.HTMLWidgets.getInstance(nodes[i]));
    }
    return results;
  };

  var postRenderHandlers = [];
  function invokePostRenderHandlers() {
    while (postRenderHandlers.length) {
      var handler = postRenderHandlers.shift();
      if (handler) {
        handler();
      }
    }
  }

  // Register the given callback function to be invoked after the
  // next time static widgets are rendered.
  window.HTMLWidgets.addPostRenderHandler = function(callback) {
    postRenderHandlers.push(callback);
  };

  // Takes a new-style instance-bound definition, and returns an
  // old-style class-bound definition. This saves us from having
  // to rewrite all the logic in this file to accomodate both
  // types of definitions.
  function createLegacyDefinitionAdapter(defn) {
    var result = {
      name: defn.name,
      type: defn.type,
      initialize: function(el, width, height) {
        return defn.factory(el, width, height);
      },
      renderValue: function(el, x, instance) {
        return instance.renderValue(x);
      },
      resize: function(el, width, height, instance) {
        return instance.resize(width, height);
      }
    };

    if (defn.find)
      result.find = defn.find;
    if (defn.renderError)
      result.renderError = defn.renderError;
    if (defn.clearError)
      result.clearError = defn.clearError;

    return result;
  }
})();
</script>
<style type="text/css">.maplibregl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgb(0,0,0,0)}.maplibregl-canvas{left:0;position:absolute;top:0}.maplibregl-map:fullscreen{height:100%;width:100%}.maplibregl-ctrl-group button.maplibregl-ctrl-compass{touch-action:none}.maplibregl-canvas-container.maplibregl-interactive,.maplibregl-ctrl-group button.maplibregl-ctrl-compass{cursor:grab;-webkit-user-select:none;-moz-user-select:none;user-select:none}.maplibregl-canvas-container.maplibregl-interactive.maplibregl-track-pointer{cursor:pointer}.maplibregl-canvas-container.maplibregl-interactive:active,.maplibregl-ctrl-group button.maplibregl-ctrl-compass:active{cursor:grabbing}.maplibregl-canvas-container.maplibregl-touch-zoom-rotate,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate .maplibregl-canvas{touch-action:pan-x pan-y}.maplibregl-canvas-container.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:pinch-zoom}.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:none}.maplibregl-canvas-container.maplibregl-touch-drag-pan.maplibregl-cooperative-gestures,.maplibregl-canvas-container.maplibregl-touch-drag-pan.maplibregl-cooperative-gestures .maplibregl-canvas{touch-action:pan-x pan-y}.maplibregl-ctrl-bottom-left,.maplibregl-ctrl-bottom-right,.maplibregl-ctrl-top-left,.maplibregl-ctrl-top-right{pointer-events:none;position:absolute;z-index:2}.maplibregl-ctrl-top-left{left:0;top:0}.maplibregl-ctrl-top-right{right:0;top:0}.maplibregl-ctrl-bottom-left{bottom:0;left:0}.maplibregl-ctrl-bottom-right{bottom:0;right:0}.maplibregl-ctrl{clear:both;pointer-events:auto;transform:translate(0)}.maplibregl-ctrl-top-left .maplibregl-ctrl{float:left;margin:10px 0 0 10px}.maplibregl-ctrl-top-right .maplibregl-ctrl{float:right;margin:10px 10px 0 0}.maplibregl-ctrl-bottom-left .maplibregl-ctrl{float:left;margin:0 0 10px 10px}.maplibregl-ctrl-bottom-right .maplibregl-ctrl{float:right;margin:0 10px 10px 0}.maplibregl-ctrl-group{background:#fff;border-radius:4px}.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (forced-colors:active){.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.maplibregl-ctrl-group button{background-color:transparent;border:0;box-sizing:border-box;cursor:pointer;display:block;height:29px;outline:none;padding:0;width:29px}.maplibregl-ctrl-group button+button{border-top:1px solid #ddd}.maplibregl-ctrl button .maplibregl-ctrl-icon{background-position:50%;background-repeat:no-repeat;display:block;height:100%;width:100%}@media (forced-colors:active){.maplibregl-ctrl-icon{background-color:transparent}.maplibregl-ctrl-group button+button{border-top:1px solid ButtonText}}.maplibregl-ctrl button::-moz-focus-inner{border:0;padding:0}.maplibregl-ctrl-attrib-button:focus,.maplibregl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.maplibregl-ctrl button:disabled{cursor:not-allowed}.maplibregl-ctrl button:disabled .maplibregl-ctrl-icon{opacity:.25}@media (hover:hover){.maplibregl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}}.maplibregl-ctrl button:not(:disabled):active{background-color:rgba(0,0,0,.05)}.maplibregl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.maplibregl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.maplibregl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.maplibregl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.maplibregl-ctrl-group button:focus:only-child{border-radius:inherit}.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1z'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 29 29'%3E%3Cpath d='m10.5 14 4-8 4 8z'/%3E%3Cpath fill='%23ccc' d='m10.5 16 4 8 4-8z'/%3E%3C/svg%3E")}}.maplibregl-ctrl button.maplibregl-ctrl-globe .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='none' stroke='%23333' viewBox='0 0 22 22'%3E%3Ccircle cx='11' cy='11' r='8.5'/%3E%3Cpath d='M17.5 11c0 4.819-3.02 8.5-6.5 8.5S4.5 15.819 4.5 11 7.52 2.5 11 2.5s6.5 3.681 6.5 8.5Z'/%3E%3Cpath d='M13.5 11c0 2.447-.331 4.64-.853 6.206-.262.785-.562 1.384-.872 1.777-.314.399-.58.517-.775.517s-.461-.118-.775-.517c-.31-.393-.61-.992-.872-1.777C8.831 15.64 8.5 13.446 8.5 11s.331-4.64.853-6.206c.262-.785.562-1.384.872-1.777.314-.399.58-.517.775-.517s.461.118.775.517c.31.393.61.992.872 1.777.522 1.565.853 3.76.853 6.206Z'/%3E%3Cpath d='M11 7.5c-1.909 0-3.622-.166-4.845-.428-.616-.132-1.08-.283-1.379-.434a1.3 1.3 0 0 1-.224-.138q.07-.058.224-.138c.299-.151.763-.302 1.379-.434C7.378 5.666 9.091 5.5 11 5.5s3.622.166 4.845.428c.616.132 1.08.283 1.379.434.105.053.177.1.224.138q-.07.058-.224.138c-.299.151-.763.302-1.379.434-1.223.262-2.936.428-4.845.428ZM4.486 6.436ZM11 16.5c-1.909 0-3.622-.166-4.845-.428-.616-.132-1.08-.283-1.379-.434a1.3 1.3 0 0 1-.224-.138 1.3 1.3 0 0 1 .224-.138c.299-.151.763-.302 1.379-.434C7.378 14.666 9.091 14.5 11 14.5s3.622.166 4.845.428c.616.132 1.08.283 1.379.434.105.053.177.1.224.138a1.3 1.3 0 0 1-.224.138c-.299.151-.763.302-1.379.434-1.223.262-2.936.428-4.845.428Zm-6.514-1.064ZM11 12.5c-2.46 0-4.672-.222-6.255-.574-.796-.177-1.406-.38-1.805-.59a1.5 1.5 0 0 1-.39-.272.3.3 0 0 1-.047-.064.3.3 0 0 1 .048-.064c.066-.073.189-.167.389-.272.399-.21 1.009-.413 1.805-.59C6.328 9.722 8.54 9.5 11 9.5s4.672.222 6.256.574c.795.177 1.405.38 1.804.59.2.105.323.2.39.272a.3.3 0 0 1 .047.064.3.3 0 0 1-.048.064 1.4 1.4 0 0 1-.389.272c-.399.21-1.009.413-1.804.59-1.584.352-3.796.574-6.256.574Zm-8.501-1.51v.002zm0 .018v.002zm17.002.002v-.002zm0-.018v-.002z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-globe-enabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='none' stroke='%2333b5e5' viewBox='0 0 22 22'%3E%3Ccircle cx='11' cy='11' r='8.5'/%3E%3Cpath d='M17.5 11c0 4.819-3.02 8.5-6.5 8.5S4.5 15.819 4.5 11 7.52 2.5 11 2.5s6.5 3.681 6.5 8.5Z'/%3E%3Cpath d='M13.5 11c0 2.447-.331 4.64-.853 6.206-.262.785-.562 1.384-.872 1.777-.314.399-.58.517-.775.517s-.461-.118-.775-.517c-.31-.393-.61-.992-.872-1.777C8.831 15.64 8.5 13.446 8.5 11s.331-4.64.853-6.206c.262-.785.562-1.384.872-1.777.314-.399.58-.517.775-.517s.461.118.775.517c.31.393.61.992.872 1.777.522 1.565.853 3.76.853 6.206Z'/%3E%3Cpath d='M11 7.5c-1.909 0-3.622-.166-4.845-.428-.616-.132-1.08-.283-1.379-.434a1.3 1.3 0 0 1-.224-.138q.07-.058.224-.138c.299-.151.763-.302 1.379-.434C7.378 5.666 9.091 5.5 11 5.5s3.622.166 4.845.428c.616.132 1.08.283 1.379.434.105.053.177.1.224.138q-.07.058-.224.138c-.299.151-.763.302-1.379.434-1.223.262-2.936.428-4.845.428ZM4.486 6.436ZM11 16.5c-1.909 0-3.622-.166-4.845-.428-.616-.132-1.08-.283-1.379-.434a1.3 1.3 0 0 1-.224-.138 1.3 1.3 0 0 1 .224-.138c.299-.151.763-.302 1.379-.434C7.378 14.666 9.091 14.5 11 14.5s3.622.166 4.845.428c.616.132 1.08.283 1.379.434.105.053.177.1.224.138a1.3 1.3 0 0 1-.224.138c-.299.151-.763.302-1.379.434-1.223.262-2.936.428-4.845.428Zm-6.514-1.064ZM11 12.5c-2.46 0-4.672-.222-6.255-.574-.796-.177-1.406-.38-1.805-.59a1.5 1.5 0 0 1-.39-.272.3.3 0 0 1-.047-.064.3.3 0 0 1 .048-.064c.066-.073.189-.167.389-.272.399-.21 1.009-.413 1.805-.59C6.328 9.722 8.54 9.5 11 9.5s4.672.222 6.256.574c.795.177 1.405.38 1.804.59.2.105.323.2.39.272a.3.3 0 0 1 .047.064.3.3 0 0 1-.048.064 1.4 1.4 0 0 1-.389.272c-.399.21-1.009.413-1.804.59-1.584.352-3.796.574-6.256.574Zm-8.501-1.51v.002zm0 .018v.002zm17.002.002v-.002zm0-.018v-.002z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-terrain .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='%23333' viewBox='0 0 22 22'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-terrain-enabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' fill='%2333b5e5' viewBox='0 0 22 22'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23333' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23aaa' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e58978' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e54e33' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-waiting .maplibregl-ctrl-icon{animation:maplibregl-spin 2s linear infinite}@media (forced-colors:active){.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23fff' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23999' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e58978' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%2333b5e5' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23e54e33' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='29' height='29' fill='%23666' viewBox='0 0 20 20'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1m0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath fill='red' d='m14 5 1 1-9 9-1-1z'/%3E%3C/svg%3E")}}@keyframes maplibregl-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}a.maplibregl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E");background-repeat:no-repeat;cursor:pointer;display:block;height:23px;margin:0 0 -4px -4px;overflow:hidden;width:88px}a.maplibregl-ctrl-logo.maplibregl-compact{width:14px}@media (forced-colors:active){a.maplibregl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E")}}@media (forced-colors:active) and (prefers-color-scheme:light){a.maplibregl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath fill='%23000' fill-opacity='.4' fill-rule='evenodd' d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.25 1.25 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.25 1.25 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5 5 0 0 1 .314-.787l.009-.016a4.6 4.6 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.6 4.6 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4q.47.48.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.42 2.42 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.45 2.45 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675q.318.302.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.8 4.8 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.4 3.4 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.25 1.25 0 0 1 .689 1.004 4.7 4.7 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528q-.001.515-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.8 5.8 0 0 1-.548-2.512q0-.429.053-.843a1.3 1.3 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.8 4.8 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.5 4.5 0 0 1-1.935-.424 1.25 1.25 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.4 2.4 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.7 4.7 0 0 1-1.782 1.884 4.77 4.77 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.5 4.5 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a5 5 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.25 1.25 0 0 1-1.115.676h-.098a1.25 1.25 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15q.493-.356.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267q-.133-.329-.526-.658l-.032-.028a3.2 3.2 0 0 0-.668-.428l-.27-.12a3.3 3.3 0 0 0-1.235-.23q-1.136-.001-1.974.493a3.36 3.36 0 0 0-1.3 1.382q-.445.89-.444 2.074 0 1.2.51 2.107a3.8 3.8 0 0 0 1.382 1.381 3.9 3.9 0 0 0 1.893.477q.795 0 1.455-.33zm-2.789-5.38q-.576.675-.575 1.762 0 1.102.559 1.794.576.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.2 2.2 0 0 0 .468-.29l.178-.161a2.2 2.2 0 0 0 .397-.561q.244-.5.244-1.15v-.115q0-.708-.296-1.267l-.043-.077a2.2 2.2 0 0 0-.633-.709l-.13-.086-.047-.028a2.1 2.1 0 0 0-1.073-.285q-1.052 0-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.96.96 0 0 0-.353-.389.85.85 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.6 2.6 0 0 0 .331.423q.319.33.755.548l.173.074q.65.255 1.49.255 1.02 0 1.844-.493a3.45 3.45 0 0 0 1.316-1.4q.493-.904.493-2.089 0-1.909-.988-2.913-.988-1.02-2.584-1.02-.898 0-1.575.347a3 3 0 0 0-.415.262l-.199.166a3.4 3.4 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138q.206.29.48.5l.155.11.053.034q.51.296 1.119.297 1.07 0 1.645-.675.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.435 0-.835.16a2 2 0 0 0-.284.136 2 2 0 0 0-.363.254 2.2 2.2 0 0 0-.46.569l-.082.162a2.6 2.6 0 0 0-.213 1.072v.115q0 .707.296 1.267l.135.211zm.964-.818a1.1 1.1 0 0 0 .367.385.94.94 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a1 1 0 0 0-.503.135l-.012.007a.86.86 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.4 1.4 0 0 0 .14.66zm15.7-6.222q.347-.346.346-.856a1.05 1.05 0 0 0-.345-.79 1.18 1.18 0 0 0-.84-.329q-.51 0-.855.33a1.05 1.05 0 0 0-.346.79q0 .51.346.855.345.346.856.346.51 0 .839-.346zm4.337 9.314.033-1.332q.191.403.59.747l.098.081a4 4 0 0 0 .316.224l.223.122a3.2 3.2 0 0 0 1.44.322 3.8 3.8 0 0 0 1.875-.477 3.5 3.5 0 0 0 1.382-1.366q.527-.89.526-2.09 0-1.184-.444-2.073a3.24 3.24 0 0 0-1.283-1.399q-.823-.51-1.942-.51a3.5 3.5 0 0 0-1.527.344l-.086.043-.165.09a3 3 0 0 0-.33.214q-.432.315-.656.707a2 2 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.5 2.5 0 0 0 .566.7q.117.098.245.18l.144.08a2.1 2.1 0 0 0 .975.232q1.07 0 1.645-.675.576-.69.576-1.778 0-1.102-.576-1.777-.56-.691-1.645-.692a2.2 2.2 0 0 0-1.015.235q-.22.113-.415.282l-.15.142a2.1 2.1 0 0 0-.42.594q-.223.479-.223 1.1v.115q0 .705.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.87.87 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.1 1.1 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013q.345-.13.724-.14l.069-.002q.493 0 .642.099l.247-1.794q-.196-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2 2 0 0 0-.411.148 2.2 2.2 0 0 0-.4.249 2.5 2.5 0 0 0-.485.499 2.7 2.7 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884q0-.546.159-.943a1.5 1.5 0 0 1 .466-.636 2.5 2.5 0 0 1 .399-.253 2 2 0 0 1 .224-.099zm9.784 2.656.05-.922q0-1.743-.856-2.698-.838-.97-2.584-.97-1.119-.001-2.007.493a3.46 3.46 0 0 0-1.4 1.382q-.493.906-.493 2.106 0 1.07.428 1.975.428.89 1.332 1.432.906.526 2.255.526.973 0 1.668-.185l.044-.012.135-.04q.613-.184.984-.421l-.542-1.267q-.3.162-.642.274l-.297.087q-.51.131-1.3.131-.954 0-1.497-.444a1.6 1.6 0 0 1-.192-.193q-.366-.44-.512-1.234l-.004-.021zm-5.427-1.256-.003.022h3.752v-.138q-.011-.727-.288-1.118a1 1 0 0 0-.156-.176q-.46-.428-1.316-.428-.986 0-1.494.604-.379.45-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z'/%3E%3Cpath fill='%23fff' d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81q-1.02 0-1.893-.478a3.8 3.8 0 0 1-1.381-1.382q-.51-.906-.51-2.106 0-1.185.444-2.074a3.36 3.36 0 0 1 1.3-1.382q.839-.494 1.974-.494a3.3 3.3 0 0 1 1.234.231 3.3 3.3 0 0 1 .97.575q.396.33.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332q-.279.593-1.02 1.053a3.17 3.17 0 0 1-1.662.444zm.296-1.482q.938 0 1.58-.642.642-.66.642-1.711v-.115q0-.708-.296-1.267a2.2 2.2 0 0 0-.807-.872 2.1 2.1 0 0 0-1.119-.313q-1.053 0-1.629.692-.575.675-.575 1.76 0 1.103.559 1.795.577.675 1.645.675zm6.521-6.237h1.711v1.4q.906-1.597 2.83-1.597 1.596 0 2.584 1.02.988 1.005.988 2.914 0 1.185-.493 2.09a3.46 3.46 0 0 1-1.316 1.399 3.5 3.5 0 0 1-1.844.493q-.954 0-1.662-.329a2.67 2.67 0 0 1-1.086-.97l.017 5.134h-1.728zm4.048 6.22q1.07 0 1.645-.674.577-.69.576-1.762 0-1.119-.576-1.777-.558-.675-1.645-.675-.592 0-1.12.296-.51.28-.822.823-.296.527-.296 1.234v.115q0 .708.296 1.267.313.543.823.855.51.296 1.119.297z'/%3E%3Cpath fill='%23e1e3e9' d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.16 1.16 0 0 1-.856-.346 1.17 1.17 0 0 1-.346-.856 1.05 1.05 0 0 1 .346-.79q.346-.329.856-.329.494 0 .839.33a1.05 1.05 0 0 1 .345.79 1.16 1.16 0 0 1-.345.855q-.33.346-.84.346zm7.875 9.133a3.17 3.17 0 0 1-1.662-.444q-.723-.46-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283q.279-.658 1.086-1.119a3.5 3.5 0 0 1 1.778-.477q1.119 0 1.942.51a3.24 3.24 0 0 1 1.283 1.4q.445.888.444 2.072 0 1.201-.526 2.09a3.5 3.5 0 0 1-1.382 1.366 3.8 3.8 0 0 1-1.876.477zm-.296-1.481q1.069 0 1.645-.675.577-.69.577-1.778 0-1.102-.577-1.776-.56-.691-1.645-.692a2.12 2.12 0 0 0-1.58.659q-.642.641-.642 1.694v.115q0 .71.296 1.267a2.4 2.4 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481q.263-.757.856-1.217a2.14 2.14 0 0 1 1.349-.46q.527 0 .724.098l-.247 1.794q-.149-.099-.642-.099-.774 0-1.416.494-.626.493-.626 1.58v3.883h-1.777V9.242zm9.534 7.718q-1.35 0-2.255-.526-.904-.543-1.332-1.432a4.6 4.6 0 0 1-.428-1.975q0-1.2.493-2.106a3.46 3.46 0 0 1 1.4-1.382q.889-.495 2.007-.494 1.744 0 2.584.97.855.956.856 2.7 0 .444-.05.92h-5.43q.18 1.005.708 1.45.542.443 1.497.443.79 0 1.3-.131a4 4 0 0 0 .938-.362l.542 1.267q-.411.263-1.119.46-.708.198-1.711.197zm1.596-4.558q.016-1.02-.444-1.432-.46-.428-1.316-.428-1.728 0-1.991 1.86z'/%3E%3Cpath d='M5.074 15.948a.484.657 0 0 0-.486.659v1.84a.484.657 0 0 0 .486.659h4.101a.484.657 0 0 0 .486-.659v-1.84a.484.657 0 0 0-.486-.659zm3.56 1.16H5.617v.838h3.017z' style='fill:%23fff;fill-rule:evenodd;stroke-width:1.03600001'/%3E%3Cg style='stroke-width:1.12603545'%3E%3Cpath d='M-9.408-1.416c-3.833-.025-7.056 2.912-7.08 6.615-.02 3.08 1.653 4.832 3.107 6.268.903.892 1.721 1.74 2.32 2.902l-.525-.004c-.543-.003-.992.304-1.24.639a1.87 1.87 0 0 0-.362 1.121l-.011 1.877c-.003.402.104.787.347 1.125.244.338.688.653 1.23.656l4.142.028c.542.003.99-.306 1.238-.641a1.87 1.87 0 0 0 .363-1.121l.012-1.875a1.87 1.87 0 0 0-.348-1.127c-.243-.338-.688-.653-1.23-.656l-.518-.004c.597-1.145 1.425-1.983 2.348-2.87 1.473-1.414 3.18-3.149 3.2-6.226-.016-3.59-2.923-6.684-6.993-6.707m-.006 1.1v.002c3.274.02 5.92 2.532 5.9 5.6-.017 2.706-1.39 4.026-2.863 5.44-1.034.994-2.118 2.033-2.814 3.633-.018.041-.052.055-.075.065q-.013.004-.02.01a.34.34 0 0 1-.226.084.34.34 0 0 1-.224-.086l-.092-.077c-.699-1.615-1.768-2.669-2.781-3.67-1.454-1.435-2.797-2.762-2.78-5.478.02-3.067 2.7-5.545 5.975-5.523m-.02 2.826c-1.62-.01-2.944 1.315-2.955 2.96-.01 1.646 1.295 2.988 2.916 2.999h.002c1.621.01 2.943-1.316 2.953-2.961.011-1.646-1.294-2.988-2.916-2.998m-.005 1.1c1.017.006 1.829.83 1.822 1.89s-.83 1.874-1.848 1.867c-1.018-.006-1.829-.83-1.822-1.89s.83-1.874 1.848-1.868m-2.155 11.857 4.14.025c.271.002.49.305.487.676l-.013 1.875c-.003.37-.224.67-.495.668l-4.14-.025c-.27-.002-.487-.306-.485-.676l.012-1.875c.003-.37.224-.67.494-.668' style='color:%23000;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:medium;line-height:normal;font-family:sans-serif;font-variant-ligatures:normal;font-variant-position:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-alternates:normal;font-feature-settings:normal;text-indent:0;text-align:start;text-decoration:none;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:%23000;letter-spacing:normal;word-spacing:normal;text-transform:none;writing-mode:lr-tb;direction:ltr;text-orientation:mixed;dominant-baseline:auto;baseline-shift:baseline;text-anchor:start;white-space:normal;shape-padding:0;clip-rule:evenodd;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:%23000;solid-opacity:1;vector-effect:none;fill:%23000;fill-opacity:.4;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-9.415-.316C-12.69-.338-15.37 2.14-15.39 5.207c-.017 2.716 1.326 4.041 2.78 5.477 1.013 1 2.081 2.055 2.78 3.67l.092.076a.34.34 0 0 0 .225.086.34.34 0 0 0 .227-.083l.019-.01c.022-.009.057-.024.074-.064.697-1.6 1.78-2.64 2.814-3.634 1.473-1.414 2.847-2.733 2.864-5.44.02-3.067-2.627-5.58-5.901-5.601m-.057 8.784c1.621.011 2.944-1.315 2.955-2.96.01-1.646-1.295-2.988-2.916-2.999-1.622-.01-2.945 1.315-2.955 2.96s1.295 2.989 2.916 3' style='clip-rule:evenodd;fill:%23e1e3e9;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3Cpath d='M-11.594 15.465c-.27-.002-.492.297-.494.668l-.012 1.876c-.003.371.214.673.485.675l4.14.027c.271.002.492-.298.495-.668l.012-1.877c.003-.37-.215-.672-.485-.674z' style='clip-rule:evenodd;fill:%23fff;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:2.47727823;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:.4' transform='translate(15.553 2.85)scale(.88807)'/%3E%3C/g%3E%3C/svg%3E")}}.maplibregl-ctrl.maplibregl-ctrl-attrib{background-color:hsla(0,0%,100%,.5);margin:0;padding:0 5px}@media screen{.maplibregl-ctrl-attrib.maplibregl-compact{background-color:#fff;border-radius:12px;box-sizing:content-box;color:#000;margin:10px;min-height:20px;padding:2px 24px 2px 0;position:relative}.maplibregl-ctrl-attrib.maplibregl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact-show,.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact-show{border-radius:12px;padding:2px 8px 2px 28px}.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-inner{display:none}.maplibregl-ctrl-attrib-button{background-color:hsla(0,0%,100%,.5);background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E");border:0;border-radius:12px;box-sizing:border-box;cursor:pointer;display:none;height:24px;outline:none;position:absolute;right:0;top:0;width:24px}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;list-style:none}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button::-webkit-details-marker{display:none}.maplibregl-ctrl-bottom-left .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-top-left .maplibregl-ctrl-attrib-button{left:0}.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-inner{display:block}.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.maplibregl-ctrl-bottom-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;right:0}.maplibregl-ctrl-top-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{right:0;top:0}.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{left:0;top:0}.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;left:0}}@media screen and (forced-colors:active){.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='%23fff' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E")}}@media screen and (forced-colors:active) and (prefers-color-scheme:light){.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill-rule='evenodd' viewBox='0 0 20 20'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E")}}.maplibregl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.maplibregl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.maplibregl-attrib-empty{display:none}.maplibregl-ctrl-scale{background-color:hsla(0,0%,100%,.75);border:2px solid #333;border-top:#333;box-sizing:border-box;color:#333;font-size:10px;padding:0 5px;white-space:nowrap}.maplibregl-popup{display:flex;left:0;pointer-events:none;position:absolute;top:0;will-change:transform}.maplibregl-popup-anchor-top,.maplibregl-popup-anchor-top-left,.maplibregl-popup-anchor-top-right{flex-direction:column}.maplibregl-popup-anchor-bottom,.maplibregl-popup-anchor-bottom-left,.maplibregl-popup-anchor-bottom-right{flex-direction:column-reverse}.maplibregl-popup-anchor-left{flex-direction:row}.maplibregl-popup-anchor-right{flex-direction:row-reverse}.maplibregl-popup-tip{border:10px solid transparent;height:0;width:0;z-index:1}.maplibregl-popup-anchor-top .maplibregl-popup-tip{align-self:center;border-bottom-color:#fff;border-top:none}.maplibregl-popup-anchor-top-left .maplibregl-popup-tip{align-self:flex-start;border-bottom-color:#fff;border-left:none;border-top:none}.maplibregl-popup-anchor-top-right .maplibregl-popup-tip{align-self:flex-end;border-bottom-color:#fff;border-right:none;border-top:none}.maplibregl-popup-anchor-bottom .maplibregl-popup-tip{align-self:center;border-bottom:none;border-top-color:#fff}.maplibregl-popup-anchor-bottom-left .maplibregl-popup-tip{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.maplibregl-popup-anchor-bottom-right .maplibregl-popup-tip{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.maplibregl-popup-anchor-left .maplibregl-popup-tip{align-self:center;border-left:none;border-right-color:#fff}.maplibregl-popup-anchor-right .maplibregl-popup-tip{align-self:center;border-left-color:#fff;border-right:none}.maplibregl-popup-close-button{background-color:transparent;border:0;border-radius:0 3px 0 0;cursor:pointer;position:absolute;right:0;top:0}.maplibregl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.maplibregl-popup-content{background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:15px 10px;pointer-events:auto;position:relative}.maplibregl-popup-anchor-top-left .maplibregl-popup-content{border-top-left-radius:0}.maplibregl-popup-anchor-top-right .maplibregl-popup-content{border-top-right-radius:0}.maplibregl-popup-anchor-bottom-left .maplibregl-popup-content{border-bottom-left-radius:0}.maplibregl-popup-anchor-bottom-right .maplibregl-popup-content{border-bottom-right-radius:0}.maplibregl-popup-track-pointer{display:none}.maplibregl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.maplibregl-map:hover .maplibregl-popup-track-pointer{display:flex}.maplibregl-map:active .maplibregl-popup-track-pointer{display:none}.maplibregl-marker{left:0;position:absolute;top:0;transition:opacity .2s;will-change:transform}.maplibregl-user-location-dot,.maplibregl-user-location-dot:before{background-color:#1da1f2;border-radius:50%;height:15px;width:15px}.maplibregl-user-location-dot:before{animation:maplibregl-user-location-dot-pulse 2s infinite;content:"";position:absolute}.maplibregl-user-location-dot:after{border:2px solid #fff;border-radius:50%;box-shadow:0 0 3px rgba(0,0,0,.35);box-sizing:border-box;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px}@keyframes maplibregl-user-location-dot-pulse{0%{opacity:1;transform:scale(1)}70%{opacity:0;transform:scale(3)}to{opacity:0;transform:scale(1)}}.maplibregl-user-location-dot-stale{background-color:#aaa}.maplibregl-user-location-dot-stale:after{display:none}.maplibregl-user-location-accuracy-circle{background-color:#1da1f233;border-radius:100%;height:1px;width:1px}.maplibregl-crosshair,.maplibregl-crosshair .maplibregl-interactive,.maplibregl-crosshair .maplibregl-interactive:active{cursor:crosshair}.maplibregl-boxzoom{background:#fff;border:2px dotted #202020;height:0;left:0;opacity:.5;position:absolute;top:0;width:0}.maplibregl-cooperative-gesture-screen{align-items:center;background:rgba(0,0,0,.4);color:#fff;display:flex;font-size:1.4em;inset:0;justify-content:center;line-height:1.2;opacity:0;padding:1rem;pointer-events:none;position:absolute;transition:opacity 1s ease 1s;z-index:99999}.maplibregl-cooperative-gesture-screen.maplibregl-show{opacity:1;transition:opacity .05s}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:none}@media (hover:none),(pointer:coarse){.maplibregl-cooperative-gesture-screen .maplibregl-desktop-message{display:none}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:block}}.maplibregl-pseudo-fullscreen{height:100%!important;left:0!important;position:fixed!important;top:0!important;width:100%!important;z-index:99999}</style>
<script>/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.15.0/LICENSE.txt
 */
(function (global, factory) {
typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
typeof define === 'function' && define.amd ? define(factory) :
(global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.maplibregl = factory());
})(this, (function () { 'use strict';

/* eslint-disable */

var maplibregl = {};
var modules = {};
function define(moduleName, _dependencies, moduleFactory) {
    modules[moduleName] = moduleFactory;

    // to get the list of modules see generated dist/maplibre-gl-dev.js file (look for `define(` calls)
    if (moduleName !== 'index') {
        return;
    }

    // we assume that when an index module is initializing then other modules are loaded already
    var workerBundleString = 'var sharedModule = {}; (' + modules.shared + ')(sharedModule); (' + modules.worker + ')(sharedModule);'

    var sharedModule = {};
    // the order of arguments of a module factory depends on rollup (it decides who is whose dependency)
    // to check the correct order, see dist/maplibre-gl-dev.js file (look for `define(` calls)
    // we assume that for our 3 chunks it will generate 3 modules and their order is predefined like the following
    modules.shared(sharedModule);
    modules.index(maplibregl, sharedModule);

    if (typeof window !== 'undefined') {
        maplibregl.setWorkerUrl(window.URL.createObjectURL(new Blob([workerBundleString], { type: 'text/javascript' })));
    }

    return maplibregl;
};



define("shared",["exports"],(function(t){"use strict";function e(t,e,r,n){return new(r||(r=Promise))((function(i,s){function a(t){try{l(n.next(t));}catch(t){s(t);}}function o(t){try{l(n.throw(t));}catch(t){s(t);}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e);}))).then(a,o);}l((n=n.apply(t,e||[])).next());}))}function r(t,e){this.x=t,this.y=e;}function n(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var i,s;"function"==typeof SuppressedError&&SuppressedError,r.prototype={clone(){return new r(this.x,this.y)},add(t){return this.clone()._add(t)},sub(t){return this.clone()._sub(t)},multByPoint(t){return this.clone()._multByPoint(t)},divByPoint(t){return this.clone()._divByPoint(t)},mult(t){return this.clone()._mult(t)},div(t){return this.clone()._div(t)},rotate(t){return this.clone()._rotate(t)},rotateAround(t,e){return this.clone()._rotateAround(t,e)},matMult(t){return this.clone()._matMult(t)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(t){return this.x===t.x&&this.y===t.y},dist(t){return Math.sqrt(this.distSqr(t))},distSqr(t){const e=t.x-this.x,r=t.y-this.y;return e*e+r*r},angle(){return Math.atan2(this.y,this.x)},angleTo(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith(t){return this.angleWithSep(t.x,t.y)},angleWithSep(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult(t){const e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add(t){return this.x+=t.x,this.y+=t.y,this},_sub(t){return this.x-=t.x,this.y-=t.y,this},_mult(t){return this.x*=t,this.y*=t,this},_div(t){return this.x/=t,this.y/=t,this},_multByPoint(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint(t){return this.x/=t.x,this.y/=t.y,this},_unit(){return this._div(this.mag()),this},_perp(){const t=this.y;return this.y=this.x,this.x=-t,this},_rotate(t){const e=Math.cos(t),r=Math.sin(t),n=r*this.x+e*this.y;return this.x=e*this.x-r*this.y,this.y=n,this},_rotateAround(t,e){const r=Math.cos(t),n=Math.sin(t),i=e.y+n*(this.x-e.x)+r*(this.y-e.y);return this.x=e.x+r*(this.x-e.x)-n*(this.y-e.y),this.y=i,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:r},r.convert=function(t){if(t instanceof r)return t;if(Array.isArray(t))return new r(+t[0],+t[1]);if(void 0!==t.x&&void 0!==t.y)return new r(+t.x,+t.y);throw new Error("Expected [x, y] or {x, y} point format")};var a=function(){if(s)return i;function t(t,e,r,n){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=r,this.p2y=n;}return s=1,i=t,t.prototype={sampleCurveX:function(t){return ((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return ((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return (3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(void 0===e&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var r=t,n=0;n<8;n++){var i=this.sampleCurveX(r)-t;if(Math.abs(i)<e)return r;var s=this.sampleCurveDerivativeX(r);if(Math.abs(s)<1e-6)break;r-=i/s;}var a=0,o=1;for(r=t,n=0;n<20&&(i=this.sampleCurveX(r),!(Math.abs(i-t)<e));n++)t>i?a=r:o=r,r=.5*(o-a)+a;return r},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}},i}(),o=n(a);let l,u;function c(){return null==l&&(l="undefined"!=typeof OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),l}function h(){if(null==u&&(u=!1,c())){const t=5,e=new OffscreenCanvas(t,t).getContext("2d",{willReadFrequently:!0});if(e){for(let r=0;r<t*t;r++){const n=4*r;e.fillStyle=`rgb(${n},${n+1},${n+2})`,e.fillRect(r%t,Math.floor(r/t),1,1);}const r=e.getImageData(0,0,t,t).data;for(let e=0;e<t*t*4;e++)if(e%4!=3&&r[e]!==e){u=!0;break}}}return u||!1}var p=1e-6,f="undefined"!=typeof Float32Array?Float32Array:Array;function d(){var t=new f(9);return f!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function y(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function m(){var t=new f(3);return f!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function g(t){var e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)}function x(t,e,r){var n=new f(3);return n[0]=t,n[1]=e,n[2]=r,n}function v(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function b(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function w(t,e,r){var n=e[0],i=e[1],s=e[2],a=r[0],o=r[1],l=r[2];return t[0]=i*l-s*o,t[1]=s*a-n*l,t[2]=n*o-i*a,t}var _,S=g;function A(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*s+r[12]*a,t[1]=r[1]*n+r[5]*i+r[9]*s+r[13]*a,t[2]=r[2]*n+r[6]*i+r[10]*s+r[14]*a,t[3]=r[3]*n+r[7]*i+r[11]*s+r[15]*a,t}function k(){var t=new f(4);return f!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function E(t,e,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"zyx",s=Math.PI/360;e*=s,n*=s,r*=s;var a=Math.sin(e),o=Math.cos(e),l=Math.sin(r),u=Math.cos(r),c=Math.sin(n),h=Math.cos(n);switch(i){case "xyz":t[0]=a*u*h+o*l*c,t[1]=o*l*h-a*u*c,t[2]=o*u*c+a*l*h,t[3]=o*u*h-a*l*c;break;case "xzy":t[0]=a*u*h-o*l*c,t[1]=o*l*h-a*u*c,t[2]=o*u*c+a*l*h,t[3]=o*u*h+a*l*c;break;case "yxz":t[0]=a*u*h+o*l*c,t[1]=o*l*h-a*u*c,t[2]=o*u*c-a*l*h,t[3]=o*u*h+a*l*c;break;case "yzx":t[0]=a*u*h+o*l*c,t[1]=o*l*h+a*u*c,t[2]=o*u*c-a*l*h,t[3]=o*u*h-a*l*c;break;case "zxy":t[0]=a*u*h-o*l*c,t[1]=o*l*h+a*u*c,t[2]=o*u*c+a*l*h,t[3]=o*u*h-a*l*c;break;case "zyx":t[0]=a*u*h-o*l*c,t[1]=o*l*h+a*u*c,t[2]=o*u*c-a*l*h,t[3]=o*u*h+a*l*c;break;default:throw new Error("Unknown angle order "+i)}return t}function T(){var t=new f(2);return f!=Float32Array&&(t[0]=0,t[1]=0),t}function I(t,e){var r=new f(2);return r[0]=t,r[1]=e,r}m(),_=new f(4),f!=Float32Array&&(_[0]=0,_[1]=0,_[2]=0,_[3]=0),m(),x(1,0,0),x(0,1,0),k(),k(),d(),T();const M=8192;function F(t,e,r){return e*(M/(t.tileSize*Math.pow(2,r-t.tileID.overscaledZ)))}function D(t,e){return (t%e+e)%e}function z(t,e,r){return t*(1-r)+e*r}function P(t){if(t<=0)return 0;if(t>=1)return 1;const e=t*t,r=e*t;return 4*(t<.5?r:3*(t-e)+r-.75)}function B(t,e,r,n){const i=new o(t,e,r,n);return t=>i.solve(t)}const V=B(.25,.1,.25,1);function C(t,e,r){return Math.min(r,Math.max(e,t))}function L(t,e,r){const n=r-e,i=((t-e)%n+n)%n+e;return i===e?r:i}function O(t,...e){for(const r of e)for(const e in r)t[e]=r[e];return t}let R=1;function N(t,e,r){const n={};for(const r in t)n[r]=e.call(this,t[r],r,t);return n}function $(t,e,r){const n={};for(const r in t)e.call(this,t[r],r,t)&&(n[r]=t[r]);return n}function U(t){return Array.isArray(t)?t.map(U):"object"==typeof t&&t?N(t,U):t}const q={};function j(t){q[t]||("undefined"!=typeof console&&console.warn(t),q[t]=!0);}function G(t,e,r){return (r.y-t.y)*(e.x-t.x)>(e.y-t.y)*(r.x-t.x)}function X(t){return "undefined"!=typeof WorkerGlobalScope&&void 0!==t&&t instanceof WorkerGlobalScope}let Y=null;function Z(t){return "undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap}const H="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function K(t,r,n,i,s){return e(this,void 0,void 0,(function*(){if("undefined"==typeof VideoFrame)throw new Error("VideoFrame not supported");const e=new VideoFrame(t,{timestamp:0});try{const a=null==e?void 0:e.format;if(!a||!a.startsWith("BGR")&&!a.startsWith("RGB"))throw new Error(`Unrecognized format ${a}`);const o=a.startsWith("BGR"),l=new Uint8ClampedArray(i*s*4);if(yield e.copyTo(l,function(t,e,r,n,i){const s=4*Math.max(-e,0),a=(Math.max(0,r)-r)*n*4+s,o=4*n,l=Math.max(0,e),u=Math.max(0,r);return {rect:{x:l,y:u,width:Math.min(t.width,e+n)-l,height:Math.min(t.height,r+i)-u},layout:[{offset:a,stride:o}]}}(t,r,n,i,s)),o)for(let t=0;t<l.length;t+=4){const e=l[t];l[t]=l[t+2],l[t+2]=e;}return l}finally{e.close();}}))}let W,J;function Q(t,e,r,n){return t.addEventListener(e,r,n),{unsubscribe:()=>{t.removeEventListener(e,r,n);}}}function tt(t){return t*Math.PI/180}function et(t){return t/Math.PI*180}const rt={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},nt={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},it="AbortError";class st extends Error{constructor(t=it){super(t instanceof Error?t.message:t),this.name=it,t instanceof Error&&t.stack&&(this.stack=t.stack);}}function at(t){return t.name===it}const ot={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function lt(t){return ot.REGISTERED_PROTOCOLS[t.substring(0,t.indexOf("://"))]}const ut="global-dispatcher";class ct extends Error{constructor(t,e,r,n){super(`AJAXError: ${e} (${t}): ${r}`),this.status=t,this.statusText=e,this.url=r,this.body=n;}}const ht=()=>X(self)?self.worker&&self.worker.referrer:("blob:"===window.location.protocol?window.parent:window).location.href,pt=function(t,r){if(/:\/\//.test(t.url)&&!/^https?:|^file:/.test(t.url)){const e=lt(t.url);if(e)return e(t,r);if(X(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:t,targetMapId:ut},r)}if(!(/^file:/.test(n=t.url)||/^file:/.test(ht())&&!/^\w+:/.test(n))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(t,r){return e(this,void 0,void 0,(function*(){const e=new Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,cache:t.cache,referrer:ht(),signal:r.signal});let n,i;"json"!==t.type||e.headers.has("Accept")||e.headers.set("Accept","application/json");try{n=yield fetch(e);}catch(e){if(at(e))throw e;throw new ct(0,e.message,t.url,new Blob)}if(!n.ok){const e=yield n.blob();throw new ct(n.status,n.statusText,t.url,e)}i="arrayBuffer"===t.type||"image"===t.type?n.arrayBuffer():"json"===t.type?n.json():n.text();const s=yield i;return r.signal.throwIfAborted(),{data:s,cacheControl:n.headers.get("Cache-Control"),expires:n.headers.get("Expires")}}))}(t,r);if(X(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:t,mustQueue:!0,targetMapId:ut},r)}var n;return function(t,e){return new Promise(((r,n)=>{var i;const s=new XMLHttpRequest;s.open(t.method||"GET",t.url,!0),"arrayBuffer"!==t.type&&"image"!==t.type||(s.responseType="arraybuffer");for(const e in t.headers)s.setRequestHeader(e,t.headers[e]);"json"===t.type&&(s.responseType="text",(null===(i=t.headers)||void 0===i?void 0:i.Accept)||s.setRequestHeader("Accept","application/json")),s.withCredentials="include"===t.credentials,s.onerror=()=>{n(new Error(s.statusText));},s.onload=()=>{if(!e.signal.aborted)if((s.status>=200&&s.status<300||0===s.status)&&null!==s.response){let e=s.response;if("json"===t.type)try{e=JSON.parse(s.response);}catch(t){return void n(t)}r({data:e,cacheControl:s.getResponseHeader("Cache-Control"),expires:s.getResponseHeader("Expires")});}else {const e=new Blob([s.response],{type:s.getResponseHeader("Content-Type")});n(new ct(s.status,s.statusText,t.url,e));}},e.signal.addEventListener("abort",(()=>{s.abort(),n(new st(e.signal.reason));})),s.send(t.body);}))}(t,r)};function ft(t){if(!t||t.indexOf("://")<=0||0===t.indexOf("data:image/")||0===t.indexOf("blob:"))return !0;const e=new URL(t),r=window.location;return e.protocol===r.protocol&&e.host===r.host}function dt(t,e,r){r[t]&&-1!==r[t].indexOf(e)||(r[t]=r[t]||[],r[t].push(e));}function yt(t,e,r){if(r&&r[t]){const n=r[t].indexOf(e);-1!==n&&r[t].splice(n,1);}}class mt{constructor(t,e={}){O(this,e),this.type=t;}}class gt extends mt{constructor(t,e={}){super("error",O({error:t},e));}}class xt{on(t,e){return this._listeners=this._listeners||{},dt(t,e,this._listeners),{unsubscribe:()=>{this.off(t,e);}}}off(t,e){return yt(t,e,this._listeners),yt(t,e,this._oneTimeListeners),this}once(t,e){return e?(this._oneTimeListeners=this._oneTimeListeners||{},dt(t,e,this._oneTimeListeners),this):new Promise((e=>this.once(t,e)))}fire(t,e){"string"==typeof t&&(t=new mt(t,e||{}));const r=t.type;if(this.listens(r)){t.target=this;const e=this._listeners&&this._listeners[r]?this._listeners[r].slice():[];for(const r of e)r.call(this,t);const n=this._oneTimeListeners&&this._oneTimeListeners[r]?this._oneTimeListeners[r].slice():[];for(const e of n)yt(r,e,this._oneTimeListeners),e.call(this,t);const i=this._eventedParent;i&&(O(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),i.fire(t));}else t instanceof gt&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,e){return this._eventedParent=t,this._eventedParentData=e,this}}var vt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number",length:2},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"filter"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},filter:{type:"boolean",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"expression_name",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}},interpolation:{type:"array",value:"interpolation_name",minimum:1},interpolation_name:{type:"enum",values:{linear:{syntax:{overloads:[{parameters:[],"output-type":"interpolation"}],parameters:[]}},exponential:{syntax:{overloads:[{parameters:["base"],"output-type":"interpolation"}],parameters:[{name:"base",type:"number literal"}]}},"cubic-bezier":{syntax:{overloads:[{parameters:["x1","y1","x2","y2"],"output-type":"interpolation"}],parameters:[{name:"x1",type:"number literal"},{name:"y1",type:"number literal"},{name:"x2",type:"number literal"},{name:"y2",type:"number literal"}]}}}}};const bt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function wt(t,e){const r={};for(const e in t)"ref"!==e&&(r[e]=t[e]);return bt.forEach((t=>{t in e&&(r[t]=e[t]);})),r}function _t(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return !1;for(let r=0;r<t.length;r++)if(!_t(t[r],e[r]))return !1;return !0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return !1;if(Object.keys(t).length!==Object.keys(e).length)return !1;for(const r in t)if(!_t(t[r],e[r]))return !1;return !0}return t===e}function St(t,e){t.push(e);}function At(t,e,r){St(r,{command:"addSource",args:[t,e[t]]});}function kt(t,e,r){St(e,{command:"removeSource",args:[t]}),r[t]=!0;}function Et(t,e,r,n){kt(t,r,n),At(t,e,r);}function Tt(t,e,r){let n;for(n in t[r])if(Object.prototype.hasOwnProperty.call(t[r],n)&&"data"!==n&&!_t(t[r][n],e[r][n]))return !1;for(n in e[r])if(Object.prototype.hasOwnProperty.call(e[r],n)&&"data"!==n&&!_t(t[r][n],e[r][n]))return !1;return !0}function It(t,e,r,n,i,s){t=t||{},e=e||{};for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&(_t(t[a],e[a])||r.push({command:s,args:[n,a,e[a],i]}));for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&!Object.prototype.hasOwnProperty.call(t,a)&&(_t(t[a],e[a])||r.push({command:s,args:[n,a,e[a],i]}));}function Mt(t){return t.id}function Ft(t,e){return t[e.id]=e,t}class Dt{constructor(t,e,r,n){this.message=(t?`${t}: `:"")+r,n&&(this.identifier=n),null!=e&&e.__line__&&(this.line=e.__line__);}}function zt(t,...e){for(const r of e)for(const e in r)t[e]=r[e];return t}class Pt extends Error{constructor(t,e){super(e),this.message=e,this.key=t;}}class Bt{constructor(t,e=[]){this.parent=t,this.bindings={};for(const[t,r]of e)this.bindings[t]=r;}concat(t){return new Bt(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return !!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const Vt={kind:"null"},Ct={kind:"number"},Lt={kind:"string"},Ot={kind:"boolean"},Rt={kind:"color"},Nt={kind:"projectionDefinition"},$t={kind:"object"},Ut={kind:"value"},qt={kind:"collator"},jt={kind:"formatted"},Gt={kind:"padding"},Xt={kind:"colorArray"},Yt={kind:"numberArray"},Zt={kind:"resolvedImage"},Ht={kind:"variableAnchorOffsetCollection"};function Kt(t,e){return {kind:"array",itemType:t,N:e}}function Wt(t){if("array"===t.kind){const e=Wt(t.itemType);return "number"==typeof t.N?`array<${e}, ${t.N}>`:"value"===t.itemType.kind?"array":`array<${e}>`}return t.kind}const Jt=[Vt,Ct,Lt,Ot,Rt,Nt,jt,$t,Kt(Ut),Gt,Yt,Xt,Zt,Ht];function Qt(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Qt(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else {if(t.kind===e.kind)return null;if("value"===t.kind)for(const t of Jt)if(!Qt(t,e))return null}return `Expected ${Wt(t)} but found ${Wt(e)} instead.`}function te(t,e){return e.some((e=>e.kind===t.kind))}function ee(t,e){return e.some((e=>"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t))}function re(t,e){return "array"===t.kind&&"array"===e.kind?t.itemType.kind===e.itemType.kind&&"number"==typeof t.N:t.kind===e.kind}const ne=.96422,ie=.82521,se=4/29,ae=6/29,oe=3*ae*ae,le=ae*ae*ae,ue=Math.PI/180,ce=180/Math.PI;function he(t){return (t%=360)<0&&(t+=360),t}function pe([t,e,r,n]){let i,s;const a=de((.2225045*(t=fe(t))+.7168786*(e=fe(e))+.0606169*(r=fe(r)))/1);t===e&&e===r?i=s=a:(i=de((.4360747*t+.3850649*e+.1430804*r)/ne),s=de((.0139322*t+.0971045*e+.7141733*r)/ie));const o=116*a-16;return [o<0?0:o,500*(i-a),200*(a-s),n]}function fe(t){return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function de(t){return t>le?Math.pow(t,1/3):t/oe+se}function ye([t,e,r,n]){let i=(t+16)/116,s=isNaN(e)?i:i+e/500,a=isNaN(r)?i:i-r/200;return i=1*ge(i),s=ne*ge(s),a=ie*ge(a),[me(3.1338561*s-1.6168667*i-.4906146*a),me(-.9787684*s+1.9161415*i+.033454*a),me(.0719453*s-.2289914*i+1.4052427*a),n]}function me(t){return (t=t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055)<0?0:t>1?1:t}function ge(t){return t>ae?t*t*t:oe*(t-se)}const xe=Object.hasOwn||function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};function ve(t,e){return xe(t,e)?t[e]:void 0}function be(t){return parseInt(t.padEnd(2,t),16)/255}function we(t,e){return _e(e?t/100:t,0,1)}function _e(t,e,r){return Math.min(Math.max(e,t),r)}function Se(t){return !t.some(Number.isNaN)}const Ae={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function ke(t,e,r){return t+r*(e-t)}function Ee(t,e,r){return t.map(((t,n)=>ke(t,e[n],r)))}class Te{constructor(t,e,r,n=1,i=!0){this.r=t,this.g=e,this.b=r,this.a=n,i||(this.r*=n,this.g*=n,this.b*=n,n||this.overwriteGetter("rgb",[t,e,r,n]));}static parse(t){if(t instanceof Te)return t;if("string"!=typeof t)return;const e=function(t){if("transparent"===(t=t.toLowerCase().trim()))return [0,0,0,0];const e=ve(Ae,t);if(e){const[t,r,n]=e;return [t/255,r/255,n/255,1]}if(t.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(t)){const e=t.length<6?1:2;let r=1;return [be(t.slice(r,r+=e)),be(t.slice(r,r+=e)),be(t.slice(r,r+=e)),be(t.slice(r,r+e)||"ff")]}if(t.startsWith("rgb")){const e=t.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(e){const[t,r,n,i,s,a,o,l,u,c,h,p]=e,f=[i||" ",o||" ",c].join("");if("  "===f||"  /"===f||",,"===f||",,,"===f){const t=[n,a,u].join(""),e="%%%"===t?100:""===t?255:0;if(e){const t=[_e(+r/e,0,1),_e(+s/e,0,1),_e(+l/e,0,1),h?we(+h,p):1];if(Se(t))return t}}return}}const r=t.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(r){const[t,e,n,i,s,a,o,l,u]=r,c=[n||" ",s||" ",o].join("");if("  "===c||"  /"===c||",,"===c||",,,"===c){const t=[+e,_e(+i,0,100),_e(+a,0,100),l?we(+l,u):1];if(Se(t))return function([t,e,r,n]){function i(n){const i=(n+t/30)%12,s=e*Math.min(r,1-r);return r-s*Math.max(-1,Math.min(i-3,9-i,1))}return t=he(t),e/=100,r/=100,[i(0),i(8),i(4),n]}(t)}}}(t);return e?new Te(...e,!1):void 0}get rgb(){const{r:t,g:e,b:r,a:n}=this,i=n||1/0;return this.overwriteGetter("rgb",[t/i,e/i,r/i,n])}get hcl(){return this.overwriteGetter("hcl",function(t){const[e,r,n,i]=pe(t),s=Math.sqrt(r*r+n*n);return [Math.round(1e4*s)?he(Math.atan2(n,r)*ce):NaN,s,e,i]}(this.rgb))}get lab(){return this.overwriteGetter("lab",pe(this.rgb))}overwriteGetter(t,e){return Object.defineProperty(this,t,{value:e}),e}toString(){const[t,e,r,n]=this.rgb;return `rgba(${[t,e,r].map((t=>Math.round(255*t))).join(",")},${n})`}static interpolate(t,e,r,n="rgb"){switch(n){case "rgb":{const[n,i,s,a]=Ee(t.rgb,e.rgb,r);return new Te(n,i,s,a,!1)}case "hcl":{const[n,i,s,a]=t.hcl,[o,l,u,c]=e.hcl;let h,p;if(isNaN(n)||isNaN(o))isNaN(n)?isNaN(o)?h=NaN:(h=o,1!==s&&0!==s||(p=l)):(h=n,1!==u&&0!==u||(p=i));else {let t=o-n;o>n&&t>180?t-=360:o<n&&n-o>180&&(t+=360),h=n+r*t;}const[f,d,y,m]=function([t,e,r,n]){return t=isNaN(t)?0:t*ue,ye([r,Math.cos(t)*e,Math.sin(t)*e,n])}([h,null!=p?p:ke(i,l,r),ke(s,u,r),ke(a,c,r)]);return new Te(f,d,y,m,!1)}case "lab":{const[n,i,s,a]=ye(Ee(t.lab,e.lab,r));return new Te(n,i,s,a,!1)}}}}Te.black=new Te(0,0,0,1),Te.white=new Te(1,1,1,1),Te.transparent=new Te(0,0,0,0),Te.red=new Te(1,0,0,1);class Ie{constructor(t,e,r){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"});}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Me=["bottom","center","top"];class Fe{constructor(t,e,r,n,i,s){this.text=t,this.image=e,this.scale=r,this.fontStack=n,this.textColor=i,this.verticalAlign=s;}}class De{constructor(t){this.sections=t;}static fromString(t){return new De([new Fe(t,null,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((t=>0!==t.text.length||t.image&&0!==t.image.name.length))}static factory(t){return t instanceof De?t:De.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map((t=>t.text)).join("")}}class ze{constructor(t){this.values=t.slice();}static parse(t){if(t instanceof ze)return t;if("number"==typeof t)return new ze([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const e of t)if("number"!=typeof e)return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]];}return new ze(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,e,r){return new ze(Ee(t.values,e.values,r))}}class Pe{constructor(t){this.values=t.slice();}static parse(t){if(t instanceof Pe)return t;if("number"==typeof t)return new Pe([t]);if(Array.isArray(t)){for(const e of t)if("number"!=typeof e)return;return new Pe(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,e,r){return new Pe(Ee(t.values,e.values,r))}}class Be{constructor(t){this.values=t.slice();}static parse(t){if(t instanceof Be)return t;if("string"==typeof t){const e=Te.parse(t);if(!e)return;return new Be([e])}if(!Array.isArray(t))return;const e=[];for(const r of t){if("string"!=typeof r)return;const t=Te.parse(r);if(!t)return;e.push(t);}return new Be(e)}toString(){return JSON.stringify(this.values)}static interpolate(t,e,r,n="rgb"){const i=[];if(t.values.length!=e.values.length)throw new Error(`colorArray: Arrays have mismatched length (${t.values.length} vs. ${e.values.length}), cannot interpolate.`);for(let s=0;s<t.values.length;s++)i.push(Te.interpolate(t.values[s],e.values[s],r,n));return new Be(i)}}class Ve extends Error{constructor(t){super(t),this.name="RuntimeError";}toJSON(){return this.message}}const Ce=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Le{constructor(t){this.values=t.slice();}static parse(t){if(t instanceof Le)return t;if(Array.isArray(t)&&!(t.length<1)&&t.length%2==0){for(let e=0;e<t.length;e+=2){const r=t[e],n=t[e+1];if("string"!=typeof r||!Ce.has(r))return;if(!Array.isArray(n)||2!==n.length||"number"!=typeof n[0]||"number"!=typeof n[1])return}return new Le(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,e,r){const n=t.values,i=e.values;if(n.length!==i.length)throw new Ve(`Cannot interpolate values of different length. from: ${t.toString()}, to: ${e.toString()}`);const s=[];for(let t=0;t<n.length;t+=2){if(n[t]!==i[t])throw new Ve(`Cannot interpolate values containing mismatched anchors. from[${t}]: ${n[t]}, to[${t}]: ${i[t]}`);s.push(n[t]);const[e,a]=n[t+1],[o,l]=i[t+1];s.push([ke(e,o,r),ke(a,l,r)]);}return new Le(s)}}class Oe{constructor(t){this.name=t.name,this.available=t.available;}toString(){return this.name}static fromString(t){return t?new Oe({name:t,available:!1}):null}}class Re{constructor(t,e,r){this.from=t,this.to=e,this.transition=r;}static interpolate(t,e,r){return new Re(t,e,r)}static parse(t){return t instanceof Re?t:Array.isArray(t)&&3===t.length&&"string"==typeof t[0]&&"string"==typeof t[1]&&"number"==typeof t[2]?new Re(t[0],t[1],t[2]):"object"==typeof t&&"string"==typeof t.from&&"string"==typeof t.to&&"number"==typeof t.transition?new Re(t.from,t.to,t.transition):"string"==typeof t?new Re(t,t,1):void 0}}function Ne(t,e,r,n){return "number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof r&&r>=0&&r<=255?void 0===n||"number"==typeof n&&n>=0&&n<=1?null:`Invalid rgba value [${[t,e,r,n].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof n?[t,e,r,n]:[t,e,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function $e(t){if(null===t||"string"==typeof t||"boolean"==typeof t||"number"==typeof t||t instanceof Re||t instanceof Te||t instanceof Ie||t instanceof De||t instanceof ze||t instanceof Pe||t instanceof Be||t instanceof Le||t instanceof Oe)return !0;if(Array.isArray(t)){for(const e of t)if(!$e(e))return !1;return !0}if("object"==typeof t){for(const e in t)if(!$e(t[e]))return !1;return !0}return !1}function Ue(t){if(null===t)return Vt;if("string"==typeof t)return Lt;if("boolean"==typeof t)return Ot;if("number"==typeof t)return Ct;if(t instanceof Te)return Rt;if(t instanceof Re)return Nt;if(t instanceof Ie)return qt;if(t instanceof De)return jt;if(t instanceof ze)return Gt;if(t instanceof Pe)return Yt;if(t instanceof Be)return Xt;if(t instanceof Le)return Ht;if(t instanceof Oe)return Zt;if(Array.isArray(t)){const e=t.length;let r;for(const e of t){const t=Ue(e);if(r){if(r===t)continue;r=Ut;break}r=t;}return Kt(r||Ut,e)}return $t}function qe(t){const e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Te||t instanceof Re||t instanceof De||t instanceof ze||t instanceof Pe||t instanceof Be||t instanceof Le||t instanceof Oe?t.toString():JSON.stringify(t)}class je{constructor(t,e){this.type=t,this.value=e;}static parse(t,e){if(2!==t.length)return e.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!$e(t[1]))return e.error("invalid value");const r=t[1];let n=Ue(r);const i=e.expectedType;return "array"!==n.kind||0!==n.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(n=i),new je(n,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return !0}}const Ge={string:Lt,number:Ct,boolean:Ot,object:$t};class Xe{constructor(t,e){this.type=t,this.args=e;}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let r,n=1;const i=t[0];if("array"===i){let i,s;if(t.length>2){const r=t[1];if("string"!=typeof r||!(r in Ge)||"object"===r)return e.error('The item type argument of "array" must be one of string, number, boolean',1);i=Ge[r],n++;}else i=Ut;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);s=t[2],n++;}r=Kt(i,s);}else {if(!Ge[i])throw new Error(`Types doesn't contain name = ${i}`);r=Ge[i];}const s=[];for(;n<t.length;n++){const r=e.parse(t[n],n,Ut);if(!r)return null;s.push(r);}return new Xe(r,s)}evaluate(t){for(let e=0;e<this.args.length;e++){const r=this.args[e].evaluate(t);if(!Qt(this.type,Ue(r)))return r;if(e===this.args.length-1)throw new Ve(`Expected value to be of type ${Wt(this.type)}, but found ${Wt(Ue(r))} instead.`)}throw new Error}eachChild(t){this.args.forEach(t);}outputDefined(){return this.args.every((t=>t.outputDefined()))}}const Ye={"to-boolean":Ot,"to-color":Rt,"to-number":Ct,"to-string":Lt};class Ze{constructor(t,e){this.type=t,this.args=e;}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const r=t[0];if(!Ye[r])throw new Error(`Can't parse ${r} as it is not part of the known types`);if(("to-boolean"===r||"to-string"===r)&&2!==t.length)return e.error("Expected one argument.");const n=Ye[r],i=[];for(let r=1;r<t.length;r++){const n=e.parse(t[r],r,Ut);if(!n)return null;i.push(n);}return new Ze(n,i)}evaluate(t){switch(this.type.kind){case "boolean":return Boolean(this.args[0].evaluate(t));case "color":{let e,r;for(const n of this.args){if(e=n.evaluate(t),r=null,e instanceof Te)return e;if("string"==typeof e){const r=t.parseColor(e);if(r)return r}else if(Array.isArray(e)&&(r=e.length<3||e.length>4?`Invalid rgba value ${JSON.stringify(e)}: expected an array containing either three or four numeric values.`:Ne(e[0],e[1],e[2],e[3]),!r))return new Te(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new Ve(r||`Could not parse color from value '${"string"==typeof e?e:JSON.stringify(e)}'`)}case "padding":{let e;for(const r of this.args){e=r.evaluate(t);const n=ze.parse(e);if(n)return n}throw new Ve(`Could not parse padding from value '${"string"==typeof e?e:JSON.stringify(e)}'`)}case "numberArray":{let e;for(const r of this.args){e=r.evaluate(t);const n=Pe.parse(e);if(n)return n}throw new Ve(`Could not parse numberArray from value '${"string"==typeof e?e:JSON.stringify(e)}'`)}case "colorArray":{let e;for(const r of this.args){e=r.evaluate(t);const n=Be.parse(e);if(n)return n}throw new Ve(`Could not parse colorArray from value '${"string"==typeof e?e:JSON.stringify(e)}'`)}case "variableAnchorOffsetCollection":{let e;for(const r of this.args){e=r.evaluate(t);const n=Le.parse(e);if(n)return n}throw new Ve(`Could not parse variableAnchorOffsetCollection from value '${"string"==typeof e?e:JSON.stringify(e)}'`)}case "number":{let e=null;for(const r of this.args){if(e=r.evaluate(t),null===e)return 0;const n=Number(e);if(!isNaN(n))return n}throw new Ve(`Could not convert ${JSON.stringify(e)} to number.`)}case "formatted":return De.fromString(qe(this.args[0].evaluate(t)));case "resolvedImage":return Oe.fromString(qe(this.args[0].evaluate(t)));case "projectionDefinition":return this.args[0].evaluate(t);default:return qe(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t);}outputDefined(){return this.args.every((t=>t.outputDefined()))}}const He=["Unknown","Point","LineString","Polygon"];class Ke{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null;}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?He[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let e=this._parseColorCache.get(t);return e||(e=Te.parse(t),this._parseColorCache.set(t,e)),e}}class We{constructor(t,e,r=[],n,i=new Bt,s=[]){this.registry=t,this.path=r,this.key=r.map((t=>`[${t}]`)).join(""),this.scope=i,this.errors=s,this.expectedType=n,this._isConstant=e;}parse(t,e,r,n,i={}){return e?this.concat(e,r,n)._parse(t,i):this._parse(t,i)}_parse(t,e){function r(t,e,r){return "assert"===r?new Xe(e,[t]):"coerce"===r?new Ze(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const n=t[0];if("string"!=typeof n)return this.error(`Expression name must be a string, but found ${typeof n} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const i=this.registry[n];if(i){let n=i.parse(t,this);if(!n)return null;if(this.expectedType){const t=this.expectedType,i=n.type;if("string"!==t.kind&&"number"!==t.kind&&"boolean"!==t.kind&&"object"!==t.kind&&"array"!==t.kind||"value"!==i.kind){if("projectionDefinition"===t.kind&&["string","array"].includes(i.kind)||["color","formatted","resolvedImage"].includes(t.kind)&&["value","string"].includes(i.kind)||["padding","numberArray"].includes(t.kind)&&["value","number","array"].includes(i.kind)||"colorArray"===t.kind&&["value","string","array"].includes(i.kind)||"variableAnchorOffsetCollection"===t.kind&&["value","array"].includes(i.kind))n=r(n,t,e.typeAnnotation||"coerce");else if(this.checkSubtype(t,i))return null}else n=r(n,t,e.typeAnnotation||"assert");}if(!(n instanceof je)&&"resolvedImage"!==n.type.kind&&this._isConstant(n)){const t=new Ke;try{n=new je(n.type,n.evaluate(t));}catch(t){return this.error(t.message),null}}return n}return this.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,e,r){const n="number"==typeof t?this.path.concat(t):this.path,i=r?this.scope.concat(r):this.scope;return new We(this.registry,this._isConstant,n,e||null,i,this.errors)}error(t,...e){const r=`${this.key}${e.map((t=>`[${t}]`)).join("")}`;this.errors.push(new Pt(r,t));}checkSubtype(t,e){const r=Qt(t,e);return r&&this.error(r),r}}class Je{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e;}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result);}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const r=[];for(let n=1;n<t.length-1;n+=2){const i=t[n];if("string"!=typeof i)return e.error(`Expected string, but found ${typeof i} instead.`,n);if(/[^a-zA-Z0-9_]/.test(i))return e.error("Variable names must contain only alphanumeric characters or '_'.",n);const s=e.parse(t[n+1],n+1);if(!s)return null;r.push([i,s]);}const n=e.parse(t[t.length-1],t.length-1,e.expectedType,r);return n?new Je(r,n):null}outputDefined(){return this.result.outputDefined()}}class Qe{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e;}static parse(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");const r=t[1];return e.scope.has(r)?new Qe(r,e.scope.get(r)):e.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return !1}}class tr{constructor(t,e,r){this.type=t,this.index=e,this.input=r;}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const r=e.parse(t[1],1,Ct),n=e.parse(t[2],2,Kt(e.expectedType||Ut));return r&&n?new tr(n.type.itemType,r,n):null}evaluate(t){const e=this.index.evaluate(t),r=this.input.evaluate(t);if(e<0)throw new Ve(`Array index out of bounds: ${e} < 0.`);if(e>=r.length)throw new Ve(`Array index out of bounds: ${e} > ${r.length-1}.`);if(e!==Math.floor(e))throw new Ve(`Array index must be an integer, but found ${e} instead.`);return r[e]}eachChild(t){t(this.index),t(this.input);}outputDefined(){return !1}}class er{constructor(t,e){this.type=Ot,this.needle=t,this.haystack=e;}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const r=e.parse(t[1],1,Ut),n=e.parse(t[2],2,Ut);return r&&n?te(r.type,[Ot,Lt,Ct,Vt,Ut])?new er(r,n):e.error(`Expected first argument to be of type boolean, string, number or null, but found ${Wt(r.type)} instead`):null}evaluate(t){const e=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(!r)return !1;if(!ee(e,["boolean","string","number","null"]))throw new Ve(`Expected first argument to be of type boolean, string, number or null, but found ${Wt(Ue(e))} instead.`);if(!ee(r,["string","array"]))throw new Ve(`Expected second argument to be of type array or string, but found ${Wt(Ue(r))} instead.`);return r.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack);}outputDefined(){return !0}}class rr{constructor(t,e,r){this.type=Ct,this.needle=t,this.haystack=e,this.fromIndex=r;}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 2 or 3 arguments, but found ${t.length-1} instead.`);const r=e.parse(t[1],1,Ut),n=e.parse(t[2],2,Ut);if(!r||!n)return null;if(!te(r.type,[Ot,Lt,Ct,Vt,Ut]))return e.error(`Expected first argument to be of type boolean, string, number or null, but found ${Wt(r.type)} instead`);if(4===t.length){const i=e.parse(t[3],3,Ct);return i?new rr(r,n,i):null}return new rr(r,n)}evaluate(t){const e=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(!ee(e,["boolean","string","number","null"]))throw new Ve(`Expected first argument to be of type boolean, string, number or null, but found ${Wt(Ue(e))} instead.`);let n;if(this.fromIndex&&(n=this.fromIndex.evaluate(t)),ee(r,["string"])){const t=r.indexOf(e,n);return -1===t?-1:[...r.slice(0,t)].length}if(ee(r,["array"]))return r.indexOf(e,n);throw new Ve(`Expected second argument to be of type array or string, but found ${Wt(Ue(r))} instead.`)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex);}outputDefined(){return !1}}class nr{constructor(t,e,r,n,i,s){this.inputType=t,this.type=e,this.input=r,this.cases=n,this.outputs=i,this.otherwise=s;}static parse(t,e){if(t.length<5)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return e.error("Expected an even number of arguments.");let r,n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);const i={},s=[];for(let a=2;a<t.length-1;a+=2){let o=t[a];const l=t[a+1];Array.isArray(o)||(o=[o]);const u=e.concat(a);if(0===o.length)return u.error("Expected at least one branch label.");for(const t of o){if("number"!=typeof t&&"string"!=typeof t)return u.error("Branch labels must be numbers or strings.");if("number"==typeof t&&Math.abs(t)>Number.MAX_SAFE_INTEGER)return u.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof t&&Math.floor(t)!==t)return u.error("Numeric branch labels must be integer values.");if(r){if(u.checkSubtype(r,Ue(t)))return null}else r=Ue(t);if(void 0!==i[String(t)])return u.error("Branch labels must be unique.");i[String(t)]=s.length;}const c=e.parse(l,a,n);if(!c)return null;n=n||c.type,s.push(c);}const a=e.parse(t[1],1,Ut);if(!a)return null;const o=e.parse(t[t.length-1],t.length-1,n);return o?"value"!==a.type.kind&&e.concat(1).checkSubtype(r,a.type)?null:new nr(r,n,a,i,s,o):null}evaluate(t){const e=this.input.evaluate(t);return (Ue(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise);}outputDefined(){return this.outputs.every((t=>t.outputDefined()))&&this.otherwise.outputDefined()}}class ir{constructor(t,e,r){this.type=t,this.branches=e,this.otherwise=r;}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return e.error("Expected an odd number of arguments.");let r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);const n=[];for(let i=1;i<t.length-1;i+=2){const s=e.parse(t[i],i,Ot);if(!s)return null;const a=e.parse(t[i+1],i+1,r);if(!a)return null;n.push([s,a]),r=r||a.type;}const i=e.parse(t[t.length-1],t.length-1,r);if(!i)return null;if(!r)throw new Error("Can't infer output type");return new ir(r,n,i)}evaluate(t){for(const[e,r]of this.branches)if(e.evaluate(t))return r.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,r]of this.branches)t(e),t(r);t(this.otherwise);}outputDefined(){return this.branches.every((([t,e])=>e.outputDefined()))&&this.otherwise.outputDefined()}}class sr{constructor(t,e,r,n){this.type=t,this.input=e,this.beginIndex=r,this.endIndex=n;}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 2 or 3 arguments, but found ${t.length-1} instead.`);const r=e.parse(t[1],1,Ut),n=e.parse(t[2],2,Ct);if(!r||!n)return null;if(!te(r.type,[Kt(Ut),Lt,Ut]))return e.error(`Expected first argument to be of type array or string, but found ${Wt(r.type)} instead`);if(4===t.length){const i=e.parse(t[3],3,Ct);return i?new sr(r.type,r,n,i):null}return new sr(r.type,r,n)}evaluate(t){const e=this.input.evaluate(t),r=this.beginIndex.evaluate(t);let n;if(this.endIndex&&(n=this.endIndex.evaluate(t)),ee(e,["string"]))return [...e].slice(r,n).join("");if(ee(e,["array"]))return e.slice(r,n);throw new Ve(`Expected first argument to be of type array or string, but found ${Wt(Ue(e))} instead.`)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex);}outputDefined(){return !1}}function ar(t,e){const r=t.length-1;let n,i,s=0,a=r,o=0;for(;s<=a;)if(o=Math.floor((s+a)/2),n=t[o],i=t[o+1],n<=e){if(o===r||e<i)return o;s=o+1;}else {if(!(n>e))throw new Ve("Input is not a number.");a=o-1;}return 0}class or{constructor(t,e,r){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[t,e]of r)this.labels.push(t),this.outputs.push(e);}static parse(t,e){if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");const r=e.parse(t[1],1,Ct);if(!r)return null;const n=[];let i=null;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(let r=1;r<t.length;r+=2){const s=1===r?-1/0:t[r],a=t[r+1],o=r,l=r+1;if("number"!=typeof s)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',o);if(n.length&&n[n.length-1][0]>=s)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',o);const u=e.parse(a,l,i);if(!u)return null;i=i||u.type,n.push([s,u]);}return new or(i,r,n)}evaluate(t){const e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);const n=this.input.evaluate(t);if(n<=e[0])return r[0].evaluate(t);const i=e.length;return n>=e[i-1]?r[i-1].evaluate(t):r[ar(e,n)].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e);}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}}function lr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ur,cr,hr=function(){if(cr)return ur;function t(t,e,r,n){this.cx=3*t,this.bx=3*(r-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=r,this.p2y=n;}return cr=1,ur=t,t.prototype={sampleCurveX:function(t){return ((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return ((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return (3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(void 0===e&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var r=t,n=0;n<8;n++){var i=this.sampleCurveX(r)-t;if(Math.abs(i)<e)return r;var s=this.sampleCurveDerivativeX(r);if(Math.abs(s)<1e-6)break;r-=i/s;}var a=0,o=1;for(r=t,n=0;n<20&&(i=this.sampleCurveX(r),!(Math.abs(i-t)<e));n++)t>i?a=r:o=r,r=.5*(o-a)+a;return r},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}},ur}(),pr=lr(hr);class fr{constructor(t,e,r,n,i){this.type=t,this.operator=e,this.interpolation=r,this.input=n,this.labels=[],this.outputs=[];for(const[t,e]of i)this.labels.push(t),this.outputs.push(e);}static interpolationFactor(t,e,r,n){let i=0;if("exponential"===t.name)i=dr(e,t.base,r,n);else if("linear"===t.name)i=dr(e,1,r,n);else if("cubic-bezier"===t.name){const s=t.controlPoints;i=new pr(s[0],s[1],s[2],s[3]).solve(dr(e,1,r,n));}return i}static parse(t,e){let[r,n,i,...s]=t;if(!Array.isArray(n)||0===n.length)return e.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){const t=n[1];if("number"!=typeof t)return e.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:t};}else {if("cubic-bezier"!==n[0])return e.error(`Unknown interpolation type ${String(n[0])}`,1,0);{const t=n.slice(1);if(4!==t.length||t.some((t=>"number"!=typeof t||t<0||t>1)))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:t};}}if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(i=e.parse(i,2,Ct),!i)return null;const a=[];let o=null;"interpolate-hcl"!==r&&"interpolate-lab"!==r||e.expectedType==Xt?e.expectedType&&"value"!==e.expectedType.kind&&(o=e.expectedType):o=Rt;for(let t=0;t<s.length;t+=2){const r=s[t],n=s[t+1],i=t+3,l=t+4;if("number"!=typeof r)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',i);if(a.length&&a[a.length-1][0]>=r)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',i);const u=e.parse(n,l,o);if(!u)return null;o=o||u.type,a.push([r,u]);}return re(o,Ct)||re(o,Nt)||re(o,Rt)||re(o,Gt)||re(o,Yt)||re(o,Xt)||re(o,Ht)||re(o,Kt(Ct))?new fr(o,r,n,i,a):e.error(`Type ${Wt(o)} is not interpolatable.`)}evaluate(t){const e=this.labels,r=this.outputs;if(1===e.length)return r[0].evaluate(t);const n=this.input.evaluate(t);if(n<=e[0])return r[0].evaluate(t);const i=e.length;if(n>=e[i-1])return r[i-1].evaluate(t);const s=ar(e,n),a=fr.interpolationFactor(this.interpolation,n,e[s],e[s+1]),o=r[s].evaluate(t),l=r[s+1].evaluate(t);switch(this.operator){case "interpolate":switch(this.type.kind){case "number":return ke(o,l,a);case "color":return Te.interpolate(o,l,a);case "padding":return ze.interpolate(o,l,a);case "colorArray":return Be.interpolate(o,l,a);case "numberArray":return Pe.interpolate(o,l,a);case "variableAnchorOffsetCollection":return Le.interpolate(o,l,a);case "array":return Ee(o,l,a);case "projectionDefinition":return Re.interpolate(o,l,a)}case "interpolate-hcl":switch(this.type.kind){case "color":return Te.interpolate(o,l,a,"hcl");case "colorArray":return Be.interpolate(o,l,a,"hcl")}case "interpolate-lab":switch(this.type.kind){case "color":return Te.interpolate(o,l,a,"lab");case "colorArray":return Be.interpolate(o,l,a,"lab")}}}eachChild(t){t(this.input);for(const e of this.outputs)t(e);}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}}function dr(t,e,r,n){const i=n-r,s=t-r;return 0===i?0:1===e?s/i:(Math.pow(e,s)-1)/(Math.pow(e,i)-1)}const yr={color:Te.interpolate,number:ke,padding:ze.interpolate,numberArray:Pe.interpolate,colorArray:Be.interpolate,variableAnchorOffsetCollection:Le.interpolate,array:Ee};class mr{constructor(t,e){this.type=t,this.args=e;}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let r=null;const n=e.expectedType;n&&"value"!==n.kind&&(r=n);const i=[];for(const n of t.slice(1)){const t=e.parse(n,1+i.length,r,void 0,{typeAnnotation:"omit"});if(!t)return null;r=r||t.type,i.push(t);}if(!r)throw new Error("No output type");const s=n&&i.some((t=>Qt(n,t.type)));return new mr(s?Ut:r,i)}evaluate(t){let e,r=null,n=0;for(const i of this.args)if(n++,r=i.evaluate(t),r&&r instanceof Oe&&!r.available&&(e||(e=r.name),r=null,n===this.args.length&&(r=e)),null!==r)break;return r}eachChild(t){this.args.forEach(t);}outputDefined(){return this.args.every((t=>t.outputDefined()))}}function gr(t,e){return "=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function xr(t,e,r,n){return 0===n.compare(e,r)}function vr(t,e,r){const n="=="!==t&&"!="!==t;return class i{constructor(t,e,r){this.type=Ot,this.lhs=t,this.rhs=e,this.collator=r,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind;}static parse(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");const r=t[0];let s=e.parse(t[1],1,Ut);if(!s)return null;if(!gr(r,s.type))return e.concat(1).error(`"${r}" comparisons are not supported for type '${Wt(s.type)}'.`);let a=e.parse(t[2],2,Ut);if(!a)return null;if(!gr(r,a.type))return e.concat(2).error(`"${r}" comparisons are not supported for type '${Wt(a.type)}'.`);if(s.type.kind!==a.type.kind&&"value"!==s.type.kind&&"value"!==a.type.kind)return e.error(`Cannot compare types '${Wt(s.type)}' and '${Wt(a.type)}'.`);n&&("value"===s.type.kind&&"value"!==a.type.kind?s=new Xe(a.type,[s]):"value"!==s.type.kind&&"value"===a.type.kind&&(a=new Xe(s.type,[a])));let o=null;if(4===t.length){if("string"!==s.type.kind&&"string"!==a.type.kind&&"value"!==s.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(o=e.parse(t[3],3,qt),!o)return null}return new i(s,a,o)}evaluate(i){const s=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(n&&this.hasUntypedArgument){const e=Ue(s),r=Ue(a);if(e.kind!==r.kind||"string"!==e.kind&&"number"!==e.kind)throw new Ve(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${e.kind}, ${r.kind}) instead.`)}if(this.collator&&!n&&this.hasUntypedArgument){const t=Ue(s),r=Ue(a);if("string"!==t.kind||"string"!==r.kind)return e(i,s,a)}return this.collator?r(i,s,a,this.collator.evaluate(i)):e(i,s,a)}eachChild(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator);}outputDefined(){return !0}}}const br=vr("==",(function(t,e,r){return e===r}),xr),wr=vr("!=",(function(t,e,r){return e!==r}),(function(t,e,r,n){return !xr(0,e,r,n)})),_r=vr("<",(function(t,e,r){return e<r}),(function(t,e,r,n){return n.compare(e,r)<0})),Sr=vr(">",(function(t,e,r){return e>r}),(function(t,e,r,n){return n.compare(e,r)>0})),Ar=vr("<=",(function(t,e,r){return e<=r}),(function(t,e,r,n){return n.compare(e,r)<=0})),kr=vr(">=",(function(t,e,r){return e>=r}),(function(t,e,r,n){return n.compare(e,r)>=0}));class Er{constructor(t,e,r){this.type=qt,this.locale=r,this.caseSensitive=t,this.diacriticSensitive=e;}static parse(t,e){if(2!==t.length)return e.error("Expected one argument.");const r=t[1];if("object"!=typeof r||Array.isArray(r))return e.error("Collator options argument must be an object.");const n=e.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,Ot);if(!n)return null;const i=e.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,Ot);if(!i)return null;let s=null;return r.locale&&(s=e.parse(r.locale,1,Lt),!s)?null:new Er(n,i,s)}evaluate(t){return new Ie(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale);}outputDefined(){return !1}}class Tr{constructor(t,e,r,n,i){this.type=Lt,this.number=t,this.locale=e,this.currency=r,this.minFractionDigits=n,this.maxFractionDigits=i;}static parse(t,e){if(3!==t.length)return e.error("Expected two arguments.");const r=e.parse(t[1],1,Ct);if(!r)return null;const n=t[2];if("object"!=typeof n||Array.isArray(n))return e.error("NumberFormat options argument must be an object.");let i=null;if(n.locale&&(i=e.parse(n.locale,1,Lt),!i))return null;let s=null;if(n.currency&&(s=e.parse(n.currency,1,Lt),!s))return null;let a=null;if(n["min-fraction-digits"]&&(a=e.parse(n["min-fraction-digits"],1,Ct),!a))return null;let o=null;return n["max-fraction-digits"]&&(o=e.parse(n["max-fraction-digits"],1,Ct),!o)?null:new Tr(r,i,s,a,o)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits);}outputDefined(){return !1}}class Ir{constructor(t){this.type=jt,this.sections=t;}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const r=t[1];if(!Array.isArray(r)&&"object"==typeof r)return e.error("First argument must be an image or text section.");const n=[];let i=!1;for(let r=1;r<=t.length-1;++r){const s=t[r];if(i&&"object"==typeof s&&!Array.isArray(s)){i=!1;let t=null;if(s["font-scale"]&&(t=e.parse(s["font-scale"],1,Ct),!t))return null;let r=null;if(s["text-font"]&&(r=e.parse(s["text-font"],1,Kt(Lt)),!r))return null;let a=null;if(s["text-color"]&&(a=e.parse(s["text-color"],1,Rt),!a))return null;let o=null;if(s["vertical-align"]){if("string"==typeof s["vertical-align"]&&!Me.includes(s["vertical-align"]))return e.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${s["vertical-align"]}' instead.`);if(o=e.parse(s["vertical-align"],1,Lt),!o)return null}const l=n[n.length-1];l.scale=t,l.font=r,l.textColor=a,l.verticalAlign=o;}else {const s=e.parse(t[r],1,Ut);if(!s)return null;const a=s.type.kind;if("string"!==a&&"value"!==a&&"null"!==a&&"resolvedImage"!==a)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,n.push({content:s,scale:null,font:null,textColor:null,verticalAlign:null});}}return new Ir(n)}evaluate(t){return new De(this.sections.map((e=>{const r=e.content.evaluate(t);return Ue(r)===Zt?new Fe("",r,null,null,null,e.verticalAlign?e.verticalAlign.evaluate(t):null):new Fe(qe(r),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null,e.verticalAlign?e.verticalAlign.evaluate(t):null)})))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor),e.verticalAlign&&t(e.verticalAlign);}outputDefined(){return !1}}class Mr{constructor(t){this.type=Zt,this.input=t;}static parse(t,e){if(2!==t.length)return e.error("Expected two arguments.");const r=e.parse(t[1],1,Lt);return r?new Mr(r):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),r=Oe.fromString(e);return r&&t.availableImages&&(r.available=t.availableImages.indexOf(e)>-1),r}eachChild(t){t(this.input);}outputDefined(){return !1}}class Fr{constructor(t){this.type=Ct,this.input=t;}static parse(t,e){if(2!==t.length)return e.error(`Expected 1 argument, but found ${t.length-1} instead.`);const r=e.parse(t[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?e.error(`Expected argument of type string or array, but found ${Wt(r.type)} instead.`):new Fr(r):null}evaluate(t){const e=this.input.evaluate(t);if("string"==typeof e)return [...e].length;if(Array.isArray(e))return e.length;throw new Ve(`Expected value to be of type string or array, but found ${Wt(Ue(e))} instead.`)}eachChild(t){t(this.input);}outputDefined(){return !1}}const Dr=8192;function zr(t,e){const r=(180+t[0])/360,n=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,i=Math.pow(2,e.z);return [Math.round(r*i*Dr),Math.round(n*i*Dr)]}function Pr(t,e){const r=Math.pow(2,e.z);return [(i=(t[0]/Dr+e.x)/r,360*i-180),(n=(t[1]/Dr+e.y)/r,360/Math.PI*Math.atan(Math.exp((180-360*n)*Math.PI/180))-90)];var n,i;}function Br(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1]);}function Vr(t,e){return !(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function Cr(t,e,r){const n=t[0]-e[0],i=t[1]-e[1],s=t[0]-r[0],a=t[1]-r[1];return n*a-s*i==0&&n*s<=0&&i*a<=0}function Lr(t,e,r,n){return 0!=(i=[n[0]-r[0],n[1]-r[1]])[0]*(s=[e[0]-t[0],e[1]-t[1]])[1]-i[1]*s[0]&&!(!qr(t,e,r,n)||!qr(r,n,t,e));var i,s;}function Or(t,e,r){for(const n of r)for(let r=0;r<n.length-1;++r)if(Lr(t,e,n[r],n[r+1]))return !0;return !1}function Rr(t,e,r=!1){let n=!1;for(const o of e)for(let e=0;e<o.length-1;e++){if(Cr(t,o[e],o[e+1]))return r;(s=o[e])[1]>(i=t)[1]!=(a=o[e+1])[1]>i[1]&&i[0]<(a[0]-s[0])*(i[1]-s[1])/(a[1]-s[1])+s[0]&&(n=!n);}var i,s,a;return n}function Nr(t,e){for(const r of e)if(Rr(t,r))return !0;return !1}function $r(t,e){for(const r of t)if(!Rr(r,e))return !1;for(let r=0;r<t.length-1;++r)if(Or(t[r],t[r+1],e))return !1;return !0}function Ur(t,e){for(const r of e)if($r(t,r))return !0;return !1}function qr(t,e,r,n){const i=n[0]-r[0],s=n[1]-r[1],a=(t[0]-r[0])*s-i*(t[1]-r[1]),o=(e[0]-r[0])*s-i*(e[1]-r[1]);return a>0&&o<0||a<0&&o>0}function jr(t,e,r){const n=[];for(let i=0;i<t.length;i++){const s=[];for(let n=0;n<t[i].length;n++){const a=zr(t[i][n],r);Br(e,a),s.push(a);}n.push(s);}return n}function Gr(t,e,r){const n=[];for(let i=0;i<t.length;i++){const s=jr(t[i],e,r);n.push(s);}return n}function Xr(t,e,r,n){if(t[0]<r[0]||t[0]>r[2]){const e=.5*n;let i=t[0]-r[0]>e?-n:r[0]-t[0]>e?n:0;0===i&&(i=t[0]-r[2]>e?-n:r[2]-t[0]>e?n:0),t[0]+=i;}Br(e,t);}function Yr(t,e,r,n){const i=Math.pow(2,n.z)*Dr,s=[n.x*Dr,n.y*Dr],a=[];for(const n of t)for(const t of n){const n=[t.x+s[0],t.y+s[1]];Xr(n,e,r,i),a.push(n);}return a}function Zr(t,e,r,n){const i=Math.pow(2,n.z)*Dr,s=[n.x*Dr,n.y*Dr],a=[];for(const r of t){const t=[];for(const n of r){const r=[n.x+s[0],n.y+s[1]];Br(e,r),t.push(r);}a.push(t);}if(e[2]-e[0]<=i/2){(o=e)[0]=o[1]=1/0,o[2]=o[3]=-1/0;for(const t of a)for(const n of t)Xr(n,e,r,i);}var o;return a}class Hr{constructor(t,e){this.type=Ot,this.geojson=t,this.geometries=e;}static parse(t,e){if(2!==t.length)return e.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if($e(t[1])){const e=t[1];if("FeatureCollection"===e.type){const t=[];for(const r of e.features){const{type:e,coordinates:n}=r.geometry;"Polygon"===e&&t.push(n),"MultiPolygon"===e&&t.push(...n);}if(t.length)return new Hr(e,{type:"MultiPolygon",coordinates:t})}else if("Feature"===e.type){const t=e.geometry.type;if("Polygon"===t||"MultiPolygon"===t)return new Hr(e,e.geometry)}else if("Polygon"===e.type||"MultiPolygon"===e.type)return new Hr(e,e)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){const s=jr(e.coordinates,n,i),a=Yr(t.geometry(),r,n,i);if(!Vr(r,n))return !1;for(const t of a)if(!Rr(t,s))return !1}if("MultiPolygon"===e.type){const s=Gr(e.coordinates,n,i),a=Yr(t.geometry(),r,n,i);if(!Vr(r,n))return !1;for(const t of a)if(!Nr(t,s))return !1}return !0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){const s=jr(e.coordinates,n,i),a=Zr(t.geometry(),r,n,i);if(!Vr(r,n))return !1;for(const t of a)if(!$r(t,s))return !1}if("MultiPolygon"===e.type){const s=Gr(e.coordinates,n,i),a=Zr(t.geometry(),r,n,i);if(!Vr(r,n))return !1;for(const t of a)if(!Ur(t,s))return !1}return !0}(t,this.geometries)}return !1}eachChild(){}outputDefined(){return !0}}let Kr=class{constructor(t=[],e=(t,e)=>t<e?-1:t>e?1:0){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let t=(this.length>>1)-1;t>=0;t--)this._down(t);}push(t){this.data.push(t),this._up(this.length++);}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return --this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:r}=this,n=e[t];for(;t>0;){const i=t-1>>1,s=e[i];if(r(n,s)>=0)break;e[t]=s,t=i;}e[t]=n;}_down(t){const{data:e,compare:r}=this,n=this.length>>1,i=e[t];for(;t<n;){let n=1+(t<<1);const s=n+1;if(s<this.length&&r(e[s],e[n])<0&&(n=s),r(e[n],i)>=0)break;e[t]=e[n],t=n;}e[t]=i;}};function Wr(t,e,r=0,n=t.length-1,i=Qr){for(;n>r;){if(n-r>600){const s=n-r+1,a=e-r+1,o=Math.log(s),l=.5*Math.exp(2*o/3),u=.5*Math.sqrt(o*l*(s-l)/s)*(a-s/2<0?-1:1);Wr(t,e,Math.max(r,Math.floor(e-a*l/s+u)),Math.min(n,Math.floor(e+(s-a)*l/s+u)),i);}const s=t[e];let a=r,o=n;for(Jr(t,r,e),i(t[n],s)>0&&Jr(t,r,n);a<o;){for(Jr(t,a,o),a++,o--;i(t[a],s)<0;)a++;for(;i(t[o],s)>0;)o--;}0===i(t[r],s)?Jr(t,r,o):(o++,Jr(t,o,n)),o<=e&&(r=o+1),e<=o&&(n=o-1);}}function Jr(t,e,r){const n=t[e];t[e]=t[r],t[r]=n;}function Qr(t,e){return t<e?-1:t>e?1:0}function tn(t,e){if(t.length<=1)return [t];const r=[];let n,i;for(const e of t){const t=rn(e);0!==t&&(e.area=Math.abs(t),void 0===i&&(i=t<0),i===t<0?(n&&r.push(n),n=[e]):n.push(e));}if(n&&r.push(n),e>1)for(let t=0;t<r.length;t++)r[t].length<=e||(Wr(r[t],e,1,r[t].length-1,en),r[t]=r[t].slice(0,e));return r}function en(t,e){return e.area-t.area}function rn(t){let e=0;for(let r,n,i=0,s=t.length,a=s-1;i<s;a=i++)r=t[i],n=t[a],e+=(n.x-r.x)*(r.y+n.y);return e}const nn=1/298.257223563,sn=nn*(2-nn),an=Math.PI/180;class on{constructor(t){const e=6378.137*an*1e3,r=Math.cos(t*an),n=1/(1-sn*(1-r*r)),i=Math.sqrt(n);this.kx=e*i*r,this.ky=e*i*n*(1-sn);}distance(t,e){const r=this.wrap(t[0]-e[0])*this.kx,n=(t[1]-e[1])*this.ky;return Math.sqrt(r*r+n*n)}pointOnLine(t,e){let r,n,i,s,a=1/0;for(let o=0;o<t.length-1;o++){let l=t[o][0],u=t[o][1],c=this.wrap(t[o+1][0]-l)*this.kx,h=(t[o+1][1]-u)*this.ky,p=0;0===c&&0===h||(p=(this.wrap(e[0]-l)*this.kx*c+(e[1]-u)*this.ky*h)/(c*c+h*h),p>1?(l=t[o+1][0],u=t[o+1][1]):p>0&&(l+=c/this.kx*p,u+=h/this.ky*p)),c=this.wrap(e[0]-l)*this.kx,h=(e[1]-u)*this.ky;const f=c*c+h*h;f<a&&(a=f,r=l,n=u,i=o,s=p);}return {point:[r,n],index:i,t:Math.max(0,Math.min(1,s))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}}function ln(t,e){return e[0]-t[0]}function un(t){return t[1]-t[0]+1}function cn(t,e){return t[1]>=t[0]&&t[1]<e}function hn(t,e){if(t[0]>t[1])return [null,null];const r=un(t);if(e){if(2===r)return [t,null];const e=Math.floor(r/2);return [[t[0],t[0]+e],[t[0]+e,t[1]]]}if(1===r)return [t,null];const n=Math.floor(r/2)-1;return [[t[0],t[0]+n],[t[0]+n+1,t[1]]]}function pn(t,e){if(!cn(e,t.length))return [1/0,1/0,-1/0,-1/0];const r=[1/0,1/0,-1/0,-1/0];for(let n=e[0];n<=e[1];++n)Br(r,t[n]);return r}function fn(t){const e=[1/0,1/0,-1/0,-1/0];for(const r of t)for(const t of r)Br(e,t);return e}function dn(t){return t[0]!==-1/0&&t[1]!==-1/0&&t[2]!==1/0&&t[3]!==1/0}function yn(t,e,r){if(!dn(t)||!dn(e))return NaN;let n=0,i=0;return t[2]<e[0]&&(n=e[0]-t[2]),t[0]>e[2]&&(n=t[0]-e[2]),t[1]>e[3]&&(i=t[1]-e[3]),t[3]<e[1]&&(i=e[1]-t[3]),r.distance([0,0],[n,i])}function mn(t,e,r){const n=r.pointOnLine(e,t);return r.distance(t,n.point)}function gn(t,e,r,n,i){const s=Math.min(mn(t,[r,n],i),mn(e,[r,n],i)),a=Math.min(mn(r,[t,e],i),mn(n,[t,e],i));return Math.min(s,a)}function xn(t,e,r,n,i){if(!cn(e,t.length)||!cn(n,r.length))return 1/0;let s=1/0;for(let a=e[0];a<e[1];++a){const e=t[a],o=t[a+1];for(let t=n[0];t<n[1];++t){const n=r[t],a=r[t+1];if(Lr(e,o,n,a))return 0;s=Math.min(s,gn(e,o,n,a,i));}}return s}function vn(t,e,r,n,i){if(!cn(e,t.length)||!cn(n,r.length))return NaN;let s=1/0;for(let a=e[0];a<=e[1];++a)for(let e=n[0];e<=n[1];++e)if(s=Math.min(s,i.distance(t[a],r[e])),0===s)return s;return s}function bn(t,e,r){if(Rr(t,e,!0))return 0;let n=1/0;for(const i of e){const e=i[0],s=i[i.length-1];if(e!==s&&(n=Math.min(n,mn(t,[s,e],r)),0===n))return n;const a=r.pointOnLine(i,t);if(n=Math.min(n,r.distance(t,a.point)),0===n)return n}return n}function wn(t,e,r,n){if(!cn(e,t.length))return NaN;for(let n=e[0];n<=e[1];++n)if(Rr(t[n],r,!0))return 0;let i=1/0;for(let s=e[0];s<e[1];++s){const e=t[s],a=t[s+1];for(const t of r)for(let r=0,s=t.length,o=s-1;r<s;o=r++){const s=t[o],l=t[r];if(Lr(e,a,s,l))return 0;i=Math.min(i,gn(e,a,s,l,n));}}return i}function _n(t,e){for(const r of t)for(const t of r)if(Rr(t,e,!0))return !0;return !1}function Sn(t,e,r,n=1/0){const i=fn(t),s=fn(e);if(n!==1/0&&yn(i,s,r)>=n)return n;if(Vr(i,s)){if(_n(t,e))return 0}else if(_n(e,t))return 0;let a=1/0;for(const n of t)for(let t=0,i=n.length,s=i-1;t<i;s=t++){const i=n[s],o=n[t];for(const t of e)for(let e=0,n=t.length,s=n-1;e<n;s=e++){const n=t[s],l=t[e];if(Lr(i,o,n,l))return 0;a=Math.min(a,gn(i,o,n,l,r));}}return a}function An(t,e,r,n,i,s){if(!s)return;const a=yn(pn(n,s),i,r);a<e&&t.push([a,s,[0,0]]);}function kn(t,e,r,n,i,s,a){if(!s||!a)return;const o=yn(pn(n,s),pn(i,a),r);o<e&&t.push([o,s,a]);}function En(t,e,r,n,i=1/0){let s=Math.min(n.distance(t[0],r[0][0]),i);if(0===s)return s;const a=new Kr([[0,[0,t.length-1],[0,0]]],ln),o=fn(r);for(;a.length>0;){const i=a.pop();if(i[0]>=s)continue;const l=i[1],u=e?50:100;if(un(l)<=u){if(!cn(l,t.length))return NaN;if(e){const e=wn(t,l,r,n);if(isNaN(e)||0===e)return e;s=Math.min(s,e);}else for(let e=l[0];e<=l[1];++e){const i=bn(t[e],r,n);if(s=Math.min(s,i),0===s)return 0}}else {const r=hn(l,e);An(a,s,n,t,o,r[0]),An(a,s,n,t,o,r[1]);}}return s}function Tn(t,e,r,n,i,s=1/0){let a=Math.min(s,i.distance(t[0],r[0]));if(0===a)return a;const o=new Kr([[0,[0,t.length-1],[0,r.length-1]]],ln);for(;o.length>0;){const s=o.pop();if(s[0]>=a)continue;const l=s[1],u=s[2],c=e?50:100,h=n?50:100;if(un(l)<=c&&un(u)<=h){if(!cn(l,t.length)&&cn(u,r.length))return NaN;let s;if(e&&n)s=xn(t,l,r,u,i),a=Math.min(a,s);else if(e&&!n){const e=t.slice(l[0],l[1]+1);for(let t=u[0];t<=u[1];++t)if(s=mn(r[t],e,i),a=Math.min(a,s),0===a)return a}else if(!e&&n){const e=r.slice(u[0],u[1]+1);for(let r=l[0];r<=l[1];++r)if(s=mn(t[r],e,i),a=Math.min(a,s),0===a)return a}else s=vn(t,l,r,u,i),a=Math.min(a,s);}else {const s=hn(l,e),c=hn(u,n);kn(o,a,i,t,r,s[0],c[0]),kn(o,a,i,t,r,s[0],c[1]),kn(o,a,i,t,r,s[1],c[0]),kn(o,a,i,t,r,s[1],c[1]);}}return a}function In(t){return "MultiPolygon"===t.type?t.coordinates.map((t=>({type:"Polygon",coordinates:t}))):"MultiLineString"===t.type?t.coordinates.map((t=>({type:"LineString",coordinates:t}))):"MultiPoint"===t.type?t.coordinates.map((t=>({type:"Point",coordinates:t}))):[t]}class Mn{constructor(t,e){this.type=Ct,this.geojson=t,this.geometries=e;}static parse(t,e){if(2!==t.length)return e.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if($e(t[1])){const e=t[1];if("FeatureCollection"===e.type)return new Mn(e,e.features.map((t=>In(t.geometry))).flat());if("Feature"===e.type)return new Mn(e,In(e.geometry));if("type"in e&&"coordinates"in e)return new Mn(e,In(e))}return e.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){const r=t.geometry(),n=r.flat().map((e=>Pr([e.x,e.y],t.canonical)));if(0===r.length)return NaN;const i=new on(n[0][1]);let s=1/0;for(const t of e){switch(t.type){case "Point":s=Math.min(s,Tn(n,!1,[t.coordinates],!1,i,s));break;case "LineString":s=Math.min(s,Tn(n,!1,t.coordinates,!0,i,s));break;case "Polygon":s=Math.min(s,En(n,!1,t.coordinates,i,s));}if(0===s)return s}return s}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){const r=t.geometry(),n=r.flat().map((e=>Pr([e.x,e.y],t.canonical)));if(0===r.length)return NaN;const i=new on(n[0][1]);let s=1/0;for(const t of e){switch(t.type){case "Point":s=Math.min(s,Tn(n,!0,[t.coordinates],!1,i,s));break;case "LineString":s=Math.min(s,Tn(n,!0,t.coordinates,!0,i,s));break;case "Polygon":s=Math.min(s,En(n,!0,t.coordinates,i,s));}if(0===s)return s}return s}(t,this.geometries);if("Polygon"===t.geometryType())return function(t,e){const r=t.geometry();if(0===r.length||0===r[0].length)return NaN;const n=tn(r,0).map((e=>e.map((e=>e.map((e=>Pr([e.x,e.y],t.canonical))))))),i=new on(n[0][0][0][1]);let s=1/0;for(const t of e)for(const e of n){switch(t.type){case "Point":s=Math.min(s,En([t.coordinates],!1,e,i,s));break;case "LineString":s=Math.min(s,En(t.coordinates,!0,e,i,s));break;case "Polygon":s=Math.min(s,Sn(e,t.coordinates,i,s));}if(0===s)return s}return s}(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return !0}}class Fn{constructor(t){this.type=Ut,this.key=t;}static parse(t,e){if(2!==t.length)return e.error(`Expected 1 argument, but found ${t.length-1} instead.`);const r=t[1];return null==r?e.error("Global state property must be defined."):"string"!=typeof r?e.error(`Global state property must be string, but found ${typeof t[1]} instead.`):new Fn(r)}evaluate(t){var e;const r=null===(e=t.globals)||void 0===e?void 0:e.globalState;return r&&0!==Object.keys(r).length?ve(r,this.key):null}eachChild(){}outputDefined(){return !1}}const Dn={"==":br,"!=":wr,">":Sr,"<":_r,">=":kr,"<=":Ar,array:Xe,at:tr,boolean:Xe,case:ir,coalesce:mr,collator:Er,format:Ir,image:Mr,in:er,"index-of":rr,interpolate:fr,"interpolate-hcl":fr,"interpolate-lab":fr,length:Fr,let:Je,literal:je,match:nr,number:Xe,"number-format":Tr,object:Xe,slice:sr,step:or,string:Xe,"to-boolean":Ze,"to-color":Ze,"to-number":Ze,"to-string":Ze,var:Qe,within:Hr,distance:Mn,"global-state":Fn};class zn{constructor(t,e,r,n){this.name=t,this.type=e,this._evaluate=r,this.args=n;}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t);}outputDefined(){return !1}static parse(t,e){const r=t[0],n=zn.definitions[r];if(!n)return e.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const i=Array.isArray(n)?n[0]:n.type,s=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,a=s.filter((([e])=>!Array.isArray(e)||e.length===t.length-1));let o=null;for(const[n,s]of a){o=new We(e.registry,Ln,e.path,null,e.scope);const a=[];let l=!1;for(let e=1;e<t.length;e++){const r=t[e],i=Array.isArray(n)?n[e-1]:n.type,s=o.parse(r,1+a.length,i);if(!s){l=!0;break}a.push(s);}if(!l)if(Array.isArray(n)&&n.length!==a.length)o.error(`Expected ${n.length} arguments, but found ${a.length} instead.`);else {for(let t=0;t<a.length;t++){const e=Array.isArray(n)?n[t]:n.type,r=a[t];o.concat(t+1).checkSubtype(e,r.type);}if(0===o.errors.length)return new zn(r,i,s,a)}}if(1===a.length)e.errors.push(...o.errors);else {const r=(a.length?a:s).map((([t])=>{return e=t,Array.isArray(e)?`(${e.map(Wt).join(", ")})`:`(${Wt(e.type)}...)`;var e;})).join(" | "),n=[];for(let r=1;r<t.length;r++){const i=e.parse(t[r],1+n.length);if(!i)return null;n.push(Wt(i.type));}e.error(`Expected arguments of type ${r}, but found (${n.join(", ")}) instead.`);}return null}static register(t,e){zn.definitions=e;for(const r in e)t[r]=zn;}}function Pn(t,[e,r,n,i]){e=e.evaluate(t),r=r.evaluate(t),n=n.evaluate(t);const s=i?i.evaluate(t):1,a=Ne(e,r,n,s);if(a)throw new Ve(a);return new Te(e/255,r/255,n/255,s,!1)}function Bn(t,e){return t in e}function Vn(t,e){const r=e[t];return void 0===r?null:r}function Cn(t){return {type:t}}function Ln(t){if(t instanceof Qe)return Ln(t.boundExpression);if(t instanceof zn&&"error"===t.name)return !1;if(t instanceof Er)return !1;if(t instanceof Hr)return !1;if(t instanceof Mn)return !1;if(t instanceof Fn)return !1;const e=t instanceof Ze||t instanceof Xe;let r=!0;return t.eachChild((t=>{r=e?r&&Ln(t):r&&t instanceof je;})),!!r&&On(t)&&Nn(t,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function On(t){if(t instanceof zn){if("get"===t.name&&1===t.args.length)return !1;if("feature-state"===t.name)return !1;if("has"===t.name&&1===t.args.length)return !1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return !1;if(/^filter-/.test(t.name))return !1}if(t instanceof Hr)return !1;if(t instanceof Mn)return !1;let e=!0;return t.eachChild((t=>{e&&!On(t)&&(e=!1);})),e}function Rn(t){if(t instanceof zn&&"feature-state"===t.name)return !1;let e=!0;return t.eachChild((t=>{e&&!Rn(t)&&(e=!1);})),e}function Nn(t,e){if(t instanceof zn&&e.indexOf(t.name)>=0)return !1;let r=!0;return t.eachChild((t=>{r&&!Nn(t,e)&&(r=!1);})),r}function $n(t){return {result:"success",value:t}}function Un(t){return {result:"error",value:t}}function qn(t){return "data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function jn(t){return !!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Gn(t){return !!t.expression&&t.expression.interpolated}function Xn(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function Yn(t){return "object"==typeof t&&null!==t&&!Array.isArray(t)&&Ue(t)===$t}function Zn(t){return t}function Hn(t,e){const r=t.stops&&"object"==typeof t.stops[0][0],n=r||!(r||void 0!==t.property),i=t.type||(Gn(e)?"exponential":"interval"),s=function(t){switch(t.type){case "color":return Te.parse;case "padding":return ze.parse;case "numberArray":return Pe.parse;case "colorArray":return Be.parse;default:return null}}(e);if(s&&((t=zt({},t)).stops&&(t.stops=t.stops.map((t=>[t[0],s(t[1])]))),t.default=s(t.default?t.default:e.default)),t.colorSpace&&"rgb"!==(a=t.colorSpace)&&"hcl"!==a&&"lab"!==a)throw new Error(`Unknown color space: "${t.colorSpace}"`);var a;const o=function(t){switch(t){case "exponential":return Qn;case "interval":return Jn;case "categorical":return Wn;case "identity":return ti;default:throw new Error(`Unknown function type "${t}"`)}}(i);let l,u;if("categorical"===i){l=Object.create(null);for(const e of t.stops)l[e[0]]=e[1];u=typeof t.stops[0][0];}if(r){const r={},n=[];for(let e=0;e<t.stops.length;e++){const i=t.stops[e],s=i[0].zoom;void 0===r[s]&&(r[s]={zoom:s,type:t.type,property:t.property,default:t.default,stops:[]},n.push(s)),r[s].stops.push([i[0].value,i[1]]);}const i=[];for(const t of n)i.push([r[t].zoom,Hn(r[t],e)]);const s={name:"linear"};return {kind:"composite",interpolationType:s,interpolationFactor:fr.interpolationFactor.bind(void 0,s),zoomStops:i.map((t=>t[0])),evaluate:({zoom:r},n)=>Qn({stops:i,base:t.base},e,r).evaluate(r,n)}}if(n){const r="exponential"===i?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return {kind:"camera",interpolationType:r,interpolationFactor:fr.interpolationFactor.bind(void 0,r),zoomStops:t.stops.map((t=>t[0])),evaluate:({zoom:r})=>o(t,e,r,l,u)}}return {kind:"source",evaluate(r,n){const i=n&&n.properties?n.properties[t.property]:void 0;return void 0===i?Kn(t.default,e.default):o(t,e,i,l,u)}}}function Kn(t,e,r){return void 0!==t?t:void 0!==e?e:void 0!==r?r:void 0}function Wn(t,e,r,n,i){return Kn(typeof r===i?n[r]:void 0,t.default,e.default)}function Jn(t,e,r){if("number"!==Xn(r))return Kn(t.default,e.default);const n=t.stops.length;if(1===n)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[n-1][0])return t.stops[n-1][1];const i=ar(t.stops.map((t=>t[0])),r);return t.stops[i][1]}function Qn(t,e,r){const n=void 0!==t.base?t.base:1;if("number"!==Xn(r))return Kn(t.default,e.default);const i=t.stops.length;if(1===i)return t.stops[0][1];if(r<=t.stops[0][0])return t.stops[0][1];if(r>=t.stops[i-1][0])return t.stops[i-1][1];const s=ar(t.stops.map((t=>t[0])),r),a=function(t,e,r,n){const i=n-r,s=t-r;return 0===i?0:1===e?s/i:(Math.pow(e,s)-1)/(Math.pow(e,i)-1)}(r,n,t.stops[s][0],t.stops[s+1][0]),o=t.stops[s][1],l=t.stops[s+1][1],u=yr[e.type]||Zn;return "function"==typeof o.evaluate?{evaluate(...e){const r=o.evaluate.apply(void 0,e),n=l.evaluate.apply(void 0,e);if(void 0!==r&&void 0!==n)return u(r,n,a,t.colorSpace)}}:u(o,l,a,t.colorSpace)}function ti(t,e,r){switch(e.type){case "color":r=Te.parse(r);break;case "formatted":r=De.fromString(r.toString());break;case "resolvedImage":r=Oe.fromString(r.toString());break;case "padding":r=ze.parse(r);break;case "colorArray":r=Be.parse(r);break;case "numberArray":r=Pe.parse(r);break;default:Xn(r)===e.type||"enum"===e.type&&e.values[r]||(r=void 0);}return Kn(r,t.default,e.default)}zn.register(Dn,{error:[{kind:"error"},[Lt],(t,[e])=>{throw new Ve(e.evaluate(t))}],typeof:[Lt,[Ut],(t,[e])=>Wt(Ue(e.evaluate(t)))],"to-rgba":[Kt(Ct,4),[Rt],(t,[e])=>{const[r,n,i,s]=e.evaluate(t).rgb;return [255*r,255*n,255*i,s]}],rgb:[Rt,[Ct,Ct,Ct],Pn],rgba:[Rt,[Ct,Ct,Ct,Ct],Pn],has:{type:Ot,overloads:[[[Lt],(t,[e])=>Bn(e.evaluate(t),t.properties())],[[Lt,$t],(t,[e,r])=>Bn(e.evaluate(t),r.evaluate(t))]]},get:{type:Ut,overloads:[[[Lt],(t,[e])=>Vn(e.evaluate(t),t.properties())],[[Lt,$t],(t,[e,r])=>Vn(e.evaluate(t),r.evaluate(t))]]},"feature-state":[Ut,[Lt],(t,[e])=>Vn(e.evaluate(t),t.featureState||{})],properties:[$t,[],t=>t.properties()],"geometry-type":[Lt,[],t=>t.geometryType()],id:[Ut,[],t=>t.id()],zoom:[Ct,[],t=>t.globals.zoom],"heatmap-density":[Ct,[],t=>t.globals.heatmapDensity||0],elevation:[Ct,[],t=>t.globals.elevation||0],"line-progress":[Ct,[],t=>t.globals.lineProgress||0],accumulated:[Ut,[],t=>void 0===t.globals.accumulated?null:t.globals.accumulated],"+":[Ct,Cn(Ct),(t,e)=>{let r=0;for(const n of e)r+=n.evaluate(t);return r}],"*":[Ct,Cn(Ct),(t,e)=>{let r=1;for(const n of e)r*=n.evaluate(t);return r}],"-":{type:Ct,overloads:[[[Ct,Ct],(t,[e,r])=>e.evaluate(t)-r.evaluate(t)],[[Ct],(t,[e])=>-e.evaluate(t)]]},"/":[Ct,[Ct,Ct],(t,[e,r])=>e.evaluate(t)/r.evaluate(t)],"%":[Ct,[Ct,Ct],(t,[e,r])=>e.evaluate(t)%r.evaluate(t)],ln2:[Ct,[],()=>Math.LN2],pi:[Ct,[],()=>Math.PI],e:[Ct,[],()=>Math.E],"^":[Ct,[Ct,Ct],(t,[e,r])=>Math.pow(e.evaluate(t),r.evaluate(t))],sqrt:[Ct,[Ct],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[Ct,[Ct],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[Ct,[Ct],(t,[e])=>Math.log(e.evaluate(t))],log2:[Ct,[Ct],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[Ct,[Ct],(t,[e])=>Math.sin(e.evaluate(t))],cos:[Ct,[Ct],(t,[e])=>Math.cos(e.evaluate(t))],tan:[Ct,[Ct],(t,[e])=>Math.tan(e.evaluate(t))],asin:[Ct,[Ct],(t,[e])=>Math.asin(e.evaluate(t))],acos:[Ct,[Ct],(t,[e])=>Math.acos(e.evaluate(t))],atan:[Ct,[Ct],(t,[e])=>Math.atan(e.evaluate(t))],min:[Ct,Cn(Ct),(t,e)=>Math.min(...e.map((e=>e.evaluate(t))))],max:[Ct,Cn(Ct),(t,e)=>Math.max(...e.map((e=>e.evaluate(t))))],abs:[Ct,[Ct],(t,[e])=>Math.abs(e.evaluate(t))],round:[Ct,[Ct],(t,[e])=>{const r=e.evaluate(t);return r<0?-Math.round(-r):Math.round(r)}],floor:[Ct,[Ct],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[Ct,[Ct],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[Ot,[Lt,Ut],(t,[e,r])=>t.properties()[e.value]===r.value],"filter-id-==":[Ot,[Ut],(t,[e])=>t.id()===e.value],"filter-type-==":[Ot,[Lt],(t,[e])=>t.geometryType()===e.value],"filter-<":[Ot,[Lt,Ut],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n<i}],"filter-id-<":[Ot,[Ut],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r<n}],"filter->":[Ot,[Lt,Ut],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n>i}],"filter-id->":[Ot,[Ut],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r>n}],"filter-<=":[Ot,[Lt,Ut],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n<=i}],"filter-id-<=":[Ot,[Ut],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r<=n}],"filter->=":[Ot,[Lt,Ut],(t,[e,r])=>{const n=t.properties()[e.value],i=r.value;return typeof n==typeof i&&n>=i}],"filter-id->=":[Ot,[Ut],(t,[e])=>{const r=t.id(),n=e.value;return typeof r==typeof n&&r>=n}],"filter-has":[Ot,[Ut],(t,[e])=>e.value in t.properties()],"filter-has-id":[Ot,[],t=>null!==t.id()&&void 0!==t.id()],"filter-type-in":[Ot,[Kt(Lt)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[Ot,[Kt(Ut)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[Ot,[Lt,Kt(Ut)],(t,[e,r])=>r.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[Ot,[Lt,Kt(Ut)],(t,[e,r])=>function(t,e,r,n){for(;r<=n;){const i=r+n>>1;if(e[i]===t)return !0;e[i]>t?n=i-1:r=i+1;}return !1}(t.properties()[e.value],r.value,0,r.value.length-1)],all:{type:Ot,overloads:[[[Ot,Ot],(t,[e,r])=>e.evaluate(t)&&r.evaluate(t)],[Cn(Ot),(t,e)=>{for(const r of e)if(!r.evaluate(t))return !1;return !0}]]},any:{type:Ot,overloads:[[[Ot,Ot],(t,[e,r])=>e.evaluate(t)||r.evaluate(t)],[Cn(Ot),(t,e)=>{for(const r of e)if(r.evaluate(t))return !0;return !1}]]},"!":[Ot,[Ot],(t,[e])=>!e.evaluate(t)],"is-supported-script":[Ot,[Lt],(t,[e])=>{const r=t.globals&&t.globals.isSupportedScript;return !r||r(e.evaluate(t))}],upcase:[Lt,[Lt],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[Lt,[Lt],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[Lt,Cn(Ut),(t,e)=>e.map((e=>qe(e.evaluate(t)))).join("")],"resolved-locale":[Lt,[qt],(t,[e])=>e.evaluate(t).resolvedLocale()]});class ei{constructor(t,e,r){this.expression=t,this._warningHistory={},this._evaluator=new Ke,this._defaultValue=e?function(t){if("color"===t.type&&Yn(t.default))return new Te(0,0,0,0);switch(t.type){case "color":return Te.parse(t.default)||null;case "padding":return ze.parse(t.default)||null;case "numberArray":return Pe.parse(t.default)||null;case "colorArray":return Be.parse(t.default)||null;case "variableAnchorOffsetCollection":return Le.parse(t.default)||null;case "projectionDefinition":return Re.parse(t.default)||null;default:return void 0===t.default?null:t.default}}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null,this._globalState=r;}evaluateWithoutErrorHandling(t,e,r,n,i,s){return this._globalState&&(t=ci(t,this._globalState)),this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=r,this._evaluator.canonical=n,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=s,this.expression.evaluate(this._evaluator)}evaluate(t,e,r,n,i,s){this._globalState&&(t=ci(t,this._globalState)),this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=r||null,this._evaluator.canonical=n,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=s||null;try{const t=this.expression.evaluate(this._evaluator);if(null==t||"number"==typeof t&&t!=t)return this._defaultValue;if(this._enumValues&&!(t in this._enumValues))throw new Ve(`Expected value to be one of ${Object.keys(this._enumValues).map((t=>JSON.stringify(t))).join(", ")}, but found ${JSON.stringify(t)} instead.`);return t}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}}}function ri(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in Dn}function ni(t,e,r){const n=new We(Dn,Ln,[],e?function(t){const e={color:Rt,string:Lt,number:Ct,enum:Lt,boolean:Ot,formatted:jt,padding:Gt,numberArray:Yt,colorArray:Xt,projectionDefinition:Nt,resolvedImage:Zt,variableAnchorOffsetCollection:Ht};return "array"===t.type?Kt(e[t.value]||Ut,t.length):e[t.type]}(e):void 0),i=n.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return i?$n(new ei(i,e,r)):Un(n.errors)}class ii{constructor(t,e,r){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!Rn(e.expression),this.globalStateRefs=ui(e.expression),this._globalState=r;}evaluateWithoutErrorHandling(t,e,r,n,i,s){return this._globalState&&(t=ci(t,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(t,e,r,n,i,s)}evaluate(t,e,r,n,i,s){return this._globalState&&(t=ci(t,this._globalState)),this._styleExpression.evaluate(t,e,r,n,i,s)}}class si{constructor(t,e,r,n,i){this.kind=t,this.zoomStops=r,this._styleExpression=e,this.isStateDependent="camera"!==t&&!Rn(e.expression),this.globalStateRefs=ui(e.expression),this.interpolationType=n,this._globalState=i;}evaluateWithoutErrorHandling(t,e,r,n,i,s){return this._globalState&&(t=ci(t,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(t,e,r,n,i,s)}evaluate(t,e,r,n,i,s){return this._globalState&&(t=ci(t,this._globalState)),this._styleExpression.evaluate(t,e,r,n,i,s)}interpolationFactor(t,e,r){return this.interpolationType?fr.interpolationFactor(this.interpolationType,t,e,r):0}}function ai(t,e,r){const n=ni(t,e,r);if("error"===n.result)return n;const i=n.value.expression,s=On(i);if(!s&&!qn(e))return Un([new Pt("","data expressions not supported")]);const a=Nn(i,["zoom"]);if(!a&&!jn(e))return Un([new Pt("","zoom expressions not supported")]);const o=li(i);return o||a?o instanceof Pt?Un([o]):o instanceof fr&&!Gn(e)?Un([new Pt("",'"interpolate" expressions cannot be used with this property')]):$n(o?new si(s?"camera":"composite",n.value,o.labels,o instanceof fr?o.interpolation:void 0,r):new ii(s?"constant":"source",n.value,r)):Un([new Pt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class oi{constructor(t,e){this._parameters=t,this._specification=e,zt(this,Hn(this._parameters,this._specification));}static deserialize(t){return new oi(t._parameters,t._specification)}static serialize(t){return {_parameters:t._parameters,_specification:t._specification}}}function li(t){let e=null;if(t instanceof Je)e=li(t.result);else if(t instanceof mr){for(const r of t.args)if(e=li(r),e)break}else (t instanceof or||t instanceof fr)&&t.input instanceof zn&&"zoom"===t.input.name&&(e=t);return e instanceof Pt||t.eachChild((t=>{const r=li(t);r instanceof Pt?e=r:!e&&r?e=new Pt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&r&&e!==r&&(e=new Pt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'));})),e}function ui(t,e=new Set){return t instanceof Fn&&e.add(t.key),t.eachChild((t=>{ui(t,e);})),e}function ci(t,e){const{zoom:r,heatmapDensity:n,elevation:i,lineProgress:s,isSupportedScript:a,accumulated:o}=null!=t?t:{};return {zoom:r,heatmapDensity:n,elevation:i,lineProgress:s,isSupportedScript:a,accumulated:o,globalState:e}}function hi(t){if(!0===t||!1===t)return !0;if(!Array.isArray(t)||0===t.length)return !1;switch(t[0]){case "has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case "in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case "!in":case "!has":case "none":return !1;case "==":case "!=":case ">":case ">=":case "<":case "<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case "any":case "all":for(const e of t.slice(1))if(!hi(e)&&"boolean"!=typeof e)return !1;return !0;default:return !0}}const pi={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function fi(t,e){if(null==t)return {filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};hi(t)||(t=mi(t));const r=ni(t,pi,e);if("error"===r.result)throw new Error(r.value.map((t=>`${t.key}: ${t.message}`)).join(", "));return {filter:(t,e,n)=>r.value.evaluate(t,e,{},n),needGeometry:yi(t),getGlobalStateRefs:()=>ui(r.value.expression)}}function di(t,e){return t<e?-1:t>e?1:0}function yi(t){if(!Array.isArray(t))return !1;if("within"===t[0]||"distance"===t[0])return !0;for(let e=1;e<t.length;e++)if(yi(t[e]))return !0;return !1}function mi(t){if(!t)return !0;const e=t[0];return t.length<=1?"any"!==e:"=="===e?gi(t[1],t[2],"=="):"!="===e?bi(gi(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?gi(t[1],t[2],e):"any"===e?(r=t.slice(1),["any"].concat(r.map(mi))):"all"===e?["all"].concat(t.slice(1).map(mi)):"none"===e?["all"].concat(t.slice(1).map(mi).map(bi)):"in"===e?xi(t[1],t.slice(2)):"!in"===e?bi(xi(t[1],t.slice(2))):"has"===e?vi(t[1]):"!has"!==e||bi(vi(t[1]));var r;}function gi(t,e,r){switch(t){case "$type":return [`filter-type-${r}`,e];case "$id":return [`filter-id-${r}`,e];default:return [`filter-${r}`,t,e]}}function xi(t,e){if(0===e.length)return !1;switch(t){case "$type":return ["filter-type-in",["literal",e]];case "$id":return ["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((t=>typeof t!=typeof e[0]))?["filter-in-large",t,["literal",e.sort(di)]]:["filter-in-small",t,["literal",e]]}}function vi(t){switch(t){case "$type":return !0;case "$id":return ["filter-has-id"];default:return ["filter-has",t]}}function bi(t){return ["!",t]}function wi(t){const e=typeof t;if("number"===e||"boolean"===e||"string"===e||null==t)return JSON.stringify(t);if(Array.isArray(t)){let e="[";for(const r of t)e+=`${wi(r)},`;return `${e}]`}const r=Object.keys(t).sort();let n="{";for(let e=0;e<r.length;e++)n+=`${JSON.stringify(r[e])}:${wi(t[r[e]])},`;return `${n}}`}function _i(t){let e="";for(const r of bt)e+=`/${wi(t[r])}`;return e}function Si(t){const e=t.value;return e?[new Dt(t.key,e,"constants have been deprecated as of v8")]:[]}function Ai(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function ki(t){if(Array.isArray(t))return t.map(ki);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const r in t)e[r]=ki(t[r]);return e}return Ai(t)}function Ei(t){const e=t.key,r=t.value,n=t.valueSpec||{},i=t.objectElementValidators||{},s=t.style,a=t.styleSpec,o=t.validateSpec;let l=[];const u=Xn(r);if("object"!==u)return [new Dt(e,r,`object expected, ${u} found`)];for(const t in r){const u=t.split(".")[0],c=ve(n,u)||n["*"];let h;if(ve(i,u))h=i[u];else if(ve(n,u)){if(void 0===r[t])continue;h=o;}else if(i["*"])h=i["*"];else {if(!n["*"]){l.push(new Dt(e,r[t],`unknown property "${t}"`));continue}h=o;}l=l.concat(h({key:(e?`${e}.`:e)+t,value:r[t],valueSpec:c,style:s,styleSpec:a,object:r,objectKey:t,validateSpec:o},r));}for(const t in n)i[t]||n[t].required&&void 0===n[t].default&&void 0===r[t]&&l.push(new Dt(e,r,`missing required property "${t}"`));return l}function Ti(t){const e=t.value,r=t.valueSpec,n=t.style,i=t.styleSpec,s=t.key,a=t.arrayElementValidator||t.validateSpec;if("array"!==Xn(e))return [new Dt(s,e,`array expected, ${Xn(e)} found`)];if(r.length&&e.length!==r.length)return [new Dt(s,e,`array length ${r.length} expected, length ${e.length} found`)];let o={type:r.value,values:r.values};i.$version<7&&(o.function=r.function),"object"===Xn(r.value)&&(o=r.value);let l=[];for(let r=0;r<e.length;r++)l=l.concat(a({array:e,arrayIndex:r,value:e[r],valueSpec:o,validateSpec:t.validateSpec,style:n,styleSpec:i,key:`${s}[${r}]`}));return l}function Ii(t){const e=t.key,r=t.value,n=t.valueSpec;let i=Xn(r);return "number"===i&&r!=r&&(i="NaN"),"number"!==i?[new Dt(e,r,`number expected, ${i} found`)]:"minimum"in n&&r<n.minimum?[new Dt(e,r,`${r} is less than the minimum value ${n.minimum}`)]:"maximum"in n&&r>n.maximum?[new Dt(e,r,`${r} is greater than the maximum value ${n.maximum}`)]:[]}function Mi(t){const e=t.valueSpec,r=Ai(t.value.type);let n,i,s,a={};const o="categorical"!==r&&void 0===t.value.property,l=!o,u="array"===Xn(t.value.stops)&&"array"===Xn(t.value.stops[0])&&"object"===Xn(t.value.stops[0][0]),c=Ei({key:t.key,value:t.value,valueSpec:t.styleSpec.function,validateSpec:t.validateSpec,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===r)return [new Dt(t.key,t.value,'identity function may not have a "stops" property')];let e=[];const n=t.value;return e=e.concat(Ti({key:t.key,value:n,valueSpec:t.valueSpec,validateSpec:t.validateSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:h})),"array"===Xn(n)&&0===n.length&&e.push(new Dt(t.key,n,"array must have at least one stop")),e},default:function(t){return t.validateSpec({key:t.key,value:t.value,valueSpec:e,validateSpec:t.validateSpec,style:t.style,styleSpec:t.styleSpec})}}});return "identity"===r&&o&&c.push(new Dt(t.key,t.value,'missing required property "property"')),"identity"===r||t.value.stops||c.push(new Dt(t.key,t.value,'missing required property "stops"')),"exponential"===r&&t.valueSpec.expression&&!Gn(t.valueSpec)&&c.push(new Dt(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!qn(t.valueSpec)?c.push(new Dt(t.key,t.value,"property functions not supported")):o&&!jn(t.valueSpec)&&c.push(new Dt(t.key,t.value,"zoom functions not supported"))),"categorical"!==r&&!u||void 0!==t.value.property||c.push(new Dt(t.key,t.value,'"property" property is required')),c;function h(t){let r=[];const n=t.value,o=t.key;if("array"!==Xn(n))return [new Dt(o,n,`array expected, ${Xn(n)} found`)];if(2!==n.length)return [new Dt(o,n,`array length 2 expected, length ${n.length} found`)];if(u){if("object"!==Xn(n[0]))return [new Dt(o,n,`object expected, ${Xn(n[0])} found`)];if(void 0===n[0].zoom)return [new Dt(o,n,"object stop key must have zoom")];if(void 0===n[0].value)return [new Dt(o,n,"object stop key must have value")];if(s&&s>Ai(n[0].zoom))return [new Dt(o,n[0].zoom,"stop zoom values must appear in ascending order")];Ai(n[0].zoom)!==s&&(s=Ai(n[0].zoom),i=void 0,a={}),r=r.concat(Ei({key:`${o}[0]`,value:n[0],valueSpec:{zoom:{}},validateSpec:t.validateSpec,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:Ii,value:p}}));}else r=r.concat(p({key:`${o}[0]`,value:n[0],validateSpec:t.validateSpec,style:t.style,styleSpec:t.styleSpec},n));return ri(ki(n[1]))?r.concat([new Dt(`${o}[1]`,n[1],"expressions are not allowed in function stops.")]):r.concat(t.validateSpec({key:`${o}[1]`,value:n[1],valueSpec:e,validateSpec:t.validateSpec,style:t.style,styleSpec:t.styleSpec}))}function p(t,s){const o=Xn(t.value),l=Ai(t.value),u=null!==t.value?t.value:s;if(n){if(o!==n)return [new Dt(t.key,u,`${o} stop domain type must match previous stop domain type ${n}`)]}else n=o;if("number"!==o&&"string"!==o&&"boolean"!==o)return [new Dt(t.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==o&&"categorical"!==r){let n=`number expected, ${o} found`;return qn(e)&&void 0===r&&(n+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Dt(t.key,u,n)]}return "categorical"!==r||"number"!==o||isFinite(l)&&Math.floor(l)===l?"categorical"!==r&&"number"===o&&void 0!==i&&l<i?[new Dt(t.key,u,"stop domain values must appear in ascending order")]:(i=l,"categorical"===r&&l in a?[new Dt(t.key,u,"stop domain values must be unique")]:(a[l]=!0,[])):[new Dt(t.key,u,`integer expected, found ${l}`)]}}function Fi(t){const e=("property"===t.expressionContext?ai:ni)(ki(t.value),t.valueSpec);if("error"===e.result)return e.value.map((e=>new Dt(`${t.key}${e.key}`,t.value,e.message)));const r=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!r.outputDefined())return [new Dt(t.key,t.value,`Invalid data expression for "${t.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===t.expressionContext&&"layout"===t.propertyType&&!Rn(r))return [new Dt(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!Rn(r))return [new Dt(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!Nn(r,["zoom","feature-state"]))return [new Dt(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!On(r))return [new Dt(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return []}function Di(t){const e=t.key,r=t.value,n=Xn(r);return "string"!==n?[new Dt(e,r,`color expected, ${n} found`)]:Te.parse(String(r))?[]:[new Dt(e,r,`color expected, "${r}" found`)]}function zi(t){const e=t.key,r=t.value,n=t.valueSpec,i=[];return Array.isArray(n.values)?-1===n.values.indexOf(Ai(r))&&i.push(new Dt(e,r,`expected one of [${n.values.join(", ")}], ${JSON.stringify(r)} found`)):-1===Object.keys(n.values).indexOf(Ai(r))&&i.push(new Dt(e,r,`expected one of [${Object.keys(n.values).join(", ")}], ${JSON.stringify(r)} found`)),i}function Pi(t){return hi(ki(t.value))?Fi(zt({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Bi(t)}function Bi(t){const e=t.value,r=t.key;if("array"!==Xn(e))return [new Dt(r,e,`array expected, ${Xn(e)} found`)];const n=t.styleSpec;let i,s=[];if(e.length<1)return [new Dt(r,e,"filter array must have at least 1 element")];switch(s=s.concat(zi({key:`${r}[0]`,value:e[0],valueSpec:n.filter_operator,style:t.style,styleSpec:t.styleSpec})),Ai(e[0])){case "<":case "<=":case ">":case ">=":e.length>=2&&"$type"===Ai(e[1])&&s.push(new Dt(r,e,`"$type" cannot be use with operator "${e[0]}"`));case "==":case "!=":3!==e.length&&s.push(new Dt(r,e,`filter array for operator "${e[0]}" must have 3 elements`));case "in":case "!in":e.length>=2&&(i=Xn(e[1]),"string"!==i&&s.push(new Dt(`${r}[1]`,e[1],`string expected, ${i} found`)));for(let a=2;a<e.length;a++)i=Xn(e[a]),"$type"===Ai(e[1])?s=s.concat(zi({key:`${r}[${a}]`,value:e[a],valueSpec:n.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&s.push(new Dt(`${r}[${a}]`,e[a],`string, number, or boolean expected, ${i} found`));break;case "any":case "all":case "none":for(let n=1;n<e.length;n++)s=s.concat(Bi({key:`${r}[${n}]`,value:e[n],style:t.style,styleSpec:t.styleSpec}));break;case "has":case "!has":i=Xn(e[1]),2!==e.length?s.push(new Dt(r,e,`filter array for "${e[0]}" operator must have 2 elements`)):"string"!==i&&s.push(new Dt(`${r}[1]`,e[1],`string expected, ${i} found`));}return s}function Vi(t,e){const r=t.key,n=t.validateSpec,i=t.style,s=t.styleSpec,a=t.value,o=t.objectKey,l=s[`${e}_${t.layerType}`];if(!l)return [];const u=o.match(/^(.*)-transition$/);if("paint"===e&&u&&l[u[1]]&&l[u[1]].transition)return n({key:r,value:a,valueSpec:s.transition,style:i,styleSpec:s});const c=t.valueSpec||l[o];if(!c)return [new Dt(r,a,`unknown property "${o}"`)];let h;if("string"===Xn(a)&&qn(c)&&!c.tokens&&(h=/^{([^}]+)}$/.exec(a)))return [new Dt(r,a,`"${o}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(h[1])} }\`.`)];const p=[];return "symbol"===t.layerType&&"text-font"===o&&Yn(ki(a))&&"identity"===Ai(a.type)&&p.push(new Dt(r,a,'"text-font" does not support identity functions')),p.concat(n({key:t.key,value:a,valueSpec:c,style:i,styleSpec:s,expressionContext:"property",propertyType:e,propertyKey:o}))}function Ci(t){return Vi(t,"paint")}function Li(t){return Vi(t,"layout")}function Oi(t){let e=[];const r=t.value,n=t.key,i=t.style,s=t.styleSpec;if("object"!==Xn(r))return [new Dt(n,r,`object expected, ${Xn(r)} found`)];r.type||r.ref||e.push(new Dt(n,r,'either "type" or "ref" is required'));let a=Ai(r.type);const o=Ai(r.ref);if(r.id){const s=Ai(r.id);for(let a=0;a<t.arrayIndex;a++){const t=i.layers[a];Ai(t.id)===s&&e.push(new Dt(n,r.id,`duplicate layer id "${r.id}", previously used at line ${t.id.__line__}`));}}if("ref"in r){let t;["type","source","source-layer","filter","layout"].forEach((t=>{t in r&&e.push(new Dt(n,r[t],`"${t}" is prohibited for ref layers`));})),i.layers.forEach((e=>{Ai(e.id)===o&&(t=e);})),t?t.ref?e.push(new Dt(n,r.ref,"ref cannot reference another ref layer")):a=Ai(t.type):e.push(new Dt(n,r.ref,`ref layer "${o}" not found`));}else if("background"!==a)if(r.source){const t=i.sources&&i.sources[r.source],s=t&&Ai(t.type);t?"vector"===s&&"raster"===a?e.push(new Dt(n,r.source,`layer "${r.id}" requires a raster source`)):"raster-dem"!==s&&"hillshade"===a||"raster-dem"!==s&&"color-relief"===a?e.push(new Dt(n,r.source,`layer "${r.id}" requires a raster-dem source`)):"raster"===s&&"raster"!==a?e.push(new Dt(n,r.source,`layer "${r.id}" requires a vector source`)):"vector"!==s||r["source-layer"]?"raster-dem"===s&&"hillshade"!==a&&"color-relief"!==a?e.push(new Dt(n,r.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):"line"!==a||!r.paint||!r.paint["line-gradient"]||"geojson"===s&&t.lineMetrics||e.push(new Dt(n,r,`layer "${r.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new Dt(n,r,`layer "${r.id}" must specify a "source-layer"`)):e.push(new Dt(n,r.source,`source "${r.source}" not found`));}else e.push(new Dt(n,r,'missing required property "source"'));return e=e.concat(Ei({key:n,value:r,valueSpec:s.layer,style:t.style,styleSpec:t.styleSpec,validateSpec:t.validateSpec,objectElementValidators:{"*":()=>[],type:()=>t.validateSpec({key:`${n}.type`,value:r.type,valueSpec:s.layer.type,style:t.style,styleSpec:t.styleSpec,validateSpec:t.validateSpec,object:r,objectKey:"type"}),filter:Pi,layout:t=>Ei({layer:r,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,validateSpec:t.validateSpec,objectElementValidators:{"*":t=>Li(zt({layerType:a},t))}}),paint:t=>Ei({layer:r,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,validateSpec:t.validateSpec,objectElementValidators:{"*":t=>Ci(zt({layerType:a},t))}})}})),e}function Ri(t){const e=t.value,r=t.key,n=Xn(e);return "string"!==n?[new Dt(r,e,`string expected, ${n} found`)]:[]}const Ni={promoteId:function({key:t,value:e}){if("string"===Xn(e))return Ri({key:t,value:e});{const r=[];for(const n in e)r.push(...Ri({key:`${t}.${n}`,value:e[n]}));return r}}};function $i(t){const e=t.value,r=t.key,n=t.styleSpec,i=t.style,s=t.validateSpec;if(!e.type)return [new Dt(r,e,'"type" is required')];const a=Ai(e.type);let o;switch(a){case "vector":case "raster":return o=Ei({key:r,value:e,valueSpec:n[`source_${a.replace("-","_")}`],style:t.style,styleSpec:n,objectElementValidators:Ni,validateSpec:s}),o;case "raster-dem":return o=function(t){var e;const r=null!==(e=t.sourceName)&&void 0!==e?e:"",n=t.value,i=t.styleSpec,s=i.source_raster_dem,a=t.style;let o=[];const l=Xn(n);if(void 0===n)return o;if("object"!==l)return o.push(new Dt("source_raster_dem",n,`object expected, ${l} found`)),o;const u="custom"===Ai(n.encoding),c=["redFactor","greenFactor","blueFactor","baseShift"],h=t.value.encoding?`"${t.value.encoding}"`:"Default";for(const e in n)!u&&c.includes(e)?o.push(new Dt(e,n[e],`In "${r}": "${e}" is only valid when "encoding" is set to "custom". ${h} encoding found`)):s[e]?o=o.concat(t.validateSpec({key:e,value:n[e],valueSpec:s[e],validateSpec:t.validateSpec,style:a,styleSpec:i})):o.push(new Dt(e,n[e],`unknown property "${e}"`));return o}({sourceName:r,value:e,style:t.style,styleSpec:n,validateSpec:s}),o;case "geojson":if(o=Ei({key:r,value:e,valueSpec:n.source_geojson,style:i,styleSpec:n,validateSpec:s,objectElementValidators:Ni}),e.cluster)for(const t in e.clusterProperties){const[n,i]=e.clusterProperties[t],s="string"==typeof n?[n,["accumulated"],["get",t]]:n;o.push(...Fi({key:`${r}.${t}.map`,value:i,expressionContext:"cluster-map"})),o.push(...Fi({key:`${r}.${t}.reduce`,value:s,expressionContext:"cluster-reduce"}));}return o;case "video":return Ei({key:r,value:e,valueSpec:n.source_video,style:i,validateSpec:s,styleSpec:n});case "image":return Ei({key:r,value:e,valueSpec:n.source_image,style:i,validateSpec:s,styleSpec:n});case "canvas":return [new Dt(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return zi({key:`${r}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Ui(t){const e=t.value,r=t.styleSpec,n=r.light,i=t.style;let s=[];const a=Xn(e);if(void 0===e)return s;if("object"!==a)return s=s.concat([new Dt("light",e,`object expected, ${a} found`)]),s;for(const a in e){const o=a.match(/^(.*)-transition$/);s=s.concat(o&&n[o[1]]&&n[o[1]].transition?t.validateSpec({key:a,value:e[a],valueSpec:r.transition,validateSpec:t.validateSpec,style:i,styleSpec:r}):n[a]?t.validateSpec({key:a,value:e[a],valueSpec:n[a],validateSpec:t.validateSpec,style:i,styleSpec:r}):[new Dt(a,e[a],`unknown property "${a}"`)]);}return s}function qi(t){const e=t.value,r=t.styleSpec,n=r.sky,i=t.style,s=Xn(e);if(void 0===e)return [];if("object"!==s)return [new Dt("sky",e,`object expected, ${s} found`)];let a=[];for(const s in e)a=a.concat(n[s]?t.validateSpec({key:s,value:e[s],valueSpec:n[s],style:i,styleSpec:r}):[new Dt(s,e[s],`unknown property "${s}"`)]);return a}function ji(t){const e=t.value,r=t.styleSpec,n=r.terrain,i=t.style;let s=[];const a=Xn(e);if(void 0===e)return s;if("object"!==a)return s=s.concat([new Dt("terrain",e,`object expected, ${a} found`)]),s;for(const a in e)s=s.concat(n[a]?t.validateSpec({key:a,value:e[a],valueSpec:n[a],validateSpec:t.validateSpec,style:i,styleSpec:r}):[new Dt(a,e[a],`unknown property "${a}"`)]);return s}function Gi(t){let e=[];const r=t.value,n=t.key;if(Array.isArray(r)){const i=[],s=[];for(const a in r)r[a].id&&i.includes(r[a].id)&&e.push(new Dt(n,r,`all the sprites' ids must be unique, but ${r[a].id} is duplicated`)),i.push(r[a].id),r[a].url&&s.includes(r[a].url)&&e.push(new Dt(n,r,`all the sprites' URLs must be unique, but ${r[a].url} is duplicated`)),s.push(r[a].url),e=e.concat(Ei({key:`${n}[${a}]`,value:r[a],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:t.validateSpec}));return e}return Ri({key:n,value:r})}function Xi(t){return Boolean(t)&&t.constructor===Object}function Yi(t){return Xi(t.value)?[]:[new Dt(t.key,t.value,`object expected, ${Xn(t.value)} found`)]}const Zi={"*":()=>[],array:Ti,boolean:function(t){const e=t.value,r=t.key,n=Xn(e);return "boolean"!==n?[new Dt(r,e,`boolean expected, ${n} found`)]:[]},number:Ii,color:Di,constants:Si,enum:zi,filter:Pi,function:Mi,layer:Oi,object:Ei,source:$i,light:Ui,sky:qi,terrain:ji,projection:function(t){const e=t.value,r=t.styleSpec,n=r.projection,i=t.style,s=Xn(e);if(void 0===e)return [];if("object"!==s)return [new Dt("projection",e,`object expected, ${s} found`)];let a=[];for(const s in e)a=a.concat(n[s]?t.validateSpec({key:s,value:e[s],valueSpec:n[s],style:i,styleSpec:r}):[new Dt(s,e[s],`unknown property "${s}"`)]);return a},projectionDefinition:function(t){const e=t.key;let r=t.value;r=r instanceof String?r.valueOf():r;const n=Xn(r);return "array"!==n||function(t){return Array.isArray(t)&&3===t.length&&"string"==typeof t[0]&&"string"==typeof t[1]&&"number"==typeof t[2]}(r)||function(t){return !!["interpolate","step","literal"].includes(t[0])}(r)?["array","string"].includes(n)?[]:[new Dt(e,r,`projection expected, invalid type "${n}" found`)]:[new Dt(e,r,`projection expected, invalid array ${JSON.stringify(r)} found`)]},string:Ri,formatted:function(t){return 0===Ri(t).length?[]:Fi(t)},resolvedImage:function(t){return 0===Ri(t).length?[]:Fi(t)},padding:function(t){const e=t.key,r=t.value;if("array"===Xn(r)){if(r.length<1||r.length>4)return [new Dt(e,r,`padding requires 1 to 4 values; ${r.length} values found`)];const n={type:"number"};let i=[];for(let s=0;s<r.length;s++)i=i.concat(t.validateSpec({key:`${e}[${s}]`,value:r[s],validateSpec:t.validateSpec,valueSpec:n}));return i}return Ii({key:e,value:r,valueSpec:{}})},numberArray:function(t){const e=t.key,r=t.value;if("array"===Xn(r)){const n={type:"number"};if(r.length<1)return [new Dt(e,r,"array length at least 1 expected, length 0 found")];let i=[];for(let s=0;s<r.length;s++)i=i.concat(t.validateSpec({key:`${e}[${s}]`,value:r[s],validateSpec:t.validateSpec,valueSpec:n}));return i}return Ii({key:e,value:r,valueSpec:{}})},colorArray:function(t){const e=t.key,r=t.value;if("array"===Xn(r)){if(r.length<1)return [new Dt(e,r,"array length at least 1 expected, length 0 found")];let t=[];for(let n=0;n<r.length;n++)t=t.concat(Di({key:`${e}[${n}]`,value:r[n]}));return t}return Di({key:e,value:r})},variableAnchorOffsetCollection:function(t){const e=t.key,r=t.value,n=Xn(r),i=t.styleSpec;if("array"!==n||r.length<1||r.length%2!=0)return [new Dt(e,r,"variableAnchorOffsetCollection requires a non-empty array of even length")];let s=[];for(let n=0;n<r.length;n+=2)s=s.concat(zi({key:`${e}[${n}]`,value:r[n],valueSpec:i.layout_symbol["text-anchor"]})),s=s.concat(Ti({key:`${e}[${n+1}]`,value:r[n+1],valueSpec:{length:2,value:"number"},validateSpec:t.validateSpec,style:t.style,styleSpec:i}));return s},sprite:Gi,state:Yi,fontFaces:function(t){const e=t.key,r=t.value,n=t.validateSpec,i=t.styleSpec,s=t.style;if(!Xi(r))return [new Dt(e,r,`object expected, ${Xn(r)} found`)];const a=[];for(const t in r){const o=r[t],l=Xn(o);if("string"===l)a.push(...Ri({key:`${e}.${t}`,value:o}));else if("array"===l){const r={url:{type:"string",required:!0},"unicode-range":{type:"array",value:"string"}};for(const[l,u]of o.entries())a.push(...Ei({key:`${e}.${t}[${l}]`,value:u,valueSpec:r,styleSpec:i,style:s,validateSpec:n}));}else a.push(new Dt(`${e}.${t}`,o,`string or array expected, ${l} found`));}return a}};function Hi(t){const e=t.value,r=t.valueSpec,n=t.styleSpec;return t.validateSpec=Hi,r.expression&&Yn(Ai(e))?Mi(t):r.expression&&ri(ki(e))?Fi(t):r.type&&Zi[r.type]?Zi[r.type](t):Ei(zt({},t,{valueSpec:r.type?n[r.type]:r}))}function Ki(t){const e=t.value,r=t.key,n=Ri(t);return n.length||(-1===e.indexOf("{fontstack}")&&n.push(new Dt(r,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&n.push(new Dt(r,e,'"glyphs" url must include a "{range}" token'))),n}function Wi(t,e=vt){let r=[];return r=r.concat(Hi({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,validateSpec:Hi,objectElementValidators:{glyphs:Ki,"*":()=>[]}})),t.constants&&(r=r.concat(Si({key:"constants",value:t.constants}))),Qi(r)}function Ji(t){return function(e){return t(Object.assign({},e,{validateSpec:Hi}))}}function Qi(t){return [].concat(t).sort(((t,e)=>t.line-e.line))}function ts(t){return function(...e){return Qi(t.apply(this,e))}}Wi.source=ts(Ji($i)),Wi.sprite=ts(Ji(Gi)),Wi.glyphs=ts(Ji(Ki)),Wi.light=ts(Ji(Ui)),Wi.sky=ts(Ji(qi)),Wi.terrain=ts(Ji(ji)),Wi.state=ts(Ji(Yi)),Wi.layer=ts(Ji(Oi)),Wi.filter=ts(Ji(Pi)),Wi.paintProperty=ts(Ji(Ci)),Wi.layoutProperty=ts(Ji(Li));const es={type:"enum","property-type":"data-constant",expression:{interpolated:!1,parameters:["global-state"]},values:{visible:{},none:{}},transition:!1,default:"visible"};class rs{constructor(t,e){this._globalState=e,this.setValue(t);}evaluate(){var t;return null!==(t=this._literalValue)&&void 0!==t?t:this._compiledValue.evaluate({})}setValue(t){if(null==t||"visible"===t||"none"===t)return this._literalValue="none"===t?"none":"visible",this._compiledValue=void 0,void(this._globalStateRefs=new Set);const e=ni(t,es,this._globalState);if("error"===e.result)throw this._literalValue="visible",this._compiledValue=void 0,new Error(e.value.map((t=>`${t.key}: ${t.message}`)).join(", "));this._literalValue=void 0,this._compiledValue=e.value,this._globalStateRefs=ui(e.value.expression);}getGlobalStateRefs(){return this._globalStateRefs}}const ns=vt,is=Wi,ss=is.light,as=is.sky,os=is.paintProperty,ls=is.layoutProperty;function us(t,e){let r=!1;if(e&&e.length)for(const n of e)t.fire(new gt(new Error(n.message))),r=!0;return r}class cs{constructor(t,e,r){const n=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const i=new Int32Array(this.arrayBuffer);t=i[0],this.d=(e=i[1])+2*(r=i[2]);for(let t=0;t<this.d*this.d;t++){const e=i[3+t],r=i[3+t+1];n.push(e===r?null:i.subarray(e,r));}const s=i[3+n.length+1];this.keys=i.subarray(i[3+n.length],s),this.bboxes=i.subarray(s),this.insert=this._insertReadonly;}else {this.d=e+2*r;for(let t=0;t<this.d*this.d;t++)n.push([]);this.keys=[],this.bboxes=[];}this.n=e,this.extent=t,this.padding=r,this.scale=e/t,this.uid=0;const i=r/e*t;this.min=-i,this.max=t+i;}insert(t,e,r,n,i){this._forEachCell(e,r,n,i,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(i);}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,e,r,n,i,s){this.cells[i].push(s);}query(t,e,r,n,i){const s=this.min,a=this.max;if(t<=s&&e<=s&&a<=r&&a<=n&&!i)return Array.prototype.slice.call(this.keys);{const s=[];return this._forEachCell(t,e,r,n,this._queryCell,s,{},i),s}}_queryCell(t,e,r,n,i,s,a,o){const l=this.cells[i];if(null!==l){const i=this.keys,u=this.bboxes;for(let c=0;c<l.length;c++){const h=l[c];if(void 0===a[h]){const l=4*h;(o?o(u[l+0],u[l+1],u[l+2],u[l+3]):t<=u[l+2]&&e<=u[l+3]&&r>=u[l+0]&&n>=u[l+1])?(a[h]=!0,s.push(i[h])):a[h]=!1;}}}}_forEachCell(t,e,r,n,i,s,a,o){const l=this._convertToCellCoord(t),u=this._convertToCellCoord(e),c=this._convertToCellCoord(r),h=this._convertToCellCoord(n);for(let p=l;p<=c;p++)for(let l=u;l<=h;l++){const u=this.d*l+p;if((!o||o(this._convertFromCellCoord(p),this._convertFromCellCoord(l),this._convertFromCellCoord(p+1),this._convertFromCellCoord(l+1)))&&i.call(this,t,e,r,n,u,s,a,o))return}}_convertFromCellCoord(t){return (t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,e=3+this.cells.length+1+1;let r=0;for(let t=0;t<this.cells.length;t++)r+=this.cells[t].length;const n=new Int32Array(e+r+this.keys.length+this.bboxes.length);n[0]=this.extent,n[1]=this.n,n[2]=this.padding;let i=e;for(let e=0;e<t.length;e++){const r=t[e];n[3+e]=i,n.set(r,i),i+=r.length;}return n[3+t.length]=i,n.set(this.keys,i),i+=this.keys.length,n[3+t.length+1]=i,n.set(this.bboxes,i),i+=this.bboxes.length,n.buffer}static serialize(t,e){const r=t.toArrayBuffer();return e&&e.push(r),{buffer:r}}static deserialize(t){return new cs(t.buffer)}}const hs={};function ps(t,e,r={}){if(hs[t])throw new Error(`${t} is already registered.`);Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),hs[t]={klass:e,omit:r.omit||[],shallow:r.shallow||[]};}ps("Object",Object),ps("Set",Set),ps("TransferableGridIndex",cs),ps("Color",Te),ps("Error",Error),ps("AJAXError",ct),ps("ResolvedImage",Oe),ps("StylePropertyFunction",oi),ps("StyleExpression",ei,{omit:["_evaluator"]}),ps("ZoomDependentExpression",si),ps("ZoomConstantExpression",ii),ps("CompoundExpression",zn,{omit:["_evaluate"]});for(const t in Dn)Dn[t]._classRegistryKey||ps(`Expression_${t}`,Dn[t]);function fs(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function ds(t){return t.$name||t.constructor._classRegistryKey}function ys(t){return !function(t){if(null===t||"object"!=typeof t)return !1;const e=ds(t);return !(!e||"Object"===e)}(t)&&(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof Blob||t instanceof Error||fs(t)||Z(t)||ArrayBuffer.isView(t)||t instanceof ImageData)}function ms(t,e){if(ys(t))return (fs(t)||Z(t))&&e&&e.push(t),ArrayBuffer.isView(t)&&e&&e.push(t.buffer),t instanceof ImageData&&e&&e.push(t.data.buffer),t;if(Array.isArray(t)){const r=[];for(const n of t)r.push(ms(n,e));return r}if("object"!=typeof t)throw new Error("can't serialize object of type "+typeof t);const r=ds(t);if(!r)throw new Error(`can't serialize object of unregistered class ${t.constructor.name}`);if(!hs[r])throw new Error(`${r} is not registered.`);const{klass:n}=hs[r],i=n.serialize?n.serialize(t,e):{};if(n.serialize){if(e&&i===e[e.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else {for(const n in t){if(!t.hasOwnProperty(n))continue;if(hs[r].omit.indexOf(n)>=0)continue;const s=t[n];i[n]=hs[r].shallow.indexOf(n)>=0?s:ms(s,e);}t instanceof Error&&(i.message=t.message);}if(i.$name)throw new Error("$name property is reserved for worker serialization logic.");return "Object"!==r&&(i.$name=r),i}function gs(t){if(ys(t))return t;if(Array.isArray(t))return t.map(gs);if("object"!=typeof t)throw new Error("can't deserialize object of type "+typeof t);const e=ds(t)||"Object";if(!hs[e])throw new Error(`can't deserialize unregistered class ${e}`);const{klass:r}=hs[e];if(!r)throw new Error(`can't deserialize unregistered class ${e}`);if(r.deserialize)return r.deserialize(t);const n=Object.create(r.prototype);for(const r of Object.keys(t)){if("$name"===r)continue;const i=t[r];n[r]=hs[e].shallow.indexOf(r)>=0?i:gs(i);}return n}class xs{constructor(){this.first=!0;}update(t,e){const r=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=r,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=r,!0):(this.lastFloorZoom>r?(this.lastIntegerZoom=r+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<r&&(this.lastIntegerZoom=r,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=r,!0))}}function vs(t){return /[\u02EA\u02EB\u2E80-\u2FDF\u2FF0-\u303F\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u3105-\u312F\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(t))}function bs(t){return /[\u02EA\u02EB\u1100-\u11FF\u1400-\u167F\u18B0-\u18F5\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303F\u3041-\u3096\u309D-\u30FB\u30FD-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF00-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFE4\uDFF0-\uDFF6]|[\uD81C-\uD822\uD83D\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD30-\uDEFB]|\uD833[\uDEC0-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83C[\uDC00-\uDE00\uDF00-\uDFFF]|\uD83E[\uDD00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(t))}function ws(t){return /\s/u.test(String.fromCodePoint(t))}function _s(t){for(const e of t)if(bs(e.codePointAt(0)))return !0;return !1}function Ss(t){for(const e of t)if(!Es(e.codePointAt(0)))return !1;return !0}function As(t){const e=t.map((t=>{try{return new RegExp(`\\p{sc=${t}}`,"u").source}catch(t){return null}})).filter((t=>t));return new RegExp(e.join("|"),"u")}const ks=As(["Arab","Dupl","Mong","Ougr","Syrc"]);function Es(t){return !ks.test(String.fromCodePoint(t))}function Ts(t){return !(bs(t)||(e=t,/[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2100-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2BB8-\u2BEB\u3000-\u303F\u30A0-\u30FF\uE000-\uF8FF\uFE30-\uFE6F\uFF00-\uFFEF\uFFFC\uFFFD]|[\uDB80-\uDBFF][\uDC00-\uDFFF]/gim.test(String.fromCodePoint(e))));var e;}const Is=As(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Ms(t){return Is.test(String.fromCodePoint(t))}function Fs(t,e){return !(!e&&Ms(t)||/[\u0900-\u0DFF\u0F00-\u109F\u1780-\u17FF]/gim.test(String.fromCodePoint(t)))}function Ds(t){for(const e of t)if(Ms(e.codePointAt(0)))return !0;return !1}const zs=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{};}setState(t){this.pluginStatus=t.pluginStatus,this.pluginURL=t.pluginURL;}getState(){return {pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(t){if(zs.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=t.applyArabicShaping,this.processBidirectionalText=t.processBidirectionalText,this.processStyledBidirectionalText=t.processStyledBidirectionalText,this.loadScriptResolve();}isParsed(){return null!=this.applyArabicShaping&&null!=this.processBidirectionalText&&null!=this.processStyledBidirectionalText}getRTLTextPluginStatus(){return this.pluginStatus}syncState(t,r){return e(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if("loading"!==t.pluginStatus)return this.setState(t),t;const e=t.pluginURL,n=new Promise((t=>{this.loadScriptResolve=t;}));r(e);const i=new Promise((t=>setTimeout((()=>t()),this.TIMEOUT)));if(yield Promise.race([n,i]),this.isParsed()){const t={pluginStatus:"loaded",pluginURL:e};return this.setState(t),t}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${e}`)}))}};class Ps{constructor(t,e){this.isSupportedScript=Bs,this.zoom=t,e?(this.now=e.now||0,this.fadeDuration=e.fadeDuration||0,this.zoomHistory=e.zoomHistory||new xs,this.transition=e.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new xs,this.transition={});}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,e=t-Math.floor(t),r=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*r}:{fromScale:.5,toScale:1,t:1-(1-r)*e}}}function Bs(t){return function(t,e){for(const r of t)if(!Fs(r.codePointAt(0),e))return !1;return !0}(t,"loaded"===zs.getRTLTextPluginStatus())}const Vs="-transition";class Cs{constructor(t,e,r){this.property=t,this.value=e,this.expression=function(t,e,r){if(Yn(t))return new oi(t,e);if(ri(t)){const n=ai(t,e,r);if("error"===n.result)throw new Error(n.value.map((t=>`${t.key}: ${t.message}`)).join(", "));return n.value}{let r=t;return "color"===e.type&&"string"==typeof t?r=Te.parse(t):"padding"!==e.type||"number"!=typeof t&&!Array.isArray(t)?"numberArray"!==e.type||"number"!=typeof t&&!Array.isArray(t)?"colorArray"!==e.type||"string"!=typeof t&&!Array.isArray(t)?"variableAnchorOffsetCollection"===e.type&&Array.isArray(t)?r=Le.parse(t):"projectionDefinition"===e.type&&"string"==typeof t&&(r=Re.parse(t)):r=Be.parse(t):r=Pe.parse(t):r=ze.parse(t),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>r}}}(void 0===e?t.specification.default:e,t.specification,r);}isDataDriven(){return "source"===this.expression.kind||"composite"===this.expression.kind}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(t,e,r){return this.property.possiblyEvaluate(this,t,e,r)}}class Ls{constructor(t,e){this.property=t,this.value=new Cs(t,void 0,e);}transitioned(t,e){return new Rs(this.property,this.value,e,O({},t.transition,this.transition),t.now)}untransitioned(){return new Rs(this.property,this.value,null,{},0)}}class Os{constructor(t,e){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues),this._globalState=e;}getValue(t){return U(this._values[t].value.value)}setValue(t,e){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new Ls(this._values[t].property,this._globalState)),this._values[t].value=new Cs(this._values[t].property,null===e?void 0:U(e),this._globalState);}getTransition(t){return U(this._values[t].transition)}setTransition(t,e){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new Ls(this._values[t].property,this._globalState)),this._values[t].transition=U(e)||void 0;}serialize(){const t={};for(const e of Object.keys(this._values)){const r=this.getValue(e);void 0!==r&&(t[e]=r);const n=this.getTransition(e);void 0!==n&&(t[`${e}${Vs}`]=n);}return t}transitioned(t,e){const r=new Ns(this._properties);for(const n of Object.keys(this._values))r._values[n]=this._values[n].transitioned(t,e._values[n]);return r}untransitioned(){const t=new Ns(this._properties);for(const e of Object.keys(this._values))t._values[e]=this._values[e].untransitioned();return t}}class Rs{constructor(t,e,r,n,i){this.property=t,this.value=e,this.begin=i+n.delay||0,this.end=this.begin+n.duration||0,t.specification.transition&&(n.delay||n.duration)&&(this.prior=r);}possiblyEvaluate(t,e,r){const n=t.now||0,i=this.value.possiblyEvaluate(t,e,r),s=this.prior;if(s){if(n>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(n<this.begin)return s.possiblyEvaluate(t,e,r);{const a=(n-this.begin)/(this.end-this.begin);return this.property.interpolate(s.possiblyEvaluate(t,e,r),i,P(a))}}return i}}class Ns{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues);}possiblyEvaluate(t,e,r){const n=new qs(this._properties);for(const i of Object.keys(this._values))n._values[i]=this._values[i].possiblyEvaluate(t,e,r);return n}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return !0;return !1}}class $s{constructor(t,e){this._properties=t,this._values=Object.create(t.defaultPropertyValues),this._globalState=e;}hasValue(t){return void 0!==this._values[t].value}getValue(t){return U(this._values[t].value)}setValue(t,e){this._values[t]=new Cs(this._values[t].property,null===e?void 0:U(e),this._globalState);}serialize(){const t={};for(const e of Object.keys(this._values)){const r=this.getValue(e);void 0!==r&&(t[e]=r);}return t}possiblyEvaluate(t,e,r){const n=new qs(this._properties);for(const i of Object.keys(this._values))n._values[i]=this._values[i].possiblyEvaluate(t,e,r);return n}}class Us{constructor(t,e,r){this.property=t,this.value=e,this.parameters=r;}isConstant(){return "constant"===this.value.kind}constantOr(t){return "constant"===this.value.kind?this.value.value:t}evaluate(t,e,r,n){return this.property.evaluate(this.value,this.parameters,t,e,r,n)}}class qs{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues);}get(t){return this._values[t]}}class js{constructor(t){this.specification=t;}possiblyEvaluate(t,e){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(e)}interpolate(t,e,r){const n=yr[this.specification.type];return n?n(t,e,r):t}}class Gs{constructor(t,e){this.specification=t,this.overrides=e;}possiblyEvaluate(t,e,r,n){return new Us(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},r,n)}:t.expression,e)}interpolate(t,e,r){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new Us(this,{kind:"constant",value:void 0},t.parameters);const n=yr[this.specification.type];if(n){const i=n(t.value.value,e.value.value,r);return new Us(this,{kind:"constant",value:i},t.parameters)}return t}evaluate(t,e,r,n,i,s){return "constant"===t.kind?t.value:t.evaluate(e,r,n,i,s)}}class Xs extends Gs{possiblyEvaluate(t,e,r,n){if(void 0===t.value)return new Us(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){const i=t.expression.evaluate(e,null,{},r,n),s="resolvedImage"===t.property.specification.type&&"string"!=typeof i?i.name:i,a=this._calculate(s,s,s,e);return new Us(this,{kind:"constant",value:a},e)}if("camera"===t.expression.kind){const r=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new Us(this,{kind:"constant",value:r},e)}return new Us(this,t.expression,e)}evaluate(t,e,r,n,i,s){if("source"===t.kind){const a=t.evaluate(e,r,n,i,s);return this._calculate(a,a,a,e)}return "composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},r,n),t.evaluate({zoom:Math.floor(e.zoom)},r,n),t.evaluate({zoom:Math.floor(e.zoom)+1},r,n),e):t.value}_calculate(t,e,r,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:r,to:e}}interpolate(t){return t}}class Ys{constructor(t){this.specification=t;}possiblyEvaluate(t,e,r,n){if(void 0!==t.value){if("constant"===t.expression.kind){const i=t.expression.evaluate(e,null,{},r,n);return this._calculate(i,i,i,e)}return this._calculate(t.expression.evaluate(new Ps(Math.floor(e.zoom-1),e)),t.expression.evaluate(new Ps(Math.floor(e.zoom),e)),t.expression.evaluate(new Ps(Math.floor(e.zoom+1),e)),e)}}_calculate(t,e,r,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:r,to:e}}interpolate(t){return t}}class Zs{constructor(t){this.specification=t;}possiblyEvaluate(t,e,r,n){return !!t.expression.evaluate(e,null,{},r,n)}interpolate(){return !1}}class Hs{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const e in t){const r=t[e];r.specification.overridable&&this.overridableProperties.push(e);const n=this.defaultPropertyValues[e]=new Cs(r,void 0,void 0),i=this.defaultTransitionablePropertyValues[e]=new Ls(r,void 0);this.defaultTransitioningPropertyValues[e]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=n.possiblyEvaluate({});}}}ps("DataDrivenProperty",Gs),ps("DataConstantProperty",js),ps("CrossFadedDataDrivenProperty",Xs),ps("CrossFadedProperty",Ys),ps("ColorRampProperty",Zs);class Ks extends xt{constructor(t,e,r){if(super(),this.id=t.id,this.type=t.type,this._globalState=r,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},"custom"!==t.type&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,this._visibilityExpression=function(t,e){return new rs(t,e)}(this.visibility,r),"background"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter,this._featureFilter=fi(t.filter,r)),e.layout&&(this._unevaluatedLayout=new $s(e.layout,r)),e.paint)){this._transitionablePaint=new Os(e.paint,r);for(const e in t.paint)this.setPaintProperty(e,t.paint[e],{validate:!1});for(const e in t.layout)this.setLayoutProperty(e,t.layout[e],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new qs(e.paint);}}setFilter(t){this.filter=t,this._featureFilter=fi(t,this._globalState);}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return "visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)}getLayoutAffectingGlobalStateRefs(){const t=new Set;for(const e of this._visibilityExpression.getGlobalStateRefs())t.add(e);if(this._unevaluatedLayout)for(const e in this._unevaluatedLayout._values){const r=this._unevaluatedLayout._values[e];for(const e of r.getGlobalStateRefs())t.add(e);}for(const e of this._featureFilter.getGlobalStateRefs())t.add(e);return t}getPaintAffectingGlobalStateRefs(){var t;const e=new globalThis.Map;if(this._transitionablePaint)for(const r in this._transitionablePaint._values){const n=this._transitionablePaint._values[r].value;for(const i of n.getGlobalStateRefs()){const s=null!==(t=e.get(i))&&void 0!==t?t:[];s.push({name:r,value:n.value}),e.set(i,s);}}return e}getVisibilityAffectingGlobalStateRefs(){return this._visibilityExpression.getGlobalStateRefs()}setLayoutProperty(t,e,r={}){if(null==e||!this._validate(ls,`layers.${this.id}.layout.${t}`,t,e,r))return "visibility"===t?(this.visibility=e,this._visibilityExpression.setValue(e),void this.recalculateVisibility()):void this._unevaluatedLayout.setValue(t,e)}getPaintProperty(t){return t.endsWith(Vs)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,e,r={}){if(null!=e&&this._validate(os,`layers.${this.id}.paint.${t}`,t,e,r))return !1;if(t.endsWith(Vs))return this._transitionablePaint.setTransition(t.slice(0,-11),e||void 0),!1;{const r=this._transitionablePaint._values[t],n="cross-faded-data-driven"===r.property.specification["property-type"],i=r.value.isDataDriven(),s=r.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);const a=this._transitionablePaint._values[t].value;return a.isDataDriven()||i||n||this._handleOverridablePaintPropertyUpdate(t,s,a)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,e,r){return !1}isHidden(t=this.minzoom,e=!1){return !!(this.minzoom&&t<(e?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this._evaluatedVisibility}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint);}hasTransition(){return this._transitioningPaint.hasTransition()}recalculateVisibility(){this._evaluatedVisibility=this._visibilityExpression.evaluate();}recalculate(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e);}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),$(t,((t,e)=>!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)))}_validate(t,e,r,n,i={}){return (!i||!1!==i.validate)&&us(this,t.call(is,{key:e,layerType:this.type,objectKey:r,value:n,styleSpec:vt,style:{glyphs:!0,sprite:!0}}))}is3D(){return !1}isTileClipped(){return !1}hasOffscreenPass(){return !1}resize(){}isStateDependent(){for(const t in this.paint._values){const e=this.paint.get(t);if(e instanceof Us&&qn(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return !0}return !1}}let Ws;var Js={get paint(){return Ws=Ws||new Hs({"raster-opacity":new js(vt.paint_raster["raster-opacity"]),"raster-hue-rotate":new js(vt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new js(vt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new js(vt.paint_raster["raster-brightness-max"]),"raster-saturation":new js(vt.paint_raster["raster-saturation"]),"raster-contrast":new js(vt.paint_raster["raster-contrast"]),"raster-resampling":new js(vt.paint_raster["raster-resampling"]),"raster-fade-duration":new js(vt.paint_raster["raster-fade-duration"])})}};class Qs extends Ks{constructor(t,e){super(t,Js,e);}}const ta={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ea{constructor(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8;}}class ra{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0);}static serialize(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews());}clear(){this.length=0;}resize(t){this.reserve(t),this.length=t;}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const e=this.uint8;this._refreshViews(),e&&this.uint8.set(e);}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function na(t,e=1){let r=0,n=0;return {members:t.map((t=>{const i=ta[t.type].BYTES_PER_ELEMENT,s=r=ia(r,Math.max(e,i)),a=t.components||1;return n=Math.max(n,i),r+=i*a,{name:t.name,type:t.type,components:a,offset:s}})),size:ia(r,Math.max(n,e)),alignment:e}}function ia(t,e){return Math.ceil(t/e)*e}class sa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer);}emplaceBack(t,e){const r=this.length;return this.resize(r+1),this.emplace(r,t,e)}emplace(t,e,r){const n=2*t;return this.int16[n+0]=e,this.int16[n+1]=r,t}}sa.prototype.bytesPerElement=4,ps("StructArrayLayout2i4",sa);class aa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer);}emplaceBack(t,e,r){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)}emplace(t,e,r,n){const i=3*t;return this.int16[i+0]=e,this.int16[i+1]=r,this.int16[i+2]=n,t}}aa.prototype.bytesPerElement=6,ps("StructArrayLayout3i6",aa);class oa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer);}emplaceBack(t,e,r,n){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)}emplace(t,e,r,n,i){const s=4*t;return this.int16[s+0]=e,this.int16[s+1]=r,this.int16[s+2]=n,this.int16[s+3]=i,t}}oa.prototype.bytesPerElement=8,ps("StructArrayLayout4i8",oa);class la extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer);}emplaceBack(t,e,r,n,i,s){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,r,n,i,s)}emplace(t,e,r,n,i,s,a){const o=6*t;return this.int16[o+0]=e,this.int16[o+1]=r,this.int16[o+2]=n,this.int16[o+3]=i,this.int16[o+4]=s,this.int16[o+5]=a,t}}la.prototype.bytesPerElement=12,ps("StructArrayLayout2i4i12",la);class ua extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer);}emplaceBack(t,e,r,n,i,s){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,r,n,i,s)}emplace(t,e,r,n,i,s,a){const o=4*t,l=8*t;return this.int16[o+0]=e,this.int16[o+1]=r,this.uint8[l+4]=n,this.uint8[l+5]=i,this.uint8[l+6]=s,this.uint8[l+7]=a,t}}ua.prototype.bytesPerElement=8,ps("StructArrayLayout2i4ub8",ua);class ca extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer);}emplaceBack(t,e){const r=this.length;return this.resize(r+1),this.emplace(r,t,e)}emplace(t,e,r){const n=2*t;return this.float32[n+0]=e,this.float32[n+1]=r,t}}ca.prototype.bytesPerElement=8,ps("StructArrayLayout2f8",ca);class ha extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer);}emplaceBack(t,e,r,n,i,s,a,o,l,u){const c=this.length;return this.resize(c+1),this.emplace(c,t,e,r,n,i,s,a,o,l,u)}emplace(t,e,r,n,i,s,a,o,l,u,c){const h=10*t;return this.uint16[h+0]=e,this.uint16[h+1]=r,this.uint16[h+2]=n,this.uint16[h+3]=i,this.uint16[h+4]=s,this.uint16[h+5]=a,this.uint16[h+6]=o,this.uint16[h+7]=l,this.uint16[h+8]=u,this.uint16[h+9]=c,t}}ha.prototype.bytesPerElement=20,ps("StructArrayLayout10ui20",ha);class pa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer);}emplaceBack(t,e,r,n,i,s,a,o){const l=this.length;return this.resize(l+1),this.emplace(l,t,e,r,n,i,s,a,o)}emplace(t,e,r,n,i,s,a,o,l){const u=8*t;return this.uint16[u+0]=e,this.uint16[u+1]=r,this.uint16[u+2]=n,this.uint16[u+3]=i,this.uint16[u+4]=s,this.uint16[u+5]=a,this.uint16[u+6]=o,this.uint16[u+7]=l,t}}pa.prototype.bytesPerElement=16,ps("StructArrayLayout8ui16",pa);class fa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer);}emplaceBack(t,e,r,n,i,s,a,o,l,u,c,h){const p=this.length;return this.resize(p+1),this.emplace(p,t,e,r,n,i,s,a,o,l,u,c,h)}emplace(t,e,r,n,i,s,a,o,l,u,c,h,p){const f=12*t;return this.int16[f+0]=e,this.int16[f+1]=r,this.int16[f+2]=n,this.int16[f+3]=i,this.uint16[f+4]=s,this.uint16[f+5]=a,this.uint16[f+6]=o,this.uint16[f+7]=l,this.int16[f+8]=u,this.int16[f+9]=c,this.int16[f+10]=h,this.int16[f+11]=p,t}}fa.prototype.bytesPerElement=24,ps("StructArrayLayout4i4ui4i24",fa);class da extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer);}emplaceBack(t,e,r){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)}emplace(t,e,r,n){const i=3*t;return this.float32[i+0]=e,this.float32[i+1]=r,this.float32[i+2]=n,t}}da.prototype.bytesPerElement=12,ps("StructArrayLayout3f12",da);class ya extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer);}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint32[1*t+0]=e,t}}ya.prototype.bytesPerElement=4,ps("StructArrayLayout1ul4",ya);class ma extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer);}emplaceBack(t,e,r,n,i,s,a,o,l){const u=this.length;return this.resize(u+1),this.emplace(u,t,e,r,n,i,s,a,o,l)}emplace(t,e,r,n,i,s,a,o,l,u){const c=10*t,h=5*t;return this.int16[c+0]=e,this.int16[c+1]=r,this.int16[c+2]=n,this.int16[c+3]=i,this.int16[c+4]=s,this.int16[c+5]=a,this.uint32[h+3]=o,this.uint16[c+8]=l,this.uint16[c+9]=u,t}}ma.prototype.bytesPerElement=20,ps("StructArrayLayout6i1ul2ui20",ma);class ga extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer);}emplaceBack(t,e,r,n,i,s){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,r,n,i,s)}emplace(t,e,r,n,i,s,a){const o=6*t;return this.int16[o+0]=e,this.int16[o+1]=r,this.int16[o+2]=n,this.int16[o+3]=i,this.int16[o+4]=s,this.int16[o+5]=a,t}}ga.prototype.bytesPerElement=12,ps("StructArrayLayout2i2i2i12",ga);class xa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer);}emplaceBack(t,e,r,n,i){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,r,n,i)}emplace(t,e,r,n,i,s){const a=4*t,o=8*t;return this.float32[a+0]=e,this.float32[a+1]=r,this.float32[a+2]=n,this.int16[o+6]=i,this.int16[o+7]=s,t}}xa.prototype.bytesPerElement=16,ps("StructArrayLayout2f1f2i16",xa);class va extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer);}emplaceBack(t,e,r,n,i,s){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,r,n,i,s)}emplace(t,e,r,n,i,s,a){const o=16*t,l=4*t,u=8*t;return this.uint8[o+0]=e,this.uint8[o+1]=r,this.float32[l+1]=n,this.float32[l+2]=i,this.int16[u+6]=s,this.int16[u+7]=a,t}}va.prototype.bytesPerElement=16,ps("StructArrayLayout2ub2f2i16",va);class ba extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer);}emplaceBack(t,e,r){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)}emplace(t,e,r,n){const i=3*t;return this.uint16[i+0]=e,this.uint16[i+1]=r,this.uint16[i+2]=n,t}}ba.prototype.bytesPerElement=6,ps("StructArrayLayout3ui6",ba);class wa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer);}emplaceBack(t,e,r,n,i,s,a,o,l,u,c,h,p,f,d,y,m){const g=this.length;return this.resize(g+1),this.emplace(g,t,e,r,n,i,s,a,o,l,u,c,h,p,f,d,y,m)}emplace(t,e,r,n,i,s,a,o,l,u,c,h,p,f,d,y,m,g){const x=24*t,v=12*t,b=48*t;return this.int16[x+0]=e,this.int16[x+1]=r,this.uint16[x+2]=n,this.uint16[x+3]=i,this.uint32[v+2]=s,this.uint32[v+3]=a,this.uint32[v+4]=o,this.uint16[x+10]=l,this.uint16[x+11]=u,this.uint16[x+12]=c,this.float32[v+7]=h,this.float32[v+8]=p,this.uint8[b+36]=f,this.uint8[b+37]=d,this.uint8[b+38]=y,this.uint32[v+10]=m,this.int16[x+22]=g,t}}wa.prototype.bytesPerElement=48,ps("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",wa);class _a extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer);}emplaceBack(t,e,r,n,i,s,a,o,l,u,c,h,p,f,d,y,m,g,x,v,b,w,_,S,A,k,E,T){const I=this.length;return this.resize(I+1),this.emplace(I,t,e,r,n,i,s,a,o,l,u,c,h,p,f,d,y,m,g,x,v,b,w,_,S,A,k,E,T)}emplace(t,e,r,n,i,s,a,o,l,u,c,h,p,f,d,y,m,g,x,v,b,w,_,S,A,k,E,T,I){const M=32*t,F=16*t;return this.int16[M+0]=e,this.int16[M+1]=r,this.int16[M+2]=n,this.int16[M+3]=i,this.int16[M+4]=s,this.int16[M+5]=a,this.int16[M+6]=o,this.int16[M+7]=l,this.uint16[M+8]=u,this.uint16[M+9]=c,this.uint16[M+10]=h,this.uint16[M+11]=p,this.uint16[M+12]=f,this.uint16[M+13]=d,this.uint16[M+14]=y,this.uint16[M+15]=m,this.uint16[M+16]=g,this.uint16[M+17]=x,this.uint16[M+18]=v,this.uint16[M+19]=b,this.uint16[M+20]=w,this.uint16[M+21]=_,this.uint16[M+22]=S,this.uint32[F+12]=A,this.float32[F+13]=k,this.float32[F+14]=E,this.uint16[M+30]=T,this.uint16[M+31]=I,t}}_a.prototype.bytesPerElement=64,ps("StructArrayLayout8i15ui1ul2f2ui64",_a);class Sa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer);}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.float32[1*t+0]=e,t}}Sa.prototype.bytesPerElement=4,ps("StructArrayLayout1f4",Sa);class Aa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer);}emplaceBack(t,e,r){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)}emplace(t,e,r,n){const i=3*t;return this.uint16[6*t+0]=e,this.float32[i+1]=r,this.float32[i+2]=n,t}}Aa.prototype.bytesPerElement=12,ps("StructArrayLayout1ui2f12",Aa);class ka extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer);}emplaceBack(t,e,r){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,r)}emplace(t,e,r,n){const i=4*t;return this.uint32[2*t+0]=e,this.uint16[i+2]=r,this.uint16[i+3]=n,t}}ka.prototype.bytesPerElement=8,ps("StructArrayLayout1ul2ui8",ka);class Ea extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer);}emplaceBack(t,e){const r=this.length;return this.resize(r+1),this.emplace(r,t,e)}emplace(t,e,r){const n=2*t;return this.uint16[n+0]=e,this.uint16[n+1]=r,t}}Ea.prototype.bytesPerElement=4,ps("StructArrayLayout2ui4",Ea);class Ta extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer);}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint16[1*t+0]=e,t}}Ta.prototype.bytesPerElement=2,ps("StructArrayLayout1ui2",Ta);class Ia extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer);}emplaceBack(t,e,r,n){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,r,n)}emplace(t,e,r,n,i){const s=4*t;return this.float32[s+0]=e,this.float32[s+1]=r,this.float32[s+2]=n,this.float32[s+3]=i,t}}Ia.prototype.bytesPerElement=16,ps("StructArrayLayout4f16",Ia);class Ma extends ea{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new r(this.anchorPointX,this.anchorPointY)}}Ma.prototype.size=20;class Fa extends ma{get(t){return new Ma(this,t)}}ps("CollisionBoxArray",Fa);class Da extends ea{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t;}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t;}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t;}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Da.prototype.size=48;class za extends wa{get(t){return new Da(this,t)}}ps("PlacedSymbolArray",za);class Pa extends ea{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t;}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Pa.prototype.size=64;class Ba extends _a{get(t){return new Pa(this,t)}}ps("SymbolInstanceArray",Ba);class Va extends Sa{getoffsetX(t){return this.float32[1*t+0]}}ps("GlyphOffsetArray",Va);class Ca extends aa{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}ps("SymbolLineVertexArray",Ca);class La extends ea{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}La.prototype.size=12;class Oa extends Aa{get(t){return new La(this,t)}}ps("TextAnchorOffsetArray",Oa);class Ra extends ea{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ra.prototype.size=8;class Na extends ka{get(t){return new Ra(this,t)}}ps("FeatureIndexArray",Na);class $a extends sa{}class Ua extends sa{}class qa extends sa{}class ja extends la{}class Ga extends ua{}class Xa extends ca{}class Ya extends ha{}class Za extends pa{}class Ha extends fa{}class Ka extends da{}class Wa extends ya{}class Ja extends ga{}class Qa extends va{}class to extends ba{}class eo extends Ea{}const ro=na([{name:"a_pos",components:2,type:"Int16"}],4),{members:no}=ro;class io{constructor(t=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=t;}prepareSegment(t,e,r,n){const i=this.segments[this.segments.length-1];return t>io.MAX_VERTEX_ARRAY_LENGTH&&j(`Max vertices per segment is ${io.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${io.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!i||i.vertexLength+t>io.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==n?this.createNewSegment(e,r,n):i}createNewSegment(t,e,r){const n={vertexOffset:t.length,primitiveOffset:e.length,vertexLength:0,primitiveLength:0,vaos:{}};return void 0!==r&&(n.sortKey=r),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(n),n}getOrCreateLatestSegment(t,e,r){return this.prepareSegment(0,t,e,r)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0;}get(){return this.segments}destroy(){for(const t of this.segments)for(const e in t.vaos)t.vaos[e].destroy();}static simpleSegment(t,e,r,n){return new io([{vertexOffset:t,primitiveOffset:e,vertexLength:r,primitiveLength:n,vaos:{},sortKey:0}])}}function so(t,e){return 256*(t=C(Math.floor(t),0,255))+C(Math.floor(e),0,255)}io.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ps("SegmentVector",io);const ao=na([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),oo=na([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var lo,uo,co,ho={exports:{}},po={exports:{}},fo={exports:{}},yo=function(){if(co)return ho.exports;co=1;var t=(lo||(lo=1,po.exports=function(t,e){var r,n,i,s,a,o,l,u;for(n=t.length-(r=3&t.length),i=e,a=3432918353,o=461845907,u=0;u<n;)l=255&t.charCodeAt(u)|(255&t.charCodeAt(++u))<<8|(255&t.charCodeAt(++u))<<16|(255&t.charCodeAt(++u))<<24,++u,i=27492+(65535&(s=5*(65535&(i=(i^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*o+(((l>>>16)*o&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(s>>>16)&65535)<<16);switch(l=0,r){case 3:l^=(255&t.charCodeAt(u+2))<<16;case 2:l^=(255&t.charCodeAt(u+1))<<8;case 1:i^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(u)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*o+(((l>>>16)*o&65535)<<16)&4294967295;}return i^=t.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}),po.exports),e=(uo||(uo=1,fo.exports=function(t,e){for(var r,n=t.length,i=e^n,s=0;n>=4;)r=1540483477*(65535&(r=255&t.charCodeAt(s)|(255&t.charCodeAt(++s))<<8|(255&t.charCodeAt(++s))<<16|(255&t.charCodeAt(++s))<<24))+((1540483477*(r>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),n-=4,++s;switch(n){case 3:i^=(255&t.charCodeAt(s+2))<<16;case 2:i^=(255&t.charCodeAt(s+1))<<8;case 1:i=1540483477*(65535&(i^=255&t.charCodeAt(s)))+((1540483477*(i>>>16)&65535)<<16);}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0}),fo.exports);return ho.exports=t,ho.exports.murmur3=t,ho.exports.murmur2=e,ho.exports}(),mo=n(yo);class go{constructor(){this.ids=[],this.positions=[],this.indexed=!1;}add(t,e,r,n){this.ids.push(xo(t)),this.positions.push(e,r,n);}getPositions(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const e=xo(t);let r=0,n=this.ids.length-1;for(;r<n;){const t=r+n>>1;this.ids[t]>=e?n=t:r=t+1;}const i=[];for(;this.ids[r]===e;)i.push({index:this.positions[3*r],start:this.positions[3*r+1],end:this.positions[3*r+2]}),r++;return i}static serialize(t,e){const r=new Float64Array(t.ids),n=new Uint32Array(t.positions);return vo(r,n,0,r.length-1),e&&e.push(r.buffer,n.buffer),{ids:r,positions:n}}static deserialize(t){const e=new go;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e}}function xo(t){const e=+t;return !isNaN(e)&&e<=Number.MAX_SAFE_INTEGER?e:mo(String(t))}function vo(t,e,r,n){for(;r<n;){const i=t[r+n>>1];let s=r-1,a=n+1;for(;;){do{s++;}while(t[s]<i);do{a--;}while(t[a]>i);if(s>=a)break;bo(t,s,a),bo(e,3*s,3*a),bo(e,3*s+1,3*a+1),bo(e,3*s+2,3*a+2);}a-r<n-a?(vo(t,e,r,a),r=a+1):(vo(t,e,a+1,n),n=a);}}function bo(t,e,r){const n=t[e];t[e]=t[r],t[r]=n;}ps("FeaturePositionMap",go);class wo{constructor(t,e){this.gl=t.gl,this.location=e;}}class _o extends wo{constructor(t,e){super(t,e),this.current=0;}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t));}}class So extends wo{constructor(t,e){super(t,e),this.current=[0,0,0,0];}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]));}}class Ao extends wo{constructor(t,e){super(t,e),this.current=Te.transparent;}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a));}}const ko=new Float32Array(16);function Eo(t){return [so(255*t.r,255*t.g),so(255*t.b,255*t.a)]}class To{constructor(t,e,r){this.value=t,this.uniformNames=e.map((t=>`u_${t}`)),this.type=r;}setUniform(t,e,r){t.set(r.constantOr(this.value));}getBinding(t,e,r){return "color"===this.type?new Ao(t,e):new _o(t,e)}}class Io{constructor(t,e){this.uniformNames=e.map((t=>`u_${t}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1;}setConstantPatternPositions(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tlbr,this.patternTo=t.tlbr;}setConstantDashPositions(t,e){this.dashTo=[0,t.y,t.height,t.width],this.dashFrom=[0,e.y,e.height,e.width];}setUniform(t,e,r,n){let i=null;"u_pattern_to"===n?i=this.patternTo:"u_pattern_from"===n?i=this.patternFrom:"u_dasharray_to"===n?i=this.dashTo:"u_dasharray_from"===n?i=this.dashFrom:"u_pixel_ratio_to"===n?i=this.pixelRatioTo:"u_pixel_ratio_from"===n&&(i=this.pixelRatioFrom),null!==i&&t.set(i);}getBinding(t,e,r){return "u_pattern"===r.substr(0,9)||"u_dasharray_"===r.substr(0,12)?new So(t,e):new _o(t,e)}}class Mo{constructor(t,e,r,n){this.expression=t,this.type=r,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:`a_${t}`,type:"Float32",components:"color"===r?2:1,offset:0}))),this.paintVertexArray=new n;}populatePaintArray(t,e,r){const n=this.paintVertexArray.length,i=this.expression.evaluate(new Ps(0,r),e,{},r.canonical,[],r.formattedSection);this.paintVertexArray.resize(t),this._setPaintValue(n,t,i);}updatePaintArray(t,e,r,n,i){const s=this.expression.evaluate(new Ps(0,i),r,n);this._setPaintValue(t,e,s);}_setPaintValue(t,e,r){if("color"===this.type){const n=Eo(r);for(let r=t;r<e;r++)this.paintVertexArray.emplace(r,n[0],n[1]);}else {for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,r);this.maxValue=Math.max(this.maxValue,Math.abs(r));}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent));}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy();}}class Fo{constructor(t,e,r,n,i,s){this.expression=t,this.uniformNames=e.map((t=>`u_${t}_t`)),this.type=r,this.useIntegerZoom=n,this.zoom=i,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:`a_${t}`,type:"Float32",components:"color"===r?4:2,offset:0}))),this.paintVertexArray=new s;}populatePaintArray(t,e,r){const n=this.expression.evaluate(new Ps(this.zoom,r),e,{},r.canonical,[],r.formattedSection),i=this.expression.evaluate(new Ps(this.zoom+1,r),e,{},r.canonical,[],r.formattedSection),s=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(s,t,n,i);}updatePaintArray(t,e,r,n,i){const s=this.expression.evaluate(new Ps(this.zoom,i),r,n),a=this.expression.evaluate(new Ps(this.zoom+1,i),r,n);this._setPaintValue(t,e,s,a);}_setPaintValue(t,e,r,n){if("color"===this.type){const i=Eo(r),s=Eo(n);for(let r=t;r<e;r++)this.paintVertexArray.emplace(r,i[0],i[1],s[0],s[1]);}else {for(let i=t;i<e;i++)this.paintVertexArray.emplace(i,r,n);this.maxValue=Math.max(this.maxValue,Math.abs(r),Math.abs(n));}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent));}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy();}setUniform(t,e){const r=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,n=C(this.expression.interpolationFactor(r,this.zoom,this.zoom+1),0,1);t.set(n);}getBinding(t,e,r){return new _o(t,e)}}class Do{constructor(t,e,r,n,i,s){this.expression=t,this.type=e,this.useIntegerZoom=r,this.zoom=n,this.layerId=s,this.zoomInPaintVertexArray=new i,this.zoomOutPaintVertexArray=new i;}populatePaintArray(t,e,r){const n=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(n,t,this.getPositionIds(e),r);}updatePaintArray(t,e,r,n,i){this._setPaintValues(t,e,this.getPositionIds(r),i);}_setPaintValues(t,e,r,n){const i=this.getPositions(n);if(!i||!r)return;const s=i[r.min],a=i[r.mid],o=i[r.max];if(s&&a&&o)for(let r=t;r<e;r++)this.emplace(this.zoomInPaintVertexArray,r,a,s),this.emplace(this.zoomOutPaintVertexArray,r,a,o);}upload(t){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const e=this.getVertexAttributes();this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,e,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,e,this.expression.isStateDependent);}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy();}}class zo extends Do{getPositions(t){return t.imagePositions}getPositionIds(t){return t.patterns&&t.patterns[this.layerId]}getVertexAttributes(){return ao.members}emplace(t,e,r,n){t.emplace(e,r.tlbr[0],r.tlbr[1],r.tlbr[2],r.tlbr[3],n.tlbr[0],n.tlbr[1],n.tlbr[2],n.tlbr[3],r.pixelRatio,n.pixelRatio);}}class Po extends Do{getPositions(t){return t.dashPositions}getPositionIds(t){return t.dashes&&t.dashes[this.layerId]}getVertexAttributes(){return oo.members}emplace(t,e,r,n){t.emplace(e,0,r.y,r.height,r.width,0,n.y,n.height,n.width);}}class Bo{constructor(t,e,r){this.binders={},this._buffers=[];const n=[];for(const i in t.paint._values){if(!r(i))continue;const s=t.paint.get(i);if(!(s instanceof Us&&qn(s.property.specification)))continue;const a=Co(i,t.type),o=s.value,l=s.property.specification.type,u=s.property.useIntegerZoom,c=s.property.specification["property-type"],h="cross-faded"===c||"cross-faded-data-driven"===c;if("constant"===o.kind)this.binders[i]=h?new Io(o.value,a):new To(o.value,a,l),n.push(`/u_${i}`);else if("source"===o.kind||h){const r=Lo(i,l,"source");this.binders[i]=h?"line-dasharray"===i?new Po(o,l,u,e,r,t.id):new zo(o,l,u,e,r,t.id):new Mo(o,a,l,r),n.push(`/a_${i}`);}else {const t=Lo(i,l,"composite");this.binders[i]=new Fo(o,a,l,u,e,t),n.push(`/z_${i}`);}}this.cacheKey=n.sort().join("");}getMaxValue(t){const e=this.binders[t];return e instanceof Mo||e instanceof Fo?e.maxValue:0}populatePaintArrays(t,e,r){for(const n in this.binders){const i=this.binders[n];(i instanceof Mo||i instanceof Fo||i instanceof Do)&&i.populatePaintArray(t,e,r);}}setConstantPatternPositions(t,e){for(const r in this.binders){const n=this.binders[r];n instanceof Io&&n.setConstantPatternPositions(t,e);}}setConstantDashPositions(t,e){for(const r in this.binders){const n=this.binders[r];n instanceof Io&&n.setConstantDashPositions(t,e);}}updatePaintArrays(t,e,r,n,i){let s=!1;for(const a in t){const o=e.getPositions(a);for(const e of o){const o=r.feature(e.index);for(const r in this.binders){const l=this.binders[r];if((l instanceof Mo||l instanceof Fo||l instanceof Do)&&!0===l.expression.isStateDependent){const u=n.paint.get(r);l.expression=u.value,l.updatePaintArray(e.start,e.end,o,t[a],i),s=!0;}}}}return s}defines(){const t=[];for(const e in this.binders){const r=this.binders[e];(r instanceof To||r instanceof Io)&&t.push(...r.uniformNames.map((t=>`#define HAS_UNIFORM_${t}`)));}return t}getBinderAttributes(){const t=[];for(const e in this.binders){const r=this.binders[e];if(r instanceof Mo||r instanceof Fo)for(let e=0;e<r.paintVertexAttributes.length;e++)t.push(r.paintVertexAttributes[e].name);else if(r instanceof Do){const e=r.getVertexAttributes();for(const r of e)t.push(r.name);}}return t}getBinderUniforms(){const t=[];for(const e in this.binders){const r=this.binders[e];if(r instanceof To||r instanceof Io||r instanceof Fo)for(const e of r.uniformNames)t.push(e);}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,e){const r=[];for(const n in this.binders){const i=this.binders[n];if(i instanceof To||i instanceof Io||i instanceof Fo)for(const s of i.uniformNames)if(e[s]){const a=i.getBinding(t,e[s],s);r.push({name:s,property:n,binding:a});}}return r}setUniforms(t,e,r,n){for(const{name:t,property:i,binding:s}of e)this.binders[i].setUniform(s,n,r.get(i),t);}updatePaintBuffers(t){this._buffers=[];for(const e in this.binders){const r=this.binders[e];if(t&&r instanceof Do){const e=2===t.fromScale?r.zoomInPaintVertexBuffer:r.zoomOutPaintVertexBuffer;e&&this._buffers.push(e);}else (r instanceof Mo||r instanceof Fo)&&r.paintVertexBuffer&&this._buffers.push(r.paintVertexBuffer);}}upload(t){for(const e in this.binders){const r=this.binders[e];(r instanceof Mo||r instanceof Fo||r instanceof Do)&&r.upload(t);}this.updatePaintBuffers();}destroy(){for(const t in this.binders){const e=this.binders[t];(e instanceof Mo||e instanceof Fo||e instanceof Do)&&e.destroy();}}}class Vo{constructor(t,e,r=()=>!0){this.programConfigurations={};for(const n of t)this.programConfigurations[n.id]=new Bo(n,e,r);this.needsUpload=!1,this._featureMap=new go,this._bufferOffset=0;}populatePaintArrays(t,e,r,n){for(const r in this.programConfigurations)this.programConfigurations[r].populatePaintArrays(t,e,n);void 0!==e.id&&this._featureMap.add(e.id,r,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0;}updatePaintArrays(t,e,r,n){for(const i of r)this.needsUpload=this.programConfigurations[i.id].updatePaintArrays(t,this._featureMap,e,i,n)||this.needsUpload;}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1;}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy();}}function Co(t,e){return {"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[t]||[t.replace(`${e}-`,"").replace(/-/g,"_")]}function Lo(t,e,r){const n={color:{source:ca,composite:Ia},number:{source:Sa,composite:ca}},i=function(t){return {"line-pattern":{source:Ya,composite:Ya},"fill-pattern":{source:Ya,composite:Ya},"fill-extrusion-pattern":{source:Ya,composite:Ya},"line-dasharray":{source:Za,composite:Za}}[t]}(t);return i&&i[r]||n[e][r]}ps("ConstantBinder",To),ps("CrossFadedConstantBinder",Io),ps("SourceExpressionBinder",Mo),ps("CrossFadedPatternBinder",zo),ps("CrossFadedDasharrayBinder",Po),ps("CompositeExpressionBinder",Fo),ps("ProgramConfiguration",Bo,{omit:["_buffers"]}),ps("ProgramConfigurationSet",Vo);const Oo=Math.pow(2,14)-1,Ro=-Oo-1;function No(t){const e=M/t.extent,r=t.loadGeometry();for(let t=0;t<r.length;t++){const n=r[t];for(let t=0;t<n.length;t++){const r=n[t],i=Math.round(r.x*e),s=Math.round(r.y*e);r.x=C(i,Ro,Oo),r.y=C(s,Ro,Oo),(i<r.x||i>r.x+1||s<r.y||s>r.y+1)&&j("Geometry exceeds allowed extent, reduce your vector tile buffer size");}}return r}function $o(t,e){return {type:t.type,id:t.id,properties:t.properties,geometry:e?No(t):[]}}const Uo=-32768;function qo(t,e,r,n,i){t.emplaceBack(Uo+8*e+n,Uo+8*r+i);}class jo{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasDependencies=!1,this.layoutVertexArray=new Ua,this.indexArray=new to,this.segments=new io,this.programConfigurations=new Vo(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id));}populate(t,e,r){const n=this.layers[0],i=[];let s=null,a=!1,o="heatmap"===n.type;if("circle"===n.type){const t=n;s=t.layout.get("circle-sort-key"),a=!s.isConstant(),o=o||"map"===t.paint.get("circle-pitch-alignment");}const l=o?e.subdivisionGranularity.circle:1;for(const{feature:e,id:n,index:o,sourceLayerIndex:l}of t){const t=this.layers[0]._featureFilter.needGeometry,u=$o(e,t);if(!this.layers[0]._featureFilter.filter(new Ps(this.zoom),u,r))continue;const c=a?s.evaluate(u,{},r):void 0,h={id:n,properties:e.properties,type:e.type,sourceLayerIndex:l,index:o,geometry:t?u.geometry:No(e),patterns:{},sortKey:c};i.push(h);}a&&i.sort(((t,e)=>t.sortKey-e.sortKey));for(const n of i){const{geometry:i,index:s,sourceLayerIndex:a}=n,o=t[s].feature;this.addFeature(n,i,s,r,l),e.featureIndex.insert(o,i,s,a,this.index);}}update(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,{imagePositions:r});}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return !this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,no),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0;}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy());}addFeature(t,e,r,n,i=1){let s;switch(i){case 1:s=[0,7];break;case 3:s=[0,2,5,7];break;case 5:s=[0,1,3,4,6,7];break;case 7:s=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${i}; valid values are 1, 3, 5, 7.`)}const a=s.length;for(const r of e)for(const e of r){const r=e.x,n=e.y;if(r<0||r>=M||n<0||n>=M)continue;const i=this.segments.prepareSegment(a*a,this.layoutVertexArray,this.indexArray,t.sortKey),o=i.vertexLength;for(let t=0;t<a;t++)for(let e=0;e<a;e++)qo(this.layoutVertexArray,r,n,s[e],s[t]);for(let t=0;t<a-1;t++)for(let e=0;e<a-1;e++){const r=o+t*a+e,n=o+(t+1)*a+e;this.indexArray.emplaceBack(r,n+1,r+1),this.indexArray.emplaceBack(r,n,n+1);}i.vertexLength+=a*a,i.primitiveLength+=(a-1)*(a-1)*2;}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,{imagePositions:{},canonical:n});}}function Go(t,e){for(let r=0;r<t.length;r++)if(tl(e,t[r]))return !0;for(let r=0;r<e.length;r++)if(tl(t,e[r]))return !0;return !!Ho(t,e)}function Xo(t,e,r){return !!tl(t,e)||!!Wo(e,t,r)}function Yo(t,e){if(1===t.length)return Qo(e,t[0]);for(let r=0;r<e.length;r++){const n=e[r];for(let e=0;e<n.length;e++)if(tl(t,n[e]))return !0}for(let r=0;r<t.length;r++)if(Qo(e,t[r]))return !0;for(let r=0;r<e.length;r++)if(Ho(t,e[r]))return !0;return !1}function Zo(t,e,r){if(t.length>1){if(Ho(t,e))return !0;for(let n=0;n<e.length;n++)if(Wo(e[n],t,r))return !0}for(let n=0;n<t.length;n++)if(Wo(t[n],e,r))return !0;return !1}function Ho(t,e){if(0===t.length||0===e.length)return !1;for(let r=0;r<t.length-1;r++){const n=t[r],i=t[r+1];for(let t=0;t<e.length-1;t++)if(Ko(n,i,e[t],e[t+1]))return !0}return !1}function Ko(t,e,r,n){return G(t,r,n)!==G(e,r,n)&&G(t,e,r)!==G(t,e,n)}function Wo(t,e,r){const n=r*r;if(1===e.length)return t.distSqr(e[0])<n;for(let r=1;r<e.length;r++)if(Jo(t,e[r-1],e[r])<n)return !0;return !1}function Jo(t,e,r){const n=e.distSqr(r);if(0===n)return t.distSqr(e);const i=((t.x-e.x)*(r.x-e.x)+(t.y-e.y)*(r.y-e.y))/n;return t.distSqr(i<0?e:i>1?r:r.sub(e)._mult(i)._add(e))}function Qo(t,e){let r,n,i,s=!1;for(let a=0;a<t.length;a++){r=t[a];for(let t=0,a=r.length-1;t<r.length;a=t++)n=r[t],i=r[a],n.y>e.y!=i.y>e.y&&e.x<(i.x-n.x)*(e.y-n.y)/(i.y-n.y)+n.x&&(s=!s);}return s}function tl(t,e){let r=!1;for(let n=0,i=t.length-1;n<t.length;i=n++){const s=t[n],a=t[i];s.y>e.y!=a.y>e.y&&e.x<(a.x-s.x)*(e.y-s.y)/(a.y-s.y)+s.x&&(r=!r);}return r}function el(t,e,r){const n=r[0],i=r[2];if(t.x<n.x&&e.x<n.x||t.x>i.x&&e.x>i.x||t.y<n.y&&e.y<n.y||t.y>i.y&&e.y>i.y)return !1;const s=G(t,e,r[0]);return s!==G(t,e,r[1])||s!==G(t,e,r[2])||s!==G(t,e,r[3])}function rl(t,e,r){const n=e.paint.get(t).value;return "constant"===n.kind?n.value:r.programConfigurations.get(e.id).getMaxValue(t)}function nl(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function il(t,e,n,i,s){if(!e[0]&&!e[1])return t;const a=r.convert(e)._mult(s);"viewport"===n&&a._rotate(-i);const o=[];for(let e=0;e<t.length;e++)o.push(t[e].sub(a));return o}function sl(t){const e=[];for(let r=0;r<t.length;r++){const n=t[r],i=e.at(-1);(0===r||i&&!n.equals(i))&&e.push(n);}return e}function al({queryGeometry:t,size:e},r){return Xo(t,r,e)}function ol({queryGeometry:t,size:e,transform:r,unwrappedTileID:n,getElevation:i},s){return Xo(t,s,e*(r.projectTileCoordinates(s.x,s.y,n,i).signedDistanceFromCamera/r.cameraToCenterDistance))}function ll({queryGeometry:t,size:e,transform:r,unwrappedTileID:n,getElevation:i},s){const a=r.projectTileCoordinates(s.x,s.y,n,i).signedDistanceFromCamera,o=e*(r.cameraToCenterDistance/a);return Xo(t,hl(s,r,n,i),o)}function ul({queryGeometry:t,size:e,transform:r,unwrappedTileID:n,getElevation:i},s){return Xo(t,hl(s,r,n,i),e)}function cl({queryGeometry:t,size:e,transform:r,unwrappedTileID:n,getElevation:i,pitchAlignment:s="map",pitchScale:a="map"},o){const l="map"===s?"map"===a?al:ol:"map"===a?ll:ul,u={queryGeometry:t,size:e,transform:r,unwrappedTileID:n,getElevation:i};for(const t of o)for(const e of t)if(l(u,e))return !0;return !1}function hl(t,e,n,i){const s=e.projectTileCoordinates(t.x,t.y,n,i).point;return new r((.5*s.x+.5)*e.width,(.5*-s.y+.5)*e.height)}let pl,fl;ps("CircleBucket",jo,{omit:["layers"]});var dl={get paint(){return fl=fl||new Hs({"circle-radius":new Gs(vt.paint_circle["circle-radius"]),"circle-color":new Gs(vt.paint_circle["circle-color"]),"circle-blur":new Gs(vt.paint_circle["circle-blur"]),"circle-opacity":new Gs(vt.paint_circle["circle-opacity"]),"circle-translate":new js(vt.paint_circle["circle-translate"]),"circle-translate-anchor":new js(vt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new js(vt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new js(vt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Gs(vt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Gs(vt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Gs(vt.paint_circle["circle-stroke-opacity"])})},get layout(){return pl=pl||new Hs({"circle-sort-key":new Gs(vt.layout_circle["circle-sort-key"])})}};class yl extends Ks{constructor(t,e){super(t,dl,e);}createBucket(t){return new jo(t)}queryRadius(t){const e=t;return rl("circle-radius",this,e)+rl("circle-stroke-width",this,e)+nl(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:t,feature:e,featureState:r,geometry:n,transform:i,pixelsToTileUnits:s,unwrappedTileID:a,getElevation:o}){const l=il(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-i.bearingInRadians,s),u=this.paint.get("circle-radius").evaluate(e,r)+this.paint.get("circle-stroke-width").evaluate(e,r),c=this.paint.get("circle-pitch-scale"),h=this.paint.get("circle-pitch-alignment");let p,f;return "map"===h?(p=l,f=u*s):(p=function(t,e,r,n){return t.map((t=>hl(t,e,r,n)))}(l,i,a,o),f=u),cl({queryGeometry:p,size:f,transform:i,unwrappedTileID:a,getElevation:o,pitchAlignment:h,pitchScale:c},n)}}class ml extends jo{}let gl;ps("HeatmapBucket",ml,{omit:["layers"]});var xl={get paint(){return gl=gl||new Hs({"heatmap-radius":new Gs(vt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Gs(vt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new js(vt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Zs(vt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new js(vt.paint_heatmap["heatmap-opacity"])})}};function vl(t,{width:e,height:r},n,i){if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==e*r*n)throw new RangeError(`mismatched image size. expected: ${i.length} but got: ${e*r*n}`)}else i=new Uint8Array(e*r*n);return t.width=e,t.height=r,t.data=i,t}function bl(t,{width:e,height:r},n){if(e===t.width&&r===t.height)return;const i=vl({},{width:e,height:r},n);wl(t,i,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,e),height:Math.min(t.height,r)},n),t.width=e,t.height=r,t.data=i.data;}function wl(t,e,r,n,i,s){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");const a=t.data,o=e.data;if(a===o)throw new Error("srcData equals dstData, so image is already copied");for(let l=0;l<i.height;l++){const u=((r.y+l)*t.width+r.x)*s,c=((n.y+l)*e.width+n.x)*s;for(let t=0;t<i.width*s;t++)o[c+t]=a[u+t];}return e}class _l{constructor(t,e){vl(this,t,1,e);}resize(t){bl(this,t,1);}clone(){return new _l({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,r,n,i){wl(t,e,r,n,i,1);}}class Sl{constructor(t,e){vl(this,t,4,e);}resize(t){bl(this,t,4);}replace(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t;}clone(){return new Sl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,r,n,i){wl(t,e,r,n,i,4);}setPixel(t,e,r){const n=4*(t*this.width+e);this.data[n+0]=Math.round(255*r.r/r.a),this.data[n+1]=Math.round(255*r.g/r.a),this.data[n+2]=Math.round(255*r.b/r.a),this.data[n+3]=Math.round(255*r.a);}}function Al(t){const e={},r=t.resolution||256,n=t.clips?t.clips.length:1,i=t.image||new Sl({width:r,height:n});if(Math.log(r)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${r}`);const s=(n,s,a)=>{e[t.evaluationKey]=a;const o=t.expression.evaluate(e);i.setPixel(n/4/r,s/4,o);};if(t.clips)for(let e=0,i=0;e<n;++e,i+=4*r)for(let n=0,a=0;n<r;n++,a+=4){const o=n/(r-1),{start:l,end:u}=t.clips[e];s(i,a,l*(1-o)+u*o);}else for(let t=0,e=0;t<r;t++,e+=4)s(0,e,t/(r-1));return i}ps("AlphaImage",_l),ps("RGBAImage",Sl);const kl="big-fb";class El extends Ks{createBucket(t){return new ml(t)}constructor(t,e){super(t,xl,e),this.heatmapFbos=new Map,this._updateColorRamp();}_handleSpecialPaintPropertyUpdate(t){"heatmap-color"===t&&this._updateColorRamp();}_updateColorRamp(){this.colorRamp=Al({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null;}resize(){this.heatmapFbos.has(kl)&&this.heatmapFbos.delete(kl);}queryRadius(t){return rl("heatmap-radius",this,t)}queryIntersectsFeature({queryGeometry:t,feature:e,featureState:r,geometry:n,transform:i,pixelsToTileUnits:s,unwrappedTileID:a,getElevation:o}){return cl({queryGeometry:t,size:this.paint.get("heatmap-radius").evaluate(e,r)*s,transform:i,unwrappedTileID:a,getElevation:o},n)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&!this.isHidden()}}let Tl;var Il={get paint(){return Tl=Tl||new Hs({"hillshade-illumination-direction":new js(vt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new js(vt.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new js(vt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new js(vt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new js(vt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new js(vt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new js(vt.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new js(vt.paint_hillshade["hillshade-method"])})}};class Ml extends Ks{constructor(t,e){super(t,Il,e),this.recalculate({zoom:0,zoomHistory:{}},void 0);}getIlluminationProperties(){let t=this.paint.get("hillshade-illumination-direction").values,e=this.paint.get("hillshade-illumination-altitude").values,r=this.paint.get("hillshade-highlight-color").values,n=this.paint.get("hillshade-shadow-color").values;const i=Math.max(t.length,e.length,r.length,n.length);t=t.concat(Array(i-t.length).fill(t.at(-1))),e=e.concat(Array(i-e.length).fill(e.at(-1))),r=r.concat(Array(i-r.length).fill(r.at(-1))),n=n.concat(Array(i-n.length).fill(n.at(-1)));const s=e.map(tt);return {directionRadians:t.map(tt),altitudeRadians:s,shadowColor:n,highlightColor:r}}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&!this.isHidden()}}let Fl;var Dl={get paint(){return Fl=Fl||new Hs({"color-relief-opacity":new js(vt["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new Zs(vt["paint_color-relief"]["color-relief-color"])})}};class zl{constructor(t,e,r,n){this.context=t,this.format=r,this.texture=t.gl.createTexture(),this.update(e,n);}update(t,e,r){const{width:n,height:i}=t,s=!(this.size&&this.size[0]===n&&this.size[1]===i||r),{context:a}=this,{gl:o}=a;if(this.useMipmap=Boolean(e&&e.useMipmap),o.bindTexture(o.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===o.RGBA&&(!e||!1!==e.premultiply)),s)this.size=[n,i],t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||Z(t)?o.texImage2D(o.TEXTURE_2D,0,this.format,this.format,o.UNSIGNED_BYTE,t):o.texImage2D(o.TEXTURE_2D,0,this.format,n,i,0,this.format,o.UNSIGNED_BYTE,t.data);else {const{x:e,y:s}=r||{x:0,y:0};t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||Z(t)?o.texSubImage2D(o.TEXTURE_2D,0,e,s,o.RGBA,o.UNSIGNED_BYTE,t):o.texSubImage2D(o.TEXTURE_2D,0,e,s,n,i,o.RGBA,o.UNSIGNED_BYTE,t.data);}this.useMipmap&&this.isSizePowerOfTwo()&&o.generateMipmap(o.TEXTURE_2D),a.pixelStoreUnpackFlipY.setDefault(),a.pixelStoreUnpack.setDefault(),a.pixelStoreUnpackPremultiplyAlpha.setDefault();}bind(t,e,r){const{context:n}=this,{gl:i}=n;i.bindTexture(i.TEXTURE_2D,this.texture),r!==i.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(r=i.LINEAR),t!==this.filter&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,r||t),this.filter=t),e!==this.wrap&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,e),this.wrap=e);}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null;}}class Pl{constructor(t,e,r,n=1,i=1,s=1,a=0){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(r&&!["mapbox","terrarium","custom"].includes(r))return void j(`"${r}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=e.height;const o=this.dim=e.height-2;switch(this.data=new Uint32Array(e.data.buffer),r){case "terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case "custom":this.redFactor=n,this.greenFactor=i,this.blueFactor=s,this.baseShift=a;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4;}for(let t=0;t<o;t++)this.data[this._idx(-1,t)]=this.data[this._idx(0,t)],this.data[this._idx(o,t)]=this.data[this._idx(o-1,t)],this.data[this._idx(t,-1)]=this.data[this._idx(t,0)],this.data[this._idx(t,o)]=this.data[this._idx(t,o-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(o,-1)]=this.data[this._idx(o-1,0)],this.data[this._idx(-1,o)]=this.data[this._idx(0,o-1)],this.data[this._idx(o,o)]=this.data[this._idx(o-1,o-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let t=0;t<o;t++)for(let e=0;e<o;e++){const r=this.get(t,e);r>this.max&&(this.max=r),r<this.min&&(this.min=r);}}get(t,e){const r=new Uint8Array(this.data.buffer),n=4*this._idx(t,e);return this.unpack(r[n],r[n+1],r[n+2])}getUnpackVector(){return [this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError(`Out of range source coordinates for DEM data. x: ${t}, y: ${e}, dim: ${this.dim}`);return (e+1)*this.stride+(t+1)}unpack(t,e,r){return t*this.redFactor+e*this.greenFactor+r*this.blueFactor-this.baseShift}pack(t){return Bl(t,this.getUnpackVector())}getPixels(){return new Sl({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,e,r){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let n=e*this.dim,i=e*this.dim+this.dim,s=r*this.dim,a=r*this.dim+this.dim;switch(e){case -1:n=i-1;break;case 1:i=n+1;}switch(r){case -1:s=a-1;break;case 1:a=s+1;}const o=-e*this.dim,l=-r*this.dim;for(let e=s;e<a;e++)for(let r=n;r<i;r++)this.data[this._idx(r,e)]=t.data[this._idx(r+o,e+l)];}}function Bl(t,e){const r=e[0],n=e[1],i=e[2],s=e[3],a=Math.min(r,n,i),o=Math.round((t+s)/a);return {r:Math.floor(o*a/r)%256,g:Math.floor(o*a/n)%256,b:Math.floor(o*a/i)%256}}ps("DEMData",Pl);class Vl extends Ks{constructor(t,e){super(t,Dl,e);}_createColorRamp(t){const e={elevationStops:[],colorStops:[]},r=this._transitionablePaint._values["color-relief-color"].value.expression;if(r instanceof ii&&r._styleExpression.expression instanceof fr){this.colorRampExpression=r;const t=r._styleExpression.expression;e.elevationStops=t.labels,e.colorStops=[];for(const r of e.elevationStops)e.colorStops.push(t.evaluate({globals:{elevation:r}}));}if(e.elevationStops.length<1&&(e.elevationStops=[0],e.colorStops=[Te.transparent]),e.elevationStops.length<2&&(e.elevationStops.push(e.elevationStops[0]+1),e.colorStops.push(e.colorStops[0])),e.elevationStops.length<=t)return e;const n={elevationStops:[],colorStops:[]},i=(e.elevationStops.length-1)/(t-1);for(let t=0;t<e.elevationStops.length-.5;t+=i)n.elevationStops.push(e.elevationStops[Math.round(t)]),n.colorStops.push(e.colorStops[Math.round(t)]);return j(`Too many colors in specification of ${this.id} color-relief layer, may not render properly. Max possible colors: ${t}, provided: ${e.elevationStops.length}`),n}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(t,e,r){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const n=this._createColorRamp(e),i=new Sl({width:n.colorStops.length,height:1}),s=new Sl({width:n.colorStops.length,height:1});for(let t=0;t<n.elevationStops.length;t++){const e=Bl(n.elevationStops[t],r);s.setPixel(0,t,new Te(e.r/255,e.g/255,e.b/255,1)),i.setPixel(0,t,n.colorStops[t]);}return this.colorRampTextures={elevationTexture:new zl(t,s,t.gl.RGBA),colorTexture:new zl(t,i,t.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return !this.isHidden()&&!!this.colorRampTextures}}const Cl=na([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ll}=Cl;function Ol(t,e,r){const n=r.patternDependencies;let i=!1;for(const r of e){const e=r.paint.get(`${t}-pattern`);e.isConstant()||(i=!0);const s=e.constantOr(null);s&&(i=!0,n[s.to]=!0,n[s.from]=!0);}return i}function Rl(t,e,r,n,i){const{zoom:s}=n,a=i.patternDependencies;for(const n of e){const e=n.paint.get(`${t}-pattern`).value;if("constant"!==e.kind){let t=e.evaluate({zoom:s-1},r,{},i.availableImages),o=e.evaluate({zoom:s},r,{},i.availableImages),l=e.evaluate({zoom:s+1},r,{},i.availableImages);t=t&&t.name?t.name:t,o=o&&o.name?o.name:o,l=l&&l.name?l.name:l,a[t]=!0,a[o]=!0,a[l]=!0,r.patterns[n.id]={min:t,mid:o,max:l};}}return r}function Nl(t,e,r,n,i){let s;if(i===function(t,e,r,n){let i=0;for(let s=e,a=r-n;s<r;s+=n)i+=(t[a]-t[s])*(t[s+1]+t[a+1]),a=s;return i}(t,e,r,n)>0)for(let i=e;i<r;i+=n)s=lu(i/n|0,t[i],t[i+1],s);else for(let i=r-n;i>=e;i-=n)s=lu(i/n|0,t[i],t[i+1],s);return s&&ru(s,s.next)&&(uu(s),s=s.next),s}function $l(t,e){if(!t)return t;e||(e=t);let r,n=t;do{if(r=!1,n.steiner||!ru(n,n.next)&&0!==eu(n.prev,n,n.next))n=n.next;else {if(uu(n),n=e=n.prev,n===n.next)break;r=!0;}}while(r||n!==e);return e}function Ul(t,e,r,n,i,s,a){if(!t)return;!a&&s&&function(t,e,r,n){let i=t;do{0===i.z&&(i.z=Kl(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){let e,r=1;do{let n,i=t;t=null;let s=null;for(e=0;i;){e++;let a=i,o=0;for(let t=0;t<r&&(o++,a=a.nextZ,a);t++);let l=r;for(;o>0||l>0&&a;)0!==o&&(0===l||!a||i.z<=a.z)?(n=i,i=i.nextZ,o--):(n=a,a=a.nextZ,l--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;i=a;}s.nextZ=null,r*=2;}while(e>1)}(i);}(t,n,i,s);let o=t;for(;t.prev!==t.next;){const l=t.prev,u=t.next;if(s?jl(t,n,i,s):ql(t))e.push(l.i,t.i,u.i),uu(t),t=u.next,o=u.next;else if((t=u)===o){a?1===a?Ul(t=Gl($l(t),e),e,r,n,i,s,2):2===a&&Xl(t,e,r,n,i,s):Ul($l(t),e,r,n,i,s,1);break}}}function ql(t){const e=t.prev,r=t,n=t.next;if(eu(e,r,n)>=0)return !1;const i=e.x,s=r.x,a=n.x,o=e.y,l=r.y,u=n.y,c=Math.min(i,s,a),h=Math.min(o,l,u),p=Math.max(i,s,a),f=Math.max(o,l,u);let d=n.next;for(;d!==e;){if(d.x>=c&&d.x<=p&&d.y>=h&&d.y<=f&&Ql(i,o,s,l,a,u,d.x,d.y)&&eu(d.prev,d,d.next)>=0)return !1;d=d.next;}return !0}function jl(t,e,r,n){const i=t.prev,s=t,a=t.next;if(eu(i,s,a)>=0)return !1;const o=i.x,l=s.x,u=a.x,c=i.y,h=s.y,p=a.y,f=Math.min(o,l,u),d=Math.min(c,h,p),y=Math.max(o,l,u),m=Math.max(c,h,p),g=Kl(f,d,e,r,n),x=Kl(y,m,e,r,n);let v=t.prevZ,b=t.nextZ;for(;v&&v.z>=g&&b&&b.z<=x;){if(v.x>=f&&v.x<=y&&v.y>=d&&v.y<=m&&v!==i&&v!==a&&Ql(o,c,l,h,u,p,v.x,v.y)&&eu(v.prev,v,v.next)>=0)return !1;if(v=v.prevZ,b.x>=f&&b.x<=y&&b.y>=d&&b.y<=m&&b!==i&&b!==a&&Ql(o,c,l,h,u,p,b.x,b.y)&&eu(b.prev,b,b.next)>=0)return !1;b=b.nextZ;}for(;v&&v.z>=g;){if(v.x>=f&&v.x<=y&&v.y>=d&&v.y<=m&&v!==i&&v!==a&&Ql(o,c,l,h,u,p,v.x,v.y)&&eu(v.prev,v,v.next)>=0)return !1;v=v.prevZ;}for(;b&&b.z<=x;){if(b.x>=f&&b.x<=y&&b.y>=d&&b.y<=m&&b!==i&&b!==a&&Ql(o,c,l,h,u,p,b.x,b.y)&&eu(b.prev,b,b.next)>=0)return !1;b=b.nextZ;}return !0}function Gl(t,e){let r=t;do{const n=r.prev,i=r.next.next;!ru(n,i)&&nu(n,r,r.next,i)&&au(n,i)&&au(i,n)&&(e.push(n.i,r.i,i.i),uu(r),uu(r.next),r=t=i),r=r.next;}while(r!==t);return $l(r)}function Xl(t,e,r,n,i,s){let a=t;do{let t=a.next.next;for(;t!==a.prev;){if(a.i!==t.i&&tu(a,t)){let o=ou(a,t);return a=$l(a,a.next),o=$l(o,o.next),Ul(a,e,r,n,i,s,0),void Ul(o,e,r,n,i,s,0)}t=t.next;}a=a.next;}while(a!==t)}function Yl(t,e){let r=t.x-e.x;return 0===r&&(r=t.y-e.y,0===r)&&(r=(t.next.y-t.y)/(t.next.x-t.x)-(e.next.y-e.y)/(e.next.x-e.x)),r}function Zl(t,e){const r=function(t,e){let r=e;const n=t.x,i=t.y;let s,a=-1/0;if(ru(t,r))return r;do{if(ru(t,r.next))return r.next;if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){const t=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(t<=n&&t>a&&(a=t,s=r.x<r.next.x?r:r.next,t===n))return s}r=r.next;}while(r!==e);if(!s)return null;const o=s,l=s.x,u=s.y;let c=1/0;r=s;do{if(n>=r.x&&r.x>=l&&n!==r.x&&Jl(i<u?n:a,i,l,u,i<u?a:n,i,r.x,r.y)){const e=Math.abs(i-r.y)/(n-r.x);au(r,t)&&(e<c||e===c&&(r.x>s.x||r.x===s.x&&Hl(s,r)))&&(s=r,c=e);}r=r.next;}while(r!==o);return s}(t,e);if(!r)return e;const n=ou(r,t);return $l(n,n.next),$l(r,r.next)}function Hl(t,e){return eu(t.prev,t,e.prev)<0&&eu(e.next,t,t.next)<0}function Kl(t,e,r,n,i){return (t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Wl(t){let e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;}while(e!==t);return r}function Jl(t,e,r,n,i,s,a,o){return (i-a)*(e-o)>=(t-a)*(s-o)&&(t-a)*(n-o)>=(r-a)*(e-o)&&(r-a)*(s-o)>=(i-a)*(n-o)}function Ql(t,e,r,n,i,s,a,o){return !(t===a&&e===o)&&Jl(t,e,r,n,i,s,a,o)}function tu(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&nu(r,r.next,t,e))return !0;r=r.next;}while(r!==t);return !1}(t,e)&&(au(t,e)&&au(e,t)&&function(t,e){let r=t,n=!1;const i=(t.x+e.x)/2,s=(t.y+e.y)/2;do{r.y>s!=r.next.y>s&&r.next.y!==r.y&&i<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;}while(r!==t);return n}(t,e)&&(eu(t.prev,t,e.prev)||eu(t,e.prev,e))||ru(t,e)&&eu(t.prev,t,t.next)>0&&eu(e.prev,e,e.next)>0)}function eu(t,e,r){return (e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function ru(t,e){return t.x===e.x&&t.y===e.y}function nu(t,e,r,n){const i=su(eu(t,e,r)),s=su(eu(t,e,n)),a=su(eu(r,n,t)),o=su(eu(r,n,e));return i!==s&&a!==o||!(0!==i||!iu(t,r,e))||!(0!==s||!iu(t,n,e))||!(0!==a||!iu(r,t,n))||!(0!==o||!iu(r,e,n))}function iu(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function su(t){return t>0?1:t<0?-1:0}function au(t,e){return eu(t.prev,t,t.next)<0?eu(t,e,t.next)>=0&&eu(t,t.prev,e)>=0:eu(t,e,t.prev)<0||eu(t,t.next,e)<0}function ou(t,e){const r=cu(t.i,t.x,t.y),n=cu(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,s.next=n,n.prev=s,n}function lu(t,e,r,n){const i=cu(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function uu(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ);}function cu(t,e,r){return {i:t,x:e,y:r,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class hu{constructor(t,e){if(e>t)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=t,this._minGranularity=e;}getGranularityForZoomLevel(t){return Math.max(Math.floor(this._baseZoomGranularity/(1<<t)),this._minGranularity,1)}}class pu{constructor(t){this.fill=t.fill,this.line=t.line,this.tile=t.tile,this.stencil=t.stencil,this.circle=t.circle;}}pu.noSubdivision=new pu({fill:new hu(0,0),line:new hu(0,0),tile:new hu(0,0),stencil:new hu(0,0),circle:1}),ps("SubdivisionGranularityExpression",hu),ps("SubdivisionGranularitySetting",pu);const fu=-32768,du=32767;class yu{constructor(t,e){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=t,this._granularityCellSize=M/t,this._canonical=e;}_getKey(t,e){return (t+=32768)<<16|e+32768}_vertexToIndex(t,e){if(t<-32768||e<-32768||t>32767||e>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const r=0|Math.round(t),n=0|Math.round(e),i=this._getKey(r,n);if(this._vertexDictionary.has(i))return this._vertexDictionary.get(i);const s=this._vertexBuffer.length/2;return this._vertexDictionary.set(i,s),this._vertexBuffer.push(r,n),s}_subdivideTrianglesScanline(t){if(this._granularity<2)return function(t,e){const r=[];for(let n=0;n<e.length;n+=3){const i=e[n],s=e[n+1],a=e[n+2],o=t[2*i],l=t[2*i+1];(t[2*s]-o)*(t[2*a+1]-l)-(t[2*s+1]-l)*(t[2*a]-o)>0?(r.push(i),r.push(a),r.push(s)):(r.push(i),r.push(s),r.push(a));}return r}(this._vertexBuffer,t);const e=[],r=t.length;for(let n=0;n<r;n+=3){const r=[t[n+0],t[n+1],t[n+2]],i=[this._vertexBuffer[2*t[n+0]+0],this._vertexBuffer[2*t[n+0]+1],this._vertexBuffer[2*t[n+1]+0],this._vertexBuffer[2*t[n+1]+1],this._vertexBuffer[2*t[n+2]+0],this._vertexBuffer[2*t[n+2]+1]];let s=1/0,a=1/0,o=-1/0,l=-1/0;for(let t=0;t<3;t++){const e=i[2*t],r=i[2*t+1];s=Math.min(s,e),o=Math.max(o,e),a=Math.min(a,r),l=Math.max(l,r);}if(s===o||a===l)continue;const u=Math.floor(s/this._granularityCellSize),c=Math.ceil(o/this._granularityCellSize),h=Math.floor(a/this._granularityCellSize),p=Math.ceil(l/this._granularityCellSize);if(u!==c||h!==p)for(let t=h;t<p;t++){const n=this._scanlineGenerateVertexRingForCellRow(t,i,r);xu(this._vertexBuffer,n,e);}else e.push(...r);}return e}_scanlineGenerateVertexRingForCellRow(t,e,r){const n=t*this._granularityCellSize,i=n+this._granularityCellSize,s=[];for(let t=0;t<3;t++){const a=e[2*t],o=e[2*t+1],l=e[2*(t+1)%6],u=e[(2*(t+1)+1)%6],c=e[2*(t+2)%6],h=e[(2*(t+2)+1)%6],p=l-a,f=u-o,d=0===p,y=0===f,m=(n-o)/f,g=(i-o)/f,x=Math.min(m,g),v=Math.max(m,g);if(!y&&(x>=1||v<=0)||y&&(o<n||o>i)){u>=n&&u<=i&&s.push(r[(t+1)%3]);continue}!y&&x>0&&s.push(this._vertexToIndex(a+p*x,o+f*x));const b=a+p*Math.max(x,0),w=a+p*Math.min(v,1);d||this._generateIntraEdgeVertices(s,a,o,l,u,b,w),!y&&v<1&&s.push(this._vertexToIndex(a+p*v,o+f*v)),(y||u>=n&&u<=i)&&s.push(r[(t+1)%3]),!y&&(u<=n||u>=i)&&this._generateInterEdgeVertices(s,a,o,l,u,c,h,w,n,i);}return s}_generateIntraEdgeVertices(t,e,r,n,i,s,a){const o=n-e,l=i-r,u=0===l,c=u?Math.min(e,n):Math.min(s,a),h=u?Math.max(e,n):Math.max(s,a),p=Math.floor(c/this._granularityCellSize)+1,f=Math.ceil(h/this._granularityCellSize)-1;if(u?e<n:s<a)for(let n=p;n<=f;n++){const i=n*this._granularityCellSize;t.push(this._vertexToIndex(i,r+l*(i-e)/o));}else for(let n=f;n>=p;n--){const i=n*this._granularityCellSize;t.push(this._vertexToIndex(i,r+l*(i-e)/o));}}_generateInterEdgeVertices(t,e,r,n,i,s,a,o,l,u){const c=i-r,h=s-n,p=a-i,f=(l-i)/p,d=(u-i)/p,y=Math.min(f,d),m=Math.max(f,d),g=n+h*y;let x=Math.floor(Math.min(g,o)/this._granularityCellSize)+1,v=Math.ceil(Math.max(g,o)/this._granularityCellSize)-1,b=o<g;const w=0===p;if(w&&(a===l||a===u))return;if(w||y>=1||m<=0){const t=r-a,n=s+(e-s)*Math.min((l-a)/t,(u-a)/t);x=Math.floor(Math.min(n,o)/this._granularityCellSize)+1,v=Math.ceil(Math.max(n,o)/this._granularityCellSize)-1,b=o<n;}const _=c>0?u:l;if(b)for(let e=x;e<=v;e++)t.push(this._vertexToIndex(e*this._granularityCellSize,_));else for(let e=v;e>=x;e--)t.push(this._vertexToIndex(e*this._granularityCellSize,_));}_generateOutline(t){const e=[];for(const r of t){const t=gu(r,this._granularity,!0),n=this._pointArrayToIndices(t),i=[];for(let t=1;t<n.length;t++)i.push(n[t-1]),i.push(n[t]);e.push(i);}return e}_handlePoles(t){let e=!1,r=!1;this._canonical&&(0===this._canonical.y&&(e=!0),this._canonical.y===(1<<this._canonical.z)-1&&(r=!0)),(e||r)&&this._fillPoles(t,e,r);}_ensureNoPoleVertices(){const t=this._vertexBuffer;for(let e=0;e<t.length;e+=2){const r=t[e+1];r===fu&&(t[e+1]=-32767),r===du&&(t[e+1]=32766);}}_generatePoleQuad(t,e,r,n,i,s){n>i!=(s===fu)?(t.push(e),t.push(r),t.push(this._vertexToIndex(n,s)),t.push(r),t.push(this._vertexToIndex(i,s)),t.push(this._vertexToIndex(n,s))):(t.push(r),t.push(e),t.push(this._vertexToIndex(n,s)),t.push(this._vertexToIndex(i,s)),t.push(r),t.push(this._vertexToIndex(n,s)));}_fillPoles(t,e,r){const n=this._vertexBuffer,i=M,s=t.length;for(let a=2;a<s;a+=3){const s=t[a-2],o=t[a-1],l=t[a],u=n[2*s],c=n[2*s+1],h=n[2*o],p=n[2*o+1],f=n[2*l],d=n[2*l+1];e&&(0===c&&0===p&&this._generatePoleQuad(t,s,o,u,h,fu),0===p&&0===d&&this._generatePoleQuad(t,o,l,h,f,fu),0===d&&0===c&&this._generatePoleQuad(t,l,s,f,u,fu)),r&&(c===i&&p===i&&this._generatePoleQuad(t,s,o,u,h,du),p===i&&d===i&&this._generatePoleQuad(t,o,l,h,f,du),d===i&&c===i&&this._generatePoleQuad(t,l,s,f,u,du));}}_initializeVertices(t){for(let e=0;e<t.length;e+=2)this._vertexToIndex(t[e],t[e+1]);}subdividePolygonInternal(t,e){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:r,holeIndices:n}=function(t){const e=[],r=[];for(const n of t)if(0!==n.length){n!==t[0]&&e.push(r.length/2);for(let t=0;t<n.length;t++)r.push(n[t].x),r.push(n[t].y);}return {flattened:r,holeIndices:e}}(t);let i;this._initializeVertices(r);try{const t=function(t,e,r=2){const n=e&&e.length,i=n?e[0]*r:t.length;let s=Nl(t,0,i,r,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,u;if(n&&(s=function(t,e,r,n){const i=[];for(let r=0,s=e.length;r<s;r++){const a=Nl(t,e[r]*n,r<s-1?e[r+1]*n:t.length,n,!1);a===a.next&&(a.steiner=!0),i.push(Wl(a));}i.sort(Yl);for(let t=0;t<i.length;t++)r=Zl(i[t],r);return r}(t,e,s,r)),t.length>80*r){o=t[0],l=t[1];let e=o,n=l;for(let s=r;s<i;s+=r){const r=t[s],i=t[s+1];r<o&&(o=r),i<l&&(l=i),r>e&&(e=r),i>n&&(n=i);}u=Math.max(e-o,n-l),u=0!==u?32767/u:0;}return Ul(s,a,r,o,l,u,0),a}(r,n),e=this._convertIndices(r,t);i=this._subdivideTrianglesScanline(e);}catch(t){console.error(t);}let s=[];return e&&(s=this._generateOutline(t)),this._ensureNoPoleVertices(),this._handlePoles(i),{verticesFlattened:this._vertexBuffer,indicesTriangles:i,indicesLineList:s}}_convertIndices(t,e){const r=[];for(let n=0;n<e.length;n++)r.push(this._vertexToIndex(t[2*e[n]],t[2*e[n]+1]));return r}_pointArrayToIndices(t){const e=[];for(let r=0;r<t.length;r++){const n=t[r];e.push(this._vertexToIndex(n.x,n.y));}return e}}function mu(t,e,r,n=!0){return new yu(r,e).subdividePolygonInternal(t,n)}function gu(t,e,n=!1){if(!t||t.length<1)return [];if(t.length<2)return [];const i=t[0],s=t[t.length-1],a=n&&(i.x!==s.x||i.y!==s.y);if(e<2)return a?[...t,t[0]]:[...t];const o=Math.floor(M/e),l=[];l.push(new r(t[0].x,t[0].y));const u=t.length,c=a?u:u-1;for(let e=0;e<c;e++){const n=t[e],i=e<u-1?t[e+1]:t[0],s=n.x,a=n.y,c=i.x,h=i.y,p=s!==c,f=a!==h;if(!p&&!f)continue;const d=c-s,y=h-a,m=Math.abs(d),g=Math.abs(y);let x=s,v=a;for(;;){const t=d>0?(Math.floor(x/o)+1)*o:(Math.ceil(x/o)-1)*o,e=y>0?(Math.floor(v/o)+1)*o:(Math.ceil(v/o)-1)*o,n=Math.abs(x-t),i=Math.abs(v-e),s=Math.abs(x-c),a=Math.abs(v-h),u=p?n/m:Number.POSITIVE_INFINITY,b=f?i/g:Number.POSITIVE_INFINITY;if((s<=n||!p)&&(a<=i||!f))break;if(u<b&&p||!f){x=t,v+=y*u;const e=new r(x,Math.round(v));l[l.length-1].x===e.x&&l[l.length-1].y===e.y||l.push(e);}else {x+=d*b,v=e;const t=new r(Math.round(x),v);l[l.length-1].x===t.x&&l[l.length-1].y===t.y||l.push(t);}}const b=new r(c,h);l[l.length-1].x===b.x&&l[l.length-1].y===b.y||l.push(b);}return l}function xu(t,e,r){if(0===e.length)throw new Error("Subdivision vertex ring is empty.");let n=0,i=t[2*e[0]];for(let r=1;r<e.length;r++){const s=t[2*e[r]];s<i&&(i=s,n=r);}const s=e.length;let a=n,o=(a+1)%s;for(;;){const n=a-1>=0?a-1:s-1,i=(o+1)%s,l=t[2*e[n]],u=t[2*e[i]],c=t[2*e[a]],h=t[2*e[a]+1],p=t[2*e[o]+1];let f=!1;if(l<u)f=!0;else if(l>u)f=!1;else {const r=p-h,s=-(t[2*e[o]]-c),a=h<p?1:-1;((l-c)*r+(t[2*e[n]+1]-h)*s)*a>((u-c)*r+(t[2*e[i]+1]-h)*s)*a&&(f=!0);}if(f){const t=e[n],i=e[a],l=e[o];t!==i&&t!==l&&i!==l&&r.push(l,i,t),a--,a<0&&(a=s-1);}else {const t=e[i],n=e[a],l=e[o];t!==n&&t!==l&&n!==l&&r.push(l,n,t),o++,o>=s&&(o=0);}if(n===i)break}}function vu(t,e,r,n,i,s,a,o,l){const u=i.length/2,c=a&&o&&l;if(u<io.MAX_VERTEX_ARRAY_LENGTH){const h=e.prepareSegment(u,r,n),p=h.vertexLength;for(let t=0;t<s.length;t+=3)n.emplaceBack(p+s[t],p+s[t+1],p+s[t+2]);let f,d;h.vertexLength+=u,h.primitiveLength+=s.length/3,c&&(d=a.prepareSegment(u,r,o),f=d.vertexLength,d.vertexLength+=u);for(let e=0;e<i.length;e+=2)t(i[e],i[e+1]);if(c)for(let t=0;t<l.length;t++){const e=l[t];for(let t=1;t<e.length;t+=2)o.emplaceBack(f+e[t-1],f+e[t]);d.primitiveLength+=e.length/2;}}else !function(t,e,r,n,i,s){const a=[];for(let t=0;t<n.length/2;t++)a.push(-1);const o={count:0};let l=0,u=t.getOrCreateLatestSegment(e,r),c=u.vertexLength;for(let h=2;h<i.length;h+=3){const p=i[h-2],f=i[h-1],d=i[h];let y=a[p]<l,m=a[f]<l,g=a[d]<l;u.vertexLength+((y?1:0)+(m?1:0)+(g?1:0))>io.MAX_VERTEX_ARRAY_LENGTH&&(u=t.createNewSegment(e,r),l=o.count,y=!0,m=!0,g=!0,c=0);const x=bu(a,n,s,o,p,y,u),v=bu(a,n,s,o,f,m,u),b=bu(a,n,s,o,d,g,u);r.emplaceBack(c+x-l,c+v-l,c+b-l),u.primitiveLength++;}}(e,r,n,i,s,t),c&&function(t,e,r,n,i,s){const a=[];for(let t=0;t<n.length/2;t++)a.push(-1);const o={count:0};let l=0,u=t.getOrCreateLatestSegment(e,r),c=u.vertexLength;for(let h=0;h<i.length;h++){const p=i[h];for(let f=1;f<i[h].length;f+=2){const i=p[f-1],h=p[f];let d=a[i]<l,y=a[h]<l;u.vertexLength+((d?1:0)+(y?1:0))>io.MAX_VERTEX_ARRAY_LENGTH&&(u=t.createNewSegment(e,r),l=o.count,d=!0,y=!0,c=0);const m=bu(a,n,s,o,i,d,u),g=bu(a,n,s,o,h,y,u);r.emplaceBack(c+m-l,c+g-l),u.primitiveLength++;}}}(a,r,o,i,l,t),e.forceNewSegmentOnNextPrepare(),null==a||a.forceNewSegmentOnNextPrepare();}function bu(t,e,r,n,i,s,a){if(s){const s=n.count;return r(e[2*i],e[2*i+1]),t[i]=n.count,n.count++,a.vertexLength++,s}return t[i]}class wu{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new qa,this.indexArray=new to,this.indexArray2=new eo,this.programConfigurations=new Vo(t.layers,t.zoom),this.segments=new io,this.segments2=new io,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id));}populate(t,e,r){this.hasDependencies=Ol("fill",this.layers,e);const n=this.layers[0].layout.get("fill-sort-key"),i=!n.isConstant(),s=[];for(const{feature:a,id:o,index:l,sourceLayerIndex:u}of t){const t=this.layers[0]._featureFilter.needGeometry,c=$o(a,t);if(!this.layers[0]._featureFilter.filter(new Ps(this.zoom),c,r))continue;const h=i?n.evaluate(c,{},r,e.availableImages):void 0,p={id:o,properties:a.properties,type:a.type,sourceLayerIndex:u,index:l,geometry:t?c.geometry:No(a),patterns:{},sortKey:h};s.push(p);}i&&s.sort(((t,e)=>t.sortKey-e.sortKey));for(const n of s){const{geometry:i,index:s,sourceLayerIndex:a}=n;if(this.hasDependencies){const t=Rl("fill",this.layers,n,{zoom:this.zoom},e);this.patternFeatures.push(t);}else this.addFeature(n,i,s,r,{},e.subdivisionGranularity);e.featureIndex.insert(t[s].feature,i,s,a,this.index);}}update(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,{imagePositions:r});}addFeatures(t,e,r){for(const n of this.patternFeatures)this.addFeature(n,n.geometry,n.index,e,r,t.subdivisionGranularity);}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return !this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ll),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0;}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy());}addFeature(t,e,r,n,i,s){for(const t of tn(e,500)){const e=mu(t,n,s.fill.getGranularityForZoomLevel(n.z)),r=this.layoutVertexArray;vu(((t,e)=>{r.emplaceBack(t,e);}),this.segments,this.layoutVertexArray,this.indexArray,e.verticesFlattened,e.indicesTriangles,this.segments2,this.indexArray2,e.indicesLineList);}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,{imagePositions:i,canonical:n});}}let _u,Su;ps("FillBucket",wu,{omit:["layers","patternFeatures"]});var Au={get paint(){return Su=Su||new Hs({"fill-antialias":new js(vt.paint_fill["fill-antialias"]),"fill-opacity":new Gs(vt.paint_fill["fill-opacity"]),"fill-color":new Gs(vt.paint_fill["fill-color"]),"fill-outline-color":new Gs(vt.paint_fill["fill-outline-color"]),"fill-translate":new js(vt.paint_fill["fill-translate"]),"fill-translate-anchor":new js(vt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Xs(vt.paint_fill["fill-pattern"])})},get layout(){return _u=_u||new Hs({"fill-sort-key":new Gs(vt.layout_fill["fill-sort-key"])})}};class ku extends Ks{constructor(t,e){super(t,Au,e);}recalculate(t,e){super.recalculate(t,e);const r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"]);}createBucket(t){return new wu(t)}queryRadius(){return nl(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:t,geometry:e,transform:r,pixelsToTileUnits:n}){return Yo(il(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-r.bearingInRadians,n),e)}isTileClipped(){return !0}}const Eu=na([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Tu=na([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Iu}=Eu;class Mu{constructor(t,e,r,n,i){this.properties={},this.extent=r,this.type=0,this.id=void 0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=i,t.readFields(Fu,this,e);}loadGeometry(){const t=this._pbf;t.pos=this._geometry;const e=t.readVarint()+t.pos,n=[];let i,s=1,a=0,o=0,l=0;for(;t.pos<e;){if(a<=0){const e=t.readVarint();s=7&e,a=e>>3;}if(a--,1===s||2===s)o+=t.readSVarint(),l+=t.readSVarint(),1===s&&(i&&n.push(i),i=[]),i&&i.push(new r(o,l));else {if(7!==s)throw new Error(`unknown command ${s}`);i&&i.push(i[0].clone());}}return i&&n.push(i),n}bbox(){const t=this._pbf;t.pos=this._geometry;const e=t.readVarint()+t.pos;let r=1,n=0,i=0,s=0,a=1/0,o=-1/0,l=1/0,u=-1/0;for(;t.pos<e;){if(n<=0){const e=t.readVarint();r=7&e,n=e>>3;}if(n--,1===r||2===r)i+=t.readSVarint(),s+=t.readSVarint(),i<a&&(a=i),i>o&&(o=i),s<l&&(l=s),s>u&&(u=s);else if(7!==r)throw new Error(`unknown command ${r}`)}return [a,l,o,u]}toGeoJSON(t,e,r){const n=this.extent*Math.pow(2,r),i=this.extent*t,s=this.extent*e,a=this.loadGeometry();function o(t){return [360*(t.x+i)/n-180,360/Math.PI*Math.atan(Math.exp((1-2*(t.y+s)/n)*Math.PI))-90]}function l(t){return t.map(o)}let u;if(1===this.type){const t=[];for(const e of a)t.push(e[0]);const e=l(t);u=1===t.length?{type:"Point",coordinates:e[0]}:{type:"MultiPoint",coordinates:e};}else if(2===this.type){const t=a.map(l);u=1===t.length?{type:"LineString",coordinates:t[0]}:{type:"MultiLineString",coordinates:t};}else {if(3!==this.type)throw new Error("unknown feature type");{const t=Du(a),e=[];for(const r of t)e.push(r.map(l));u=1===e.length?{type:"Polygon",coordinates:e[0]}:{type:"MultiPolygon",coordinates:e};}}const c={type:"Feature",geometry:u,properties:this.properties};return null!=this.id&&(c.id=this.id),c}}function Fu(t,e,r){1===t?e.id=r.readVarint():2===t?function(t,e){const r=t.readVarint()+t.pos;for(;t.pos<r;){const r=e._keys[t.readVarint()],n=e._values[t.readVarint()];e.properties[r]=n;}}(r,e):3===t?e.type=r.readVarint():4===t&&(e._geometry=r.pos);}function Du(t){const e=t.length;if(e<=1)return [t];const r=[];let n,i;for(let s=0;s<e;s++){const e=zu(t[s]);0!==e&&(void 0===i&&(i=e<0),i===e<0?(n&&r.push(n),n=[t[s]]):n&&n.push(t[s]));}return n&&r.push(n),r}function zu(t){let e=0;for(let r,n,i=0,s=t.length,a=s-1;i<s;a=i++)r=t[i],n=t[a],e+=(n.x-r.x)*(r.y+n.y);return e}Mu.types=["Unknown","Point","LineString","Polygon"];class Pu{constructor(t,e){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Bu,this,e),this.length=this._features.length;}feature(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];const e=this._pbf.readVarint()+this._pbf.pos;return new Mu(this._pbf,e,this.extent,this._keys,this._values)}}function Bu(t,e,r){15===t?e.version=r.readVarint():1===t?e.name=r.readString():5===t?e.extent=r.readVarint():2===t?e._features.push(r.pos):3===t?e._keys.push(r.readString()):4===t&&e._values.push(function(t){let e=null;const r=t.readVarint()+t.pos;for(;t.pos<r;){const r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null;}if(null==e)throw new Error("unknown feature value");return e}(r));}class Vu{constructor(t,e){this.layers=t.readFields(Cu,{},e);}}function Cu(t,e,r){if(3===t){const t=new Pu(r,r.readVarint()+r.pos);t.length&&(e[t.name]=t);}}const Lu=Math.pow(2,13);function Ou(t,e,r,n,i,s,a,o){t.emplaceBack(e,r,2*Math.floor(n*Lu)+a,i*Lu*2,s*Lu*2,Math.round(o));}class Ru{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasDependencies=!1,this.layoutVertexArray=new ja,this.centroidVertexArray=new $a,this.indexArray=new to,this.programConfigurations=new Vo(t.layers,t.zoom),this.segments=new io,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id));}populate(t,e,r){this.features=[],this.hasDependencies=Ol("fill-extrusion",this.layers,e);for(const{feature:n,id:i,index:s,sourceLayerIndex:a}of t){const t=this.layers[0]._featureFilter.needGeometry,o=$o(n,t);if(!this.layers[0]._featureFilter.filter(new Ps(this.zoom),o,r))continue;const l={id:i,sourceLayerIndex:a,index:s,geometry:t?o.geometry:No(n),properties:n.properties,type:n.type,patterns:{}};this.hasDependencies?this.features.push(Rl("fill-extrusion",this.layers,l,{zoom:this.zoom},e)):this.addFeature(l,l.geometry,s,r,{},e.subdivisionGranularity),e.featureIndex.insert(n,l.geometry,s,a,this.index,!0);}}addFeatures(t,e,r){for(const n of this.features){const{geometry:i}=n;this.addFeature(n,i,n.index,e,r,t.subdivisionGranularity);}}update(t,e,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,{imagePositions:r});}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return !this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Iu),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,Tu.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0;}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy());}addFeature(t,e,r,n,i,s){for(const r of tn(e,500)){const e={x:0,y:0,sampleCount:0},i=this.layoutVertexArray.length;this.processPolygon(e,n,t,r,s);const a=this.layoutVertexArray.length-i,o=Math.floor(e.x/e.sampleCount),l=Math.floor(e.y/e.sampleCount);for(let t=0;t<a;t++)this.centroidVertexArray.emplaceBack(o,l);}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,{imagePositions:i,canonical:n});}processPolygon(t,e,r,n,i){if(n.length<1)return;if(Uu(n[0]))return;for(const e of n)0!==e.length&&Nu(t,e);const s={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},a=i.fill.getGranularityForZoomLevel(e.z),o="Polygon"===Mu.types[r.type];for(const t of n){if(0===t.length)continue;if(Uu(t))continue;const e=gu(t,a,o);this._generateSideFaces(e,s);}if(!o)return;const l=mu(n,e,a,!1),u=this.layoutVertexArray;vu(((t,e)=>{Ou(u,t,e,0,0,1,1,0);}),this.segments,this.layoutVertexArray,this.indexArray,l.verticesFlattened,l.indicesTriangles);}_generateSideFaces(t,e){let r=0;for(let n=1;n<t.length;n++){const i=t[n],s=t[n-1];if($u(i,s))continue;e.segment.vertexLength+4>io.MAX_VERTEX_ARRAY_LENGTH&&(e.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const a=i.sub(s)._perp()._unit(),o=s.dist(i);r+o>32768&&(r=0),Ou(this.layoutVertexArray,i.x,i.y,a.x,a.y,0,0,r),Ou(this.layoutVertexArray,i.x,i.y,a.x,a.y,0,1,r),r+=o,Ou(this.layoutVertexArray,s.x,s.y,a.x,a.y,0,0,r),Ou(this.layoutVertexArray,s.x,s.y,a.x,a.y,0,1,r);const l=e.segment.vertexLength;this.indexArray.emplaceBack(l,l+2,l+1),this.indexArray.emplaceBack(l+1,l+2,l+3),e.segment.vertexLength+=4,e.segment.primitiveLength+=2;}}}function Nu(t,e){for(let r=0;r<e.length;r++){const n=e[r];r===e.length-1&&e[0].x===n.x&&e[0].y===n.y||(t.x+=n.x,t.y+=n.y,t.sampleCount++);}}function $u(t,e){return t.x===e.x&&(t.x<0||t.x>M)||t.y===e.y&&(t.y<0||t.y>M)}function Uu(t){return t.every((t=>t.x<0))||t.every((t=>t.x>M))||t.every((t=>t.y<0))||t.every((t=>t.y>M))}let qu;ps("FillExtrusionBucket",Ru,{omit:["layers","features"]});var ju={get paint(){return qu=qu||new Hs({"fill-extrusion-opacity":new js(vt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Gs(vt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new js(vt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new js(vt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Xs(vt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Gs(vt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Gs(vt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new js(vt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Gu extends Ks{constructor(t,e){super(t,ju,e);}createBucket(t){return new Ru(t)}queryRadius(){return nl(this.paint.get("fill-extrusion-translate"))}is3D(){return !0}queryIntersectsFeature({queryGeometry:t,feature:e,featureState:n,geometry:i,transform:s,pixelsToTileUnits:a,pixelPosMatrix:o}){const l=il(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-s.bearingInRadians,a),u=this.paint.get("fill-extrusion-height").evaluate(e,n),c=this.paint.get("fill-extrusion-base").evaluate(e,n),h=function(t,e){const n=[];for(const i of t){const t=[i.x,i.y,0,1];A(t,t,e),n.push(new r(t[0]/t[3],t[1]/t[3]));}return n}(l,o),p=function(t,e,n,i){const s=[],a=[],o=i[8]*e,l=i[9]*e,u=i[10]*e,c=i[11]*e,h=i[8]*n,p=i[9]*n,f=i[10]*n,d=i[11]*n;for(const e of t){const t=[],n=[];for(const s of e){const e=s.x,a=s.y,y=i[0]*e+i[4]*a+i[12],m=i[1]*e+i[5]*a+i[13],g=i[2]*e+i[6]*a+i[14],x=i[3]*e+i[7]*a+i[15],v=g+u,b=x+c,w=y+h,_=m+p,S=g+f,A=x+d,k=new r((y+o)/b,(m+l)/b);k.z=v/b,t.push(k);const E=new r(w/A,_/A);E.z=S/A,n.push(E);}s.push(t),a.push(n);}return [s,a]}(i,c,u,o);return function(t,e,r){let n=1/0;Yo(r,e)&&(n=Yu(r,e[0]));for(let i=0;i<e.length;i++){const s=e[i],a=t[i];for(let t=0;t<s.length-1;t++){const e=s[t],i=[e,s[t+1],a[t+1],a[t],e];Go(r,i)&&(n=Math.min(n,Yu(r,i)));}}return n!==1/0&&n}(p[0],p[1],h)}}function Xu(t,e){return t.x*e.x+t.y*e.y}function Yu(t,e){if(1===t.length){let r=0;const n=e[r++];let i;for(;!i||n.equals(i);)if(i=e[r++],!i)return 1/0;for(;r<e.length;r++){const s=e[r],a=t[0],o=i.sub(n),l=s.sub(n),u=a.sub(n),c=Xu(o,o),h=Xu(o,l),p=Xu(l,l),f=Xu(u,o),d=Xu(u,l),y=c*p-h*h,m=(p*f-h*d)/y,g=(c*d-h*f)/y,x=n.z*(1-m-g)+i.z*m+s.z*g;if(isFinite(x))return x}return 1/0}{let t=1/0;for(const r of e)t=Math.min(t,r.z);return t}}const Zu=na([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Hu}=Zu,Ku=na([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Wu}=Ku,Ju=Math.cos(Math.PI/180*37.5),Qu=Math.pow(2,14)/.5;class tc{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((t=>{this.gradients[t.id]={};})),this.layoutVertexArray=new Ga,this.layoutVertexArray2=new Xa,this.indexArray=new to,this.programConfigurations=new Vo(t.layers,t.zoom),this.segments=new io,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id));}populate(t,e,r){this.hasDependencies=Ol("line",this.layers,e)||this.hasLineDasharray(this.layers);const n=this.layers[0].layout.get("line-sort-key"),i=!n.isConstant(),s=[];for(const{feature:e,id:a,index:o,sourceLayerIndex:l}of t){const t=this.layers[0]._featureFilter.needGeometry,u=$o(e,t);if(!this.layers[0]._featureFilter.filter(new Ps(this.zoom),u,r))continue;const c=i?n.evaluate(u,{},r):void 0,h={id:a,properties:e.properties,type:e.type,sourceLayerIndex:l,index:o,geometry:t?u.geometry:No(e),patterns:{},dashes:{},sortKey:c};s.push(h);}i&&s.sort(((t,e)=>t.sortKey-e.sortKey));for(const n of s){const{geometry:i,index:s,sourceLayerIndex:a}=n;this.hasDependencies?(Ol("line",this.layers,e)?Rl("line",this.layers,n,{zoom:this.zoom},e):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,n,this.zoom,e),this.patternFeatures.push(n)):this.addFeature(n,i,s,r,{},{},e.subdivisionGranularity),e.featureIndex.insert(t[s].feature,i,s,a,this.index);}}update(t,e,r,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,{imagePositions:r,dashPositions:n});}addFeatures(t,e,r,n){for(const i of this.patternFeatures)this.addFeature(i,i.geometry,i.index,e,r,n,t.subdivisionGranularity);}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return !this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,Wu)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Hu),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0;}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy());}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return {start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,e,r,n,i,s,a){const o=this.layers[0].layout,l=o.get("line-join").evaluate(t,{}),u=o.get("line-cap"),c=o.get("line-miter-limit"),h=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const r of e)this.addLine(r,t,l,u,c,h,n,a);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,r,{imagePositions:i,dashPositions:s,canonical:n});}addLine(t,e,r,n,i,s,a,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,t=gu(t,a?o.line.getGranularityForZoomLevel(a.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let e=0;e<t.length-1;e++)this.totalDistance+=t[e].dist(t[e+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance);}const l="Polygon"===Mu.types[e.type];let u=t.length;for(;u>=2&&t[u-1].equals(t[u-2]);)u--;let c=0;for(;c<u-1&&t[c].equals(t[c+1]);)c++;if(u<(l?3:2))return;"bevel"===r&&(i=1.05);const h=this.overscaling<=16?122880/(512*this.overscaling):0,p=this.segments.prepareSegment(10*u,this.layoutVertexArray,this.indexArray);let f,d,y,m,g;this.e1=this.e2=-1,l&&(f=t[u-2],g=t[c].sub(f)._unit()._perp());for(let e=c;e<u;e++){if(y=e===u-1?l?t[c+1]:void 0:t[e+1],y&&t[e].equals(y))continue;g&&(m=g),f&&(d=f),f=t[e],g=y?y.sub(f)._unit()._perp():m,m=m||g;let a=m.add(g);0===a.x&&0===a.y||a._unit();const o=m.x*g.x+m.y*g.y,x=a.x*g.x+a.y*g.y,v=0!==x?1/x:1/0,b=2*Math.sqrt(2-2*x),w=x<Ju&&d&&y,_=m.x*g.y-m.y*g.x>0;if(w&&e>c){const t=f.dist(d);if(t>2*h){const e=f.sub(f.sub(d)._mult(h/t)._round());this.updateDistance(d,e),this.addCurrentVertex(e,m,0,0,p),d=e;}}const S=d&&y;let A=S?r:l?"butt":n;if(S&&"round"===A&&(v<s?A="miter":v<=2&&(A="fakeround")),"miter"===A&&v>i&&(A="bevel"),"bevel"===A&&(v>2&&(A="flipbevel"),v<i&&(A="miter")),d&&this.updateDistance(d,f),"miter"===A)a._mult(v),this.addCurrentVertex(f,a,0,0,p);else if("flipbevel"===A){if(v>100)a=g.mult(-1);else {const t=v*m.add(g).mag()/m.sub(g).mag();a._perp()._mult(t*(_?-1:1));}this.addCurrentVertex(f,a,0,0,p),this.addCurrentVertex(f,a.mult(-1),0,0,p);}else if("bevel"===A||"fakeround"===A){const t=-Math.sqrt(v*v-1),e=_?t:0,r=_?0:t;if(d&&this.addCurrentVertex(f,m,e,r,p),"fakeround"===A){const t=Math.round(180*b/Math.PI/20);for(let e=1;e<t;e++){let r=e/t;if(.5!==r){const t=r-.5;r+=r*t*(r-1)*((1.0904+o*(o*(3.55645-1.43519*o)-3.2452))*t*t+(.848013+o*(.215638*o-1.06021)));}const n=g.sub(m)._mult(r)._add(m)._unit()._mult(_?-1:1);this.addHalfVertex(f,n.x,n.y,!1,_,0,p);}}y&&this.addCurrentVertex(f,g,-e,-r,p);}else if("butt"===A)this.addCurrentVertex(f,a,0,0,p);else if("square"===A){const t=d?1:-1;this.addCurrentVertex(f,a,t,t,p);}else "round"===A&&(d&&(this.addCurrentVertex(f,m,0,0,p),this.addCurrentVertex(f,m,1,1,p,!0)),y&&(this.addCurrentVertex(f,g,-1,-1,p,!0),this.addCurrentVertex(f,g,0,0,p)));if(w&&e<u-1){const t=f.dist(y);if(t>2*h){const e=f.add(y.sub(f)._mult(h/t)._round());this.updateDistance(f,e),this.addCurrentVertex(e,g,0,0,p),f=e;}}}}addCurrentVertex(t,e,r,n,i,s=!1){const a=e.y*n-e.x,o=-e.y-e.x*n;this.addHalfVertex(t,e.x+e.y*r,e.y-e.x*r,s,!1,r,i),this.addHalfVertex(t,a,o,s,!0,-n,i),this.distance>Qu/2&&0===this.totalDistance&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(t,e,r,n,i,s));}addHalfVertex({x:t,y:e},r,n,i,s,a,o){const l=.5*(this.lineClips?this.scaledDistance*(Qu-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(i?1:0),(e<<1)+(s?1:0),Math.round(63*r)+128,Math.round(63*n)+128,1+(0===a?0:a<0?-1:1)|(63&l)<<2,l>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const u=o.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,u,this.e2),o.primitiveLength++),s?this.e2=u:this.e1=u;}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance;}updateDistance(t,e){this.distance+=t.dist(e),this.updateScaledDistance();}hasLineDasharray(t){for(const e of t){const t=e.paint.get("line-dasharray");if(t&&!t.isConstant())return !0}return !1}addLineDashDependencies(t,e,r,n){for(const i of t){const t=i.paint.get("line-dasharray");if(!t||"constant"===t.value.kind)continue;const s="round"===i.layout.get("line-cap"),a={dasharray:t.value.evaluate({zoom:r-1},e,{}),round:s},o={dasharray:t.value.evaluate({zoom:r},e,{}),round:s},l={dasharray:t.value.evaluate({zoom:r+1},e,{}),round:s},u=`${a.dasharray.join(",")},${a.round}`,c=`${o.dasharray.join(",")},${o.round}`,h=`${l.dasharray.join(",")},${l.round}`;n.dashDependencies[u]=a,n.dashDependencies[c]=o,n.dashDependencies[h]=l,e.dashes[i.id]={min:u,mid:c,max:h};}}}let ec,rc;ps("LineBucket",tc,{omit:["layers","patternFeatures"]});var nc={get paint(){return rc=rc||new Hs({"line-opacity":new Gs(vt.paint_line["line-opacity"]),"line-color":new Gs(vt.paint_line["line-color"]),"line-translate":new js(vt.paint_line["line-translate"]),"line-translate-anchor":new js(vt.paint_line["line-translate-anchor"]),"line-width":new Gs(vt.paint_line["line-width"]),"line-gap-width":new Gs(vt.paint_line["line-gap-width"]),"line-offset":new Gs(vt.paint_line["line-offset"]),"line-blur":new Gs(vt.paint_line["line-blur"]),"line-dasharray":new Xs(vt.paint_line["line-dasharray"]),"line-pattern":new Xs(vt.paint_line["line-pattern"]),"line-gradient":new Zs(vt.paint_line["line-gradient"])})},get layout(){return ec=ec||new Hs({"line-cap":new js(vt.layout_line["line-cap"]),"line-join":new Gs(vt.layout_line["line-join"]),"line-miter-limit":new js(vt.layout_line["line-miter-limit"]),"line-round-limit":new js(vt.layout_line["line-round-limit"]),"line-sort-key":new Gs(vt.layout_line["line-sort-key"])})}};class ic extends Gs{possiblyEvaluate(t,e){return e=new Ps(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),super.possiblyEvaluate(t,e)}evaluate(t,e,r,n){return e=O({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(t,e,r,n)}}let sc;class ac extends Ks{constructor(t,e){super(t,nc,e),this.gradientVersion=0,sc||(sc=new ic(nc.paint.properties["line-width"].specification),sc.useIntegerZoom=!0);}_handleSpecialPaintPropertyUpdate(t){if("line-gradient"===t){const t=this.gradientExpression();this.stepInterpolant=!!function(t){return void 0!==t._styleExpression}(t)&&t._styleExpression.expression instanceof or,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER;}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,e){super.recalculate(t,e),this.paint._values["line-floorwidth"]=sc.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t);}createBucket(t){return new tc(t)}queryRadius(t){const e=t,r=oc(rl("line-width",this,e),rl("line-gap-width",this,e)),n=rl("line-offset",this,e);return r/2+Math.abs(n)+nl(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:t,feature:e,featureState:n,geometry:i,transform:s,pixelsToTileUnits:a}){const o=il(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-s.bearingInRadians,a),l=a/2*oc(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),u=this.paint.get("line-offset").evaluate(e,n);return u&&(i=function(t,e){const n=[];for(let i=0;i<t.length;i++){const s=sl(t[i]),a=[];for(let t=0;t<s.length;t++){const n=s[t],i=s[t-1],o=s[t+1],l=0===t?new r(0,0):n.sub(i)._unit()._perp(),u=t===s.length-1?new r(0,0):o.sub(n)._unit()._perp(),c=l._add(u)._unit(),h=c.x*u.x+c.y*u.y;0!==h&&c._mult(1/h),a.push(c._mult(e)._add(n));}n.push(a);}return n}(i,u*a)),function(t,e,r){for(let n=0;n<e.length;n++){const i=e[n];if(t.length>=3)for(let e=0;e<i.length;e++)if(tl(t,i[e]))return !0;if(Zo(t,i,r))return !0}return !1}(o,i,l)}isTileClipped(){return !0}}function oc(t,e){return e>0?e+2*t:t}const lc=na([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),uc=na([{name:"a_projected_pos",components:3,type:"Float32"}],4);na([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const cc=na([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);na([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const hc=na([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),pc=na([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function fc(t,e,r){return t.sections.forEach((t=>{t.text=function(t,e,r){const n=e.layout.get("text-transform").evaluate(r,{});return "uppercase"===n?t=t.toLocaleUpperCase():"lowercase"===n&&(t=t.toLocaleLowerCase()),zs.applyArabicShaping&&(t=zs.applyArabicShaping(t)),t}(t.text,e,r);})),t}na([{name:"triangle",components:3,type:"Uint16"}]),na([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),na([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),na([{type:"Float32",name:"offsetX"}]),na([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),na([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);var dc=24;const yc={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},mc={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},gc={40:!0};function xc(t,e,r,n,i,s){if("fontStack"in e){const n=r[e.fontStack],s=n&&n[t];return s?s.metrics.advance*e.scale+i:0}{const t=n[e.imageName];return t?t.displaySize[0]*e.scale*dc/s+i:0}}function vc(t,e,r,n){const i=Math.pow(t-e,2);return n?t<e?i/2:2*i:i+Math.abs(r)*r}function bc(t,e,r){let n=0;return 10===t&&(n-=1e4),r&&(n+=150),40!==t&&65288!==t||(n+=50),41!==e&&65289!==e||(n+=50),n}function wc(t,e,r,n,i,s){let a=null,o=vc(e,r,i,s);for(const t of n){const n=vc(e-t.x,r,i,s)+t.badness;n<=o&&(a=t,o=n);}return {index:t,x:e,priorBreak:a,badness:o}}function _c(t){return t?_c(t.priorBreak).concat(t.index):[]}class Sc{constructor(t="",e=[],r=[]){this.text=t,this.sections=e,this.sectionIndex=r,this.imageSectionID=null;}static fromFeature(t,e){const r=new Sc;for(let n=0;n<t.sections.length;n++){const i=t.sections[n];i.image?r.addImageSection(i):r.addTextSection(i,e);}return r}length(){return [...this.text].length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}verticalizePunctuation(){this.text=function(t){let e="",r={premature:!0,value:void 0};const n=t[Symbol.iterator]();let i=n.next();const s=t[Symbol.iterator]();s.next();let a=s.next();for(;!i.done;)e+=!a.done&&Ts(a.value.codePointAt(0))&&!yc[a.value]||!r.premature&&Ts(r.value.codePointAt(0))&&!yc[r.value]||!yc[i.value]?i.value:yc[i.value],r={value:i.value,premature:!1},i=n.next(),a=s.next();return e}(this.text);}hasZeroWidthSpaces(){return this.text.includes("")}trim(){const t=this.text.match(/^\s*/),e=t?t[0].length:0,r=this.text.match(/\S\s*$/),n=r?r[0].length-1:0;this.text=this.text.substring(e,this.text.length-n),this.sectionIndex=this.sectionIndex.slice(e,this.sectionIndex.length-n);}substring(t,e){const r=[...this.text].slice(t,e).join(""),n=this.sectionIndex.slice(t,e);return new Sc(r,this.sections,n)}toCodeUnitIndex(t){return [...this.text].slice(0,t).join("").length}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((t,e)=>Math.max(t,this.sections[e].scale)),0)}getMaxImageSize(t){let e=0,r=0;for(let n=0;n<this.length();n++){const i=this.getSection(n);if("imageName"in i){const n=t[i.imageName];if(!n)continue;const s=n.displaySize;e=Math.max(e,s[0]),r=Math.max(r,s[1]);}}return {maxImageWidth:e,maxImageHeight:r}}addTextSection(t,e){this.text+=t.text,this.sections.push({scale:t.scale||1,verticalAlign:t.verticalAlign||"bottom",fontStack:t.fontStack||e});const r=this.sections.length-1;this.sectionIndex.push(...[...t.text].map((()=>r)));}addImageSection(t){const e=t.image?t.image.name:"";if(0===e.length)return void j("Can't add FormattedSection with an empty image.");const r=this.getNextImageSectionCharCode();r?(this.text+=String.fromCharCode(r),this.sections.push({scale:1,verticalAlign:t.verticalAlign||"bottom",imageName:e}),this.sectionIndex.push(this.sections.length-1)):j("Reached maximum number of images 6401");}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}determineLineBreaks(t,e,r,n,i){const s=[],a=this.determineAverageLineWidth(t,e,r,n,i),o=this.hasZeroWidthSpaces();let l=0,u=0;const c=this.text[Symbol.iterator]();let h=c.next();const p=this.text[Symbol.iterator]();p.next();let f=p.next();const d=this.text[Symbol.iterator]();d.next(),d.next();let y=d.next();for(;!h.done;){const e=this.getSection(u),m=h.value.codePointAt(0);if(ws(m)||(l+=xc(m,e,r,n,t,i)),!f.done){const t=vs(m),r=f.value.codePointAt(0);(mc[m]||t||"imageName"in e||!y.done&&gc[r])&&s.push(wc(u+1,l,a,s,bc(m,r,t&&o),!1));}u++,h=c.next(),f=p.next(),y=d.next();}return _c(wc(this.length(),l,a,s,0,!0))}determineAverageLineWidth(t,e,r,n,i){let s=0,a=0;for(const e of this.text){const o=this.getSection(a);s+=xc(e.codePointAt(0),o,r,n,t,i),a++;}return s/Math.max(1,Math.ceil(s/e))}}const Ac=4294967296,kc=1/Ac,Ec="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8");class Tc{constructor(t=new Uint8Array(16)){this.buf=ArrayBuffer.isView(t)?t:new Uint8Array(t),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length;}readFields(t,e,r=this.length){for(;this.pos<r;){const r=this.readVarint(),n=r>>3,i=this.pos;this.type=7&r,t(n,e,this),this.pos===i&&this.skip(r);}return e}readMessage(t,e){return this.readFields(t,e,this.readVarint()+this.pos)}readFixed32(){const t=this.dataView.getUint32(this.pos,!0);return this.pos+=4,t}readSFixed32(){const t=this.dataView.getInt32(this.pos,!0);return this.pos+=4,t}readFixed64(){const t=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*Ac;return this.pos+=8,t}readSFixed64(){const t=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*Ac;return this.pos+=8,t}readFloat(){const t=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,t}readDouble(){const t=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,t}readVarint(t){const e=this.buf;let r,n;return n=e[this.pos++],r=127&n,n<128?r:(n=e[this.pos++],r|=(127&n)<<7,n<128?r:(n=e[this.pos++],r|=(127&n)<<14,n<128?r:(n=e[this.pos++],r|=(127&n)<<21,n<128?r:(n=e[this.pos],r|=(15&n)<<28,function(t,e,r){const n=r.buf;let i,s;if(s=n[r.pos++],i=(112&s)>>4,s<128)return Ic(t,i,e);if(s=n[r.pos++],i|=(127&s)<<3,s<128)return Ic(t,i,e);if(s=n[r.pos++],i|=(127&s)<<10,s<128)return Ic(t,i,e);if(s=n[r.pos++],i|=(127&s)<<17,s<128)return Ic(t,i,e);if(s=n[r.pos++],i|=(127&s)<<24,s<128)return Ic(t,i,e);if(s=n[r.pos++],i|=(1&s)<<31,s<128)return Ic(t,i,e);throw new Error("Expected varint not more than 10 bytes")}(r,t,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const t=this.readVarint();return t%2==1?(t+1)/-2:t/2}readBoolean(){return Boolean(this.readVarint())}readString(){const t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&Ec?Ec.decode(this.buf.subarray(e,t)):function(t,e,r){let n="",i=e;for(;i<r;){const e=t[i];let s,a,o,l=null,u=e>239?4:e>223?3:e>191?2:1;if(i+u>r)break;1===u?e<128&&(l=e):2===u?(s=t[i+1],128==(192&s)&&(l=(31&e)<<6|63&s,l<=127&&(l=null))):3===u?(s=t[i+1],a=t[i+2],128==(192&s)&&128==(192&a)&&(l=(15&e)<<12|(63&s)<<6|63&a,(l<=2047||l>=55296&&l<=57343)&&(l=null))):4===u&&(s=t[i+1],a=t[i+2],o=t[i+3],128==(192&s)&&128==(192&a)&&128==(192&o)&&(l=(15&e)<<18|(63&s)<<12|(63&a)<<6|63&o,(l<=65535||l>=1114112)&&(l=null))),null===l?(l=65533,u=1):l>65535&&(l-=65536,n+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),n+=String.fromCharCode(l),i+=u;}return n}(this.buf,e,t)}readBytes(){const t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e}readPackedVarint(t=[],e){const r=this.readPackedEnd();for(;this.pos<r;)t.push(this.readVarint(e));return t}readPackedSVarint(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readSVarint());return t}readPackedBoolean(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readBoolean());return t}readPackedFloat(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readFloat());return t}readPackedDouble(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readDouble());return t}readPackedFixed32(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readFixed32());return t}readPackedSFixed32(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readSFixed32());return t}readPackedFixed64(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readFixed64());return t}readPackedSFixed64(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readSFixed64());return t}readPackedEnd(){return 2===this.type?this.readVarint()+this.pos:this.pos+1}skip(t){const e=7&t;if(0===e)for(;this.buf[this.pos++]>127;);else if(2===e)this.pos=this.readVarint()+this.pos;else if(5===e)this.pos+=4;else {if(1!==e)throw new Error(`Unimplemented type: ${e}`);this.pos+=8;}}writeTag(t,e){this.writeVarint(t<<3|e);}realloc(t){let e=this.length||16;for(;e<this.pos+t;)e*=2;if(e!==this.length){const t=new Uint8Array(e);t.set(this.buf),this.buf=t,this.dataView=new DataView(t.buffer),this.length=e;}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(t){this.realloc(4),this.dataView.setInt32(this.pos,t,!0),this.pos+=4;}writeSFixed32(t){this.realloc(4),this.dataView.setInt32(this.pos,t,!0),this.pos+=4;}writeFixed64(t){this.realloc(8),this.dataView.setInt32(this.pos,-1&t,!0),this.dataView.setInt32(this.pos+4,Math.floor(t*kc),!0),this.pos+=8;}writeSFixed64(t){this.realloc(8),this.dataView.setInt32(this.pos,-1&t,!0),this.dataView.setInt32(this.pos+4,Math.floor(t*kc),!0),this.pos+=8;}writeVarint(t){(t=+t||0)>268435455||t<0?function(t,e){let r,n;if(t>=0?(r=t%4294967296|0,n=t/4294967296|0):(r=~(-t%4294967296),n=~(-t/4294967296),4294967295^r?r=r+1|0:(r=0,n=n+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,r){r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,r.buf[r.pos]=127&(t>>>=7);}(r,0,e),function(t,e){const r=(7&t)<<4;e.buf[e.pos++]|=r|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))));}(n,e);}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))));}writeSVarint(t){this.writeVarint(t<0?2*-t-1:2*t);}writeBoolean(t){this.writeVarint(+t);}writeString(t){t=String(t),this.realloc(4*t.length),this.pos++;const e=this.pos;this.pos=function(t,e,r){for(let n,i,s=0;s<e.length;s++){if(n=e.charCodeAt(s),n>55295&&n<57344){if(!i){n>56319||s+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):i=n;continue}if(n<56320){t[r++]=239,t[r++]=191,t[r++]=189,i=n;continue}n=i-55296<<10|n-56320|65536,i=null;}else i&&(t[r++]=239,t[r++]=191,t[r++]=189,i=null);n<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:(n<65536?t[r++]=n>>12|224:(t[r++]=n>>18|240,t[r++]=n>>12&63|128),t[r++]=n>>6&63|128),t[r++]=63&n|128);}return r}(this.buf,t,this.pos);const r=this.pos-e;r>=128&&Mc(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r;}writeFloat(t){this.realloc(4),this.dataView.setFloat32(this.pos,t,!0),this.pos+=4;}writeDouble(t){this.realloc(8),this.dataView.setFloat64(this.pos,t,!0),this.pos+=8;}writeBytes(t){const e=t.length;this.writeVarint(e),this.realloc(e);for(let r=0;r<e;r++)this.buf[this.pos++]=t[r];}writeRawMessage(t,e){this.pos++;const r=this.pos;t(e,this);const n=this.pos-r;n>=128&&Mc(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n;}writeMessage(t,e,r){this.writeTag(t,2),this.writeRawMessage(e,r);}writePackedVarint(t,e){e.length&&this.writeMessage(t,Fc,e);}writePackedSVarint(t,e){e.length&&this.writeMessage(t,Dc,e);}writePackedBoolean(t,e){e.length&&this.writeMessage(t,Bc,e);}writePackedFloat(t,e){e.length&&this.writeMessage(t,zc,e);}writePackedDouble(t,e){e.length&&this.writeMessage(t,Pc,e);}writePackedFixed32(t,e){e.length&&this.writeMessage(t,Vc,e);}writePackedSFixed32(t,e){e.length&&this.writeMessage(t,Cc,e);}writePackedFixed64(t,e){e.length&&this.writeMessage(t,Lc,e);}writePackedSFixed64(t,e){e.length&&this.writeMessage(t,Oc,e);}writeBytesField(t,e){this.writeTag(t,2),this.writeBytes(e);}writeFixed32Field(t,e){this.writeTag(t,5),this.writeFixed32(e);}writeSFixed32Field(t,e){this.writeTag(t,5),this.writeSFixed32(e);}writeFixed64Field(t,e){this.writeTag(t,1),this.writeFixed64(e);}writeSFixed64Field(t,e){this.writeTag(t,1),this.writeSFixed64(e);}writeVarintField(t,e){this.writeTag(t,0),this.writeVarint(e);}writeSVarintField(t,e){this.writeTag(t,0),this.writeSVarint(e);}writeStringField(t,e){this.writeTag(t,2),this.writeString(e);}writeFloatField(t,e){this.writeTag(t,5),this.writeFloat(e);}writeDoubleField(t,e){this.writeTag(t,1),this.writeDouble(e);}writeBooleanField(t,e){this.writeVarintField(t,+e);}}function Ic(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Mc(t,e,r){const n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(n);for(let e=r.pos-1;e>=t;e--)r.buf[e+n]=r.buf[e];}function Fc(t,e){for(let r=0;r<t.length;r++)e.writeVarint(t[r]);}function Dc(t,e){for(let r=0;r<t.length;r++)e.writeSVarint(t[r]);}function zc(t,e){for(let r=0;r<t.length;r++)e.writeFloat(t[r]);}function Pc(t,e){for(let r=0;r<t.length;r++)e.writeDouble(t[r]);}function Bc(t,e){for(let r=0;r<t.length;r++)e.writeBoolean(t[r]);}function Vc(t,e){for(let r=0;r<t.length;r++)e.writeFixed32(t[r]);}function Cc(t,e){for(let r=0;r<t.length;r++)e.writeSFixed32(t[r]);}function Lc(t,e){for(let r=0;r<t.length;r++)e.writeFixed64(t[r]);}function Oc(t,e){for(let r=0;r<t.length;r++)e.writeSFixed64(t[r]);}function Rc(t,e,r){1===t&&r.readMessage(Nc,e);}function Nc(t,e,r){if(3===t){const{id:t,bitmap:n,width:i,height:s,left:a,top:o,advance:l}=r.readMessage($c,{});e.push({id:t,bitmap:new _l({width:i+6,height:s+6},n),metrics:{width:i,height:s,left:a,top:o,advance:l}});}}function $c(t,e,r){1===t?e.id=r.readVarint():2===t?e.bitmap=r.readBytes():3===t?e.width=r.readVarint():4===t?e.height=r.readVarint():5===t?e.left=r.readSVarint():6===t?e.top=r.readSVarint():7===t&&(e.advance=r.readVarint());}function Uc(t){let e=0,r=0;for(const n of t)e+=n.w*n.h,r=Math.max(r,n.w);t.sort(((t,e)=>e.h-t.h));const n=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),r),h:1/0}];let i=0,s=0;for(const e of t)for(let t=n.length-1;t>=0;t--){const r=n[t];if(!(e.w>r.w||e.h>r.h)){if(e.x=r.x,e.y=r.y,s=Math.max(s,e.y+e.h),i=Math.max(i,e.x+e.w),e.w===r.w&&e.h===r.h){const e=n.pop();e&&t<n.length&&(n[t]=e);}else e.h===r.h?(r.x+=e.w,r.w-=e.w):e.w===r.w?(r.y+=e.h,r.h-=e.h):(n.push({x:r.x+e.w,y:r.y,w:r.w-e.w,h:e.h}),r.y+=e.h,r.h-=e.h);break}}return {w:i,h:s,fill:e/(i*s)||0}}class qc{constructor(t,{pixelRatio:e,version:r,stretchX:n,stretchY:i,content:s,textFitWidth:a,textFitHeight:o}){this.paddedRect=t,this.pixelRatio=e,this.stretchX=n,this.stretchY=i,this.content=s,this.version=r,this.textFitWidth=a,this.textFitHeight=o;}get tl(){return [this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return [this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return [(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class jc{constructor(t,e){const r={},n={};this.haveRenderCallbacks=[];const i=[];this.addImages(t,r,i),this.addImages(e,n,i);const{w:s,h:a}=Uc(i),o=new Sl({width:s||1,height:a||1});for(const e in t){const n=t[e],i=r[e].paddedRect;Sl.copy(n.data,o,{x:0,y:0},{x:i.x+1,y:i.y+1},n.data);}for(const t in e){const r=e[t],i=n[t].paddedRect,s=i.x+1,a=i.y+1,l=r.data.width,u=r.data.height;Sl.copy(r.data,o,{x:0,y:0},{x:s,y:a},r.data),Sl.copy(r.data,o,{x:0,y:u-1},{x:s,y:a-1},{width:l,height:1}),Sl.copy(r.data,o,{x:0,y:0},{x:s,y:a+u},{width:l,height:1}),Sl.copy(r.data,o,{x:l-1,y:0},{x:s-1,y:a},{width:1,height:u}),Sl.copy(r.data,o,{x:0,y:0},{x:s+l,y:a},{width:1,height:u});}this.image=o,this.iconPositions=r,this.patternPositions=n;}addImages(t,e,r){for(const n in t){const i=t[n],s={x:0,y:0,w:i.data.width+2,h:i.data.height+2};r.push(s),e[n]=new qc(s,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(n);}}patchUpdatedImages(t,e){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const r in t.updatedImages)this.patchUpdatedImage(this.iconPositions[r],t.getImage(r),e),this.patchUpdatedImage(this.patternPositions[r],t.getImage(r),e);}patchUpdatedImage(t,e,r){if(!t||!e)return;if(t.version===e.version)return;t.version=e.version;const[n,i]=t.tl;r.update(e.data,void 0,{x:n,y:i});}}var Gc;function Xc(e,r,n,i,s,a,o,l,u,c,h,p,f,d,y){const m=Sc.fromFeature(e,s);let g;p===t.az.vertical&&m.verticalizePunctuation();let x=m.determineLineBreaks(c,a,r,i,d);const{processBidirectionalText:v,processStyledBidirectionalText:b}=zs;if(v&&1===m.sections.length){g=[],x=x.map((t=>m.toCodeUnitIndex(t)));const t=v(m.toString(),x);for(const e of t){const t=[...e].map((()=>0));g.push(new Sc(e,m.sections,t));}}else if(b){g=[],x=x.map((t=>m.toCodeUnitIndex(t)));let t=0;const e=[];for(const r of m.text)e.push(...Array(r.length).fill(m.sectionIndex[t])),t++;const r=b(m.text,e,x);for(const t of r){const e=[];let r="";for(const n of t[0])e.push(t[1][r.length]),r+=n;g.push(new Sc(t[0],m.sections,e));}}else g=function(t,e){const r=[];let n=0;for(const i of e)r.push(t.substring(n,i)),n=i;return n<t.length()&&r.push(t.substring(n,t.length())),r}(m,x);const w=[],_={positionedLines:w,text:m.toString(),top:h[1],bottom:h[1],left:h[0],right:h[0],writingMode:p,iconsInText:!1,verticalizable:!1};return function(t,e,r,n,i,s,a,o,l,u,c,h){let p=0,f=0,d=0,y=0;const m="right"===o?1:"left"===o?0:.5,g=dc/h;let x=0;for(const a of i){a.trim();const i=a.getMaxScale(),o={positionedGlyphs:[],lineOffset:0};t.positionedLines[x]=o;const h=o.positionedGlyphs;let v=0;if(!a.length()){f+=s,++x;continue}const b=Zc(n,a,g);let w=0;for(const s of a.text){const o=a.getSection(w),d=s.codePointAt(0),y=Kc(l,c,d),m={glyph:d,imageName:null,x:p,y:f+-17,vertical:y,scale:1,fontStack:"",sectionIndex:a.getSectionIndex(w),metrics:null,rect:null};let x;if("fontStack"in o){if(x=Wc(o,d,y,b,e,r),!x)continue;m.fontStack=o.fontStack;}else {if(t.iconsInText=!0,o.scale*=g,x=Jc(o,y,i,b,n),!x)continue;v=Math.max(v,x.imageOffset),m.imageName=o.imageName;}const{rect:_,metrics:S,baselineOffset:A}=x;m.y+=A,m.scale=o.scale,m.metrics=S,m.rect=_,h.push(m),y?(t.verticalizable=!0,p+=("imageName"in o?S.advance:dc)*o.scale+u):p+=S.advance*o.scale+u,w++;}0!==h.length&&(d=Math.max(p-u,d),Qc(h,0,h.length-1,m)),p=0,o.lineOffset=Math.max(v,(i-1)*dc);const _=s*i+v;f+=_,y=Math.max(_,y),++x;}const{horizontalAlign:v,verticalAlign:b}=Yc(a);((function(t,e,r,n,i,s,a,o,l){const u=(e-r)*i;let c=0;c=s!==a?-o*n- -17:-n*l*a+.5*a;for(const e of t)for(const t of e.positionedGlyphs)t.x+=u,t.y+=c;}))(t.positionedLines,m,v,b,d,y,s,f,i.length),t.top+=-b*f,t.bottom=t.top+f,t.left+=-v*d,t.right=t.left+d;}(_,r,n,i,g,o,l,u,p,c,f,y),!function(t){for(const e of t)if(0!==e.positionedGlyphs.length)return !1;return !0}(w)&&_}function Yc(t){let e=.5,r=.5;switch(t){case "right":case "top-right":case "bottom-right":e=1;break;case "left":case "top-left":case "bottom-left":e=0;}switch(t){case "bottom":case "bottom-right":case "bottom-left":r=1;break;case "top":case "top-right":case "top-left":r=0;}return {horizontalAlign:e,verticalAlign:r}}function Zc(t,e,r){const n=e.getMaxScale()*dc,{maxImageWidth:i,maxImageHeight:s}=e.getMaxImageSize(t),a=Math.max(n,s*r);return {verticalLineContentWidth:Math.max(n,i*r),horizontalLineContentHeight:a}}function Hc(t){switch(t){case "top":return 0;case "center":return .5;default:return 1}}function Kc(e,r,n){return !(e===t.az.horizontal||!r&&!bs(n)||r&&(ws(n)||(i=n,/\p{sc=Arab}/u.test(String.fromCodePoint(i)))));var i;}function Wc(t,e,r,n,i,s){const a=s[t.fontStack],o=function(t,e,r,n){if(t&&t.rect)return t;const i=e[r.fontStack],s=i&&i[n];return s?{rect:null,metrics:s.metrics}:null}(a&&a[e],i,t,e);if(null===o)return null;let l;if(r)l=n.verticalLineContentWidth-t.scale*dc;else {const e=Hc(t.verticalAlign);l=(n.horizontalLineContentHeight-t.scale*dc)*e;}return {rect:o.rect,metrics:o.metrics,baselineOffset:l}}function Jc(t,e,r,n,i){const s=i[t.imageName];if(!s)return null;const a=s.paddedRect,o=s.displaySize,l={width:o[0],height:o[1],left:1,top:-3,advance:e?o[1]:o[0]};let u;if(e)u=n.verticalLineContentWidth-o[1]*t.scale;else {const e=Hc(t.verticalAlign);u=(n.horizontalLineContentHeight-o[1]*t.scale)*e;}return {rect:a,metrics:l,baselineOffset:u,imageOffset:(e?o[0]:o[1])*t.scale-dc*r}}function Qc(t,e,r,n){if(0===n)return;const i=t[r],s=(t[r].x+i.metrics.advance*i.scale)*n;for(let n=e;n<=r;n++)t[n].x-=s;}function th(t,e,r){const{horizontalAlign:n,verticalAlign:i}=Yc(r),s=e[0]-t.displaySize[0]*n,a=e[1]-t.displaySize[1]*i;return {image:t,top:a,bottom:a+t.displaySize[1],left:s,right:s+t.displaySize[0]}}function eh(t){var e,r;let n=t.left,i=t.top,s=t.right-n,a=t.bottom-i;const o=null!==(e=t.image.textFitWidth)&&void 0!==e?e:"stretchOrShrink",l=null!==(r=t.image.textFitHeight)&&void 0!==r?r:"stretchOrShrink",u=(t.image.content[2]-t.image.content[0])/(t.image.content[3]-t.image.content[1]);if("proportional"===l){if("stretchOnly"===o&&s/a<u||"proportional"===o){const t=Math.ceil(a*u);n*=t/s,s=t;}}else if("proportional"===o&&"stretchOnly"===l&&0!==u&&s/a>u){const t=Math.ceil(s/u);i*=t/a,a=t;}return {x1:n,y1:i,x2:n+s,y2:i+a}}function rh(t,e,r,n,i,s){const a=t.image;let o;if(a.content){const t=a.content,e=a.pixelRatio||1;o=[t[0]/e,t[1]/e,a.displaySize[0]-t[2]/e,a.displaySize[1]-t[3]/e];}const l=e.left*s,u=e.right*s;let c,h,p,f;"width"===r||"both"===r?(f=i[0]+l-n[3],h=i[0]+u+n[1]):(f=i[0]+(l+u-a.displaySize[0])/2,h=f+a.displaySize[0]);const d=e.top*s,y=e.bottom*s;return "height"===r||"both"===r?(c=i[1]+d-n[0],p=i[1]+y+n[2]):(c=i[1]+(d+y-a.displaySize[1])/2,p=c+a.displaySize[1]),{image:a,top:c,right:h,bottom:p,left:f,collisionPadding:o}}ps("ImagePosition",qc),ps("ImageAtlas",jc),t.az=void 0,(Gc=t.az||(t.az={}))[Gc.none=0]="none",Gc[Gc.horizontal=1]="horizontal",Gc[Gc.vertical=2]="vertical",Gc[Gc.horizontalOnly=3]="horizontalOnly";const nh=128,ih=32640;function sh(t,e){const{expression:r}=e;if("constant"===r.kind)return {kind:"constant",layoutSize:r.evaluate(new Ps(t+1))};if("source"===r.kind)return {kind:"source"};{const{zoomStops:e,interpolationType:n}=r;let i=0;for(;i<e.length&&e[i]<=t;)i++;i=Math.max(0,i-1);let s=i;for(;s<e.length&&e[s]<t+1;)s++;s=Math.min(e.length-1,s);const a=e[i],o=e[s];return "composite"===r.kind?{kind:"composite",minZoom:a,maxZoom:o,interpolationType:n}:{kind:"camera",minZoom:a,maxZoom:o,minSize:r.evaluate(new Ps(a)),maxSize:r.evaluate(new Ps(o)),interpolationType:n}}}function ah(t,e,r){let n="never";const i=t.get(e);return i?n=i:t.get(r)&&(n="always"),n}const oh=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function lh(t,e,r,n,i,s,a,o,l,u,c,h,p){const f=o?Math.min(ih,Math.round(o[0])):0,d=o?Math.min(ih,Math.round(o[1])):0;t.emplaceBack(e,r,Math.round(32*n),Math.round(32*i),s,a,(f<<1)+(l?1:0),d,16*u,16*c,256*h,256*p);}function uh(t,e,r){t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r),t.emplaceBack(e.x,e.y,r);}function ch(t){for(const e of t.sections)if(Ds(e.text))return !0;return !1}class hh{constructor(t){this.layoutVertexArray=new Ha,this.indexArray=new to,this.programConfigurations=t,this.segments=new io,this.dynamicLayoutVertexArray=new Ka,this.opacityVertexArray=new Wa,this.hasVisibleVertices=!1,this.placedSymbolArray=new za;}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(t,e,r,n){this.isEmpty()||(r&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,lc.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,uc.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,oh,!0),this.opacityVertexBuffer.itemSize=1),(r||n)&&this.programConfigurations.upload(t));}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy());}}ps("SymbolBuffers",hh);class ph{constructor(t,e,r){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new r,this.segments=new io,this.collisionVertexArray=new Qa;}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,cc.members,!0);}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy());}}ps("CollisionBuffers",ph);class fh{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const r=this.layers[0]._unevaluatedLayout._values;this.textSizeData=sh(this.zoom,r["text-size"]),this.iconSizeData=sh(this.zoom,r["icon-size"]);const n=this.layers[0].layout,i=n.get("symbol-sort-key"),s=n.get("symbol-z-order");this.canOverlap="never"!==ah(n,"text-overlap","text-allow-overlap")||"never"!==ah(n,"icon-overlap","icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==s&&!i.isConstant(),this.sortFeaturesByY=("viewport-y"===s||"auto"===s&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===n.get("symbol-placement")&&(this.writingModes=n.get("text-writing-mode").map((e=>t.az[e]))),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.sourceID=e.sourceID;}createArrays(){this.text=new hh(new Vo(this.layers,this.zoom,(t=>/^text/.test(t)))),this.icon=new hh(new Vo(this.layers,this.zoom,(t=>/^icon/.test(t)))),this.glyphOffsetArray=new Va,this.lineVertexArray=new Ca,this.symbolInstances=new Ba,this.textAnchorOffsets=new Oa;}calculateGlyphDependencies(t,e,r,n,i){for(const s of t)if(e[s.codePointAt(0)]=!0,(r||n)&&i){const t=yc[s];t&&(e[t.codePointAt(0)]=!0);}}populate(e,r,n){const i=this.layers[0],s=i.layout,a=s.get("text-font"),o=s.get("text-field"),l=s.get("icon-image"),u=("constant"!==o.value.kind||o.value.value instanceof De&&!o.value.value.isEmpty()||o.value.value.toString().length>0)&&("constant"!==a.value.kind||a.value.value.length>0),c="constant"!==l.value.kind||!!l.value.value||Object.keys(l.parameters).length>0,h=s.get("symbol-sort-key");if(this.features=[],!u&&!c)return;const p=r.iconDependencies,f=r.glyphDependencies,d=r.availableImages,y=new Ps(this.zoom);for(const{feature:r,id:o,index:l,sourceLayerIndex:m}of e){const e=i._featureFilter.needGeometry,g=$o(r,e);if(!i._featureFilter.filter(y,g,n))continue;let x,v;if(e||(g.geometry=No(r)),u){const t=i.getValueAndResolveTokens("text-field",g,n,d),e=De.factory(t),r=this.hasRTLText=this.hasRTLText||ch(e);(!r||"unavailable"===zs.getRTLTextPluginStatus()||r&&zs.isParsed())&&(x=fc(e,i,g));}if(c){const t=i.getValueAndResolveTokens("icon-image",g,n,d);v=t instanceof Oe?t:Oe.fromString(t);}if(!x&&!v)continue;const b=this.sortFeaturesByKey?h.evaluate(g,{},n):void 0;if(this.features.push({id:o,text:x,icon:v,index:l,sourceLayerIndex:m,geometry:g.geometry,properties:r.properties,type:Mu.types[r.type],sortKey:b}),v&&(p[v.name]=!0),x){const e=a.evaluate(g,{},n).join(","),r="viewport"!==s.get("text-rotation-alignment")&&"point"!==s.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(t.az.vertical)>=0;for(const t of x.sections)if(t.image)p[t.image.name]=!0;else {const n=_s(x.toString()),i=t.fontStack||e,s=f[i]=f[i]||{};this.calculateGlyphDependencies(t.text,s,r,this.allowVerticalPlacement,n);}}}"line"===s.get("symbol-placement")&&(this.features=function(t){const e={},r={},n=[];let i=0;function s(e){n.push(t[e]),i++;}function a(t,e,i){const s=r[t];return delete r[t],r[e]=s,n[s].geometry[0].pop(),n[s].geometry[0]=n[s].geometry[0].concat(i[0]),s}function o(t,r,i){const s=e[r];return delete e[r],e[t]=s,n[s].geometry[0].shift(),n[s].geometry[0]=i[0].concat(n[s].geometry[0]),s}function l(t,e,r){const n=r?e[0][e[0].length-1]:e[0][0];return `${t}:${n.x}:${n.y}`}for(let u=0;u<t.length;u++){const c=t[u],h=c.geometry,p=c.text?c.text.toString():null;if(!p){s(u);continue}const f=l(p,h),d=l(p,h,!0);if(f in r&&d in e&&r[f]!==e[d]){const t=o(f,d,h),i=a(f,d,n[t].geometry);delete e[f],delete r[d],r[l(p,n[i].geometry,!0)]=i,n[t].geometry=null;}else f in r?a(f,d,h):d in e?o(f,d,h):(s(u),e[f]=i-1,r[d]=i-1);}return n.filter((t=>t.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((t,e)=>t.sortKey-e.sortKey));}update(t,e,r){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,{imagePositions:r}),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,{imagePositions:r}));}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return !this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0;}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy();}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData();}addToLineVertexArray(t,e){const r=this.lineVertexArray.length;if(void 0!==t.segment){let r=t.dist(e[t.segment+1]),n=t.dist(e[t.segment]);const i={};for(let n=t.segment+1;n<e.length;n++)i[n]={x:e[n].x,y:e[n].y,tileUnitDistanceFromAnchor:r},n<e.length-1&&(r+=e[n+1].dist(e[n]));for(let r=t.segment||0;r>=0;r--)i[r]={x:e[r].x,y:e[r].y,tileUnitDistanceFromAnchor:n},r>0&&(n+=e[r-1].dist(e[r]));for(let t=0;t<e.length;t++){const e=i[t];this.lineVertexArray.emplaceBack(e.x,e.y,e.tileUnitDistanceFromAnchor);}}return {lineStartIndex:r,lineLength:this.lineVertexArray.length-r}}addSymbols(e,r,n,i,s,a,o,l,u,c,h,p){const f=e.indexArray,d=e.layoutVertexArray,y=e.segments.prepareSegment(4*r.length,d,f,this.canOverlap?a.sortKey:void 0),m=this.glyphOffsetArray.length,g=y.vertexLength,x=this.allowVerticalPlacement&&o===t.az.vertical?Math.PI/2:0,v=a.text&&a.text.sections;for(let t=0;t<r.length;t++){const{tl:i,tr:s,bl:o,br:u,tex:c,pixelOffsetTL:h,pixelOffsetBR:m,minFontScaleX:g,minFontScaleY:b,glyphOffset:w,isSDF:_,sectionIndex:S}=r[t],A=y.vertexLength,k=w[1];lh(d,l.x,l.y,i.x,k+i.y,c.x,c.y,n,_,h.x,h.y,g,b),lh(d,l.x,l.y,s.x,k+s.y,c.x+c.w,c.y,n,_,m.x,h.y,g,b),lh(d,l.x,l.y,o.x,k+o.y,c.x,c.y+c.h,n,_,h.x,m.y,g,b),lh(d,l.x,l.y,u.x,k+u.y,c.x+c.w,c.y+c.h,n,_,m.x,m.y,g,b),uh(e.dynamicLayoutVertexArray,l,x),f.emplaceBack(A,A+2,A+1),f.emplaceBack(A+1,A+2,A+3),y.vertexLength+=4,y.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(w[0]),t!==r.length-1&&S===r[t+1].sectionIndex||e.programConfigurations.populatePaintArrays(d.length,a,a.index,{imagePositions:{},canonical:p,formattedSection:v&&v[S]});}e.placedSymbolArray.emplaceBack(l.x,l.y,m,this.glyphOffsetArray.length-m,g,u,c,l.segment,n?n[0]:0,n?n[1]:0,i[0],i[1],o,0,!1,0,h);}_addCollisionDebugVertex(t,e,r,n,i,s){return e.emplaceBack(0,0),t.emplaceBack(r.x,r.y,n,i,Math.round(s.x),Math.round(s.y))}addCollisionDebugVertices(t,e,n,i,s,a,o){const l=s.segments.prepareSegment(4,s.layoutVertexArray,s.indexArray),u=l.vertexLength,c=s.layoutVertexArray,h=s.collisionVertexArray,p=o.anchorX,f=o.anchorY;this._addCollisionDebugVertex(c,h,a,p,f,new r(t,e)),this._addCollisionDebugVertex(c,h,a,p,f,new r(n,e)),this._addCollisionDebugVertex(c,h,a,p,f,new r(n,i)),this._addCollisionDebugVertex(c,h,a,p,f,new r(t,i)),l.vertexLength+=4;const d=s.indexArray;d.emplaceBack(u,u+1),d.emplaceBack(u+1,u+2),d.emplaceBack(u+2,u+3),d.emplaceBack(u+3,u),l.primitiveLength+=4;}addDebugCollisionBoxes(t,e,r,n){for(let i=t;i<e;i++){const t=this.collisionBoxArray.get(i);this.addCollisionDebugVertices(t.x1,t.y1,t.x2,t.y2,n?this.textCollisionBox:this.iconCollisionBox,t.anchorPoint,r);}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ph(Ja,hc.members,eo),this.iconCollisionBox=new ph(Ja,hc.members,eo);for(let t=0;t<this.symbolInstances.length;t++){const e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1);}}_deserializeCollisionBoxesForSymbol(t,e,r,n,i,s,a,o,l){const u={};for(let n=e;n<r;n++){const e=t.get(n);u.textBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,anchorPointX:e.anchorPointX,anchorPointY:e.anchorPointY},u.textFeatureIndex=e.featureIndex;break}for(let e=n;e<i;e++){const r=t.get(e);u.verticalTextBox={x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2,anchorPointX:r.anchorPointX,anchorPointY:r.anchorPointY},u.verticalTextFeatureIndex=r.featureIndex;break}for(let e=s;e<a;e++){const r=t.get(e);u.iconBox={x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2,anchorPointX:r.anchorPointX,anchorPointY:r.anchorPointY},u.iconFeatureIndex=r.featureIndex;break}for(let e=o;e<l;e++){const r=t.get(e);u.verticalIconBox={x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2,anchorPointX:r.anchorPointX,anchorPointY:r.anchorPointY},u.verticalIconFeatureIndex=r.featureIndex;break}return u}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let e=0;e<this.symbolInstances.length;e++){const r=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,r.textBoxStartIndex,r.textBoxEndIndex,r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r.iconBoxStartIndex,r.iconBoxEndIndex,r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex));}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,e){const r=t.placedSymbolArray.get(e),n=r.vertexStartIndex+4*r.numGlyphs;for(let e=r.vertexStartIndex;e<n;e+=4)t.indexArray.emplaceBack(e,e+2,e+1),t.indexArray.emplaceBack(e+1,e+2,e+3);}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const e=Math.sin(t),r=Math.cos(t),n=[],i=[],s=[];for(let t=0;t<this.symbolInstances.length;++t){s.push(t);const a=this.symbolInstances.get(t);n.push(0|Math.round(e*a.anchorX+r*a.anchorY)),i.push(a.featureIndex);}return s.sort(((t,e)=>n[t]-n[e]||i[e]-i[t])),s}addToSortKeyRanges(t,e){const r=this.sortKeyRanges[this.sortKeyRanges.length-1];r&&r.sortKey===e?r.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1});}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const t of this.symbolInstanceIndexes){const e=this.symbolInstances.get(t);this.featureSortOrder.push(e.featureIndex),[e.rightJustifiedTextSymbolIndex,e.centerJustifiedTextSymbolIndex,e.leftJustifiedTextSymbolIndex].forEach(((t,e,r)=>{t>=0&&r.indexOf(t)===e&&this.addIndicesForPlacedSymbol(this.text,t);})),e.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,e.verticalPlacedTextSymbolIndex),e.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,e.placedIconSymbolIndex),e.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,e.verticalPlacedIconSymbolIndex);}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray);}}}let dh,yh;ps("SymbolBucket",fh,{omit:["layers","collisionBoxArray","features","compareText"]}),fh.MAX_GLYPHS=65535,fh.addDynamicAttributes=uh;var mh={get paint(){return yh=yh||new Hs({"icon-opacity":new Gs(vt.paint_symbol["icon-opacity"]),"icon-color":new Gs(vt.paint_symbol["icon-color"]),"icon-halo-color":new Gs(vt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Gs(vt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Gs(vt.paint_symbol["icon-halo-blur"]),"icon-translate":new js(vt.paint_symbol["icon-translate"]),"icon-translate-anchor":new js(vt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Gs(vt.paint_symbol["text-opacity"]),"text-color":new Gs(vt.paint_symbol["text-color"],{runtimeType:Rt,getOverride:t=>t.textColor,hasOverride:t=>!!t.textColor}),"text-halo-color":new Gs(vt.paint_symbol["text-halo-color"]),"text-halo-width":new Gs(vt.paint_symbol["text-halo-width"]),"text-halo-blur":new Gs(vt.paint_symbol["text-halo-blur"]),"text-translate":new js(vt.paint_symbol["text-translate"]),"text-translate-anchor":new js(vt.paint_symbol["text-translate-anchor"])})},get layout(){return dh=dh||new Hs({"symbol-placement":new js(vt.layout_symbol["symbol-placement"]),"symbol-spacing":new js(vt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new js(vt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Gs(vt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new js(vt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new js(vt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new js(vt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new js(vt.layout_symbol["icon-ignore-placement"]),"icon-optional":new js(vt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new js(vt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Gs(vt.layout_symbol["icon-size"]),"icon-text-fit":new js(vt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new js(vt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Gs(vt.layout_symbol["icon-image"]),"icon-rotate":new Gs(vt.layout_symbol["icon-rotate"]),"icon-padding":new Gs(vt.layout_symbol["icon-padding"]),"icon-keep-upright":new js(vt.layout_symbol["icon-keep-upright"]),"icon-offset":new Gs(vt.layout_symbol["icon-offset"]),"icon-anchor":new Gs(vt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new js(vt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new js(vt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new js(vt.layout_symbol["text-rotation-alignment"]),"text-field":new Gs(vt.layout_symbol["text-field"]),"text-font":new Gs(vt.layout_symbol["text-font"]),"text-size":new Gs(vt.layout_symbol["text-size"]),"text-max-width":new Gs(vt.layout_symbol["text-max-width"]),"text-line-height":new js(vt.layout_symbol["text-line-height"]),"text-letter-spacing":new Gs(vt.layout_symbol["text-letter-spacing"]),"text-justify":new Gs(vt.layout_symbol["text-justify"]),"text-radial-offset":new Gs(vt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new js(vt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Gs(vt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Gs(vt.layout_symbol["text-anchor"]),"text-max-angle":new js(vt.layout_symbol["text-max-angle"]),"text-writing-mode":new js(vt.layout_symbol["text-writing-mode"]),"text-rotate":new Gs(vt.layout_symbol["text-rotate"]),"text-padding":new js(vt.layout_symbol["text-padding"]),"text-keep-upright":new js(vt.layout_symbol["text-keep-upright"]),"text-transform":new Gs(vt.layout_symbol["text-transform"]),"text-offset":new Gs(vt.layout_symbol["text-offset"]),"text-allow-overlap":new js(vt.layout_symbol["text-allow-overlap"]),"text-overlap":new js(vt.layout_symbol["text-overlap"]),"text-ignore-placement":new js(vt.layout_symbol["text-ignore-placement"]),"text-optional":new js(vt.layout_symbol["text-optional"])})}};class gh{constructor(t){if(void 0===t.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:Vt,this.defaultValue=t;}evaluate(t){if(t.formattedSection){const e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression);}outputDefined(){return !1}serialize(){return null}}ps("FormatSectionOverride",gh,{omit:["defaultValue"]});class xh extends Ks{constructor(t,e){super(t,mh,e);}recalculate(t,e){if(super.recalculate(t,e),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const t=this.layout.get("text-writing-mode");if(t){const e=[];for(const r of t)e.indexOf(r)<0&&e.push(r);this.layout._values["text-writing-mode"]=e;}else this.layout._values["text-writing-mode"]=["horizontal"];}this._setPaintOverrides();}getValueAndResolveTokens(t,e,r,n){const i=this.layout.get(t).evaluate(e,{},r,n),s=this._unevaluatedLayout._values[t];return s.isDataDriven()||ri(s.value)||!i?i:function(t,e){return e.replace(/{([^{}]+)}/g,((e,r)=>t&&r in t?String(t[r]):""))}(e.properties,i)}createBucket(t){return new fh(t)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const t of mh.paint.overridableProperties){if(!xh.hasPaintOverride(this.layout,t))continue;const e=this.paint.get(t),r=new gh(e),n=new ei(r,e.property.specification);let i=null;i="constant"===e.value.kind||"source"===e.value.kind?new ii("source",n):new si("composite",n,e.value.zoomStops),this.paint._values[t]=new Us(e.property,i,e.parameters);}}_handleOverridablePaintPropertyUpdate(t,e,r){return !(!this.layout||e.isDataDriven()||r.isDataDriven())&&xh.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,e){const r=t.get("text-field"),n=mh.paint.properties[e];let i=!1;const s=t=>{for(const e of t)if(n.overrides&&n.overrides.hasOverride(e))return void(i=!0)};if("constant"===r.value.kind&&r.value.value instanceof De)s(r.value.value.sections);else if("source"===r.value.kind||"composite"===r.value.kind){const t=e=>{i||(e instanceof je&&Ue(e.value)===jt?s(e.value.sections):e instanceof Ir?s(e.sections):e.eachChild(t));},e=r.value;e._styleExpression&&t(e._styleExpression.expression);}return i}}let vh;var bh={get paint(){return vh=vh||new Hs({"background-color":new js(vt.paint_background["background-color"]),"background-pattern":new Ys(vt.paint_background["background-pattern"]),"background-opacity":new js(vt.paint_background["background-opacity"])})}};class wh extends Ks{constructor(t,e){super(t,bh,e);}}class _h extends Ks{constructor(t,e){super(t,{},e),this.onAdd=t=>{this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl);},this.onRemove=t=>{this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl);},this.implementation=t;}is3D(){return "3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return !1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Sh{constructor(t){this._methodToThrottle=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle();});}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle();}),0));}remove(){delete this._channel,this._methodToThrottle=()=>{};}}const Ah={once:!0},kh=6371008.8;class Eh{constructor(t,e){if(isNaN(t)||isNaN(e))throw new Error(`Invalid LngLat object: (${t}, ${e})`);if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Eh(L(this.lng,-180,180),this.lat)}toArray(){return [this.lng,this.lat]}toString(){return `LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const e=Math.PI/180,r=this.lat*e,n=t.lat*e,i=Math.sin(r)*Math.sin(n)+Math.cos(r)*Math.cos(n)*Math.cos((t.lng-this.lng)*e);return kh*Math.acos(Math.min(i,1))}static convert(t){if(t instanceof Eh)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Eh(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Eh(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Th=2*Math.PI*kh;function Ih(t){return Th*Math.cos(t*Math.PI/180)}function Mh(t){return (180+t)/360}function Fh(t){return (180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Dh(t,e){return t/Ih(e)}function zh(t){return 360*t-180}function Ph(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}function Bh(t,e){return t*Ih(Ph(e))}class Vh{constructor(t,e,r=0){this.x=+t,this.y=+e,this.z=+r;}static fromLngLat(t,e=0){const r=Eh.convert(t);return new Vh(Mh(r.lng),Fh(r.lat),Dh(e,r.lat))}toLngLat(){return new Eh(zh(this.x),Ph(this.y))}toAltitude(){return Bh(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Th*(t=Ph(this.y),1/Math.cos(t*Math.PI/180));var t;}}function Ch(t,e,r){var n=2*Math.PI*6378137/256/Math.pow(2,r);return [t*n-2*Math.PI*6378137/2,e*n-2*Math.PI*6378137/2]}class Lh{constructor(t,e,r){if(!function(t,e,r){return !(t<0||t>25||r<0||r>=Math.pow(2,t)||e<0||e>=Math.pow(2,t))}(t,e,r))throw new Error(`x=${e}, y=${r}, z=${t} outside of bounds. 0<=x<${Math.pow(2,t)}, 0<=y<${Math.pow(2,t)} 0<=z<=25 `);this.z=t,this.x=e,this.y=r,this.key=Nh(0,t,t,e,r);}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,e,r){const n=function(t,e,r){var n=Ch(256*t,256*(e=Math.pow(2,r)-e-1),r),i=Ch(256*(t+1),256*(e+1),r);return n[0]+","+n[1]+","+i[0]+","+i[1]}(this.x,this.y,this.z),i=function(t,e,r){let n,i="";for(let s=t;s>0;s--)n=1<<s-1,i+=(e&n?1:0)+(r&n?2:0);return i}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===r?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,e>1?"@2x":"").replace(/{quadkey}/g,i).replace(/{bbox-epsg-3857}/g,n)}isChildOf(t){const e=this.z-t.z;return e>0&&t.x===this.x>>e&&t.y===this.y>>e}getTilePoint(t){const e=Math.pow(2,this.z);return new r((t.x*e-this.x)*M,(t.y*e-this.y)*M)}toString(){return `${this.z}/${this.x}/${this.y}`}}class Oh{constructor(t,e){this.wrap=t,this.canonical=e,this.key=Nh(t,e.z,e.z,e.x,e.y);}}class Rh{constructor(t,e,r,n,i){if(this.terrainRttPosMatrix32f=null,t<r)throw new Error(`overscaledZ should be >= z; overscaledZ = ${t}; z = ${r}`);this.overscaledZ=t,this.wrap=e,this.canonical=new Lh(r,+n,+i),this.key=Nh(e,t,r,n,i);}clone(){return new Rh(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const e=this.canonical.z-t;return t>this.canonical.z?new Rh(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Rh(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(t,e){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const r=this.canonical.z-t;return t>this.canonical.z?Nh(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y):Nh(this.wrap*+e,t,t,this.canonical.x>>r,this.canonical.y>>r)}isChildOf(t){if(t.wrap!==this.wrap)return !1;if(this.overscaledZ-t.overscaledZ<=0)return !1;if(0===t.overscaledZ)return this.overscaledZ>0;const e=this.canonical.z-t.canonical.z;return !(e<0)&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e}children(t){if(this.overscaledZ>=t)return [new Rh(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const e=this.canonical.z+1,r=2*this.canonical.x,n=2*this.canonical.y;return [new Rh(e,this.wrap,e,r,n),new Rh(e,this.wrap,e,r+1,n),new Rh(e,this.wrap,e,r,n+1),new Rh(e,this.wrap,e,r+1,n+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new Rh(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new Rh(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Oh(this.wrap,this.canonical)}toString(){return `${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new Vh(t.x-this.wrap,t.y))}}function Nh(t,e,r,n,i){(t*=2)<0&&(t=-1*t-1);const s=1<<r;return (s*s*t+s*i+n).toString(36)+r.toString(36)+e.toString(36)}function $h(t,e){return e?t.properties[e]:t.id}function Uh(t,e){const r={id:t.id};if(e.removeAllProperties&&(delete t.removeProperties,delete t.addOrUpdateProperties,delete e.removeProperties),e.removeProperties)for(const r of e.removeProperties){const e=t.addOrUpdateProperties.findIndex((t=>t.key===r));e>-1&&t.addOrUpdateProperties.splice(e,1);}return (t.removeAllProperties||e.removeAllProperties)&&(r.removeAllProperties=!0),(t.removeProperties||e.removeProperties)&&(r.removeProperties=[...t.removeProperties||[],...e.removeProperties||[]]),(t.addOrUpdateProperties||e.addOrUpdateProperties)&&(r.addOrUpdateProperties=[...t.addOrUpdateProperties||[],...e.addOrUpdateProperties||[]]),(t.newGeometry||e.newGeometry)&&(r.newGeometry=e.newGeometry||t.newGeometry),r}function qh(t){var e,r;if(!t)return {};const n={};return n.removeAll=t.removeAll,n.remove=new Set(t.remove||[]),n.add=new Map(null===(e=t.add)||void 0===e?void 0:e.map((t=>[t.id,t]))),n.update=new Map(null===(r=t.update)||void 0===r?void 0:r.map((t=>[t.id,t]))),n}ps("CanonicalTileID",Lh),ps("OverscaledTileID",Rh,{omit:["terrainRttPosMatrix32f"]});class jh{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0;}extend(t){return this.minX=Math.min(this.minX,t.x),this.minY=Math.min(this.minY,t.y),this.maxX=Math.max(this.maxX,t.x),this.maxY=Math.max(this.maxY,t.y),this}expandBy(t){return this.minX-=t,this.minY-=t,this.maxX+=t,this.maxY+=t,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(t){return this.expandBy(-t)}map(t){const e=new jh;return e.extend(t(new r(this.minX,this.minY))),e.extend(t(new r(this.maxX,this.minY))),e.extend(t(new r(this.minX,this.maxY))),e.extend(t(new r(this.maxX,this.maxY))),e}static fromPoints(t){const e=new jh;for(const r of t)e.extend(r);return e}contains(t){return t.x>=this.minX&&t.x<=this.maxX&&t.y>=this.minY&&t.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(t){return !this.empty()&&!t.empty()&&t.minX>=this.minX&&t.maxX<=this.maxX&&t.minY>=this.minY&&t.maxY<=this.maxY}intersects(t){return !this.empty()&&!t.empty()&&t.minX<=this.maxX&&t.maxX>=this.minX&&t.minY<=this.maxY&&t.maxY>=this.minY}}class Gh{constructor(t){this._stringToNumber={},this._numberToString=[];for(let e=0;e<t.length;e++){const r=t[e];this._stringToNumber[r]=e,this._numberToString[e]=r;}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${t} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[t]}}class Xh{constructor(t,e,r,n,i){this.type="Feature",this._vectorTileFeature=t,this._x=r,this._y=n,this._z=e,this.properties=t.properties,this.id=i;}projectPoint(t,e,r,n){return [360*(t.x+e)/n-180,360/Math.PI*Math.atan(Math.exp((1-2*(t.y+r)/n)*Math.PI))-90]}projectLine(t,e,r,n){return t.map((t=>this.projectPoint(t,e,r,n)))}get geometry(){if(this._geometry)return this._geometry;const t=this._vectorTileFeature,e=t.extent*Math.pow(2,this._z),r=t.extent*this._x,n=t.extent*this._y,i=t.loadGeometry();switch(t.type){case 1:{const t=[];for(const e of i)t.push(e[0]);const s=this.projectLine(t,r,n,e);this._geometry=1===t.length?{type:"Point",coordinates:s[0]}:{type:"MultiPoint",coordinates:s};break}case 2:{const t=i.map((t=>this.projectLine(t,r,n,e)));this._geometry=1===t.length?{type:"LineString",coordinates:t[0]}:{type:"MultiLineString",coordinates:t};break}case 3:{const t=Du(i),s=[];for(const i of t)s.push(i.map((t=>this.projectLine(t,r,n,e))));this._geometry=1===s.length?{type:"Polygon",coordinates:s[0]}:{type:"MultiPolygon",coordinates:s};break}default:throw new Error(`unknown feature type: ${t.type}`)}return this._geometry}set geometry(t){this._geometry=t;}toJSON(){const t={geometry:this.geometry};for(const e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&"_x"!==e&&"_y"!==e&&"_z"!==e&&(t[e]=this[e]);return t}}class Yh{_name;dataBuffer;nullabilityBuffer;_size;constructor(t,e,r){this._name=t,this.dataBuffer=e,"number"==typeof r?this._size=r:(this.nullabilityBuffer=r,this._size=r.size());}getValue(t){return this.nullabilityBuffer&&!this.nullabilityBuffer.get(t)?null:this.getValueFromBuffer(t)}has(t){return this.nullabilityBuffer&&this.nullabilityBuffer.get(t)||!this.nullabilityBuffer}get name(){return this._name}get size(){return this._size}}class Zh extends Yh{}class Hh extends Zh{getValueFromBuffer(t){return this.dataBuffer[t]}}class Kh extends Zh{getValueFromBuffer(t){return this.dataBuffer[t]}}class Wh extends Yh{delta;constructor(t,e,r,n){super(t,e,n),this.delta=r;}}class Jh extends Wh{constructor(t,e,r,n){super(t,Int32Array.of(e),r,n);}getValueFromBuffer(t){return this.dataBuffer[0]+t*this.delta}}class Qh extends Yh{constructor(t,e,r){super(t,Int32Array.of(e),r);}getValueFromBuffer(t){return this.dataBuffer[0]}}class tp{_name;_geometryVector;_idVector;_propertyVectors;_extent;propertyVectorsMap;constructor(t,e,r,n,i=4096){this._name=t,this._geometryVector=e,this._idVector=r,this._propertyVectors=n,this._extent=i;}get name(){return this._name}get idVector(){return this._idVector}get geometryVector(){return this._geometryVector}get propertyVectors(){return this._propertyVectors}getPropertyVector(t){return this.propertyVectorsMap||(this.propertyVectorsMap=new Map(this._propertyVectors.map((t=>[t.name,t])))),this.propertyVectorsMap.get(t)}*[Symbol.iterator](){const t=this.geometryVector[Symbol.iterator]();let e=0;for(;e<this.numFeatures;){let r;this.idVector&&(r=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(e)):this.idVector.getValue(e));const n=t?.next().value,i={};for(const t of this.propertyVectors){if(!t)continue;const r=t.name,n=t.getValue(e);null!==n&&(i[r]=n);}e++,yield {id:r,geometry:n,properties:i};}}get numFeatures(){return this.geometryVector.numGeometries}get extent(){return this._extent}getFeatures(){const t=[],e=this.geometryVector.getGeometries();for(let r=0;r<this.numFeatures;r++){let n;this.idVector&&(n=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(r)):this.idVector.getValue(r));const i={coordinates:e[r],type:this.geometryVector.geometryType(r)},s={};for(const t of this.propertyVectors){if(!t)continue;const e=t.name,n=t.getValue(r);null!==n&&(s[e]=n);}t.push({id:n,geometry:i,properties:s});}return t}containsMaxSaveIntegerValues(t){return t instanceof Hh||t instanceof Qh&&t instanceof Jh||t instanceof Kh}}class ep{value;constructor(t){this.value=t;}get(){return this.value}set(t){this.value=t;}increment(){return this.value++}add(t){this.value+=t;}}var rp,np,ip,sp,ap,op,lp,up,cp,hp;function pp(t,e,r){const n=new Int32Array(r);let i=0,s=e.get();for(let e=0;e<n.length;e++){let e=t[s++],r=127&e;e<128||(e=t[s++],r|=(127&e)<<7,e<128||(e=t[s++],r|=(127&e)<<14,e<128||(e=t[s++],r|=(127&e)<<21,e<128||(e=t[s++],r|=(15&e)<<28)))),n[i++]=r;}return e.set(s),n}function fp(t,e,r){const n=new BigInt64Array(r);for(let r=0;r<n.length;r++)n[r]=xp(t,e);return n}function dp(t,e){let r,n;return n=t[e.get()],e.increment(),r=127&n,n<128?r:(n=t[e.get()],e.increment(),r|=(127&n)<<7,n<128?r:(n=t[e.get()],e.increment(),r|=(127&n)<<14,n<128?r:(n=t[e.get()],e.increment(),r|=(127&n)<<21,n<128?r:(n=t[e.get()],r|=(15&n)<<28,function(t,e,r){let n,i;if(i=e[r.get()],r.increment(),n=(112&i)>>4,i<128)return 4294967296*n+(t>>>0);if(i=e[r.get()],r.increment(),n|=(127&i)<<3,i<128)return 4294967296*n+(t>>>0);if(i=e[r.get()],r.increment(),n|=(127&i)<<10,i<128)return 4294967296*n+(t>>>0);if(i=e[r.get()],r.increment(),n|=(127&i)<<17,i<128)return 4294967296*n+(t>>>0);if(i=e[r.get()],r.increment(),n|=(127&i)<<24,i<128)return 4294967296*n+(t>>>0);if(i=e[r.get()],r.increment(),n|=(1&i)<<31,i<128)return 4294967296*n+(t>>>0);throw new Error("Expected varint not more than 10 bytes")}(r,t,e)))))}function yp(t,e,r,n){throw new Error("FastPFor is not implemented yet.")}function mp(t){return t>>>1^-(1&t)}function gp(t){return t>>1n^-(1n&t)}function xp(t,e){let r=0n,n=0,i=e.get();for(;i<t.length;){const e=t[i++];if(r|=BigInt(127&e)<<BigInt(n),!(128&e))break;if(n+=7,n>=64)throw new Error("Varint too long")}return e.set(i),r}function vp(t,e,r){const n=new Int32Array(r);let i=0;for(let r=0;r<e;r++){const s=t[r];n.fill(t[r+e],i,i+s),i+=s;}return n}function bp(t,e,r){const n=new BigInt64Array(r);let i=0;for(let r=0;r<e;r++){const s=Number(t[r]);n.fill(t[r+e],i,i+s),i+=s;}return n}function wp(t,e,r){const n=new Float64Array(r);let i=0;for(let r=0;r<e;r++){const s=t[r];n.fill(t[r+e],i,i+s),i+=s;}return n}function _p(t){const e=t.length/4*4;let r=1;if(e>=4)for(let n=t[0];r<e-4;r+=4)n=t[r]+=n,n=t[r+1]+=n,n=t[r+2]+=n,n=t[r+3]+=n;for(;r!=t.length;)t[r]+=t[r-1],++r;}function Sp(t){t[0]=t[0]>>>1^-(1&t[0]),t[1]=t[1]>>>1^-(1&t[1]);const e=t.length/4*4;let r=2;if(e>=4)for(;r<e-4;r+=4){const e=t[r],n=t[r+1],i=t[r+2],s=t[r+3];t[r]=(e>>>1^-(1&e))+t[r-2],t[r+1]=(n>>>1^-(1&n))+t[r-1],t[r+2]=(i>>>1^-(1&i))+t[r],t[r+3]=(s>>>1^-(1&s))+t[r+1];}for(;r!=t.length;r+=2)t[r]=(t[r]>>>1^-(1&t[r]))+t[r-2],t[r+1]=(t[r+1]>>>1^-(1&t[r+1]))+t[r-1];}!function(t){t.NONE="NONE",t.DELTA="DELTA",t.COMPONENTWISE_DELTA="COMPONENTWISE_DELTA",t.RLE="RLE",t.MORTON="MORTON",t.PDE="PDE";}(rp||(rp={})),function(t){t.NONE="NONE",t.FAST_PFOR="FAST_PFOR",t.VARINT="VARINT",t.ALP="ALP";}(np||(np={})),function(t){t.PRESENT="PRESENT",t.DATA="DATA",t.OFFSET="OFFSET",t.LENGTH="LENGTH";}(ip||(ip={}));class Ap{_dictionaryType;_offsetType;_lengthType;constructor(t,e,r){this._dictionaryType=t,this._offsetType=e,this._lengthType=r;}get dictionaryType(){return this._dictionaryType}get offsetType(){return this._offsetType}get lengthType(){return this._lengthType}}function kp(t,e){const r=function(t,e){const r=t[e.get()],n=Object.values(ip)[r>>4];let i=null;switch(n){case ip.DATA:i=new Ap(Object.values(sp)[15&r]);break;case ip.OFFSET:i=new Ap(null,Object.values(ap)[15&r]);break;case ip.LENGTH:i=new Ap(null,null,Object.values(op)[15&r]);}e.increment();const s=t[e.get()],a=Object.values(rp)[s>>5],o=Object.values(rp)[s>>2&7],l=Object.values(np)[3&s];e.increment();const u=pp(t,e,2),c=u[0];return {physicalStreamType:n,logicalStreamType:i,logicalLevelTechnique1:a,logicalLevelTechnique2:o,physicalLevelTechnique:l,numValues:c,byteLength:u[1],decompressedCount:c}}(t,e);return r.logicalLevelTechnique1===rp.MORTON?function(t,e,r){const n=pp(e,r,2);return {physicalStreamType:t.physicalStreamType,logicalStreamType:t.logicalStreamType,logicalLevelTechnique1:t.logicalLevelTechnique1,logicalLevelTechnique2:t.logicalLevelTechnique2,physicalLevelTechnique:t.physicalLevelTechnique,numValues:t.numValues,byteLength:t.byteLength,decompressedCount:t.decompressedCount,numBits:n[0],coordinateShift:n[1]}}(r,t,e):rp.RLE!==r.logicalLevelTechnique1&&rp.RLE!==r.logicalLevelTechnique2||np.NONE===r.physicalLevelTechnique?r:function(t,e,r){const n=pp(e,r,2);return {physicalStreamType:t.physicalStreamType,logicalStreamType:t.logicalStreamType,logicalLevelTechnique1:t.logicalLevelTechnique1,logicalLevelTechnique2:t.logicalLevelTechnique2,physicalLevelTechnique:t.physicalLevelTechnique,numValues:t.numValues,byteLength:t.byteLength,decompressedCount:n[1],runs:n[0],numRleValues:n[1]}}(r,t,e)}!function(t){t.NONE="NONE",t.SINGLE="SINGLE",t.SHARED="SHARED",t.VERTEX="VERTEX",t.MORTON="MORTON",t.FSST="FSST";}(sp||(sp={})),function(t){t.VERTEX="VERTEX",t.INDEX="INDEX",t.STRING="STRING",t.KEY="KEY";}(ap||(ap={})),function(t){t.VAR_BINARY="VAR_BINARY",t.GEOMETRIES="GEOMETRIES",t.PARTS="PARTS",t.RINGS="RINGS",t.TRIANGLES="TRIANGLES",t.SYMBOL="SYMBOL",t.DICTIONARY="DICTIONARY";}(op||(op={})),function(t){t[t.FLAT=0]="FLAT",t[t.CONST=1]="CONST",t[t.SEQUENCE=2]="SEQUENCE",t[t.DICTIONARY=3]="DICTIONARY",t[t.FSST_DICTIONARY=4]="FSST_DICTIONARY";}(lp||(lp={}));class Ep{values;_size;constructor(t,e){this.values=t,this._size=e;}get(t){const e=Math.floor(t/8);return 1==(this.values[e]>>t%8&1)}set(t,e){const r=Math.floor(t/8);this.values[r]=this.values[r]|(e?1:0)<<t%8;}getInt(t){const e=Math.floor(t/8);return this.values[e]>>t%8&1}size(){return this._size}getBuffer(){return this.values}}function Tp(t,e,r,n,i){return function(t,e,r){switch(e.logicalLevelTechnique1){case rp.DELTA:return e.logicalLevelTechnique2===rp.RLE?function(t,e,r){const n=new Int32Array(r);let i=0,s=0;for(let r=0;r<e;r++){const a=t[r],o=mp(t[r+e]);for(let t=0;t<a;t++)s+=o,n[i++]=s;}return n}(t,e.runs,e.numRleValues):(function(t){t[0]=t[0]>>>1^-(1&t[0]);const e=t.length/4*4;let r=1;if(e>=4)for(;r<e-4;r+=4){const e=t[r],n=t[r+1],i=t[r+2],s=t[r+3];t[r]=(e>>>1^-(1&e))+t[r-1],t[r+1]=(n>>>1^-(1&n))+t[r],t[r+2]=(i>>>1^-(1&i))+t[r+1],t[r+3]=(s>>>1^-(1&s))+t[r+2];}for(;r!=t.length;++r)t[r]=(t[r]>>>1^-(1&t[r]))+t[r-1];}(t),t);case rp.RLE:return function(t,e,r){return r?function(t,e,r){const n=new Int32Array(r);let i=0;for(let r=0;r<e;r++){const s=t[r];let a=t[r+e];a=a>>>1^-(1&a),n.fill(a,i,i+s),i+=s;}return n}(t,e.runs,e.numRleValues):vp(t,e.runs,e.numRleValues)}(t,e,r);case rp.MORTON:return _p(t),t;case rp.COMPONENTWISE_DELTA:return Sp(t),t;case rp.NONE:return r&&function(t){for(let e=0;e<t.length;e++){const r=t[e];t[e]=r>>>1^-(1&r);}}(t),t;default:throw new Error(`The specified Logical level technique is not supported: ${e.logicalLevelTechnique1}`)}}(Mp(t,e,r),r,n)}function Ip(t,e,r){return function(t,e){if(e.logicalLevelTechnique1===rp.DELTA&&e.logicalLevelTechnique2===rp.NONE){const e=function(t){const e=new Int32Array(t.length+1);e[0]=0,e[1]=mp(t[0]);let r=e[1],n=2;for(;n!=e.length;++n){const i=t[n-1];r+=i>>>1^-(1&i),e[n]=e[n-1]+r;}return e}(t);return e}if(e.logicalLevelTechnique1===rp.RLE&&e.logicalLevelTechnique2===rp.NONE){const r=function(t,e,r){const n=new Int32Array(r+1);n[0]=0;let i=1,s=n[0];for(let r=0;r<e;r++){const a=t[r],o=t[r+e];for(let t=i;t<i+a;t++)n[t]=o+s,s=n[t];i+=a;}return n}(t,e.runs,e.numRleValues);return r}if(e.logicalLevelTechnique1===rp.NONE&&e.logicalLevelTechnique2===rp.NONE){!function(t){let e=0;for(let r=0;r<t.length;r++)t[r]+=e,e=t[r];}(t);const r=new Int32Array(e.numValues+1);return r[0]=0,r.set(t,1),r}if(e.logicalLevelTechnique1===rp.DELTA&&e.logicalLevelTechnique2===rp.RLE){const r=function(t,e,r){const n=new Int32Array(r+1);n[0]=0;let i=1,s=n[0];for(let r=0;r<e;r++){const a=t[r];let o=t[r+e];o=o>>>1^-(1&o);for(let t=i;t<i+a;t++)n[t]=o+s,s=n[t];i+=a;}return n}(t,e.runs,e.numRleValues);return _p(r),r}throw new Error("Only delta encoding is supported for transforming length to offset streams yet.")}(Mp(t,e,r),r)}function Mp(t,e,r){const n=r.physicalLevelTechnique;if(n===np.FAST_PFOR)return yp();if(n===np.VARINT)return pp(t,e,r.numValues);if(n===np.NONE){const n=e.get();e.add(r.byteLength);const i=t.subarray(n,e.get());return new Int32Array(i)}throw new Error("Specified physicalLevelTechnique is not supported (yet).")}function Fp(t,e,r,n){const i=Mp(t,e,r);if(1===i.length){const t=i[0];return n?mp(t):t}return n?function(t){return mp(t[1])}(i):function(t){return t[1]}(i)}function Dp(t,e,r){return function(t){if(2==t.length){const e=mp(t[1]);return [e,e]}return [mp(t[2]),mp(t[3])]}(Mp(t,e,r))}function zp(t,e,r){return function(t){if(2==t.length){const e=gp(t[1]);return [e,e]}return [gp(t[2]),gp(t[3])]}(fp(t,e,r.numValues))}function Pp(t,e,r,n){return function(t,e,r){switch(e.logicalLevelTechnique1){case rp.DELTA:return e.logicalLevelTechnique2===rp.RLE?function(t,e,r){const n=new BigInt64Array(r);let i=0,s=0n;for(let r=0;r<e;r++){const a=Number(t[r]),o=gp(t[r+e]);for(let t=0;t<a;t++)s+=o,n[i++]=s;}return n}(t,e.runs,e.numRleValues):(function(t){t[0]=t[0]>>1n^-(1n&t[0]);const e=t.length/4*4;let r=1;if(e>=4)for(;r<e-4;r+=4){const e=t[r],n=t[r+1],i=t[r+2],s=t[r+3];t[r]=(e>>1n^-(1n&e))+t[r-1],t[r+1]=(n>>1n^-(1n&n))+t[r],t[r+2]=(i>>1n^-(1n&i))+t[r+1],t[r+3]=(s>>1n^-(1n&s))+t[r+2];}for(;r!=t.length;++r)t[r]=(t[r]>>1n^-(1n&t[r]))+t[r-1];}(t),t);case rp.RLE:return function(t,e,r){return r?function(t,e,r){const n=new BigInt64Array(r);let i=0;for(let r=0;r<e;r++){const s=Number(t[r]);let a=t[r+e];a=a>>1n^-(1n&a),n.fill(a,i,i+s),i+=s;}return n}(t,e.runs,e.numRleValues):bp(t,e.runs,e.numRleValues)}(t,e,r);case rp.NONE:return r&&function(t){for(let e=0;e<t.length;e++){const r=t[e];t[e]=r>>1n^-(1n&r);}}(t),t;default:throw new Error(`The specified Logical level technique is not supported: ${e.logicalLevelTechnique1}`)}}(fp(t,e,r.numValues),r,n)}function Bp(t,e,r,n){const i=fp(t,e,r.numValues);if(1===i.length){const t=i[0];return n?gp(t):t}return n?function(t){return gp(t[1])}(i):function(t){return t[1]}(i)}function Vp(t,e,r,n,i){return function(t,e,r,n){switch(e.logicalLevelTechnique1){case rp.DELTA:return e.logicalLevelTechnique2===rp.RLE&&(t=vp(t,e.runs,e.numRleValues)),function(t,e){const r=new Int32Array(t.size());let n=0;t.get(0)?(r[0]=t.get(0)?e[0]>>>1^-(1&e[0]):0,n=1):r[0]=0;let i=1;for(;i!=r.length;++i)r[i]=t.get(i)?r[i-1]+(e[n]>>>1^-(1&e[n++])):r[i-1];return r}(n,t);case rp.RLE:return function(t,e,r,n){const i=e;return r?function(t,e,r){const n=new Int32Array(t.size());let i=0;for(let s=0;s<r;s++){const a=e[s];let o=e[s+r];o=o>>>1^-(1&o);for(let e=i;e<i+a;e++)t.get(e)?n[e]=o:(n[e]=0,i++);i+=a;}return n}(n,t,i.runs):function(t,e,r){const n=new Int32Array(t.size());let i=0;for(let s=0;s<r;s++){const a=e[s],o=e[s+r];for(let e=i;e<i+a;e++)t.get(e)?n[e]=o:(n[e]=0,i++);i+=a;}return n}(n,t,i.runs)}(t,e,r,n);case rp.MORTON:return _p(t),t;case rp.COMPONENTWISE_DELTA:return Sp(t),t;case rp.NONE:return t=r?function(t,e){const r=new Int32Array(t.size());let n=0,i=0;for(;i!=r.length;++i)if(t.get(i)){const t=e[n++];r[i]=t>>>1^-(1&t);}else r[i]=0;return r}(n,t):function(t,e){const r=new Int32Array(t.size());let n=0,i=0;for(;i!=r.length;++i)r[i]=t.get(i)?e[n++]:0;return r}(n,t),t;default:throw new Error("The specified Logical level technique is not supported")}}(r.physicalLevelTechnique===np.FAST_PFOR?yp():pp(t,e,r.numValues),r,n,i)}function Cp(t,e,r,n){const i=t.logicalLevelTechnique1;if(i===rp.RLE)return 1===t.runs?lp.CONST:lp.FLAT;const s=e instanceof Ep?e.size():e;if(i===rp.DELTA&&t.logicalLevelTechnique2===rp.RLE){const e=t.runs,i=2;if(t.numRleValues!==s)return lp.FLAT;if(1===e)return lp.SEQUENCE;if(2===e){const e=n.get();let s;if(t.physicalLevelTechnique===np.VARINT)s=pp(r,n,4);else {const t=n.get();s=new Int32Array(r.buffer,r.byteOffset+t,4);}if(n.set(e),s[2]===i&&s[3]===i)return lp.SEQUENCE}}return 1===t.numValues?lp.CONST:lp.FLAT}class Lp extends Zh{getValueFromBuffer(t){return this.dataBuffer[t]}}class Op extends Wh{constructor(t,e,r,n){super(t,BigInt64Array.of(e),r,n);}getValueFromBuffer(t){return this.dataBuffer[0]+BigInt(t)*this.delta}}class Rp{_geometryOffsets;_partOffsets;_ringOffsets;constructor(t,e,r){this._geometryOffsets=t,this._partOffsets=e,this._ringOffsets=r;}get geometryOffsets(){return this._geometryOffsets}get partOffsets(){return this._partOffsets}get ringOffsets(){return this._ringOffsets}}function Np(t,e,r){return {x:$p(t,e)-r,y:$p(t>>1,e)-r}}function $p(t,e){let r=0;for(let n=0;n<e;n++)r|=(t&1<<2*n)>>n;return r}!function(t){t[t.POINT=0]="POINT",t[t.LINESTRING=1]="LINESTRING",t[t.POLYGON=2]="POLYGON",t[t.MULTIPOINT=3]="MULTIPOINT",t[t.MULTILINESTRING=4]="MULTILINESTRING",t[t.MULTIPOLYGON=5]="MULTIPOLYGON";}(up||(up={})),function(t){t[t.POINT=0]="POINT",t[t.LINESTRING=1]="LINESTRING",t[t.POLYGON=2]="POLYGON";}(cp||(cp={})),function(t){t[t.MORTON=0]="MORTON",t[t.VEC_2=1]="VEC_2",t[t.VEC_3=2]="VEC_3";}(hp||(hp={}));class Up{createPoint(t){return [[t]]}createMultiPoint(t){return t.map((t=>[t]))}createLineString(t){return [t]}createMultiLineString(t){return t}createPolygon(t,e){return [t].concat(e)}createMultiPolygon(t){return t.flat()}}function qp(t){const e=new Array(t.numGeometries);let n=1,i=1,s=1,a=0;const o=new Up;let l=0,u=0;const c=t.mortonSettings,h=t.topologyVector,p=h.geometryOffsets,f=h.partOffsets,d=h.ringOffsets,y=t.vertexOffsets,m=t.containsPolygonGeometry(),g=t.vertexBuffer;for(let h=0;h<t.numGeometries;h++){const x=t.geometryType(h);if(x===up.POINT){if(y&&0!==y.length)if(t.vertexBufferType===hp.VEC_2){const t=2*y[u++],n=new r(g[t],g[t+1]);e[a++]=o.createPoint(n);}else {const t=Np(g[y[u++]],c.numBits,c.coordinateShift),n=new r(t.x,t.y);e[a++]=o.createPoint(n);}else {const t=new r(g[l++],g[l++]);e[a++]=o.createPoint(t);}p&&s++,f&&n++,d&&i++;}else if(x===up.MULTIPOINT){const t=p[s]-p[s-1];s++;const n=new Array(t);if(y&&0!==y.length){for(let e=0;e<t;e++){const t=2*y[u++];n[e]=new r(g[t],g[t+1]);}e[a++]=o.createMultiPoint(n);}else {for(let e=0;e<t;e++){const t=g[l++],i=g[l++];n[e]=new r(t,i);}e[a++]=o.createMultiPoint(n);}}else if(x===up.LINESTRING){let r,h=0;m?(h=d[i]-d[i-1],i++):h=f[n]-f[n-1],n++,y&&0!==y.length?(r=t.vertexBufferType===hp.VEC_2?Zp(g,y,u,h,!1):Hp(g,y,u,h,!1,c),u+=h):(r=Yp(g,l,h,!1),l+=2*h),e[a++]=o.createLineString(r),p&&s++;}else if(x===up.POLYGON){const r=f[n]-f[n-1];n++;const h=new Array(r-1);let m=d[i]-d[i-1];if(i++,y&&0!==y.length){const r=t.vertexBufferType===hp.VEC_2?Gp(g,y,u,m):Xp(g,y,u,m,0,c);u+=m;for(let e=0;e<h.length;e++)m=d[i]-d[i-1],i++,h[e]=t.vertexBufferType===hp.VEC_2?Gp(g,y,u,m):Xp(g,y,u,m,0,c),u+=m;e[a++]=o.createPolygon(r,h);}else {const t=jp(g,l,m);l+=2*m;for(let t=0;t<h.length;t++)m=d[i]-d[i-1],i++,h[t]=jp(g,l,m),l+=2*m;e[a++]=o.createPolygon(t,h);}p&&s++;}else if(x===up.MULTILINESTRING){const r=p[s]-p[s-1];s++;const h=new Array(r);if(y&&0!==y.length){for(let e=0;e<r;e++){let r=0;m?(r=d[i]-d[i-1],i++):r=f[n]-f[n-1],n++;const s=t.vertexBufferType===hp.VEC_2?Zp(g,y,u,r,!1):Hp(g,y,u,r,!1,c);h[e]=s,u+=r;}e[a++]=o.createMultiLineString(h);}else {for(let t=0;t<r;t++){let e=0;m?(e=d[i]-d[i-1],i++):e=f[n]-f[n-1],n++,h[t]=Yp(g,l,e,!1),l+=2*e;}e[a++]=o.createMultiLineString(h);}}else {if(x!==up.MULTIPOLYGON)throw new Error("The specified geometry type is currently not supported.");{const r=p[s]-p[s-1];s++;const h=new Array(r);let m=0;if(y&&0!==y.length){for(let e=0;e<r;e++){const r=f[n]-f[n-1];n++;const s=new Array(r-1);m=d[i]-d[i-1],i++;const a=t.vertexBufferType===hp.VEC_2?Gp(g,y,u,m):Xp(g,y,u,m,0,c);u+=m;for(let e=0;e<s.length;e++)m=d[i]-d[i-1],i++,s[e]=t.vertexBufferType===hp.VEC_2?Gp(g,y,u,m):Xp(g,y,u,m,0,c),u+=m;h[e]=o.createPolygon(a,s);}e[a++]=o.createMultiPolygon(h);}else {for(let t=0;t<r;t++){const e=f[n]-f[n-1];n++;const r=new Array(e-1);m=d[i]-d[i-1],i++;const s=jp(g,l,m);l+=2*m;for(let t=0;t<r.length;t++){const e=d[i]-d[i-1];i++,r[t]=jp(g,l,e),l+=2*e;}h[t]=o.createPolygon(s,r);}e[a++]=o.createMultiPolygon(h);}}}}return e}function jp(t,e,r){return Yp(t,e,r,!0)}function Gp(t,e,r,n){return Zp(t,e,r,n,!0)}function Xp(t,e,r,n,i,s){return Hp(t,e,r,n,!0,s)}function Yp(t,e,n,i){const s=new Array(i?n+1:n);for(let i=0;i<2*n;i+=2)s[i/2]=new r(t[e+i],t[e+i+1]);return i&&(s[s.length-1]=s[0]),s}function Zp(t,e,n,i,s){const a=new Array(s?i+1:i);for(let s=0;s<2*i;s+=2){const i=2*e[n+s/2];a[s/2]=new r(t[i],t[i+1]);}return s&&(a[a.length-1]=a[0]),a}function Hp(t,e,n,i,s,a){const o=new Array(s?i+1:i);for(let s=0;s<i;s++){const i=Np(t[e[n+s]],a.numBits,a.coordinateShift);o[s]=new r(i.x,i.y);}return s&&(o[o.length-1]=o[0]),o}class Kp{_vertexBufferType;_topologyVector;_vertexOffsets;_vertexBuffer;_mortonSettings;constructor(t,e,r,n,i){this._vertexBufferType=t,this._topologyVector=e,this._vertexOffsets=r,this._vertexBuffer=n,this._mortonSettings=i;}get vertexBufferType(){return this._vertexBufferType}get topologyVector(){return this._topologyVector}get vertexOffsets(){return this._vertexOffsets}get vertexBuffer(){return this._vertexBuffer}*[Symbol.iterator](){const t=qp(this);let e=0;for(;e<this.numGeometries;)yield {coordinates:t[e],type:this.geometryType(e)},e++;}getSimpleEncodedVertex(t){const e=this.vertexOffsets?2*this.vertexOffsets[t]:2*t;return [this.vertexBuffer[e],this.vertexBuffer[e+1]]}getVertex(t){if(this.vertexOffsets&&this.mortonSettings){const e=Np(this.vertexBuffer[this.vertexOffsets[t]],this.mortonSettings.numBits,this.mortonSettings.coordinateShift);return [e.x,e.y]}const e=this.vertexOffsets?2*this.vertexOffsets[t]:2*t;return [this.vertexBuffer[e],this.vertexBuffer[e+1]]}getGeometries(){return qp(this)}get mortonSettings(){return this._mortonSettings}}class Wp extends Kp{_numGeometries;_geometryType;constructor(t,e,r,n,i,s,a){super(r,n,i,s,a),this._numGeometries=t,this._geometryType=e;}geometryType(t){return this._geometryType}get numGeometries(){return this._numGeometries}containsPolygonGeometry(){return this._geometryType===up.POLYGON||this._geometryType===up.MULTIPOLYGON}containsSingleGeometryType(){return !0}}class Jp extends Kp{_geometryTypes;constructor(t,e,r,n,i,s){super(t,r,n,i,s),this._geometryTypes=e;}geometryType(t){return this._geometryTypes[t]}get numGeometries(){return this._geometryTypes.length}containsPolygonGeometry(){for(let t=0;t<this.numGeometries;t++)if(this.geometryType(t)===up.POLYGON||this.geometryType(t)===up.MULTIPOLYGON)return !0;return !1}containsSingleGeometryType(){return !1}}class Qp{_triangleOffsets;_indexBuffer;_vertexBuffer;_topologyVector;constructor(t,e,r,n){this._triangleOffsets=t,this._indexBuffer=e,this._vertexBuffer=r,this._topologyVector=n;}get triangleOffsets(){return this._triangleOffsets}get indexBuffer(){return this._indexBuffer}get vertexBuffer(){return this._vertexBuffer}get topologyVector(){return this._topologyVector}getGeometries(){if(!this._topologyVector)throw new Error("Cannot convert GpuVector to coordinates without topology information");const t=new Array(this.numGeometries),e=this._topologyVector,n=e.partOffsets,i=e.ringOffsets,s=e.geometryOffsets;let a=0,o=1,l=1,u=1;for(let e=0;e<this.numGeometries;e++)switch(this.geometryType(e)){case up.POLYGON:{const c=n[o]-n[o-1];o++;const h=[];for(let t=0;t<c;t++){const t=i[l]-i[l-1];l++;const e=[];for(let n=0;n<t;n++){const t=this._vertexBuffer[a++],n=this._vertexBuffer[a++];e.push(new r(t,n));}e.length>0&&e.push(e[0]),h.push(e);}t[e]=h,s&&u++;}break;case up.MULTIPOLYGON:{const c=s[u]-s[u-1];u++;const h=[];for(let t=0;t<c;t++){const t=n[o]-n[o-1];o++;for(let e=0;e<t;e++){const t=i[l]-i[l-1];l++;const e=[];for(let n=0;n<t;n++){const t=this._vertexBuffer[a++],n=this._vertexBuffer[a++];e.push(new r(t,n));}e.length>0&&e.push(e[0]),h.push(e);}}t[e]=h;}}return t}[Symbol.iterator](){return null}}function tf(t,e,r,n,i,s){return new ef(t,e,r,n,i,s)}class ef extends Qp{_numGeometries;_geometryType;constructor(t,e,r,n,i,s){super(r,n,i,s),this._numGeometries=t,this._geometryType=e;}geometryType(t){return this._geometryType}get numGeometries(){return this._numGeometries}containsSingleGeometryType(){return !0}}function rf(t,e,r,n,i){return new nf(t,e,r,n,i)}class nf extends Qp{_geometryTypes;constructor(t,e,r,n,i){super(e,r,n,i),this._geometryTypes=t;}geometryType(t){return this._geometryTypes[t]}get numGeometries(){return this._geometryTypes.length}containsSingleGeometryType(){return !1}}function sf(t,e,r,n,i){const s=kp(t,r);let a=null,o=null,l=null,u=null,c=null,h=null,p=null,f=null;if(Cp(s,n,t,r)===lp.CONST){const i=Fp(t,r,s,!1);for(let n=0;n<e-1;n++){const e=kp(t,r);switch(e.physicalStreamType){case ip.LENGTH:switch(e.logicalStreamType.lengthType){case op.GEOMETRIES:a=Ip(t,r,e);break;case op.PARTS:o=Ip(t,r,e);break;case op.RINGS:l=Ip(t,r,e);break;case op.TRIANGLES:p=Ip(t,r,e);}break;case ip.OFFSET:switch(e.logicalStreamType.offsetType){case ap.VERTEX:u=Tp(t,r,e,!1);break;case ap.INDEX:f=Tp(t,r,e,!1);}break;case ip.DATA:sp.VERTEX===e.logicalStreamType.dictionaryType?c=Tp(t,r,e,!0):(h={numBits:e.numBits,coordinateShift:e.coordinateShift},c=Tp(t,r,e,!1));}}return null!==f?null!=a||null!=o?tf(n,i,p,f,c,new Rp(a,o,l)):tf(n,i,p,f,c):null===h?function(t,e,r,n,i){return new Wp(t,e,hp.VEC_2,r,n,i)}(n,i,new Rp(a,o,l),u,c):function(t,e,r,n,i,s){return new Wp(t,e,hp.MORTON,r,n,i,s)}(n,i,new Rp(a,o,l),u,c,h)}const d=Tp(t,r,s,!1);for(let n=0;n<e-1;n++){const e=kp(t,r);switch(e.physicalStreamType){case ip.LENGTH:switch(e.logicalStreamType.lengthType){case op.GEOMETRIES:a=Tp(t,r,e,!1);break;case op.PARTS:o=Tp(t,r,e,!1);break;case op.RINGS:l=Tp(t,r,e,!1);break;case op.TRIANGLES:p=Ip(t,r,e);}break;case ip.OFFSET:switch(e.logicalStreamType.offsetType){case ap.VERTEX:u=Tp(t,r,e,!1);break;case ap.INDEX:f=Tp(t,r,e,!1);}break;case ip.DATA:sp.VERTEX===e.logicalStreamType.dictionaryType?c=Tp(t,r,e,!0):(h={numBits:e.numBits,coordinateShift:e.coordinateShift},c=Tp(t,r,e,!1));}}return null!==f&&null===o?rf(d,p,f,c):(null!==a?(a=af(d,a,2),null!==o&&null!==l?(o=of(d,a,o,!1),l=function(t,e,r,n){const i=new Int32Array(r[r.length-1]+1);let s=0;i[0]=s;let a=1,o=1,l=0;for(let u=0;u<t.length;u++){const c=t[u],h=e[u+1]-e[u];if(0!==c&&3!==c)for(let t=0;t<h;t++){const t=r[a]-r[a-1];a++;for(let e=0;e<t;e++)s=i[o++]=s+n[l++];}else for(let t=0;t<h;t++)i[o++]=++s,a++;}return i}(d,a,o,l)):null!==o&&(o=function(t,e,r){const n=new Int32Array(e[e.length-1]+1);let i=0;n[0]=i;let s=1,a=0;for(let o=0;o<t.length;o++){const l=t[o],u=e[o+1]-e[o];if(4===l||1===l)for(let t=0;t<u;t++)i=n[s++]=i+r[a++];else for(let t=0;t<u;t++)n[s++]=++i;}return n}(d,a,o))):null!==o&&null!==l?(o=af(d,o,1),l=of(d,o,l,!0)):null!==o&&(o=af(d,o,0)),null!==f?rf(d,p,f,c,new Rp(a,o,l)):null===h?function(t,e,r,n){return new Jp(hp.VEC_2,t,e,r,n)}(d,new Rp(a,o,l),u,c):function(t,e,r,n,i){return new Jp(hp.MORTON,t,e,r,n,i)}(d,new Rp(a,o,l),u,c,h))}function af(t,e,r){const n=new Int32Array(t.length+1);let i=0;n[0]=i;let s=0;for(let a=0;a<t.length;a++)i=n[a+1]=i+(t[a]>r?e[s++]:1);return n}function of(t,e,r,n){const i=new Int32Array(e[e.length-1]+1);let s=0;i[0]=s;let a=1,o=0;for(let l=0;l<t.length;l++){const u=t[l],c=e[l+1]-e[l];if(5===u||2===u||n&&(4===u||1===u))for(let t=0;t<c;t++)s=i[a++]=s+r[o++];else for(let t=0;t<c;t++)i[a++]=++s;}return i}class lf extends Yh{dataVector;constructor(t,e,r){super(t,e.getBuffer(),r),this.dataVector=e;}getValueFromBuffer(t){return this.dataVector.get(t)}}class uf extends Zh{getValueFromBuffer(t){return this.dataBuffer[t]}}class cf extends Yh{constructor(t,e,r){super(t,BigInt64Array.of(e),r);}getValueFromBuffer(t){return this.dataBuffer[0]}}function hf(t,e,r){return pf(t,Math.ceil(e/8),r)}function pf(t,e,r){const n=new Uint8Array(e);let i=0;for(;i<e;){const e=t[r.increment()];if(e<=127){const s=e+3,a=t[r.increment()],o=i+s;n.fill(a,i,o),i=o;}else {const s=256-e;for(let e=0;e<s;e++)n[i++]=t[r.increment()];}}return n}const ff=new TextDecoder;function df(t,e,r){return r-e>=12?ff.decode(t.subarray(e,r)):function(t,e,r){let n="",i=e;for(;i<r;){const e=t[i];let s,a,o,l=null,u=e>239?4:e>223?3:e>191?2:1;if(i+u>r)break;1===u?e<128&&(l=e):2===u?(s=t[i+1],128==(192&s)&&(l=(31&e)<<6|63&s,l<=127&&(l=null))):3===u?(s=t[i+1],a=t[i+2],128==(192&s)&&128==(192&a)&&(l=(15&e)<<12|(63&s)<<6|63&a,(l<=2047||l>=55296&&l<=57343)&&(l=null))):4===u&&(s=t[i+1],a=t[i+2],o=t[i+3],128==(192&s)&&128==(192&a)&&128==(192&o)&&(l=(15&e)<<18|(63&s)<<12|(63&a)<<6|63&o,(l<=65535||l>=1114112)&&(l=null))),null===l?(l=65533,u=1):l>65535&&(l-=65536,n+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),n+=String.fromCharCode(l),i+=u;}return n}(t,e,r)}class yf extends Yh{offsetBuffer;constructor(t,e,r,n){super(t,r,n),this.offsetBuffer=e;}}class mf extends yf{textEncoder;constructor(t,e,r,n){super(t,e,r,n??e.length-1),this.textEncoder=new TextEncoder;}getValueFromBuffer(t){return df(this.dataBuffer,this.offsetBuffer[t],this.offsetBuffer[t+1])}}class gf extends yf{indexBuffer;textEncoder;constructor(t,e,r,n,i){super(t,r,n,i??e.length),this.indexBuffer=e,this.indexBuffer=e,this.textEncoder=new TextEncoder;}getValueFromBuffer(t){const e=this.indexBuffer[t];return df(this.dataBuffer,this.offsetBuffer[e],this.offsetBuffer[e+1])}}class xf extends yf{indexBuffer;symbolOffsetBuffer;symbolTableBuffer;textEncoder;symbolLengthBuffer;lengthBuffer;decodedDictionary;constructor(t,e,r,n,i,s,a){super(t,r,n,a),this.indexBuffer=e,this.symbolOffsetBuffer=i,this.symbolTableBuffer=s,this.textEncoder=new TextEncoder;}getValueFromBuffer(t){null==this.decodedDictionary&&(null==this.symbolLengthBuffer&&(this.symbolLengthBuffer=this.offsetToLengthBuffer(this.symbolOffsetBuffer),this.lengthBuffer=this.offsetToLengthBuffer(this.offsetBuffer)),this.decodedDictionary=function(t,e,r){const n=[],i=new Array(e.length).fill(0);for(let t=1;t<e.length;t++)i[t]=i[t-1]+e[t-1];for(let s=0;s<r.length;s++)if(255===r[s])n.push(r[++s]);else {const a=e[r[s]],o=i[r[s]];for(let e=0;e<a;e++)n.push(t[o+e]);}return new Uint8Array(n)}(this.symbolTableBuffer,this.symbolLengthBuffer,this.dataBuffer));const e=this.indexBuffer[t];return df(this.decodedDictionary,this.offsetBuffer[e],this.offsetBuffer[e+1])}offsetToLengthBuffer(t){const e=new Uint32Array(t.length-1);let r=t[0];for(let n=1;n<t.length;n++){const i=t[n];e[n-1]=i-r,r=i;}return e}}function vf(t,e,r,n,i,s){return "scalarType"===r.type?function(t,e,r,n,i,s){let a=null,o=0;if(0===t)return null;if(s.nullable){const t=kp(e,r);o=t.numValues;const n=r.get(),i=hf(e,o,r);r.set(n+t.byteLength),a=new Ep(i,t.numValues);}const l=a??n;switch(i.physicalType){case 4:case 3:return function(t,e,r,n,i){const s=kp(t,e),a=Cp(s,i,t,e),o=3===n.physicalType;if(a===lp.FLAT){const n=bf(i)?Vp(t,e,s,o,i):Tp(t,e,s,o);return new Hh(r.name,n,i)}if(a===lp.SEQUENCE){const n=Dp(t,e,s);return new Jh(r.name,n[0],n[1],s.numRleValues)}{const n=Fp(t,e,s,o);return new Qh(r.name,n,i)}}(e,r,s,i,l);case 9:return function(t,e,r,n,i){let s=null,a=null,o=null,l=null,u=null,c=null,h=null,p=null;for(let t=0;t<n;t++){const t=kp(e,r);if(0!==t.byteLength)switch(t.physicalStreamType){case ip.PRESENT:{const n=hf(e,t.numValues,r);c=new Ep(n,t.numValues);break}case ip.OFFSET:a=null!=i||null!=c?Vp(e,r,t,!1,i??c):Tp(e,r,t,!1);break;case ip.LENGTH:{const n=Ip(e,r,t);op.DICTIONARY===t.logicalStreamType.lengthType?s=n:op.SYMBOL===t.logicalStreamType.lengthType?l=n:h=n;break}case ip.DATA:{const n=e.subarray(r.get(),r.get()+t.byteLength);r.add(t.byteLength);const i=t.logicalStreamType.dictionaryType;sp.FSST===i?u=n:sp.SINGLE===i||sp.SHARED===i?o=n:sp.NONE===i&&(p=n);break}}}return function(t,e,r,n,i,s,a){return e?new xf(t,r,n,i,s,e,a):null}(t,u,a,s,o,l,i??c)??function(t,e,r,n,i){return e?i?new gf(t,r,n,e,i):new gf(t,r,n,e):null}(t,o,a,s,i??c)??function(t,e,r,n,i){if(!e||!r)return null;if(n)return i?new gf(t,n,e,r,i):new gf(t,n,e,r);if(i&&i.size()!==e.length-1){const n=new Int32Array(i.size());let s=0;for(let t=0;t<i.size();t++)n[t]=i.get(t)?s++:0;return new gf(t,n,e,r,i)}return i?new mf(t,e,r,i):new mf(t,e,r)}(t,h,p,a,i??c)}(s.name,e,r,s.nullable?t-1:t,a);case 0:return function(t,e,r,n,i){const s=kp(t,e),a=s.numValues,o=e.get(),l=bf(i)?function(t,e,r,n){const i=pf(t,Math.ceil(e/8),r),s=new Ep(i,e),a=n.size(),o=new Ep(new Uint8Array(a),a);let l=0;for(let t=0;t<n.size();t++){const e=!!n.get(t)&&s.get(l++);o.set(t,e);}return o.getBuffer()}(t,a,e,i):hf(t,a,e);e.set(o+s.byteLength);const u=new Ep(l,a);return new lf(r.name,u,i)}(e,r,s,0,l);case 6:case 5:return function(t,e,r,n,i){const s=kp(t,e),a=Cp(s,n,t,e),o=5===i.physicalType;if(a===lp.FLAT){const i=bf(n)?function(t,e,r,n,i){return function(t,e,r,n){switch(e.logicalLevelTechnique1){case rp.DELTA:return e.logicalLevelTechnique2===rp.RLE&&(t=bp(t,e.runs,e.numRleValues)),function(t,e){const r=new BigInt64Array(t.size());let n=0;t.get(0)?(r[0]=t.get(0)?e[0]>>1n^-(1n&e[0]):0n,n=1):r[0]=0n;let i=1;for(;i!=r.length;++i)r[i]=t.get(i)?r[i-1]+(e[n]>>1n^-(1n&e[n++])):r[i-1];return r}(n,t);case rp.RLE:return function(t,e,r,n){const i=e;return r?function(t,e,r){const n=new BigInt64Array(t.size());let i=0;for(let s=0;s<r;s++){const a=Number(e[s]);let o=e[s+r];o=o>>1n^-(1n&o);for(let e=i;e<i+a;e++)t.get(e)?n[e]=o:(n[e]=0n,i++);i+=a;}return n}(n,t,i.runs):function(t,e,r){const n=new BigInt64Array(t.size());let i=0;for(let s=0;s<r;s++){const a=Number(e[s]),o=e[s+r];for(let e=i;e<i+a;e++)t.get(e)?n[e]=o:(n[e]=0n,i++);i+=a;}return n}(n,t,i.runs)}(t,e,r,n);case rp.NONE:return t=r?function(t,e){const r=new BigInt64Array(t.size());let n=0,i=0;for(;i!=r.length;++i)if(t.get(i)){const t=e[n++];r[i]=t>>1n^-(1n&t);}else r[i]=0n;return r}(n,t):function(t,e){const r=new BigInt64Array(t.size());let n=0,i=0;for(;i!=r.length;++i)r[i]=t.get(i)?e[n++]:0n;return r}(n,t),t;default:throw new Error("The specified Logical level technique is not supported")}}(fp(t,e,r.numValues),r,n,i)}(t,e,s,o,n):Pp(t,e,s,o);return new Lp(r.name,i,n)}if(a===lp.SEQUENCE){const n=zp(t,e,s);return new Op(r.name,n[0],n[1],s.numRleValues)}{const i=Bp(t,e,s,o);return new cf(r.name,i,n)}}(e,r,s,l,i);case 7:return function(t,e,r,n){const i=kp(t,e),s=bf(n)?function(t,e,r,n){const i=e.get(),s=i+n*Float32Array.BYTES_PER_ELEMENT,a=new Uint8Array(t.subarray(i,s)).buffer,o=new Float32Array(a);e.set(s);const l=r.size(),u=new Float32Array(l);let c=0;for(let t=0;t<l;t++)u[t]=r.get(t)?o[c++]:0;return u}(t,e,n,i.numValues):function(t,e,r){const n=e.get(),i=n+r*Float32Array.BYTES_PER_ELEMENT,s=new Uint8Array(t.subarray(n,i)).buffer,a=new Float32Array(s);return e.set(i),a}(t,e,i.numValues);return new uf(r.name,s,n)}(e,r,s,l);case 8:return function(t,e,r,n){const i=kp(t,e),s=bf(n)?function(t,e,r,n){const i=e.get(),s=i+n*Float64Array.BYTES_PER_ELEMENT,a=new Uint8Array(t.subarray(i,s)).buffer,o=new Float64Array(a);e.set(s);const l=r.size(),u=new Float64Array(l);let c=0;for(let t=0;t<l;t++)u[t]=r.get(t)?o[c++]:0;return u}(t,e,n,i.numValues):function(t,e,r){const n=e.get(),i=n+r*Float64Array.BYTES_PER_ELEMENT,s=new Uint8Array(t.subarray(n,i)).buffer,a=new Float64Array(s);return e.set(i),a}(t,e,i.numValues);return new Kh(r.name,s,n)}(e,r,s,l);default:throw new Error(`The specified data type for the field is currently not supported: ${i}`)}}(n,t,e,i,r.scalarType,r):1!=n?null:function(t,e,r,n){let i=null,s=null,a=null,o=null,l=!1;for(;!l;){const r=kp(t,e);switch(r.physicalStreamType){case ip.LENGTH:op.DICTIONARY===r.logicalStreamType.lengthType?i=Ip(t,e,r):a=Ip(t,e,r);break;case ip.DATA:sp.SINGLE===r.logicalStreamType.dictionaryType||sp.SHARED===r.logicalStreamType.dictionaryType?(s=t.subarray(e.get(),e.get()+r.byteLength),l=!0):o=t.subarray(e.get(),e.get()+r.byteLength),e.add(r.byteLength);}}const u=r.complexType.children,c=[];let h=0;for(const l of u){const u=pp(t,e,1)[0];if(0==u)continue;const p=`${r.name}${"default"===l.name?"":":"+l.name}`;if(2!==u||"scalarField"!==l.type||9!==l.scalarField.physicalType)throw new Error("Currently only optional string fields are implemented for a struct.");const f=kp(t,e),d=hf(t,f.numValues,e),y=kp(t,e),m=y.decompressedCount!==n?Vp(t,e,y,!1,new Ep(d,f.numValues)):Tp(t,e,y,!1);c[h++]=o?new xf(p,m,i,s,a,o,new Ep(d,f.numValues)):new gf(p,m,i,s,new Ep(d,f.numValues));}return c}(t,e,r,i)}function bf(t){return t instanceof Ep}function wf(t){if("id"===t.name)return !1;if("scalarType"===t.type){const e=t.scalarType;if("physicalType"===e.type)switch(e.physicalType){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:default:return !1;case 9:return !0}else if("logicalType"===e.type)return !1}else if("complexType"===t.type){const e=t.complexType;if("physicalType"===e.type)switch(e.physicalType){case 0:case 1:return !0;default:return !1}}return console.warn("Unexpected column type in hasStreamCount",t),!1}const _f=new TextDecoder;function Sf(t,e){const r=pp(t,e,1)[0];if(0===r)return "";const n=e.get(),i=t.subarray(n,n+r);return e.add(r),_f.decode(i)}function Af(t,e){const r=pp(t,e,1)[0]>>>0,n=!!(4&r),i=!!(2&r),s=pp(t,e,1)[0]>>>0,a={};if(1&r&&(a.nullable=!0),i){const i={};if(n?(i.type="logicalType",i.logicalType=s):(i.type="physicalType",i.physicalType=s),8&r){const r=pp(t,e,1)[0]>>>0;i.children=new Array(r);for(let n=0;n<r;n++)i.children[n]=Af(t,e);}a.type="complexField",a.complexField=i;}else {const t={};n?(t.type="logicalType",t.logicalType=s):(t.type="physicalType",t.physicalType=s),a.type="scalarField",a.scalarField=t;}return a}function kf(t,e){const r=pp(t,e,1)[0]>>>0,n=function(t){switch(t){case 0:case 1:case 2:case 3:{const e={};e.nullable=!!(1&t),e.columnScope=0;const r={};return r.physicalType=t>1?6:4,r.type="physicalType",e.scalarType=r,e.type="scalarType",e}case 4:{const t={nullable:!1,columnScope:0},e={type:"physicalType",physicalType:0};return t.type="complexType",t.complexType=e,t}case 30:{const t={nullable:!1,columnScope:0},e={type:"physicalType",physicalType:1};return t.type="complexType",t.complexType=e,t}default:return function(t){let e=null;switch(t){case 10:case 11:e=0;break;case 12:case 13:e=1;break;case 14:case 15:e=2;break;case 16:case 17:e=3;break;case 18:case 19:e=4;break;case 20:case 21:e=5;break;case 22:case 23:e=6;break;case 24:case 25:e=7;break;case 26:case 27:e=8;break;case 28:case 29:e=9;break;default:return null}const r={};r.nullable=!!(1&t),r.columnScope=0;const n={type:"physicalType"};return n.physicalType=e,r.type="scalarType",r.scalarType=n,r}(t)}}(r);if(!n)throw new Error(`Unsupported column type code: ${r}`);if(function(t){return t>=10}(r)?n.name=Sf(t,e):r>=0&&r<=3?n.name="id":4===r&&(n.name="geometry"),function(t){return 30===t}(r)){const r=pp(t,e,1)[0]>>>0,i=n.complexType;i.children=new Array(r);for(let n=0;n<r;n++)i.children[n]=Af(t,e);}return n}function Ef(t,e){const r={featureTables:[]},n={};n.name=Sf(t,e);const i=pp(t,e,1)[0]>>>0,s=pp(t,e,1)[0]>>>0;n.columns=new Array(s);for(let r=0;r<s;r++)n.columns[r]=kf(t,e);return r.featureTables.push(n),[r,i]}function Tf(t,e,r,n,i,s,a=!1){const o=e.scalarType.physicalType,l=Cp(i,s,t,r);if(4===o)switch(l){case lp.FLAT:{const e=Tp(t,r,i,!1);return new Hh(n,e,s)}case lp.SEQUENCE:{const e=Dp(t,r,i);return new Jh(n,e[0],e[1],i.numRleValues)}case lp.CONST:{const e=Fp(t,r,i,!1);return new Qh(n,e,s)}}else switch(l){case lp.FLAT:{if(a){const e=function(t,e,r,n){const i=function(t,e,r){const n=new Float64Array(e);for(let i=0;i<e;i++)n[i]=dp(t,r);return n}(t,r.numValues,e);return function(t,e,r){switch(e.logicalLevelTechnique1){case rp.DELTA:return e.logicalLevelTechnique2===rp.RLE&&(t=wp(t,e.runs,e.numRleValues)),function(t){t[0]=t[0]%2==1?(t[0]+1)/-2:t[0]/2;const e=t.length/4*4;let r=1;if(e>=4)for(;r<e-4;r+=4){const e=t[r],n=t[r+1],i=t[r+2],s=t[r+3];t[r]=(e%2==1?(e+1)/-2:e/2)+t[r-1],t[r+1]=(n%2==1?(n+1)/-2:n/2)+t[r],t[r+2]=(i%2==1?(i+1)/-2:i/2)+t[r+1],t[r+3]=(s%2==1?(s+1)/-2:s/2)+t[r+2];}for(;r!=t.length;++r)t[r]=(t[r]%2==1?(t[r]+1)/-2:t[r]/2)+t[r-1];}(t),t;case rp.RLE:return function(t,e,r){return r?function(t,e,r){const n=new Float64Array(r);let i=0;for(let r=0;r<e;r++){const s=t[r];let a=t[r+e];a=a%2==1?(a+1)/-2:a/2,n.fill(a,i,i+s),i+=s;}return n}(t,e.runs,e.numRleValues):wp(t,e.runs,e.numRleValues)}(t,e,r);case rp.NONE:return t;default:throw new Error(`The specified Logical level technique is not supported: ${e.logicalLevelTechnique1}`)}}(i,r,n)}(t,r,i,!1);return new Kh(n,e,s)}const e=Pp(t,r,i,!1);return new Lp(n,e,s)}case lp.SEQUENCE:{const e=zp(t,r,i);return new Op(n,e[0],e[1],i.numRleValues)}case lp.CONST:{const e=Bp(t,r,i,!1);return new cf(n,e,s)}}throw new Error("Vector type not supported for id column.")}class If{constructor(t,e){var r;switch(this._featureData=t,this.properties=this._featureData.properties||{},null===(r=this._featureData.geometry)||void 0===r?void 0:r.type){case up.POINT:case up.MULTIPOINT:this.type=1;break;case up.LINESTRING:case up.MULTILINESTRING:this.type=2;break;case up.POLYGON:case up.MULTIPOLYGON:this.type=3;break;default:this.type=0;}this.extent=e,this.id=Number(this._featureData.id);}loadGeometry(){const t=[];for(const e of this._featureData.geometry.coordinates){const n=[];for(const t of e)n.push(new r(t.x,t.y));t.push(n);}return t}}class Mf{constructor(t){this.features=[],this.featureTable=t,this.name=t.name,this.extent=t.extent,this.version=2,this.features=t.getFeatures(),this.length=this.features.length;}feature(t){return new If(this.features[t],this.extent)}}class Ff{constructor(t){this.layers={};const e=function(t,e,r=!0){const n=new ep(0),i=[];for(;n.get()<t.length;){const e=pp(t,n,1)[0]>>>0,s=n.get()+e;if(s>t.length)throw new Error(`Block overruns tile: ${s} > ${t.length}`);if(1!=pp(t,n,1)[0]>>>0){n.set(s);continue}const a=Ef(t,n),o=a[1],l=a[0].featureTables[0];let u=null,c=null;const h=[];let p=0;for(const e of l.columns){const i=e.name;if("id"===i){let s=null;if(e.nullable){const e=kp(t,n),r=n.get(),i=hf(t,e.numValues,n);n.set(r+e.byteLength),s=new Ep(i,e.numValues);}const a=kp(t,n);p=a.decompressedCount,u=Tf(t,e,n,i,a,s??p,r);}else if("geometry"===i){const e=pp(t,n,1)[0];if(0===p){const e=n.get();p=kp(t,n).decompressedCount,n.set(e);}c=sf(t,e,n,p);}else {const r=wf(e)?pp(t,n,1)[0]:1;if(0===r&&"scalarType"===e.type)continue;const i=vf(t,n,e,r,p);if(i)if(Array.isArray(i))for(const t of i)h.push(t);else h.push(i);}}const f=new tp(l.name,c,u,h,o);i.push(f),n.set(s);}return i}(new Uint8Array(t));this.layers=e.reduce(((t,e)=>Object.assign(Object.assign({},t),{[e.name]:new Mf(e)})),{});}}class Df{constructor(t,e){this.feature=t,this.type=t.type,this.properties=t.tags?t.tags:{},this.extent=e,"id"in t&&("string"==typeof t.id?this.id=parseInt(t.id,10):"number"!=typeof t.id||isNaN(t.id)||(this.id=t.id));}loadGeometry(){const t=[],e=1===this.feature.type?[this.feature.geometry]:this.feature.geometry;for(const n of e){const e=[];for(const t of n)e.push(new r(t[0],t[1]));t.push(e);}return t}}const zf="_geojsonTileLayer";function Pf(t,e){e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);const r={keys:[],values:[],keycache:{},valuecache:{}};for(let n=0;n<t.length;n++)r.feature=t.feature(n),e.writeMessage(2,Bf,r);const n=r.keys;for(const t of n)e.writeStringField(3,t);const i=r.values;for(const t of i)e.writeMessage(4,Rf,t);}function Bf(t,e){if(!t.feature)return;const r=t.feature;void 0!==r.id&&e.writeVarintField(1,r.id),e.writeMessage(2,Vf,t),e.writeVarintField(3,r.type),e.writeMessage(4,Of,r);}function Vf(t,e){for(const r in t.feature?.properties){let n=t.feature.properties[r],i=t.keycache[r];if(null==n)continue;void 0===i&&(t.keys.push(r),i=t.keys.length-1,t.keycache[r]=i),e.writeVarint(i),"string"!=typeof n&&"boolean"!=typeof n&&"number"!=typeof n&&(n=JSON.stringify(n));const s=typeof n+":"+n;let a=t.valuecache[s];void 0===a&&(t.values.push(n),a=t.values.length-1,t.valuecache[s]=a),e.writeVarint(a);}}function Cf(t,e){return (e<<3)+(7&t)}function Lf(t){return t<<1^t>>31}function Of(t,e){const r=t.loadGeometry(),n=t.type;let i=0,s=0;for(const a of r){let r=1;1===n&&(r=a.length),e.writeVarint(Cf(1,r));const o=3===n?a.length-1:a.length;for(let t=0;t<o;t++){1===t&&1!==n&&e.writeVarint(Cf(2,o-1));const r=a[t].x-i,l=a[t].y-s;e.writeVarint(Lf(r)),e.writeVarint(Lf(l)),i+=r,s+=l;}3===t.type&&e.writeVarint(Cf(7,1));}}function Rf(t,e){const r=typeof t;"string"===r?e.writeStringField(1,t):"boolean"===r?e.writeBooleanField(7,t):"number"===r&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t));}class Nf{constructor(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new cs(M,16,0),this.grid3D=new cs(M,16,0),this.featureIndexArray=new Na,this.promoteId=e;}insert(t,e,r,n,i,s){const a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(r,n,i);const o=s?this.grid3D:this.grid;for(let t=0;t<e.length;t++){const r=e[t],n=[1/0,1/0,-1/0,-1/0];for(let t=0;t<r.length;t++){const e=r[t];n[0]=Math.min(n[0],e.x),n[1]=Math.min(n[1],e.y),n[2]=Math.max(n[2],e.x),n[3]=Math.max(n[3],e.y);}n[0]<M&&n[1]<M&&n[2]>=0&&n[3]>=0&&o.insert(a,n[0],n[1],n[2],n[3]);}}loadVTLayers(){return this.vtLayers||(this.vtLayers="mlt"!==this.encoding?new Vu(new Tc(this.rawTileData)).layers:new Ff(this.rawTileData).layers,this.sourceLayerCoder=new Gh(this.vtLayers?Object.keys(this.vtLayers).sort():[zf])),this.vtLayers}query(t,e,n,i){this.loadVTLayers();const s=t.params,a=M/t.tileSize/t.scale,o=fi(s.filter,s.globalState),l=t.queryGeometry,u=t.queryPadding*a,c=jh.fromPoints(l),h=this.grid.query(c.minX-u,c.minY-u,c.maxX+u,c.maxY+u),p=jh.fromPoints(t.cameraQueryGeometry).expandBy(u),f=this.grid3D.query(p.minX,p.minY,p.maxX,p.maxY,((e,n,i,s)=>function(t,e,n,i,s){for(const r of t)if(e<=r.x&&n<=r.y&&i>=r.x&&s>=r.y)return !0;const a=[new r(e,n),new r(e,s),new r(i,s),new r(i,n)];if(t.length>2)for(const e of a)if(tl(t,e))return !0;for(let e=0;e<t.length-1;e++)if(el(t[e],t[e+1],a))return !0;return !1}(t.cameraQueryGeometry,e-u,n-u,i+u,s+u)));for(const t of f)h.push(t);h.sort(Uf);const d={};let y;for(let r=0;r<h.length;r++){const u=h[r];if(u===y)continue;y=u;const c=this.featureIndexArray.get(u);let p=null;this.loadMatchingFeature(d,c.bucketIndex,c.sourceLayerIndex,c.featureIndex,o,s.layers,s.availableImages,e,n,i,((e,r,n)=>(p||(p=No(e)),r.queryIntersectsFeature({queryGeometry:l,feature:e,featureState:n,geometry:p,zoom:this.z,transform:t.transform,pixelsToTileUnits:a,pixelPosMatrix:t.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:t.getElevation}))));}return d}loadMatchingFeature(t,e,r,n,i,s,a,o,l,u,c){const h=this.bucketLayerIDs[e];if(s&&!h.some((t=>s.has(t))))return;const p=this.sourceLayerCoder.decode(r),f=this.vtLayers[p].feature(n);if(i.needGeometry){const t=$o(f,!0);if(!i.filter(new Ps(this.tileID.overscaledZ),t,this.tileID.canonical))return}else if(!i.filter(new Ps(this.tileID.overscaledZ),f))return;const d=this.getId(f,p);for(let e=0;e<h.length;e++){const r=h[e];if(s&&!s.has(r))continue;const i=o[r];if(!i)continue;let p={};d&&u&&(p=u.getState(i.sourceLayer||zf,d));const y=O({},l[r]);y.paint=$f(y.paint,i.paint,f,p,a),y.layout=$f(y.layout,i.layout,f,p,a);const m=!c||c(f,i,p);if(!m)continue;const g=new Xh(f,this.z,this.x,this.y,d);g.layer=y;let x=t[r];void 0===x&&(x=t[r]=[]),x.push({featureIndex:n,feature:g,intersectionZ:m});}}lookupSymbolFeatures(t,e,r,n,i,s,a,o){const l={};this.loadVTLayers();const u=fi(i.filterSpec,i.globalState);for(const i of t)this.loadMatchingFeature(l,r,n,i,u,s,a,o,e);return l}hasLayer(t){for(const e of this.bucketLayerIDs)for(const r of e)if(t===r)return !0;return !1}getId(t,e){var r;let n=t.id;return this.promoteId&&(n=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]],"boolean"==typeof n&&(n=Number(n)),void 0===n&&(null===(r=t.properties)||void 0===r?void 0:r.cluster)&&this.promoteId&&(n=Number(t.properties.cluster_id))),n}}function $f(t,e,r,n,i){return N(t,((t,s)=>{const a=e instanceof qs?e.get(s):null;return a&&a.evaluate?a.evaluate(r,n,i):a}))}function Uf(t,e){return e-t}function qf(t,e,n,i,s){const a=[];for(let o=0;o<t.length;o++){const l=t[o];let u;for(let t=0;t<l.length-1;t++){let o=l[t],c=l[t+1];o.x<e&&c.x<e||(o.x<e?o=new r(e,o.y+(e-o.x)/(c.x-o.x)*(c.y-o.y))._round():c.x<e&&(c=new r(e,o.y+(e-o.x)/(c.x-o.x)*(c.y-o.y))._round()),o.y<n&&c.y<n||(o.y<n?o=new r(o.x+(n-o.y)/(c.y-o.y)*(c.x-o.x),n)._round():c.y<n&&(c=new r(o.x+(n-o.y)/(c.y-o.y)*(c.x-o.x),n)._round()),o.x>=i&&c.x>=i||(o.x>=i?o=new r(i,o.y+(i-o.x)/(c.x-o.x)*(c.y-o.y))._round():c.x>=i&&(c=new r(i,o.y+(i-o.x)/(c.x-o.x)*(c.y-o.y))._round()),o.y>=s&&c.y>=s||(o.y>=s?o=new r(o.x+(s-o.y)/(c.y-o.y)*(c.x-o.x),s)._round():c.y>=s&&(c=new r(o.x+(s-o.y)/(c.y-o.y)*(c.x-o.x),s)._round()),u&&o.equals(u[u.length-1])||(u=[o],a.push(u)),u.push(c)))));}}return a}function jf(t,e,r,n,i){switch(e){case 1:return function(t,e,r,n){const i=[];for(const s of t)for(const t of s){const s=0===n?t.x:t.y;s>=e&&s<=r&&i.push([t]);}return i}(t,r,n,i);case 2:return Xf(t,r,n,i,!1);case 3:return Xf(t,r,n,i,!0)}return []}function Gf(t,e,n,i,s){const a=0===i?Yf:Zf;let o=[];const l=[];for(let r=0;r<t.length-1;r++){const u=t[r],c=t[r+1],h=0===i?u.x:u.y,p=0===i?c.x:c.y;let f=!1;h<e?p>e&&o.push(a(u,c,e)):h>n?p<n&&o.push(a(u,c,n)):o.push(u),p<e&&h>=e&&(o.push(a(u,c,e)),f=!0),p>n&&h<=n&&(o.push(a(u,c,n)),f=!0),!s&&f&&(l.push(o),o=[]);}const u=t.length-1,c=0===i?t[u].x:t[u].y;return c>=e&&c<=n&&o.push(t[u]),s&&o.length>0&&!o[0].equals(o[o.length-1])&&o.push(new r(o[0].x,o[0].y)),o.length>0&&l.push(o),l}function Xf(t,e,r,n,i){const s=[];for(const a of t){const t=Gf(a,e,r,n,i);t.length>0&&s.push(...t);}return s}function Yf(t,e,n){return new r(n,t.y+(n-t.x)/(e.x-t.x)*(e.y-t.y))}function Zf(t,e,n){return new r(t.x+(n-t.y)/(e.y-t.y)*(e.x-t.x),n)}ps("FeatureIndex",Nf,{omit:["rawTileData","sourceLayerCoder"]});class Hf extends r{constructor(t,e,r,n){super(t,e),this.angle=r,void 0!==n&&(this.segment=n);}clone(){return new Hf(this.x,this.y,this.angle,this.segment)}}function Kf(t,e,r,n,i){if(void 0===e.segment||0===r)return !0;let s=e,a=e.segment+1,o=0;for(;o>-r/2;){if(a--,a<0)return !1;o-=t[a].dist(s),s=t[a];}o+=t[a].dist(t[a+1]),a++;const l=[];let u=0;for(;o<r/2;){const e=t[a],r=t[a+1];if(!r)return !1;let s=t[a-1].angleTo(e)-e.angleTo(r);for(s=Math.abs((s+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:o,angleDelta:s}),u+=s;o-l[0].distance>n;)u-=l.shift().angleDelta;if(u>i)return !1;a++,o+=e.dist(r);}return !0}function Wf(t){let e=0;for(let r=0;r<t.length-1;r++)e+=t[r].dist(t[r+1]);return e}function Jf(t,e,r){return t?.6*e*r:0}function Qf(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function td(t,e,r,n,i,s){const a=Jf(r,i,s),o=Qf(r,n)*s;let l=0;const u=Wf(t)/2;for(let r=0;r<t.length-1;r++){const n=t[r],i=t[r+1],s=n.dist(i);if(l+s>u){const c=(u-l)/s,h=yr.number(n.x,i.x,c),p=yr.number(n.y,i.y,c),f=new Hf(h,p,i.angleTo(n),r);return f._round(),!a||Kf(t,f,o,a,e)?f:void 0}l+=s;}}function ed(t,e,r,n,i,s,a,o,l){const u=Jf(n,s,a),c=Qf(n,i),h=c*a,p=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;return e-h<e/4&&(e=h+e/4),rd(t,p?e/2*o%e:(c/2+2*s)*a*o%e,e,u,r,h,p,!1,l)}function rd(t,e,r,n,i,s,a,o,l){const u=s/2,c=Wf(t);let h=0,p=e-r,f=[];for(let e=0;e<t.length-1;e++){const a=t[e],o=t[e+1],d=a.dist(o),y=o.angleTo(a);for(;p+r<h+d;){p+=r;const m=(p-h)/d,g=yr.number(a.x,o.x,m),x=yr.number(a.y,o.y,m);if(g>=0&&g<l&&x>=0&&x<l&&p-u>=0&&p+u<=c){const r=new Hf(g,x,y,e);r._round(),n&&!Kf(t,r,s,n,i)||f.push(r);}}h+=d;}return o||f.length||a||(f=rd(t,h/2,r,n,i,s,a,!0,l)),f}function nd(t,e,n,i){const s=[],a=t.image,o=a.pixelRatio,l=a.paddedRect.w-2,u=a.paddedRect.h-2;let c={x1:t.left,y1:t.top,x2:t.right,y2:t.bottom};const h=a.stretchX||[[0,l]],p=a.stretchY||[[0,u]],f=(t,e)=>t+e[1]-e[0],d=h.reduce(f,0),y=p.reduce(f,0),m=l-d,g=u-y;let x=0,v=d,b=0,w=y,_=0,S=m,A=0,k=g;if(a.content&&i){const e=a.content,r=e[2]-e[0],n=e[3]-e[1];(a.textFitWidth||a.textFitHeight)&&(c=eh(t)),x=id(h,0,e[0]),b=id(p,0,e[1]),v=id(h,e[0],e[2]),w=id(p,e[1],e[3]),_=e[0]-x,A=e[1]-b,S=r-v,k=n-w;}const E=c.x1,T=c.y1,I=c.x2-E,M=c.y2-T,F=(t,i,s,l)=>{const u=ad(t.stretch-x,v,I,E),c=od(t.fixed-_,S,t.stretch,d),h=ad(i.stretch-b,w,M,T),p=od(i.fixed-A,k,i.stretch,y),f=ad(s.stretch-x,v,I,E),m=od(s.fixed-_,S,s.stretch,d),g=ad(l.stretch-b,w,M,T),F=od(l.fixed-A,k,l.stretch,y),D=new r(u,h),z=new r(f,h),P=new r(f,g),B=new r(u,g),V=new r(c/o,p/o),C=new r(m/o,F/o),L=e*Math.PI/180;if(L){const t=Math.sin(L),e=Math.cos(L),r=[e,-t,t,e];D._matMult(r),z._matMult(r),B._matMult(r),P._matMult(r);}const O=t.stretch+t.fixed,R=i.stretch+i.fixed;return {tl:D,tr:z,bl:B,br:P,tex:{x:a.paddedRect.x+1+O,y:a.paddedRect.y+1+R,w:s.stretch+s.fixed-O,h:l.stretch+l.fixed-R},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:V,pixelOffsetBR:C,minFontScaleX:S/o/I,minFontScaleY:k/o/M,isSDF:n}};if(i&&(a.stretchX||a.stretchY)){const t=sd(h,m,d),e=sd(p,g,y);for(let r=0;r<t.length-1;r++){const n=t[r],i=t[r+1];for(let t=0;t<e.length-1;t++)s.push(F(n,e[t],i,e[t+1]));}}else s.push(F({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:l+1},{fixed:0,stretch:u+1}));return s}function id(t,e,r){let n=0;for(const i of t)n+=Math.max(e,Math.min(r,i[1]))-Math.max(e,Math.min(r,i[0]));return n}function sd(t,e,r){const n=[{fixed:-1,stretch:0}];for(const[e,r]of t){const t=n[n.length-1];n.push({fixed:e-t.stretch,stretch:t.stretch}),n.push({fixed:e-t.stretch,stretch:t.stretch+(r-e)});}return n.push({fixed:e+1,stretch:r}),n}function ad(t,e,r,n){return t/e*r+n}function od(t,e,r,n){return t-e*r/n}ps("Anchor",Hf);class ld{constructor(t,e,n,i,s,a,o,l,u,c){var h;if(this.boxStartIndex=t.length,u){let t=a.top,e=a.bottom;const r=a.collisionPadding;r&&(t-=r[1],e+=r[3]);let n=e-t;n>0&&(n=Math.max(10,n),this.circleDiameter=n);}else {const u=(null===(h=a.image)||void 0===h?void 0:h.content)&&(a.image.textFitWidth||a.image.textFitHeight)?eh(a):{x1:a.left,y1:a.top,x2:a.right,y2:a.bottom};u.y1=u.y1*o-l[0],u.y2=u.y2*o+l[2],u.x1=u.x1*o-l[3],u.x2=u.x2*o+l[1];const p=a.collisionPadding;if(p&&(u.x1-=p[0]*o,u.y1-=p[1]*o,u.x2+=p[2]*o,u.y2+=p[3]*o),c){const t=new r(u.x1,u.y1),e=new r(u.x2,u.y1),n=new r(u.x1,u.y2),i=new r(u.x2,u.y2),s=c*Math.PI/180;t._rotate(s),e._rotate(s),n._rotate(s),i._rotate(s),u.x1=Math.min(t.x,e.x,n.x,i.x),u.x2=Math.max(t.x,e.x,n.x,i.x),u.y1=Math.min(t.y,e.y,n.y,i.y),u.y2=Math.max(t.y,e.y,n.y,i.y);}t.emplaceBack(e.x,e.y,u.x1,u.y1,u.x2,u.y2,n,i,s);}this.boxEndIndex=t.length;}}class ud{constructor(t=[],e=(t,e)=>t<e?-1:t>e?1:0){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let t=(this.length>>1)-1;t>=0;t--)this._down(t);}push(t){this.data.push(t),this._up(this.length++);}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return --this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:r}=this,n=e[t];for(;t>0;){const i=t-1>>1,s=e[i];if(r(n,s)>=0)break;e[t]=s,t=i;}e[t]=n;}_down(t){const{data:e,compare:r}=this,n=this.length>>1,i=e[t];for(;t<n;){let n=1+(t<<1);const s=n+1;if(s<this.length&&r(e[s],e[n])<0&&(n=s),r(e[n],i)>=0)break;e[t]=e[n],t=n;}e[t]=i;}}function cd(t,e=1,n=!1){const i=jh.fromPoints(t[0]),s=Math.min(i.width(),i.height());let a=s/2;const o=new ud([],hd),{minX:l,minY:u,maxX:c,maxY:h}=i;if(0===s)return new r(l,u);for(let e=l;e<c;e+=s)for(let r=u;r<h;r+=s)o.push(new pd(e+a,r+a,a,t));let p=function(t){let e=0,r=0,n=0;const i=t[0];for(let t=0,s=i.length,a=s-1;t<s;a=t++){const s=i[t],o=i[a],l=s.x*o.y-o.x*s.y;r+=(s.x+o.x)*l,n+=(s.y+o.y)*l,e+=3*l;}return new pd(r/e,n/e,0,t)}(t),f=o.length;for(;o.length;){const r=o.pop();(r.d>p.d||!p.d)&&(p=r,n&&console.log("found best %d after %d probes",Math.round(1e4*r.d)/1e4,f)),r.max-p.d<=e||(a=r.h/2,o.push(new pd(r.p.x-a,r.p.y-a,a,t)),o.push(new pd(r.p.x+a,r.p.y-a,a,t)),o.push(new pd(r.p.x-a,r.p.y+a,a,t)),o.push(new pd(r.p.x+a,r.p.y+a,a,t)),f+=4);}return n&&(console.log(`num probes: ${f}`),console.log(`best distance: ${p.d}`)),p.p}function hd(t,e){return e.max-t.max}function pd(t,e,n,i){this.p=new r(t,e),this.h=n,this.d=function(t,e){let r=!1,n=1/0;for(let i=0;i<e.length;i++){const s=e[i];for(let e=0,i=s.length,a=i-1;e<i;a=e++){const i=s[e],o=s[a];i.y>t.y!=o.y>t.y&&t.x<(o.x-i.x)*(t.y-i.y)/(o.y-i.y)+i.x&&(r=!r),n=Math.min(n,Jo(t,i,o));}}return (r?1:-1)*Math.sqrt(n)}(this.p,i),this.max=this.d+this.h*Math.SQRT2;}var fd;t.aP=void 0,(fd=t.aP||(t.aP={}))[fd.center=1]="center",fd[fd.left=2]="left",fd[fd.right=3]="right",fd[fd.top=4]="top",fd[fd.bottom=5]="bottom",fd[fd["top-left"]=6]="top-left",fd[fd["top-right"]=7]="top-right",fd[fd["bottom-left"]=8]="bottom-left",fd[fd["bottom-right"]=9]="bottom-right";const dd=Number.POSITIVE_INFINITY;function yd(t,e){return e[1]!==dd?function(t,e,r){let n=0,i=0;switch(e=Math.abs(e),r=Math.abs(r),t){case "top-right":case "top-left":case "top":i=r-7;break;case "bottom-right":case "bottom-left":case "bottom":i=7-r;}switch(t){case "top-right":case "bottom-right":case "right":n=-e;break;case "top-left":case "bottom-left":case "left":n=e;}return [n,i]}(t,e[0],e[1]):function(t,e){let r=0,n=0;e<0&&(e=0);const i=e/Math.SQRT2;switch(t){case "top-right":case "top-left":n=i-7;break;case "bottom-right":case "bottom-left":n=7-i;break;case "bottom":n=7-e;break;case "top":n=e-7;}switch(t){case "top-right":case "bottom-right":r=-i;break;case "top-left":case "bottom-left":r=i;break;case "left":r=e;break;case "right":r=-e;}return [r,n]}(t,e[0])}function md(t,e,r){var n;const i=t.layout,s=null===(n=i.get("text-variable-anchor-offset"))||void 0===n?void 0:n.evaluate(e,{},r);if(s){const t=s.values,e=[];for(let r=0;r<t.length;r+=2){const n=e[r]=t[r],i=t[r+1].map((t=>t*dc));n.startsWith("top")?i[1]-=7:n.startsWith("bottom")&&(i[1]+=7),e[r+1]=i;}return new Le(e)}const a=i.get("text-variable-anchor");if(a){let n;n=void 0!==t._unevaluatedLayout.getValue("text-radial-offset")?[i.get("text-radial-offset").evaluate(e,{},r)*dc,dd]:i.get("text-offset").evaluate(e,{},r).map((t=>t*dc));const s=[];for(const t of a)s.push(t,yd(t,n));return new Le(s)}return null}function gd(t){switch(t){case "right":case "top-right":case "bottom-right":return "right";case "left":case "top-left":case "bottom-left":return "left"}return "center"}function xd(e,r,n,i,s,a,o,l,u,c,h,p){let f=a.textMaxSize.evaluate(r,{});void 0===f&&(f=o);const d=e.layers[0].layout,y=d.get("icon-offset").evaluate(r,{},h),m=bd(n.horizontal),g=o/24,x=e.tilePixelRatio*g,v=e.tilePixelRatio*f/24,b=e.tilePixelRatio*l,w=e.tilePixelRatio*d.get("symbol-spacing"),_=d.get("text-padding")*e.tilePixelRatio,S=function(t,e,r,n=1){const i=t.get("icon-padding").evaluate(e,{},r),s=i&&i.values;return [s[0]*n,s[1]*n,s[2]*n,s[3]*n]}(d,r,h,e.tilePixelRatio),A=d.get("text-max-angle")/180*Math.PI,k="viewport"!==d.get("text-rotation-alignment")&&"point"!==d.get("symbol-placement"),E="map"===d.get("icon-rotation-alignment")&&"point"!==d.get("symbol-placement"),T=d.get("symbol-placement"),I=w/2,F=d.get("icon-text-fit");let D;i&&"none"!==F&&(e.allowVerticalPlacement&&n.vertical&&(D=rh(i,n.vertical,F,d.get("icon-text-fit-padding"),y,g)),m&&(i=rh(i,m,F,d.get("icon-text-fit-padding"),y,g)));const z=h?p.line.getGranularityForZoomLevel(h.z):1,P=(l,p)=>{p.x<0||p.x>=M||p.y<0||p.y>=M||function(e,r,n,i,s,a,o,l,u,c,h,p,f,d,y,m,g,x,v,b,w,_,S,A,k){const E=e.addToLineVertexArray(r,n);let T,I,M,F,D=0,z=0,P=0,B=0,V=-1,C=-1;const L={};let O=mo("");if(e.allowVerticalPlacement&&i.vertical){const t=l.layout.get("text-rotate").evaluate(w,{},A)+90;M=new ld(u,r,c,h,p,i.vertical,f,d,y,t),o&&(F=new ld(u,r,c,h,p,o,g,x,y,t));}if(s){const n=l.layout.get("icon-rotate").evaluate(w,{}),i="none"!==l.layout.get("icon-text-fit"),a=nd(s,n,S,i),f=o?nd(o,n,S,i):void 0;I=new ld(u,r,c,h,p,s,g,x,!1,n),D=4*a.length;const d=e.iconSizeData;let y=null;"source"===d.kind?(y=[nh*l.layout.get("icon-size").evaluate(w,{})],y[0]>ih&&j(`${e.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===d.kind&&(y=[nh*_.compositeIconSizes[0].evaluate(w,{},A),nh*_.compositeIconSizes[1].evaluate(w,{},A)],(y[0]>ih||y[1]>ih)&&j(`${e.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),e.addSymbols(e.icon,a,y,b,v,w,t.az.none,r,E.lineStartIndex,E.lineLength,-1,A),V=e.icon.placedSymbolArray.length-1,f&&(z=4*f.length,e.addSymbols(e.icon,f,y,b,v,w,t.az.vertical,r,E.lineStartIndex,E.lineLength,-1,A),C=e.icon.placedSymbolArray.length-1);}const R=Object.keys(i.horizontal);for(const n of R){const s=i.horizontal[n];if(!T){O=mo(s.text);const t=l.layout.get("text-rotate").evaluate(w,{},A);T=new ld(u,r,c,h,p,s,f,d,y,t);}const o=1===s.positionedLines.length;if(P+=vd(e,r,s,a,l,y,w,m,E,i.vertical?t.az.horizontal:t.az.horizontalOnly,o?R:[n],L,V,_,A),o)break}i.vertical&&(B+=vd(e,r,i.vertical,a,l,y,w,m,E,t.az.vertical,["vertical"],L,C,_,A));const N=T?T.boxStartIndex:e.collisionBoxArray.length,$=T?T.boxEndIndex:e.collisionBoxArray.length,U=M?M.boxStartIndex:e.collisionBoxArray.length,q=M?M.boxEndIndex:e.collisionBoxArray.length,G=I?I.boxStartIndex:e.collisionBoxArray.length,X=I?I.boxEndIndex:e.collisionBoxArray.length,Y=F?F.boxStartIndex:e.collisionBoxArray.length,Z=F?F.boxEndIndex:e.collisionBoxArray.length;let H=-1;const K=(t,e)=>t&&t.circleDiameter?Math.max(t.circleDiameter,e):e;H=K(T,H),H=K(M,H),H=K(I,H),H=K(F,H);const W=H>-1?1:0;W&&(H*=k/dc),e.glyphOffsetArray.length>=fh.MAX_GLYPHS&&j("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==w.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,w.sortKey);const J=md(l,w,A),[Q,tt]=function(e,r){const n=e.length,i=null==r?void 0:r.values;if((null==i?void 0:i.length)>0)for(let r=0;r<i.length;r+=2){const n=i[r+1];e.emplaceBack(t.aP[i[r]],n[0],n[1]);}return [n,e.length]}(e.textAnchorOffsets,J);e.symbolInstances.emplaceBack(r.x,r.y,L.right>=0?L.right:-1,L.center>=0?L.center:-1,L.left>=0?L.left:-1,L.vertical||-1,V,C,O,N,$,U,q,G,X,Y,Z,c,P,B,D,z,W,0,f,H,Q,tt);}(e,p,l,n,i,s,D,e.layers[0],e.collisionBoxArray,r.index,r.sourceLayerIndex,e.index,x,[_,_,_,_],k,u,b,S,E,y,r,a,c,h,o);};if("line"===T)for(const t of qf(r.geometry,0,0,M,M)){const r=gu(t,z),s=ed(r,w,A,n.vertical||m,i,24,v,e.overscaling,M);for(const t of s)m&&wd(e,m.text,I,t)||P(r,t);}else if("line-center"===T){for(const t of r.geometry)if(t.length>1){const e=gu(t,z),r=td(e,A,n.vertical||m,i,24,v);r&&P(e,r);}}else if("Polygon"===r.type)for(const t of tn(r.geometry,0)){const e=cd(t,16);P(gu(t[0],z,!0),new Hf(e.x,e.y,0));}else if("LineString"===r.type)for(const t of r.geometry){const e=gu(t,z);P(e,new Hf(e[0].x,e[0].y,0));}else if("Point"===r.type)for(const t of r.geometry)for(const e of t)P([e],new Hf(e.x,e.y,0));}function vd(t,e,n,i,s,a,o,l,u,c,h,p,f,d,y){const m=function(t,e,n,i,s,a,o,l){const u=i.layout.get("text-rotate").evaluate(a,{})*Math.PI/180,c=[];for(const t of e.positionedLines)for(const i of t.positionedGlyphs){if(!i.rect)continue;const a=i.rect||{};let h=4,p=!0,f=1,d=0;const y=(s||l)&&i.vertical,m=i.metrics.advance*i.scale/2;if(l&&e.verticalizable&&(d=t.lineOffset/2-(i.imageName?-(dc-i.metrics.width*i.scale)/2:(i.scale-1)*dc)),i.imageName){const t=o[i.imageName];p=t.sdf,f=t.pixelRatio,h=1/f;}const g=s?[i.x+m,i.y]:[0,0];let x=s?[0,0]:[i.x+m+n[0],i.y+n[1]-d],v=[0,0];y&&(v=x,x=[0,0]);const b=i.metrics.isDoubleResolution?2:1,w=(i.metrics.left-h)*i.scale-m+x[0],_=(-i.metrics.top-h)*i.scale+x[1],S=w+a.w/b*i.scale/f,A=_+a.h/b*i.scale/f,k=new r(w,_),E=new r(S,_),T=new r(w,A),I=new r(S,A);if(y){const t=new r(-m,m- -17),e=-Math.PI/2,n=12-m,s=new r(22-n,-(i.imageName?n:0)),a=new r(...v);k._rotateAround(e,t)._add(s)._add(a),E._rotateAround(e,t)._add(s)._add(a),T._rotateAround(e,t)._add(s)._add(a),I._rotateAround(e,t)._add(s)._add(a);}if(u){const t=Math.sin(u),e=Math.cos(u),r=[e,-t,t,e];k._matMult(r),E._matMult(r),T._matMult(r),I._matMult(r);}const M=new r(0,0),F=new r(0,0);c.push({tl:k,tr:E,bl:T,br:I,tex:a,writingMode:e.writingMode,glyphOffset:g,sectionIndex:i.sectionIndex,isSDF:p,pixelOffsetTL:M,pixelOffsetBR:F,minFontScaleX:0,minFontScaleY:0});}return c}(0,n,l,s,a,o,i,t.allowVerticalPlacement),g=t.textSizeData;let x=null;"source"===g.kind?(x=[nh*s.layout.get("text-size").evaluate(o,{})],x[0]>ih&&j(`${t.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===g.kind&&(x=[nh*d.compositeTextSizes[0].evaluate(o,{},y),nh*d.compositeTextSizes[1].evaluate(o,{},y)],(x[0]>ih||x[1]>ih)&&j(`${t.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),t.addSymbols(t.text,m,x,l,a,o,c,e,u.lineStartIndex,u.lineLength,f,y);for(const e of h)p[e]=t.text.placedSymbolArray.length-1;return 4*m.length}function bd(t){for(const e in t)return t[e];return null}function wd(t,e,r,n){const i=t.compareText;if(e in i){const t=i[e];for(let e=t.length-1;e>=0;e--)if(n.dist(t[e])<r)return !0}else i[e]=[];return i[e].push(n),!1}const _d=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Sd{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[e,r]=new Uint8Array(t,0,2);if(219!==e)throw new Error("Data does not appear to be in a KDBush format.");const n=r>>4;if(1!==n)throw new Error(`Got v${n} data when expected v1.`);const i=_d[15&r];if(!i)throw new Error("Unrecognized array type.");const[s]=new Uint16Array(t,2,1),[a]=new Uint32Array(t,4,1);return new Sd(a,s,i,t)}constructor(t,e=64,r=Float64Array,n){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+e,2),65535),this.ArrayType=r,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const i=_d.indexOf(this.ArrayType),s=2*t*this.ArrayType.BYTES_PER_ELEMENT,a=t*this.IndexArrayType.BYTES_PER_ELEMENT,o=(8-a%8)%8;if(i<0)throw new Error(`Unexpected typed array class: ${r}.`);n&&n instanceof ArrayBuffer?(this.data=n,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+a+o,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+s+a+o),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+a+o,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+i]),new Uint16Array(this.data,2,1)[0]=e,new Uint32Array(this.data,4,1)[0]=t);}add(t,e){const r=this._pos>>1;return this.ids[r]=r,this.coords[this._pos++]=t,this.coords[this._pos++]=e,r}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return Ad(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,e,r,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:s,nodeSize:a}=this,o=[0,i.length-1,0],l=[];for(;o.length;){const u=o.pop()||0,c=o.pop()||0,h=o.pop()||0;if(c-h<=a){for(let a=h;a<=c;a++){const o=s[2*a],u=s[2*a+1];o>=t&&o<=r&&u>=e&&u<=n&&l.push(i[a]);}continue}const p=h+c>>1,f=s[2*p],d=s[2*p+1];f>=t&&f<=r&&d>=e&&d<=n&&l.push(i[p]),(0===u?t<=f:e<=d)&&(o.push(h),o.push(p-1),o.push(1-u)),(0===u?r>=f:n>=d)&&(o.push(p+1),o.push(c),o.push(1-u));}return l}within(t,e,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:n,coords:i,nodeSize:s}=this,a=[0,n.length-1,0],o=[],l=r*r;for(;a.length;){const u=a.pop()||0,c=a.pop()||0,h=a.pop()||0;if(c-h<=s){for(let r=h;r<=c;r++)Id(i[2*r],i[2*r+1],t,e)<=l&&o.push(n[r]);continue}const p=h+c>>1,f=i[2*p],d=i[2*p+1];Id(f,d,t,e)<=l&&o.push(n[p]),(0===u?t-r<=f:e-r<=d)&&(a.push(h),a.push(p-1),a.push(1-u)),(0===u?t+r>=f:e+r>=d)&&(a.push(p+1),a.push(c),a.push(1-u));}return o}}function Ad(t,e,r,n,i,s){if(i-n<=r)return;const a=n+i>>1;kd(t,e,a,n,i,s),Ad(t,e,r,n,a-1,1-s),Ad(t,e,r,a+1,i,1-s);}function kd(t,e,r,n,i,s){for(;i>n;){if(i-n>600){const a=i-n+1,o=r-n+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(o-a/2<0?-1:1);kd(t,e,r,Math.max(n,Math.floor(r-o*u/a+c)),Math.min(i,Math.floor(r+(a-o)*u/a+c)),s);}const a=e[2*r+s];let o=n,l=i;for(Ed(t,e,n,r),e[2*i+s]>a&&Ed(t,e,n,i);o<l;){for(Ed(t,e,o,l),o++,l--;e[2*o+s]<a;)o++;for(;e[2*l+s]>a;)l--;}e[2*n+s]===a?Ed(t,e,n,l):(l++,Ed(t,e,l,i)),l<=r&&(n=l+1),r<=l&&(i=l-1);}}function Ed(t,e,r,n){Td(t,r,n),Td(e,2*r,2*n),Td(e,2*r+1,2*n+1);}function Td(t,e,r){const n=t[e];t[e]=t[r],t[r]=n;}function Id(t,e,r,n){const i=t-r,s=e-n;return i*i+s*s}var Md;t.cH=void 0,(Md=t.cH||(t.cH={})).create="create",Md.load="load",Md.fullLoad="fullLoad";let Fd=null,Dd=[];const zd=1e3/60,Pd="loadTime",Bd="fullLoadTime",Vd={mark(t){performance.mark(t);},frame(t){const e=t;null!=Fd&&Dd.push(e-Fd),Fd=e;},clearMetrics(){Fd=null,Dd=[],performance.clearMeasures(Pd),performance.clearMeasures(Bd);for(const e in t.cH)performance.clearMarks(t.cH[e]);},getPerformanceMetrics(){performance.measure(Pd,t.cH.create,t.cH.load),performance.measure(Bd,t.cH.create,t.cH.fullLoad);const e=performance.getEntriesByName(Pd)[0].duration,r=performance.getEntriesByName(Bd)[0].duration,n=Dd.length,i=1/(Dd.reduce(((t,e)=>t+e),0)/n/1e3),s=Dd.filter((t=>t>zd)).reduce(((t,e)=>t+(e-zd)/zd),0);return {loadTime:e,fullLoadTime:r,fps:i,percentDroppedFrames:s/(n+s)*100,totalFrames:n}}};t.$=c,t.A=f,t.B=us,t.C=is,t.D=js,t.E=xt,t.F=function([t,e,r]){return e+=90,e*=Math.PI/180,r*=Math.PI/180,{x:t*Math.cos(e)*Math.sin(r),y:t*Math.sin(e)*Math.sin(r),z:t*Math.cos(r)}},t.G=yr,t.H=Ps,t.I=qc,t.J=as,t.K=function(t){if(null==Y){const e=t.navigator?t.navigator.userAgent:null;Y=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")));}return Y},t.L=class{constructor(t,e){this.target=t,this.mapId=e,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Sh((()=>this.process())),this.subscription=Q(this.target,"message",(t=>this.receive(t)),!1),this.globalScope=X(self)?t:window;}registerMessageHandler(t,e){this.messageHandlers[t]=e;}unregisterMessageHandler(t){delete this.messageHandlers[t];}sendAsync(t,e){return new Promise(((r,n)=>{const i=Math.round(1e18*Math.random()).toString(36).substring(0,10),s=e?Q(e.signal,"abort",(()=>{null==s||s.unsubscribe(),delete this.resolveRejects[i];const e={id:i,type:"<cancel>",origin:location.origin,targetMapId:t.targetMapId,sourceMapId:this.mapId};this.target.postMessage(e);}),Ah):null;this.resolveRejects[i]={resolve:t=>{null==s||s.unsubscribe(),r(t);},reject:t=>{null==s||s.unsubscribe(),n(t);}};const a=[],o=Object.assign(Object.assign({},t),{id:i,sourceMapId:this.mapId,origin:location.origin,data:ms(t.data,a)});this.target.postMessage(o,{transfer:a});}))}receive(t){const e=t.data,r=e.id;if(!("file://"!==e.origin&&"file://"!==location.origin&&"resource://android"!==e.origin&&"resource://android"!==location.origin&&e.origin!==location.origin||e.targetMapId&&this.mapId!==e.targetMapId)){if("<cancel>"===e.type){delete this.tasks[r];const t=this.abortControllers[r];return delete this.abortControllers[r],void(t&&t.abort())}if(X(self)||e.mustQueue)return this.tasks[r]=e,this.taskQueue.push(r),void this.invoker.trigger();this.processTask(r,e);}}process(){if(0===this.taskQueue.length)return;const t=this.taskQueue.shift(),e=this.tasks[t];delete this.tasks[t],this.taskQueue.length>0&&this.invoker.trigger(),e&&this.processTask(t,e);}processTask(t,r){return e(this,void 0,void 0,(function*(){if("<response>"===r.type){const e=this.resolveRejects[t];if(delete this.resolveRejects[t],!e)return;return void(r.error?e.reject(gs(r.error)):e.resolve(gs(r.data)))}if(!this.messageHandlers[r.type])return void this.completeTask(t,new Error(`Could not find a registered handler for ${r.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const e=gs(r.data),n=new AbortController;this.abortControllers[t]=n;try{const i=yield this.messageHandlers[r.type](r.sourceMapId,e,n);this.completeTask(t,null,i);}catch(e){this.completeTask(t,e);}}))}completeTask(t,e,r){const n=[];delete this.abortControllers[t];const i={id:t,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:e?ms(e):null,data:ms(r,n)};this.target.postMessage(i,{transfer:n});}remove(){this.invoker.remove(),this.subscription.unsubscribe();}},t.M=ut,t.N=function(){var t=new f(16);return f!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.O=function(t,e,r){var n,i,s,a,o,l,u,c,h,p,f,d,y=r[0],m=r[1],g=r[2];return e===t?(t[12]=e[0]*y+e[4]*m+e[8]*g+e[12],t[13]=e[1]*y+e[5]*m+e[9]*g+e[13],t[14]=e[2]*y+e[6]*m+e[10]*g+e[14],t[15]=e[3]*y+e[7]*m+e[11]*g+e[15]):(i=e[1],s=e[2],a=e[3],o=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=e[9],f=e[10],d=e[11],t[0]=n=e[0],t[1]=i,t[2]=s,t[3]=a,t[4]=o,t[5]=l,t[6]=u,t[7]=c,t[8]=h,t[9]=p,t[10]=f,t[11]=d,t[12]=n*y+o*m+h*g+e[12],t[13]=i*y+l*m+p*g+e[13],t[14]=s*y+u*m+f*g+e[14],t[15]=a*y+c*m+d*g+e[15]),t},t.P=r,t.Q=function(t,e,r){var n=r[0],i=r[1],s=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.R=Sl,t.S=function(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],l=e[5],u=e[6],c=e[7],h=e[8],p=e[9],f=e[10],d=e[11],y=e[12],m=e[13],g=e[14],x=e[15],v=r[0],b=r[1],w=r[2],_=r[3];return t[0]=v*n+b*o+w*h+_*y,t[1]=v*i+b*l+w*p+_*m,t[2]=v*s+b*u+w*f+_*g,t[3]=v*a+b*c+w*d+_*x,t[4]=(v=r[4])*n+(b=r[5])*o+(w=r[6])*h+(_=r[7])*y,t[5]=v*i+b*l+w*p+_*m,t[6]=v*s+b*u+w*f+_*g,t[7]=v*a+b*c+w*d+_*x,t[8]=(v=r[8])*n+(b=r[9])*o+(w=r[10])*h+(_=r[11])*y,t[9]=v*i+b*l+w*p+_*m,t[10]=v*s+b*u+w*f+_*g,t[11]=v*a+b*c+w*d+_*x,t[12]=(v=r[12])*n+(b=r[13])*o+(w=r[14])*h+(_=r[15])*y,t[13]=v*i+b*l+w*p+_*m,t[14]=v*s+b*u+w*f+_*g,t[15]=v*a+b*c+w*d+_*x,t},t.T=zl,t.U=function(t,e){const r={};for(let n=0;n<e.length;n++){const i=e[n];i in t&&(r[i]=t[i]);}return r},t.V=Eh,t.W=L,t.X=Fh,t.Y=Mh,t.Z=at,t._=e,t.a=st,t.a$=b,t.a0=h,t.a1=K,t.a2=Rh,t.a3=zh,t.a4=Ph,t.a5=M,t.a6=function(t,e,r){if(!t)return e||{};if(!e)return t||{};const n=qh(t),i=qh(e);!function(t,e){e.removeAll&&(t.add.clear(),t.update.clear(),t.remove.clear(),e.remove.clear());for(const r of e.remove)t.add.delete(r),t.update.delete(r);for(const[r,n]of e.update){const i=t.update.get(r);i&&(e.update.set(r,Uh(i,n)),t.update.delete(r));}}(n,i);const s={};if((n.removeAll||i.removeAll)&&(s.removeAll=!0),s.remove=new Set([...n.remove,...i.remove]),s.add=new Map([...n.add,...i.add]),s.update=new Map([...n.update,...i.update]),s.remove.size&&s.add.size)for(const t of s.add.keys())s.remove.delete(t);return function(t){const e={};return t.removeAll&&(e.removeAll=t.removeAll),t.remove&&(e.remove=Array.from(t.remove)),t.add&&(e.add=Array.from(t.add.values())),t.update&&(e.update=Array.from(t.update.values())),e}(s)},t.a7=function(t,e){const r=new Map;if(null==t)return r;if(null==t.type)return r;if("Feature"===t.type){const n=$h(t,e);if(null==n)return;return r.set(n,t),r}if("FeatureCollection"===t.type){const n=new Set;for(const i of t.features){const t=$h(i,e);if(null==t)return;if(n.has(t))return;n.add(t),r.set(t,i);}return r}},t.a8=function(t,e,r){var n,i;const s=[];if(e.removeAll)t.clear();else if(e.remove)for(const r of e.remove){const e=t.get(r);e&&(s.push(e.geometry),t.delete(r));}if(e.add)for(const n of e.add){const e=$h(n,r);if(null==e)continue;const i=t.get(e);i&&s.push(i.geometry),s.push(n.geometry),t.set(e,n);}if(e.update)for(const r of e.update){const e=t.get(r.id);if(!e)continue;const a=!!r.newGeometry,o=r.removeAllProperties||(null===(n=r.removeProperties)||void 0===n?void 0:n.length)>0||(null===(i=r.addOrUpdateProperties)||void 0===i?void 0:i.length)>0;if(!a&&!o)continue;s.push(e.geometry);const l=Object.assign({},e);if(t.set(r.id,l),a&&(s.push(r.newGeometry),l.geometry=r.newGeometry),o){if(l.properties=r.removeAllProperties?{}:Object.assign({},l.properties||{}),r.removeProperties)for(const t of r.removeProperties)delete l.properties[t];if(r.addOrUpdateProperties)for(const{key:t,value:e}of r.addOrUpdateProperties)l.properties[t]=e;}}return s},t.a9=Vh,t.aA=function(t,{uSize:e,uSizeT:r},{lowerSize:n,upperSize:i}){return "source"===t.kind?n/nh:"composite"===t.kind?yr.number(n/nh,i/nh,r):e},t.aB=function(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8],h=e[9],p=e[10],f=e[11],d=e[12],y=e[13],m=e[14],g=e[15],x=r*o-n*a,v=r*l-i*a,b=r*u-s*a,w=n*l-i*o,_=n*u-s*o,S=i*u-s*l,A=c*y-h*d,k=c*m-p*d,E=c*g-f*d,T=h*m-p*y,I=h*g-f*y,M=p*g-f*m,F=x*M-v*I+b*T+w*E-_*k+S*A;return F?(t[0]=(o*M-l*I+u*T)*(F=1/F),t[1]=(i*I-n*M-s*T)*F,t[2]=(y*S-m*_+g*w)*F,t[3]=(p*_-h*S-f*w)*F,t[4]=(l*E-a*M-u*k)*F,t[5]=(r*M-i*E+s*k)*F,t[6]=(m*b-d*S-g*v)*F,t[7]=(c*S-p*b+f*v)*F,t[8]=(a*I-o*E+u*A)*F,t[9]=(n*E-r*I-s*A)*F,t[10]=(d*_-y*b+g*x)*F,t[11]=(h*b-c*_-f*x)*F,t[12]=(o*k-a*T-l*A)*F,t[13]=(r*T-n*k+i*A)*F,t[14]=(y*v-d*w-m*x)*F,t[15]=(c*w-h*v+p*x)*F,t):null},t.aC=T,t.aD=function(t){var e=t[0],r=t[1];return Math.sqrt(e*e+r*r)},t.aE=function(t){return t[0]=0,t[1]=0,t},t.aF=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t},t.aG=uh,t.aH=A,t.aI=function(t,e,n,i){const s=e.y-t.y,a=e.x-t.x,o=i.y-n.y,l=i.x-n.x,u=o*a-l*s;if(0===u)return null;const c=(l*(t.y-n.y)-o*(t.x-n.x))/u;return new r(t.x+c*a,t.y+c*s)},t.aJ=qf,t.aK=Go,t.aL=function(t){let e=1/0,r=1/0,n=-1/0,i=-1/0;for(const s of t)e=Math.min(e,s.x),r=Math.min(r,s.y),n=Math.max(n,s.x),i=Math.max(i,s.y);return [e,r,n,i]},t.aM=dc,t.aN=F,t.aO=function(t,e,r,n,i=!1){if(!r[0]&&!r[1])return [0,0];const s=i?"map"===n?-t.bearingInRadians:0:"viewport"===n?t.bearingInRadians:0;if(s){const t=Math.sin(s),e=Math.cos(s);r=[r[0]*e-r[1]*t,r[0]*t+r[1]*e];}return [i?r[0]:F(e,r[0],t.zoom),i?r[1]:F(e,r[1],t.zoom)]},t.aQ=ah,t.aR=gd,t.aS=Yc,t.aT=Sd,t.aU=na,t.aV=pu,t.aW=$a,t.aX=io,t.aY=to,t.aZ=et,t.a_=Bh,t.aa=jh,t.ab=25,t.ac=Lh,t.ad=t=>{const e=window.document.createElement("video");return e.muted=!0,new Promise((r=>{e.onloadstart=()=>{r(e);};for(const r of t){const t=window.document.createElement("source");ft(r)||(e.crossOrigin="Anonymous"),t.src=r,e.appendChild(t);}}))},t.ae=Dt,t.af=function(){return R++},t.ag=Fa,t.ah=fh,t.ai=zf,t.aj=fi,t.ak=$o,t.al=Xh,t.am=function(t){const e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((t,r,n,i)=>{const s=n||i;return e[r]=!s||s.toLowerCase(),""})),e["max-age"]){const t=parseInt(e["max-age"],10);isNaN(t)?delete e["max-age"]:e["max-age"]=t;}return e},t.an=C,t.ao=85.051129,t.ap=tt,t.aq=function(t){return Math.pow(2,t)},t.ar=y,t.as=Dh,t.at=function(t){return Math.log(t)/Math.LN2},t.au=function(t){var e=t[0],r=t[1];return e*e+r*r},t.av=function(t){if(!t.length)return new Set;const e=Math.max(...t.map((t=>t.canonical.z)));let r=1/0,n=-1/0,i=1/0,s=-1/0;const a=[];for(const o of t){const{x:t,y:l,z:u}=o.canonical,c=Math.pow(2,e-u),h=t*c,p=l*c;a.push({id:o,x:h,y:p}),h<r&&(r=h),h>n&&(n=h),p<i&&(i=p),p>s&&(s=p);}const o=new Set;for(const t of a)t.x!==r&&t.x!==n&&t.y!==i&&t.y!==s||o.add(t.id);return o},t.aw=function(t,e){const r=Math.abs(2*t.wrap)-+(t.wrap<0),n=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||n-r||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x},t.ax=class{constructor(t,e){this.max=t,this.onRemove=e,this.reset();}reset(){for(const t in this.data)for(const e of this.data[t])e.timeout&&clearTimeout(e.timeout),this.onRemove(e.value);return this.data={},this.order=[],this}add(t,e,r){const n=t.wrapped().key;void 0===this.data[n]&&(this.data[n]=[]);const i={value:e,timeout:void 0};if(void 0!==r&&(i.timeout=setTimeout((()=>{this.remove(t,i);}),r)),this.data[n].push(i),this.order.push(n),this.order.length>this.max){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t);}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value}getByKey(t){const e=this.data[t];return e?e[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,e){if(!this.has(t))return this;const r=t.wrapped().key,n=void 0===e?0:this.data[r].indexOf(e),i=this.data[r][n];return this.data[r].splice(n,1),i.timeout&&clearTimeout(i.timeout),0===this.data[r].length&&delete this.data[r],this.onRemove(i.value),this.order.splice(this.order.indexOf(r),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t);}return this}filter(t){const e=[];for(const r in this.data)for(const n of this.data[r])t(n.value)||e.push(n);for(const t of e)this.remove(t.value.tileID,t);}},t.ay=function(t,e){let r=0,n=0;if("constant"===t.kind)n=t.layoutSize;else if("source"!==t.kind){const{interpolationType:i,minZoom:s,maxZoom:a}=t,o=i?C(fr.interpolationFactor(i,e,s,a),0,1):0;"camera"===t.kind?n=yr.number(t.minSize,t.maxSize,o):r=o;}return {uSizeT:r,uSize:n}},t.b=Z,t.b$=Ao,t.b0=v,t.b1=function(t){var e=new f(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},t.b2=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t},t.b3=function(t,e){var r=e[0],n=e[1],i=e[2],s=r*r+n*n+i*i;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t},t.b4=w,t.b5=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},t.b6=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t},t.b7=g,t.b8=function(t,e,r){const n=e[0]*r[0]+e[1]*r[1]+e[2]*r[2];return 0===n?null:(-(t[0]*r[0]+t[1]*r[1]+t[2]*r[2])-r[3])/n},t.b9=S,t.bA=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t},t.bB=E,t.bC=function(t,e,r){var n=r[0],i=r[1],s=r[2],a=r[3],o=e[0],l=e[1],u=e[2],c=i*u-s*l,h=s*o-n*u,p=n*l-i*o;return t[0]=o+a*(c+=c)+i*(p+=p)-s*(h+=h),t[1]=l+a*h+s*c-n*p,t[2]=u+a*p+n*h-i*c,t},t.bD=function(t,e,r){const n=function(t){var e=t[3],r=t[4],n=t[5],i=t[6],s=t[7],a=t[8];return t[0]*(a*r-n*s)+t[1]*(-a*e+n*i)+t[2]*(s*e-r*i)}([t[0],t[1],t[2],e[0],e[1],e[2],r[0],r[1],r[2]]);if(0===n)return null;const i=w([],[e[0],e[1],e[2]],[r[0],r[1],r[2]]),s=w([],[r[0],r[1],r[2]],[t[0],t[1],t[2]]),a=w([],[t[0],t[1],t[2]],[e[0],e[1],e[2]]),o=b([],i,-t[3]);return v(o,o,b([],s,-e[3])),v(o,o,b([],a,-r[3])),b(o,o,1/n),o},t.bE=kh,t.bF=function(){return new Float64Array(4)},t.bG=function(t,e,r,n){var i=[],s=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],s[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),s[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),s[2]=i[2],t[0]=s[0]+r[0],t[1]=s[1]+r[1],t[2]=s[2]+r[2],t},t.bH=function(t,e,r,n){var i=[],s=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],s[0]=i[0],s[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),s[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=s[0]+r[0],t[1]=s[1]+r[1],t[2]=s[2]+r[2],t},t.bI=function(t,e,r,n){var i=[],s=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],s[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),s[1]=i[1],s[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=s[0]+r[0],t[1]=s[1]+r[1],t[2]=s[2]+r[2],t},t.bJ=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),s=e[0],a=e[1],o=e[2],l=e[3],u=e[8],c=e[9],h=e[10],p=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-u*n,t[1]=a*i-c*n,t[2]=o*i-h*n,t[3]=l*i-p*n,t[8]=s*n+u*i,t[9]=a*n+c*i,t[10]=o*n+h*i,t[11]=l*n+p*i,t},t.bK=function(t,e){const r=D(t,360),n=D(e,360),i=n-r,s=n>r?i-360:i+360;return Math.abs(i)<Math.abs(s)?i:s},t.bL=function(t){return t[0]=0,t[1]=0,t[2]=0,t},t.bM=function(t,e,r,n){const i=Math.sqrt(t*t+e*e),s=Math.sqrt(r*r+n*n);t/=i,e/=i,r/=s,n/=s;const a=Math.acos(t*r+e*n);return -e*r+t*n>0?a:-a},t.bN=function(t,e){const r=D(t,2*Math.PI),n=D(e,2*Math.PI);return Math.min(Math.abs(r-n),Math.abs(r-n+2*Math.PI),Math.abs(r-n-2*Math.PI))},t.bO=function(){const t={},e=vt.$version;for(const r in vt.$root){const n=vt.$root[r];if(n.required){let i=null;i="version"===r?e:"array"===n.type?[]:{},null!=i&&(t[r]=i);}}return t},t.bP=ht,t.bQ=xs,t.bR=function t(e,r){if(Array.isArray(e)){if(!Array.isArray(r)||e.length!==r.length)return !1;for(let n=0;n<e.length;n++)if(!t(e[n],r[n]))return !1;return !0}if("object"==typeof e&&null!==e&&null!==r){if("object"!=typeof r)return !1;if(Object.keys(e).length!==Object.keys(r).length)return !1;for(const n in e)if(!t(e[n],r[n]))return !1;return !0}return e===r},t.bS=function(t){t=t.slice();const e=Object.create(null);for(let r=0;r<t.length;r++)e[t[r].id]=t[r];for(let r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=wt(t[r],e[t[r].ref]));return t},t.bT=function(t,e){if("custom"===t.type)return new _h(t,e);switch(t.type){case "background":return new wh(t,e);case "circle":return new yl(t,e);case "color-relief":return new Vl(t,e);case "fill":return new ku(t,e);case "fill-extrusion":return new Gu(t,e);case "heatmap":return new El(t,e);case "hillshade":return new Ml(t,e);case "line":return new ac(t,e);case "raster":return new Qs(t,e);case "symbol":return new xh(t,e)}},t.bU=t=>"raster"===t.type,t.bV=U,t.bW=function(t,e){if(!t)return [{command:"setStyle",args:[e]}];let r=[];try{if(!_t(t.version,e.version))return [{command:"setStyle",args:[e]}];_t(t.center,e.center)||r.push({command:"setCenter",args:[e.center]}),_t(t.state,e.state)||r.push({command:"setGlobalState",args:[e.state]}),_t(t.centerAltitude,e.centerAltitude)||r.push({command:"setCenterAltitude",args:[e.centerAltitude]}),_t(t.zoom,e.zoom)||r.push({command:"setZoom",args:[e.zoom]}),_t(t.bearing,e.bearing)||r.push({command:"setBearing",args:[e.bearing]}),_t(t.pitch,e.pitch)||r.push({command:"setPitch",args:[e.pitch]}),_t(t.roll,e.roll)||r.push({command:"setRoll",args:[e.roll]}),_t(t.sprite,e.sprite)||r.push({command:"setSprite",args:[e.sprite]}),_t(t.glyphs,e.glyphs)||r.push({command:"setGlyphs",args:[e.glyphs]}),_t(t.transition,e.transition)||r.push({command:"setTransition",args:[e.transition]}),_t(t.light,e.light)||r.push({command:"setLight",args:[e.light]}),_t(t.terrain,e.terrain)||r.push({command:"setTerrain",args:[e.terrain]}),_t(t.sky,e.sky)||r.push({command:"setSky",args:[e.sky]}),_t(t.projection,e.projection)||r.push({command:"setProjection",args:[e.projection]});const n={},i=[];!function(t,e,r,n){let i;for(i in e=e||{},t=t||{})Object.prototype.hasOwnProperty.call(t,i)&&(Object.prototype.hasOwnProperty.call(e,i)||kt(i,r,n));for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(Object.prototype.hasOwnProperty.call(t,i)?_t(t[i],e[i])||("geojson"===t[i].type&&"geojson"===e[i].type&&Tt(t,e,i)?St(r,{command:"setGeoJSONSourceData",args:[i,e[i].data]}):Et(i,e,r,n)):At(i,e,r));}(t.sources,e.sources,i,n);const s=[];t.layers&&t.layers.forEach((t=>{"source"in t&&n[t.source]?r.push({command:"removeLayer",args:[t.id]}):s.push(t);})),r=r.concat(i),function(t,e,r){e=e||[];const n=(t=t||[]).map(Mt),i=e.map(Mt),s=t.reduce(Ft,{}),a=e.reduce(Ft,{}),o=n.slice(),l=Object.create(null);let u,c,h,p,f;for(let t=0,e=0;t<n.length;t++)u=n[t],Object.prototype.hasOwnProperty.call(a,u)?e++:(St(r,{command:"removeLayer",args:[u]}),o.splice(o.indexOf(u,e),1));for(let t=0,e=0;t<i.length;t++)u=i[i.length-1-t],o[o.length-1-t]!==u&&(Object.prototype.hasOwnProperty.call(s,u)?(St(r,{command:"removeLayer",args:[u]}),o.splice(o.lastIndexOf(u,o.length-e),1)):e++,p=o[o.length-t],St(r,{command:"addLayer",args:[a[u],p]}),o.splice(o.length-t,0,u),l[u]=!0);for(let t=0;t<i.length;t++)if(u=i[t],c=s[u],h=a[u],!l[u]&&!_t(c,h))if(_t(c.source,h.source)&&_t(c["source-layer"],h["source-layer"])&&_t(c.type,h.type)){for(f in It(c.layout,h.layout,r,u,null,"setLayoutProperty"),It(c.paint,h.paint,r,u,null,"setPaintProperty"),_t(c.filter,h.filter)||St(r,{command:"setFilter",args:[u,h.filter]}),_t(c.minzoom,h.minzoom)&&_t(c.maxzoom,h.maxzoom)||St(r,{command:"setLayerZoomRange",args:[u,h.minzoom,h.maxzoom]}),c)Object.prototype.hasOwnProperty.call(c,f)&&"layout"!==f&&"paint"!==f&&"filter"!==f&&"metadata"!==f&&"minzoom"!==f&&"maxzoom"!==f&&(0===f.indexOf("paint.")?It(c[f],h[f],r,u,f.slice(6),"setPaintProperty"):_t(c[f],h[f])||St(r,{command:"setLayerProperty",args:[u,f,h[f]]}));for(f in h)Object.prototype.hasOwnProperty.call(h,f)&&!Object.prototype.hasOwnProperty.call(c,f)&&"layout"!==f&&"paint"!==f&&"filter"!==f&&"metadata"!==f&&"minzoom"!==f&&"maxzoom"!==f&&(0===f.indexOf("paint.")?It(c[f],h[f],r,u,f.slice(6),"setPaintProperty"):_t(c[f],h[f])||St(r,{command:"setLayerProperty",args:[u,f,h[f]]}));}else St(r,{command:"removeLayer",args:[u]}),p=o[o.lastIndexOf(u)+1],St(r,{command:"addLayer",args:[h,p]});}(s,e.layers,r);}catch(t){console.warn("Unable to compute style diff:",t),r=[{command:"setStyle",args:[e]}];}return r},t.bX=function(t){const e=[],r=t.id;return void 0===r&&e.push({message:`layers.${r}: missing required property "id"`}),void 0===t.render&&e.push({message:`layers.${r}: missing required method "render"`}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:`layers.${r}: property "renderingMode" must be either "2d" or "3d"`}),e},t.bY=N,t.bZ=$,t.b_=class extends wo{constructor(t,e){super(t,e),this.current=0;}set(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t));}},t.ba=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t},t.bb=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]},t.bc=Oh,t.bd=Nh,t.be=function(t,e,r,n,i){var s=1/Math.tan(e/2);if(t[0]=s/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0){var a=1/(n-i);t[10]=(i+n)*a,t[14]=2*i*n*a;}else t[10]=-1,t[14]=-2*n;return t},t.bf=function(t){var e=new f(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.bg=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),s=e[0],a=e[1],o=e[2],l=e[3],u=e[4],c=e[5],h=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+u*n,t[1]=a*i+c*n,t[2]=o*i+h*n,t[3]=l*i+p*n,t[4]=u*i-s*n,t[5]=c*i-a*n,t[6]=h*i-o*n,t[7]=p*i-l*n,t},t.bh=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),s=e[4],a=e[5],o=e[6],l=e[7],u=e[8],c=e[9],h=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+u*n,t[5]=a*i+c*n,t[6]=o*i+h*n,t[7]=l*i+p*n,t[8]=u*i-s*n,t[9]=c*i-a*n,t[10]=h*i-o*n,t[11]=p*i-l*n,t},t.bi=function(){const t=new Float32Array(16);return y(t),t},t.bj=function(){const t=new Float64Array(16);return y(t),t},t.bk=function(){return new Float64Array(16)},t.bl=function(t,e,r){const n=new Float64Array(4);return E(n,t,e-90,r),n},t.bm=function(t,e,r,n){var i,s,a,o,l,u=e[0],c=e[1],h=e[2],f=e[3],d=r[0],y=r[1],m=r[2],g=r[3];return (s=u*d+c*y+h*m+f*g)<0&&(s=-s,d=-d,y=-y,m=-m,g=-g),1-s>p?(i=Math.acos(s),a=Math.sin(i),o=Math.sin((1-n)*i)/a,l=Math.sin(n*i)/a):(o=1-n,l=n),t[0]=o*u+l*d,t[1]=o*c+l*y,t[2]=o*h+l*m,t[3]=o*f+l*g,t},t.bn=function(t){const e=new Float64Array(9);!function(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],a=r+r,o=n+n,l=i+i,u=r*a,c=n*a,h=n*o,p=i*a,f=i*o,d=i*l,y=s*a,m=s*o,g=s*l;t[0]=1-h-d,t[3]=c-g,t[6]=p+m,t[1]=c+g,t[4]=1-u-d,t[7]=f-y,t[2]=p-m,t[5]=f+y,t[8]=1-u-h;}(e,t);const r=et(-Math.asin(C(e[2],-1,1)));let n,i;return Math.hypot(e[5],e[8])<.001?(n=0,i=-et(Math.atan2(e[3],e[4]))):(n=et(0===e[5]&&0===e[8]?0:Math.atan2(e[5],e[8])),i=et(0===e[1]&&0===e[0]?0:Math.atan2(e[1],e[0]))),{roll:n,pitch:r+90,bearing:i}},t.bo=function(t,e){return t.roll==e.roll&&t.pitch==e.pitch&&t.bearing==e.bearing},t.bp=Te,t.bq=_o,t.br=fu,t.bs=du,t.bt=hu,t.bu=z,t.bv=P,t.bw=Re,t.bx=function(t,e,r,n,i){return z(n,i,C((t-e)/(r-e),0,1))},t.by=D,t.bz=function(){return new Float64Array(3)},t.c=ot,t.c$=function(t,r,n,i,s){return e(this,void 0,void 0,(function*(){if(h())try{return yield K(t,r,n,i,s)}catch(t){}return function(t,e,r,n,i){const s=t.width,a=t.height;W&&J||(W=new OffscreenCanvas(s,a),J=W.getContext("2d",{willReadFrequently:!0})),W.width=s,W.height=a,J.drawImage(t,0,0,s,a);const o=J.getImageData(e,r,n,i);return J.clearRect(0,0,s,a),o.data}(t,r,n,i,s)}))},t.c0=class extends wo{constructor(t,e){super(t,e),this.current=ko;}set(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(let e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}}},t.c1=So,t.c2=class extends wo{constructor(t,e){super(t,e),this.current=[0,0,0];}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]));}},t.c3=class extends wo{constructor(t,e){super(t,e),this.current=[0,0];}set(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]));}},t.c4=d,t.c5=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.c6=function(t,e,r){var n=e[0],i=e[1],s=e[2];return t[0]=n*r[0]+i*r[3]+s*r[6],t[1]=n*r[1]+i*r[4]+s*r[7],t[2]=n*r[2]+i*r[5]+s*r[8],t},t.c7=function(t,e,r,n,i,s,a){var o=1/(e-r),l=1/(n-i),u=1/(s-a);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+r)*o,t[13]=(i+n)*l,t[14]=(a+s)*u,t[15]=1,t},t.c8=class extends wo{constructor(t,e){super(t,e),this.current=new Array;}set(t){if(t!=this.current){this.current=t;const e=new Float32Array(4*t.length);for(let r=0;r<t.length;r++)e[4*r]=t[r].r,e[4*r+1]=t[r].g,e[4*r+2]=t[r].b,e[4*r+3]=t[r].a;this.gl.uniform4fv(this.location,e);}}},t.c9=class extends wo{constructor(t,e){super(t,e),this.current=new Array;}set(t){if(t!=this.current){this.current=t;const e=new Float32Array(t);this.gl.uniform1fv(this.location,e);}}},t.cA=function(t,e){return rt[e]&&"touches"in t},t.cB=function(t){return rt[t]||nt[t]},t.cC=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t},t.cD=function(t,e){const{x:r,y:n}=Vh.fromLngLat(e);return !(t<0||t>25||n<0||n>=1||r<0||r>=1)},t.cE=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.cF=class extends aa{},t.cG=Vd,t.cI=ct,t.cJ=function(t,e){ot.REGISTERED_PROTOCOLS[t]=e;},t.cK=function(t){delete ot.REGISTERED_PROTOCOLS[t];},t.cL=function(t,e){const r={};for(let n=0;n<t.length;n++){const i=e&&e[t[n].id]||_i(t[n]);e&&(e[t[n].id]=i);let s=r[i];s||(s=r[i]=[]),s.push(t[n]);}const n=[];for(const t in r)n.push(r[t]);return n},t.cM=ps,t.cN=Gh,t.cO=Nf,t.cP=jc,t.cQ=function(e){e.bucket.createArrays(),e.bucket.tilePixelRatio=M/(512*e.bucket.overscaling),e.bucket.compareText={},e.bucket.iconsNeedLinear=!1;const r=e.bucket.layers[0],n=r.layout,i=r._unevaluatedLayout._values,s={layoutIconSize:i["icon-size"].possiblyEvaluate(new Ps(e.bucket.zoom+1),e.canonical),layoutTextSize:i["text-size"].possiblyEvaluate(new Ps(e.bucket.zoom+1),e.canonical),textMaxSize:i["text-size"].possiblyEvaluate(new Ps(18))};if("composite"===e.bucket.textSizeData.kind){const{minZoom:t,maxZoom:r}=e.bucket.textSizeData;s.compositeTextSizes=[i["text-size"].possiblyEvaluate(new Ps(t),e.canonical),i["text-size"].possiblyEvaluate(new Ps(r),e.canonical)];}if("composite"===e.bucket.iconSizeData.kind){const{minZoom:t,maxZoom:r}=e.bucket.iconSizeData;s.compositeIconSizes=[i["icon-size"].possiblyEvaluate(new Ps(t),e.canonical),i["icon-size"].possiblyEvaluate(new Ps(r),e.canonical)];}const a=n.get("text-line-height")*dc,o="viewport"!==n.get("text-rotation-alignment")&&"point"!==n.get("symbol-placement"),l=n.get("text-keep-upright"),u=n.get("text-size");for(const i of e.bucket.features){const c=n.get("text-font").evaluate(i,{},e.canonical).join(","),h=u.evaluate(i,{},e.canonical),p=s.layoutTextSize.evaluate(i,{},e.canonical),f=s.layoutIconSize.evaluate(i,{},e.canonical),d={horizontal:{},vertical:void 0},y=i.text;let m,g=[0,0];if(y){const s=y.toString(),u=n.get("text-letter-spacing").evaluate(i,{},e.canonical)*dc,f=Ss(s)?u:0,m=n.get("text-anchor").evaluate(i,{},e.canonical),x=md(r,i,e.canonical);if(!x){const t=n.get("text-radial-offset").evaluate(i,{},e.canonical);g=t?yd(m,[t*dc,dd]):n.get("text-offset").evaluate(i,{},e.canonical).map((t=>t*dc));}let v=o?"center":n.get("text-justify").evaluate(i,{},e.canonical);const b="point"===n.get("symbol-placement")?n.get("text-max-width").evaluate(i,{},e.canonical)*dc:1/0,w=()=>{e.bucket.allowVerticalPlacement&&_s(s)&&(d.vertical=Xc(y,e.glyphMap,e.glyphPositions,e.imagePositions,c,b,a,m,"left",f,g,t.az.vertical,!0,p,h));};if(!o&&x){const r=new Set;if("auto"===v)for(let t=0;t<x.values.length;t+=2)r.add(gd(x.values[t]));else r.add(v);let n=!1;for(const i of r)if(!d.horizontal[i])if(n)d.horizontal[i]=d.horizontal[0];else {const r=Xc(y,e.glyphMap,e.glyphPositions,e.imagePositions,c,b,a,"center",i,f,g,t.az.horizontal,!1,p,h);r&&(d.horizontal[i]=r,n=1===r.positionedLines.length);}w();}else {"auto"===v&&(v=gd(m));const r=Xc(y,e.glyphMap,e.glyphPositions,e.imagePositions,c,b,a,m,v,f,g,t.az.horizontal,!1,p,h);r&&(d.horizontal[v]=r),w(),_s(s)&&o&&l&&(d.vertical=Xc(y,e.glyphMap,e.glyphPositions,e.imagePositions,c,b,a,m,v,f,g,t.az.vertical,!1,p,h));}}let x=!1;if(i.icon&&i.icon.name){const t=e.imageMap[i.icon.name];t&&(m=th(e.imagePositions[i.icon.name],n.get("icon-offset").evaluate(i,{},e.canonical),n.get("icon-anchor").evaluate(i,{},e.canonical)),x=!!t.sdf,void 0===e.bucket.sdfIcons?e.bucket.sdfIcons=x:e.bucket.sdfIcons!==x&&j("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(t.pixelRatio!==e.bucket.pixelRatio||0!==n.get("icon-rotate").constantOr(1))&&(e.bucket.iconsNeedLinear=!0));}const v=bd(d.horizontal)||d.vertical;e.bucket.iconsInText=!!v&&v.iconsInText,(v||m)&&xd(e.bucket,i,d,m,e.imageMap,s,p,f,g,x,e.canonical,e.subdivisionGranularity);}e.showCollisionBoxes&&e.bucket.generateCollisionDebugBuffers();},t.cR=wu,t.cS=Ru,t.cT=tc,t.cU=function(t){const e=new Tc;return function(t,e){for(const r in t.layers)e.writeMessage(3,Pf,t.layers[r]);}(t,e),e.finish()},t.cV=function(t,e,r,n,i,s){let a=jf(t,e,r,i,0);return a=jf(a,e,n,s,1),a},t.cW=class{constructor(t){this.maxEntries=t,this.map=new Map;}get(t){const e=this.map.get(t);return void 0!==e&&(this.map.delete(t),this.map.set(t,e)),e}set(t,e){if(this.map.has(t))this.map.delete(t);else if(this.map.size>=this.maxEntries){const t=this.map.keys().next().value;this.map.delete(t);}this.map.set(t,e);}clear(){this.map.clear();}},t.cX=Vu,t.cY=Tc,t.cZ=Ff,t.c_=class{constructor(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},performance.mark(this._marks.start);}finish(){performance.mark(this._marks.end);let t=performance.getEntriesByName(this._marks.measure);return 0===t.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),t=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),t}},t.ca=class extends xa{},t.cb=pc,t.cc=class extends ba{},t.cd=kl,t.ce=function(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},t.cf=Al,t.cg=function(t,e,r){var n=e[0],i=e[1],s=e[2],a=r[3]*n+r[7]*i+r[11]*s+r[15];return t[0]=(r[0]*n+r[4]*i+r[8]*s+r[12])/(a=a||1),t[1]=(r[1]*n+r[5]*i+r[9]*s+r[13])/a,t[2]=(r[2]*n+r[6]*i+r[10]*s+r[14])/a,t},t.ch=class extends oa{},t.ci=class extends Ta{},t.cj=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},t.ck=function(t,e){var r=t[0],n=t[1],i=t[2],s=t[3],a=t[4],o=t[5],l=t[6],u=t[7],c=t[8],h=t[9],f=t[10],d=t[11],y=t[12],m=t[13],g=t[14],x=t[15],v=e[0],b=e[1],w=e[2],_=e[3],S=e[4],A=e[5],k=e[6],E=e[7],T=e[8],I=e[9],M=e[10],F=e[11],D=e[12],z=e[13],P=e[14],B=e[15];return Math.abs(r-v)<=p*Math.max(1,Math.abs(r),Math.abs(v))&&Math.abs(n-b)<=p*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(i-w)<=p*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(s-_)<=p*Math.max(1,Math.abs(s),Math.abs(_))&&Math.abs(a-S)<=p*Math.max(1,Math.abs(a),Math.abs(S))&&Math.abs(o-A)<=p*Math.max(1,Math.abs(o),Math.abs(A))&&Math.abs(l-k)<=p*Math.max(1,Math.abs(l),Math.abs(k))&&Math.abs(u-E)<=p*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(c-T)<=p*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(h-I)<=p*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(f-M)<=p*Math.max(1,Math.abs(f),Math.abs(M))&&Math.abs(d-F)<=p*Math.max(1,Math.abs(d),Math.abs(F))&&Math.abs(y-D)<=p*Math.max(1,Math.abs(y),Math.abs(D))&&Math.abs(m-z)<=p*Math.max(1,Math.abs(m),Math.abs(z))&&Math.abs(g-P)<=p*Math.max(1,Math.abs(g),Math.abs(P))&&Math.abs(x-B)<=p*Math.max(1,Math.abs(x),Math.abs(B))},t.cl=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.cm=t=>"symbol"===t.type,t.cn=t=>"circle"===t.type,t.co=t=>"heatmap"===t.type,t.cp=t=>"line"===t.type,t.cq=t=>"fill"===t.type,t.cr=t=>"fill-extrusion"===t.type,t.cs=t=>"hillshade"===t.type,t.ct=t=>"color-relief"===t.type,t.cu=t=>"background"===t.type,t.cv=t=>"custom"===t.type,t.cw=B,t.cx=function(t,e,r){const n=I(e.x-r.x,e.y-r.y),i=I(t.x-r.x,t.y-r.y),s=Math.atan2(n[0]*i[1]-n[1]*i[0],function(t,e){return t[0]*e[0]+t[1]*e[1]}(n,i));return et(s)},t.cy=V,t.cz=function(t,e){return nt[e]&&(t instanceof MouseEvent||t instanceof WheelEvent)},t.d=ft,t.d0=Pl,t.d1=n,t.d2=class{constructor(t,e){this.layers={[zf]:this},this.name=zf,this.version=e?e.version:1,this.extent=e?e.extent:4096,this.length=t.length,this.features=t;}feature(t){return new Df(this.features[t],this.extent)}},t.d3=ni,t.d4=zs,t.e=O,t.f=t=>e(void 0,void 0,void 0,(function*(){if(0===t.byteLength)return createImageBitmap(new ImageData(1,1));const e=new Blob([new Uint8Array(t)],{type:"image/png"});try{return createImageBitmap(e)}catch(t){throw new Error(`Could not load image because of ${t.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),t.g=lt,t.h=t=>new Promise(((e,r)=>{const n=new Image;n.onload=()=>{e(n),URL.revokeObjectURL(n.src),n.onload=null,window.requestAnimationFrame((()=>{n.src=H;}));},n.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const i=new Blob([new Uint8Array(t)],{type:"image/png"});n.src=t.byteLength?URL.createObjectURL(i):H;})),t.i=X,t.j=(t,e)=>pt(O(t,{type:"json"}),e),t.k=gt,t.l=mt,t.m=pt,t.n=(t,e)=>pt(O(t,{type:"arrayBuffer"}),e),t.o=function(t){return new Tc(t).readFields(Rc,[])},t.p=Uc,t.q=function(t){return /[\u02EA\u02EB\u1100-\u11FF\u2E80-\u2FDF\u3000-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(t))},t.r=_l,t.s=Q,t.t=Hs,t.u=vt,t.v=ns,t.w=j,t.x=Os,t.y=ss,t.z=Vs;}));

define("worker",["./shared"],(function(e){"use strict";class t{constructor(e,t){this.keyCache={},e&&this.replace(e,t);}replace(e,t){this._layerConfigs={},this._layers={},this.update(e,[],t);}update(t,o,i){for(const o of t){this._layerConfigs[o.id]=o;const t=this._layers[o.id]=e.bT(o,i);t._featureFilter=e.aj(t.filter,i),this.keyCache[o.id]&&delete this.keyCache[o.id];}for(const e of o)delete this.keyCache[e],delete this._layerConfigs[e],delete this._layers[e];this.familiesBySource={};const s=e.cL(Object.values(this._layerConfigs),this.keyCache);for(const t of s){const o=t.map((e=>this._layers[e.id])),i=o[0];if(i.isHidden())continue;const s=i.source||"";let n=this.familiesBySource[s];n||(n=this.familiesBySource[s]={});const r=i.sourceLayer||e.ai;let a=n[r];a||(a=n[r]=[]),a.push(o);}}}class o{constructor(t){const o={},i=[];for(const e in t){const s=t[e],n=o[e]={};for(const e in s){const t=s[+e];if(!t||0===t.bitmap.width||0===t.bitmap.height)continue;const o={x:0,y:0,w:t.bitmap.width+2,h:t.bitmap.height+2};i.push(o),n[e]={rect:o,metrics:t.metrics};}}const{w:s,h:n}=e.p(i),r=new e.r({width:s||1,height:n||1});for(const i in t){const s=t[i];for(const t in s){const n=s[+t];if(!n||0===n.bitmap.width||0===n.bitmap.height)continue;const a=o[i][t].rect;e.r.copy(n.bitmap,r,{x:0,y:0},{x:a.x+1,y:a.y+1},n.bitmap);}}this.image=r,this.positions=o;}}e.cM("GlyphAtlas",o);class i{constructor(t){this.tileID=new e.a2(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.inFlightDependencies=[];}parse(t,i,n,r,a){return e._(this,void 0,void 0,(function*(){this.status="parsing",this.data=t,this.collisionBoxArray=new e.ag;const l=new e.cN(Object.keys(t.layers).sort()),c=new e.cO(this.tileID,this.promoteId);c.bucketLayerIDs=[];const h={},u={featureIndex:c,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:n,subdivisionGranularity:a},d=i.familiesBySource[this.source];for(const o in d){const i=t.layers[o];if(!i)continue;1===i.version&&e.w(`Vector tile source "${this.source}" layer "${o}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const r=l.encode(o),a=[];for(let e=0;e<i.length;e++){const t=i.feature(e),s=c.getId(t,o);a.push({feature:t,id:s,index:e,sourceLayerIndex:r});}for(const t of d[o]){const o=t[0];o.source!==this.source&&e.w(`layer.source = ${o.source} does not equal this.source = ${this.source}`),o.isHidden(this.zoom,!0)||(s(t,this.zoom,n),(h[o.id]=o.createBucket({index:c.bucketLayerIDs.length,layers:t,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:r,sourceID:this.source})).populate(a,u,this.tileID.canonical),c.bucketLayerIDs.push(t.map((e=>e.id))));}}const g=e.bY(u.glyphDependencies,(e=>Object.keys(e).map(Number)));this.inFlightDependencies.forEach((e=>null==e?void 0:e.abort())),this.inFlightDependencies=[];let f=Promise.resolve({});if(Object.keys(g).length){const e=new AbortController;this.inFlightDependencies.push(e),f=r.sendAsync({type:"GG",data:{stacks:g,source:this.source,tileID:this.tileID,type:"glyphs"}},e);}const p=Object.keys(u.iconDependencies);let m=Promise.resolve({});if(p.length){const e=new AbortController;this.inFlightDependencies.push(e),m=r.sendAsync({type:"GI",data:{icons:p,source:this.source,tileID:this.tileID,type:"icons"}},e);}const y=Object.keys(u.patternDependencies);let v=Promise.resolve({});if(y.length){const e=new AbortController;this.inFlightDependencies.push(e),v=r.sendAsync({type:"GI",data:{icons:y,source:this.source,tileID:this.tileID,type:"patterns"}},e);}const x=u.dashDependencies;let _=Promise.resolve({});if(Object.keys(x).length){const e=new AbortController;this.inFlightDependencies.push(e),_=r.sendAsync({type:"GDA",data:{dashes:x}},e);}const[w,S,b,M]=yield Promise.all([f,m,v,_]),I=new o(w),P=new e.cP(S,b);for(const t in h){const o=h[t];o instanceof e.ah?(s(o.layers,this.zoom,n),e.cQ({bucket:o,glyphMap:w,glyphPositions:I.positions,imageMap:S,imagePositions:P.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:u.subdivisionGranularity})):o.hasDependencies&&(o instanceof e.cR||o instanceof e.cS||o instanceof e.cT)&&(s(o.layers,this.zoom,n),o.addFeatures(u,this.tileID.canonical,P.patternPositions,M));}return this.status="done",{buckets:Object.values(h).filter((e=>!e.isEmpty())),featureIndex:c,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:I.image,imageAtlas:P,dashPositions:M,glyphMap:this.returnDependencies?w:null,iconMap:this.returnDependencies?S:null,glyphPositions:this.returnDependencies?I.positions:null}}))}}function s(t,o,i){const s=new e.H(o);for(const e of t)e.recalculate(s,i);}class n{constructor(e,t,o,i,s){this.type=e,this.properties=o||{},this.extent=s,this.pointsArray=t,this.id=i;}loadGeometry(){return this.pointsArray.map((t=>t.map((t=>new e.P(t.x,t.y)))))}}class r{constructor(e,t,o){this.version=2,this._myFeatures=e,this.name=t,this.length=e.length,this.extent=o;}feature(e){return this._myFeatures[e]}}class a{constructor(){this.layers={};}addLayer(e){this.layers[e.name]=e;}}function l(t){let o=e.cU(t);return 0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),{vectorTile:t,rawData:o.buffer}}function c(t,o,i){const{extent:s}=t,a=Math.pow(2,i.z-o.z),l=(i.x-o.x*a)*s,c=(i.y-o.y*a)*s,h=[];for(let o=0;o<t.length;o++){const i=t.feature(o);let r=i.loadGeometry();for(const e of r)for(const t of e)t.x=t.x*a-l,t.y=t.y*a-c;const u=128;r=e.cV(r,i.type,-u,-u,s+u,s+u),0!==r.length&&h.push(new n(i.type,r,i.properties,i.id,s));}return new r(h,t.name,s)}class h{constructor(t,o,i){this.actor=t,this.layerIndex=o,this.availableImages=i,this.fetching={},this.loading={},this.loaded={},this.overzoomedTileResultCache=new e.cW(1e3);}loadVectorTile(t,o){return e._(this,void 0,void 0,(function*(){const i=yield e.n(t.request,o);try{return {vectorTile:"mlt"!==t.encoding?new e.cX(new e.cY(i.data)):new e.cZ(i.data),rawData:i.data,cacheControl:i.cacheControl,expires:i.expires}}catch(e){const o=new Uint8Array(i.data);let s=`Unable to parse the tile at ${t.request.url}, `;throw s+=31===o[0]&&139===o[1]?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${e.message}`,new Error(s)}}))}loadTile(t){return e._(this,void 0,void 0,(function*(){const{uid:o,overzoomParameters:s}=t;s&&(t.request=s.overzoomRequest);const n=!!(t&&t.request&&t.request.collectResourceTiming)&&new e.c_(t.request),r=new i(t);this.loading[o]=r;const a=new AbortController;r.abort=a;try{const i=yield this.loadVectorTile(t,a);if(delete this.loading[o],!i)return null;if(s){const e=this._getOverzoomTile(t,i.vectorTile);i.rawData=e.rawData,i.vectorTile=e.vectorTile;}const l=i.rawData,c={};i.expires&&(c.expires=i.expires),i.cacheControl&&(c.cacheControl=i.cacheControl);const h={};if(n){const e=n.finish();e&&(h.resourceTiming=JSON.parse(JSON.stringify(e)));}r.vectorTile=i.vectorTile;const u=r.parse(i.vectorTile,this.layerIndex,this.availableImages,this.actor,t.subdivisionGranularity);this.loaded[o]=r,this.fetching[o]={rawTileData:l,cacheControl:c,resourceTiming:h};try{const o=yield u;return e.e({rawTileData:l.slice(0),encoding:t.encoding},o,c,h)}finally{delete this.fetching[o];}}catch(e){throw delete this.loading[o],r.status="done",this.loaded[o]=r,e}}))}_getOverzoomTile(e,t){const{tileID:o,source:i,overzoomParameters:s}=e,{maxZoomTileID:n}=s,r=`${n.key}_${o.key}`,h=this.overzoomedTileResultCache.get(r);if(h)return h;const u=new a,d=this.layerIndex.familiesBySource[i];for(const e in d){const i=t.layers[e];if(!i)continue;const s=c(i,n,o.canonical);s.length>0&&u.addLayer(s);}const g=l(u);return this.overzoomedTileResultCache.set(r,g),g}reloadTile(t){return e._(this,void 0,void 0,(function*(){const o=t.uid;if(!this.loaded||!this.loaded[o])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const i=this.loaded[o];if(i.showCollisionBoxes=t.showCollisionBoxes,"parsing"===i.status){const s=yield i.parse(i.vectorTile,this.layerIndex,this.availableImages,this.actor,t.subdivisionGranularity);let n;if(this.fetching[o]){const{rawTileData:i,cacheControl:r,resourceTiming:a}=this.fetching[o];delete this.fetching[o],n=e.e({rawTileData:i.slice(0),encoding:t.encoding},s,r,a);}else n=s;return n}if("done"===i.status&&i.vectorTile)return i.parse(i.vectorTile,this.layerIndex,this.availableImages,this.actor,t.subdivisionGranularity)}))}abortTile(t){return e._(this,void 0,void 0,(function*(){const e=this.loading,o=t.uid;e&&e[o]&&e[o].abort&&(e[o].abort.abort(),delete e[o]);}))}removeTile(t){return e._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[t.uid]&&delete this.loaded[t.uid];}))}}class u{constructor(){this.loaded={};}loadTile(t){return e._(this,void 0,void 0,(function*(){const{uid:o,encoding:i,rawImageData:s,redFactor:n,greenFactor:r,blueFactor:a,baseShift:l}=t,c=s.width+2,h=s.height+2,u=e.b(s)?new e.R({width:c,height:h},yield e.c$(s,-1,-1,c,h)):s,d=new e.d0(o,u,i,n,r,a,l);return this.loaded=this.loaded||{},this.loaded[o]=d,d}))}removeTile(e){const t=this.loaded,o=e.uid;t&&t[o]&&delete t[o];}}var d,g,f=function(){if(g)return d;function e(e,o){if(0!==e.length){t(e[0],o);for(var i=1;i<e.length;i++)t(e[i],!o);}}function t(e,t){for(var o=0,i=0,s=0,n=e.length,r=n-1;s<n;r=s++){var a=(e[s][0]-e[r][0])*(e[r][1]+e[s][1]),l=o+a;i+=Math.abs(o)>=Math.abs(a)?o-l+a:a-l+o,o=l;}o+i>=0!=!!t&&e.reverse();}return g=1,d=function t(o,i){var s,n=o&&o.type;if("FeatureCollection"===n)for(s=0;s<o.features.length;s++)t(o.features[s],i);else if("GeometryCollection"===n)for(s=0;s<o.geometries.length;s++)t(o.geometries[s],i);else if("Feature"===n)t(o.geometry,i);else if("Polygon"===n)e(o.coordinates,i);else if("MultiPolygon"===n)for(s=0;s<o.coordinates.length;s++)e(o.coordinates[s],i);return o}}(),p=e.d1(f);const m={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},y=Math.fround||(v=new Float32Array(1),e=>(v[0]=+e,v[0]));var v;class x{constructor(e){this.options=Object.assign(Object.create(m),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[];}load(e){const{log:t,minZoom:o,maxZoom:i}=this.options;t&&console.time("total time");const s=`prepare ${e.length} points`;t&&console.time(s),this.points=e;const n=[];for(let t=0;t<e.length;t++){const o=e[t];if(!o.geometry)continue;const[i,s]=o.geometry.coordinates,r=y(S(i)),a=y(b(s));n.push(r,a,1/0,t,-1,1),this.options.reduce&&n.push(0);}let r=this.trees[i+1]=this._createTree(n);t&&console.timeEnd(s);for(let e=i;e>=o;e--){const o=+Date.now();r=this.trees[e]=this._createTree(this._cluster(r,e)),t&&console.log("z%d: %d clusters in %dms",e,r.numItems,+Date.now()-o);}return t&&console.timeEnd("total time"),this}getClusters(e,t){let o=((e[0]+180)%360+360)%360-180;const i=Math.max(-90,Math.min(90,e[1]));let s=180===e[2]?180:((e[2]+180)%360+360)%360-180;const n=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)o=-180,s=180;else if(o>s){const e=this.getClusters([o,i,180,n],t),r=this.getClusters([-180,i,s,n],t);return e.concat(r)}const r=this.trees[this._limitZoom(t)],a=r.range(S(o),b(n),S(s),b(i)),l=r.data,c=[];for(const e of a){const t=this.stride*e;c.push(l[t+5]>1?_(l,t,this.clusterProps):this.points[l[t+3]]);}return c}getChildren(e){const t=this._getOriginId(e),o=this._getOriginZoom(e),i="No cluster with the specified id.",s=this.trees[o];if(!s)throw new Error(i);const n=s.data;if(t*this.stride>=n.length)throw new Error(i);const r=this.options.radius/(this.options.extent*Math.pow(2,o-1)),a=s.within(n[t*this.stride],n[t*this.stride+1],r),l=[];for(const t of a){const o=t*this.stride;n[o+4]===e&&l.push(n[o+5]>1?_(n,o,this.clusterProps):this.points[n[o+3]]);}if(0===l.length)throw new Error(i);return l}getLeaves(e,t,o){const i=[];return this._appendLeaves(i,e,t=t||10,o=o||0,0),i}getTile(e,t,o){const i=this.trees[this._limitZoom(e)],s=Math.pow(2,e),{extent:n,radius:r}=this.options,a=r/n,l=(o-a)/s,c=(o+1+a)/s,h={features:[]};return this._addTileFeatures(i.range((t-a)/s,l,(t+1+a)/s,c),i.data,t,o,s,h),0===t&&this._addTileFeatures(i.range(1-a/s,l,1,c),i.data,s,o,s,h),t===s-1&&this._addTileFeatures(i.range(0,l,a/s,c),i.data,-1,o,s,h),h.features.length?h:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const o=this.getChildren(e);if(t++,1!==o.length)break;e=o[0].properties.cluster_id;}return t}_appendLeaves(e,t,o,i,s){const n=this.getChildren(t);for(const t of n){const n=t.properties;if(n&&n.cluster?s+n.point_count<=i?s+=n.point_count:s=this._appendLeaves(e,n.cluster_id,o,i,s):s<i?s++:e.push(t),e.length===o)break}return s}_createTree(t){const o=new e.aT(t.length/this.stride|0,this.options.nodeSize,Float32Array);for(let e=0;e<t.length;e+=this.stride)o.add(t[e],t[e+1]);return o.finish(),o.data=t,o}_addTileFeatures(e,t,o,i,s,n){for(const r of e){const e=r*this.stride,a=t[e+5]>1;let l,c,h;if(a)l=w(t,e,this.clusterProps),c=t[e],h=t[e+1];else {const o=this.points[t[e+3]];l=o.properties;const[i,s]=o.geometry.coordinates;c=S(i),h=b(s);}const u={type:1,geometry:[[Math.round(this.options.extent*(c*s-o)),Math.round(this.options.extent*(h*s-i))]],tags:l};let d;d=a||this.options.generateId?t[e+3]:this.points[t[e+3]].id,void 0!==d&&(u.id=d),n.features.push(u);}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const{radius:o,extent:i,reduce:s,minPoints:n}=this.options,r=o/(i*Math.pow(2,t)),a=e.data,l=[],c=this.stride;for(let o=0;o<a.length;o+=c){if(a[o+2]<=t)continue;a[o+2]=t;const i=a[o],h=a[o+1],u=e.within(a[o],a[o+1],r),d=a[o+5];let g=d;for(const e of u){const o=e*c;a[o+2]>t&&(g+=a[o+5]);}if(g>d&&g>=n){let e,n=i*d,r=h*d,f=-1;const p=(o/c<<5)+(t+1)+this.points.length;for(const i of u){const l=i*c;if(a[l+2]<=t)continue;a[l+2]=t;const h=a[l+5];n+=a[l]*h,r+=a[l+1]*h,a[l+4]=p,s&&(e||(e=this._map(a,o,!0),f=this.clusterProps.length,this.clusterProps.push(e)),s(e,this._map(a,l)));}a[o+4]=p,l.push(n/g,r/g,1/0,p,-1,g),s&&l.push(f);}else {for(let e=0;e<c;e++)l.push(a[o+e]);if(g>1)for(const e of u){const o=e*c;if(!(a[o+2]<=t)){a[o+2]=t;for(let e=0;e<c;e++)l.push(a[o+e]);}}}}return l}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return (e-this.points.length)%32}_map(e,t,o){if(e[t+5]>1){const i=this.clusterProps[e[t+6]];return o?Object.assign({},i):i}const i=this.points[e[t+3]].properties,s=this.options.map(i);return o&&s===i?Object.assign({},s):s}}function _(e,t,o){return {type:"Feature",id:e[t+3],properties:w(e,t,o),geometry:{type:"Point",coordinates:[(i=e[t],360*(i-.5)),M(e[t+1])]}};var i;}function w(e,t,o){const i=e[t+5],s=i>=1e4?`${Math.round(i/1e3)}k`:i>=1e3?Math.round(i/100)/10+"k":i,n=e[t+6],r=-1===n?{}:Object.assign({},o[n]);return Object.assign(r,{cluster:!0,cluster_id:e[t+3],point_count:i,point_count_abbreviated:s})}function S(e){return e/360+.5}function b(e){const t=Math.sin(e*Math.PI/180),o=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return o<0?0:o>1?1:o}function M(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function I(e,t,o,i){let s=i;const n=t+(o-t>>1);let r,a=o-t;const l=e[t],c=e[t+1],h=e[o],u=e[o+1];for(let i=t+3;i<o;i+=3){const t=P(e[i],e[i+1],l,c,h,u);if(t>s)r=i,s=t;else if(t===s){const e=Math.abs(i-n);e<a&&(r=i,a=e);}}s>i&&(r-t>3&&I(e,t,r,i),e[r+2]=s,o-r>3&&I(e,r,o,i));}function P(e,t,o,i,s,n){let r=s-o,a=n-i;if(0!==r||0!==a){const l=((e-o)*r+(t-i)*a)/(r*r+a*a);l>1?(o=s,i=n):l>0&&(o+=r*l,i+=a*l);}return r=e-o,a=t-i,r*r+a*a}function D(e,t,o,i){const s={id:null==e?null:e,type:t,geometry:o,tags:i,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if("Point"===t||"MultiPoint"===t||"LineString"===t)T(s,o);else if("Polygon"===t)T(s,o[0]);else if("MultiLineString"===t)for(const e of o)T(s,e);else if("MultiPolygon"===t)for(const e of o)T(s,e[0]);return s}function T(e,t){for(let o=0;o<t.length;o+=3)e.minX=Math.min(e.minX,t[o]),e.minY=Math.min(e.minY,t[o+1]),e.maxX=Math.max(e.maxX,t[o]),e.maxY=Math.max(e.maxY,t[o+1]);}function k(e,t,o,i){if(!t.geometry)return;const s=t.geometry.coordinates;if(s&&0===s.length)return;const n=t.geometry.type,r=Math.pow(o.tolerance/((1<<o.maxZoom)*o.extent),2);let a=[],l=t.id;if(o.promoteId?l=t.properties[o.promoteId]:o.generateId&&(l=i||0),"Point"===n)C(s,a);else if("MultiPoint"===n)for(const e of s)C(e,a);else if("LineString"===n)O(s,a,r,!1);else if("MultiLineString"===n){if(o.lineMetrics){for(const o of s)a=[],O(o,a,r,!1),e.push(D(l,"LineString",a,t.properties));return}L(s,a,r,!1);}else if("Polygon"===n)L(s,a,r,!0);else {if("MultiPolygon"!==n){if("GeometryCollection"===n){for(const s of t.geometry.geometries)k(e,{id:l,geometry:s,properties:t.properties},o,i);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const e of s){const t=[];L(e,t,r,!0),a.push(t);}}e.push(D(l,n,a,t.properties));}function C(e,t){t.push(z(e[0]),F(e[1]),0);}function O(e,t,o,i){let s,n,r=0;for(let o=0;o<e.length;o++){const a=z(e[o][0]),l=F(e[o][1]);t.push(a,l,0),o>0&&(r+=i?(s*l-a*n)/2:Math.sqrt(Math.pow(a-s,2)+Math.pow(l-n,2))),s=a,n=l;}const a=t.length-3;t[2]=1,I(t,0,a,o),t[a+2]=1,t.size=Math.abs(r),t.start=0,t.end=t.size;}function L(e,t,o,i){for(let s=0;s<e.length;s++){const n=[];O(e[s],n,o,i),t.push(n);}}function z(e){return e/360+.5}function F(e){const t=Math.sin(e*Math.PI/180),o=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return o<0?0:o>1?1:o}function G(e,t,o,i,s,n,r,a){if(i/=t,n>=(o/=t)&&r<i)return e;if(r<o||n>=i)return null;const l=[];for(const t of e){const e=t.geometry;let n=t.type;const r=0===s?t.minX:t.minY,c=0===s?t.maxX:t.maxY;if(r>=o&&c<i){l.push(t);continue}if(c<o||r>=i)continue;let h=[];if("Point"===n||"MultiPoint"===n)A(e,h,o,i,s);else if("LineString"===n)Z(e,h,o,i,s,!1,a.lineMetrics);else if("MultiLineString"===n)E(e,h,o,i,s,!1);else if("Polygon"===n)E(e,h,o,i,s,!0);else if("MultiPolygon"===n)for(const t of e){const e=[];E(t,e,o,i,s,!0),e.length&&h.push(e);}if(h.length){if(a.lineMetrics&&"LineString"===n){for(const e of h)l.push(D(t.id,n,e,t.tags));continue}"LineString"!==n&&"MultiLineString"!==n||(1===h.length?(n="LineString",h=h[0]):n="MultiLineString"),"Point"!==n&&"MultiPoint"!==n||(n=3===h.length?"Point":"MultiPoint"),l.push(D(t.id,n,h,t.tags));}}return l.length?l:null}function A(e,t,o,i,s){for(let n=0;n<e.length;n+=3){const r=e[n+s];r>=o&&r<=i&&j(t,e[n],e[n+1],e[n+2]);}}function Z(e,t,o,i,s,n,r){let a=R(e);const l=0===s?N:W;let c,h,u=e.start;for(let d=0;d<e.length-3;d+=3){const g=e[d],f=e[d+1],p=e[d+2],m=e[d+3],y=e[d+4],v=0===s?g:f,x=0===s?m:y;let _=!1;r&&(c=Math.sqrt(Math.pow(g-m,2)+Math.pow(f-y,2))),v<o?x>o&&(h=l(a,g,f,m,y,o),r&&(a.start=u+c*h)):v>i?x<i&&(h=l(a,g,f,m,y,i),r&&(a.start=u+c*h)):j(a,g,f,p),x<o&&v>=o&&(h=l(a,g,f,m,y,o),_=!0),x>i&&v<=i&&(h=l(a,g,f,m,y,i),_=!0),!n&&_&&(r&&(a.end=u+c*h),t.push(a),a=R(e)),r&&(u+=c);}let d=e.length-3;const g=e[d],f=e[d+1],p=0===s?g:f;p>=o&&p<=i&&j(a,g,f,e[d+2]),d=a.length-3,n&&d>=3&&(a[d]!==a[0]||a[d+1]!==a[1])&&j(a,a[0],a[1],a[2]),a.length&&t.push(a);}function R(e){const t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function E(e,t,o,i,s,n){for(const r of e)Z(r,t,o,i,s,n,!1);}function j(e,t,o,i){e.push(t,o,i);}function N(e,t,o,i,s,n){const r=(n-t)/(i-t);return j(e,n,o+(s-o)*r,1),r}function W(e,t,o,i,s,n){const r=(n-o)/(s-o);return j(e,t+(i-t)*r,n,1),r}function J(e,t){const o=[];for(let i=0;i<e.length;i++){const s=e[i],n=s.type;let r;if("Point"===n||"MultiPoint"===n||"LineString"===n)r=Y(s.geometry,t);else if("MultiLineString"===n||"Polygon"===n){r=[];for(const e of s.geometry)r.push(Y(e,t));}else if("MultiPolygon"===n){r=[];for(const e of s.geometry){const o=[];for(const i of e)o.push(Y(i,t));r.push(o);}}o.push(D(s.id,n,r,s.tags));}return o}function Y(e,t){const o=[];o.size=e.size,void 0!==e.start&&(o.start=e.start,o.end=e.end);for(let i=0;i<e.length;i+=3)o.push(e[i]+t,e[i+1],e[i+2]);return o}function q(e,t){if(e.transformed)return e;const o=1<<e.z,i=e.x,s=e.y;for(const n of e.features){const e=n.geometry,r=n.type;if(n.geometry=[],1===r)for(let r=0;r<e.length;r+=2)n.geometry.push(H(e[r],e[r+1],t,o,i,s));else for(let r=0;r<e.length;r++){const a=[];for(let n=0;n<e[r].length;n+=2)a.push(H(e[r][n],e[r][n+1],t,o,i,s));n.geometry.push(a);}}return e.transformed=!0,e}function H(e,t,o,i,s,n){return [Math.round(o*(e*i-s)),Math.round(o*(t*i-n))]}function X(e,t,o,i,s){const n=t===s.maxZoom?0:s.tolerance/((1<<t)*s.extent),r={features:[],numPoints:0,numSimplified:0,numFeatures:e.length,source:null,x:o,y:i,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const t of e)B(r,t,n,s);return r}function B(e,t,o,i){const s=t.geometry,n=t.type,r=[];if(e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),"Point"===n||"MultiPoint"===n)for(let t=0;t<s.length;t+=3)r.push(s[t],s[t+1]),e.numPoints++,e.numSimplified++;else if("LineString"===n)$(r,s,e,o,!1,!1);else if("MultiLineString"===n||"Polygon"===n)for(let t=0;t<s.length;t++)$(r,s[t],e,o,"Polygon"===n,0===t);else if("MultiPolygon"===n)for(let t=0;t<s.length;t++){const i=s[t];for(let t=0;t<i.length;t++)$(r,i[t],e,o,!0,0===t);}if(r.length){let o=t.tags||null;if("LineString"===n&&i.lineMetrics){o={};for(const e in t.tags)o[e]=t.tags[e];o.mapbox_clip_start=s.start/s.size,o.mapbox_clip_end=s.end/s.size;}const a={geometry:r,type:"Polygon"===n||"MultiPolygon"===n?3:"LineString"===n||"MultiLineString"===n?2:1,tags:o};null!==t.id&&(a.id=t.id),e.features.push(a);}}function $(e,t,o,i,s,n){const r=i*i;if(i>0&&t.size<(s?r:i))return void(o.numPoints+=t.length/3);const a=[];for(let e=0;e<t.length;e+=3)(0===i||t[e+2]>r)&&(o.numSimplified++,a.push(t[e],t[e+1])),o.numPoints++;s&&function(e,t){let o=0;for(let t=0,i=e.length,s=i-2;t<i;s=t,t+=2)o+=(e[t]-e[s])*(e[t+1]+e[s+1]);if(o>0===t)for(let t=0,o=e.length;t<o/2;t+=2){const i=e[t],s=e[t+1];e[t]=e[o-2-t],e[t+1]=e[o-1-t],e[o-2-t]=i,e[o-1-t]=s;}}(a,n),e.push(a);}const U={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class V{constructor(e,t){const o=(t=this.options=function(e,t){for(const o in t)e[o]=t[o];return e}(Object.create(U),t)).debug;if(o&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");let i=function(e,t){const o=[];if("FeatureCollection"===e.type)for(let i=0;i<e.features.length;i++)k(o,e.features[i],t,i);else k(o,"Feature"===e.type?e:{geometry:e},t);return o}(e,t);this.tiles={},this.tileCoords=[],o&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),i=function(e,t){const o=t.buffer/t.extent;let i=e;const s=G(e,1,-1-o,o,0,-1,2,t),n=G(e,1,1-o,2+o,0,-1,2,t);return (s||n)&&(i=G(e,1,-o,1+o,0,-1,2,t)||[],s&&(i=J(s,1).concat(i)),n&&(i=i.concat(J(n,-1)))),i}(i,t),i.length&&this.splitTile(i,0,0,0),o&&(i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)));}splitTile(e,t,o,i,s,n,r){const a=[e,t,o,i],l=this.options,c=l.debug;for(;a.length;){i=a.pop(),o=a.pop(),t=a.pop(),e=a.pop();const h=1<<t,u=K(t,o,i);let d=this.tiles[u];if(!d&&(c>1&&console.time("creation"),d=this.tiles[u]=X(e,t,o,i,l),this.tileCoords.push({z:t,x:o,y:i}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,o,i,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));const e=`z${t}`;this.stats[e]=(this.stats[e]||0)+1,this.total++;}if(d.source=e,null==s){if(t===l.indexMaxZoom||d.numPoints<=l.indexMaxPoints)continue}else {if(t===l.maxZoom||t===s)continue;if(null!=s){const e=s-t;if(o!==n>>e||i!==r>>e)continue}}if(d.source=null,0===e.length)continue;c>1&&console.time("clipping");const g=.5*l.buffer/l.extent,f=.5-g,p=.5+g,m=1+g;let y=null,v=null,x=null,_=null,w=G(e,h,o-g,o+p,0,d.minX,d.maxX,l),S=G(e,h,o+f,o+m,0,d.minX,d.maxX,l);e=null,w&&(y=G(w,h,i-g,i+p,1,d.minY,d.maxY,l),v=G(w,h,i+f,i+m,1,d.minY,d.maxY,l),w=null),S&&(x=G(S,h,i-g,i+p,1,d.minY,d.maxY,l),_=G(S,h,i+f,i+m,1,d.minY,d.maxY,l),S=null),c>1&&console.timeEnd("clipping"),a.push(y||[],t+1,2*o,2*i),a.push(v||[],t+1,2*o,2*i+1),a.push(x||[],t+1,2*o+1,2*i),a.push(_||[],t+1,2*o+1,2*i+1);}}getTile(e,t,o){e=+e,t=+t,o=+o;const i=this.options,{extent:s,debug:n}=i;if(e<0||e>24)return null;const r=1<<e,a=K(e,t=t+r&r-1,o);if(this.tiles[a])return q(this.tiles[a],s);n>1&&console.log("drilling down to z%d-%d-%d",e,t,o);let l,c=e,h=t,u=o;for(;!l&&c>0;)c--,h>>=1,u>>=1,l=this.tiles[K(c,h,u)];return l&&l.source?(n>1&&(console.log("found parent tile z%d-%d-%d",c,h,u),console.time("drilling down")),this.splitTile(l.source,c,h,u,e,t,o),n>1&&console.timeEnd("drilling down"),this.tiles[a]?q(this.tiles[a],s):null):null}}function K(e,t,o){return 32*((1<<e)*o+t)+e}class Q extends h{constructor(e,t,o,i=ee){super(e,t,o),this._dataUpdateable=new Map,this._createGeoJSONIndex=i;}loadVectorTile(t,o){return e._(this,void 0,void 0,(function*(){const o=t.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const i=this._geoJSONIndex.getTile(o.z,o.x,o.y);return i?l(new e.d2(i.features,{version:2,extent:e.a5})):null}))}loadData(t){return e._(this,void 0,void 0,(function*(){var o;null===(o=this._pendingRequest)||void 0===o||o.abort();const i=this._startPerformance(t);this._pendingRequest=new AbortController;try{(!this._pendingData||t.request||t.data||t.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON(t,this._pendingRequest));const e=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex(e,t),this.loaded={};const o={};return t.request&&(o.data=e),this._finishPerformance(i,t,o),o}catch(t){if(delete this._pendingRequest,e.Z(t))return {abandoned:!0};throw t}}))}_startPerformance(t){var o;if(null===(o=null==t?void 0:t.request)||void 0===o?void 0:o.collectResourceTiming)return new e.c_(t.request)}_finishPerformance(e,t,o){if(!e)return;const i=e.finish();i&&(o.resourceTiming={},o.resourceTiming[t.source]=JSON.parse(JSON.stringify(i)));}getData(){return e._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(e){const t=this.loaded;return t&&t[e.uid]?super.reloadTile(e):this.loadTile(e)}loadAndProcessGeoJSON(t,o){return e._(this,void 0,void 0,(function*(){let e;if(t.request?e=yield this.loadGeoJSONFromUrl(t.request,t.promoteId,o):t.data?e=this._loadGeoJSONFromObject(t.data,t.promoteId):t.dataDiff&&(e=this._loadGeoJSONFromDiff(t.dataDiff,t.promoteId,t.source)),delete this._pendingRequest,"object"!=typeof e)throw new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`);return p(e,!0),t.filter&&(e=this._filterGeoJSON(e,t.filter)),e}))}loadGeoJSONFromUrl(t,o,i){return e._(this,void 0,void 0,(function*(){const s=yield e.j(t,i);return this._dataUpdateable=e.a7(s.data,o),s.data}))}_loadGeoJSONFromObject(t,o){return this._dataUpdateable=e.a7(t,o),t}_loadGeoJSONFromDiff(t,o,i){if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${i}`);e.a8(this._dataUpdateable,t,o);const s=Array.from(this._dataUpdateable.values());return this._toFeatureCollection(s)}_filterGeoJSON(t,o){const i=e.d3(o,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===i.result)throw new Error(i.value.map((e=>`${e.key}: ${e.message}`)).join(", "));const s=t.features.filter((e=>i.value.evaluate({zoom:0},e)));return this._toFeatureCollection(s)}_toFeatureCollection(e){return {type:"FeatureCollection",features:e}}removeSource(t){return e._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort();}))}getClusterExpansionZoom(e){return this._geoJSONIndex.getClusterExpansionZoom(e.clusterId)}getClusterChildren(e){return this._geoJSONIndex.getChildren(e.clusterId)}getClusterLeaves(e){return this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset)}}function ee(t,o){return o.cluster?new x(function({superclusterOptions:t,clusterProperties:o}){if(!o||!t)return t;const i={},s={},n={accumulated:null,zoom:0},r={properties:null},a=Object.keys(o);for(const t of a){const[n,r]=o[t],a=e.d3(r),l=e.d3("string"==typeof n?[n,["accumulated"],["get",t]]:n);i[t]=a.value,s[t]=l.value;}return t.map=e=>{r.properties=e;const t={};for(const e of a)t[e]=i[e].evaluate(n,r);return t},t.reduce=(e,t)=>{r.properties=t;for(const t of a)n.accumulated=e[t],e[t]=s[t].evaluate(n,r);},t}(o)).load(t.features):function(e,t){return new V(e,t)}(t,o.geojsonVtOptions)}class te{constructor(t){this.self=t,this.actor=new e.L(t),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(e,t)=>{if(this.externalWorkerSourceTypes[e])throw new Error(`Worker source with name "${e}" already registered.`);this.externalWorkerSourceTypes[e]=t;},this.self.addProtocol=e.cJ,this.self.removeProtocol=e.cK,this.self.registerRTLTextPlugin=t=>{e.d4.setMethods(t);},this.actor.registerMessageHandler("LDT",((e,t)=>this._getDEMWorkerSource(e,t.source).loadTile(t))),this.actor.registerMessageHandler("RDT",((t,o)=>e._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(t,o.source).removeTile(o);})))),this.actor.registerMessageHandler("GCEZ",((t,o)=>e._(this,void 0,void 0,(function*(){return this._getWorkerSource(t,o.type,o.source).getClusterExpansionZoom(o)})))),this.actor.registerMessageHandler("GCC",((t,o)=>e._(this,void 0,void 0,(function*(){return this._getWorkerSource(t,o.type,o.source).getClusterChildren(o)})))),this.actor.registerMessageHandler("GCL",((t,o)=>e._(this,void 0,void 0,(function*(){return this._getWorkerSource(t,o.type,o.source).getClusterLeaves(o)})))),this.actor.registerMessageHandler("LD",((e,t)=>this._getWorkerSource(e,t.type,t.source).loadData(t))),this.actor.registerMessageHandler("GD",((e,t)=>this._getWorkerSource(e,t.type,t.source).getData())),this.actor.registerMessageHandler("LT",((e,t)=>this._getWorkerSource(e,t.type,t.source).loadTile(t))),this.actor.registerMessageHandler("RT",((e,t)=>this._getWorkerSource(e,t.type,t.source).reloadTile(t))),this.actor.registerMessageHandler("AT",((e,t)=>this._getWorkerSource(e,t.type,t.source).abortTile(t))),this.actor.registerMessageHandler("RMT",((e,t)=>this._getWorkerSource(e,t.type,t.source).removeTile(t))),this.actor.registerMessageHandler("RS",((t,o)=>e._(this,void 0,void 0,(function*(){if(!this.workerSources[t]||!this.workerSources[t][o.type]||!this.workerSources[t][o.type][o.source])return;const e=this.workerSources[t][o.type][o.source];delete this.workerSources[t][o.type][o.source],void 0!==e.removeSource&&e.removeSource(o);})))),this.actor.registerMessageHandler("RM",(t=>e._(this,void 0,void 0,(function*(){delete this.layerIndexes[t],delete this.availableImages[t],delete this.workerSources[t],delete this.demWorkerSources[t],this.globalStates.delete(t);})))),this.actor.registerMessageHandler("SR",((t,o)=>e._(this,void 0,void 0,(function*(){this.referrer=o;})))),this.actor.registerMessageHandler("SRPS",((e,t)=>this._syncRTLPluginState(e,t))),this.actor.registerMessageHandler("IS",((t,o)=>e._(this,void 0,void 0,(function*(){this.self.importScripts(o);})))),this.actor.registerMessageHandler("SI",((e,t)=>this._setImages(e,t))),this.actor.registerMessageHandler("UL",((t,o)=>e._(this,void 0,void 0,(function*(){this._getLayerIndex(t).update(o.layers,o.removedIds,this._getGlobalState(t));})))),this.actor.registerMessageHandler("UGS",((t,o)=>e._(this,void 0,void 0,(function*(){const e=this._getGlobalState(t);for(const t in o)e[t]=o[t];})))),this.actor.registerMessageHandler("SL",((t,o)=>e._(this,void 0,void 0,(function*(){this._getLayerIndex(t).replace(o,this._getGlobalState(t));}))));}_getGlobalState(e){let t=this.globalStates.get(e);return t||(t={},this.globalStates.set(e,t)),t}_setImages(t,o){return e._(this,void 0,void 0,(function*(){this.availableImages[t]=o;for(const e in this.workerSources[t]){const i=this.workerSources[t][e];for(const e in i)i[e].availableImages=o;}}))}_syncRTLPluginState(t,o){return e._(this,void 0,void 0,(function*(){return yield e.d4.syncState(o,this.self.importScripts)}))}_getAvailableImages(e){let t=this.availableImages[e];return t||(t=[]),t}_getLayerIndex(e){let o=this.layerIndexes[e];return o||(o=this.layerIndexes[e]=new t),o}_getWorkerSource(e,t,o){if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][o]){const i={sendAsync:(t,o)=>(t.targetMapId=e,this.actor.sendAsync(t,o))};switch(t){case "vector":this.workerSources[e][t][o]=new h(i,this._getLayerIndex(e),this._getAvailableImages(e));break;case "geojson":this.workerSources[e][t][o]=new Q(i,this._getLayerIndex(e),this._getAvailableImages(e));break;default:this.workerSources[e][t][o]=new this.externalWorkerSourceTypes[t](i,this._getLayerIndex(e),this._getAvailableImages(e));}}return this.workerSources[e][t][o]}_getDEMWorkerSource(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new u),this.demWorkerSources[e][t]}}return e.i(self)&&(self.worker=new te(self)),te}));

define("index",["exports","./shared"],(function(e,t){"use strict";var i="5.15.0";function a(){var e=new t.A(4);return t.A!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}let r,o,s;const n={frame(e,i,a){const r=requestAnimationFrame((e=>{o(),i(e);})),{unsubscribe:o}=t.s(e.signal,"abort",(()=>{o(),cancelAnimationFrame(r),a(new t.a(e.signal.reason));}),!1);},frameAsync(e){return new Promise(((t,i)=>{this.frame(e,t,i);}))},getImageData(e,t=0){return this.getImageCanvasContext(e).getImageData(-t,-t,e.width+2*t,e.height+2*t)},getImageCanvasContext(e){const t=window.document.createElement("canvas"),i=t.getContext("2d",{willReadFrequently:!0});if(!i)throw new Error("failed to create canvas 2d context");return t.width=e.width,t.height=e.height,i.drawImage(e,0,0,e.width,e.height),i},resolveURL:e=>(r||(r=document.createElement("a")),r.href=e,r.href),hardwareConcurrency:"undefined"!=typeof navigator&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return void 0!==s?s:!!matchMedia&&(null==o&&(o=matchMedia("(prefers-reduced-motion: reduce)")),o.matches)},set prefersReducedMotion(e){s=e;}},l=new class{constructor(){this._realTime="undefined"!=typeof performance&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null;}getCurrentTime(){return null!==this._frozenAt?this._frozenAt:this._realTime()}setNow(e){this._frozenAt=e;}restoreNow(){this._frozenAt=null;}isFrozen(){return null!==this._frozenAt}};function c(){return l.getCurrentTime()}class h{static testProp(e){if(!h.docStyle)return e[0];for(let t=0;t<e.length;t++)if(e[t]in h.docStyle)return e[t];return e[0]}static create(e,t,i){const a=window.document.createElement(e);return void 0!==t&&(a.className=t),i&&i.appendChild(a),a}static createNS(e,t){return window.document.createElementNS(e,t)}static disableDrag(){h.docStyle&&h.selectProp&&(h.userSelect=h.docStyle[h.selectProp],h.docStyle[h.selectProp]="none");}static enableDrag(){h.docStyle&&h.selectProp&&(h.docStyle[h.selectProp]=h.userSelect);}static setTransform(e,t){e.style[h.transformProp]=t;}static addEventListener(e,t,i,a={}){e.addEventListener(t,i,"passive"in a?a:a.capture);}static removeEventListener(e,t,i,a={}){e.removeEventListener(t,i,"passive"in a?a:a.capture);}static suppressClickInternal(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",h.suppressClickInternal,!0);}static suppressClick(){window.addEventListener("click",h.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",h.suppressClickInternal,!0);}),0);}static getScale(e){const t=e.getBoundingClientRect();return {x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}static getPoint(e,i,a){const r=i.boundingClientRect;return new t.P((a.clientX-r.left)/i.x-e.clientLeft,(a.clientY-r.top)/i.y-e.clientTop)}static mousePos(e,t){const i=h.getScale(e);return h.getPoint(e,i,t)}static touchPos(e,t){const i=[],a=h.getScale(e);for(let r=0;r<t.length;r++)i.push(h.getPoint(e,a,t[r]));return i}static mouseButton(e){return e.button}static remove(e){e.parentNode&&e.parentNode.removeChild(e);}static sanitize(e){const t=(new DOMParser).parseFromString(e,"text/html").body||document.createElement("body"),i=t.querySelectorAll("script");for(const e of i)e.remove();return h.clean(t),t.innerHTML}static isPossiblyDangerous(e,t){const i=t.replace(/\s+/g,"").toLowerCase();return !(!["src","href","xlink:href"].includes(e)||!i.includes("javascript:")&&!i.includes("data:"))||!!e.startsWith("on")||void 0}static clean(e){const t=e.children;for(const e of t)h.removeAttributes(e),h.clean(e);}static removeAttributes(e){for(const{name:t,value:i}of e.attributes)h.isPossiblyDangerous(t,i)&&e.removeAttribute(t);}}h.docStyle="undefined"!=typeof window&&window.document&&window.document.documentElement.style,h.selectProp=h.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),h.transformProp=h.testProp(["transform","WebkitTransform"]);const u={supported:!1,testSupport:function(e){!p&&_&&(m?f(e):d=e);}};let d,_,p=!1,m=!1;function f(e){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,_),e.isContextLost())return;u.supported=!0;}catch(e){}e.deleteTexture(t),p=!0;}var g;"undefined"!=typeof document&&(_=document.createElement("img"),_.onload=()=>{d&&f(d),d=null,m=!0;},_.onerror=()=>{p=!0,d=null;},_.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(e){let i,a,r,o;e.resetRequestQueue=()=>{i=[],a=0,r=0,o={};},e.addThrottleControl=e=>{const t=r++;return o[t]=e,t},e.removeThrottleControl=e=>{delete o[e],n();},e.getImage=(e,a,r=!0)=>new Promise(((o,s)=>{u.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),t.e(e,{type:"image"}),i.push({abortController:a,requestParameters:e,supportImageRefresh:r,state:"queued",onError:e=>{s(e);},onSuccess:e=>{o(e);}}),n();}));const s=e=>t._(this,void 0,void 0,(function*(){e.state="running";const{requestParameters:i,supportImageRefresh:r,onError:o,onSuccess:s,abortController:c}=e,h=!1===r&&!t.i(self)&&!t.g(i.url)&&(!i.headers||Object.keys(i.headers).reduce(((e,t)=>e&&"accept"===t),!0));a++;const u=h?l(i,c):t.m(i,c);try{const i=yield u;delete e.abortController,e.state="completed",i.data instanceof HTMLImageElement||t.b(i.data)?s(i):i.data&&s({data:yield(d=i.data,"function"==typeof createImageBitmap?t.f(d):t.h(d)),cacheControl:i.cacheControl,expires:i.expires});}catch(t){delete e.abortController,o(t);}finally{a--,n();}var d;})),n=()=>{const e=(()=>{for(const e of Object.keys(o))if(o[e]())return !0;return !1})()?t.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:t.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let t=a;t<e&&i.length>0;t++){const e=i.shift();e.abortController.signal.aborted?t--:s(e);}},l=(e,i)=>new Promise(((a,r)=>{const o=new Image,s=e.url,n=e.credentials;n&&"include"===n?o.crossOrigin="use-credentials":(n&&"same-origin"===n||!t.d(s))&&(o.crossOrigin="anonymous"),i.signal.addEventListener("abort",(()=>{o.src="",r(new t.a(i.signal.reason));})),o.fetchPriority="high",o.onload=()=>{o.onerror=o.onload=null,a({data:o});},o.onerror=()=>{o.onerror=o.onload=null,i.signal.aborted||r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));},o.src=s;}));}(g||(g={})),g.resetRequestQueue();class v{constructor(e){this._transformRequestFn=null!=e?e:null;}transformRequest(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}setTransformRequest(e){this._transformRequestFn=e;}}function x(e){const t=[];if("string"==typeof e)t.push({id:"default",url:e});else if(e&&e.length>0){const i=[];for(const{id:a,url:r}of e){const e=`${a}${r}`;-1===i.indexOf(e)&&(i.push(e),t.push({id:a,url:r}));}}return t}function b(e,t,i){try{const a=new URL(e);return a.pathname+=`${t}${i}`,a.toString()}catch(t){throw new Error(`Invalid sprite URL "${e}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function y(e){const{userImage:t}=e;return !!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}class w extends t.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.R({width:1,height:1}),this.dirty=!0;}destroy(){this.atlasTexture&&(this.atlasTexture.destroy(),this.atlasTexture=null);for(const e of Object.keys(this.images))this.removeImage(e);this.patterns={},this.atlasImage=new t.R({width:1,height:1}),this.dirty=!0;}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:e,promiseResolve:t}of this.requestors)t(this._getImagesForIds(e));this.requestors=[];}}getImage(e){const i=this.images[e];if(i&&!i.data&&i.spriteData){const e=i.spriteData;i.data=new t.R({width:e.width,height:e.height},e.context.getImageData(e.x,e.y,e.width,e.height).data),i.spriteData=null;}return i}addImage(e,t){if(this.images[e])throw new Error(`Image id ${e} already exist, use updateImage instead`);this._validate(e,t)&&(this.images[e]=t);}_validate(e,i){let a=!0;const r=i.data||i.spriteData;return this._validateStretch(i.stretchX,r&&r.width)||(this.fire(new t.k(new Error(`Image "${e}" has invalid "stretchX" value`))),a=!1),this._validateStretch(i.stretchY,r&&r.height)||(this.fire(new t.k(new Error(`Image "${e}" has invalid "stretchY" value`))),a=!1),this._validateContent(i.content,i)||(this.fire(new t.k(new Error(`Image "${e}" has invalid "content" value`))),a=!1),a}_validateStretch(e,t){if(!e)return !0;let i=0;for(const a of e){if(a[0]<i||a[1]<a[0]||t<a[1])return !1;i=a[1];}return !0}_validateContent(e,t){if(!e)return !0;if(4!==e.length)return !1;const i=t.spriteData,a=i&&i.width||t.data.width,r=i&&i.height||t.data.height;return !(e[0]<0||a<e[0]||e[1]<0||r<e[1]||e[2]<0||a<e[2]||e[3]<0||r<e[3]||e[2]<e[0]||e[3]<e[1])}updateImage(e,t,i=!0){const a=this.getImage(e);if(i&&(a.data.width!==t.data.width||a.data.height!==t.data.height))throw new Error(`size mismatch between old image (${a.data.width}x${a.data.height}) and new image (${t.data.width}x${t.data.height}).`);t.version=a.version+1,this.images[e]=t,this.updatedImages[e]=!0;}removeImage(e){const t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove();}listImages(){return Object.keys(this.images)}getImages(e){return new Promise(((t,i)=>{let a=!0;if(!this.isLoaded())for(const t of e)this.images[t]||(a=!1);this.isLoaded()||a?t(this._getImagesForIds(e)):this.requestors.push({ids:e,promiseResolve:t});}))}_getImagesForIds(e){const i={};for(const a of e){let e=this.getImage(a);e||(this.fire(new t.l("styleimagemissing",{id:a})),e=this.getImage(a)),e?i[a]={data:e.data.clone(),pixelRatio:e.pixelRatio,sdf:e.sdf,version:e.version,stretchX:e.stretchX,stretchY:e.stretchY,content:e.content,textFitWidth:e.textFitWidth,textFitHeight:e.textFitHeight,hasRenderCallback:Boolean(e.userImage&&e.userImage.render)}:t.w(`Image "${a}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`);}return i}getPixelSize(){const{width:e,height:t}=this.atlasImage;return {width:e,height:t}}getPattern(e){const i=this.patterns[e],a=this.getImage(e);if(!a)return null;if(i&&i.position.version===a.version)return i.position;if(i)i.position.version=a.version;else {const i={w:a.data.width+2,h:a.data.height+2,x:0,y:0},r=new t.I(i,a);this.patterns[e]={bin:i,position:r};}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const i=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.T(e,this.atlasImage,i.RGBA),this.atlasTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE);}_updatePatternAtlas(){const e=[];for(const t in this.patterns)e.push(this.patterns[t].bin);const{w:i,h:a}=t.p(e),r=this.atlasImage;r.resize({width:i||1,height:a||1});for(const e in this.patterns){const{bin:i}=this.patterns[e],a=i.x+1,o=i.y+1,s=this.getImage(e).data,n=s.width,l=s.height;t.R.copy(s,r,{x:0,y:0},{x:a,y:o},{width:n,height:l}),t.R.copy(s,r,{x:0,y:l-1},{x:a,y:o-1},{width:n,height:1}),t.R.copy(s,r,{x:0,y:0},{x:a,y:o+l},{width:n,height:1}),t.R.copy(s,r,{x:n-1,y:0},{x:a-1,y:o},{width:1,height:l}),t.R.copy(s,r,{x:0,y:0},{x:a+n,y:o},{width:1,height:l});}this.dirty=!0;}beginFrame(){this.callbackDispatchedThisFrame={};}dispatchRenderCallbacks(e){for(const i of e){if(this.callbackDispatchedThisFrame[i])continue;this.callbackDispatchedThisFrame[i]=!0;const e=this.getImage(i);e||t.w(`Image with ID: "${i}" was not found`),y(e)&&this.updateImage(i,e);}}cloneImages(){const e={};for(const t in this.images){const i=this.images[t];e[t]=Object.assign(Object.assign({},i),{data:i.data?i.data.clone():null});}return e}}const T=1e20;function P(e,t,i,a,r,o,s,n,l){for(let c=t;c<t+a;c++)C(e,i*o+c,o,r,s,n,l);for(let c=i;c<i+r;c++)C(e,c*o+t,1,a,s,n,l);}function C(e,t,i,a,r,o,s){o[0]=0,s[0]=-T,s[1]=T,r[0]=e[t];for(let n=1,l=0,c=0;n<a;n++){r[n]=e[t+n*i];const a=n*n;do{const e=o[l];c=(r[n]-r[e]+a-e*e)/(n-e)/2;}while(c<=s[l]&&--l>-1);l++,o[l]=n,s[l]=c,s[l+1]=T;}for(let n=0,l=0;n<a;n++){for(;s[l+1]<n;)l++;const a=o[l],c=n-a;e[t+n*i]=r[a]+c*c;}}const I=t.v.layout_symbol["text-font"].default.join(",");class M{constructor(e,t,i){this.requestManager=e,this.localIdeographFontFamily=t,this.entries={},this.lang=i;}setURL(e){this.url=e;}getGlyphs(e){return t._(this,void 0,void 0,(function*(){const t=[];for(const i in e)for(const a of e[i])t.push(this._getAndCacheGlyphsPromise(i,a));const i=yield Promise.all(t),a={};for(const{stack:e,id:t,glyph:r}of i)a[e]||(a[e]={}),a[e][t]=r&&{id:r.id,bitmap:r.bitmap.clone(),metrics:r.metrics};return a}))}_getAndCacheGlyphsPromise(e,i){return t._(this,void 0,void 0,(function*(){let t=this.entries[e];t||(t=this.entries[e]={glyphs:{},requests:{},ranges:{}});let a=t.glyphs[i];return void 0!==a?{stack:e,id:i,glyph:a}:!this.url||this._charUsesLocalIdeographFontFamily(i)?(a=t.glyphs[i]=this._drawGlyph(t,e,i),{stack:e,id:i,glyph:a}):yield this._downloadAndCacheRangePromise(e,i)}))}_downloadAndCacheRangePromise(e,i){return t._(this,void 0,void 0,(function*(){const t=this.entries[e],a=Math.floor(i/256);if(t.ranges[a])return {stack:e,id:i,glyph:null};if(!t.requests[a]){const i=M.loadGlyphRange(e,a,this.url,this.requestManager);t.requests[a]=i;}try{const r=yield t.requests[a];for(const e in r)t.glyphs[+e]=r[+e];return t.ranges[a]=!0,{stack:e,id:i,glyph:r[i]||null}}catch(r){const o=t.glyphs[i]=this._drawGlyph(t,e,i);return this._warnOnMissingGlyphRange(o,a,i,r),{stack:e,id:i,glyph:o}}}))}_warnOnMissingGlyphRange(e,i,a,r){const o=256*i,s=o+255,n=a.toString(16).padStart(4,"0").toUpperCase();t.w(`Unable to load glyph range ${i}, ${o}-${s}. Rendering codepoint U+${n} locally instead. ${r}`);}_charUsesLocalIdeographFontFamily(e){return !!this.localIdeographFontFamily&&t.q(e)}_drawGlyph(e,i,a){const r=i===I&&""!==this.localIdeographFontFamily&&this._charUsesLocalIdeographFontFamily(a),o=r?"ideographTinySDF":"tinySDF";e[o]||(e[o]=this._createTinySDF(r?this.localIdeographFontFamily:i));const s=e[o].draw(String.fromCodePoint(a));return {id:a,bitmap:new t.r({width:s.width||60,height:s.height||60},s.data),metrics:{width:s.glyphWidth/2||24,height:s.glyphHeight/2||24,left:s.glyphLeft/2+.5||0,top:s.glyphTop/2-27.5||-8,advance:s.glyphAdvance/2||24,isDoubleResolution:!0}}}_createTinySDF(e){const t=e?e.split(","):[];t.push("sans-serif");const i=t.map((e=>/[-\w]+/.test(e)?e:`'${CSS.escape(e)}'`)).join(",");return new M.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:i,fontWeight:this._fontWeight(t[0]),fontStyle:this._fontStyle(t[0]),lang:this.lang})}_fontStyle(e){return /italic/i.test(e)?"italic":/oblique/i.test(e)?"oblique":"normal"}_fontWeight(e){const t={thin:100,hairline:100,"extra light":200,"ultra light":200,light:300,normal:400,regular:400,medium:500,semibold:600,demibold:600,bold:700,"extra bold":800,"ultra bold":800,black:900,heavy:900,"extra black":950,"ultra black":950};let i;for(const[a,r]of Object.entries(t))new RegExp(`\\b${a}\\b`,"i").test(e)&&(i=`${r}`);return i}destroy(){for(const e in this.entries){const t=this.entries[e];t.tinySDF&&(t.tinySDF=null),t.ideographTinySDF&&(t.ideographTinySDF=null),t.glyphs={},t.requests={},t.ranges={};}this.entries={};}}M.loadGlyphRange=function(e,i,a,r){return t._(this,void 0,void 0,(function*(){const o=256*i,s=o+255,n=r.transformRequest(a.replace("{fontstack}",e).replace("{range}",`${o}-${s}`),"Glyphs"),l=yield t.n(n,new AbortController);if(!l||!l.data)throw new Error(`Could not load glyph range. range: ${i}, ${o}-${s}`);const c={};for(const e of t.o(l.data))c[e.id]=e;return c}))},M.TinySDF=class{constructor({fontSize:e=24,buffer:t=3,radius:i=8,cutoff:a=.25,fontFamily:r="sans-serif",fontWeight:o="normal",fontStyle:s="normal",lang:n=null}={}){this.buffer=t,this.cutoff=a,this.radius=i,this.lang=n;const l=this.size=e+4*t,c=this._createCanvas(l),h=this.ctx=c.getContext("2d",{willReadFrequently:!0});h.font=`${s} ${o} ${e}px ${r}`,h.textBaseline="alphabetic",h.textAlign="left",h.fillStyle="black",this.gridOuter=new Float64Array(l*l),this.gridInner=new Float64Array(l*l),this.f=new Float64Array(l),this.z=new Float64Array(l+1),this.v=new Uint16Array(l);}_createCanvas(e){const t=document.createElement("canvas");return t.width=t.height=e,t}draw(e){const{width:t,actualBoundingBoxAscent:i,actualBoundingBoxDescent:a,actualBoundingBoxLeft:r,actualBoundingBoxRight:o}=this.ctx.measureText(e),s=Math.ceil(i),n=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-r))),l=Math.min(this.size-this.buffer,s+Math.ceil(a)),c=n+2*this.buffer,h=l+2*this.buffer,u=Math.max(c*h,0),d=new Uint8ClampedArray(u),_={data:d,width:c,height:h,glyphWidth:n,glyphHeight:l,glyphTop:s,glyphLeft:0,glyphAdvance:t};if(0===n||0===l)return _;const{ctx:p,buffer:m,gridInner:f,gridOuter:g}=this;this.lang&&(p.lang=this.lang),p.clearRect(m,m,n,l),p.fillText(e,m,m+s);const v=p.getImageData(m,m,n,l);g.fill(T,0,u),f.fill(0,0,u);for(let e=0;e<l;e++)for(let t=0;t<n;t++){const i=v.data[4*(e*n+t)+3]/255;if(0===i)continue;const a=(e+m)*c+t+m;if(1===i)g[a]=0,f[a]=T;else {const e=.5-i;g[a]=e>0?e*e:0,f[a]=e<0?e*e:0;}}P(g,0,0,c,h,c,this.f,this.v,this.z),P(f,m,m,n,l,c,this.f,this.v,this.z);for(let e=0;e<u;e++){const t=Math.sqrt(g[e])-Math.sqrt(f[e]);d[e]=Math.round(255-255*(t/this.radius+this.cutoff));}return _}};class E{constructor(){this.specification=t.u.light.position;}possiblyEvaluate(e,i){return t.F(e.expression.evaluate(i))}interpolate(e,i,a){return {x:t.G.number(e.x,i.x,a),y:t.G.number(e.y,i.y,a),z:t.G.number(e.z,i.z,a)}}}let S;class R extends t.E{constructor(e){super(),S=S||new t.t({anchor:new t.D(t.u.light.anchor),position:new E,color:new t.D(t.u.light.color),intensity:new t.D(t.u.light.intensity)}),this._transitionable=new t.x(S,void 0),this.setLight(e),this._transitioning=this._transitionable.untransitioned();}getLight(){return this._transitionable.serialize()}setLight(e,i={}){if(!this._validate(t.y,e,i))for(const i in e){const a=e[i];i.endsWith(t.z)?this._transitionable.setTransition(i.slice(0,-t.z.length),a):this._transitionable.setValue(i,a);}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning);}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e);}_validate(e,i,a){return (!a||!1!==a.validate)&&t.B(this,e.call(t.C,{value:i,style:{glyphs:!0,sprite:!0},styleSpec:t.u}))}}const z=new t.t({"sky-color":new t.D(t.u.sky["sky-color"]),"horizon-color":new t.D(t.u.sky["horizon-color"]),"fog-color":new t.D(t.u.sky["fog-color"]),"fog-ground-blend":new t.D(t.u.sky["fog-ground-blend"]),"horizon-fog-blend":new t.D(t.u.sky["horizon-fog-blend"]),"sky-horizon-blend":new t.D(t.u.sky["sky-horizon-blend"]),"atmosphere-blend":new t.D(t.u.sky["atmosphere-blend"])});class D extends t.E{constructor(e){super(),this._transitionable=new t.x(z,void 0),this.setSky(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new t.H(0));}setSky(e,i={}){if(!this._validate(t.J,e,i)){e||(e={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const i in e){const a=e[i];i.endsWith(t.z)?this._transitionable.setTransition(i.slice(0,-t.z.length),a):this._transitionable.setValue(i,a);}}}getSky(){return this._transitionable.serialize()}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning);}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e);}_validate(e,i,a={}){return !1!==(null==a?void 0:a.validate)&&t.B(this,e.call(t.C,t.e({value:i,style:{glyphs:!0,sprite:!0},styleSpec:t.u})))}calculateFogBlendOpacity(e){return e<60?0:e<70?(e-60)/10:1}}class A{constructor(e,t){this.width=e,this.height=t,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={};}getDash(e,t){const i=e.join(",")+String(t);return this.dashEntry[i]||(this.dashEntry[i]=this.addDash(e,t)),this.dashEntry[i]}getDashRanges(e,t,i){const a=[];let r=e.length%2==1?-e[e.length-1]*i:0,o=e[0]*i,s=!0;a.push({left:r,right:o,isDash:s,zeroLength:0===e[0]});let n=e[0];for(let t=1;t<e.length;t++){s=!s;const l=e[t];r=n*i,n+=l,o=n*i,a.push({left:r,right:o,isDash:s,zeroLength:0===l});}return a}addRoundDash(e,t,i){const a=t/2;for(let t=-i;t<=i;t++){const r=this.width*(this.nextRow+i+t);let o=0,s=e[o];for(let n=0;n<this.width;n++){n/s.right>1&&(s=e[++o]);const l=Math.abs(n-s.left),c=Math.abs(n-s.right),h=Math.min(l,c);let u;const d=t/i*(a+1);if(s.isDash){const e=a-Math.abs(d);u=Math.sqrt(h*h+e*e);}else u=a-Math.sqrt(h*h+d*d);this.data[r+n]=Math.max(0,Math.min(255,u+128));}}}addRegularDash(e){for(let t=e.length-1;t>=0;--t){const i=e[t],a=e[t+1];i.zeroLength?e.splice(t,1):a&&a.isDash===i.isDash&&(a.left=i.left,e.splice(t,1));}const t=e[0],i=e[e.length-1];t.isDash===i.isDash&&(t.left=i.left-this.width,i.right=t.right+this.width);const a=this.width*this.nextRow;let r=0,o=e[r];for(let t=0;t<this.width;t++){t/o.right>1&&(o=e[++r]);const i=Math.abs(t-o.left),s=Math.abs(t-o.right),n=Math.min(i,s);this.data[a+t]=Math.max(0,Math.min(255,(o.isDash?n:-n)+128));}}addDash(e,i){const a=i?7:0,r=2*a+1;if(this.nextRow+r>this.height)return t.w("LineAtlas out of space"),null;let o=0;for(let t=0;t<e.length;t++)o+=e[t];if(0!==o){const t=this.width/o,r=this.getDashRanges(e,this.width,t);i?this.addRoundDash(r,t,a):this.addRegularDash(r);}const s={y:this.nextRow+a,height:2*a,width:o};return this.nextRow+=r,this.dirty=!0,s}bind(e){const t=e.gl;this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.ALPHA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,this.width,this.height,0,t.ALPHA,t.UNSIGNED_BYTE,this.data));}}const L="maplibre_preloaded_worker_pool";class k{constructor(){this.active={};}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<k.workerCount;)this.workers.push(new Worker(t.c.WORKER_URL));return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((e=>{e.terminate();})),this.workers=null);}isPreloaded(){return !!this.active[L]}numActive(){return Object.keys(this.active).length}}const F=Math.floor(n.hardwareConcurrency/2);let B,O;function j(){return B||(B=new k),B}k.workerCount=t.K(globalThis)?Math.max(Math.min(F,3),1):1;class N{constructor(e,i){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=i;const a=this.workerPool.acquire(i);for(let e=0;e<a.length;e++){const r=new t.L(a[e],i);r.name=`Worker ${e}`,this.actors.push(r);}if(!this.actors.length)throw new Error("No actors found")}broadcast(e,t){const i=[];for(const a of this.actors)i.push(a.sendAsync({type:e,data:t}));return Promise.all(i)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(e=!0){this.actors.forEach((e=>{e.remove();})),this.actors=[],e&&this.workerPool.release(this.id);}registerMessageHandler(e,t){for(const i of this.actors)i.registerMessageHandler(e,t);}unregisterMessageHandler(e){for(const t of this.actors)t.unregisterMessageHandler(e);}}function Z(){return O||(O=new N(j(),t.M),O.registerMessageHandler("GR",((e,i,a)=>t.m(i,a)))),O}function G(e,i){const a=t.N();return t.O(a,a,[1,1,0]),t.Q(a,a,[.5*e.width,.5*e.height,1]),e.calculatePosMatrix?t.S(a,a,e.calculatePosMatrix(i.toUnwrapped())):a}function U(e,t,i,a,r,o,s){var n;const l=function(e,t,i){if(e)for(const a of e){const e=t[a];if(e&&e.source===i&&"fill-extrusion"===e.type)return !0}else for(const e in t){const a=t[e];if(a.source===i&&"fill-extrusion"===a.type)return !0}return !1}(null!==(n=null==r?void 0:r.layers)&&void 0!==n?n:null,t,e.id),c=o.maxPitchScaleFactor(),h=e.tilesIn(a,c,l);h.sort(V);const u=[];for(const a of h)u.push({wrappedTileID:a.tileID.wrapped().key,queryResults:a.tile.queryRenderedFeatures(t,i,e.getState(),a.queryGeometry,a.cameraQueryGeometry,a.scale,r,o,c,G(o,a.tileID),s?(e,t)=>s(a.tileID,e,t):void 0)});return function(e,t){for(const i in e)for(const a of e[i])q(a,t);return e}(function(e){const t={},i={};for(const a of e){const e=a.queryResults,r=a.wrappedTileID,o=i[r]=i[r]||{};for(const i in e){const a=e[i],r=o[i]=o[i]||{},s=t[i]=t[i]||[];for(const e of a)r[e.featureIndex]||(r[e.featureIndex]=!0,s.push(e));}}return t}(u),e)}function V(e,t){const i=e.tileID,a=t.tileID;return i.overscaledZ-a.overscaledZ||i.canonical.y-a.canonical.y||i.wrap-a.wrap||i.canonical.x-a.canonical.x}function q(e,t){const i=e.feature,a=t.getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=a;}function W(e,i,a){return t._(this,void 0,void 0,(function*(){let r=e;if(e.url?r=(yield t.j(i.transformRequest(e.url,"Source"),a)).data:yield n.frameAsync(a),!r)return null;const o=t.U(t.e(r,e),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return "vector_layers"in r&&r.vector_layers&&(o.vectorLayerIds=r.vector_layers.map((e=>e.id))),o}))}class ${constructor(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):Array.isArray(e)&&(4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1])));}setNorthEast(e){return this._ne=e instanceof t.V?new t.V(e.lng,e.lat):t.V.convert(e),this}setSouthWest(e){return this._sw=e instanceof t.V?new t.V(e.lng,e.lat):t.V.convert(e),this}extend(e){const i=this._sw,a=this._ne;let r,o;if(e instanceof t.V)r=e,o=e;else {if(!(e instanceof $))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend($.convert(e)):this.extend(t.V.convert(e)):e&&("lng"in e||"lon"in e)&&"lat"in e?this.extend(t.V.convert(e)):this;if(r=e._sw,o=e._ne,!r||!o)return this}return i||a?(i.lng=Math.min(r.lng,i.lng),i.lat=Math.min(r.lat,i.lat),a.lng=Math.max(o.lng,a.lng),a.lat=Math.max(o.lat,a.lat)):(this._sw=new t.V(r.lng,r.lat),this._ne=new t.V(o.lng,o.lat)),this}getCenter(){return new t.V((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new t.V(this.getWest(),this.getNorth())}getSouthEast(){return new t.V(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return [this._sw.toArray(),this._ne.toArray()]}toString(){return `LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return !(this._sw&&this._ne)}contains(e){const{lng:i,lat:a}=t.V.convert(e);let r=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(r=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=a&&a<=this._ne.lat&&r}intersects(e){if(!((e=$.convert(e)).getNorth()>=this.getSouth()&&e.getSouth()<=this.getNorth()))return !1;const i=Math.abs(this.getEast()-this.getWest()),a=Math.abs(e.getEast()-e.getWest());if(i>=360||a>=360)return !0;const r=t.W(this.getWest(),-180,180),o=t.W(this.getEast(),-180,180),s=t.W(e.getWest(),-180,180),n=t.W(e.getEast(),-180,180),l=r>=o,c=s>=n;return !(!l||!c)||(l?n>=r||s<=o:c?o>=s||r<=n:s<=o&&n>=r)}static convert(e){return e instanceof $?e:e?new $(e):e}static fromLngLat(e,i=0){const a=360*i/40075017,r=a/Math.cos(Math.PI/180*e.lat);return new $(new t.V(e.lng-r,e.lat-a),new t.V(e.lng+r,e.lat+a))}adjustAntiMeridian(){const e=new t.V(this._sw.lng,this._sw.lat),i=new t.V(this._ne.lng,this._ne.lat);return new $(e,e.lng>i.lng?new t.V(i.lng+360,i.lat):i)}}class H{constructor(e,t,i){this.bounds=$.convert(this.validateBounds(e)),this.minzoom=t||0,this.maxzoom=i||24;}validateBounds(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(e){const i=Math.pow(2,e.z),a=Math.floor(t.Y(this.bounds.getWest())*i),r=Math.floor(t.X(this.bounds.getNorth())*i),o=Math.ceil(t.Y(this.bounds.getEast())*i),s=Math.ceil(t.X(this.bounds.getSouth())*i);return e.x>=a&&e.x<o&&e.y>=r&&e.y<s}}class X extends t.E{constructor(e,i,a,r){if(super(),this.id=e,this.dispatcher=a,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.e(this,t.U(i,["url","scheme","tileSize","promoteId","encoding"])),this._options=t.e({type:"vector"},i),this._collectResourceTiming=i.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(r);}load(){return t._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new t.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield W(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.tileManagers[this.id].clearTiles(),e&&(t.e(this,e),e.bounds&&(this.tileBounds=new H(e.bounds,this.minzoom,this.maxzoom)),this.fire(new t.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.l("data",{dataType:"source",sourceDataType:"content"})));}catch(e){this._tileJSONRequest=null,this._loaded=!0,t.Z(e)||this.fire(new t.k(e));}}))}loaded(){return this._loaded}hasTile(e){return !this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load();}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.abort(),e(),this.load();}setTiles(e){return this.setSourceProperty((()=>{this._options.tiles=e;})),this}setUrl(e){return this.setSourceProperty((()=>{this.url=e,this._options.url=e;})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null);}serialize(){return t.e({},this._options)}loadTile(e){return t._(this,void 0,void 0,(function*(){const t=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),i={request:this.map._requestManager.transformRequest(t,"Tile"),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,encoding:this.encoding,overzoomParameters:this._getOverzoomParameters(e)};i.request.collectResourceTiming=this._collectResourceTiming;let a="RT";if(e.actor&&"expired"!==e.state){if("loading"===e.state)return new Promise(((t,i)=>{e.reloadPromise={resolve:t,reject:i};}))}else e.actor=this.dispatcher.getActor(),a="LT";e.abortController=new AbortController;try{const t=yield e.actor.sendAsync({type:a,data:i},e.abortController);if(delete e.abortController,e.aborted)return;this._afterTileLoadWorkerResponse(e,t);}catch(t){if(delete e.abortController,e.aborted)return;if(t&&404!==t.status)throw t;this._afterTileLoadWorkerResponse(e,null);}}))}_getOverzoomParameters(e){if(e.tileID.canonical.z<=this.maxzoom)return;if(void 0===this.map._zoomLevelsToOverscale)return;const t=e.tileID.scaledTo(this.maxzoom).canonical,i=t.url(this.tiles,this.map.getPixelRatio(),this.scheme);return {maxZoomTileID:t,overzoomRequest:this.map._requestManager.transformRequest(i,"Tile")}}_afterTileLoadWorkerResponse(e,t){if(t&&t.resourceTiming&&(e.resourceTiming=t.resourceTiming),t&&this.map._refreshExpiredTiles&&e.setExpiryData(t),e.loadVectorData(t,this.map.painter),e.reloadPromise){const t=e.reloadPromise;e.reloadPromise=null,this.loadTile(e).then(t.resolve).catch(t.reject);}}abortTile(e){return t._(this,void 0,void 0,(function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.actor&&(yield e.actor.sendAsync({type:"AT",data:{uid:e.uid,type:this.type,source:this.id}}));}))}unloadTile(e){return t._(this,void 0,void 0,(function*(){e.unloadVectorData(),e.actor&&(yield e.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}}));}))}hasTransition(){return !1}}class K extends t.E{constructor(e,i,a,r){super(),this.id=e,this.dispatcher=a,this.setEventedParent(r),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.e({type:"raster"},i),t.e(this,t.U(i,["url","scheme","tileSize"]));}load(){return t._(this,arguments,void 0,(function*(e=!1){this._loaded=!1,this.fire(new t.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const i=yield W(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,i&&(t.e(this,i),i.bounds&&(this.tileBounds=new H(i.bounds,this.minzoom,this.maxzoom)),this.fire(new t.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:e})));}catch(e){this._tileJSONRequest=null,this._loaded=!0,t.Z(e)||this.fire(new t.k(e));}}))}loaded(){return this._loaded}onAdd(e){this.map=e,this.load();}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null);}setSourceProperty(e){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),e(),this.load(!0);}setTiles(e){return this.setSourceProperty((()=>{this._options.tiles=e;})),this}setUrl(e){return this.setSourceProperty((()=>{this.url=e,this._options.url=e;})),this}serialize(){return t.e({},this._options)}hasTile(e){return !this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(e){return t._(this,void 0,void 0,(function*(){const i=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);e.abortController=new AbortController;try{const a=yield g.getImage(this.map._requestManager.transformRequest(i,"Tile"),e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(a&&a.data){this.map._refreshExpiredTiles&&(a.cacheControl||a.expires)&&e.setExpiryData({cacheControl:a.cacheControl,expires:a.expires});const i=this.map.painter.context,r=i.gl,o=a.data;e.texture=this.map.painter.getTileTexture(o.width),e.texture?e.texture.update(o,{useMipmap:!0}):(e.texture=new t.T(i,o,r.RGBA,{useMipmap:!0}),e.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE,r.LINEAR_MIPMAP_NEAREST)),e.state="loaded";}}catch(t){if(delete e.abortController,e.aborted)e.state="unloaded";else if(t)throw e.state="errored",t}}))}abortTile(e){return t._(this,void 0,void 0,(function*(){e.abortController&&(e.abortController.abort(),delete e.abortController);}))}unloadTile(e){return t._(this,void 0,void 0,(function*(){e.texture&&this.map.painter.saveTileTexture(e.texture);}))}hasTransition(){return !1}}class Y extends K{constructor(e,i,a,r){super(e,i,a,r),this.type="raster-dem",this.maxzoom=22,this._options=t.e({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox",this.redFactor=i.redFactor,this.greenFactor=i.greenFactor,this.blueFactor=i.blueFactor,this.baseShift=i.baseShift;}loadTile(e){return t._(this,void 0,void 0,(function*(){const i=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),a=this.map._requestManager.transformRequest(i,"Tile");e.neighboringTiles=this._getNeighboringTiles(e.tileID),e.abortController=new AbortController;try{const i=yield g.getImage(a,e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(i&&i.data){const a=i.data;this.map._refreshExpiredTiles&&(i.cacheControl||i.expires)&&e.setExpiryData({cacheControl:i.cacheControl,expires:i.expires});const r=t.b(a)&&t.$()?a:yield this.readImageNow(a),o={type:this.type,uid:e.uid,source:this.id,rawImageData:r,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!e.actor||"expired"===e.state){e.actor=this.dispatcher.getActor();const t=yield e.actor.sendAsync({type:"LDT",data:o});e.dem=t,e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0,e.state="loaded";}}}catch(t){if(delete e.abortController,e.aborted)e.state="unloaded";else if(t)throw e.state="errored",t}}))}readImageNow(e){return t._(this,void 0,void 0,(function*(){if("undefined"!=typeof VideoFrame&&t.a0()){const i=e.width+2,a=e.height+2;try{return new t.R({width:i,height:a},yield t.a1(e,-1,-1,i,a))}catch(e){}}return n.getImageData(e,1)}))}_getNeighboringTiles(e){const i=e.canonical,a=Math.pow(2,i.z),r=(i.x-1+a)%a,o=0===i.x?e.wrap-1:e.wrap,s=(i.x+1+a)%a,n=i.x+1===a?e.wrap+1:e.wrap,l={};return l[new t.a2(e.overscaledZ,o,i.z,r,i.y).key]={backfilled:!1},l[new t.a2(e.overscaledZ,n,i.z,s,i.y).key]={backfilled:!1},i.y>0&&(l[new t.a2(e.overscaledZ,o,i.z,r,i.y-1).key]={backfilled:!1},l[new t.a2(e.overscaledZ,e.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},l[new t.a2(e.overscaledZ,n,i.z,s,i.y-1).key]={backfilled:!1}),i.y+1<a&&(l[new t.a2(e.overscaledZ,o,i.z,r,i.y+1).key]={backfilled:!1},l[new t.a2(e.overscaledZ,e.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},l[new t.a2(e.overscaledZ,n,i.z,s,i.y+1).key]={backfilled:!1}),l}unloadTile(e){return t._(this,void 0,void 0,(function*(){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&(yield e.actor.sendAsync({type:"RDT",data:{type:this.type,uid:e.uid,source:this.id}}));}))}}function Q(e){return "GeometryCollection"===e.type?e.geometries.map((e=>e.coordinates)).flat(1/0):e.coordinates.flat(1/0)}function J(e){const t=new $;let i;switch(e.type){case "FeatureCollection":i=e.features.map((e=>Q(e.geometry))).flat(1/0);break;case "Feature":i=Q(e.geometry);break;default:i=Q(e);}if(0==i.length)return t;for(let e=0;e<i.length-1;e+=2)t.extend([i[e],i[e+1]]);return t}class ee extends t.E{constructor(e,i,a,r){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:i.data},this.actor=a.getActor(),this.setEventedParent(r),this._data="string"==typeof i.data?{url:i.data}:{geojson:i.data},this._options=t.e({},i),this._collectResourceTiming=i.collectResourceTiming,void 0!==i.maxzoom&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId,void 0!==i.clusterMaxZoom&&this.maxzoom<=i.clusterMaxZoom&&t.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${i.clusterMaxZoom}".`),this.workerOptions=t.e({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(void 0!==i.buffer?i.buffer:128),tolerance:this._pixelsToTileUnits(void 0!==i.tolerance?i.tolerance:.375),extent:t.a5,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(i.clusterMaxZoom),minPoints:Math.max(2,i.clusterMinPoints||2),extent:t.a5,radius:this._pixelsToTileUnits(i.clusterRadius||50),log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions),"string"==typeof this.promoteId&&(this.workerOptions.promoteId=this.promoteId);}_hasPendingWorkerUpdate(){return void 0!==this._pendingWorkerUpdate.data||void 0!==this._pendingWorkerUpdate.diff||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(e){return e*(t.a5/this.tileSize)}_getClusterMaxZoom(e){const i=e?Math.round(e):this.maxzoom-1;return Number.isInteger(e)||void 0===e||t.w(`Integer expected for option 'clusterMaxZoom': provided value "${e}" rounded to "${i}"`),i}load(){return t._(this,void 0,void 0,(function*(){yield this._updateWorkerData();}))}onAdd(e){this.map=e,this.load();}setData(e,t){this._data="string"==typeof e?{url:e}:{geojson:e},this._pendingWorkerUpdate={data:e};const i=this._updateWorkerData();return t?i:this}updateData(e,i){this._pendingWorkerUpdate.diff=t.a6(this._pendingWorkerUpdate.diff,e);const a=this._updateWorkerData();return i?a:this}getData(){return t._(this,void 0,void 0,(function*(){const e=t.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:e})}))}getBounds(){return t._(this,void 0,void 0,(function*(){return J(yield this.getData())}))}setClusterOptions(e){return this.workerOptions.cluster=e.cluster,void 0!==e.clusterRadius&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(e.clusterRadius)),void 0!==e.clusterMaxZoom&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(e.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(e){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:e,source:this.id}})}getClusterChildren(e){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:e,source:this.id}})}getClusterLeaves(e,t,i){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:e,limit:t,offset:i}})}_updateWorkerData(){return t._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void t.w(`No pending worker updates for GeoJSONSource ${this.id}.`);const{data:e,diff:i}=this._pendingWorkerUpdate,a=t.e({type:this.type},this.workerOptions);void 0!==e?("string"==typeof e?(a.request=this.map._requestManager.transformRequest(n.resolveURL(e),"Source"),a.request.collectResourceTiming=this._collectResourceTiming):a.data=e,this._pendingWorkerUpdate.data=void 0):i&&(a.dataDiff=i,this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,this._isUpdatingWorker=!0,this.fire(new t.l("dataloading",{dataType:"source"}));try{const e=yield this.actor.sendAsync({type:"LD",data:a});if(this._isUpdatingWorker=!1,this._removed||e.abandoned)return void this.fire(new t.l("dataabort",{dataType:"source"}));e.data&&(this._data={geojson:e.data});const r=this._applyDiffToSource(i),o=this._getShouldReloadTileOptions(r);let s=null;e.resourceTiming&&e.resourceTiming[this.id]&&(s=e.resourceTiming[this.id].slice(0));const n={dataType:"source"};this._collectResourceTiming&&s&&s.length>0&&t.e(n,{resourceTiming:s}),this.fire(new t.l("data",Object.assign(Object.assign({},n),{sourceDataType:"metadata"}))),this.fire(new t.l("data",Object.assign(Object.assign({},n),{sourceDataType:"content",shouldReloadTileOptions:o})));}catch(e){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new t.l("dataabort",{dataType:"source"}));this.fire(new t.k(e));}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData();}}))}_applyDiffToSource(e){if(!e)return;const i="string"==typeof this.promoteId?this.promoteId:void 0;if(!this._data.url&&!this._data.updateable){const e=t.a7(this._data.geojson,i);if(!e)throw new Error(`GeoJSONSource "${this.id}": GeoJSON data is not compatible with updateData`);this._data={updateable:e};}if(!this._data.updateable)return;const a=t.a8(this._data.updateable,e,i);return e.removeAll||this._options.cluster?void 0:a}_getShouldReloadTileOptions(e){if(e)return {affectedBounds:e.filter(Boolean).map((e=>J(e)))}}shouldReloadTile(e,{affectedBounds:i}){if("loading"===e.state)return !0;if("unloaded"===e.state)return !1;const{buffer:a,extent:r}=this.workerOptions.geojsonVtOptions,o=function({x:e,y:i,z:a},r=0){const o=t.a3((e-r)/Math.pow(2,a)),s=t.a4((i+1+r)/Math.pow(2,a)),n=t.a3((e+1+r)/Math.pow(2,a)),l=t.a4((i-r)/Math.pow(2,a));return new $([o,s],[n,l])}(e.tileID.canonical,a/r);for(const e of i)if(o.intersects(e))return !0;return !1}loaded(){return !this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(e){return t._(this,void 0,void 0,(function*(){const t=e.actor?"RT":"LT";e.actor=this.actor;const i={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};e.abortController=new AbortController;const a=yield this.actor.sendAsync({type:t,data:i},e.abortController);delete e.abortController,e.unloadVectorData(),e.aborted||e.loadVectorData(a,this.map.painter,"RT"===t);}))}abortTile(e){return t._(this,void 0,void 0,(function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.aborted=!0;}))}unloadTile(e){return t._(this,void 0,void 0,(function*(){e.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}});}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}});}serialize(){return t.e({},this._options,{type:this.type,data:this._data.updateable?{type:"FeatureCollection",features:Array.from(this._data.updateable.values())}:this._data.url||this._data.geojson})}hasTransition(){return !1}}class te extends t.E{constructor(e,t,i,a){super(),this.flippedWindingOrder=!1,this.id=e,this.dispatcher=i,this.coordinates=t.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(a),this.options=t;}load(e){return t._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new t.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const t=yield g.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,t&&t.data&&(this.image=t.data,e&&(this.coordinates=e),this._finishLoading());}catch(e){this._request=null,this._loaded=!0,t.Z(e)||this.fire(new t.k(e));}}))}loaded(){return this._loaded}updateImage(e){return e.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=e.url,this.load(e.coordinates).finally((()=>{this.texture=null;})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.l("data",{dataType:"source",sourceDataType:"metadata"})));}onAdd(e){this.map=e,this.load();}onRemove(){this._request&&(this._request.abort(),this._request=null);}setCoordinates(e){this.coordinates=e;const i=e.map(t.a9.fromLngLat);var a;return this.tileID=function(e){const i=t.aa.fromPoints(e),a=i.width(),r=i.height(),o=Math.max(a,r),s=Math.max(0,Math.floor(-Math.log(o)/Math.LN2)),n=Math.pow(2,s);return new t.ac(s,Math.floor((i.minX+i.maxX)/2*n),Math.floor((i.minY+i.maxY)/2*n))}(i),this.terrainTileRanges=this._getOverlappingTileRanges(i),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=i.map((e=>this.tileID.getTilePoint(e)._round())),this.flippedWindingOrder=((a=this.tileCoords)[1].x-a[0].x)*(a[2].y-a[0].y)-(a[1].y-a[0].y)*(a[2].x-a[0].x)<0,this.fire(new t.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const e=this.map.painter.context,i=e.gl;this.texture||(this.texture=new t.T(e,this.image,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE));let a=!1;for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture,a=!0);}a&&this.fire(new t.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}));}loadTile(e){return t._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={}):e.state="errored";}))}serialize(){return {type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return !1}_getOverlappingTileRanges(e){const{minX:i,minY:a,maxX:r,maxY:o}=t.aa.fromPoints(e),s={};for(let e=0;e<=t.ab;e++){const t=Math.pow(2,e),n=Math.floor(i*t),l=Math.floor(a*t),c=Math.floor(r*t),h=Math.floor(o*t);s[e]={minTileX:n,minTileY:l,maxTileX:c,maxTileY:h};}return s}}class ie extends te{constructor(e,t,i,a){super(e,t,i,a),this.roundZoom=!0,this.type="video",this.options=t;}load(){return t._(this,void 0,void 0,(function*(){this._loaded=!1;const e=this.options;this.urls=[];for(const t of e.urls)this.urls.push(this.map._requestManager.transformRequest(t,"Source").url);try{const e=yield t.ad(this.urls);if(this._loaded=!0,!e)return;this.video=e,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint();})),this.map&&this.video.play(),this._finishLoading();}catch(e){this.fire(new t.k(e));}}))}pause(){this.video&&this.video.pause();}play(){this.video&&this.video.play();}seek(e){if(this.video){const i=this.video.seekable;e<i.start(0)||e>i.end(0)?this.fire(new t.k(new t.ae(`sources.${this.id}`,null,`Playback for this video can be set only between the ${i.start(0)} and ${i.end(0)}-second mark.`))):this.video.currentTime=e;}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)));}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const e=this.map.painter.context,i=e.gl;this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new t.T(e,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE));let a=!1;for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture,a=!0);}a&&this.fire(new t.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}));}serialize(){return {type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class ae extends te{constructor(e,i,a,r){super(e,i,a,r),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some((e=>!Array.isArray(e)||2!==e.length||e.some((e=>"number"!=typeof e))))||this.fire(new t.k(new t.ae(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.k(new t.ae(`sources.${e}`,null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&this.fire(new t.k(new t.ae(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof HTMLCanvasElement||this.fire(new t.k(new t.ae(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.k(new t.ae(`sources.${e}`,null,'missing required property "canvas"'))),this.options=i,this.animate=void 0===i.animate||i.animate;}load(){return t._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint();},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1);},this._finishLoading());}))}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play();}onRemove(){this.pause();}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const i=this.map.painter.context,a=i.gl;this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):(this.texture=new t.T(i,this.canvas,a.RGBA,{premultiply:!0}),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE));let r=!1;for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture,r=!0);}r&&this.fire(new t.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}));}serialize(){return {type:"canvas",animate:this.animate,canvas:this.options.canvas,coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of [this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return !0;return !1}}const re={},oe=e=>{switch(e){case "geojson":return ee;case "image":return te;case "raster":return K;case "raster-dem":return Y;case "vector":return X;case "video":return ie;case "canvas":return ae}return re[e]},se="RTLPluginLoaded";class ne extends t.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Z();}_syncState(e){return this.status=e,this.dispatcher.broadcast("SRPS",{pluginStatus:e,pluginURL:this.url}).catch((e=>{throw this.status="error",e}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null;}setRTLTextPlugin(e){return t._(this,arguments,void 0,(function*(e,t=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=n.resolveURL(e),!this.url)throw new Error(`requested url ${e} is invalid`);if("unavailable"===this.status){if(!t)return this._requestImport();this.status="deferred",this._syncState(this.status);}else if("requested"===this.status)return this._requestImport()}))}_requestImport(){return t._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new t.l(se));}))}lazyLoad(){"unavailable"===this.status?this.status="requested":"deferred"===this.status&&this._requestImport();}}let le=null;function ce(){return le||(le=new ne),le}var he,ue;!function(e){e[e.Base=0]="Base",e[e.Parent=1]="Parent";}(he||(he={})),function(e){e[e.Departing=0]="Departing",e[e.Incoming=1]="Incoming";}(ue||(ue={}));class de{constructor(e,i){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=e,this.uid=t.af(),this.uses=0,this.tileSize=i,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading";}isRenderable(e){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(e||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:e,fadingDirection:t,fadingParentID:i,fadeEndTime:a}){this.resetFadeLogic(),this.fadingRole=e,this.fadingDirection=t,this.fadingParentID=i,this.fadeEndTime=a;}setSelfFadeLogic(e){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=e;}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=c(),this.fadeEndTime=0,this.fadeOpacity=1;}wasRequested(){return "errored"===this.state||"loaded"===this.state||"reloading"===this.state}clearTextures(e){this.demTexture&&e.saveTileTexture(this.demTexture),this.demTexture=null;}loadVectorData(e,i,a){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData,this.latestFeatureIndex.encoding=e.encoding):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData,this.latestFeatureIndex.encoding=this.latestEncoding)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){const i={};if(!t)return i;for(const a of e){const e=a.layerIds.map((e=>t.getLayer(e))).filter(Boolean);if(0!==e.length){a.layers=e,a.stateDependentLayerIds&&(a.stateDependentLayers=a.stateDependentLayerIds.map((t=>e.filter((e=>e.id===t))[0])));for(const t of e)i[t.id]=a;}}return i}(e.buckets,null==i?void 0:i.style),this.hasSymbolBuckets=!1;for(const e in this.buckets){const i=this.buckets[e];if(i instanceof t.ah){if(this.hasSymbolBuckets=!0,!a)break;i.justReloaded=!0;}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const e in this.buckets){const i=this.buckets[e];if(i instanceof t.ah&&i.hasRTLText){this.hasRTLText=!0,ce().lazyLoad();break}}this.queryPadding=0;for(const e in this.buckets){const t=this.buckets[e];this.queryPadding=Math.max(this.queryPadding,i.style.getLayer(e).queryRadius(t));}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),this.dashPositions=e.dashPositions;}else this.collisionBoxArray=new t.ag;}unloadVectorData(){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded";}getBucket(e){return this.buckets[e.id]}upload(e){for(const t in this.buckets){const i=this.buckets[t];i.uploadPending()&&i.upload(e);}const i=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new t.T(e,this.imageAtlas.image,i.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new t.T(e,this.glyphAtlasImage,i.ALPHA),this.glyphAtlasImage=null);}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture);}queryRenderedFeatures(e,t,i,a,r,o,s,n,l,c,h){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:a,cameraQueryGeometry:r,scale:o,tileSize:this.tileSize,pixelPosMatrix:c,transform:n,params:s,queryPadding:this.queryPadding*l,getElevation:h},e,t,i):{}}querySourceFeatures(e,i){const a=this.latestFeatureIndex;if(!a||!a.rawTileData)return;const r=a.loadVTLayers(),o=i&&i.sourceLayer?i.sourceLayer:"",s=r[t.ai]||r[o];if(!s)return;const n=t.aj(null==i?void 0:i.filter,null==i?void 0:i.globalState),{z:l,x:c,y:h}=this.tileID.canonical,u={z:l,x:c,y:h};for(let i=0;i<s.length;i++){const r=s.feature(i);if(n.needGeometry){const e=t.ak(r,!0);if(!n.filter(new t.H(this.tileID.overscaledZ),e,this.tileID.canonical))continue}else if(!n.filter(new t.H(this.tileID.overscaledZ),r))continue;const d=a.getId(r,o),_=new t.al(r,l,c,h,d);_.tile=u,e.push(_);}}hasData(){return "loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const i=this.expirationTime;if(e.cacheControl){const i=t.am(e.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"]);}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const e=Date.now();let t=!1;if(this.expirationTime>e)t=!1;else if(i)if(this.expirationTime<i)t=!0;else {const a=this.expirationTime-i;a?this.expirationTime=e+Math.max(a,3e4):t=!0;}else t=!0;t?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0;}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,i){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(e).length)return;const a=this.latestFeatureIndex.loadVTLayers();for(const r in this.buckets){if(!i.style.hasLayer(r))continue;const o=this.buckets[r],s=o.layers[0].sourceLayer||t.ai,n=a[s],l=e[s];if(!n||!l||0===Object.keys(l).length)continue;o.update(l,n,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const c=i&&i.style&&i.style.getLayer(r);c&&(this.queryPadding=Math.max(this.queryPadding,c.queryRadius(o)));}}holdingForSymbolFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return !this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<c()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0;}setSymbolHoldDuration(e){this.symbolFadeHoldUntil=c()+e;}setDependencies(e,t){const i={};for(const e of t)i[e]=!0;this.dependencies[e]=i;}hasDependency(e,t){for(const i of e){const e=this.dependencies[i];if(e)for(const i of t)if(e[i])return !0}return !1}}class _e{constructor(){this.state={},this.stateChanges={},this.deletedStates={};}updateState(e,i,a){const r=String(i);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][r]=this.stateChanges[e][r]||{},t.e(this.stateChanges[e][r],a),null===this.deletedStates[e]){this.deletedStates[e]={};for(const t in this.state[e])t!==r&&(this.deletedStates[e][t]=null);}else if(this.deletedStates[e]&&null===this.deletedStates[e][r]){this.deletedStates[e][r]={};for(const t in this.state[e][r])a[t]||(this.deletedStates[e][r][t]=null);}else for(const t in a)this.deletedStates[e]&&this.deletedStates[e][r]&&null===this.deletedStates[e][r][t]&&delete this.deletedStates[e][r][t];}removeFeatureState(e,t,i){if(null===this.deletedStates[e])return;const a=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},i&&void 0!==t)null!==this.deletedStates[e][a]&&(this.deletedStates[e][a]=this.deletedStates[e][a]||{},this.deletedStates[e][a][i]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][a])for(i in this.deletedStates[e][a]={},this.stateChanges[e][a])this.deletedStates[e][a][i]=null;else this.deletedStates[e][a]=null;else this.deletedStates[e]=null;}getState(e,i){const a=String(i),r=t.e({},(this.state[e]||{})[a],(this.stateChanges[e]||{})[a]);if(null===this.deletedStates[e])return {};if(this.deletedStates[e]){const t=this.deletedStates[e][i];if(null===t)return {};for(const e in t)delete r[e];}return r}initializeTileState(e,t){e.setFeatureState(this.state,t);}coalesceChanges(e,i){const a={};for(const e in this.stateChanges){this.state[e]=this.state[e]||{};const i={};for(const a in this.stateChanges[e])this.state[e][a]||(this.state[e][a]={}),t.e(this.state[e][a],this.stateChanges[e][a]),i[a]=this.state[e][a];a[e]=i;}for(const e in this.deletedStates){this.state[e]=this.state[e]||{};const i={};if(null===this.deletedStates[e])for(const t in this.state[e])i[t]={},this.state[e][t]={};else for(const t in this.deletedStates[e]){if(null===this.deletedStates[e][t])this.state[e][t]={};else for(const i of Object.keys(this.deletedStates[e][t]))delete this.state[e][t][i];i[t]=this.state[e][t];}a[e]=a[e]||{},t.e(a[e],i);}this.stateChanges={},this.deletedStates={},0!==Object.keys(a).length&&e.setFeatureState(a,i);}}const pe=89.25;function me(e,i){const a=t.an(i.lat,-t.ao,t.ao);return new t.P(t.Y(i.lng)*e,t.X(a)*e)}function fe(e,i){return new t.a9(i.x/e,i.y/e).toLngLat()}function ge(e){return e.cameraToCenterDistance*Math.min(.85*Math.tan(t.ap(90-e.pitch)),Math.tan(t.ap(pe-e.pitch)))}function ve(e,i){const a=e.canonical,r=i/t.aq(a.z),o=a.x+Math.pow(2,a.z)*e.wrap,s=t.ar(new Float64Array(16));return t.O(s,s,[o*r,a.y*r,0]),t.Q(s,s,[r/t.a5,r/t.a5,1]),s}function xe(e,i,a,r,o){const s=t.a9.fromLngLat(e,i),n=o*t.as(1,e.lat),{x:l,y:c,z:h}=be(a,r);return new t.a9(s.x+n*-l,s.y+n*-c,s.z+n*-h)}function be(e,i){const a=t.ap(e),r=t.ap(i),o=Math.cos(-a),s=Math.sin(a);return {x:s*Math.sin(r),y:-s*Math.cos(r),z:o}}function ye(e,t,i){const a=t.intersectsFrustum(e);if(!i||0===a)return a;const r=t.intersectsPlane(i);return 0===r?0:2===a&&2===r?2:1}function we(e,t,i){let a=0;const r=(i-t)/10;for(let o=0;o<10;o++)a+=r*Math.pow(Math.cos(t+(o+.5)/10*(i-t)),e);return a}function Te(e,i){return function(a,r,o,s,n){const l=2*((e-1)/t.at(Math.cos(t.ap(pe-n))/Math.cos(t.ap(pe)))-1),c=Math.acos(o/s),h=2*we(l-1,0,t.ap(n/2)),u=Math.min(t.ap(pe),c+t.ap(n/2)),d=we(l-1,Math.min(u,c-t.ap(n/2)),u),_=Math.atan(r/o),p=Math.hypot(r,o);let m=a;return m+=t.at(s/p/Math.max(.5,Math.cos(t.ap(n/2)))),m+=l*t.at(Math.cos(_))/2,m-=t.at(Math.max(1,d/h/i))/2,m}}const Pe=Te(9.314,3);function Ce(e,i){const a=(i.roundZoom?Math.round:Math.floor)(e.zoom+t.at(e.tileSize/i.tileSize));return Math.max(0,a)}function Ie(e,i){const a=e.getCameraFrustum(),r=e.getClippingPlane(),o=e.screenPointToMercatorCoordinate(e.getCameraPoint()),s=t.a9.fromLngLat(e.center,e.elevation);o.z=s.z+Math.cos(e.pitchInRadians)*e.cameraToCenterDistance/e.worldSize;const n=e.getCoveringTilesDetailsProvider(),l=n.allowVariableZoom(e,i),c=Ce(e,i),h=i.minzoom||0,u=void 0!==i.maxzoom?i.maxzoom:e.maxZoom,d=Math.min(Math.max(0,c),u),_=Math.pow(2,d),p=[_*o.x,_*o.y,0],m=[_*s.x,_*s.y,0],f=Math.hypot(s.x-o.x,s.y-o.y),g=Math.abs(s.z-o.z),v=Math.hypot(f,g),x=e=>({zoom:0,x:0,y:0,wrap:e,fullyVisible:!1}),b=[],y=[];if(e.renderWorldCopies&&n.allowWorldCopies())for(let e=1;e<=3;e++)b.push(x(-e)),b.push(x(e));for(b.push(x(0));b.length>0;){const _=b.pop(),f=_.x,x=_.y;let w=_.fullyVisible;const T={x:f,y:x,z:_.zoom},P=n.getTileBoundingVolume(T,_.wrap,e.elevation,i);if(!w){const e=ye(a,P,r);if(0===e)continue;w=2===e;}const C=n.distanceToTile2d(o.x,o.y,T,P);let I=c;l&&(I=(i.calculateTileZoom||Pe)(e.zoom+t.at(e.tileSize/i.tileSize),C,g,v,e.fov)),I=(i.roundZoom?Math.round:Math.floor)(I),I=Math.max(0,I);const M=Math.min(I,u);if(_.wrap=n.getWrap(s,T,_.wrap),_.zoom>=M){if(_.zoom<h)continue;const e=d-_.zoom,a=p[0]-.5-(f<<e),r=p[1]-.5-(x<<e),o=i.reparseOverscaled?Math.max(_.zoom,I):_.zoom;y.push({tileID:new t.a2(_.zoom===u?o:_.zoom,_.wrap,_.zoom,f,x),distanceSq:t.au([m[0]-.5-f,m[1]-.5-x]),tileDistanceToCamera:Math.sqrt(a*a+r*r)});}else for(let e=0;e<4;e++)b.push({zoom:_.zoom+1,x:(f<<1)+e%2,y:(x<<1)+(e>>1),wrap:_.wrap,fullyVisible:w});}return y.sort(((e,t)=>e.distanceSq-t.distanceSq)).map((e=>e.tileID))}const Me=t.aa.fromPoints([new t.P(0,0),new t.P(t.a5,t.a5)]);function Ee(e){return "raster"===e||"image"===e||"video"===e}function Se(e,t,i,a,r,o,s){if(!t.hasData())return !1;const{tileID:n,fadingRole:l,fadingDirection:c,fadingParentID:h}=t;if(l===he.Base&&c===ue.Incoming&&h)return i[h.key]=h,!0;const u=Math.max(n.overscaledZ-r,o);for(let r=n.overscaledZ-1;r>=u;r--){const o=n.scaledTo(r),l=e.getLoadedTile(o);if(l)return t.setCrossFadeLogic({fadingRole:he.Base,fadingDirection:ue.Incoming,fadingParentID:l.tileID,fadeEndTime:a+s}),l.setCrossFadeLogic({fadingRole:he.Parent,fadingDirection:ue.Departing,fadeEndTime:a+s}),i[o.key]=o,!0}return !1}function Re(e,t,i,a,r,o){if(!t.hasData())return !1;const s=t.tileID.children(r);let n=ze(e,t,s,i,a,r,o);if(n)return !0;for(const l of s)ze(e,t,l.children(r),i,a,r,o)&&(n=!0);return n}function ze(e,t,i,a,r,o,s){if(i[0].overscaledZ>=o)return !1;let n=!1;for(const o of i){const i=e.getLoadedTile(o);if(!i)continue;const{fadingRole:l,fadingDirection:c,fadingParentID:h}=i;l===he.Base&&c===ue.Departing&&h||(i.setCrossFadeLogic({fadingRole:he.Base,fadingDirection:ue.Departing,fadingParentID:t.tileID,fadeEndTime:r+s}),t.setCrossFadeLogic({fadingRole:he.Parent,fadingDirection:ue.Incoming,fadeEndTime:r+s})),a[o.key]=o,n=!0;}return n}function De(e,t,i,a){const r=e.tileID;return !!e.selfFading||!e.hasData()&&!!t.has(r)&&(e.setSelfFadeLogic(i+a),!0)}function Ae(e,t){var i;e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0;let a=t.tileID.canonical.x-e.tileID.canonical.x;const r=t.tileID.canonical.y-e.tileID.canonical.y,o=Math.pow(2,e.tileID.canonical.z),s=t.tileID.key;0===a&&0===r||Math.abs(r)>1||(Math.abs(a)>1&&(1===Math.abs(a+o)?a+=o:1===Math.abs(a-o)&&(a-=o)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,a,r),(null===(i=e.neighboringTiles)||void 0===i?void 0:i[s])&&(e.neighboringTiles[s].backfilled=!0)));}class Le{constructor(){this._tiles={};}handleWrapJump(e){const t={};for(const i in this._tiles){const a=this._tiles[i];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+e),t[a.tileID.key]=a;}this._tiles=t;}setFeatureState(e,t){for(const i in this._tiles)this._tiles[i].setFeatureState(e,t);}getAllTiles(){return Object.values(this._tiles)}getAllIds(e=!1){return e?Object.values(this._tiles).map((e=>e.tileID)).sort(t.aw).map((e=>e.key)):Object.keys(this._tiles)}getTileById(e){return this._tiles[e]}setTile(e,t){this._tiles[e]=t;}deleteTileById(e){delete this._tiles[e];}getLoadedTile(e){const t=this.getTileById(e.key);return (null==t?void 0:t.hasData())?t:null}isIdRenderable(e,t=!1){var i;return null===(i=this.getTileById(e))||void 0===i?void 0:i.isRenderable(t)}getRenderableIds(e=0,i){const a=[];for(const e of this.getAllIds())this.isIdRenderable(e,i)&&a.push(this.getTileById(e));return i?a.sort(((i,a)=>{const r=i.tileID,o=a.tileID,s=new t.P(r.canonical.x,r.canonical.y)._rotate(-e),n=new t.P(o.canonical.x,o.canonical.y)._rotate(-e);return r.overscaledZ-o.overscaledZ||n.y-s.y||n.x-s.x})).map((e=>e.tileID.key)):a.map((e=>e.tileID)).sort(t.aw).map((e=>e.key))}}class ke extends t.E{constructor(e,i,a){super(),this.id=e,this.dispatcher=a,this.on("data",(e=>this._dataHandler(e))),this.on("dataloading",(()=>{this._sourceErrored=!1;})),this.on("error",(()=>{this._sourceErrored=this._source.loaded();})),this._source=((e,t,i,a)=>{const r=new(oe(t.type))(e,t,i,a);if(r.id!==e)throw new Error(`Expected Source id to be ${e} instead of ${r.id}`);return r})(e,i,a,this),this._inViewTiles=new Le,this._outOfViewCache=new t.ax(0,(e=>this._unloadTile(e))),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new _e,this._didEmitContent=!1,this._updated=!1;}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._maxTileCacheZoomLevels=e?e._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(e);}onRemove(e){for(const e of this._inViewTiles.getAllTiles())e.unloadVectorData();this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(e),this._inViewTiles=new Le;}loaded(){if(this._sourceErrored)return !0;if(!this._sourceLoaded)return !1;if(!this._source.loaded())return !1;if(!(void 0===this.used&&void 0===this.usedForTerrain||this.used||this.usedForTerrain))return !0;if(!this._updated)return !1;for(const e of this._inViewTiles.getAllTiles())if("loaded"!==e.state&&"errored"!==e.state)return !1;return !0}getSource(){return this._source}getState(){return this._state}pause(){this._paused=!0;}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform,this.terrain);}_loadTile(e,i,a){return t._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(e),this._tileLoaded(e,i,a);}catch(i){e.state="errored",404!==i.status?this._source.fire(new t.k(i,{tile:e})):this.update(this.transform,this.terrain);}}))}_unloadTile(e){this._source.unloadTile&&this._source.unloadTile(e);}_abortTile(e){this._source.abortTile&&this._source.abortTile(e),this._source.fire(new t.l("dataabort",{tile:e,coord:e.tileID,dataType:"source"}));}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._inViewTiles,this.map?this.map.painter:null);for(const t of this._inViewTiles.getAllTiles())t.upload(e),t.prepare(this.map.style.imageManager);}getIds(){return this._inViewTiles.getAllIds(!0)}getRenderableIds(e){var t;return this._inViewTiles.getRenderableIds(null===(t=this.transform)||void 0===t?void 0:t.bearingInRadians,e)}hasRenderableParent(e){const t=e.overscaledZ-1;if(t>=this._source.minzoom){const i=this.getLoadedTile(e.scaledTo(t));if(i)return this._inViewTiles.isIdRenderable(i.tileID.key)}return !1}reload(e,t=void 0){if(this._paused)this._shouldReloadOnResume=!0;else {this._outOfViewCache.reset();for(const i of this._inViewTiles.getAllIds()){const a=this._inViewTiles.getTileById(i);t&&!this._source.shouldReloadTile(a,t)||(e?this._reloadTile(i,"expired"):"errored"!==a.state&&this._reloadTile(i,"reloading"));}}}_reloadTile(e,i){return t._(this,void 0,void 0,(function*(){const t=this._inViewTiles.getTileById(e);t&&("loading"!==t.state&&(t.state=i),yield this._loadTile(t,e,i));}))}_tileLoaded(e,i,a){e.timeAdded=c(),e.selfFading&&(e.fadeEndTime=e.timeAdded+this._rasterFadeDuration),"expired"===a&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(i,e),"raster-dem"===this.getSource().type&&e.dem&&function(e,t){var i,a;const r=t.getRenderableIds();for(const o of r){if(!e.neighboringTiles||!e.neighboringTiles[o])continue;const r=t.getTileById(o);e.neighboringTiles[o].backfilled||Ae(e,r),(null===(a=null===(i=r.neighboringTiles)||void 0===i?void 0:i[e.tileID.key])||void 0===a?void 0:a.backfilled)||Ae(r,e);}}(e,this._inViewTiles),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new t.l("data",{dataType:"source",tile:e,coord:e.tileID}));}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._inViewTiles.getTileById(e)}_retainLoadedChildren(e,t){const i=this._getLoadedDescendents(t),a=new Set;for(const r of t){const t=i[r.key];if(!(null==t?void 0:t.length)){a.add(r);continue}const o=r.overscaledZ+ke.maxOverzooming,s=t.filter((e=>e.tileID.overscaledZ<=o));if(!s.length){a.add(r);continue}const n=Math.min(...s.map((e=>e.tileID.overscaledZ))),l=s.filter((e=>e.tileID.overscaledZ===n)).map((e=>e.tileID));for(const t of l)e[t.key]=t;this._areDescendentsComplete(l,n,r.overscaledZ)||a.add(r);}return a}_getLoadedDescendents(e){var t;const i={};for(const a of this._inViewTiles.getAllTiles().filter((e=>e.hasData())))for(const r of e)a.tileID.isChildOf(r)&&(i[t=r.key]||(i[t]=[])).push(a);return i}_areDescendentsComplete(e,t,i){return 1===e.length&&e[0].isOverscaled()?e[0].overscaledZ===t:Math.pow(4,t-i)===e.length}getLoadedTile(e){return this._inViewTiles.getLoadedTile(e)}updateCacheSize(e){const i=Math.ceil(e.width/this._source.tileSize)+1,a=Math.ceil(e.height/this._source.tileSize)+1,r=Math.floor(i*a*(null===this._maxTileCacheZoomLevels?t.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),o="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._outOfViewCache.setMaxSize(o);}handleWrapJump(e){const t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);this._prevLng=e,t&&(this._inViewTiles.handleWrapJump(t),this._resetTileReloadTimers());}update(e,i){if(!this._sourceLoaded||this._paused)return;let a;this.transform=e,this.terrain=i,this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?a=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((e=>new t.a2(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y))):(a=Ie(e,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:"vector"===this._source.type&&void 0!==this.map._zoomLevelsToOverscale?e.maxZoom-this.map._zoomLevelsToOverscale:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:i,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(a=a.filter((e=>this._source.hasTile(e))))):a=[],this.usedForTerrain&&(a=this._addTerrainIdealTiles(a));const r=0===a.length&&!this._updated&&this._didEmitContent;this._updated=!0,r&&this.fire(new t.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const o=Ce(e,this._source),s=this._updateRetainedTiles(a,o),n=Ee(this._source.type);n&&this._rasterFadeDuration>0&&!i&&function(e,i,a,r,o,s,n){const l=c(),h=t.av(i);for(const t of i){const i=e.getTileById(t.key);i.fadingDirection!==ue.Departing&&0!==i.fadeOpacity||i.resetFadeLogic(),Se(e,i,a,l,r,o,n)||Re(e,i,a,l,s,n)||De(i,h,l,n)||i.resetFadeLogic();}}(this._inViewTiles,a,s,this._maxFadingAncestorLevels,this._source.minzoom,this._source.maxzoom,this._rasterFadeDuration),n?this._cleanUpRasterTiles(s):this._cleanUpVectorTiles(s);}_cleanUpRasterTiles(e){for(const t of this._inViewTiles.getAllIds())e[t]||this._removeTile(t);}_cleanUpVectorTiles(e){for(const t of this._inViewTiles.getAllIds()){const i=this._inViewTiles.getTileById(t);e[t]?i.clearSymbolFadeHold():i.hasSymbolBuckets?i.holdingForSymbolFade()?i.symbolFadeFinished()&&this._removeTile(t):i.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(t);}}_addTerrainIdealTiles(e){const t=[];for(const i of e)if(i.canonical.z>this._source.minzoom){const e=i.scaledTo(i.canonical.z-1);t.push(e);const a=i.scaledTo(Math.max(this._source.minzoom,Math.min(i.canonical.z,5)));t.push(a);}return e.concat(t)}releaseSymbolFadeTiles(){for(const e of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(e).holdingForSymbolFade()&&this._removeTile(e);}_updateRetainedTiles(e,t){var i;const a=new Set;for(const t of e)this._addTile(t).hasData()||a.add(t);const r=e.reduce(((e,t)=>(e[t.key]=t,e)),{}),o=this._retainLoadedChildren(r,a),s={},n=Math.max(t-ke.maxUnderzooming,this._source.minzoom);for(const e of o){let t=this._inViewTiles.getTileById(e.key),a=null==t?void 0:t.wasRequested();for(let o=e.overscaledZ-1;o>=n;--o){const n=e.scaledTo(o);if(s[n.key])break;if(s[n.key]=!0,t=this.getTile(n),!t&&a&&(t=this._addTile(n)),t){const e=t.hasData();if((e||!(null===(i=this.map)||void 0===i?void 0:i.cancelPendingTileRequestsWhileZooming)||a)&&(r[n.key]=n),a=t.wasRequested(),e)break}}}return r}_addTile(e){let i=this._inViewTiles.getTileById(e.key);if(i)return i;i=this._outOfViewCache.getAndRemove(e),i&&(i.resetFadeLogic(),this._setTileReloadTimer(e.key,i),i.tileID=e,this._state.initializeTileState(i,this.map?this.map.painter:null));const a=i;return i||(i=new de(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(i,e.key,i.state)),i.uses++,this._inViewTiles.setTile(e.key,i),a||this._source.fire(new t.l("dataloading",{tile:i,coord:i.tileID,dataType:"source"})),i}_setTileReloadTimer(e,t){this._clearTileReloadTimer(e);const i=t.getExpiryTimeout();i&&(this._timers[e]=setTimeout((()=>{this._reloadTile(e,"expired"),delete this._timers[e];}),i));}_clearTileReloadTimer(e){const t=this._timers[e];t&&(clearTimeout(t),delete this._timers[e]);}_resetTileReloadTimers(){for(const e in this._timers)clearTimeout(this._timers[e]),delete this._timers[e];for(const e of this._inViewTiles.getAllIds()){const t=this._inViewTiles.getTileById(e);this._setTileReloadTimer(e,t);}}refreshTiles(e){for(const t of this._inViewTiles.getAllIds()){const i=this._inViewTiles.getTileById(t);(this._inViewTiles.isIdRenderable(t)||"errored"==i.state)&&e.some((e=>e.equals(i.tileID.canonical)))&&this._reloadTile(t,"expired");}}_removeTile(e){const t=this._inViewTiles.getTileById(e);t&&(t.uses--,this._inViewTiles.deleteTileById(e),this._clearTileReloadTimer(e),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._outOfViewCache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))));}_dataHandler(e){"source"===e.dataType&&("metadata"!==e.sourceDataType?"content"===e.sourceDataType&&this._sourceLoaded&&!this._paused&&(this.reload(e.sourceDataChanged,e.shouldReloadTileOptions),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0);}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e of this._inViewTiles.getAllIds())this._removeTile(e);this._outOfViewCache.reset();}tilesIn(e,i,a){const r=[],o=this.transform;if(!o)return r;const s=o.getCoveringTilesDetailsProvider().allowWorldCopies(),n=a?o.getCameraQueryGeometry(e):e,l=e=>o.screenPointToMercatorCoordinate(e,this.terrain),c=this.transformBbox(e,l,!s),h=this.transformBbox(n,l,!s),u=this.getIds(),d=t.aa.fromPoints(h);for(let e=0;e<u.length;e++){const a=this._inViewTiles.getTileById(u[e]);if(a.holdingForSymbolFade())continue;const n=s?[a.tileID]:[a.tileID.unwrapTo(-1),a.tileID.unwrapTo(0)],l=Math.pow(2,o.zoom-a.tileID.overscaledZ),_=i*a.queryPadding*t.a5/a.tileSize/l;for(const e of n){const i=d.map((i=>e.getTilePoint(new t.a9(i.x,i.y))));if(i.expandBy(_),i.intersects(Me)){const t=c.map((t=>e.getTilePoint(t))),i=h.map((t=>e.getTilePoint(t)));r.push({tile:a,tileID:s?e:e.unwrapTo(0),queryGeometry:t,cameraQueryGeometry:i,scale:l});}}}return r}transformBbox(e,i,a){let r=e.map(i);if(a){const a=t.aa.fromPoints(e);a.shrinkBy(.001*Math.min(a.width(),a.height()));const o=a.map(i);t.aa.fromPoints(r).covers(o)||(r=r.map((e=>e.x>.5?new t.a9(e.x-1,e.y,e.z):e)));}return r}getVisibleCoordinates(e){const t=this.getRenderableIds(e).map((e=>this._inViewTiles.getTileById(e).tileID));return this.transform&&this.transform.populateCache(t),t}hasTransition(){return !!this._source.hasTransition()||!(!Ee(this._source.type)||!function(e,t){if(t<=0)return !1;const i=c();for(const t of e.getAllTiles())if(t.fadeEndTime>=i)return !0;return !1}(this._inViewTiles,this._rasterFadeDuration))}setRasterFadeDuration(e){this._rasterFadeDuration=e;}setFeatureState(e,i,a){this._state.updateState(e=e||t.ai,i,a);}removeFeatureState(e,i,a){this._state.removeFeatureState(e=e||t.ai,i,a);}getFeatureState(e,i){return this._state.getState(e=e||t.ai,i)}setDependencies(e,t,i){const a=this._inViewTiles.getTileById(e);a&&a.setDependencies(t,i);}reloadTilesForDependencies(e,t){for(const i of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(i).hasDependency(e,t)&&this._reloadTile(i,"reloading");this._outOfViewCache.filter((i=>!i.hasDependency(e,t)));}areTilesLoaded(){for(const e of this._inViewTiles.getAllTiles())if("loaded"!==e.state&&"errored"!==e.state)return !1;return !0}}ke.maxUnderzooming=10,ke.maxOverzooming=3;class Fe{constructor(e,t){this.reset(e,t);}reset(e,t){this.points=e||[],this._distances=[0];for(let e=1;e<this.points.length;e++)this._distances[e]=this._distances[e-1]+this.points[e].dist(this.points[e-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding;}lerp(e){if(1===this.points.length)return this.points[0];e=t.an(e,0,1);let i=1,a=this._distances[i];const r=e*this.paddedLength+this.padding;for(;a<r&&i<this._distances.length;)a=this._distances[++i];const o=i-1,s=this._distances[o],n=a-s,l=n>0?(r-s)/n:0;return this.points[o].mult(1-l).add(this.points[i].mult(l))}}function Be(e,t){let i=!0;return "always"===e||"never"!==e&&"never"!==t||(i=!1),i}class Oe{constructor(e,t,i){const a=this.boxCells=[],r=this.circleCells=[];this.xCellCount=Math.ceil(e/i),this.yCellCount=Math.ceil(t/i);for(let e=0;e<this.xCellCount*this.yCellCount;e++)a.push([]),r.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0;}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,t,i,a,r){this._forEachCell(t,i,a,r,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(a),this.bboxes.push(r);}insertCircle(e,t,i,a){this._forEachCell(t-a,i-a,t+a,i+a,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(i),this.circles.push(a);}_insertBoxCell(e,t,i,a,r,o){this.boxCells[r].push(o);}_insertCircleCell(e,t,i,a,r,o){this.circleCells[r].push(o);}_query(e,t,i,a,r,o,s){if(i<0||e>this.width||a<0||t>this.height)return [];const n=[];if(e<=0&&t<=0&&this.width<=i&&this.height<=a){if(r)return [{key:null,x1:e,y1:t,x2:i,y2:a}];for(let e=0;e<this.boxKeys.length;e++)n.push({key:this.boxKeys[e],x1:this.bboxes[4*e],y1:this.bboxes[4*e+1],x2:this.bboxes[4*e+2],y2:this.bboxes[4*e+3]});for(let e=0;e<this.circleKeys.length;e++){const t=this.circles[3*e],i=this.circles[3*e+1],a=this.circles[3*e+2];n.push({key:this.circleKeys[e],x1:t-a,y1:i-a,x2:t+a,y2:i+a});}}else this._forEachCell(e,t,i,a,this._queryCell,n,{hitTest:r,overlapMode:o,seenUids:{box:{},circle:{}}},s);return n}query(e,t,i,a){return this._query(e,t,i,a,!1,null)}hitTest(e,t,i,a,r,o){return this._query(e,t,i,a,!0,r,o).length>0}hitTestCircle(e,t,i,a,r){const o=e-i,s=e+i,n=t-i,l=t+i;if(s<0||o>this.width||l<0||n>this.height)return !1;const c=[];return this._forEachCell(o,n,s,l,this._queryCellCircle,c,{hitTest:!0,overlapMode:a,circle:{x:e,y:t,radius:i},seenUids:{box:{},circle:{}}},r),c.length>0}_queryCell(e,t,i,a,r,o,s,n){const{seenUids:l,hitTest:c,overlapMode:h}=s,u=this.boxCells[r];if(null!==u){const r=this.bboxes;for(const s of u)if(!l.box[s]){l.box[s]=!0;const u=4*s,d=this.boxKeys[s];if(e<=r[u+2]&&t<=r[u+3]&&i>=r[u+0]&&a>=r[u+1]&&(!n||n(d))&&(!c||!Be(h,d.overlapMode))&&(o.push({key:d,x1:r[u],y1:r[u+1],x2:r[u+2],y2:r[u+3]}),c))return !0}}const d=this.circleCells[r];if(null!==d){const r=this.circles;for(const s of d)if(!l.circle[s]){l.circle[s]=!0;const u=3*s,d=this.circleKeys[s];if(this._circleAndRectCollide(r[u],r[u+1],r[u+2],e,t,i,a)&&(!n||n(d))&&(!c||!Be(h,d.overlapMode))){const e=r[u],t=r[u+1],i=r[u+2];if(o.push({key:d,x1:e-i,y1:t-i,x2:e+i,y2:t+i}),c)return !0}}}return !1}_queryCellCircle(e,t,i,a,r,o,s,n){const{circle:l,seenUids:c,overlapMode:h}=s,u=this.boxCells[r];if(null!==u){const e=this.bboxes;for(const t of u)if(!c.box[t]){c.box[t]=!0;const i=4*t,a=this.boxKeys[t];if(this._circleAndRectCollide(l.x,l.y,l.radius,e[i+0],e[i+1],e[i+2],e[i+3])&&(!n||n(a))&&!Be(h,a.overlapMode))return o.push(!0),!0}}const d=this.circleCells[r];if(null!==d){const e=this.circles;for(const t of d)if(!c.circle[t]){c.circle[t]=!0;const i=3*t,a=this.circleKeys[t];if(this._circlesCollide(e[i],e[i+1],e[i+2],l.x,l.y,l.radius)&&(!n||n(a))&&!Be(h,a.overlapMode))return o.push(!0),!0}}}_forEachCell(e,t,i,a,r,o,s,n){const l=this._convertToXCellCoord(e),c=this._convertToYCellCoord(t),h=this._convertToXCellCoord(i),u=this._convertToYCellCoord(a);for(let d=l;d<=h;d++)for(let l=c;l<=u;l++)if(r.call(this,e,t,i,a,this.xCellCount*l+d,o,s,n))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,t,i,a,r,o){const s=a-e,n=r-t,l=i+o;return l*l>s*s+n*n}_circleAndRectCollide(e,t,i,a,r,o,s){const n=(o-a)/2,l=Math.abs(e-(a+n));if(l>n+i)return !1;const c=(s-r)/2,h=Math.abs(t-(r+c));if(h>c+i)return !1;if(l<=n||h<=c)return !0;const u=l-n,d=h-c;return u*u+d*d<=i*i}}function je(e,i,r){const o=t.N();if(!e){const{vecSouth:e,vecEast:t}=Ze(i),r=a();r[0]=t[0],r[1]=t[1],r[2]=e[0],r[3]=e[1],s=r,(d=(l=(n=r)[0])*(u=n[3])-(h=n[2])*(c=n[1]))&&(s[0]=u*(d=1/d),s[1]=-c*d,s[2]=-h*d,s[3]=l*d),o[0]=r[0],o[1]=r[1],o[4]=r[2],o[5]=r[3];}var s,n,l,c,h,u,d;return t.Q(o,o,[1/r,1/r,1]),o}function Ne(e,i,a,r){if(e){const e=t.N();if(!i){const{vecSouth:t,vecEast:i}=Ze(a);e[0]=i[0],e[1]=i[1],e[4]=t[0],e[5]=t[1];}return t.Q(e,e,[r,r,1]),e}return a.pixelsToClipSpaceMatrix}function Ze(e){const i=Math.cos(e.rollInRadians),a=Math.sin(e.rollInRadians),r=Math.cos(e.pitchInRadians),o=Math.cos(e.bearingInRadians),s=Math.sin(e.bearingInRadians),n=t.aC();n[0]=-o*r*a-s*i,n[1]=-s*r*a+o*i;const l=t.aD(n);l<1e-9?t.aE(n):t.aF(n,n,1/l);const c=t.aC();c[0]=o*r*i-s*a,c[1]=s*r*i+o*a;const h=t.aD(c);return h<1e-9?t.aE(c):t.aF(c,c,1/h),{vecEast:c,vecSouth:n}}function Ge(e,i,a,r){let o;r?(o=[e,i,r(e,i),1],t.aH(o,o,a)):(o=[e,i,0,1],ot(o,o,a));const s=o[3];return {point:new t.P(o[0]/s,o[1]/s),signedDistanceFromCamera:s,isOccluded:!1}}function Ue(e,t){return .5+e/t*.5}function Ve(e,t){return e.x>=-t[0]&&e.x<=t[0]&&e.y>=-t[1]&&e.y<=t[1]}function qe(e,i,a,r,o,s,n,l,c,h,u,d,_){const p=a?e.textSizeData:e.iconSizeData,m=t.ay(p,i.transform.zoom),f=[256/i.width*2+1,256/i.height*2+1],g=a?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;g.clear();const v=e.lineVertexArray,x=a?e.text.placedSymbolArray:e.icon.placedSymbolArray,b=i.transform.width/i.transform.height;let y=!1;for(let a=0;a<x.length;a++){const w=x.get(a);if(w.hidden||w.writingMode===t.az.vertical&&!y){rt(w.numGlyphs,g);continue}y=!1;const T=new t.P(w.anchorX,w.anchorY),P={getElevation:_,pitchedLabelPlaneMatrix:r,lineVertexArray:v,pitchWithMap:s,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:i.transform,tileAnchorPoint:T,unwrappedTileID:c,width:h,height:u,translation:d},C=Je(w.anchorX,w.anchorY,P);if(!Ve(C.point,f)){rt(w.numGlyphs,g);continue}const I=Ue(i.transform.cameraToCenterDistance,C.signedDistanceFromCamera),M=t.aA(p,m,w),E=s?M*i.transform.getPitchedTextCorrection(w.anchorX,w.anchorY,c)/I:M*I,S=He({projectionContext:P,pitchedLabelPlaneMatrixInverse:o,symbol:w,fontSize:E,flip:!1,keepUpright:n,glyphOffsetArray:e.glyphOffsetArray,dynamicLayoutVertexArray:g,aspectRatio:b,rotateToLine:l});y=S.useVertical,(S.notEnoughRoom||y||S.needsFlipping&&He({projectionContext:P,pitchedLabelPlaneMatrixInverse:o,symbol:w,fontSize:E,flip:!0,keepUpright:n,glyphOffsetArray:e.glyphOffsetArray,dynamicLayoutVertexArray:g,aspectRatio:b,rotateToLine:l}).notEnoughRoom)&&rt(w.numGlyphs,g);}a?e.text.dynamicLayoutVertexBuffer.updateData(g):e.icon.dynamicLayoutVertexBuffer.updateData(g);}function We(e,t,i,a,r,o,s,n){const l=o.glyphStartIndex+o.numGlyphs,c=o.lineStartIndex,h=o.lineStartIndex+o.lineLength,u=t.getoffsetX(o.glyphStartIndex),d=t.getoffsetX(l-1),_=it(e*u,i,a,r,o.segment,c,h,n,s);if(!_)return null;const p=it(e*d,i,a,r,o.segment,c,h,n,s);return p?n.projectionCache.anyProjectionOccluded?null:{first:_,last:p}:null}function $e(e,i,a,r){return e===t.az.horizontal&&Math.abs(a.y-i.y)>Math.abs(a.x-i.x)*r?{useVertical:!0}:(e===t.az.vertical?i.y<a.y:i.x>a.x)?{needsFlipping:!0}:null}function He(e){const{projectionContext:i,pitchedLabelPlaneMatrixInverse:a,symbol:r,fontSize:o,flip:s,keepUpright:n,glyphOffsetArray:l,dynamicLayoutVertexArray:c,aspectRatio:h,rotateToLine:u}=e,d=o/24,_=r.lineOffsetX*d,p=r.lineOffsetY*d;let m;if(r.numGlyphs>1){const e=r.glyphStartIndex+r.numGlyphs,t=r.lineStartIndex,o=r.lineStartIndex+r.lineLength,c=We(d,l,_,p,s,r,u,i);if(!c)return {notEnoughRoom:!0};const f=Qe(c.first.point.x,c.first.point.y,i,a),g=Qe(c.last.point.x,c.last.point.y,i,a);if(n&&!s){const e=$e(r.writingMode,f,g,h);if(e)return e}m=[c.first];for(let a=r.glyphStartIndex+1;a<e-1;a++){const e=it(d*l.getoffsetX(a),_,p,s,r.segment,t,o,i,u);if(!e)return {notEnoughRoom:!0};m.push(e);}m.push(c.last);}else {if(n&&!s){const e=Ye(i.tileAnchorPoint.x,i.tileAnchorPoint.y,i).point,o=r.lineStartIndex+r.segment+1,s=new t.P(i.lineVertexArray.getx(o),i.lineVertexArray.gety(o)),n=Ye(s.x,s.y,i),l=n.signedDistanceFromCamera>0?n.point:Xe(i.tileAnchorPoint,s,e,1,i),c=Qe(e.x,e.y,i,a),u=Qe(l.x,l.y,i,a),d=$e(r.writingMode,c,u,h);if(d)return d}const e=it(d*l.getoffsetX(r.glyphStartIndex),_,p,s,r.segment,r.lineStartIndex,r.lineStartIndex+r.lineLength,i,u);if(!e||i.projectionCache.anyProjectionOccluded)return {notEnoughRoom:!0};m=[e];}for(const e of m)t.aG(c,e.point,e.angle);return {}}function Xe(e,t,i,a,r){const o=e.add(e.sub(t)._unit()),s=Ye(o.x,o.y,r).point,n=i.sub(s);return i.add(n._mult(a/n.mag()))}function Ke(e,i,a){const r=i.projectionCache;if(r.projections[e])return r.projections[e];const o=new t.P(i.lineVertexArray.getx(e),i.lineVertexArray.gety(e)),s=Ye(o.x,o.y,i);if(s.signedDistanceFromCamera>0)return r.projections[e]=s.point,r.anyProjectionOccluded=r.anyProjectionOccluded||s.isOccluded,s.point;const n=e-a.direction;return Xe(0===a.distanceFromAnchor?i.tileAnchorPoint:new t.P(i.lineVertexArray.getx(n),i.lineVertexArray.gety(n)),o,a.previousVertex,a.absOffsetX-a.distanceFromAnchor+1,i)}function Ye(e,t,i){const a=e+i.translation[0],r=t+i.translation[1];let o;return i.pitchWithMap?(o=Ge(a,r,i.pitchedLabelPlaneMatrix,i.getElevation),o.isOccluded=!1):(o=i.transform.projectTileCoordinates(a,r,i.unwrappedTileID,i.getElevation),o.point.x=(.5*o.point.x+.5)*i.width,o.point.y=(.5*-o.point.y+.5)*i.height),o}function Qe(e,i,a,r){if(a.pitchWithMap){const o=[e,i,0,1];return t.aH(o,o,r),a.transform.projectTileCoordinates(o[0]/o[3],o[1]/o[3],a.unwrappedTileID,a.getElevation).point}return {x:e/a.width*2-1,y:1-i/a.height*2}}function Je(e,t,i){return i.transform.projectTileCoordinates(e,t,i.unwrappedTileID,i.getElevation)}function et(e,t,i){return e._unit()._perp()._mult(t*i)}function tt(e,i,a,r,o,s,n,l,c){if(l.projectionCache.offsets[e])return l.projectionCache.offsets[e];const h=a.add(i);if(e+c.direction<r||e+c.direction>=o)return l.projectionCache.offsets[e]=h,h;const u=Ke(e+c.direction,l,c),d=et(u.sub(a),n,c.direction),_=a.add(d),p=u.add(d);return l.projectionCache.offsets[e]=t.aI(s,h,_,p)||h,l.projectionCache.offsets[e]}function it(e,t,i,a,r,o,s,n,l){const c=a?e-t:e+t;let h=c>0?1:-1,u=0;a&&(h*=-1,u=Math.PI),h<0&&(u+=Math.PI);let d,_=h>0?o+r:o+r+1;n.projectionCache.cachedAnchorPoint?d=n.projectionCache.cachedAnchorPoint:(d=Ye(n.tileAnchorPoint.x,n.tileAnchorPoint.y,n).point,n.projectionCache.cachedAnchorPoint=d);let p,m,f=d,g=d,v=0,x=0;const b=Math.abs(c),y=[];let w;for(;v+x<=b;){if(_+=h,_<o||_>=s)return null;v+=x,g=f,m=p;const e={absOffsetX:b,direction:h,distanceFromAnchor:v,previousVertex:g};if(f=Ke(_,n,e),0===i)y.push(g),w=f.sub(g);else {let t;const a=f.sub(g);t=0===a.mag()?et(Ke(_+h,n,e).sub(f),i,h):et(a,i,h),m||(m=g.add(t)),p=tt(_,t,f,o,s,m,i,n,e),y.push(m),w=p.sub(m);}x=w.mag();}const T=w._mult((b-v)/x)._add(m||g),P=u+Math.atan2(f.y-g.y,f.x-g.x);return y.push(T),{point:T,angle:l?P:0,path:y}}const at=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function rt(e,t){for(let i=0;i<e;i++){const e=t.length;t.resize(e+4),t.float32.set(at,3*e);}}function ot(e,t,i){const a=t[0],r=t[1];return e[0]=i[0]*a+i[4]*r+i[12],e[1]=i[1]*a+i[5]*r+i[13],e[3]=i[3]*a+i[7]*r+i[15],e}const st=100;class nt{constructor(e,t=new Oe(e.width+200,e.height+200,25),i=new Oe(e.width+200,e.height+200,25)){this.transform=e,this.grid=t,this.ignoredGrid=i,this.pitchFactor=Math.cos(e.pitch*Math.PI/180)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+st,this.screenBottomBoundary=e.height+st,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.perspectiveRatioCutoff=.6;}placeCollisionBox(e,t,i,a,r,o,s,n,l,c,h,u){const d=this.projectAndGetPerspectiveRatio(e.anchorPointX+n[0],e.anchorPointY+n[1],r,c,u),_=i*d.perspectiveRatio;let p;if(o||s)p=this._projectCollisionBox(e,_,a,r,o,s,n,d,c,h,u);else {const t=d.x+(h?h.x*_:0),i=d.y+(h?h.y*_:0);p={allPointsOccluded:!1,box:[t+e.x1*_,i+e.y1*_,t+e.x2*_,i+e.y2*_]};}const[m,f,g,v]=p.box,x=o?p.allPointsOccluded:d.isOccluded;let b=x;return b||(b=d.perspectiveRatio<this.perspectiveRatioCutoff),b||(b=!this.isInsideGrid(m,f,g,v)),b||"always"!==t&&this.grid.hitTest(m,f,g,v,t,l)?{box:[m,f,g,v],placeable:!1,offscreen:!1,occluded:x}:{box:[m,f,g,v],placeable:!0,offscreen:this.isOffscreen(m,f,g,v),occluded:x}}placeCollisionCircles(e,i,a,r,o,s,n,l,c,h,u,d,_,p){const m=[],f=new t.P(i.anchorX,i.anchorY),g=this.getPerspectiveRatio(f.x,f.y,s,p),v=(c?o*this.transform.getPitchedTextCorrection(i.anchorX,i.anchorY,s)/g:o*g)/t.aM,x={getElevation:p,pitchedLabelPlaneMatrix:n,lineVertexArray:a,pitchWithMap:c,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:f,unwrappedTileID:s,width:this.transform.width,height:this.transform.height,translation:_},b=We(v,r,i.lineOffsetX*v,i.lineOffsetY*v,!1,i,!1,x);let y=!1,w=!1,T=!0;if(b){const i=.5*u*g+d,a=new t.P(-100,-100),r=new t.P(this.screenRightBoundary,this.screenBottomBoundary),o=new Fe,s=b.first,n=b.last;let _=[];for(let e=s.path.length-1;e>=1;e--)_.push(s.path[e]);for(let e=1;e<n.path.length;e++)_.push(n.path[e]);const p=2.5*i;if(c){const e=this.projectPathToScreenSpace(_,x);_=e.some((e=>e.signedDistanceFromCamera<=0))?[]:e.map((e=>e.point));}let f=[];if(_.length>0){const e=_[0].clone(),i=_[0].clone();for(let t=1;t<_.length;t++)e.x=Math.min(e.x,_[t].x),e.y=Math.min(e.y,_[t].y),i.x=Math.max(i.x,_[t].x),i.y=Math.max(i.y,_[t].y);f=e.x>=a.x&&i.x<=r.x&&e.y>=a.y&&i.y<=r.y?[_]:i.x<a.x||e.x>r.x||i.y<a.y||e.y>r.y?[]:t.aJ([_],a.x,a.y,r.x,r.y);}for(const t of f){o.reset(t,.25*i);let a=0;a=o.length<=.5*i?1:Math.ceil(o.paddedLength/p)+1;for(let t=0;t<a;t++){const r=t/Math.max(a-1,1),s=o.lerp(r),n=s.x+st,c=s.y+st;m.push(n,c,i,0);const u=n-i,d=c-i,_=n+i,p=c+i;if(T=T&&this.isOffscreen(u,d,_,p),w=w||this.isInsideGrid(u,d,_,p),"always"!==e&&this.grid.hitTestCircle(n,c,i,e,h)&&(y=!0,!l))return {circles:[],offscreen:!1,collisionDetected:y}}}}return {circles:!l&&y||!w||g<this.perspectiveRatioCutoff?[]:m,offscreen:T,collisionDetected:y}}projectPathToScreenSpace(e,i){const a=function(e,i){const a=t.N();return t.aB(a,i.pitchedLabelPlaneMatrix),e.map((e=>{const t=Ge(e.x,e.y,a,i.getElevation),r=i.transform.projectTileCoordinates(t.point.x,t.point.y,i.unwrappedTileID,i.getElevation);return r.point.x=(.5*r.point.x+.5)*i.width,r.point.y=(.5*-r.point.y+.5)*i.height,r}))}(e,i);return function(e){let t=0,i=0,a=0,r=0;for(let o=0;o<e.length;o++)e[o].isOccluded?(a=o+1,r=0):(r++,r>i&&(i=r,t=a));return e.slice(t,t+i)}(a)}queryRenderedSymbols(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return {};const i=[],a=new t.aa;for(const r of e){const e=new t.P(r.x+st,r.y+st);a.extend(e),i.push(e);}const{minX:r,minY:o,maxX:s,maxY:n}=a,l=this.grid.query(r,o,s,n).concat(this.ignoredGrid.query(r,o,s,n)),c={},h={};for(const e of l){const a=e.key;if(void 0===c[a.bucketInstanceId]&&(c[a.bucketInstanceId]={}),c[a.bucketInstanceId][a.featureIndex])continue;const r=[new t.P(e.x1,e.y1),new t.P(e.x2,e.y1),new t.P(e.x2,e.y2),new t.P(e.x1,e.y2)];t.aK(i,r)&&(c[a.bucketInstanceId][a.featureIndex]=!0,void 0===h[a.bucketInstanceId]&&(h[a.bucketInstanceId]=[]),h[a.bucketInstanceId].push(a.featureIndex));}return h}insertCollisionBox(e,t,i,a,r,o){(i?this.ignoredGrid:this.grid).insert({bucketInstanceId:a,featureIndex:r,collisionGroupID:o,overlapMode:t},e[0],e[1],e[2],e[3]);}insertCollisionCircles(e,t,i,a,r,o){const s=i?this.ignoredGrid:this.grid,n={bucketInstanceId:a,featureIndex:r,collisionGroupID:o,overlapMode:t};for(let t=0;t<e.length;t+=4)s.insertCircle(n,e[t],e[t+1],e[t+2]);}projectAndGetPerspectiveRatio(e,i,a,r,o){if(o){let a;r?(a=[e,i,r(e,i),1],t.aH(a,a,o)):(a=[e,i,0,1],ot(a,a,o));const s=a[3];return {x:(a[0]/s+1)/2*this.transform.width+st,y:(-a[1]/s+1)/2*this.transform.height+st,perspectiveRatio:.5+this.transform.cameraToCenterDistance/s*.5,isOccluded:!1,signedDistanceFromCamera:s}}{const t=this.transform.projectTileCoordinates(e,i,a,r);return {x:(t.point.x+1)/2*this.transform.width+st,y:(1-t.point.y)/2*this.transform.height+st,perspectiveRatio:.5+this.transform.cameraToCenterDistance/t.signedDistanceFromCamera*.5,isOccluded:t.isOccluded,signedDistanceFromCamera:t.signedDistanceFromCamera}}}getPerspectiveRatio(e,t,i,a){const r=this.transform.projectTileCoordinates(e,t,i,a);return .5+this.transform.cameraToCenterDistance/r.signedDistanceFromCamera*.5}isOffscreen(e,t,i,a){return i<st||e>=this.screenRightBoundary||a<st||t>this.screenBottomBoundary}isInsideGrid(e,t,i,a){return i>=0&&e<this.gridRightBoundary&&a>=0&&t<this.gridBottomBoundary}getViewportMatrix(){const e=t.ar([]);return t.O(e,e,[-100,-100,0]),e}_projectCollisionBox(e,i,a,r,o,s,n,l,c,h,u){let d=1,_=0,p=0,m=1;const f=e.anchorPointX+n[0],g=e.anchorPointY+n[1];if(s&&!o){const e=this.projectAndGetPerspectiveRatio(f+1,g,r,c,u),t=e.x-l.x,i=Math.atan((e.y-l.y)/t)+(t<0?Math.PI:0),a=Math.sin(i),o=Math.cos(i);d=o,_=a,p=-a,m=o;}else if(!s&&o){const e=Ze(this.transform);d=e.vecEast[0],_=e.vecEast[1],p=e.vecSouth[0],m=e.vecSouth[1];}let v=l.x,x=l.y,b=i;o&&(v=f,x=g,b=Math.pow(2,-(this.transform.zoom-a.overscaledZ)),b*=this.transform.getPitchedTextCorrection(f,g,r),h||(b*=t.an(.5+l.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),h&&(v+=d*h.x*b+p*h.y*b,x+=_*h.x*b+m*h.y*b);const y=e.x1*b,w=e.x2*b,T=(y+w)/2,P=e.y1*b,C=e.y2*b,I=(P+C)/2,M=[{offsetX:y,offsetY:P},{offsetX:T,offsetY:P},{offsetX:w,offsetY:P},{offsetX:w,offsetY:I},{offsetX:w,offsetY:C},{offsetX:T,offsetY:C},{offsetX:y,offsetY:C},{offsetX:y,offsetY:I}];let E=[];for(const{offsetX:e,offsetY:i}of M)E.push(new t.P(v+d*e+p*i,x+_*e+m*i));let S=!1;if(o){const e=E.map((e=>this.projectAndGetPerspectiveRatio(e.x,e.y,r,c,u)));S=e.some((e=>!e.isOccluded)),E=e.map((e=>new t.P(e.x,e.y)));}else S=!0;return {box:t.aL(E),allPointsOccluded:!S}}}class lt{constructor(e,t,i,a){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):a&&i?1:0,this.placed=i;}isHidden(){return 0===this.opacity&&!this.placed}}class ct{constructor(e,t,i,a,r){this.text=new lt(e?e.text:null,t,i,r),this.icon=new lt(e?e.icon:null,t,a,r);}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ht{constructor(e,t,i){this.text=e,this.icon=t,this.skipFade=i;}}class ut{constructor(e,t,i,a,r){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=i,this.bucketIndex=a,this.tileID=r;}}class dt{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={};}get(e){if(this.crossSourceCollisions)return {ID:0,predicate:null};if(!this.collisionGroups[e]){const t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:e=>e.collisionGroupID===t};}return this.collisionGroups[e]}}function _t(e,i,a,r,o){const{horizontalAlign:s,verticalAlign:n}=t.aS(e);return new t.P(-(s-.5)*i+r[0]*o,-(n-.5)*a+r[1]*o)}class pt{constructor(e,t,i,a,r){this.transform=e.clone(),this.terrain=t,this.collisionIndex=new nt(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=i,this.retainedQueryData={},this.collisionGroups=new dt(a),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=r,r&&(r.prevPlacement=void 0),this.placedOrientations={};}_getTerrainElevationFunc(e){const t=this.terrain;return t?(i,a)=>t.getElevation(e,i,a):null}getBucketParts(e,i,a,r){const o=a.getBucket(i),s=a.latestFeatureIndex;if(!o||!s||i.id!==o.layerIds[0])return;const n=a.collisionBoxArray,l=o.layers[0].layout,c=o.layers[0].paint,h=Math.pow(2,this.transform.zoom-a.tileID.overscaledZ),u=a.tileSize/t.a5,d=a.tileID.toUnwrapped(),_="map"===l.get("text-rotation-alignment"),p=t.aN(a,1,this.transform.zoom),m=t.aO(this.collisionIndex.transform,a,c.get("text-translate"),c.get("text-translate-anchor")),f=t.aO(this.collisionIndex.transform,a,c.get("icon-translate"),c.get("icon-translate-anchor")),g=je(_,this.transform,p);this.retainedQueryData[o.bucketInstanceId]=new ut(o.bucketInstanceId,s,o.sourceLayerIndex,o.index,a.tileID);const v={bucket:o,layout:l,translationText:m,translationIcon:f,unwrappedTileID:d,pitchedLabelPlaneMatrix:g,scale:h,textPixelRatio:u,holdingForFade:a.holdingForSymbolFade(),collisionBoxArray:n,partiallyEvaluatedTextSize:t.ay(o.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(r)for(const t of o.sortKeyRanges){const{sortKey:i,symbolInstanceStart:a,symbolInstanceEnd:r}=t;e.push({sortKey:i,symbolInstanceStart:a,symbolInstanceEnd:r,parameters:v});}else e.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:v});}attemptAnchorPlacement(e,i,a,r,o,s,n,l,c,h,u,d,_,p,m,f,g,v,x,b){const y=t.aP[e.textAnchor],w=[e.textOffset0,e.textOffset1],T=_t(y,a,r,w,o),P=this.collisionIndex.placeCollisionBox(i,d,l,c,h,n,s,f,u.predicate,x,T,b);if((!v||this.collisionIndex.placeCollisionBox(v,d,l,c,h,n,s,g,u.predicate,x,T,b).placeable)&&P.placeable){let e;if(this.prevPlacement&&this.prevPlacement.variableOffsets[_.crossTileID]&&this.prevPlacement.placements[_.crossTileID]&&this.prevPlacement.placements[_.crossTileID].text&&(e=this.prevPlacement.variableOffsets[_.crossTileID].anchor),0===_.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[_.crossTileID]={textOffset:w,width:a,height:r,anchor:y,textBoxScale:o,prevAnchor:e},this.markUsedJustification(p,y,_,m),p.allowVerticalPlacement&&(this.markUsedOrientation(p,m,_),this.placedOrientations[_.crossTileID]=m),{shift:T,placedGlyphBoxes:P}}}placeLayerBucketPart(e,i,a){const{bucket:r,layout:o,translationText:s,translationIcon:n,unwrappedTileID:l,pitchedLabelPlaneMatrix:c,textPixelRatio:h,holdingForFade:u,collisionBoxArray:d,partiallyEvaluatedTextSize:_,collisionGroup:p}=e.parameters,m=o.get("text-optional"),f=o.get("icon-optional"),g=t.aQ(o,"text-overlap","text-allow-overlap"),v="always"===g,x=t.aQ(o,"icon-overlap","icon-allow-overlap"),b="always"===x,y="map"===o.get("text-rotation-alignment"),w="map"===o.get("text-pitch-alignment"),T="none"!==o.get("icon-text-fit"),P="viewport-y"===o.get("symbol-z-order"),C=v&&(b||!r.hasIconData()||f),I=b&&(v||!r.hasTextData()||m);!r.collisionArrays&&d&&r.deserializeCollisionBoxes(d);const M=this.retainedQueryData[r.bucketInstanceId].tileID,E=this._getTerrainElevationFunc(M),S=this.transform.getFastPathSimpleProjectionMatrix(M),R=(e,d,b)=>{var P,R;if(i[e.crossTileID])return;if(u)return void(this.placements[e.crossTileID]=new ht(!1,!1,!1));let z=!1,D=!1,A=!0,L=null,k={box:null,placeable:!1,offscreen:null,occluded:!1},F={placeable:!1},B=null,O=null,j=null,N=0,Z=0,G=0;d.textFeatureIndex?N=d.textFeatureIndex:e.useRuntimeCollisionCircles&&(N=e.featureIndex),d.verticalTextFeatureIndex&&(Z=d.verticalTextFeatureIndex);const U=d.textBox;if(U){const i=i=>{let a=t.az.horizontal;if(r.allowVerticalPlacement&&!i&&this.prevPlacement){const t=this.prevPlacement.placedOrientations[e.crossTileID];t&&(this.placedOrientations[e.crossTileID]=t,a=t,this.markUsedOrientation(r,a,e));}return a},o=(i,a)=>{if(r.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&d.verticalTextBox){for(const e of r.writingModes)if(e===t.az.vertical?(k=a(),F=k):k=i(),k&&k.placeable)break}else k=i();},c=e.textAnchorOffsetStartIndex,u=e.textAnchorOffsetEndIndex;if(u===c){const a=(t,i)=>{const a=this.collisionIndex.placeCollisionBox(t,g,h,M,l,w,y,s,p.predicate,E,void 0,S);return a&&a.placeable&&(this.markUsedOrientation(r,i,e),this.placedOrientations[e.crossTileID]=i),a};o((()=>a(U,t.az.horizontal)),(()=>{const i=d.verticalTextBox;return r.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&i?a(i,t.az.vertical):{box:null,offscreen:null}})),i(k&&k.placeable);}else {let _=t.aP[null===(R=null===(P=this.prevPlacement)||void 0===P?void 0:P.variableOffsets[e.crossTileID])||void 0===R?void 0:R.anchor];const m=(t,i,o)=>{const d=t.x2-t.x1,m=t.y2-t.y1,f=e.textBoxScale,v=T&&"never"===x?i:null;let b=null,P="never"===g?1:2,C="never";_&&P++;for(let i=0;i<P;i++){for(let i=c;i<u;i++){const a=r.textAnchorOffsets.get(i);if(_&&a.textAnchor!==_)continue;const c=this.attemptAnchorPlacement(a,t,d,m,f,y,w,h,M,l,p,C,e,r,o,s,n,v,E);if(c&&(b=c.placedGlyphBoxes,b&&b.placeable))return z=!0,L=c.shift,b}_?_=null:C=g;}return a&&!b&&(b={box:this.collisionIndex.placeCollisionBox(U,"always",h,M,l,w,y,s,p.predicate,E,void 0,S).box,offscreen:!1,placeable:!1,occluded:!1}),b};o((()=>m(U,d.iconBox,t.az.horizontal)),(()=>{const i=d.verticalTextBox;return r.allowVerticalPlacement&&(!k||!k.placeable)&&e.numVerticalGlyphVertices>0&&i?m(i,d.verticalIconBox,t.az.vertical):{box:null,occluded:!0,offscreen:null}})),k&&(z=k.placeable,A=k.offscreen);const f=i(k&&k.placeable);if(!z&&this.prevPlacement){const t=this.prevPlacement.variableOffsets[e.crossTileID];t&&(this.variableOffsets[e.crossTileID]=t,this.markUsedJustification(r,t.anchor,e,f));}}}if(B=k,z=B&&B.placeable,A=B&&B.offscreen,e.useRuntimeCollisionCircles&&e.centerJustifiedTextSymbolIndex>=0){const i=r.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),n=t.aA(r.textSizeData,_,i),h=o.get("text-padding");O=this.collisionIndex.placeCollisionCircles(g,i,r.lineVertexArray,r.glyphOffsetArray,n,l,c,a,w,p.predicate,e.collisionCircleDiameter,h,s,E),O.circles.length&&O.collisionDetected&&!a&&t.w("Collisions detected, but collision boxes are not shown"),z=v||O.circles.length>0&&!O.collisionDetected,A=A&&O.offscreen;}if(d.iconFeatureIndex&&(G=d.iconFeatureIndex),d.iconBox){const e=e=>this.collisionIndex.placeCollisionBox(e,x,h,M,l,w,y,n,p.predicate,E,T&&L?L:void 0,S);F&&F.placeable&&d.verticalIconBox?(j=e(d.verticalIconBox),D=j.placeable):(j=e(d.iconBox),D=j.placeable),A=A&&j.offscreen;}const V=m||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,q=f||0===e.numIconVertices;V||q?q?V||(D=D&&z):z=D&&z:D=z=D&&z;const W=D&&j.placeable;if(z&&B.placeable&&this.collisionIndex.insertCollisionBox(B.box,g,o.get("text-ignore-placement"),r.bucketInstanceId,F&&F.placeable&&Z?Z:N,p.ID),W&&this.collisionIndex.insertCollisionBox(j.box,x,o.get("icon-ignore-placement"),r.bucketInstanceId,G,p.ID),O&&z&&this.collisionIndex.insertCollisionCircles(O.circles,g,o.get("text-ignore-placement"),r.bucketInstanceId,N,p.ID),a&&this.storeCollisionData(r.bucketInstanceId,b,d,B,j,O),0===e.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===r.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[e.crossTileID]=new ht((z||C)&&!(null==B?void 0:B.occluded),(D||I)&&!(null==j?void 0:j.occluded),A||r.justReloaded),i[e.crossTileID]=!0;};if(P){if(0!==e.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");const t=r.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let e=t.length-1;e>=0;--e){const i=t[e];R(r.symbolInstances.get(i),r.collisionArrays[i],i);}}else for(let t=e.symbolInstanceStart;t<e.symbolInstanceEnd;t++)R(r.symbolInstances.get(t),r.collisionArrays[t],t);r.justReloaded=!1;}storeCollisionData(e,t,i,a,r,o){if(i.textBox||i.iconBox){let o,s;this.collisionBoxArrays.has(e)?o=this.collisionBoxArrays.get(e):(o=new Map,this.collisionBoxArrays.set(e,o)),o.has(t)?s=o.get(t):(s={text:null,icon:null},o.set(t,s)),i.textBox&&(s.text=a.box),i.iconBox&&(s.icon=r.box);}if(o){let t=this.collisionCircleArrays[e];void 0===t&&(t=this.collisionCircleArrays[e]=[]);for(let e=0;e<o.circles.length;e+=4)t.push(o.circles[e+0]-st),t.push(o.circles[e+1]-st),t.push(o.circles[e+2]),t.push(o.collisionDetected?1:0);}}markUsedJustification(e,i,a,r){let o;o=r===t.az.vertical?a.verticalPlacedTextSymbolIndex:{left:a.leftJustifiedTextSymbolIndex,center:a.centerJustifiedTextSymbolIndex,right:a.rightJustifiedTextSymbolIndex}[t.aR(i)];const s=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex,a.verticalPlacedTextSymbolIndex];for(const t of s)t>=0&&(e.text.placedSymbolArray.get(t).crossTileID=o>=0&&t!==o?0:a.crossTileID);}markUsedOrientation(e,i,a){const r=i===t.az.horizontal||i===t.az.horizontalOnly?i:0,o=i===t.az.vertical?i:0,s=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex];for(const t of s)e.text.placedSymbolArray.get(t).placedOrientation=r;a.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(a.verticalPlacedTextSymbolIndex).placedOrientation=o);}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const t=this.prevPlacement;let i=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;const a=t?t.symbolFadeChange(e):1,r=t?t.opacities:{},o=t?t.variableOffsets:{},s=t?t.placedOrientations:{};for(const e in this.placements){const t=this.placements[e],o=r[e];o?(this.opacities[e]=new ct(o,a,t.text,t.icon),i=i||t.text!==o.text.placed||t.icon!==o.icon.placed):(this.opacities[e]=new ct(null,a,t.text,t.icon,t.skipFade),i=i||t.text||t.icon);}for(const e in r){const t=r[e];if(!this.opacities[e]){const r=new ct(t,a,!1,!1);r.isHidden()||(this.opacities[e]=r,i=i||t.text.placed||t.icon.placed);}}for(const e in o)this.variableOffsets[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.variableOffsets[e]=o[e]);for(const e in s)this.placedOrientations[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.placedOrientations[e]=s[e]);if(t&&void 0===t.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");i?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e);}updateLayerOpacities(e,t){const i={};for(const a of t){const t=a.getBucket(e);t&&a.latestFeatureIndex&&e.id===t.layerIds[0]&&this.updateBucketOpacities(t,a.tileID,i,a.collisionBoxArray);}}updateBucketOpacities(e,i,a,r){e.hasTextData()&&(e.text.opacityVertexArray.clear(),e.text.hasVisibleVertices=!1),e.hasIconData()&&(e.icon.opacityVertexArray.clear(),e.icon.hasVisibleVertices=!1),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const o=e.layers[0],s=o.layout,n=new ct(null,0,!1,!1,!0),l=s.get("text-allow-overlap"),c=s.get("icon-allow-overlap"),h=o._unevaluatedLayout.hasValue("text-variable-anchor")||o._unevaluatedLayout.hasValue("text-variable-anchor-offset"),u="map"===s.get("text-rotation-alignment"),d="map"===s.get("text-pitch-alignment"),_="none"!==s.get("icon-text-fit"),p=new ct(null,0,l&&(c||!e.hasIconData()||s.get("icon-optional")),c&&(l||!e.hasTextData()||s.get("text-optional")),!0);!e.collisionArrays&&r&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(r);const m=(e,t,i)=>{for(let a=0;a<t/4;a++)e.opacityVertexArray.emplaceBack(i);e.hasVisibleVertices=e.hasVisibleVertices||i!==Pt;},f=this.collisionBoxArrays.get(e.bucketInstanceId);for(let i=0;i<e.symbolInstances.length;i++){const r=e.symbolInstances.get(i),{numHorizontalGlyphVertices:o,numVerticalGlyphVertices:s,crossTileID:l}=r;let c=this.opacities[l];a[l]?c=n:c||(c=p,this.opacities[l]=c),a[l]=!0;const g=r.numIconVertices>0,v=this.placedOrientations[r.crossTileID],x=v===t.az.vertical,b=v===t.az.horizontal||v===t.az.horizontalOnly;if(o>0||s>0){const t=Tt(c.text);m(e.text,o,x?Pt:t),m(e.text,s,b?Pt:t);const i=c.text.isHidden();[r.rightJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.leftJustifiedTextSymbolIndex].forEach((t=>{t>=0&&(e.text.placedSymbolArray.get(t).hidden=i||x?1:0);})),r.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).hidden=i||b?1:0);const a=this.variableOffsets[r.crossTileID];a&&this.markUsedJustification(e,a.anchor,r,v);const n=this.placedOrientations[r.crossTileID];n&&(this.markUsedJustification(e,"left",r,n),this.markUsedOrientation(e,n,r));}if(g){const t=Tt(c.icon),i=!(_&&r.verticalPlacedIconSymbolIndex&&x);r.placedIconSymbolIndex>=0&&(m(e.icon,r.numIconVertices,i?t:Pt),e.icon.placedSymbolArray.get(r.placedIconSymbolIndex).hidden=c.icon.isHidden()),r.verticalPlacedIconSymbolIndex>=0&&(m(e.icon,r.numVerticalIconVertices,i?Pt:t),e.icon.placedSymbolArray.get(r.verticalPlacedIconSymbolIndex).hidden=c.icon.isHidden());}const y=f&&f.has(i)?f.get(i):{text:null,icon:null};if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const a=e.collisionArrays[i];if(a){let i=new t.P(0,0);if(a.textBox||a.verticalTextBox){let t=!0;if(h){const e=this.variableOffsets[l];e?(i=_t(e.anchor,e.width,e.height,e.textOffset,e.textBoxScale),u&&i._rotate(d?-this.transform.bearingInRadians:this.transform.bearingInRadians)):t=!1;}if(a.textBox||a.verticalTextBox){let r;a.textBox&&(r=x),a.verticalTextBox&&(r=b),mt(e.textCollisionBox.collisionVertexArray,c.text.placed,!t||r,y.text,i.x,i.y);}}if(a.iconBox||a.verticalIconBox){const t=Boolean(!b&&a.verticalIconBox);let r;a.iconBox&&(r=t),a.verticalIconBox&&(r=!t),mt(e.iconCollisionBox.collisionVertexArray,c.icon.placed,r,y.icon,_?i.x:0,_?i.y:0);}}}}if(e.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.text.opacityVertexArray.length!==e.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${e.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${e.text.layoutVertexArray.length}) / 4`);if(e.icon.opacityVertexArray.length!==e.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${e.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${e.icon.layoutVertexArray.length}) / 4`);e.bucketInstanceId in this.collisionCircleArrays&&(e.collisionCircleArray=this.collisionCircleArrays[e.bucketInstanceId],delete this.collisionCircleArrays[e.bucketInstanceId]);}symbolFadeChange(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,t){const i=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*i>e}setStale(){this.stale=!0;}}function mt(e,t,i,a,r,o){a&&0!==a.length||(a=[0,0,0,0]);const s=a[0]-st,n=a[1]-st,l=a[2]-st,c=a[3]-st;e.emplaceBack(t?1:0,i?1:0,r||0,o||0,s,n),e.emplaceBack(t?1:0,i?1:0,r||0,o||0,l,n),e.emplaceBack(t?1:0,i?1:0,r||0,o||0,l,c),e.emplaceBack(t?1:0,i?1:0,r||0,o||0,s,c);}const ft=Math.pow(2,25),gt=Math.pow(2,24),vt=Math.pow(2,17),xt=Math.pow(2,16),bt=Math.pow(2,9),yt=Math.pow(2,8),wt=Math.pow(2,1);function Tt(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;const t=e.placed?1:0,i=Math.floor(127*e.opacity);return i*ft+t*gt+i*vt+t*xt+i*bt+t*yt+i*wt+t}const Pt=0;class Ct{constructor(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&!e.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[];}continuePlacement(e,t,i,a,r){const o=this._bucketParts;for(;this._currentTileIndex<e.length;)if(t.getBucketParts(o,a,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,r())return !0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort(((e,t)=>e.sortKey-t.sortKey)));this._currentPartIndex<o.length;)if(t.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,i),this._currentPartIndex++,r())return !0;return !1}}class It{constructor(e,t,i,a,r,o,s,n){this.placement=new pt(e,t,o,s,n),this._currentPlacementIndex=i.length-1,this._forceFullPlacement=a,this._showCollisionBoxes=r,this._done=!1;}isDone(){return this._done}continuePlacement(e,t,i){const a=c(),r=()=>!this._forceFullPlacement&&c()-a>2;for(;this._currentPlacementIndex>=0;){const a=t[e[this._currentPlacementIndex]],o=this.placement.collisionIndex.transform.zoom;if("symbol"===a.type&&(!a.minzoom||a.minzoom<=o)&&(!a.maxzoom||a.maxzoom>o)){if(this._inProgressLayer||(this._inProgressLayer=new Ct(a)),this._inProgressLayer.continuePlacement(i[a.source],this.placement,this._showCollisionBoxes,a,r))return;delete this._inProgressLayer;}this._currentPlacementIndex--;}this._done=!0;}commit(e){return this.placement.commit(e),this.placement}}const Mt=512/t.a5/2;class Et{constructor(e,i,a){this.tileID=e,this.bucketInstanceId=a,this._symbolsByKey={};const r=new Map;for(let e=0;e<i.length;e++){const t=i.get(e),a=t.key,o=r.get(a);o?o.push(t):r.set(a,[t]);}for(const[e,i]of r){const a={positions:i.map((e=>({x:Math.floor(e.anchorX*Mt),y:Math.floor(e.anchorY*Mt)}))),crossTileIDs:i.map((e=>e.crossTileID))};if(a.positions.length>128){const e=new t.aT(a.positions.length,16,Uint16Array);for(const{x:t,y:i}of a.positions)e.add(t,i);e.finish(),delete a.positions,a.index=e;}this._symbolsByKey[e]=a;}}getScaledCoordinates(e,i){const{x:a,y:r,z:o}=this.tileID.canonical,{x:s,y:n,z:l}=i.canonical,c=Mt/Math.pow(2,l-o),h=(n*t.a5+e.anchorY)*c,u=r*t.a5*Mt;return {x:Math.floor((s*t.a5+e.anchorX)*c-a*t.a5*Mt),y:Math.floor(h-u)}}findMatches(e,t,i){const a=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z);for(let r=0;r<e.length;r++){const o=e.get(r);if(o.crossTileID)continue;const s=this._symbolsByKey[o.key];if(!s)continue;const n=this.getScaledCoordinates(o,t);if(s.index){const e=s.index.range(n.x-a,n.y-a,n.x+a,n.y+a).sort();for(const t of e){const e=s.crossTileIDs[t];if(!i[e]){i[e]=!0,o.crossTileID=e;break}}}else if(s.positions)for(let e=0;e<s.positions.length;e++){const t=s.positions[e],r=s.crossTileIDs[e];if(Math.abs(t.x-n.x)<=a&&Math.abs(t.y-n.y)<=a&&!i[r]){i[r]=!0,o.crossTileID=r;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:e})=>e))}}class St{constructor(){this.maxCrossTileID=0;}generate(){return ++this.maxCrossTileID}}class Rt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0;}handleWrapJump(e){const t=Math.round((e-this.lng)/360);if(0!==t)for(const e in this.indexes){const i=this.indexes[e],a={};for(const e in i){const r=i[e];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+t),a[r.tileID.key]=r;}this.indexes[e]=a;}this.lng=e;}addBucket(e,t,i){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return !1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key]);}for(let e=0;e<t.symbolInstances.length;e++)t.symbolInstances.get(e).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const a=this.usedCrossTileIDs[e.overscaledZ];for(const i in this.indexes){const r=this.indexes[i];if(Number(i)>e.overscaledZ)for(const i in r){const o=r[i];o.tileID.isChildOf(e)&&o.findMatches(t.symbolInstances,e,a);}else {const o=r[e.scaledTo(Number(i)).key];o&&o.findMatches(t.symbolInstances,e,a);}}for(let e=0;e<t.symbolInstances.length;e++){const r=t.symbolInstances.get(e);r.crossTileID||(r.crossTileID=i.generate(),a[r.crossTileID]=!0);}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new Et(e,t.symbolInstances,t.bucketInstanceId),!0}removeBucketCrossTileIDs(e,t){for(const i of t.getCrossTileIDsLists())for(const t of i)delete this.usedCrossTileIDs[e][t];}removeStaleBuckets(e){let t=!1;for(const i in this.indexes){const a=this.indexes[i];for(const r in a)e[a[r].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,a[r]),delete a[r],t=!0);}return t}}class zt{constructor(){this.layerIndexes={},this.crossTileIDs=new St,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={};}addLayer(e,t,i){let a=this.layerIndexes[e.id];void 0===a&&(a=this.layerIndexes[e.id]=new Rt);let r=!1;const o={};a.handleWrapJump(i);for(const i of t){const t=i.getBucket(e);t&&e.id===t.layerIds[0]&&(t.bucketInstanceId||(t.bucketInstanceId=++this.maxBucketInstanceId),a.addBucket(i.tileID,t,this.crossTileIDs)&&(r=!0),o[t.bucketInstanceId]=!0);}return a.removeStaleBuckets(o)&&(r=!0),r}pruneUnusedLayers(e){const t={};e.forEach((e=>{t[e]=!0;}));for(const e in this.layerIndexes)t[e]||delete this.layerIndexes[e];}}var Dt="void main() {fragColor=vec4(1.0);}";const At={prelude:Lt("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nout highp vec4 fragColor;","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c\n);}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\n#ifdef GLOBE\nif ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}\n#endif\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;"),projectionMercator:Lt("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Lt("","#define GLOBE_RADIUS 6371008.8\nuniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos\n);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); \nif (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len\n);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}"),background:Lt("uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Lt("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Lt("in vec3 v_data;in float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {\n#ifdef GLOBE\nvec3 center_vector=projectToSphere(circle_center);\n#endif\nfloat angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {\n#ifdef GLOBE\nvec4 projected_center=interpolateProjection(circle_center,center_vector,ele);\n#else\nvec4 projected_center=projectTileWithElevation(circle_center,ele);\n#endif\ncorner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}\n#ifdef GLOBE\nvec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);\n#else\ngl_Position=projectTileWithElevation(corner_position,ele);\n#endif\n} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:Lt(Dt,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Lt("uniform highp float u_intensity;in vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);\n#ifdef GLOBE\nvec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);\n#else\ngl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));\n#endif\n}"),heatmapTexture:Lt("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Lt("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Lt("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:Lt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else\n{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:Lt("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Lt(Dt,"in vec2 a_pos;void main() {\n#ifdef GLOBE\ngl_Position=projectTileFor3D(a_pos,0.0);\n#else\ngl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);\n#endif\n}"),fill:Lt("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nfragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_fill_translate;in vec2 a_pos;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=projectTile(a_pos+u_fill_translate,a_pos);}"),fillOutline:Lt("in vec2 v_pos;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n}"),fillOutlinePattern:Lt("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n}"),fillPattern:Lt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:Lt("in vec4 v_color;void main() {fragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;\n#ifdef TERRAIN3D\nin vec2 a_centroid;\n#endif\nout vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;\n#ifdef GLOBE\nvec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);\n#else\ngl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);\n#endif\nfloat colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);\n#ifdef GLOBE\nmat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);\n#endif\ndirectional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:Lt("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;\n#ifdef TERRAIN3D\nin vec2 a_centroid;\n#endif\n#ifdef GLOBE\nout vec3 v_sphere_pos;\n#endif\nout vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;\n#ifdef GLOBE\nvec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);\n#else\ngl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);\n#endif\nvec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:Lt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Lt("uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];\n#define PI 3.141592653589793\n#define STANDARD 0\n#define COMBINED 1\n#define IGOR 2\n#define MULTIDIRECTIONAL 3\n#define BASIC 4\nfloat get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else\n{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else\n{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Lt("uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nin vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:Lt("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nin vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:Lt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nin vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:Lt("uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define mediump vec4 dasharray_from\n#pragma mapbox: define mediump vec4 dasharray_to\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 dasharray_from\n#pragma mapbox: initialize mediump vec4 dasharray_to\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nin vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define mediump vec4 dasharray_from\n#pragma mapbox: define mediump vec4 dasharray_to\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 dasharray_from\n#pragma mapbox: initialize mediump vec4 dasharray_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nfloat u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}"),lineGradientSDF:Lt("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define mediump vec4 dasharray_from\n#pragma mapbox: define mediump vec4 dasharray_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 dasharray_from\n#pragma mapbox: initialize mediump vec4 dasharray_to\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nin vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define mediump vec4 dasharray_from\n#pragma mapbox: define mediump vec4 dasharray_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 dasharray_from\n#pragma mapbox: initialize mediump vec4 dasharray_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nfloat u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}"),raster:Lt("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;\n#ifdef GLOBE\nif (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}\n#endif\nv_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Lt("uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;\n#ifdef GLOBE\nif(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}\n#endif\nvec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:Lt("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;\n#ifdef GLOBE\nif(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}\n#endif\nvec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:Lt("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;\n#ifdef GLOBE\nif(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}\n#endif\nvec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:Lt("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Lt("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Lt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Lt("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Lt("in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758\n);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}","in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Lt("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Lt(e,t){const i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,a=t.match(/in ([\w]+) ([\w]+)/g),r=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),s=o?o.concat(r):r,n={};return {fragmentSource:e=e.replace(i,((e,t,i,a,r)=>(n[r]=!0,"define"===t?`\n#ifndef HAS_UNIFORM_u_${r}\nin ${i} ${a} ${r};\n#else\nuniform ${i} ${a} u_${r};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${r}\n    ${i} ${a} ${r} = u_${r};\n#endif\n`))),vertexSource:t=t.replace(i,((e,t,i,a,r)=>{const o="float"===a?"vec2":"vec4",s=r.match(/color/)?"color":o;return n[r]?"define"===t?`\n#ifndef HAS_UNIFORM_u_${r}\nuniform lowp float u_${r}_t;\nin ${i} ${o} a_${r};\nout ${i} ${a} ${r};\n#else\nuniform ${i} ${a} u_${r};\n#endif\n`:"vec4"===s?`\n#ifndef HAS_UNIFORM_u_${r}\n    ${r} = a_${r};\n#else\n    ${i} ${a} ${r} = u_${r};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${r}\n    ${r} = unpack_mix_${s}(a_${r}, u_${r}_t);\n#else\n    ${i} ${a} ${r} = u_${r};\n#endif\n`:"define"===t?`\n#ifndef HAS_UNIFORM_u_${r}\nuniform lowp float u_${r}_t;\nin ${i} ${o} a_${r};\n#else\nuniform ${i} ${a} u_${r};\n#endif\n`:"vec4"===s?`\n#ifndef HAS_UNIFORM_u_${r}\n    ${i} ${a} ${r} = a_${r};\n#else\n    ${i} ${a} ${r} = u_${r};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${r}\n    ${i} ${a} ${r} = unpack_mix_${s}(a_${r}, u_${r}_t);\n#else\n    ${i} ${a} ${r} = u_${r};\n#endif\n`})),staticAttributes:a,staticUniforms:s}}class kt{constructor(e,t,i){this.vertexBuffer=e,this.indexBuffer=t,this.segments=i;}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null;}}var Ft=t.aU([{name:"a_pos",type:"Int16",components:2}]);const Bt="#define PROJECTION_MERCATOR",Ot="mercator";class jt{constructor(){this._cachedMesh=null;}get name(){return "mercator"}get useSubdivision(){return !1}get shaderVariantName(){return Ot}get shaderDefine(){return Bt}get shaderPreludeCode(){return At.projectionMercator}get vertexShaderPreludeCode(){return At.projectionMercator.vertexSource}get subdivisionGranularity(){return t.aV.noSubdivision}get useGlobeControls(){return !1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(e){}getMeshFromTileID(e,i,a,r,o){if(this._cachedMesh)return this._cachedMesh;const s=new t.aW;s.emplaceBack(0,0),s.emplaceBack(t.a5,0),s.emplaceBack(0,t.a5),s.emplaceBack(t.a5,t.a5);const n=e.createVertexBuffer(s,Ft.members),l=t.aX.simpleSegment(0,0,4,2),c=new t.aY;c.emplaceBack(1,0,2),c.emplaceBack(1,2,3);const h=e.createIndexBuffer(c);return this._cachedMesh=new kt(n,h,l),this._cachedMesh}recalculate(){}hasTransition(){return !1}setErrorQueryLatitudeDegrees(e){}}class Nt{constructor(e=0,t=0,i=0,a=0){if(isNaN(e)||e<0||isNaN(t)||t<0||isNaN(i)||i<0||isNaN(a)||a<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=t,this.left=i,this.right=a;}interpolate(e,i,a){return null!=i.top&&null!=e.top&&(this.top=t.G.number(e.top,i.top,a)),null!=i.bottom&&null!=e.bottom&&(this.bottom=t.G.number(e.bottom,i.bottom,a)),null!=i.left&&null!=e.left&&(this.left=t.G.number(e.left,i.left,a)),null!=i.right&&null!=e.right&&(this.right=t.G.number(e.right,i.right,a)),this}getCenter(e,i){const a=t.an((this.left+e-this.right)/2,0,e),r=t.an((this.top+i-this.bottom)/2,0,i);return new t.P(a,r)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new Nt(this.top,this.bottom,this.left,this.right)}toJSON(){return {top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Zt(e,t){if(!e.renderWorldCopies||e.lngRange)return;const i=t.lng-e.center.lng;t.lng+=i>180?-360:i<-180?360:0;}function Gt(e){return Math.max(0,Math.floor(e))}class Ut{constructor(e,i){var a;this.applyConstrain=(e,t)=>null!==this._constrainOverride?this._constrainOverride(e,t):this._callbacks.defaultConstrain(e,t),this._callbacks=e,this._tileSize=512,this._renderWorldCopies=void 0===(null==i?void 0:i.renderWorldCopies)||!!(null==i?void 0:i.renderWorldCopies),this._minZoom=(null==i?void 0:i.minZoom)||0,this._maxZoom=(null==i?void 0:i.maxZoom)||22,this._minPitch=null==(null==i?void 0:i.minPitch)?0:null==i?void 0:i.minPitch,this._maxPitch=null==(null==i?void 0:i.maxPitch)?60:null==i?void 0:i.maxPitch,this._constrainOverride=null!==(a=null==i?void 0:i.constrainOverride)&&void 0!==a?a:null,this.setMaxBounds(),this._width=0,this._height=0,this._center=new t.V(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Gt(this._zoom),this._scale=t.aq(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Nt,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0;}apply(e,i,a){this._constrainOverride=e.constrainOverride,this._latRange=e.latRange,this._lngRange=e.lngRange,this._width=e.width,this._height=e.height,this._center=e.center,this._elevation=e.elevation,this._minElevationForCurrentTile=e.minElevationForCurrentTile,this._zoom=e.zoom,this._tileZoom=Gt(this._zoom),this._scale=t.aq(this._zoom),this._bearingInRadians=e.bearingInRadians,this._fovInRadians=e.fovInRadians,this._pitchInRadians=e.pitchInRadians,this._rollInRadians=e.rollInRadians,this._unmodified=e.unmodified,this._edgeInsets=new Nt(e.padding.top,e.padding.bottom,e.padding.left,e.padding.right),this._minZoom=e.minZoom,this._maxZoom=e.maxZoom,this._minPitch=e.minPitch,this._maxPitch=e.maxPitch,this._renderWorldCopies=e.renderWorldCopies,this._cameraToCenterDistance=e.cameraToCenterDistance,this._nearZ=e.nearZ,this._farZ=e.farZ,this._autoCalculateNearFarZ=!a&&e.autoCalculateNearFarZ,i&&this.constrainInternal(),this._calcMatrices();}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(e){this._minElevationForCurrentTile=e;}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(e){this._minZoom!==e&&(this._minZoom=e,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom));}get maxZoom(){return this._maxZoom}setMaxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom));}get minPitch(){return this._minPitch}setMinPitch(e){this._minPitch!==e&&(this._minPitch=e,this.setPitch(Math.max(this.pitch,e)));}get maxPitch(){return this._maxPitch}setMaxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.setPitch(Math.min(this.pitch,e)));}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e;}get constrainOverride(){return this._constrainOverride}setConstrainOverride(e){void 0===e&&(e=null),this._constrainOverride!==e&&(this._constrainOverride=e,this.constrainInternal(),this._calcMatrices());}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new t.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(e){const i=t.W(e,-180,180)*Math.PI/180;var r,o,s,n,l,c,h,u,d;this._bearingInRadians!==i&&(this._unmodified=!1,this._bearingInRadians=i,this._calcMatrices(),this._rotationMatrix=a(),r=this._rotationMatrix,s=-this._bearingInRadians,n=(o=this._rotationMatrix)[0],l=o[1],c=o[2],h=o[3],u=Math.sin(s),d=Math.cos(s),r[0]=n*d+c*u,r[1]=l*d+h*u,r[2]=n*-u+c*d,r[3]=l*-u+h*d);}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(e){const i=t.an(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==i&&(this._unmodified=!1,this._pitchInRadians=i,this._calcMatrices());}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(e){const t=e/180*Math.PI;this._rollInRadians!==t&&(this._unmodified=!1,this._rollInRadians=t,this._calcMatrices());}get fovInRadians(){return this._fovInRadians}get fov(){return t.aZ(this._fovInRadians)}setFov(e){e=t.an(e,.1,150),this.fov!==e&&(this._unmodified=!1,this._fovInRadians=t.ap(e),this._calcMatrices());}get zoom(){return this._zoom}setZoom(e){const i=this.applyConstrain(this._center,e).zoom;this._zoom!==i&&(this._unmodified=!1,this._zoom=i,this._tileZoom=Math.max(0,Math.floor(i)),this._scale=t.aq(i),this.constrainInternal(),this._calcMatrices());}get center(){return this._center}setCenter(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this.constrainInternal(),this._calcMatrices());}get elevation(){return this._elevation}setElevation(e){e!==this._elevation&&(this._elevation=e,this.constrainInternal(),this._calcMatrices());}get padding(){return this._edgeInsets.toJSON()}setPadding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices());}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(e,t){this._autoCalculateNearFarZ=!1,this._nearZ=e,this._farZ=t,this._calcMatrices();}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices();}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,t,i){this._unmodified=!1,this._edgeInsets.interpolate(e,t,i),this.constrainInternal(),this._calcMatrices();}resize(e,t,i=!0){this._width=e,this._height=t,i&&this.constrainInternal(),this._calcMatrices();}getMaxBounds(){return this._latRange&&2===this._latRange.length&&this._lngRange&&2===this._lngRange.length?new $([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(e){e?(this._lngRange=[e.getWest(),e.getEast()],this._latRange=[e.getSouth(),e.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-t.ao,t.ao]);}getCameraQueryGeometry(e,i){if(1===i.length)return [i[0],e];{const{minX:a,minY:r,maxX:o,maxY:s}=t.aa.fromPoints(i).extend(e);return [new t.P(a,r),new t.P(o,r),new t.P(o,s),new t.P(a,s),new t.P(a,r)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const e=this._unmodified,{center:t,zoom:i}=this.applyConstrain(this.center,this.zoom);this.setCenter(t),this.setZoom(i),this._unmodified=e,this._constraining=!1;}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let e=t.ar(new Float64Array(16));t.Q(e,e,[this._width/2,-this._height/2,1]),t.O(e,e,[1,-1,0]),this._clipSpaceToPixelsMatrix=e,e=t.ar(new Float64Array(16)),t.Q(e,e,[1,-1,1]),t.O(e,e,[-1,-1,0]),t.Q(e,e,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=e,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height;}this._callbacks.calcMatrices();}calculateCenterFromCameraLngLatAlt(e,i,a,r){const o=void 0!==a?a:this.bearing,s=r=void 0!==r?r:this.pitch,{distanceToCenter:n,clampedElevation:l}=this._distanceToCenterFromAltElevationPitch(i,this.elevation,s),{x:c,y:h}=be(s,o),u=t.a9.fromLngLat(e,i);let d,_,p=t.a_(1,u.y),m=0;do{if(m+=1,m>10)break;_=n/p,d=new t.a9(u.x+c*_,u.y+h*_),p=1/d.meterInMercatorCoordinateUnits();}while(Math.abs(n-_*p)>1e-12);return {center:d.toLngLat(),elevation:l,zoom:t.at(this.height/2/Math.tan(this.fovInRadians/2)/_/this.tileSize)}}recalculateZoomAndCenter(e){if(this.elevation-e==0)return;const i=1/this.worldSize,a=t.as(1,this.center.lat)*this.worldSize,r=t.a9.fromLngLat(this.center,this.elevation),o=r.x/i,s=r.y/i,n=r.z/i,l=this.pitch,c=this.bearing,{x:h,y:u,z:d}=be(l,c),_=this.cameraToCenterDistance,p=o+_*-h,m=s+_*-u,f=n+_*d,{distanceToCenter:g,clampedElevation:v}=this._distanceToCenterFromAltElevationPitch(f/a,e,l),x=g*a,b=new t.a9((p+h*x)*i,(m+u*x)*i,0).toLngLat(),y=t.as(1,b.lat),w=t.at(this.height/2/Math.tan(this.fovInRadians/2)/g/y/this.tileSize);this._elevation=v,this._center=b,this.setZoom(w);}_distanceToCenterFromAltElevationPitch(e,i,a){const r=-Math.cos(t.ap(a)),o=e-i;let s,n=i;return r*o>=0||Math.abs(r)<.1?(s=1e4,n=e+s*r):s=-o/r,{distanceToCenter:s,clampedElevation:n}}getCameraPoint(){const e=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.P(e*Math.sin(this.rollInRadians),e*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const e=t.as(1,this.center.lat)*this.worldSize;return xe(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/e).toLngLat()}getMercatorTileCoordinates(e){if(!e)return [0,0,1,1];const i=e.canonical.z>=0?1<<e.canonical.z:Math.pow(2,e.canonical.z);return [e.canonical.x/i,e.canonical.y/i,1/i/t.a5,1/i/t.a5]}}class Vt{constructor(e,i){this.min=e,this.max=i,this.center=t.a$([],t.b0([],this.min,this.max),.5);}quadrant(e){const i=[e%2==0,e<2],a=t.b1(this.min),r=t.b1(this.max);for(let e=0;e<i.length;e++)a[e]=i[e]?this.min[e]:this.center[e],r[e]=i[e]?this.center[e]:this.max[e];return r[2]=this.max[2],new Vt(a,r)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}intersectsFrustum(e){let t=!0;for(let i=0;i<e.planes.length;i++){const a=this.intersectsPlane(e.planes[i]);if(0===a)return 0;1===a&&(t=!1);}return t?2:e.aabb.min[0]>this.max[0]||e.aabb.min[1]>this.max[1]||e.aabb.min[2]>this.max[2]||e.aabb.max[0]<this.min[0]||e.aabb.max[1]<this.min[1]||e.aabb.max[2]<this.min[2]?0:1}intersectsPlane(e){let t=e[3],i=e[3];for(let a=0;a<3;a++)e[a]>0?(t+=e[a]*this.min[a],i+=e[a]*this.max[a]):(i+=e[a]*this.min[a],t+=e[a]*this.max[a]);return t>=0?2:i<0?0:1}}class qt{distanceToTile2d(e,t,i,a){const r=a.distanceX([e,t]),o=a.distanceY([e,t]);return Math.hypot(r,o)}getWrap(e,t,i){return i}getTileBoundingVolume(e,i,a,r){var o,s;let n=0,l=0;if(null==r?void 0:r.terrain){const c=new t.a2(e.z,i,e.z,e.x,e.y),h=r.terrain.getMinMaxElevation(c);n=null!==(o=h.minElevation)&&void 0!==o?o:Math.min(0,a),l=null!==(s=h.maxElevation)&&void 0!==s?s:Math.max(0,a);}const c=1<<e.z;return new Vt([i+e.x/c,e.y/c,n],[i+(e.x+1)/c,(e.y+1)/c,l])}allowVariableZoom(e,i){const a=e.fov*(Math.abs(Math.cos(e.rollInRadians))*e.height+Math.abs(Math.sin(e.rollInRadians))*e.width)/e.height,r=t.an(78.5-a/2,0,60);return !!i.terrain||e.pitch>r}allowWorldCopies(){return !0}prepareNextFrame(){}}class Wt{constructor(e,t,i){this.points=e,this.planes=t,this.aabb=i;}static fromInvProjectionMatrix(e,i=1,a=0,r,o){const s=o?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],n=Math.pow(2,a),l=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((a=>function(e,i,a,r){const o=t.aH([],e,i),s=1/o[3]/a*r;return t.b6(o,o,[s,s,1/o[3],s])}(a,e,i,n)));r&&function(e,i,a,r){const o=r?4:0,s=r?0:4;let n=0;const l=[],c=[];for(let i=0;i<4;i++){const a=t.b2([],e[i+s],e[i+o]),r=t.b7(a);t.a$(a,a,1/r),l.push(r),c.push(a);}for(let i=0;i<4;i++){const r=t.b8(e[i+o],c[i],a);n=null!==r&&r>=0?Math.max(n,r):Math.max(n,l[i]);}const h=function(e,i){const a=t.b2([],e[i[0]],e[i[1]]),r=t.b2([],e[i[2]],e[i[1]]),o=[0,0,0,0];return t.b3(o,t.b4([],a,r)),o[3]=-t.b5(o,e[i[0]]),o}(e,i),u=function(e,i){const a=t.b9(e),r=t.ba([],e,1/a),o=t.b2([],i,t.a$([],r,t.b5(i,r))),s=t.b9(o);if(s>0){const e=Math.sqrt(1-r[3]*r[3]),a=t.a$([],r,-r[3]),n=t.b0([],a,t.a$([],o,e/s));return t.bb(i,n)}return null}(a,h);if(null!==u){const e=u/t.b5(c[0],h);n=Math.min(n,e);}for(let t=0;t<4;t++){const i=Math.min(n,l[t]);e[t+s]=[e[t+o][0]+c[t][0]*i,e[t+o][1]+c[t][1]*i,e[t+o][2]+c[t][2]*i,1];}}(l,s[0],r,o);const c=s.map((e=>{const i=t.b2([],l[e[0]],l[e[1]]),a=t.b2([],l[e[2]],l[e[1]]),r=t.b3([],t.b4([],i,a)),o=-t.b5(r,l[e[1]]);return r.concat(o)})),h=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],u=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const e of l)for(let t=0;t<3;t++)h[t]=Math.min(h[t],e[t]),u[t]=Math.max(u[t],e[t]);return new Wt(l,c,new Vt(h,u))}}class $t{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e);}setMaxZoom(e){this._helper.setMaxZoom(e);}setMinPitch(e){this._helper.setMinPitch(e);}setMaxPitch(e){this._helper.setMaxPitch(e);}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e);}setBearing(e){this._helper.setBearing(e);}setPitch(e){this._helper.setPitch(e);}setRoll(e){this._helper.setRoll(e);}setFov(e){this._helper.setFov(e);}setZoom(e){this._helper.setZoom(e);}setCenter(e){this._helper.setCenter(e);}setElevation(e){this._helper.setElevation(e);}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e);}setPadding(e){this._helper.setPadding(e);}interpolatePadding(e,t,i){return this._helper.interpolatePadding(e,t,i)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,t,i=!0){this._helper.resize(e,t,i);}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e);}setConstrainOverride(e){this._helper.setConstrainOverride(e);}overrideNearFarZ(e,t){this._helper.overrideNearFarZ(e,t);}clearNearFarZOverride(){this._helper.clearNearFarZOverride();}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(e,t){}constructor(e){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(e,i)=>{i=t.an(+i,this.minZoom,this.maxZoom);const a={center:new t.V(e.lng,e.lat),zoom:i};let r=this._helper._lngRange;if(!this._helper._renderWorldCopies&&null===r){const e=180-1e-10;r=[-e,e];}const o=this.tileSize*t.aq(a.zoom);let s=0,n=o,l=0,c=o,h=0,u=0;const{x:d,y:_}=this.size;if(this._helper._latRange){const e=this._helper._latRange;s=t.X(e[1])*o,n=t.X(e[0])*o,n-s<_&&(h=_/(n-s));}r&&(l=t.W(t.Y(r[0])*o,0,o),c=t.W(t.Y(r[1])*o,0,o),c<l&&(c+=o),c-l<d&&(u=d/(c-l)));const{x:p,y:m}=me(o,e);let f,g;const v=Math.max(u||0,h||0);if(v){const e=new t.P(u?(c+l)/2:p,h?(n+s)/2:m);return a.center=fe(o,e).wrap(),a.zoom+=t.at(v),a}if(this._helper._latRange){const e=_/2;m-e<s&&(g=s+e),m+e>n&&(g=n-e);}if(r){const e=(l+c)/2;let i=p;this._helper._renderWorldCopies&&(i=t.W(p,e-o/2,e+o/2));const a=d/2;i-a<l&&(f=l+a),i+a>c&&(f=c-a);}if(void 0!==f||void 0!==g){const e=new t.P(null!=f?f:p,null!=g?g:m);a.center=fe(o,e).wrap();}return a},this.applyConstrain=(e,t)=>this._helper.applyConstrain(e,t),this._helper=new Ut({calcMatrices:()=>{this._calcMatrices();},defaultConstrain:(e,t)=>this.defaultConstrain(e,t)},e),this._coveringTilesDetailsProvider=new qt;}clone(){const e=new $t;return e.apply(this),e}apply(e,t,i){this._helper.apply(e,t,i);}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(e){const i=[new t.bc(0,e)];if(this._helper._renderWorldCopies){const a=this.screenPointToMercatorCoordinate(new t.P(0,0)),r=this.screenPointToMercatorCoordinate(new t.P(this._helper._width,0)),o=this.screenPointToMercatorCoordinate(new t.P(this._helper._width,this._helper._height)),s=this.screenPointToMercatorCoordinate(new t.P(0,this._helper._height)),n=Math.floor(Math.min(a.x,r.x,o.x,s.x)),l=Math.floor(Math.max(a.x,r.x,o.x,s.x)),c=1;for(let a=n-c;a<=l+c;a++)0!==a&&i.push(new t.bc(a,e));}return i}getCameraFrustum(){return Wt.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(e){const t=this.screenPointToLocation(this.centerPoint,e),i=e?e.getElevationForLngLatZoom(t,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(i);}setLocationAtPoint(e,i){const a=t.as(this.elevation,this.center.lat),r=this.screenPointToMercatorCoordinateAtZ(i,a),o=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,a),s=t.a9.fromLngLat(e),n=new t.a9(s.x-(r.x-o.x),s.y-(r.y-o.y));this.setCenter(null==n?void 0:n.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap());}locationToScreenPoint(e,i){return i?this.coordinatePoint(t.a9.fromLngLat(e),i.getElevationForLngLat(e,this),this._pixelMatrix3D):this.coordinatePoint(t.a9.fromLngLat(e))}screenPointToLocation(e,t){var i;return null===(i=this.screenPointToMercatorCoordinate(e,t))||void 0===i?void 0:i.toLngLat()}screenPointToMercatorCoordinate(e,t){if(t){const i=t.pointCoordinate(e);if(null!=i)return i}return this.screenPointToMercatorCoordinateAtZ(e)}screenPointToMercatorCoordinateAtZ(e,i){const a=i||0,r=[e.x,e.y,0,1],o=[e.x,e.y,1,1];t.aH(r,r,this._pixelMatrixInverse),t.aH(o,o,this._pixelMatrixInverse);const s=r[3],n=o[3],l=r[1]/s,c=o[1]/n,h=r[2]/s,u=o[2]/n,d=h===u?0:(a-h)/(u-h);return new t.a9(t.G.number(r[0]/s,o[0]/n,d)/this.worldSize,t.G.number(l,c,d)/this.worldSize,a)}coordinatePoint(e,i=0,a=this._pixelMatrix){const r=[e.x*this.worldSize,e.y*this.worldSize,i,1];return t.aH(r,r,a),new t.P(r[0]/r[3],r[1]/r[3])}getBounds(){const e=Math.max(0,this._helper._height/2-ge(this));return (new $).extend(this.screenPointToLocation(new t.P(0,e))).extend(this.screenPointToLocation(new t.P(this._helper._width,e))).extend(this.screenPointToLocation(new t.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new t.P(0,this._helper._height)))}isPointOnMapSurface(e,t){return t?null!=t.pointCoordinate(e):e.y>this.height/2-ge(this)}calculatePosMatrix(e,i=!1,a){var r;const o=null!==(r=e.key)&&void 0!==r?r:t.bd(e.wrap,e.canonical.z,e.canonical.z,e.canonical.x,e.canonical.y),s=i?this._alignedPosMatrixCache:this._posMatrixCache;if(s.has(o)){const e=s.get(o);return a?e.f32:e.f64}const n=ve(e,this.worldSize);t.S(n,i?this._alignedProjMatrix:this._viewProjMatrix,n);const l={f64:n,f32:new Float32Array(n)};return s.set(o,l),a?l.f32:l.f64}calculateFogMatrix(e){const i=e.key,a=this._fogMatrixCacheF32;if(a.has(i))return a.get(i);const r=ve(e,this.worldSize);return t.S(r,this._fogMatrix,r),a.set(i,new Float32Array(r)),a.get(i)}calculateCenterFromCameraLngLatAlt(e,t,i,a){return this._helper.calculateCenterFromCameraLngLatAlt(e,t,i,a)}_calculateNearFarZIfNeeded(e,i,a){if(!this._helper.autoCalculateNearFarZ)return;const r=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),o=e-r*this._helper._pixelPerMeter/Math.cos(i),s=r<0?o:e,n=Math.PI/2+this.pitchInRadians,l=t.ap(this.fov)*(Math.abs(Math.cos(t.ap(this.roll)))*this.height+Math.abs(Math.sin(t.ap(this.roll)))*this.width)/this.height*(.5+a.y/this.height),c=Math.sin(l)*s/Math.sin(t.an(Math.PI-n-l,.01,Math.PI-.01)),h=ge(this),u=Math.atan(h/this._helper.cameraToCenterDistance),d=t.ap(.75),_=u>d?2*u*(.5+a.y/(2*h)):d,p=Math.sin(_)*s/Math.sin(t.an(Math.PI-n-_,.01,Math.PI-.01)),m=Math.min(c,p);this._helper._farZ=1.01*(Math.cos(Math.PI/2-i)*m+s),this._helper._nearZ=this._helper._height/50;}_calcMatrices(){if(!this._helper._height)return;const e=this.centerOffset,i=me(this.worldSize,this.center),a=i.x,r=i.y;this._helper._pixelPerMeter=t.as(1,this.center.lat)*this.worldSize;const o=t.ap(Math.min(this.pitch,pe)),s=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(o));let n;this._calculateNearFarZIfNeeded(s,o,e),n=new Float64Array(16),t.be(n,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),t.aB(this._invProjMatrix,n),n[8]=2*-e.x/this._helper._width,n[9]=2*e.y/this._helper._height,this._projectionMatrix=t.bf(n),t.Q(n,n,[1,-1,1]),t.O(n,n,[0,0,-this._helper.cameraToCenterDistance]),t.bg(n,n,-this.rollInRadians),t.bh(n,n,this.pitchInRadians),t.bg(n,n,-this.bearingInRadians),t.O(n,n,[-a,-r,0]),this._mercatorMatrix=t.Q([],n,[this.worldSize,this.worldSize,this.worldSize]),t.Q(n,n,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=t.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,n),t.O(n,n,[0,0,-this.elevation]),this._viewProjMatrix=n,this._invViewProjMatrix=t.aB([],n);const l=[0,0,-1,1];t.aH(l,l,this._invViewProjMatrix),this._cameraPosition=[l[0]/l[3],l[1]/l[3],l[2]/l[3]],this._fogMatrix=new Float64Array(16),t.be(this._fogMatrix,this.fovInRadians,this.width/this.height,s,this._helper._farZ),this._fogMatrix[8]=2*-e.x/this.width,this._fogMatrix[9]=2*e.y/this.height,t.Q(this._fogMatrix,this._fogMatrix,[1,-1,1]),t.O(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),t.bg(this._fogMatrix,this._fogMatrix,-this.rollInRadians),t.bh(this._fogMatrix,this._fogMatrix,this.pitchInRadians),t.bg(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),t.O(this._fogMatrix,this._fogMatrix,[-a,-r,0]),t.Q(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),t.O(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=t.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,n);const c=this._helper._width%2/2,h=this._helper._height%2/2,u=Math.cos(this.bearingInRadians),d=Math.sin(-this.bearingInRadians),_=a-Math.round(a)+u*c+d*h,p=r-Math.round(r)+u*h+d*c,m=new Float64Array(n);if(t.O(m,m,[_>.5?_-1:_,p>.5?p-1:p,0]),this._alignedProjMatrix=m,n=t.aB(new Float64Array(16),this._pixelMatrix),!n)throw new Error("failed to invert matrix");this._pixelMatrixInverse=n,this._clearMatrixCaches();}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear();}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const e=this.screenPointToMercatorCoordinate(new t.P(0,0)),i=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.aH(i,i,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const e=t.as(1,this.center.lat)*this.worldSize;return xe(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/e).toLngLat()}lngLatToCameraDepth(e,i){const a=t.a9.fromLngLat(e),r=[a.x*this.worldSize,a.y*this.worldSize,i,1];return t.aH(r,r,this._viewProjMatrix),r[2]/r[3]}getProjectionData(e){const{overscaledTileID:i,aligned:a,applyTerrainMatrix:r}=e,o=this._helper.getMercatorTileCoordinates(i),s=i?this.calculatePosMatrix(i,a,!0):null;let n;return n=i&&i.terrainRttPosMatrix32f&&r?i.terrainRttPosMatrix32f:s||t.bi(),{mainMatrix:n,tileMercatorCoords:o,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:n}}isLocationOccluded(e){return !1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(e,t,i){return 1}transformLightDirection(e){return t.b1(e)}getRayDirectionFromPixel(e){throw new Error("Not implemented.")}projectTileCoordinates(e,i,a,r){const o=this.calculatePosMatrix(a);let s;r?(s=[e,i,r(e,i),1],t.aH(s,s,o)):(s=[e,i,0,1],ot(s,s,o));const n=s[3];return {point:new t.P(s[0]/n,s[1]/n),signedDistanceFromCamera:n,isOccluded:!1}}populateCache(e){for(const t of e)this.calculatePosMatrix(t);}getMatrixForModel(e,i){const a=t.a9.fromLngLat(e,i),r=a.meterInMercatorCoordinateUnits(),o=t.bj();return t.O(o,o,[a.x,a.y,a.z]),t.bg(o,o,Math.PI),t.bh(o,o,Math.PI/2),t.Q(o,o,[-r,r,r]),o}getProjectionDataForCustomLayer(e=!0){const i=new t.a2(0,0,0,0,0),a=this.getProjectionData({overscaledTileID:i,applyGlobeMatrix:e}),r=ve(i,this.worldSize);t.S(r,this._viewProjMatrix,r),a.tileMercatorCoords=[0,0,1,1];const o=[t.a5,t.a5,this.worldSize/this._helper.pixelsPerMeter],s=t.bk();return t.Q(s,r,o),a.fallbackMatrix=s,a.mainMatrix=s,a}getFastPathSimpleProjectionMatrix(e){return this.calculatePosMatrix(e)}}function Ht(){t.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");}function Xt(e){if(e.useSlerp)if(e.k<1){const i=t.bl(e.startEulerAngles.roll,e.startEulerAngles.pitch,e.startEulerAngles.bearing),a=t.bl(e.endEulerAngles.roll,e.endEulerAngles.pitch,e.endEulerAngles.bearing),r=new Float64Array(4);t.bm(r,i,a,e.k);const o=t.bn(r);e.tr.setRoll(o.roll),e.tr.setPitch(o.pitch),e.tr.setBearing(o.bearing);}else e.tr.setRoll(e.endEulerAngles.roll),e.tr.setPitch(e.endEulerAngles.pitch),e.tr.setBearing(e.endEulerAngles.bearing);else e.tr.setRoll(t.G.number(e.startEulerAngles.roll,e.endEulerAngles.roll,e.k)),e.tr.setPitch(t.G.number(e.startEulerAngles.pitch,e.endEulerAngles.pitch,e.k)),e.tr.setBearing(t.G.number(e.startEulerAngles.bearing,e.endEulerAngles.bearing,e.k));}function Kt(e,i,a,r,o){const s=o.padding,n=me(o.worldSize,a.getNorthWest()),l=me(o.worldSize,a.getNorthEast()),c=me(o.worldSize,a.getSouthEast()),h=me(o.worldSize,a.getSouthWest()),u=t.ap(-r),d=n.rotate(u),_=l.rotate(u),p=c.rotate(u),m=h.rotate(u),f=new t.P(Math.max(d.x,_.x,m.x,p.x),Math.max(d.y,_.y,m.y,p.y)),g=new t.P(Math.min(d.x,_.x,m.x,p.x),Math.min(d.y,_.y,m.y,p.y)),v=f.sub(g),x=(o.width-(s.left+s.right+i.left+i.right))/v.x,b=(o.height-(s.top+s.bottom+i.top+i.bottom))/v.y;if(b<0||x<0)return void Ht();const y=Math.min(t.at(o.scale*Math.min(x,b)),e.maxZoom),w=t.P.convert(e.offset),T=new t.P((i.left-i.right)/2,(i.top-i.bottom)/2).rotate(t.ap(r)),P=w.add(T).mult(o.scale/t.aq(y));return {center:fe(o.worldSize,n.add(c).div(2).sub(P)),zoom:y,bearing:r}}class Yt{get useGlobeControls(){return !1}handlePanInertia(e,t){const i=e.mag(),a=Math.abs(ge(t));return {easingOffset:e.mult(Math.min(.75*a/i,1)),easingCenter:t.center}}handleMapControlsRollPitchBearingZoom(e,t){e.bearingDelta&&t.setBearing(t.bearing+e.bearingDelta),e.pitchDelta&&t.setPitch(t.pitch+e.pitchDelta),e.rollDelta&&t.setRoll(t.roll+e.rollDelta),e.zoomDelta&&t.setZoom(t.zoom+e.zoomDelta);}handleMapControlsPan(e,t,i){e.around.distSqr(t.centerPoint)<.01||t.setLocationAtPoint(i,e.around);}cameraForBoxAndBearing(e,t,i,a,r){return Kt(e,t,i,a,r)}handleJumpToCenterZoom(e,i){e.zoom!==(void 0!==i.zoom?+i.zoom:e.zoom)&&e.setZoom(+i.zoom),void 0!==i.center&&e.setCenter(t.V.convert(i.center));}handleEaseTo(e,i){const a=e.zoom,r=e.padding,o={roll:e.roll,pitch:e.pitch,bearing:e.bearing},s={roll:void 0===i.roll?e.roll:i.roll,pitch:void 0===i.pitch?e.pitch:i.pitch,bearing:void 0===i.bearing?e.bearing:i.bearing},n=void 0!==i.zoom,l=!e.isPaddingEqual(i.padding);let c=!1;const h=n?+i.zoom:e.zoom;let u=e.centerPoint.add(i.offsetAsPoint);const d=e.screenPointToLocation(u),{center:_,zoom:p}=e.applyConstrain(t.V.convert(i.center||d),null!=h?h:a);Zt(e,_);const m=me(e.worldSize,d),f=me(e.worldSize,_).sub(m),g=t.aq(p-a);return c=p!==a,{easeFunc:n=>{if(c&&e.setZoom(t.G.number(a,p,n)),t.bo(o,s)||Xt({startEulerAngles:o,endEulerAngles:s,tr:e,k:n,useSlerp:o.roll!=s.roll}),l&&(e.interpolatePadding(r,i.padding,n),u=e.centerPoint.add(i.offsetAsPoint)),i.around)e.setLocationAtPoint(i.around,i.aroundPoint);else {const i=t.aq(e.zoom-a),r=p>a?Math.min(2,g):Math.max(.5,g),o=Math.pow(r,1-n),s=fe(e.worldSize,m.add(f.mult(n*o)).mult(i));e.setLocationAtPoint(e.renderWorldCopies?s.wrap():s,u);}},isZooming:c,elevationCenter:_}}handleFlyTo(e,i){const a=void 0!==i.zoom,r=e.zoom,o=e.applyConstrain(t.V.convert(i.center||i.locationAtOffset),a?+i.zoom:r),s=o.center,n=o.zoom;Zt(e,s);const l=me(e.worldSize,i.locationAtOffset),c=me(e.worldSize,s).sub(l),h=c.mag(),u=t.aq(n-r);let d;if(void 0!==i.minZoom){const a=Math.min(+i.minZoom,r,n),o=e.applyConstrain(s,a).zoom;d=t.aq(o-r);}return {easeFunc:(i,a,o,h)=>{e.setZoom(1===i?n:r+t.at(a));const u=1===i?s:fe(e.worldSize,l.add(c.mult(o)).mult(a));e.setLocationAtPoint(e.renderWorldCopies?u.wrap():u,h);},scaleOfZoom:u,targetCenter:s,scaleOfMinZoom:d,pixelPathLength:h}}}class Qt{constructor(e,t,i){this.blendFunction=e,this.blendColor=t,this.mask=i;}}Qt.Replace=[1,0],Qt.disabled=new Qt(Qt.Replace,t.bp.transparent,[!1,!1,!1,!1]),Qt.unblended=new Qt(Qt.Replace,t.bp.transparent,[!0,!0,!0,!0]),Qt.alphaBlended=new Qt([1,771],t.bp.transparent,[!0,!0,!0,!0]);const Jt=2305;class ei{constructor(e,t,i){this.enable=e,this.mode=t,this.frontFace=i;}}ei.disabled=new ei(!1,1029,Jt),ei.backCCW=new ei(!0,1029,Jt),ei.frontCCW=new ei(!0,1028,Jt);class ti{constructor(e,t,i){this.func=e,this.mask=t,this.range=i;}}ti.ReadOnly=!1,ti.ReadWrite=!0,ti.disabled=new ti(519,ti.ReadOnly,[0,1]);const ii=7680;class ai{constructor(e,t,i,a,r,o){this.test=e,this.ref=t,this.mask=i,this.fail=a,this.depthFail=r,this.pass=o;}}ai.disabled=new ai({func:519,mask:0},0,0,ii,ii,ii);const ri=new WeakMap;function oi(e){var t;if(ri.has(e))return ri.get(e);{const i=null===(t=e.getParameter(e.VERSION))||void 0===t?void 0:t.startsWith("WebGL 2.0");return ri.set(e,i),i}}class si{get awaitingQuery(){return !!this._readbackQueue}constructor(e){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=e;const i=e.context,a=i.gl;this._texFormat=a.RGBA,this._texType=a.UNSIGNED_BYTE;const r=new t.aW;r.emplaceBack(-1,-1),r.emplaceBack(2,-1),r.emplaceBack(-1,2);const o=new t.aY;o.emplaceBack(0,1,2),this._fullscreenTriangle=new kt(i.createVertexBuffer(r,Ft.members),i.createIndexBuffer(o),t.aX.simpleSegment(0,0,r.length,o.length)),this._resultBuffer=new Uint8Array(4),i.activeTexture.set(a.TEXTURE1);const s=a.createTexture();a.bindTexture(a.TEXTURE_2D,s),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texImage2D(a.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=i.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(s),oi(a)&&(this._pbo=a.createBuffer(),a.bindBuffer(a.PIXEL_PACK_BUFFER,this._pbo),a.bufferData(a.PIXEL_PACK_BUFFER,4,a.STREAM_READ),a.bindBuffer(a.PIXEL_PACK_BUFFER,null));}destroy(){const e=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),e.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null;}updateErrorLoop(e,t){const i=this._updateCount;return this._readbackQueue?i>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():i>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(e,t),this._updateCount++,this._measuredError}_bindFramebuffer(){const e=this._cachedRenderContext.context,t=e.gl;e.activeTexture.set(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,this._fbo.colorAttachment.get()),e.bindFramebuffer.set(this._fbo.framebuffer);}_renderErrorTexture(e,i){const a=this._cachedRenderContext.context,r=a.gl;if(this._bindFramebuffer(),a.viewport.set([0,0,this._texWidth,this._texHeight]),a.clear({color:t.bp.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(a,r.TRIANGLES,ti.disabled,ai.disabled,Qt.unblended,ei.disabled,((e,t)=>({u_input:e,u_output_expected:t}))(e,i),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&oi(r)){r.bindBuffer(r.PIXEL_PACK_BUFFER,this._pbo),r.readBuffer(r.COLOR_ATTACHMENT0),r.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),r.bindBuffer(r.PIXEL_PACK_BUFFER,null);const e=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);r.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:e};}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null};}_tryReadback(){const e=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&oi(e)){const i=e.clientWaitSync(this._readbackQueue.sync,0,0);if(i===e.WAIT_FAILED)return t.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(i===e.TIMEOUT_EXPIRED)return;e.bindBuffer(e.PIXEL_PACK_BUFFER,this._pbo),e.getBufferSubData(e.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),e.bindBuffer(e.PIXEL_PACK_BUFFER,null);}else this._bindFramebuffer(),e.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=si._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount;}static _parseRGBA8float(e){let t=0;return t+=e[0]/256,t+=e[1]/65536,t+=e[2]/16777216,e[3]<127&&(t=-t),t/128}}const ni=t.a5/128;function li(e,i){const a=void 0!==e.granularity?Math.max(e.granularity,1):1,r=a+(e.generateBorders?2:0),o=a+(e.extendToNorthPole||e.generateBorders?1:0)+(e.extendToSouthPole||e.generateBorders?1:0),s=r+1,n=o+1,l=e.generateBorders?-1:0,c=e.generateBorders||e.extendToNorthPole?-1:0,h=a+(e.generateBorders?1:0),u=a+(e.generateBorders||e.extendToSouthPole?1:0),d=s*n,_=r*o*6,p=s*n>65536;if(p&&"16bit"===i)throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const m=p||"32bit"===i,f=new Int16Array(2*d);let g=0;for(let i=c;i<=u;i++)for(let r=l;r<=h;r++){let o=r/a*t.a5;-1===r&&(o=-ni),r===a+1&&(o=t.a5+ni);let s=i/a*t.a5;-1===i&&(s=e.extendToNorthPole?t.br:-ni),i===a+1&&(s=e.extendToSouthPole?t.bs:t.a5+ni),f[g++]=o,f[g++]=s;}const v=m?new Uint32Array(_):new Uint16Array(_);let x=0;for(let e=0;e<o;e++)for(let t=0;t<r;t++){const i=t+1+e*s,a=t+(e+1)*s,r=t+1+(e+1)*s;v[x++]=t+e*s,v[x++]=a,v[x++]=i,v[x++]=i,v[x++]=a,v[x++]=r;}return {vertices:f.buffer.slice(0),indices:v.buffer.slice(0),uses32bitIndices:m}}const ci=new t.aV({fill:new t.bt(128,2),line:new t.bt(512,0),tile:new t.bt(128,32),stencil:new t.bt(128,1),circle:3});class hi{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3;}get name(){return "vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return !0}get shaderVariantName(){return "globe"}get shaderDefine(){return "#define GLOBE"}get shaderPreludeCode(){return At.projectionGlobe}get vertexShaderPreludeCode(){return At.projectionMercator.vertexSource}get subdivisionGranularity(){return ci}get useGlobeControls(){return !0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy();}updateGPUdependent(e){this._errorMeasurement||(this._errorMeasurement=new si(e));const i=t.X(this._errorQueryLatitudeDegrees),a=2*Math.atan(Math.exp(Math.PI-i*Math.PI*2))-.5*Math.PI,r=this._errorMeasurement.updateErrorLoop(i,a),o=c();r!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=r,this._errorMeasurementLastChangeTime=o);const s=Math.min(Math.max((o-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=t.bu(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,t.bv(s));}_getMeshKey(e){return `${e.granularity.toString(36)}_${e.generateBorders?"b":""}${e.extendToNorthPole?"n":""}${e.extendToSouthPole?"s":""}`}getMeshFromTileID(e,t,i,a,r){const o=("stencil"===r?ci.stencil:ci.tile).getGranularityForZoomLevel(t.z);return this._getMesh(e,{granularity:o,generateBorders:i,extendToNorthPole:0===t.y&&a,extendToSouthPole:t.y===(1<<t.z)-1&&a})}_getMesh(e,i){const a=this._getMeshKey(i);if(a in this._tileMeshCache)return this._tileMeshCache[a];const r=function(e,i){const a=li(i,"16bit"),r=t.aW.deserialize({arrayBuffer:a.vertices,length:a.vertices.byteLength/2/2}),o=t.aY.deserialize({arrayBuffer:a.indices,length:a.indices.byteLength/2/3});return new kt(e.createVertexBuffer(r,Ft.members),e.createIndexBuffer(o),t.aX.simpleSegment(0,0,r.length,o.length))}(e,i);return this._tileMeshCache[a]=r,r}recalculate(e){}hasTransition(){const e=c();let t=!1;return t=t||(e-this._errorMeasurementLastChangeTime)/1e3<.7,t=t||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,t}setErrorQueryLatitudeDegrees(e){this._errorQueryLatitudeDegrees=e;}}const ui=new t.t({type:new t.D(t.u.projection.type)});class di extends t.E{constructor(e){super(),this._transitionable=new t.x(ui,void 0),this.setProjection(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new t.H(0)),this._mercatorProjection=new jt,this._verticalPerspectiveProjection=new hi;}get transitionState(){const e=this.properties.get("type");if("string"==typeof e&&"mercator"===e)return 0;if("string"==typeof e&&"vertical-perspective"===e)return 1;if(e instanceof t.bw){if("vertical-perspective"===e.from&&"mercator"===e.to)return 1-e.transition;if("mercator"===e.from&&"vertical-perspective"===e.to)return e.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return "globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy();}updateGPUdependent(e){this._mercatorProjection.updateGPUdependent(e),this._verticalPerspectiveProjection.updateGPUdependent(e);}getMeshFromTileID(e,t,i,a,r){return this.currentProjection.getMeshFromTileID(e,t,i,a,r)}setProjection(e){this._transitionable.setValue("type",(null==e?void 0:e.type)||"mercator");}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning);}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e);}setErrorQueryLatitudeDegrees(e){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(e),this._mercatorProjection.setErrorQueryLatitudeDegrees(e);}}function _i(e){const t=fi(e.worldSize,e.center.lat);return 2*Math.PI*t}function pi(e,i,a,r,o){const s=1/(1<<o),n=i/t.a5*s+r*s,l=t.by((e/t.a5*s+a*s)*Math.PI*2+Math.PI,2*Math.PI),c=2*Math.atan(Math.exp(Math.PI-n*Math.PI*2))-.5*Math.PI,h=Math.cos(c),u=new Float64Array(3);return u[0]=Math.sin(l)*h,u[1]=Math.sin(c),u[2]=Math.cos(l)*h,u}function mi(e){return function(e,t){const i=Math.cos(t),a=new Float64Array(3);return a[0]=Math.sin(e)*i,a[1]=Math.sin(t),a[2]=Math.cos(e)*i,a}(e.lng*Math.PI/180,e.lat*Math.PI/180)}function fi(e,t){return e/(2*Math.PI)/Math.cos(t*Math.PI/180)}function gi(e){const i=Math.asin(e[1])/Math.PI*180,a=Math.sqrt(e[0]*e[0]+e[2]*e[2]);if(a>1e-6){const r=e[0]/a,o=Math.acos(e[2]/a),s=(r>0?o:-o)/Math.PI*180;return new t.V(t.W(s,-180,180),i)}return new t.V(0,i)}function vi(e){return Math.cos(e*Math.PI/180)}function xi(e,i){const a=vi(e),r=vi(i);return t.at(r/a)}function bi(e,i){const a=e.rotate(i.bearingInRadians),r=i.zoom+xi(i.center.lat,0),o=t.bu(1/vi(i.center.lat),1/vi(Math.min(Math.abs(i.center.lat),60)),t.bx(r,7,3,0,1)),s=360/_i({worldSize:i.worldSize,center:{lat:i.center.lat}});return new t.V(i.center.lng-a.x*s*o,t.an(i.center.lat+a.y*s,-t.ao,t.ao))}function yi(e){const t=.5*e,i=Math.sin(t),a=Math.cos(t);return Math.log(i+a)-Math.log(a-i)}function wi(e,i,a,r){const o=e.lat+a*r;if(Math.abs(a)>1){const s=(Math.sign(e.lat+a)!==Math.sign(e.lat)?-Math.abs(e.lat):Math.abs(e.lat))*Math.PI/180,n=Math.abs(e.lat+a)*Math.PI/180,l=yi(s+r*(n-s)),c=yi(s),h=yi(n);return new t.V(e.lng+i*((l-c)/(h-c)),o)}return new t.V(e.lng+i*r,o)}class Ti{constructor(e){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=e;}swapBuffers(){if(!this._hadAnyChanges)return;const e=this._cachePrevious;this._cachePrevious=this._cache,this._cache=e,this._cache.clear(),this._hadAnyChanges=!1;}getTileBoundingVolume(e,t,i,a){const r=`${e.z}_${e.x}_${e.y}_${(null==a?void 0:a.terrain)?"t":""}`,o=this._cache.get(r);if(o)return o;const s=this._cachePrevious.get(r);if(s)return this._cache.set(r,s),s;const n=this._boundingVolumeFactory(e,t,i,a);return this._cache.set(r,n),this._hadAnyChanges=!0,n}}class Pi{constructor(e,t,i,a){this.min=i,this.max=a,this.points=e,this.planes=t;}static fromAabb(e,t){const i=[];for(let a=0;a<8;a++)i.push([1&~a?e[0]:t[0],1==(a>>1&1)?t[1]:e[1],1==(a>>2&1)?t[2]:e[2]]);return new Pi(i,[[-1,0,0,t[0]],[1,0,0,-e[0]],[0,-1,0,t[1]],[0,1,0,-e[1]],[0,0,-1,t[2]],[0,0,1,-e[2]]],e,t)}static fromCenterSizeAngles(e,i,a){const r=t.bB([],a[0],a[1],a[2]),o=t.bC([],[i[0],0,0],r),s=t.bC([],[0,i[1],0],r),n=t.bC([],[0,0,i[2]],r),l=[...e],c=[...e];for(let t=0;t<8;t++)for(let i=0;i<3;i++){const a=e[i]+o[i]*(1&~t?-1:1)+s[i]*(1==(t>>1&1)?1:-1)+n[i]*(1==(t>>2&1)?1:-1);l[i]=Math.min(l[i],a),c[i]=Math.max(c[i],a);}const h=[];for(let i=0;i<8;i++){const a=[...e];t.b0(a,a,t.a$([],o,1&~i?-1:1)),t.b0(a,a,t.a$([],s,1==(i>>1&1)?1:-1)),t.b0(a,a,t.a$([],n,1==(i>>2&1)?1:-1)),h.push(a);}return new Pi(h,[[...o,-t.b5(o,h[0])],[...s,-t.b5(s,h[0])],[...n,-t.b5(n,h[0])],[-o[0],-o[1],-o[2],-t.b5(o,h[7])],[-s[0],-s[1],-s[2],-t.b5(s,h[7])],[-n[0],-n[1],-n[2],-t.b5(n,h[7])]],l,c)}intersectsFrustum(e){let t=!0;const i=this.points.length,a=this.planes.length,r=e.planes.length,o=e.points.length;for(let a=0;a<r;a++){const r=e.planes[a];let o=0;for(let e=0;e<i;e++){const t=this.points[e];r[0]*t[0]+r[1]*t[1]+r[2]*t[2]+r[3]>=0&&o++;}if(0===o)return 0;o<i&&(t=!1);}if(t)return 2;for(let t=0;t<a;t++){const i=this.planes[t];let a=0;for(let t=0;t<o;t++){const r=e.points[t];i[0]*r[0]+i[1]*r[1]+i[2]*r[2]+i[3]>=0&&a++;}if(0===a)return 0}return 1}intersectsPlane(e){const t=this.points.length;let i=0;for(let a=0;a<t;a++){const t=this.points[a];e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]>=0&&i++;}return i===t?2:0===i?0:1}}function Ci(e,t,i){const a=e-t;return a<0?-a:Math.max(0,a-i)}function Ii(e,t,i,a,r){const o=e-i;let s;return s=o<0?Math.min(-o,1+o-r):o>1?Math.min(Math.max(o-r,0),1-o):0,Math.max(s,Ci(t,a,r))}class Mi{constructor(){this._boundingVolumeCache=new Ti(this._computeTileBoundingVolume);}prepareNextFrame(){this._boundingVolumeCache.swapBuffers();}distanceToTile2d(e,t,i,a){const r=1<<i.z,o=1/r,s=i.x/r,n=i.y/r;let l=2;return l=Math.min(l,Ii(e,t,s,n,o)),l=Math.min(l,Ii(e,t,s+.5,-n-o,o)),l=Math.min(l,Ii(e,t,s+.5,2-n-o,o)),l}getWrap(e,t,i){const a=1<<t.z,r=1/a,o=t.x/a,s=Ci(e.x,o,r),n=Ci(e.x,o-1,r),l=Ci(e.x,o+1,r),c=Math.min(s,n,l);return c===l?1:c===n?-1:0}allowVariableZoom(e,t){return Ce(e,t)>4}allowWorldCopies(){return !1}getTileBoundingVolume(e,t,i,a){return this._boundingVolumeCache.getTileBoundingVolume(e,t,i,a)}_computeTileBoundingVolume(e,i,a,r){var o,s;let n=0,l=0;if(null==r?void 0:r.terrain){const c=new t.a2(e.z,i,e.z,e.x,e.y),h=r.terrain.getMinMaxElevation(c);n=null!==(o=h.minElevation)&&void 0!==o?o:Math.min(0,a),l=null!==(s=h.maxElevation)&&void 0!==s?s:Math.max(0,a);}if(n/=t.bE,l/=t.bE,n+=1,l+=1,e.z<=0)return Pi.fromAabb([-l,-l,-l],[l,l,l]);if(1===e.z)return Pi.fromAabb([0===e.x?-l:0,0===e.y?0:-l,-l],[0===e.x?0:l,0===e.y?l:0,l]);{const i=[pi(0,0,e.x,e.y,e.z),pi(t.a5,0,e.x,e.y,e.z),pi(t.a5,t.a5,e.x,e.y,e.z),pi(0,t.a5,e.x,e.y,e.z)],a=[];for(const e of i)a.push(t.a$([],e,l));if(l!==n)for(const e of i)a.push(t.a$([],e,n));0===e.y&&a.push([0,1,0]),e.y===(1<<e.z)-1&&a.push([0,-1,0]);const r=[1,1,1],o=[-1,-1,-1];for(const e of a)for(let t=0;t<3;t++)r[t]=Math.min(r[t],e[t]),o[t]=Math.max(o[t],e[t]);const s=pi(t.a5/2,t.a5/2,e.x,e.y,e.z),c=t.b4([],[0,1,0],s);t.b3(c,c);const h=t.b4([],s,c);t.b3(h,h);const u=t.b4([],i[2],i[1]);t.b3(u,u);const d=t.b4([],i[0],i[3]);t.b3(d,d),a.push(t.a$([],s,l)),e.y>=(1<<e.z)/2&&a.push(t.a$([],pi(t.a5/2,0,e.x,e.y,e.z),l)),e.y<(1<<e.z)/2&&a.push(t.a$([],pi(t.a5/2,t.a5,e.x,e.y,e.z),l));const _=Ei(s,a),p=Ei(h,a),m=[-s[0],-s[1],-s[2],_.max],f=[s[0],s[1],s[2],-_.min],g=[-h[0],-h[1],-h[2],p.max],v=[h[0],h[1],h[2],-p.min],x=[...u,0],b=[...d,0],y=[];return 0===e.y?y.push(t.bD(b,x,m),t.bD(b,x,f)):y.push(t.bD(g,x,m),t.bD(g,x,f),t.bD(g,b,m),t.bD(g,b,f)),e.y===(1<<e.z)-1?y.push(t.bD(b,x,m),t.bD(b,x,f)):y.push(t.bD(v,x,m),t.bD(v,x,f),t.bD(v,b,m),t.bD(v,b,f)),new Pi(y,[m,f,g,v,x,b],r,o)}}}function Ei(e,i){let a=1/0,r=-1/0;for(const o of i){const i=t.b5(e,o);a=Math.min(a,i),r=Math.max(r,i);}return {min:a,max:r}}class Si{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e);}setMaxZoom(e){this._helper.setMaxZoom(e);}setMinPitch(e){this._helper.setMinPitch(e);}setMaxPitch(e){this._helper.setMaxPitch(e);}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e);}setBearing(e){this._helper.setBearing(e);}setPitch(e){this._helper.setPitch(e);}setRoll(e){this._helper.setRoll(e);}setFov(e){this._helper.setFov(e);}setZoom(e){this._helper.setZoom(e);}setCenter(e){this._helper.setCenter(e);}setElevation(e){this._helper.setElevation(e);}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e);}setPadding(e){this._helper.setPadding(e);}interpolatePadding(e,t,i){return this._helper.interpolatePadding(e,t,i)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,t){this._helper.resize(e,t);}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e);}setConstrainOverride(e){this._helper.setConstrainOverride(e);}overrideNearFarZ(e,t){this._helper.overrideNearFarZ(e,t);}clearNearFarZOverride(){this._helper.clearNearFarZOverride();}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(e){}constructor(e){this._cachedClippingPlane=t.bF(),this._projectionMatrix=t.bj(),this._globeViewProjMatrix32f=t.bi(),this._globeViewProjMatrixNoCorrection=t.bj(),this._globeViewProjMatrixNoCorrectionInverted=t.bj(),this._globeProjMatrixInverted=t.bj(),this._cameraPosition=t.bz(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(e,i)=>{const a=t.an(e.lat,-t.ao,t.ao),r=t.an(+i,this.minZoom+xi(0,a),this.maxZoom);return {center:new t.V(e.lng,a),zoom:r}},this.applyConstrain=(e,t)=>this._helper.applyConstrain(e,t),this._helper=new Ut({calcMatrices:()=>{this._calcMatrices();},defaultConstrain:(e,t)=>this.defaultConstrain(e,t)},e),this._coveringTilesDetailsProvider=new Mi;}clone(){const e=new Si;return e.apply(this),e}apply(e,t){this._globeLatitudeErrorCorrectionRadians=t||0,this._helper.apply(e);}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const e=t.bz();return e[0]=this._cameraPosition[0],e[1]=this._cameraPosition[1],e[2]=this._cameraPosition[2],e}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(e){const{overscaledTileID:t,applyGlobeMatrix:i}=e,a=this._helper.getMercatorTileCoordinates(t);return {mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:a,clippingPlane:this._cachedClippingPlane,projectionTransition:i?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(e){const i=this.pitchInRadians,a=this.cameraToCenterDistance/e,r=Math.sin(i)*a,o=Math.cos(i)*a+1,s=1/Math.sqrt(r*r+o*o)*1;let n=-r,l=o;const c=Math.sqrt(n*n+l*l);n/=c,l/=c;const h=[0,n,l];t.bG(h,h,[0,0,0],-this.bearingInRadians),t.bH(h,h,[0,0,0],-1*this.center.lat*Math.PI/180),t.bI(h,h,[0,0,0],this.center.lng*Math.PI/180);const u=1/t.b7(h);return t.a$(h,h,u),[...h,-s*u]}isLocationOccluded(e){return !this.isSurfacePointVisible(mi(e))}transformLightDirection(e){const i=this._helper._center.lng*Math.PI/180,a=this._helper._center.lat*Math.PI/180,r=Math.cos(a),o=[Math.sin(i)*r,Math.sin(a),Math.cos(i)*r],s=[o[2],0,-o[0]],n=[0,0,0];t.b4(n,s,o),t.b3(s,s),t.b3(n,n);const l=[0,0,0];return t.b3(l,[s[0]*e[0]+n[0]*e[1]+o[0]*e[2],s[1]*e[0]+n[1]*e[1]+o[1]*e[2],s[2]*e[0]+n[2]*e[1]+o[2]*e[2]]),l}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(e,i,a){const r=function(e,i,a){const r=1/(1<<a.z);return new t.a9(e/t.a5*r+a.x*r,i/t.a5*r+a.y*r)}(e,i,a.canonical),o=(s=r.y,[t.by(r.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-s*Math.PI*2))-.5*Math.PI]);var s;return this.getCircleRadiusCorrection()/Math.cos(o[1])}projectTileCoordinates(e,i,a,r){const o=a.canonical,s=pi(e,i,o.x,o.y,o.z),n=1+(r?r(e,i):0)/t.bE,l=[s[0]*n,s[1]*n,s[2]*n,1];t.aH(l,l,this._globeViewProjMatrixNoCorrection);const c=this._cachedClippingPlane,h=c[0]*s[0]+c[1]*s[1]+c[2]*s[2]+c[3]<0;return {point:new t.P(l[0]/l[3],l[1]/l[3]),signedDistanceFromCamera:l[3],isOccluded:h}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const e=fi(this.worldSize,this.center.lat),i=t.bk(),a=t.bk();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*e),t.be(i,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const r=this.centerOffset;i[8]=2*-r.x/this._helper._width,i[9]=2*r.y/this._helper._height,this._projectionMatrix=t.bf(i),this._globeProjMatrixInverted=t.bk(),t.aB(this._globeProjMatrixInverted,i),t.O(i,i,[0,0,-this.cameraToCenterDistance]),t.bg(i,i,this.rollInRadians),t.bh(i,i,-this.pitchInRadians),t.bg(i,i,this.bearingInRadians),t.O(i,i,[0,0,-e]);const o=t.bz();o[0]=e,o[1]=e,o[2]=e,t.bh(a,i,this.center.lat*Math.PI/180),t.bJ(a,a,-this.center.lng*Math.PI/180),t.Q(a,a,o),this._globeViewProjMatrixNoCorrection=a,t.bh(i,i,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),t.bJ(i,i,-this.center.lng*Math.PI/180),t.Q(i,i,o),this._globeViewProjMatrix32f=new Float32Array(i),this._globeViewProjMatrixNoCorrectionInverted=t.bk(),t.aB(this._globeViewProjMatrixNoCorrectionInverted,a);const s=t.bz();this._cameraPosition=t.bz(),this._cameraPosition[2]=this.cameraToCenterDistance/e,t.bG(this._cameraPosition,this._cameraPosition,s,-this.rollInRadians),t.bH(this._cameraPosition,this._cameraPosition,s,this.pitchInRadians),t.bG(this._cameraPosition,this._cameraPosition,s,-this.bearingInRadians),t.b0(this._cameraPosition,this._cameraPosition,[0,0,1]),t.bH(this._cameraPosition,this._cameraPosition,s,-this.center.lat*Math.PI/180),t.bI(this._cameraPosition,this._cameraPosition,s,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(e);const n=t.bf(this._globeViewProjMatrixNoCorrectionInverted);t.Q(n,n,[1,1,-1]),this._cachedFrustum=Wt.fromInvProjectionMatrix(n,1,0,this._cachedClippingPlane,!0);}calculateFogMatrix(e){t.w("calculateFogMatrix is not supported on globe projection.");const i=t.bk();return t.ar(i),i}getVisibleUnwrappedCoordinates(e){return [new t.bc(0,e)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(e){e&&t.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0);}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(e,i){if(!this._globeViewProjMatrixNoCorrection)return 1;const a=mi(e);t.a$(a,a,1+i/t.bE);const r=t.bF();return t.aH(r,[a[0],a[1],a[2],1],this._globeViewProjMatrixNoCorrection),r[2]/r[3]}populateCache(e){}getBounds(){const e=.5*this.width,i=.5*this.height,a=[new t.P(0,0),new t.P(e,0),new t.P(this.width,0),new t.P(this.width,i),new t.P(this.width,this.height),new t.P(e,this.height),new t.P(0,this.height),new t.P(0,i)],r=[];for(const e of a)r.push(this.unprojectScreenPoint(e));let o=0,s=0,n=0,l=0;const c=this.center;for(const e of r){const i=t.bK(c.lng,e.lng),a=t.bK(c.lat,e.lat);i<s&&(s=i),i>o&&(o=i),a<l&&(l=a),a>n&&(n=a);}const h=[c.lng+s,c.lat+l,c.lng+o,c.lat+n];return this.isSurfacePointOnScreen([0,1,0])&&(h[3]=90,h[0]=-180,h[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(h[1]=-90,h[0]=-180,h[2]=180),new $(h)}calculateCenterFromCameraLngLatAlt(e,t,i,a){return this._helper.calculateCenterFromCameraLngLatAlt(e,t,i,a)}setLocationAtPoint(e,i){const a=mi(this.unprojectScreenPoint(i)),r=mi(e),o=t.bz();t.bL(o);const s=t.bz();t.bI(s,a,o,-this.center.lng*Math.PI/180),t.bH(s,s,o,this.center.lat*Math.PI/180);const n=r[0]*r[0]+r[2]*r[2],l=s[0]*s[0];if(n<l)return;const c=Math.sqrt(n-l),h=-c,u=t.bM(r[0],r[2],s[0],c),d=t.bM(r[0],r[2],s[0],h),_=t.bz();t.bI(_,r,o,-u);const p=t.bM(_[1],_[2],s[1],s[2]),m=t.bz();t.bI(m,r,o,-d);const f=t.bM(m[1],m[2],s[1],s[2]),g=.5*Math.PI,v=p>=-g&&p<=g,x=f>=-g&&f<=g;let b,y;if(v&&x){const e=this.center.lng*Math.PI/180,i=this.center.lat*Math.PI/180;t.bN(u,e)+t.bN(p,i)<t.bN(d,e)+t.bN(f,i)?(b=u,y=p):(b=d,y=f);}else if(v)b=u,y=p;else {if(!x)return;b=d,y=f;}const w=b/Math.PI*180,T=y/Math.PI*180,P=this.center.lat;this.setCenter(new t.V(w,t.an(T,-90,90))),this.setZoom(this.zoom+xi(P,this.center.lat));}locationToScreenPoint(e,i){const a=mi(e);if(i){const r=i.getElevationForLngLatZoom(e,this._helper._tileZoom);t.a$(a,a,1+r/t.bE);}return this._projectSurfacePointToScreen(a)}_projectSurfacePointToScreen(e){const i=t.bF();return t.aH(i,[...e,1],this._globeViewProjMatrixNoCorrection),i[0]/=i[3],i[1]/=i[3],new t.P((.5*i[0]+.5)*this.width,(.5*-i[1]+.5)*this.height)}screenPointToMercatorCoordinate(e,i){if(i){const t=i.pointCoordinate(e);if(t)return t}return t.a9.fromLngLat(this.unprojectScreenPoint(e))}screenPointToLocation(e,t){var i;return null===(i=this.screenPointToMercatorCoordinate(e,t))||void 0===i?void 0:i.toLngLat()}isPointOnMapSurface(e,t){const i=this._cameraPosition,a=this.getRayDirectionFromPixel(e);return !!this.rayPlanetIntersection(i,a)}getRayDirectionFromPixel(e){const i=t.bF();i[0]=e.x/this.width*2-1,i[1]=-1*(e.y/this.height*2-1),i[2]=1,i[3]=1,t.aH(i,i,this._globeViewProjMatrixNoCorrectionInverted),i[0]/=i[3],i[1]/=i[3],i[2]/=i[3];const a=t.bz();a[0]=i[0]-this._cameraPosition[0],a[1]=i[1]-this._cameraPosition[1],a[2]=i[2]-this._cameraPosition[2];const r=t.bz();return t.b3(r,a),r}isSurfacePointVisible(e){const t=this._cachedClippingPlane;return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]>=0}isSurfacePointOnScreen(e){if(!this.isSurfacePointVisible(e))return !1;const i=t.bF();return t.aH(i,[...e,1],this._globeViewProjMatrixNoCorrection),i[0]/=i[3],i[1]/=i[3],i[2]/=i[3],i[0]>-1&&i[0]<1&&i[1]>-1&&i[1]<1&&i[2]>-1&&i[2]<1}rayPlanetIntersection(e,i){const a=t.b5(e,i),r=t.bz(),o=t.bz();t.a$(o,i,a),t.b2(r,e,o);const s=1-t.b5(r,r);if(s<0)return null;const n=t.b5(e,e)-1,l=-a+(a<0?1:-1)*Math.sqrt(s),c=n/l,h=l;return {tMin:Math.min(c,h),tMax:Math.max(c,h)}}unprojectScreenPoint(e){const i=this._cameraPosition,a=this.getRayDirectionFromPixel(e),r=this.rayPlanetIntersection(i,a);if(r){const e=t.bz();t.b0(e,i,[a[0]*r.tMin,a[1]*r.tMin,a[2]*r.tMin]);const o=t.bz();return t.b3(o,e),gi(o)}const o=this._cachedClippingPlane,s=o[0]*a[0]+o[1]*a[1]+o[2]*a[2],n=-t.bb(o,i)/s,l=t.bz();if(n>0)t.b0(l,i,[a[0]*n,a[1]*n,a[2]*n]);else {const e=t.bz();t.b0(e,i,[2*a[0],2*a[1],2*a[2]]);const r=t.bb(this._cachedClippingPlane,e);t.b2(l,e,[this._cachedClippingPlane[0]*r,this._cachedClippingPlane[1]*r,this._cachedClippingPlane[2]*r]);}const c=function(e){const i=t.bz();return i[0]=e[0]*-e[3],i[1]=e[1]*-e[3],i[2]=e[2]*-e[3],{center:i,radius:Math.sqrt(1-e[3]*e[3])}}(o);return gi(function(e,i,a){const r=t.bz();t.b2(r,a,e);const o=t.bz();return t.bA(o,e,r,i/t.b9(r)),o}(c.center,c.radius,l))}getMatrixForModel(e,i){const a=t.V.convert(e),r=1/t.bE,o=t.bj();return t.bJ(o,o,a.lng/180*Math.PI),t.bh(o,o,-a.lat/180*Math.PI),t.O(o,o,[0,0,1+i/t.bE]),t.bh(o,o,.5*Math.PI),t.Q(o,o,[r,r,r]),o}getProjectionDataForCustomLayer(e=!0){const i=this.getProjectionData({overscaledTileID:new t.a2(0,0,0,0,0),applyGlobeMatrix:e});return i.tileMercatorCoords=[0,0,1,1],i}getFastPathSimpleProjectionMatrix(e){}}class Ri{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e);}setMaxZoom(e){this._helper.setMaxZoom(e);}setMinPitch(e){this._helper.setMinPitch(e);}setMaxPitch(e){this._helper.setMaxPitch(e);}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e);}setBearing(e){this._helper.setBearing(e);}setPitch(e){this._helper.setPitch(e);}setRoll(e){this._helper.setRoll(e);}setFov(e){this._helper.setFov(e);}setZoom(e){this._helper.setZoom(e);}setCenter(e){this._helper.setCenter(e);}setElevation(e){this._helper.setElevation(e);}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e);}setPadding(e){this._helper.setPadding(e);}interpolatePadding(e,t,i){return this._helper.interpolatePadding(e,t,i)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,t,i=!0){this._helper.resize(e,t,i);}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e);}setConstrainOverride(e){this._helper.setConstrainOverride(e);}overrideNearFarZ(e,t){this._helper.overrideNearFarZ(e,t);}clearNearFarZOverride(){this._helper.clearNearFarZOverride();}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(e,t){this._globeness=e,this._globeLatitudeErrorCorrectionRadians=t,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame();}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(e){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(e,t)=>this.currentTransform.defaultConstrain(e,t),this.applyConstrain=(e,t)=>this._helper.applyConstrain(e,t),this._helper=new Ut({calcMatrices:()=>{this._calcMatrices();},defaultConstrain:(e,t)=>this.defaultConstrain(e,t)},e),this._globeness=1,this._mercatorTransform=new $t,this._verticalPerspectiveTransform=new Si;}clone(){const e=new Ri;return e._globeness=this._globeness,e._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,e.apply(this),e}apply(e){this._helper.apply(e),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians);}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(e){const t=this._mercatorTransform.getProjectionData(e),i=this._verticalPerspectiveTransform.getProjectionData(e);return {mainMatrix:this.isGlobeRendering?i.mainMatrix:t.mainMatrix,clippingPlane:i.clippingPlane,tileMercatorCoords:i.tileMercatorCoords,projectionTransition:e.applyGlobeMatrix?this._globeness:0,fallbackMatrix:t.fallbackMatrix}}isLocationOccluded(e){return this.currentTransform.isLocationOccluded(e)}transformLightDirection(e){return this.currentTransform.transformLightDirection(e)}getPixelScale(){return t.bu(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return t.bu(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(e,i,a){const r=this._mercatorTransform.getPitchedTextCorrection(e,i,a),o=this._verticalPerspectiveTransform.getPitchedTextCorrection(e,i,a);return t.bu(r,o,this._globeness)}projectTileCoordinates(e,t,i,a){return this.currentTransform.projectTileCoordinates(e,t,i,a)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ);}calculateFogMatrix(e){return this.currentTransform.calculateFogMatrix(e)}getVisibleUnwrappedCoordinates(e){return this.currentTransform.getVisibleUnwrappedCoordinates(e)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(e){this._mercatorTransform.recalculateZoomAndCenter(e),this._verticalPerspectiveTransform.recalculateZoomAndCenter(e);}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(e,t){return this.currentTransform.lngLatToCameraDepth(e,t)}populateCache(e){this._mercatorTransform.populateCache(e),this._verticalPerspectiveTransform.populateCache(e);}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(e,t,i,a){return this._helper.calculateCenterFromCameraLngLatAlt(e,t,i,a)}setLocationAtPoint(e,t){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(e,t),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(e,t),this.apply(this._verticalPerspectiveTransform);}locationToScreenPoint(e,t){return this.currentTransform.locationToScreenPoint(e,t)}screenPointToMercatorCoordinate(e,t){return this.currentTransform.screenPointToMercatorCoordinate(e,t)}screenPointToLocation(e,t){return this.currentTransform.screenPointToLocation(e,t)}isPointOnMapSurface(e,t){return this.currentTransform.isPointOnMapSurface(e,t)}getRayDirectionFromPixel(e){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(e)}getMatrixForModel(e,t){return this.currentTransform.getMatrixForModel(e,t)}getProjectionDataForCustomLayer(e=!0){const t=this._mercatorTransform.getProjectionDataForCustomLayer(e);if(!this.isGlobeRendering)return t;const i=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(e);return i.fallbackMatrix=t.mainMatrix,i}getFastPathSimpleProjectionMatrix(e){return this.currentTransform.getFastPathSimpleProjectionMatrix(e)}}class zi{get useGlobeControls(){return !0}handlePanInertia(e,i){const a=bi(e,i);return Math.abs(a.lng-i.center.lng)>180&&(a.lng=i.center.lng+179.5*Math.sign(a.lng-i.center.lng)),{easingCenter:a,easingOffset:new t.P(0,0)}}handleMapControlsRollPitchBearingZoom(e,i){const a=e.around,r=i.screenPointToLocation(a);e.bearingDelta&&i.setBearing(i.bearing+e.bearingDelta),e.pitchDelta&&i.setPitch(i.pitch+e.pitchDelta),e.rollDelta&&i.setRoll(i.roll+e.rollDelta);const o=i.zoom;e.zoomDelta&&i.setZoom(i.zoom+e.zoomDelta);const s=i.zoom-o;if(0===s)return;const n=t.bK(i.center.lng,r.lng),l=n/(Math.abs(n/180)+1),c=t.bK(i.center.lat,r.lat),h=i.getRayDirectionFromPixel(a),u=i.cameraPosition,d=-1*t.b5(u,h),_=t.bz();t.b0(_,u,[h[0]*d,h[1]*d,h[2]*d]);const p=t.b7(_)-1,m=Math.exp(.5*-Math.max(p-.3,0)),f=fi(i.worldSize,i.center.lat)/Math.min(i.width,i.height),g=t.bx(f,.9,.5,1,.25),v=(1-t.aq(-s))*Math.min(m,g),x=i.center.lat,b=i.zoom,y=new t.V(i.center.lng+l*v,t.an(i.center.lat+c*v,-t.ao,t.ao));i.setLocationAtPoint(r,a);const w=i.center,T=t.bx(Math.abs(n),45,85,0,1),P=t.bx(f,.75,.35,0,1),C=Math.pow(Math.max(T,P),.25),I=t.bK(w.lng,y.lng),M=t.bK(w.lat,y.lat);i.setCenter(new t.V(w.lng+I*C,w.lat+M*C).wrap()),i.setZoom(b+xi(x,i.center.lat));}handleMapControlsPan(e,t,i){if(!e.panDelta)return;const a=t.center.lat,r=t.zoom;t.setCenter(bi(e.panDelta,t).wrap()),t.setZoom(r+xi(a,t.center.lat));}cameraForBoxAndBearing(e,i,a,r,o){const s=Kt(e,i,a,r,o),n=i.left/o.width*2-1,l=(o.width-i.right)/o.width*2-1,c=i.top/o.height*-2+1,h=(o.height-i.bottom)/o.height*-2+1,u=t.bK(a.getWest(),a.getEast())<0,d=u?a.getEast():a.getWest(),_=u?a.getWest():a.getEast(),p=Math.max(a.getNorth(),a.getSouth()),m=Math.min(a.getNorth(),a.getSouth()),f=d+.5*t.bK(d,_),g=p+.5*t.bK(p,m),v=o.clone();v.setCenter(s.center),v.setBearing(s.bearing),v.setPitch(0),v.setRoll(0),v.setZoom(s.zoom);const x=v.modelViewProjectionMatrix,b=[mi(a.getNorthWest()),mi(a.getNorthEast()),mi(a.getSouthWest()),mi(a.getSouthEast()),mi(new t.V(_,g)),mi(new t.V(d,g)),mi(new t.V(f,p)),mi(new t.V(f,m))],y=mi(s.center);let w=Number.POSITIVE_INFINITY;for(const e of b)n<0&&(w=zi.getLesserNonNegativeNonNull(w,zi.solveVectorScale(e,y,x,"x",n))),l>0&&(w=zi.getLesserNonNegativeNonNull(w,zi.solveVectorScale(e,y,x,"x",l))),c>0&&(w=zi.getLesserNonNegativeNonNull(w,zi.solveVectorScale(e,y,x,"y",c))),h<0&&(w=zi.getLesserNonNegativeNonNull(w,zi.solveVectorScale(e,y,x,"y",h)));if(Number.isFinite(w)&&0!==w)return s.zoom=v.zoom+t.at(w),s;Ht();}handleJumpToCenterZoom(e,i){const a=e.center.lat,r=e.applyConstrain(i.center?t.V.convert(i.center):e.center,e.zoom).center;e.setCenter(r.wrap());const o=void 0!==i.zoom?+i.zoom:e.zoom+xi(a,r.lat);e.zoom!==o&&e.setZoom(o);}handleEaseTo(e,i){const a=e.zoom,r=e.center,o=e.padding,s={roll:e.roll,pitch:e.pitch,bearing:e.bearing},n={roll:void 0===i.roll?e.roll:i.roll,pitch:void 0===i.pitch?e.pitch:i.pitch,bearing:void 0===i.bearing?e.bearing:i.bearing},l=void 0!==i.zoom,c=!e.isPaddingEqual(i.padding);let h=!1;const u=i.center?t.V.convert(i.center):r,d=e.applyConstrain(u,a).center;Zt(e,d);const _=e.clone();_.setCenter(d),_.setZoom(l?+i.zoom:a+xi(r.lat,u.lat)),_.setBearing(i.bearing);const p=new t.P(t.an(e.centerPoint.x+i.offsetAsPoint.x,0,e.width),t.an(e.centerPoint.y+i.offsetAsPoint.y,0,e.height));_.setLocationAtPoint(d,p);const m=(i.offset&&i.offsetAsPoint.mag())>0?_.center:d,f=l?+i.zoom:a+xi(r.lat,m.lat),g=a+xi(r.lat,0),v=f+xi(m.lat,0),x=t.bK(r.lng,m.lng),b=t.bK(r.lat,m.lat),y=t.aq(v-g);return h=f!==a,{easeFunc:a=>{if(t.bo(s,n)||Xt({startEulerAngles:s,endEulerAngles:n,tr:e,k:a,useSlerp:s.roll!=n.roll}),c&&e.interpolatePadding(o,i.padding,a),i.around)t.w("Easing around a point is not supported under globe projection."),e.setLocationAtPoint(i.around,i.aroundPoint);else {const t=v>g?Math.min(2,y):Math.max(.5,y),i=Math.pow(t,1-a),o=wi(r,x,b,a*i);e.setCenter(o.wrap());}if(h){const i=t.G.number(g,v,a)+xi(0,e.center.lat);e.setZoom(i);}},isZooming:h,elevationCenter:m}}handleFlyTo(e,i){const a=void 0!==i.zoom,r=e.center,o=e.zoom,s=e.padding,n=!e.isPaddingEqual(i.padding),l=e.applyConstrain(t.V.convert(i.center||i.locationAtOffset),o).center,c=a?+i.zoom:e.zoom+xi(e.center.lat,l.lat),h=e.clone();h.setCenter(l),h.setZoom(c),h.setBearing(i.bearing);const u=new t.P(t.an(e.centerPoint.x+i.offsetAsPoint.x,0,e.width),t.an(e.centerPoint.y+i.offsetAsPoint.y,0,e.height));h.setLocationAtPoint(l,u);const d=h.center;Zt(e,d);const _=function(e,i,a){const r=mi(i),o=mi(a),s=t.b5(r,o),n=Math.acos(s),l=_i(e);return n/(2*Math.PI)*l}(e,r,d),p=o+xi(r.lat,0),m=c+xi(d.lat,0),f=t.aq(m-p);let g;if("number"==typeof i.minZoom){const a=+i.minZoom+xi(d.lat,0),r=Math.min(a,p,m)+xi(0,d.lat),o=e.applyConstrain(d,r).zoom+xi(d.lat,0);g=t.aq(o-p);}const v=t.bK(r.lng,d.lng),x=t.bK(r.lat,d.lat);return {easeFunc:(a,o,l,h)=>{const u=wi(r,v,x,l);n&&e.interpolatePadding(s,i.padding,a);const _=1===a?d:u;e.setCenter(_.wrap());const m=p+t.at(o);e.setZoom(1===a?c:m+xi(0,_.lat));},scaleOfZoom:f,targetCenter:d,scaleOfMinZoom:g,pixelPathLength:_}}static solveVectorScale(e,t,i,a,r){const o="x"===a?[i[0],i[4],i[8],i[12]]:[i[1],i[5],i[9],i[13]],s=[i[3],i[7],i[11],i[15]],n=e[0]*o[0]+e[1]*o[1]+e[2]*o[2],l=e[0]*s[0]+e[1]*s[1]+e[2]*s[2],c=t[0]*o[0]+t[1]*o[1]+t[2]*o[2],h=t[0]*s[0]+t[1]*s[1]+t[2]*s[2];return c+r*l===n+r*h||s[3]*(n-c)+o[3]*(h-l)+n*h==c*l?null:(c+o[3]-r*h-r*s[3])/(c-n-r*h+r*l)}static getLesserNonNegativeNonNull(e,t){return null!==t&&t>=0&&t<e?t:e}}class Di{constructor(e){this._globe=e,this._mercatorCameraHelper=new Yt,this._verticalPerspectiveCameraHelper=new zi;}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(e,t){return this.currentHelper.handlePanInertia(e,t)}handleMapControlsRollPitchBearingZoom(e,t){return this.currentHelper.handleMapControlsRollPitchBearingZoom(e,t)}handleMapControlsPan(e,t,i){this.currentHelper.handleMapControlsPan(e,t,i);}cameraForBoxAndBearing(e,t,i,a,r){return this.currentHelper.cameraForBoxAndBearing(e,t,i,a,r)}handleJumpToCenterZoom(e,t){this.currentHelper.handleJumpToCenterZoom(e,t);}handleEaseTo(e,t){return this.currentHelper.handleEaseTo(e,t)}handleFlyTo(e,t){return this.currentHelper.handleFlyTo(e,t)}}const Ai=(e,i)=>t.B(e,i&&i.filter((e=>"source.canvas"!==e.identifier))),Li=t.bO();class ki extends t.E{constructor(e,i={}){var a,r;super(),this._rtlPluginLoaded=()=>{for(const e in this.tileManagers){const t=this.tileManagers[e].getSource().type;"vector"!==t&&"geojson"!==t||this.tileManagers[e].reload();}},this.map=e,this.dispatcher=new N(j(),e._getMapId()),this.dispatcher.registerMessageHandler("GG",((e,t)=>this.getGlyphs(e,t))),this.dispatcher.registerMessageHandler("GI",((e,t)=>this.getImages(e,t))),this.dispatcher.registerMessageHandler("GDA",((e,t)=>this.getDashes(e,t))),this.imageManager=new w,this.imageManager.setEventedParent(this);const o=(null===(a=e._container)||void 0===a?void 0:a.lang)||"undefined"!=typeof document&&(null===(r=document.documentElement)||void 0===r?void 0:r.lang)||void 0;this.glyphManager=new M(e._requestManager,i.localIdeographFontFamily,o),this.lineAtlas=new A(256,512),this.crossTileSymbolIndex=new zt,this._setInitialValues(),this._resetUpdates(),this.dispatcher.broadcast("SR",t.bP()),ce().on(se,this._rtlPluginLoaded),this.on("data",(e=>{if("source"!==e.dataType||"metadata"!==e.sourceDataType)return;const t=this.tileManagers[e.sourceId];if(!t)return;const i=t.getSource();if(i&&i.vectorLayerIds)for(const e in this._layers){const t=this._layers[e];t.source===i.id&&this._validateLayer(t);}}));}_setInitialValues(){var e;this._spritesImagesIds={},this._layers={},this._order=[],this.tileManagers={},this.zoomHistory=new t.bQ,this._availableImages=[],this._globalState={},this._serializedLayers={},this.stylesheet=null,this.light=null,this.sky=null,this.projection&&(this.projection.destroy(),delete this.projection),this._loaded=!1,this._changed=!1,this._updatedLayers={},this._updatedSources={},this._changedImages={},this._glyphsDidChange=!1,this._updatedPaintProps={},this._layerOrderChanged=!1,this.crossTileSymbolIndex=new((null===(e=this.crossTileSymbolIndex)||void 0===e?void 0:e.constructor)||Object),this.pauseablePlacement=void 0,this.placement=void 0,this.z=0;}setGlobalStateProperty(e,i){var a,r,o;this._checkLoaded();const s=null===i?null!==(o=null===(r=null===(a=this.stylesheet.state)||void 0===a?void 0:a[e])||void 0===r?void 0:r.default)&&void 0!==o?o:null:i;if(t.bR(s,this._globalState[e]))return this;this._globalState[e]=s,this._applyGlobalStateChanges([e]);}getGlobalState(){return this._globalState}setGlobalState(e){this._checkLoaded();const i=[];for(const a in e)!t.bR(this._globalState[a],e[a].default)&&(i.push(a),this._globalState[a]=e[a].default);this._applyGlobalStateChanges(i);}_applyGlobalStateChanges(e){if(0===e.length)return;const t=new Set,i={};for(const a of e){i[a]=this._globalState[a];for(const e in this._layers){const i=this._layers[e],r=i.getLayoutAffectingGlobalStateRefs(),o=i.getPaintAffectingGlobalStateRefs(),s=i.getVisibilityAffectingGlobalStateRefs();if(r.has(a)&&t.add(i.source),o.has(a))for(const{name:e,value:t}of o.get(a))this._updatePaintProperty(i,e,t);(null==s?void 0:s.has(a))&&(i.recalculateVisibility(),this._updateLayer(i));}}this.dispatcher.broadcast("UGS",i);for(const e in this.tileManagers)t.has(e)&&(this._reloadSource(e),this._changed=!0);}loadURL(e,i={},a){this.fire(new t.l("dataloading",{dataType:"style"})),i.validate="boolean"!=typeof i.validate||i.validate;const r=this.map._requestManager.transformRequest(e,"Style");this._loadStyleRequest=new AbortController;const o=this._loadStyleRequest;t.j(r,this._loadStyleRequest).then((e=>{this._loadStyleRequest=null,this._load(e.data,i,a);})).catch((e=>{this._loadStyleRequest=null,e&&!o.signal.aborted&&this.fire(new t.k(e));}));}loadJSON(e,i={},a){this.fire(new t.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,n.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,i.validate=!1!==i.validate,this._load(e,i,a);})).catch((()=>{}));}loadEmpty(){this.fire(new t.l("dataloading",{dataType:"style"})),this._load(Li,{validate:!1});}_load(e,i,a){var r,o;let s=i.transformStyle?i.transformStyle(a,e):e;if(!i.validate||!Ai(this,t.C(s))){s=Object.assign({},s),this._loaded=!0,this.stylesheet=s;for(const e in s.sources)this.addSource(e,s.sources[e],{validate:!1});s.sprite?this._loadSprite(s.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(s.glyphs),this._createLayers(),this.light=new R(this.stylesheet.light),this._setProjectionInternal((null===(r=this.stylesheet.projection)||void 0===r?void 0:r.type)||"mercator"),this.sky=new D(this.stylesheet.sky),this.map.setTerrain(null!==(o=this.stylesheet.terrain)&&void 0!==o?o:null),this.fire(new t.l("data",{dataType:"style"})),this.fire(new t.l("style.load"));}}_createLayers(){var e,i,a;const r=t.bS(this.stylesheet.layers);this.setGlobalState(null!==(e=this.stylesheet.state)&&void 0!==e?e:null),this.dispatcher.broadcast("SL",r),this._order=r.map((e=>e.id)),this._layers={},this._serializedLayers=null;for(const e of r){const r=t.bT(e,this._globalState);if(r.setEventedParent(this,{layer:{id:e.id}}),this._layers[e.id]=r,t.bU(r)&&this.tileManagers[r.source]){const t=null!==(a=null===(i=e.paint)||void 0===i?void 0:i["raster-fade-duration"])&&void 0!==a?a:r.paint.get("raster-fade-duration");this.tileManagers[r.source].setRasterFadeDuration(t);}}}_loadSprite(e,i=!1,a=void 0){this.imageManager.setLoaded(!1);const r=new AbortController;let o;this._spriteRequest=r,function(e,i,a,r){return t._(this,void 0,void 0,(function*(){const o=x(e),s=a>1?"@2x":"",l={},c={};for(const{id:e,url:a}of o){const o=i.transformRequest(b(a,s,".json"),"SpriteJSON");l[e]=t.j(o,r);const n=i.transformRequest(b(a,s,".png"),"SpriteImage");c[e]=g.getImage(n,r);}return yield Promise.all([...Object.values(l),...Object.values(c)]),function(e,i){return t._(this,void 0,void 0,(function*(){const t={};for(const a in e){t[a]={};const r=n.getImageCanvasContext((yield i[a]).data),o=(yield e[a]).data;for(const e in o){const{width:i,height:s,x:n,y:l,sdf:c,pixelRatio:h,stretchX:u,stretchY:d,content:_,textFitWidth:p,textFitHeight:m}=o[e];t[a][e]={data:null,pixelRatio:h,sdf:c,stretchX:u,stretchY:d,content:_,textFitWidth:p,textFitHeight:m,spriteData:{width:i,height:s,x:n,y:l,context:r}};}}return t}))}(l,c)}))}(e,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((e=>{if(this._spriteRequest=null,e)for(const t in e){this._spritesImagesIds[t]=[];const a=this._spritesImagesIds[t]?this._spritesImagesIds[t].filter((t=>!(t in e))):[];for(const e of a)this.imageManager.removeImage(e),this._changedImages[e]=!0;for(const a in e[t]){const r="default"===t?a:`${t}:${a}`;this._spritesImagesIds[t].push(r),r in this.imageManager.images?this.imageManager.updateImage(r,e[t][a],!1):this.imageManager.addImage(r,e[t][a]),i&&(this._changedImages[r]=!0);}}})).catch((e=>{this._spriteRequest=null,o=e,r.signal.aborted||this.fire(new t.k(o));})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),i&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new t.l("data",{dataType:"style"})),a&&a(o);}));}_unloadSprite(){for(const e of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(e),this._changedImages[e]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new t.l("data",{dataType:"style"}));}_validateLayer(e){const i=this.tileManagers[e.source];if(!i)return;const a=e.sourceLayer;if(!a)return;const r=i.getSource();("geojson"===r.type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(a))&&this.fire(new t.k(new Error(`Source layer "${a}" does not exist on source "${r.id}" as specified by style layer "${e.id}".`)));}loaded(){if(!this._loaded)return !1;if(Object.keys(this._updatedSources).length)return !1;for(const e in this.tileManagers)if(!this.tileManagers[e].loaded())return !1;return !!this.imageManager.isLoaded()}_serializeByIds(e,i=!1){const a=this._serializedAllLayers();if(!e||0===e.length)return Object.values(i?t.bV(a):a);const r=[];for(const o of e)if(a[o]){const e=i?t.bV(a[o]):a[o];r.push(e);}return r}_serializedAllLayers(){let e=this._serializedLayers;if(e)return e;e=this._serializedLayers={};const t=Object.keys(this._layers);for(const i of t){const t=this._layers[i];"custom"!==t.type&&(e[i]=t.serialize());}return e}hasTransitions(){var e,t,i;if(null===(e=this.light)||void 0===e?void 0:e.hasTransition())return !0;if(null===(t=this.sky)||void 0===t?void 0:t.hasTransition())return !0;if(null===(i=this.projection)||void 0===i?void 0:i.hasTransition())return !0;for(const e in this.tileManagers)if(this.tileManagers[e].hasTransition())return !0;for(const e in this._layers)if(this._layers[e].hasTransition())return !0;return !1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(e){if(!this._loaded)return;const i=this._changed;if(i){const t=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);(t.length||i.length)&&this._updateWorkerLayers(t,i);for(const e in this._updatedSources){const t=this._updatedSources[e];if("reload"===t)this._reloadSource(e);else {if("clear"!==t)throw new Error(`Invalid action ${t}`);this._clearSource(e);}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const t in this._updatedPaintProps)this._layers[t].updateTransitions(e);this.light.updateTransitions(e),this.sky.updateTransitions(e),this._resetUpdates();}const a={};for(const e in this.tileManagers){const t=this.tileManagers[e];a[e]=t.used,t.used=!1;}for(const t of this._order){const i=this._layers[t];i.recalculate(e,this._availableImages),!i.isHidden(e.zoom)&&i.source&&(this.tileManagers[i.source].used=!0);}for(const e in a){const i=this.tileManagers[e];!!a[e]!=!!i.used&&i.fire(new t.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:e}));}this.light.recalculate(e),this.sky.recalculate(e),this.projection.recalculate(e),this.z=e.zoom,i&&this.fire(new t.l("data",{dataType:"style"}));}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const t in this.tileManagers)this.tileManagers[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={};}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const e in this.tileManagers)this.tileManagers[e].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1;}}_updateWorkerLayers(e,t){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(e,!1),removedIds:t});}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1;}setState(e,i={}){var a;this._checkLoaded();const r=this.serialize();if(e=i.transformStyle?i.transformStyle(r,e):e,(null===(a=i.validate)||void 0===a||a)&&Ai(this,t.C(e)))return !1;(e=t.bV(e)).layers=t.bS(e.layers);const o=t.bW(r,e),s=this._getOperationsToPerform(o);if(s.unimplemented.length>0)throw new Error(`Unimplemented: ${s.unimplemented.join(", ")}.`);if(0===s.operations.length)return !1;for(const e of s.operations)e();return this.stylesheet=e,this._serializedLayers=null,!0}_getOperationsToPerform(e){const t=[],i=[];for(const a of e)switch(a.command){case "setCenter":case "setZoom":case "setBearing":case "setPitch":case "setRoll":continue;case "addLayer":t.push((()=>this.addLayer.apply(this,a.args)));break;case "removeLayer":t.push((()=>this.removeLayer.apply(this,a.args)));break;case "setPaintProperty":t.push((()=>this.setPaintProperty.apply(this,a.args)));break;case "setLayoutProperty":t.push((()=>this.setLayoutProperty.apply(this,a.args)));break;case "setFilter":t.push((()=>this.setFilter.apply(this,a.args)));break;case "addSource":t.push((()=>this.addSource.apply(this,a.args)));break;case "removeSource":t.push((()=>this.removeSource.apply(this,a.args)));break;case "setLayerZoomRange":t.push((()=>this.setLayerZoomRange.apply(this,a.args)));break;case "setLight":t.push((()=>this.setLight.apply(this,a.args)));break;case "setGeoJSONSourceData":t.push((()=>this.setGeoJSONSourceData.apply(this,a.args)));break;case "setGlyphs":t.push((()=>this.setGlyphs.apply(this,a.args)));break;case "setSprite":t.push((()=>this.setSprite.apply(this,a.args)));break;case "setTerrain":t.push((()=>this.map.setTerrain.apply(this,a.args)));break;case "setSky":t.push((()=>this.setSky.apply(this,a.args)));break;case "setProjection":this.setProjection.apply(this,a.args);break;case "setGlobalState":t.push((()=>this.setGlobalState.apply(this,a.args)));break;case "setTransition":t.push((()=>{}));break;default:i.push(a.command);}return {operations:t,unimplemented:i}}addImage(e,i){if(this.getImage(e))return this.fire(new t.k(new Error(`An image named "${e}" already exists.`)));this.imageManager.addImage(e,i),this._afterImageUpdated(e);}updateImage(e,t){this.imageManager.updateImage(e,t);}getImage(e){return this.imageManager.getImage(e)}removeImage(e){if(!this.getImage(e))return this.fire(new t.k(new Error(`An image named "${e}" does not exist.`)));this.imageManager.removeImage(e),this._afterImageUpdated(e);}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new t.l("data",{dataType:"style"}));}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,i,a={}){if(this._checkLoaded(),void 0!==this.tileManagers[e])throw new Error(`Source "${e}" already exists.`);if(!i.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(i).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(i.type)>=0&&this._validate(t.C.source,`sources.${e}`,i,null,a))return;this.map&&this.map._collectResourceTiming&&(i.collectResourceTiming=!0);const r=this.tileManagers[e]=new ke(e,i,this.dispatcher);r.style=this,r.setEventedParent(this,(()=>({isSourceLoaded:r.loaded(),source:r.serialize(),sourceId:e}))),r.onAdd(this.map),this._changed=!0;}removeSource(e){if(this._checkLoaded(),void 0===this.tileManagers[e])throw new Error("There is no source with this ID");for(const i in this._layers)if(this._layers[i].source===e)return this.fire(new t.k(new Error(`Source "${e}" cannot be removed while layer "${i}" is using it.`)));const i=this.tileManagers[e];delete this.tileManagers[e],delete this._updatedSources[e],i.fire(new t.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),i.setEventedParent(null),i.onRemove(this.map),this._changed=!0;}setGeoJSONSourceData(e,t){if(this._checkLoaded(),void 0===this.tileManagers[e])throw new Error(`There is no source with this ID=${e}`);const i=this.tileManagers[e].getSource();if("geojson"!==i.type)throw new Error(`geojsonSource.type is ${i.type}, which is !== 'geojson`);i.setData(t),this._changed=!0;}getSource(e){return this.tileManagers[e]&&this.tileManagers[e].getSource()}addLayer(e,i,a={}){this._checkLoaded();const r=e.id;if(this.getLayer(r))return void this.fire(new t.k(new Error(`Layer "${r}" already exists on this map.`)));let o;if("custom"===e.type){if(Ai(this,t.bX(e)))return;o=t.bT(e,this._globalState);}else {if("source"in e&&"object"==typeof e.source&&(this.addSource(r,e.source),e=t.bV(e),e=t.e(e,{source:r})),this._validate(t.C.layer,`layers.${r}`,e,{arrayIndex:-1},a))return;o=t.bT(e,this._globalState),this._validateLayer(o),o.setEventedParent(this,{layer:{id:r}});}const s=i?this._order.indexOf(i):this._order.length;if(i&&-1===s)this.fire(new t.k(new Error(`Cannot add layer "${r}" before non-existing layer "${i}".`)));else {if(this._order.splice(s,0,r),this._layerOrderChanged=!0,this._layers[r]=o,this._removedLayers[r]&&o.source&&"custom"!==o.type){const e=this._removedLayers[r];delete this._removedLayers[r],e.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.tileManagers[o.source].pause());}this._updateLayer(o),o.onAdd&&o.onAdd(this.map);}}moveLayer(e,i){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new t.k(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===i)return;const a=this._order.indexOf(e);this._order.splice(a,1);const r=i?this._order.indexOf(i):this._order.length;i&&-1===r?this.fire(new t.k(new Error(`Cannot move layer "${e}" before non-existing layer "${i}".`))):(this._order.splice(r,0,e),this._layerOrderChanged=!0);}removeLayer(e){this._checkLoaded();const i=this._layers[e];if(!i)return void this.fire(new t.k(new Error(`Cannot remove non-existing layer "${e}".`)));i.setEventedParent(null);const a=this._order.indexOf(e);this._order.splice(a,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=i,delete this._layers[e],this._serializedLayers&&delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],i.onRemove&&i.onRemove(this.map);}getLayer(e){return this._layers[e]}getLayersOrder(){return [...this._order]}hasLayer(e){return e in this._layers}setLayerZoomRange(e,i,a){this._checkLoaded();const r=this.getLayer(e);r?r.minzoom===i&&r.maxzoom===a||(null!=i&&(r.minzoom=i),null!=a&&(r.maxzoom=a),this._updateLayer(r)):this.fire(new t.k(new Error(`Cannot set the zoom range of non-existing layer "${e}".`)));}setFilter(e,i,a={}){this._checkLoaded();const r=this.getLayer(e);if(r){if(!t.bR(r.filter,i))return null==i?(r.setFilter(void 0),void this._updateLayer(r)):void(this._validate(t.C.filter,`layers.${r.id}.filter`,i,null,a)||(r.setFilter(t.bV(i)),this._updateLayer(r)))}else this.fire(new t.k(new Error(`Cannot filter non-existing layer "${e}".`)));}getFilter(e){return t.bV(this.getLayer(e).filter)}setLayoutProperty(e,i,a,r={}){this._checkLoaded();const o=this.getLayer(e);o?t.bR(o.getLayoutProperty(i),a)||(o.setLayoutProperty(i,a,r),this._updateLayer(o)):this.fire(new t.k(new Error(`Cannot style non-existing layer "${e}".`)));}getLayoutProperty(e,i){const a=this.getLayer(e);if(a)return a.getLayoutProperty(i);this.fire(new t.k(new Error(`Cannot get style of non-existing layer "${e}".`)));}setPaintProperty(e,i,a,r={}){this._checkLoaded();const o=this.getLayer(e);o?t.bR(o.getPaintProperty(i),a)||this._updatePaintProperty(o,i,a,r):this.fire(new t.k(new Error(`Cannot style non-existing layer "${e}".`)));}_updatePaintProperty(e,i,a,r={}){e.setPaintProperty(i,a,r)&&this._updateLayer(e),t.bU(e)&&"raster-fade-duration"===i&&this.tileManagers[e.source].setRasterFadeDuration(a),this._changed=!0,this._updatedPaintProps[e.id]=!0,this._serializedLayers=null;}getPaintProperty(e,t){return this.getLayer(e).getPaintProperty(t)}setFeatureState(e,i){this._checkLoaded();const a=e.source,r=e.sourceLayer,o=this.tileManagers[a];if(void 0===o)return void this.fire(new t.k(new Error(`The source '${a}' does not exist in the map's style.`)));const s=o.getSource().type;"geojson"===s&&r?this.fire(new t.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==s||r?(void 0===e.id&&this.fire(new t.k(new Error("The feature id parameter must be provided."))),o.setFeatureState(r,e.id,i)):this.fire(new t.k(new Error("The sourceLayer parameter must be provided for vector source types.")));}removeFeatureState(e,i){this._checkLoaded();const a=e.source,r=this.tileManagers[a];if(void 0===r)return void this.fire(new t.k(new Error(`The source '${a}' does not exist in the map's style.`)));const o=r.getSource().type,s="vector"===o?e.sourceLayer:void 0;"vector"!==o||s?i&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t.k(new Error("A feature id is required to remove its specific state property."))):r.removeFeatureState(s,e.id,i):this.fire(new t.k(new Error("The sourceLayer parameter must be provided for vector source types.")));}getFeatureState(e){this._checkLoaded();const i=e.source,a=e.sourceLayer,r=this.tileManagers[i];if(void 0!==r)return "vector"!==r.getSource().type||a?(void 0===e.id&&this.fire(new t.k(new Error("The feature id parameter must be provided."))),r.getFeatureState(a,e.id)):void this.fire(new t.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new t.k(new Error(`The source '${i}' does not exist in the map's style.`)));}getTransition(){return t.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const e=t.bY(this.tileManagers,(e=>e.serialize())),i=this._serializeByIds(this._order,!0),a=this.map.getTerrain()||void 0,r=this.stylesheet;return t.bZ({version:r.version,name:r.name,metadata:r.metadata,light:r.light,sky:r.sky,center:r.center,zoom:r.zoom,bearing:r.bearing,pitch:r.pitch,sprite:r.sprite,glyphs:r.glyphs,transition:r.transition,projection:r.projection,sources:e,layers:i,terrain:a},(e=>void 0!==e))}_updateLayer(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&"raster"!==this.tileManagers[e.source].getSource().type&&(this._updatedSources[e.source]="reload",this.tileManagers[e.source].pause()),this._serializedLayers=null,this._changed=!0;}_flattenAndSortRenderedFeatures(e){const t=e=>"fill-extrusion"===this._layers[e].type,i={},a=[];for(let r=this._order.length-1;r>=0;r--){const o=this._order[r];if(t(o)){i[o]=r;for(const t of e){const e=t[o];if(e)for(const t of e)a.push(t);}}}a.sort(((e,t)=>t.intersectionZ-e.intersectionZ));const r=[];for(let o=this._order.length-1;o>=0;o--){const s=this._order[o];if(t(s))for(let e=a.length-1;e>=0;e--){const t=a[e].feature;if(i[t.layer.id]<o)break;r.push(t),a.pop();}else for(const t of e){const e=t[s];if(e)for(const t of e)r.push(t.feature);}}return r}queryRenderedFeatures(e,i,a){i&&i.filter&&this._validate(t.C.filter,"queryRenderedFeatures.filter",i.filter,null,i);const r={};if(i&&i.layers){if(!(Array.isArray(i.layers)||i.layers instanceof Set))return this.fire(new t.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const e of i.layers){const i=this._layers[e];if(!i)return this.fire(new t.k(new Error(`The layer '${e}' does not exist in the map's style and cannot be queried for features.`))),[];r[i.source]=!0;}}const o=[];i.availableImages=this._availableImages;const s=this._serializedAllLayers(),n=i.layers instanceof Set?i.layers:Array.isArray(i.layers)?new Set(i.layers):null,l=Object.assign(Object.assign({},i),{layers:n,globalState:this._globalState});for(const t in this.tileManagers)i.layers&&!r[t]||o.push(U(this.tileManagers[t],this._layers,s,e,l,a,this.map.terrain?(e,t,i)=>this.map.terrain.getElevation(e,t,i):void 0));return this.placement&&o.push(function(e,t,i,a,r,o,s){const n={},l=o.queryRenderedSymbols(a),c=[];for(const e of Object.keys(l).map(Number))c.push(s[e]);c.sort(V);for(const i of c){const a=i.featureIndex.lookupSymbolFeatures(l[i.bucketInstanceId],t,i.bucketIndex,i.sourceLayerIndex,{filterSpec:r.filter,globalState:r.globalState},r.layers,r.availableImages,e);for(const e in a){const t=n[e]=n[e]||[],r=a[e];r.sort(((e,t)=>{const a=i.featureSortOrder;if(a){const i=a.indexOf(e.featureIndex);return a.indexOf(t.featureIndex)-i}return t.featureIndex-e.featureIndex}));for(const e of r)t.push(e);}}return function(e,t,i){for(const a in e)for(const r of e[a])q(r,i[t[a].source]);return e}(n,e,i)}(this._layers,s,this.tileManagers,e,l,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(o)}querySourceFeatures(e,i){(null==i?void 0:i.filter)&&this._validate(t.C.filter,"querySourceFeatures.filter",i.filter,null,i);const a=this.tileManagers[e];return a?function(e,t){const i=e.getRenderableIds().map((t=>e.getTileByID(t))),a=[],r={};for(let e=0;e<i.length;e++){const o=i[e],s=o.tileID.canonical.key;r[s]||(r[s]=!0,o.querySourceFeatures(a,t));}return a}(a,i?Object.assign(Object.assign({},i),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(e,i={}){this._checkLoaded();const a=this.light.getLight();let r=!1;for(const i in e)if(!t.bR(e[i],a[i])){r=!0;break}if(!r)return;const o={now:c(),transition:t.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,i),this.light.updateTransitions(o);}getProjection(){var e;return null===(e=this.stylesheet)||void 0===e?void 0:e.projection}setProjection(e){if(this._checkLoaded(),this.projection){if(this.projection.name===e.type)return;this.projection.destroy(),delete this.projection;}this.stylesheet.projection=e,this._setProjectionInternal(e.type);}getSky(){var e;return null===(e=this.stylesheet)||void 0===e?void 0:e.sky}setSky(e,i={}){this._checkLoaded();const a=this.getSky();let r=!1;if(!e&&!a)return;if(e&&!a)r=!0;else if(!e&&a)r=!0;else for(const i in e)if(!t.bR(e[i],a[i])){r=!0;break}if(!r)return;const o={now:c(),transition:t.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=e,this.sky.setSky(e,i),this.sky.updateTransitions(o);}_setProjectionInternal(e){const i=function(e,i){const a={constrainOverride:i};if(Array.isArray(e)){const t=new di({type:e});return {projection:t,transform:new Ri(a),cameraHelper:new Di(t)}}switch(e){case "mercator":return {projection:new jt,transform:new $t(a),cameraHelper:new Yt};case "globe":{const e=new di({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return {projection:e,transform:new Ri(a),cameraHelper:new Di(e)}}case "vertical-perspective":return {projection:new hi,transform:new Si(a),cameraHelper:new zi};default:return t.w(`Unknown projection name: ${e}. Falling back to mercator projection.`),{projection:new jt,transform:new $t(a),cameraHelper:new Yt}}}(e,this.map.transformConstrain);this.projection=i.projection,this.map.migrateProjection(i.transform,i.cameraHelper);for(const e in this.tileManagers)this.tileManagers[e].reload();}_validate(e,i,a,r,o={}){return (!o||!1!==o.validate)&&Ai(this,e.call(t.C,t.e({key:i,style:this.serialize(),value:a,styleSpec:t.u},r)))}_remove(e=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),ce().off(se,this._rtlPluginLoaded);for(const e in this._layers)this._layers[e].setEventedParent(null);for(const e in this.tileManagers){const t=this.tileManagers[e];t.setEventedParent(null),t.onRemove(this.map);}this.imageManager.setEventedParent(null),this.setEventedParent(null),e&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(e);}_clearSource(e){this.tileManagers[e].clearTiles();}_reloadSource(e){this.tileManagers[e].resume(),this.tileManagers[e].reload();}_updateSources(e){for(const t in this.tileManagers)this.tileManagers[t].update(e,this.map.terrain);}_generateCollisionBoxes(){for(const e in this.tileManagers)this._reloadSource(e);}_updatePlacement(e,t,i,a,r=!1){let o=!1,s=!1;const n={};for(const t of this._order){const i=this._layers[t];if("symbol"!==i.type)continue;if(!n[i.source]){const e=this.tileManagers[i.source];n[i.source]=e.getRenderableIds(!0).map((t=>e.getTileByID(t))).sort(((e,t)=>t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)));}const a=this.crossTileSymbolIndex.addLayer(i,n[i.source],e.center.lng);o=o||a;}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((r=r||this._layerOrderChanged||0===i)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(c(),e.zoom))&&(this.pauseablePlacement=new It(e,this.map.terrain,this._order,r,t,i,a,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,n),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(c()),s=!0),o&&this.pauseablePlacement.placement.setStale()),s||o)for(const e of this._order){const t=this._layers[e];"symbol"===t.type&&this.placement.updateLayerOpacities(t,n[t.source]);}return !this.pauseablePlacement.isDone()||this.placement.hasTransitions(c())}_releaseSymbolFadeTiles(){for(const e in this.tileManagers)this.tileManagers[e].releaseSymbolFadeTiles();}getImages(e,i){return t._(this,void 0,void 0,(function*(){const e=yield this.imageManager.getImages(i.icons);this._updateTilesForChangedImages();const t=this.tileManagers[i.source];return t&&t.setDependencies(i.tileID.key,i.type,i.icons),e}))}getGlyphs(e,i){return t._(this,void 0,void 0,(function*(){const e=yield this.glyphManager.getGlyphs(i.stacks),t=this.tileManagers[i.source];return t&&t.setDependencies(i.tileID.key,i.type,[""]),e}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(e,i={}){this._checkLoaded(),e&&this._validate(t.C.glyphs,"glyphs",e,null,i)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=e,this.glyphManager.entries={},this.glyphManager.setURL(e));}getDashes(e,i){return t._(this,void 0,void 0,(function*(){const e={};for(const[t,a]of Object.entries(i.dashes))e[t]=this.lineAtlas.getDash(a.dasharray,a.round);return e}))}addSprite(e,i,a={},r){this._checkLoaded();const o=[{id:e,url:i}],s=[...x(this.stylesheet.sprite),...o];this._validate(t.C.sprite,"sprite",s,null,a)||(this.stylesheet.sprite=s,this._loadSprite(o,!0,r));}removeSprite(e){this._checkLoaded();const i=x(this.stylesheet.sprite);if(i.find((t=>t.id===e))){if(this._spritesImagesIds[e])for(const t of this._spritesImagesIds[e])this.imageManager.removeImage(t),this._changedImages[t]=!0;i.splice(i.findIndex((t=>t.id===e)),1),this.stylesheet.sprite=i.length>0?i:void 0,delete this._spritesImagesIds[e],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new t.l("data",{dataType:"style"}));}else this.fire(new t.k(new Error(`Sprite "${e}" doesn't exists on this map.`)));}getSprite(){return x(this.stylesheet.sprite)}setSprite(e,i={},a){this._checkLoaded(),e&&this._validate(t.C.sprite,"sprite",e,null,i)||(this.stylesheet.sprite=e,e?this._loadSprite(e,!0,a):(this._unloadSprite(),a&&a(null)));}destroy(){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null);for(const e in this.tileManagers){const t=this.tileManagers[e];t.setEventedParent(null),t.onRemove(this.map);}this.tileManagers={},this.imageManager&&(this.imageManager.setEventedParent(null),this.imageManager.destroy(),this._availableImages=[],this._spritesImagesIds={}),this.glyphManager&&this.glyphManager.destroy();for(const e in this._layers){const t=this._layers[e];t.setEventedParent(null),t.onRemove&&t.onRemove(this.map);}this._setInitialValues(),this.setEventedParent(null),this.dispatcher.unregisterMessageHandler("GG"),this.dispatcher.unregisterMessageHandler("GI"),this.dispatcher.unregisterMessageHandler("GDA"),this.dispatcher.remove(!0),this._listeners={},this._oneTimeListeners={};}}var Fi=t.aU([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Bi{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null;}bind(e,t,i,a,r,o,s,n,l){this.context=e;let c=this.boundPaintVertexBuffers.length!==a.length;for(let e=0;!c&&e<a.length;e++)this.boundPaintVertexBuffers[e]!==a[e]&&(c=!0);!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==i||c||this.boundIndexBuffer!==r||this.boundVertexOffset!==o||this.boundDynamicVertexBuffer!==s||this.boundDynamicVertexBuffer2!==n||this.boundDynamicVertexBuffer3!==l?this.freshBind(t,i,a,r,o,s,n,l):(e.bindVertexArray.set(this.vao),s&&s.bind(),r&&r.dynamicDraw&&r.bind(),n&&n.bind(),l&&l.bind());}freshBind(e,t,i,a,r,o,s,n){const l=e.numAttributes,c=this.context,h=c.gl;this.vao&&this.destroy(),this.vao=c.createVertexArray(),c.bindVertexArray.set(this.vao),this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=a,this.boundVertexOffset=r,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=s,this.boundDynamicVertexBuffer3=n,t.enableAttributes(h,e);for(const t of i)t.enableAttributes(h,e);o&&o.enableAttributes(h,e),s&&s.enableAttributes(h,e),n&&n.enableAttributes(h,e),t.bind(),t.setVertexAttribPointers(h,e,r);for(const t of i)t.bind(),t.setVertexAttribPointers(h,e,r);o&&(o.bind(),o.setVertexAttribPointers(h,e,r)),a&&a.bind(),s&&(s.bind(),s.setVertexAttribPointers(h,e,r)),n&&(n.bind(),n.setVertexAttribPointers(h,e,r)),c.currentNumAttributes=l;}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null);}}const Oi=(e,i,a,r,o)=>({u_texture:0,u_ele_delta:e,u_fog_matrix:i,u_fog_color:a?a.properties.get("fog-color"):t.bp.white,u_fog_ground_blend:a?a.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:o?0:a?a.calculateFogBlendOpacity(r):0,u_horizon_color:a?a.properties.get("horizon-color"):t.bp.white,u_horizon_fog_blend:a?a.properties.get("horizon-fog-blend"):1,u_is_globe_mode:o?1:0}),ji={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Ni(e){const t=[];for(let i=0;i<e.length;i++){if(null===e[i])continue;const a=e[i].split(" ");t.push(a.pop());}return t}class Zi{constructor(e,i,a,r,o,s,n,l,c=[]){const h=e.gl;this.program=h.createProgram();const u=Ni(i.staticAttributes),d=a?a.getBinderAttributes():[],_=u.concat(d),p=At.prelude.staticUniforms?Ni(At.prelude.staticUniforms):[],m=n.staticUniforms?Ni(n.staticUniforms):[],f=i.staticUniforms?Ni(i.staticUniforms):[],g=a?a.getBinderUniforms():[],v=p.concat(m).concat(f).concat(g),x=[];for(const e of v)x.indexOf(e)<0&&x.push(e);const b=a?a.defines():[];oi(h)&&b.unshift("#version 300 es"),o&&b.push("#define OVERDRAW_INSPECTOR;"),s&&b.push("#define TERRAIN3D;"),l&&b.push(l),c&&b.push(...c);let y=b.concat(At.prelude.fragmentSource,n.fragmentSource,i.fragmentSource).join("\n"),w=b.concat(At.prelude.vertexSource,n.vertexSource,i.vertexSource).join("\n");oi(h)||(y=function(e){return e.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(y),w=function(e){return e.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(w));const T=h.createShader(h.FRAGMENT_SHADER);if(h.isContextLost())return void(this.failedToCreate=!0);if(h.shaderSource(T,y),h.compileShader(T),!h.getShaderParameter(T,h.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${h.getShaderInfoLog(T)}`);h.attachShader(this.program,T);const P=h.createShader(h.VERTEX_SHADER);if(h.isContextLost())return void(this.failedToCreate=!0);if(h.shaderSource(P,w),h.compileShader(P),!h.getShaderParameter(P,h.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${h.getShaderInfoLog(P)}`);h.attachShader(this.program,P),this.attributes={};const C={};this.numAttributes=_.length;for(let e=0;e<this.numAttributes;e++)_[e]&&(h.bindAttribLocation(this.program,e,_[e]),this.attributes[_[e]]=e);if(h.linkProgram(this.program),!h.getProgramParameter(this.program,h.LINK_STATUS))throw new Error(`Program failed to link: ${h.getProgramInfoLog(this.program)}`);h.deleteShader(P),h.deleteShader(T);for(let e=0;e<x.length;e++){const t=x[e];if(t&&!C[t]){const e=h.getUniformLocation(this.program,t);e&&(C[t]=e);}}this.fixedUniforms=r(e,C),this.terrainUniforms=((e,i)=>({u_depth:new t.b_(e,i.u_depth),u_terrain:new t.b_(e,i.u_terrain),u_terrain_dim:new t.bq(e,i.u_terrain_dim),u_terrain_matrix:new t.c0(e,i.u_terrain_matrix),u_terrain_unpack:new t.c1(e,i.u_terrain_unpack),u_terrain_exaggeration:new t.bq(e,i.u_terrain_exaggeration)}))(e,C),this.projectionUniforms=((e,i)=>({u_projection_matrix:new t.c0(e,i.u_projection_matrix),u_projection_tile_mercator_coords:new t.c1(e,i.u_projection_tile_mercator_coords),u_projection_clipping_plane:new t.c1(e,i.u_projection_clipping_plane),u_projection_transition:new t.bq(e,i.u_projection_transition),u_projection_fallback_matrix:new t.c0(e,i.u_projection_fallback_matrix)}))(e,C),this.binderUniforms=a?a.getUniforms(e,C):[];}draw(e,t,i,a,r,o,s,n,l,c,h,u,d,_,p,m,f,g,v){const x=e.gl;if(this.failedToCreate)return;if(e.program.set(this.program),e.setDepthMode(i),e.setStencilMode(a),e.setColorMode(r),e.setCullFace(o),n){e.activeTexture.set(x.TEXTURE2),x.bindTexture(x.TEXTURE_2D,n.depthTexture),e.activeTexture.set(x.TEXTURE3),x.bindTexture(x.TEXTURE_2D,n.texture);for(const e in this.terrainUniforms)this.terrainUniforms[e].set(n[e]);}if(l)for(const e in l)this.projectionUniforms[ji[e]].set(l[e]);if(s)for(const e in this.fixedUniforms)this.fixedUniforms[e].set(s[e]);m&&m.setUniforms(e,this.binderUniforms,_,{zoom:p});let b=0;switch(t){case x.LINES:b=2;break;case x.TRIANGLES:b=3;break;case x.LINE_STRIP:b=1;}for(const i of d.get()){const a=i.vaos||(i.vaos={});(a[c]||(a[c]=new Bi)).bind(e,this,h,m?m.getPaintVertexBuffers():[],u,i.vertexOffset,f,g,v),x.drawElements(t,i.primitiveLength*b,x.UNSIGNED_SHORT,i.primitiveOffset*b*2);}}}function Gi(e,i,a){const r=1/t.aN(a,1,i.transform.tileZoom),o=Math.pow(2,a.tileID.overscaledZ),s=a.tileSize*Math.pow(2,i.transform.tileZoom)/o,n=s*(a.tileID.canonical.x+a.tileID.wrap*o),l=s*a.tileID.canonical.y;return {u_image:0,u_texsize:a.imageAtlasTexture.size,u_scale:[r,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[n>>16,l>>16],u_pixel_coord_lower:[65535&n,65535&l]}}const Ui=(e,i,a,r)=>{const o=e.style.light,s=o.properties.get("position"),n=[s.x,s.y,s.z],l=t.c4();"viewport"===o.properties.get("anchor")&&t.c5(l,e.transform.bearingInRadians),t.c6(n,n,l);const c=e.transform.transformLightDirection(n),h=o.properties.get("color");return {u_lightpos:n,u_lightpos_globe:c,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[h.r,h.g,h.b],u_vertical_gradient:+i,u_opacity:a,u_fill_translate:r}},Vi=(e,i,a,r,o,s,n)=>t.e(Ui(e,i,a,r),Gi(s,e,n),{u_height_factor:-Math.pow(2,o.overscaledZ)/n.tileSize/8}),qi=(e,i,a,r)=>t.e(Gi(i,e,a),{u_fill_translate:r}),Wi=(e,t)=>({u_world:e,u_fill_translate:t}),$i=(e,i,a,r,o)=>t.e(qi(e,i,a,o),{u_world:r}),Hi=(e,i,a,r,o)=>{const s=e.transform;let n,l,c=0;if("map"===a.paint.get("circle-pitch-alignment")){const e=t.aN(i,1,s.zoom);n=!0,l=[e,e],c=e/(t.a5*Math.pow(2,i.tileID.overscaledZ))*2*Math.PI*o;}else n=!1,l=s.pixelsToGLUnits;return {u_camera_to_center_distance:s.cameraToCenterDistance,u_scale_with_map:+("map"===a.paint.get("circle-pitch-scale")),u_pitch_with_map:+n,u_device_pixel_ratio:e.pixelRatio,u_extrude_scale:l,u_globe_extrude_scale:c,u_translate:r}},Xi=e=>({u_pixel_extrude_scale:[1/e.width,1/e.height]}),Ki=e=>({u_viewport_size:[e.width,e.height]}),Yi=(e,t=1)=>({u_color:e,u_overlay:0,u_overlay_scale:t}),Qi=(e,i,a,r)=>{const o=t.aN(e,1,i)/(t.a5*Math.pow(2,e.tileID.overscaledZ))*2*Math.PI*r;return {u_extrude_scale:t.aN(e,1,i),u_intensity:a,u_globe_extrude_scale:o}},Ji=(e,i,a,r)=>{const o=t.N();t.c7(o,0,e.width,e.height,0,0,1);const s=e.context.gl;return {u_matrix:o,u_world:[s.drawingBufferWidth,s.drawingBufferHeight],u_image:a,u_color_ramp:r,u_opacity:i.paint.get("heatmap-opacity")}},ea=(e,t,i)=>{const a=i.paint.get("hillshade-accent-color");let r;switch(i.paint.get("hillshade-method")){case "basic":r=4;break;case "combined":r=1;break;case "igor":r=2;break;case "multidirectional":r=3;break;default:r=0;}const o=i.getIlluminationProperties();for(let t=0;t<o.directionRadians.length;t++)"viewport"===i.paint.get("hillshade-illumination-anchor")&&(o.directionRadians[t]+=e.transform.bearingInRadians);return {u_image:0,u_latrange:ia(0,t.tileID),u_exaggeration:i.paint.get("hillshade-exaggeration"),u_altitudes:o.altitudeRadians,u_azimuths:o.directionRadians,u_accent:a,u_method:r,u_highlights:o.highlightColor,u_shadows:o.shadowColor}},ta=(e,i)=>{const a=i.stride,r=t.N();return t.c7(r,0,t.a5,-t.a5,0,0,1),t.O(r,r,[0,-t.a5,0]),{u_matrix:r,u_image:1,u_dimension:[a,a],u_zoom:e.overscaledZ,u_unpack:i.getUnpackVector()}};function ia(e,i){const a=Math.pow(2,i.canonical.z),r=i.canonical.y;return [new t.a9(0,r/a).toLngLat().lat,new t.a9(0,(r+1)/a).toLngLat().lat]}const aa=(e,t,i=0)=>({u_image:0,u_unpack:t.getUnpackVector(),u_dimension:[t.stride,t.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:i,u_opacity:e.paint.get("color-relief-opacity")}),ra=(e,i,a,r)=>{const o=e.transform;return {u_translation:ha(e,i,a),u_ratio:r/t.aN(i,1,o.zoom),u_device_pixel_ratio:e.pixelRatio,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},oa=(e,i,a,r,o)=>t.e(ra(e,i,a,r),{u_image:0,u_image_height:o}),sa=(e,i,a,r,o)=>{const s=e.transform,n=ca(i,s);return {u_translation:ha(e,i,a),u_texsize:i.imageAtlasTexture.size,u_ratio:r/t.aN(i,1,s.zoom),u_device_pixel_ratio:e.pixelRatio,u_image:0,u_scale:[n,o.fromScale,o.toScale],u_fade:o.t,u_units_to_pixels:[1/s.pixelsToGLUnits[0],1/s.pixelsToGLUnits[1]]}},na=(e,i,a,r,o)=>{const s=ca(i,e.transform);return t.e(ra(e,i,a,r),{u_tileratio:s,u_crossfade_from:o.fromScale,u_crossfade_to:o.toScale,u_image:0,u_mix:o.t,u_lineatlas_width:e.lineAtlas.width,u_lineatlas_height:e.lineAtlas.height})},la=(e,i,a,r,o,s)=>{const n=ca(i,e.transform);return t.e(ra(e,i,a,r),{u_image:0,u_image_height:s,u_tileratio:n,u_crossfade_from:o.fromScale,u_crossfade_to:o.toScale,u_image_dash:1,u_mix:o.t,u_lineatlas_width:e.lineAtlas.width,u_lineatlas_height:e.lineAtlas.height})};function ca(e,i){return 1/t.aN(e,1,i.tileZoom)}function ha(e,i,a){return t.aO(e.transform,i,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"))}const ua=(e,t,i,a,r)=>{return {u_tl_parent:e,u_scale_parent:t,u_buffer_scale:1,u_fade_t:i.mix,u_opacity:i.opacity*a.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:a.paint.get("raster-brightness-min"),u_brightness_high:a.paint.get("raster-brightness-max"),u_saturation_factor:(s=a.paint.get("raster-saturation"),s>0?1-1/(1.001-s):-s),u_contrast_factor:(o=a.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:da(a.paint.get("raster-hue-rotate")),u_coords_top:[r[0].x,r[0].y,r[1].x,r[1].y],u_coords_bottom:[r[3].x,r[3].y,r[2].x,r[2].y]};var o,s;};function da(e){e*=Math.PI/180;const t=Math.sin(e),i=Math.cos(e);return [(2*i+1)/3,(-Math.sqrt(3)*t-i+1)/3,(Math.sqrt(3)*t-i+1)/3]}const _a=(e,t,i,a,r,o,s,n,l,c,h,u,d)=>{const _=s.transform;return {u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:_.cameraToCenterDistance,u_pitch:_.pitch/360*2*Math.PI,u_rotate_symbol:+i,u_aspect_ratio:_.width/_.height,u_fade_change:s.options.fadeDuration?s.symbolFadeChange:1,u_label_plane_matrix:n,u_coord_matrix:l,u_is_text:+h,u_pitch_with_map:+a,u_is_along_line:r,u_is_variable_anchor:o,u_texsize:u,u_texture:0,u_translation:c,u_pitched_scale:d}},pa=(e,i,a,r,o,s,n,l,c,h,u,d,_,p)=>{const m=n.transform;return t.e(_a(e,i,a,r,o,s,n,l,c,h,u,d,p),{u_gamma_scale:r?Math.cos(m.pitch*Math.PI/180)*m.cameraToCenterDistance:1,u_device_pixel_ratio:n.pixelRatio,u_is_halo:1})},ma=(e,i,a,r,o,s,n,l,c,h,u,d,_)=>t.e(pa(e,i,a,r,o,s,n,l,c,h,!0,u,0,_),{u_texsize_icon:d,u_texture_icon:1}),fa=(e,t)=>({u_opacity:e,u_color:t}),ga=(e,i,a,r,o)=>t.e(function(e,i,a,r){const o=a.imageManager.getPattern(e.from.toString()),s=a.imageManager.getPattern(e.to.toString()),{width:n,height:l}=a.imageManager.getPixelSize(),c=Math.pow(2,r.tileID.overscaledZ),h=r.tileSize*Math.pow(2,a.transform.tileZoom)/c,u=h*(r.tileID.canonical.x+r.tileID.wrap*c),d=h*r.tileID.canonical.y;return {u_image:0,u_pattern_tl_a:o.tl,u_pattern_br_a:o.br,u_pattern_tl_b:s.tl,u_pattern_br_b:s.br,u_texsize:[n,l],u_mix:i.t,u_pattern_size_a:o.displaySize,u_pattern_size_b:s.displaySize,u_scale_a:i.fromScale,u_scale_b:i.toScale,u_tile_units_to_pixels:1/t.aN(r,1,a.transform.tileZoom),u_pixel_coord_upper:[u>>16,d>>16],u_pixel_coord_lower:[65535&u,65535&d]}}(a,o,i,r),{u_opacity:e}),va=(e,t)=>{},xa={fillExtrusion:(e,i)=>({u_lightpos:new t.c2(e,i.u_lightpos),u_lightpos_globe:new t.c2(e,i.u_lightpos_globe),u_lightintensity:new t.bq(e,i.u_lightintensity),u_lightcolor:new t.c2(e,i.u_lightcolor),u_vertical_gradient:new t.bq(e,i.u_vertical_gradient),u_opacity:new t.bq(e,i.u_opacity),u_fill_translate:new t.c3(e,i.u_fill_translate)}),fillExtrusionPattern:(e,i)=>({u_lightpos:new t.c2(e,i.u_lightpos),u_lightpos_globe:new t.c2(e,i.u_lightpos_globe),u_lightintensity:new t.bq(e,i.u_lightintensity),u_lightcolor:new t.c2(e,i.u_lightcolor),u_vertical_gradient:new t.bq(e,i.u_vertical_gradient),u_height_factor:new t.bq(e,i.u_height_factor),u_opacity:new t.bq(e,i.u_opacity),u_fill_translate:new t.c3(e,i.u_fill_translate),u_image:new t.b_(e,i.u_image),u_texsize:new t.c3(e,i.u_texsize),u_pixel_coord_upper:new t.c3(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.c3(e,i.u_pixel_coord_lower),u_scale:new t.c2(e,i.u_scale),u_fade:new t.bq(e,i.u_fade)}),fill:(e,i)=>({u_fill_translate:new t.c3(e,i.u_fill_translate)}),fillPattern:(e,i)=>({u_image:new t.b_(e,i.u_image),u_texsize:new t.c3(e,i.u_texsize),u_pixel_coord_upper:new t.c3(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.c3(e,i.u_pixel_coord_lower),u_scale:new t.c2(e,i.u_scale),u_fade:new t.bq(e,i.u_fade),u_fill_translate:new t.c3(e,i.u_fill_translate)}),fillOutline:(e,i)=>({u_world:new t.c3(e,i.u_world),u_fill_translate:new t.c3(e,i.u_fill_translate)}),fillOutlinePattern:(e,i)=>({u_world:new t.c3(e,i.u_world),u_image:new t.b_(e,i.u_image),u_texsize:new t.c3(e,i.u_texsize),u_pixel_coord_upper:new t.c3(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.c3(e,i.u_pixel_coord_lower),u_scale:new t.c2(e,i.u_scale),u_fade:new t.bq(e,i.u_fade),u_fill_translate:new t.c3(e,i.u_fill_translate)}),circle:(e,i)=>({u_camera_to_center_distance:new t.bq(e,i.u_camera_to_center_distance),u_scale_with_map:new t.b_(e,i.u_scale_with_map),u_pitch_with_map:new t.b_(e,i.u_pitch_with_map),u_extrude_scale:new t.c3(e,i.u_extrude_scale),u_device_pixel_ratio:new t.bq(e,i.u_device_pixel_ratio),u_globe_extrude_scale:new t.bq(e,i.u_globe_extrude_scale),u_translate:new t.c3(e,i.u_translate)}),collisionBox:(e,i)=>({u_pixel_extrude_scale:new t.c3(e,i.u_pixel_extrude_scale)}),collisionCircle:(e,i)=>({u_viewport_size:new t.c3(e,i.u_viewport_size)}),debug:(e,i)=>({u_color:new t.b$(e,i.u_color),u_overlay:new t.b_(e,i.u_overlay),u_overlay_scale:new t.bq(e,i.u_overlay_scale)}),depth:va,clippingMask:va,heatmap:(e,i)=>({u_extrude_scale:new t.bq(e,i.u_extrude_scale),u_intensity:new t.bq(e,i.u_intensity),u_globe_extrude_scale:new t.bq(e,i.u_globe_extrude_scale)}),heatmapTexture:(e,i)=>({u_matrix:new t.c0(e,i.u_matrix),u_world:new t.c3(e,i.u_world),u_image:new t.b_(e,i.u_image),u_color_ramp:new t.b_(e,i.u_color_ramp),u_opacity:new t.bq(e,i.u_opacity)}),hillshade:(e,i)=>({u_image:new t.b_(e,i.u_image),u_latrange:new t.c3(e,i.u_latrange),u_exaggeration:new t.bq(e,i.u_exaggeration),u_altitudes:new t.c9(e,i.u_altitudes),u_azimuths:new t.c9(e,i.u_azimuths),u_accent:new t.b$(e,i.u_accent),u_method:new t.b_(e,i.u_method),u_shadows:new t.c8(e,i.u_shadows),u_highlights:new t.c8(e,i.u_highlights)}),hillshadePrepare:(e,i)=>({u_matrix:new t.c0(e,i.u_matrix),u_image:new t.b_(e,i.u_image),u_dimension:new t.c3(e,i.u_dimension),u_zoom:new t.bq(e,i.u_zoom),u_unpack:new t.c1(e,i.u_unpack)}),colorRelief:(e,i)=>({u_image:new t.b_(e,i.u_image),u_unpack:new t.c1(e,i.u_unpack),u_dimension:new t.c3(e,i.u_dimension),u_elevation_stops:new t.b_(e,i.u_elevation_stops),u_color_stops:new t.b_(e,i.u_color_stops),u_color_ramp_size:new t.b_(e,i.u_color_ramp_size),u_opacity:new t.bq(e,i.u_opacity)}),line:(e,i)=>({u_translation:new t.c3(e,i.u_translation),u_ratio:new t.bq(e,i.u_ratio),u_device_pixel_ratio:new t.bq(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.c3(e,i.u_units_to_pixels)}),lineGradient:(e,i)=>({u_translation:new t.c3(e,i.u_translation),u_ratio:new t.bq(e,i.u_ratio),u_device_pixel_ratio:new t.bq(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.c3(e,i.u_units_to_pixels),u_image:new t.b_(e,i.u_image),u_image_height:new t.bq(e,i.u_image_height)}),linePattern:(e,i)=>({u_translation:new t.c3(e,i.u_translation),u_texsize:new t.c3(e,i.u_texsize),u_ratio:new t.bq(e,i.u_ratio),u_device_pixel_ratio:new t.bq(e,i.u_device_pixel_ratio),u_image:new t.b_(e,i.u_image),u_units_to_pixels:new t.c3(e,i.u_units_to_pixels),u_scale:new t.c2(e,i.u_scale),u_fade:new t.bq(e,i.u_fade)}),lineSDF:(e,i)=>({u_translation:new t.c3(e,i.u_translation),u_ratio:new t.bq(e,i.u_ratio),u_device_pixel_ratio:new t.bq(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.c3(e,i.u_units_to_pixels),u_image:new t.b_(e,i.u_image),u_mix:new t.bq(e,i.u_mix),u_tileratio:new t.bq(e,i.u_tileratio),u_crossfade_from:new t.bq(e,i.u_crossfade_from),u_crossfade_to:new t.bq(e,i.u_crossfade_to),u_lineatlas_width:new t.bq(e,i.u_lineatlas_width),u_lineatlas_height:new t.bq(e,i.u_lineatlas_height)}),lineGradientSDF:(e,i)=>({u_translation:new t.c3(e,i.u_translation),u_ratio:new t.bq(e,i.u_ratio),u_device_pixel_ratio:new t.bq(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.c3(e,i.u_units_to_pixels),u_image:new t.b_(e,i.u_image),u_image_height:new t.bq(e,i.u_image_height),u_tileratio:new t.bq(e,i.u_tileratio),u_crossfade_from:new t.bq(e,i.u_crossfade_from),u_crossfade_to:new t.bq(e,i.u_crossfade_to),u_image_dash:new t.b_(e,i.u_image_dash),u_mix:new t.bq(e,i.u_mix),u_lineatlas_width:new t.bq(e,i.u_lineatlas_width),u_lineatlas_height:new t.bq(e,i.u_lineatlas_height)}),raster:(e,i)=>({u_tl_parent:new t.c3(e,i.u_tl_parent),u_scale_parent:new t.bq(e,i.u_scale_parent),u_buffer_scale:new t.bq(e,i.u_buffer_scale),u_fade_t:new t.bq(e,i.u_fade_t),u_opacity:new t.bq(e,i.u_opacity),u_image0:new t.b_(e,i.u_image0),u_image1:new t.b_(e,i.u_image1),u_brightness_low:new t.bq(e,i.u_brightness_low),u_brightness_high:new t.bq(e,i.u_brightness_high),u_saturation_factor:new t.bq(e,i.u_saturation_factor),u_contrast_factor:new t.bq(e,i.u_contrast_factor),u_spin_weights:new t.c2(e,i.u_spin_weights),u_coords_top:new t.c1(e,i.u_coords_top),u_coords_bottom:new t.c1(e,i.u_coords_bottom)}),symbolIcon:(e,i)=>({u_is_size_zoom_constant:new t.b_(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.b_(e,i.u_is_size_feature_constant),u_size_t:new t.bq(e,i.u_size_t),u_size:new t.bq(e,i.u_size),u_camera_to_center_distance:new t.bq(e,i.u_camera_to_center_distance),u_pitch:new t.bq(e,i.u_pitch),u_rotate_symbol:new t.b_(e,i.u_rotate_symbol),u_aspect_ratio:new t.bq(e,i.u_aspect_ratio),u_fade_change:new t.bq(e,i.u_fade_change),u_label_plane_matrix:new t.c0(e,i.u_label_plane_matrix),u_coord_matrix:new t.c0(e,i.u_coord_matrix),u_is_text:new t.b_(e,i.u_is_text),u_pitch_with_map:new t.b_(e,i.u_pitch_with_map),u_is_along_line:new t.b_(e,i.u_is_along_line),u_is_variable_anchor:new t.b_(e,i.u_is_variable_anchor),u_texsize:new t.c3(e,i.u_texsize),u_texture:new t.b_(e,i.u_texture),u_translation:new t.c3(e,i.u_translation),u_pitched_scale:new t.bq(e,i.u_pitched_scale)}),symbolSDF:(e,i)=>({u_is_size_zoom_constant:new t.b_(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.b_(e,i.u_is_size_feature_constant),u_size_t:new t.bq(e,i.u_size_t),u_size:new t.bq(e,i.u_size),u_camera_to_center_distance:new t.bq(e,i.u_camera_to_center_distance),u_pitch:new t.bq(e,i.u_pitch),u_rotate_symbol:new t.b_(e,i.u_rotate_symbol),u_aspect_ratio:new t.bq(e,i.u_aspect_ratio),u_fade_change:new t.bq(e,i.u_fade_change),u_label_plane_matrix:new t.c0(e,i.u_label_plane_matrix),u_coord_matrix:new t.c0(e,i.u_coord_matrix),u_is_text:new t.b_(e,i.u_is_text),u_pitch_with_map:new t.b_(e,i.u_pitch_with_map),u_is_along_line:new t.b_(e,i.u_is_along_line),u_is_variable_anchor:new t.b_(e,i.u_is_variable_anchor),u_texsize:new t.c3(e,i.u_texsize),u_texture:new t.b_(e,i.u_texture),u_gamma_scale:new t.bq(e,i.u_gamma_scale),u_device_pixel_ratio:new t.bq(e,i.u_device_pixel_ratio),u_is_halo:new t.b_(e,i.u_is_halo),u_translation:new t.c3(e,i.u_translation),u_pitched_scale:new t.bq(e,i.u_pitched_scale)}),symbolTextAndIcon:(e,i)=>({u_is_size_zoom_constant:new t.b_(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.b_(e,i.u_is_size_feature_constant),u_size_t:new t.bq(e,i.u_size_t),u_size:new t.bq(e,i.u_size),u_camera_to_center_distance:new t.bq(e,i.u_camera_to_center_distance),u_pitch:new t.bq(e,i.u_pitch),u_rotate_symbol:new t.b_(e,i.u_rotate_symbol),u_aspect_ratio:new t.bq(e,i.u_aspect_ratio),u_fade_change:new t.bq(e,i.u_fade_change),u_label_plane_matrix:new t.c0(e,i.u_label_plane_matrix),u_coord_matrix:new t.c0(e,i.u_coord_matrix),u_is_text:new t.b_(e,i.u_is_text),u_pitch_with_map:new t.b_(e,i.u_pitch_with_map),u_is_along_line:new t.b_(e,i.u_is_along_line),u_is_variable_anchor:new t.b_(e,i.u_is_variable_anchor),u_texsize:new t.c3(e,i.u_texsize),u_texsize_icon:new t.c3(e,i.u_texsize_icon),u_texture:new t.b_(e,i.u_texture),u_texture_icon:new t.b_(e,i.u_texture_icon),u_gamma_scale:new t.bq(e,i.u_gamma_scale),u_device_pixel_ratio:new t.bq(e,i.u_device_pixel_ratio),u_is_halo:new t.b_(e,i.u_is_halo),u_translation:new t.c3(e,i.u_translation),u_pitched_scale:new t.bq(e,i.u_pitched_scale)}),background:(e,i)=>({u_opacity:new t.bq(e,i.u_opacity),u_color:new t.b$(e,i.u_color)}),backgroundPattern:(e,i)=>({u_opacity:new t.bq(e,i.u_opacity),u_image:new t.b_(e,i.u_image),u_pattern_tl_a:new t.c3(e,i.u_pattern_tl_a),u_pattern_br_a:new t.c3(e,i.u_pattern_br_a),u_pattern_tl_b:new t.c3(e,i.u_pattern_tl_b),u_pattern_br_b:new t.c3(e,i.u_pattern_br_b),u_texsize:new t.c3(e,i.u_texsize),u_mix:new t.bq(e,i.u_mix),u_pattern_size_a:new t.c3(e,i.u_pattern_size_a),u_pattern_size_b:new t.c3(e,i.u_pattern_size_b),u_scale_a:new t.bq(e,i.u_scale_a),u_scale_b:new t.bq(e,i.u_scale_b),u_pixel_coord_upper:new t.c3(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.c3(e,i.u_pixel_coord_lower),u_tile_units_to_pixels:new t.bq(e,i.u_tile_units_to_pixels)}),terrain:(e,i)=>({u_texture:new t.b_(e,i.u_texture),u_ele_delta:new t.bq(e,i.u_ele_delta),u_fog_matrix:new t.c0(e,i.u_fog_matrix),u_fog_color:new t.b$(e,i.u_fog_color),u_fog_ground_blend:new t.bq(e,i.u_fog_ground_blend),u_fog_ground_blend_opacity:new t.bq(e,i.u_fog_ground_blend_opacity),u_horizon_color:new t.b$(e,i.u_horizon_color),u_horizon_fog_blend:new t.bq(e,i.u_horizon_fog_blend),u_is_globe_mode:new t.bq(e,i.u_is_globe_mode)}),terrainDepth:(e,i)=>({u_ele_delta:new t.bq(e,i.u_ele_delta)}),terrainCoords:(e,i)=>({u_texture:new t.b_(e,i.u_texture),u_terrain_coords_id:new t.bq(e,i.u_terrain_coords_id),u_ele_delta:new t.bq(e,i.u_ele_delta)}),projectionErrorMeasurement:(e,i)=>({u_input:new t.bq(e,i.u_input),u_output_expected:new t.bq(e,i.u_output_expected)}),atmosphere:(e,i)=>({u_sun_pos:new t.c2(e,i.u_sun_pos),u_atmosphere_blend:new t.bq(e,i.u_atmosphere_blend),u_globe_position:new t.c2(e,i.u_globe_position),u_globe_radius:new t.bq(e,i.u_globe_radius),u_inv_proj_matrix:new t.c0(e,i.u_inv_proj_matrix)}),sky:(e,i)=>({u_sky_color:new t.b$(e,i.u_sky_color),u_horizon_color:new t.b$(e,i.u_horizon_color),u_horizon:new t.c3(e,i.u_horizon),u_horizon_normal:new t.c3(e,i.u_horizon_normal),u_sky_horizon_blend:new t.bq(e,i.u_sky_horizon_blend),u_sky_blend:new t.bq(e,i.u_sky_blend)})};class ba{constructor(e,t,i){this.context=e;const a=e.gl;this.buffer=a.createBuffer(),this.dynamicDraw=Boolean(i),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?a.DYNAMIC_DRAW:a.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer;}bind(){this.context.bindElementBuffer.set(this.buffer);}updateData(e){const t=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer);}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer);}}const ya={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class wa{constructor(e,t,i,a){this.length=t.length,this.attributes=i,this.itemSize=t.bytesPerElement,this.dynamicDraw=a,this.context=e;const r=e.gl;this.buffer=r.createBuffer(),e.bindVertexBuffer.set(this.buffer),r.bufferData(r.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer;}bind(){this.context.bindVertexBuffer.set(this.buffer);}updateData(e){if(e.length!==this.length)throw new Error(`Length of new data is ${e.length}, which doesn't match current length of ${this.length}`);const t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer);}enableAttributes(e,t){for(let i=0;i<this.attributes.length;i++){const a=t.attributes[this.attributes[i].name];void 0!==a&&e.enableVertexAttribArray(a);}}setVertexAttribPointers(e,t,i){for(let a=0;a<this.attributes.length;a++){const r=this.attributes[a],o=t.attributes[r.name];void 0!==o&&e.vertexAttribPointer(o,r.components,e[ya[r.type]],!1,this.itemSize,r.offset+this.itemSize*(i||0));}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer);}}class Ta{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1;}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default);}}class Pa extends Ta{getDefault(){return t.bp.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1);}}class Ca extends Ta{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1);}}class Ia extends Ta{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1);}}class Ma extends Ta{getDefault(){return [!0,!0,!0,!0]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1);}}class Ea extends Ta{getDefault(){return !0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1);}}class Sa extends Ta{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1);}}class Ra extends Ta{getDefault(){return {func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1);}}class za extends Ta{getDefault(){const e=this.gl;return [e.KEEP,e.KEEP,e.KEEP]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1);}}class Da extends Ta{getDefault(){return !1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1;}}class Aa extends Ta{getDefault(){return [0,1]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1);}}class La extends Ta{getDefault(){return !1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1;}}class ka extends Ta{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1);}}class Fa extends Ta{getDefault(){return !1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1;}}class Ba extends Ta{getDefault(){const e=this.gl;return [e.ONE,e.ZERO]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1);}}class Oa extends Ta{getDefault(){return t.bp.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1);}}class ja extends Ta{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1);}}class Na extends Ta{getDefault(){return !1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1;}}class Za extends Ta{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1);}}class Ga extends Ta{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1);}}class Ua extends Ta{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1);}}class Va extends Ta{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1);}}class qa extends Ta{getDefault(){const e=this.gl;return [0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1);}}class Wa extends Ta{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1;}}class $a extends Ta{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1;}}class Ha extends Ta{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1;}}class Xa extends Ta{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1;}}class Ka extends Ta{getDefault(){return null}set(e){const t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1;}}class Ya extends Ta{getDefault(){return null}set(e){var t;if(e===this.current&&!this.dirty)return;const i=this.gl;oi(i)?i.bindVertexArray(e):null===(t=i.getExtension("OES_vertex_array_object"))||void 0===t||t.bindVertexArrayOES(e),this.current=e,this.dirty=!1;}}class Qa extends Ta{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1;}}class Ja extends Ta{getDefault(){return !1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1;}}class er extends Ta{getDefault(){return !1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1;}}class tr extends Ta{constructor(e,t){super(e),this.context=e,this.parent=t;}getDefault(){return null}}class ir extends tr{setDirty(){this.dirty=!0;}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1;}}class ar extends tr{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e),this.current=e,this.dirty=!1;}}class rr extends tr{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e),this.current=e,this.dirty=!1;}}const or="Framebuffer is not complete";class sr{constructor(e,t,i,a,r){this.context=e,this.width=t,this.height=i;const o=e.gl,s=this.framebuffer=o.createFramebuffer();if(this.colorAttachment=new ir(e,s),a)this.depthAttachment=r?new rr(e,s):new ar(e,s);else if(r)throw new Error("Stencil cannot be set without depth");if(o.checkFramebufferStatus(o.FRAMEBUFFER)!==o.FRAMEBUFFER_COMPLETE)throw new Error(or)}destroy(){const e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){const t=this.depthAttachment.get();t&&e.deleteRenderbuffer(t);}e.deleteFramebuffer(this.framebuffer);}}class nr{constructor(e){var t,i;if(this.gl=e,this.clearColor=new Pa(this),this.clearDepth=new Ca(this),this.clearStencil=new Ia(this),this.colorMask=new Ma(this),this.depthMask=new Ea(this),this.stencilMask=new Sa(this),this.stencilFunc=new Ra(this),this.stencilOp=new za(this),this.stencilTest=new Da(this),this.depthRange=new Aa(this),this.depthTest=new La(this),this.depthFunc=new ka(this),this.blend=new Fa(this),this.blendFunc=new Ba(this),this.blendColor=new Oa(this),this.blendEquation=new ja(this),this.cullFace=new Na(this),this.cullFaceSide=new Za(this),this.frontFace=new Ga(this),this.program=new Ua(this),this.activeTexture=new Va(this),this.viewport=new qa(this),this.bindFramebuffer=new Wa(this),this.bindRenderbuffer=new $a(this),this.bindTexture=new Ha(this),this.bindVertexBuffer=new Xa(this),this.bindElementBuffer=new Ka(this),this.bindVertexArray=new Ya(this),this.pixelStoreUnpack=new Qa(this),this.pixelStoreUnpackPremultiplyAlpha=new Ja(this),this.pixelStoreUnpackFlipY=new er(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),oi(e)){this.HALF_FLOAT=e.HALF_FLOAT;const a=e.getExtension("EXT_color_buffer_half_float");this.RGBA16F=null!==(t=e.RGBA16F)&&void 0!==t?t:null==a?void 0:a.RGBA16F_EXT,this.RGB16F=null!==(i=e.RGB16F)&&void 0!==i?i:null==a?void 0:a.RGB16F_EXT,e.getExtension("EXT_color_buffer_float");}else {e.getExtension("EXT_color_buffer_half_float"),e.getExtension("OES_texture_half_float_linear");const t=e.getExtension("OES_texture_half_float");this.HALF_FLOAT=null==t?void 0:t.HALF_FLOAT_OES;}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault();}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0;}createIndexBuffer(e,t){return new ba(this,e,t)}createVertexBuffer(e,t,i){return new wa(this,e,t,i)}createRenderbuffer(e,t,i){const a=this.gl,r=a.createRenderbuffer();return this.bindRenderbuffer.set(r),a.renderbufferStorage(a.RENDERBUFFER,e,t,i),this.bindRenderbuffer.set(null),r}createFramebuffer(e,t,i,a){return new sr(this,e,t,i,a)}clear({color:e,depth:t,stencil:i}){const a=this.gl;let r=0;e&&(r|=a.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==t&&(r|=a.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(t),this.depthMask.set(!0)),void 0!==i&&(r|=a.STENCIL_BUFFER_BIT,this.clearStencil.set(i),this.stencilMask.set(255)),a.clear(r);}setCullFace(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace));}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1);}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1);}setColorMode(e){t.bR(e.blendFunction,Qt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask);}createVertexArray(){var e;return oi(this.gl)?this.gl.createVertexArray():null===(e=this.gl.getExtension("OES_vertex_array_object"))||void 0===e?void 0:e.createVertexArrayOES()}deleteVertexArray(e){var t;return oi(this.gl)?this.gl.deleteVertexArray(e):null===(t=this.gl.getExtension("OES_vertex_array_object"))||void 0===t?void 0:t.deleteVertexArrayOES(e)}unbindVAO(){this.bindVertexArray.set(null);}}let lr;function cr(e,i,a,r,o){const s=e.context,n=e.transform,l=s.gl,c=e.useProgram("collisionBox"),h=[];let u=0,d=0;for(let t=0;t<r.length;t++){const _=r[t],p=i.getTile(_).getBucket(a);if(!p)continue;const m=o?p.textCollisionBox:p.iconCollisionBox,f=p.collisionCircleArray;f.length>0&&(h.push({circleArray:f,circleOffset:d,coord:_}),u+=f.length/4,d=u),m&&c.draw(s,l.LINES,ti.disabled,ai.disabled,e.colorModeForRenderPass(),ei.disabled,Xi(e.transform),e.style.map.terrain&&e.style.map.terrain.getTerrainData(_),n.getProjectionData({overscaledTileID:_,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),a.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,null,e.transform.zoom,null,null,m.collisionVertexBuffer);}if(!o||!h.length)return;const _=e.useProgram("collisionCircle"),p=new t.ca;p.resize(4*u),p._trim();let m=0;for(const e of h)for(let t=0;t<e.circleArray.length/4;t++){const i=4*t,a=e.circleArray[i+0],r=e.circleArray[i+1],o=e.circleArray[i+2],s=e.circleArray[i+3];p.emplace(m++,a,r,o,s,0),p.emplace(m++,a,r,o,s,1),p.emplace(m++,a,r,o,s,2),p.emplace(m++,a,r,o,s,3);}(!lr||lr.length<2*u)&&(lr=function(e){const i=2*e,a=new t.cc;a.resize(i),a._trim();for(let e=0;e<i;e++){const t=6*e;a.uint16[t+0]=4*e+0,a.uint16[t+1]=4*e+1,a.uint16[t+2]=4*e+2,a.uint16[t+3]=4*e+2,a.uint16[t+4]=4*e+3,a.uint16[t+5]=4*e+0;}return a}(u));const f=s.createIndexBuffer(lr,!0),g=s.createVertexBuffer(p,t.cb.members,!0);for(const i of h){const r=Ki(e.transform);_.draw(s,l.TRIANGLES,ti.disabled,ai.disabled,e.colorModeForRenderPass(),ei.disabled,r,e.style.map.terrain&&e.style.map.terrain.getTerrainData(i.coord),null,a.id,g,f,t.aX.simpleSegment(0,2*i.circleOffset,i.circleArray.length,i.circleArray.length/2),null,e.transform.zoom,null,null,null);}g.destroy(),f.destroy();}const hr=t.ar(new Float32Array(16));function ur(e,i,a,r,o,s){const{horizontalAlign:n,verticalAlign:l}=t.aS(e);return new t.P((-(n-.5)*i/o+r[0])*s,(-(l-.5)*a/o+r[1])*s)}function dr(e,i,a,r,o,s){const n=i.tileAnchorPoint.add(new t.P(i.translation[0],i.translation[1]));if(i.pitchWithMap){let e=r.mult(s);a||(e=e.rotate(-o));const t=n.add(e);return Ge(t.x,t.y,i.pitchedLabelPlaneMatrix,i.getElevation).point}if(a){const t=Ye(i.tileAnchorPoint.x+1,i.tileAnchorPoint.y,i).point.sub(e),a=Math.atan(t.y/t.x)+(t.x<0?Math.PI:0);return e.add(r.rotate(a))}return e.add(r)}function _r(e,i,a,r,o,s,n,l,c,h,u,d){const _=e.text.placedSymbolArray,p=e.text.dynamicLayoutVertexArray,m=e.icon.dynamicLayoutVertexArray,f={};p.clear();for(let m=0;m<_.length;m++){const g=_.get(m),v=g.hidden||!g.crossTileID||e.allowVerticalPlacement&&!g.placedOrientation?null:r[g.crossTileID];if(v){const r=new t.P(g.anchorX,g.anchorY),_={getElevation:d,width:o.width,height:o.height,pitchedLabelPlaneMatrix:s,pitchWithMap:a,transform:o,tileAnchorPoint:r,translation:h,unwrappedTileID:u},m=a?Je(r.x,r.y,_):Ye(r.x,r.y,_),x=Ue(o.cameraToCenterDistance,m.signedDistanceFromCamera);let b=t.aA(e.textSizeData,l,g)*x/t.aM;a&&(b*=e.tilePixelRatio/n);const{width:y,height:w,anchor:T,textOffset:P,textBoxScale:C}=v,I=ur(T,y,w,P,C,b),M=o.getPitchedTextCorrection(r.x+h[0],r.y+h[1],u),E=dr(m.point,_,i,I,-o.bearingInRadians,M),S=e.allowVerticalPlacement&&g.placedOrientation===t.az.vertical?Math.PI/2:0;for(let e=0;e<g.numGlyphs;e++)t.aG(p,E,S);c&&g.associatedIconIndex>=0&&(f[g.associatedIconIndex]={shiftedAnchor:E,angle:S});}else rt(g.numGlyphs,p);}if(c){m.clear();const i=e.icon.placedSymbolArray;for(let e=0;e<i.length;e++){const a=i.get(e);if(a.hidden)rt(a.numGlyphs,m);else {const i=f[e];if(i)for(let e=0;e<a.numGlyphs;e++)t.aG(m,i.shiftedAnchor,i.angle);else rt(a.numGlyphs,m);}}e.icon.dynamicLayoutVertexBuffer.updateData(m);}e.text.dynamicLayoutVertexBuffer.updateData(p);}function pr(e,t,i){return i.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function mr(e,i,a,r,o,s,n,l,c,h,u,d,_){const p=e.context,m=p.gl,f=e.transform,g="map"===l,v="map"===c,x="viewport"!==l&&"point"!==a.layout.get("symbol-placement"),b=g&&!v&&!x,y=!a.layout.get("symbol-sort-key").isConstant();let w=!1;const T=e.getDepthModeForSublayer(0,ti.ReadOnly),P=a._unevaluatedLayout.hasValue("text-variable-anchor")||a._unevaluatedLayout.hasValue("text-variable-anchor-offset"),C=[],I=f.getCircleRadiusCorrection();for(const l of r){const r=i.getTile(l),c=r.getBucket(a);if(!c)continue;const u=o?c.text:c.icon;if(!u||!u.segments.get().length||!u.hasVisibleVertices)continue;const d=u.programConfigurations.get(a.id),p=o||c.sdfIcons,T=o?c.textSizeData:c.iconSizeData,M=v||0!==f.pitch,E=e.useProgram(pr(p,o,c),d),S=t.ay(T,f.zoom),R=e.style.map.terrain&&e.style.map.terrain.getTerrainData(l);let z,D,A,L,k=[0,0],F=null;if(o)D=r.glyphAtlasTexture,A=m.LINEAR,z=r.glyphAtlasTexture.size,c.iconsInText&&(k=r.imageAtlasTexture.size,F=r.imageAtlasTexture,L=M||e.options.rotating||e.options.zooming||"composite"===T.kind||"camera"===T.kind?m.LINEAR:m.NEAREST);else {const t=1!==a.layout.get("icon-size").constantOr(0)||c.iconsNeedLinear;D=r.imageAtlasTexture,A=p||e.options.rotating||e.options.zooming||t||M?m.LINEAR:m.NEAREST,z=r.imageAtlasTexture.size;}const B=t.aN(r,1,e.transform.zoom),O=je(g,e.transform,B),j=t.N();t.aB(j,O);const N=Ne(v,g,e.transform,B),Z=t.aO(f,r,s,n),G=f.getProjectionData({overscaledTileID:l,applyGlobeMatrix:!_,applyTerrainMatrix:!0}),U=P&&c.hasTextData(),V="none"!==a.layout.get("icon-text-fit")&&U&&c.hasIconData();if(x){const t=e.style.map.terrain?(t,i)=>e.style.map.terrain.getElevation(l,t,i):null,i="map"===a.layout.get("text-rotation-alignment");qe(c,e,o,O,j,v,h,i,l.toUnwrapped(),f.width,f.height,Z,t);}const q=o&&P||V,W=x||q?hr:v?O:e.transform.clipSpaceToPixelsMatrix,$=p&&0!==a.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1);let H;H=p?c.iconsInText?ma(T.kind,S,b,v,x,q,e,W,N,Z,z,k,I):pa(T.kind,S,b,v,x,q,e,W,N,Z,o,z,0,I):_a(T.kind,S,b,v,x,q,e,W,N,Z,o,z,I);const X={program:E,buffers:u,uniformValues:H,projectionData:G,atlasTexture:D,atlasTextureIcon:F,atlasInterpolation:A,atlasInterpolationIcon:L,isSDF:p,hasHalo:$};if(y&&c.canOverlap){w=!0;const e=u.segments.get();for(const i of e)C.push({segments:new t.aX([i]),sortKey:i.sortKey,state:X,terrainData:R});}else C.push({segments:u.segments,sortKey:0,state:X,terrainData:R});}w&&C.sort(((e,t)=>e.sortKey-t.sortKey));for(const t of C){const i=t.state;if(p.activeTexture.set(m.TEXTURE0),i.atlasTexture.bind(i.atlasInterpolation,m.CLAMP_TO_EDGE),i.atlasTextureIcon&&(p.activeTexture.set(m.TEXTURE1),i.atlasTextureIcon&&i.atlasTextureIcon.bind(i.atlasInterpolationIcon,m.CLAMP_TO_EDGE)),i.isSDF){const r=i.uniformValues;i.hasHalo&&(r.u_is_halo=1,fr(i.buffers,t.segments,a,e,i.program,T,u,d,r,i.projectionData,t.terrainData)),r.u_is_halo=0;}fr(i.buffers,t.segments,a,e,i.program,T,u,d,i.uniformValues,i.projectionData,t.terrainData);}}function fr(e,t,i,a,r,o,s,n,l,c,h){const u=a.context;r.draw(u,u.gl.TRIANGLES,o,s,n,ei.backCCW,l,h,c,i.id,e.layoutVertexBuffer,e.indexBuffer,t,i.paint,a.transform.zoom,e.programConfigurations.get(i.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer);}function gr(e,i,a,r,o){const s=e.context,n=s.gl,l=ai.disabled,c=new Qt([n.ONE,n.ONE],t.bp.transparent,[!0,!0,!0,!0]),h=i.getBucket(a);if(!h)return;const u=r.key;let d=a.heatmapFbos.get(u);d||(d=xr(s,i.tileSize,i.tileSize),a.heatmapFbos.set(u,d)),s.bindFramebuffer.set(d.framebuffer),s.viewport.set([0,0,i.tileSize,i.tileSize]),s.clear({color:t.bp.transparent});const _=h.programConfigurations.get(a.id),p=e.useProgram("heatmap",_,!o),m=e.transform.getProjectionData({overscaledTileID:i.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),f=e.style.map.terrain.getTerrainData(r);p.draw(s,n.TRIANGLES,ti.disabled,l,c,ei.disabled,Qi(i,e.transform.zoom,a.paint.get("heatmap-intensity"),1),f,m,a.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,a.paint,e.transform.zoom,_);}function vr(e,t,i,a,r){const o=e.context,s=o.gl,n=e.transform;o.setColorMode(e.colorModeForRenderPass());const l=br(o,t),c=i.key,h=t.heatmapFbos.get(c);if(!h)return;o.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,h.colorAttachment.get()),o.activeTexture.set(s.TEXTURE1),l.bind(s.LINEAR,s.CLAMP_TO_EDGE);const u=n.getProjectionData({overscaledTileID:i,applyTerrainMatrix:r,applyGlobeMatrix:!a});e.useProgram("heatmapTexture").draw(o,s.TRIANGLES,ti.disabled,ai.disabled,e.colorModeForRenderPass(),ei.disabled,Ji(e,t,0,1),null,u,t.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments,t.paint,n.zoom),h.destroy(),t.heatmapFbos.delete(c);}function xr(e,t,i){var a,r;const o=e.gl,s=o.createTexture();o.bindTexture(o.TEXTURE_2D,s),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR);const n=null!==(a=e.HALF_FLOAT)&&void 0!==a?a:o.UNSIGNED_BYTE,l=null!==(r=e.RGBA16F)&&void 0!==r?r:o.RGBA;o.texImage2D(o.TEXTURE_2D,0,l,t,i,0,o.RGBA,n,null);const c=e.createFramebuffer(t,i,!1,!1);return c.colorAttachment.set(s),c}function br(e,i){return i.colorRampTexture||(i.colorRampTexture=new t.T(e,i.colorRamp,e.gl.RGBA)),i.colorRampTexture}function yr(e,i,a,r,o,s,n,l){let c=256;if(o.stepInterpolant){const r=i.getSource().maxzoom,o=n.canonical.z===r?Math.ceil(1<<e.transform.maxZoom-n.canonical.z):1;c=t.an(t.ce(s.maxLineLength/t.a5*1024*o),256,a.maxTextureSize);}return l.gradient=t.cf({expression:o.gradientExpression(),evaluationKey:"lineProgress",resolution:c,image:l.gradient||void 0,clips:s.lineClipsArray}),l.texture?l.texture.update(l.gradient):l.texture=new t.T(a,l.gradient,r.RGBA),l.version=o.gradientVersion,l.texture}function wr(e,t,i,a,r){e.activeTexture.set(t.TEXTURE0),i.imageAtlasTexture.bind(t.LINEAR,t.CLAMP_TO_EDGE),a.updatePaintBuffers(r);}function Tr(e,t,i,a,r,o){(r||e.lineAtlas.dirty)&&(t.activeTexture.set(i.TEXTURE0),e.lineAtlas.bind(t)),a.updatePaintBuffers(o);}function Pr(e,t,i,a,r,o,s){const n=o.gradients[r.id];let l=n.texture;r.gradientVersion!==n.version&&(l=yr(e,t,i,a,r,o,s,n)),i.activeTexture.set(a.TEXTURE0),l.bind(r.stepInterpolant?a.NEAREST:a.LINEAR,a.CLAMP_TO_EDGE);}function Cr(e,t,i,a,r,o,s,n,l){const c=o.gradients[r.id];let h=c.texture;r.gradientVersion!==c.version&&(h=yr(e,t,i,a,r,o,s,c)),i.activeTexture.set(a.TEXTURE0),h.bind(r.stepInterpolant?a.NEAREST:a.LINEAR,a.CLAMP_TO_EDGE),i.activeTexture.set(a.TEXTURE1),e.lineAtlas.bind(i),n.updatePaintBuffers(l);}function Ir(e,t,i,a,r){if(!i||!a||!a.imageAtlas)return;const o=a.imageAtlas.patternPositions;let s=o[i.to.toString()],n=o[i.from.toString()];if(!s&&n&&(s=n),!n&&s&&(n=s),!s||!n){const e=r.getPaintProperty(t);s=o[e],n=o[e];}s&&n&&e.setConstantPatternPositions(s,n);}function Mr(e,i,a,r,o,s,n,l){const c=e.context.gl,h="fill-pattern",u=a.paint.get(h),d=u&&u.constantOr(1),_=a.getCrossfadeParameters();let p,m,f,g,v;const x=e.transform,b=a.paint.get("fill-translate"),y=a.paint.get("fill-translate-anchor");n?(m=d&&!a.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",p=c.LINES):(m=d?"fillPattern":"fill",p=c.TRIANGLES);const w=u.constantOr(null);for(const u of r){const r=i.getTile(u);if(d&&!r.patternsLoaded())continue;const T=r.getBucket(a);if(!T)continue;const P=T.programConfigurations.get(a.id),C=e.useProgram(m,P),I=e.style.map.terrain&&e.style.map.terrain.getTerrainData(u);d&&(e.context.activeTexture.set(c.TEXTURE0),r.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),P.updatePaintBuffers(_)),Ir(P,h,w,r,a);const M=x.getProjectionData({overscaledTileID:u,applyGlobeMatrix:!l,applyTerrainMatrix:!0}),E=t.aO(x,r,b,y);if(n){g=T.indexBuffer2,v=T.segments2;const t=[c.drawingBufferWidth,c.drawingBufferHeight];f="fillOutlinePattern"===m&&d?$i(e,_,r,t,E):Wi(t,E);}else g=T.indexBuffer,v=T.segments,f=d?qi(e,_,r,E):{u_fill_translate:E};const S=e.stencilModeForClipping(u);C.draw(e.context,p,o,S,s,ei.backCCW,f,I,M,a.id,T.layoutVertexBuffer,g,v,a.paint,e.transform.zoom,P);}}function Er(e,i,a,r,o,s,n,l){const c=e.context,h=c.gl,u="fill-extrusion-pattern",d=a.paint.get(u),_=d.constantOr(1),p=a.getCrossfadeParameters(),m=a.paint.get("fill-extrusion-opacity"),f=d.constantOr(null),g=e.transform;for(const d of r){const r=i.getTile(d),v=r.getBucket(a);if(!v)continue;const x=e.style.map.terrain&&e.style.map.terrain.getTerrainData(d),b=v.programConfigurations.get(a.id),y=e.useProgram(_?"fillExtrusionPattern":"fillExtrusion",b);_&&(e.context.activeTexture.set(h.TEXTURE0),r.imageAtlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE),b.updatePaintBuffers(p));const w=g.getProjectionData({overscaledTileID:d,applyGlobeMatrix:!l,applyTerrainMatrix:!0});Ir(b,u,f,r,a);const T=t.aO(g,r,a.paint.get("fill-extrusion-translate"),a.paint.get("fill-extrusion-translate-anchor")),P=a.paint.get("fill-extrusion-vertical-gradient"),C=_?Vi(e,P,m,T,d,p,r):Ui(e,P,m,T);y.draw(c,c.gl.TRIANGLES,o,s,n,ei.backCCW,C,x,w,a.id,v.layoutVertexBuffer,v.indexBuffer,v.segments,a.paint,e.transform.zoom,b,e.style.map.terrain&&v.centroidVertexBuffer);}}function Sr(e,t,i,a,r,o,s,n,l){var c;const h=e.style.projection,u=e.context,d=e.transform,_=u.gl,p=[`#define NUM_ILLUMINATION_SOURCES ${i.paint.get("hillshade-highlight-color").values.length}`],m=e.useProgram("hillshade",null,!1,p),f=!e.options.moving;for(const p of a){const a=t.getTile(p),g=a.fbo;if(!g)continue;const v=h.getMeshFromTileID(u,p.canonical,n,!0,"raster"),x=null===(c=e.style.map.terrain)||void 0===c?void 0:c.getTerrainData(p);u.activeTexture.set(_.TEXTURE0),_.bindTexture(_.TEXTURE_2D,g.colorAttachment.get());const b=d.getProjectionData({overscaledTileID:p,aligned:f,applyGlobeMatrix:!l,applyTerrainMatrix:!0});m.draw(u,_.TRIANGLES,o,r[p.overscaledZ],s,ei.backCCW,ea(e,a,i),x,b,i.id,v.vertexBuffer,v.indexBuffer,v.segments);}}function Rr(e,i,a,r,o,s,n,l,c){var h;const u=e.style.projection,d=e.context,_=e.transform,p=d.gl,m=e.useProgram("colorRelief"),f=!e.options.moving;let g=!0,v=0;for(const x of r){const r=i.getTile(x),b=r.dem;if(g){const e=p.getParameter(p.MAX_TEXTURE_SIZE),{elevationTexture:t,colorTexture:i}=a.getColorRampTextures(d,e,b.getUnpackVector());d.activeTexture.set(p.TEXTURE1),t.bind(p.NEAREST,p.CLAMP_TO_EDGE),d.activeTexture.set(p.TEXTURE4),i.bind(p.LINEAR,p.CLAMP_TO_EDGE),g=!1,v=t.size[0];}if(!b||!b.data)continue;const y=b.stride,w=b.getPixels();if(d.activeTexture.set(p.TEXTURE0),d.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||e.getTileTexture(y),r.demTexture){const e=r.demTexture;e.update(w,{premultiply:!1}),e.bind(p.LINEAR,p.CLAMP_TO_EDGE);}else r.demTexture=new t.T(d,w,p.RGBA,{premultiply:!1}),r.demTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE);const T=u.getMeshFromTileID(d,x.canonical,l,!0,"raster"),P=null===(h=e.style.map.terrain)||void 0===h?void 0:h.getTerrainData(x),C=_.getProjectionData({overscaledTileID:x,aligned:f,applyGlobeMatrix:!c,applyTerrainMatrix:!0});m.draw(d,p.TRIANGLES,s,o[x.overscaledZ],n,ei.backCCW,aa(a,r.dem,v),P,C,a.id,T.vertexBuffer,T.indexBuffer,T.segments);}}const zr=[new t.P(0,0),new t.P(t.a5,0),new t.P(t.a5,t.a5),new t.P(0,t.a5)];function Dr(e,t,i,a,r,o,s,n,l=!1,c=!1){const h=a[a.length-1].overscaledZ,u=e.context,d=u.gl,_=e.useProgram("raster"),p=e.transform,m=e.style.projection,f=e.colorModeForRenderPass(),g=!e.options.moving,v=i.paint.get("raster-opacity"),x=i.paint.get("raster-resampling"),b=i.paint.get("raster-fade-duration"),y=!!e.style.map.terrain;for(const w of a){const a=e.getDepthModeForSublayer(w.overscaledZ-h,1===v?ti.ReadWrite:ti.ReadOnly,d.LESS),T=t.getTile(w),P="nearest"===x?d.NEAREST:d.LINEAR;u.activeTexture.set(d.TEXTURE0),T.texture.bind(P,d.CLAMP_TO_EDGE,d.LINEAR_MIPMAP_NEAREST),u.activeTexture.set(d.TEXTURE1);const{parentTile:C,parentScaleBy:I,parentTopLeft:M,fadeValues:E}=Ar(T,t,b,y);T.fadeOpacity=E.tileOpacity,C?(C.fadeOpacity=E.parentTileOpacity,C.texture.bind(P,d.CLAMP_TO_EDGE,d.LINEAR_MIPMAP_NEAREST)):T.texture.bind(P,d.CLAMP_TO_EDGE,d.LINEAR_MIPMAP_NEAREST),T.texture.useMipmap&&u.extTextureFilterAnisotropic&&e.transform.pitch>20&&d.texParameterf(d.TEXTURE_2D,u.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,u.extTextureFilterAnisotropicMax);const S=e.style.map.terrain&&e.style.map.terrain.getTerrainData(w),R=p.getProjectionData({overscaledTileID:w,aligned:g,applyGlobeMatrix:!c,applyTerrainMatrix:!0}),z=ua(M,I,E.fadeMix,i,n),D=m.getMeshFromTileID(u,w.canonical,o,s,"raster");_.draw(u,d.TRIANGLES,a,r?r[w.overscaledZ]:ai.disabled,f,l?ei.frontCCW:ei.backCCW,z,S,R,i.id,D.vertexBuffer,D.indexBuffer,D.segments);}}function Ar(e,i,a,r){const o={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(0===a||r)return o;if(e.fadingParentID){const r=i.getLoadedTile(e.fadingParentID);if(!r)return o;const s=Math.pow(2,r.tileID.overscaledZ-e.tileID.overscaledZ),n=[e.tileID.canonical.x*s%1,e.tileID.canonical.y*s%1],l=function(e,i,a){const r=c(),o=(r-i.timeAdded)/a,s=e.fadingDirection===ue.Incoming,n=t.an((r-e.timeAdded)/a,0,1),l=t.an(1-o,0,1),h=s?n:l;return {tileOpacity:h,parentTileOpacity:s?l:n,fadeMix:{opacity:1,mix:1-h}}}(e,r,a);return {parentTile:r,parentScaleBy:s,parentTopLeft:n,fadeValues:l}}if(e.selfFading){const i=function(e,i){const a=(c()-e.timeAdded)/i,r=t.an(a,0,1);return {tileOpacity:r,fadeMix:{opacity:r,mix:0}}}(e,a);return {parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:i}}return o}const Lr=new t.bp(1,0,0,1),kr=new t.bp(0,1,0,1),Fr=new t.bp(0,0,1,1),Br=new t.bp(1,0,1,1),Or=new t.bp(0,1,1,1);function jr(e,t,i,a){Zr(e,0,t+i/2,e.transform.width,i,a);}function Nr(e,t,i,a){Zr(e,t-i/2,0,i,e.transform.height,a);}function Zr(e,t,i,a,r,o){const s=e.context,n=s.gl;n.enable(n.SCISSOR_TEST),n.scissor(t*e.pixelRatio,i*e.pixelRatio,a*e.pixelRatio,r*e.pixelRatio),s.clear({color:o}),n.disable(n.SCISSOR_TEST);}function Gr(e,i,a){const r=e.context,o=r.gl,s=e.useProgram("debug"),n=ti.disabled,l=ai.disabled,c=e.colorModeForRenderPass(),h="$debug",u=e.style.map.terrain&&e.style.map.terrain.getTerrainData(a);r.activeTexture.set(o.TEXTURE0);const d=i.getTileByID(a.key).latestRawTileData,_=Math.floor((d&&d.byteLength||0)/1024),p=i.getTile(a).tileSize,m=512/Math.min(p,512)*(a.overscaledZ/e.transform.zoom)*.5;let f=a.canonical.toString();a.overscaledZ!==a.canonical.z&&(f+=` => ${a.overscaledZ}`),function(e,t){e.initDebugOverlayCanvas();const i=e.debugOverlayCanvas,a=e.context.gl,r=e.debugOverlayCanvas.getContext("2d");r.clearRect(0,0,i.width,i.height),r.shadowColor="white",r.shadowBlur=2,r.lineWidth=1.5,r.strokeStyle="white",r.textBaseline="top",r.font="bold 36px Open Sans, sans-serif",r.fillText(t,5,5),r.strokeText(t,5,5),e.debugOverlayTexture.update(i),e.debugOverlayTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE);}(e,`${f} ${_}kB`);const g=e.transform.getProjectionData({overscaledTileID:a,applyGlobeMatrix:!0,applyTerrainMatrix:!0});s.draw(r,o.TRIANGLES,n,l,Qt.alphaBlended,ei.disabled,Yi(t.bp.transparent,m),null,g,h,e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments),s.draw(r,o.LINE_STRIP,n,l,c,ei.disabled,Yi(t.bp.red),u,g,h,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);}function Ur(e,t,i,a){const{isRenderingGlobe:r}=a,o=e.context,s=o.gl,n=e.transform,l=e.colorModeForRenderPass(),c=e.getDepthModeFor3D(),h=e.useProgram("terrain");o.bindFramebuffer.set(null),o.viewport.set([0,0,e.width,e.height]);for(const a of i){const i=t.getTerrainMesh(a.tileID),u=e.renderToTexture.getTexture(a),d=t.getTerrainData(a.tileID);o.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,u.texture);const _=t.getMeshFrameDelta(n.zoom),p=n.calculateFogMatrix(a.tileID.toUnwrapped()),m=Oi(_,p,e.style.sky,n.pitch,r),f=n.getProjectionData({overscaledTileID:a.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});h.draw(o,s.TRIANGLES,c,ai.disabled,l,ei.backCCW,m,d,f,"terrain",i.vertexBuffer,i.indexBuffer,i.segments);}}function Vr(e,i){if(!i.mesh){const a=new t.aW;a.emplaceBack(-1,-1),a.emplaceBack(1,-1),a.emplaceBack(1,1),a.emplaceBack(-1,1);const r=new t.aY;r.emplaceBack(0,1,2),r.emplaceBack(0,2,3),i.mesh=new kt(e.createVertexBuffer(a,Ft.members),e.createIndexBuffer(r),t.aX.simpleSegment(0,0,a.length,r.length));}return i.mesh}class qr{constructor(e,i){this.context=new nr(e),this.transform=i,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:t.ar(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=ke.maxOverzooming+ke.maxUnderzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new zt;}resize(e,t,i){if(this.width=Math.floor(e*i),this.height=Math.floor(t*i),this.pixelRatio=i,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const e of this.style._order)this.style._layers[e].resize();}setup(){const e=this.context,i=new t.aW;i.emplaceBack(0,0),i.emplaceBack(t.a5,0),i.emplaceBack(0,t.a5),i.emplaceBack(t.a5,t.a5),this.tileExtentBuffer=e.createVertexBuffer(i,Ft.members),this.tileExtentSegments=t.aX.simpleSegment(0,0,4,2);const a=new t.aW;a.emplaceBack(0,0),a.emplaceBack(t.a5,0),a.emplaceBack(0,t.a5),a.emplaceBack(t.a5,t.a5),this.debugBuffer=e.createVertexBuffer(a,Ft.members),this.debugSegments=t.aX.simpleSegment(0,0,4,5);const r=new t.ch;r.emplaceBack(0,0,0,0),r.emplaceBack(t.a5,0,t.a5,0),r.emplaceBack(0,t.a5,0,t.a5),r.emplaceBack(t.a5,t.a5,t.a5,t.a5),this.rasterBoundsBuffer=e.createVertexBuffer(r,Fi.members),this.rasterBoundsSegments=t.aX.simpleSegment(0,0,4,2);const o=new t.aW;o.emplaceBack(0,0),o.emplaceBack(t.a5,0),o.emplaceBack(0,t.a5),o.emplaceBack(t.a5,t.a5),this.rasterBoundsBufferPosOnly=e.createVertexBuffer(o,Ft.members),this.rasterBoundsSegmentsPosOnly=t.aX.simpleSegment(0,0,4,5);const s=new t.aW;s.emplaceBack(0,0),s.emplaceBack(1,0),s.emplaceBack(0,1),s.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(s,Ft.members),this.viewportSegments=t.aX.simpleSegment(0,0,4,2);const n=new t.ci;n.emplaceBack(0),n.emplaceBack(1),n.emplaceBack(3),n.emplaceBack(2),n.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(n);const l=new t.aY;l.emplaceBack(1,0,2),l.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(l);const c=this.context.gl;this.stencilClearMode=new ai({func:c.ALWAYS,mask:0},0,255,c.ZERO,c.ZERO,c.ZERO),this.tileExtentMesh=new kt(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments);}clearStencil(){const e=this.context,i=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const a=t.N();t.c7(a,0,this.width,this.height,0,0,1),t.Q(a,a,[i.drawingBufferWidth,i.drawingBufferHeight,0]);const r={mainMatrix:a,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:a};this.useProgram("clippingMask",null,!0).draw(e,i.TRIANGLES,ti.disabled,this.stencilClearMode,Qt.disabled,ei.disabled,null,null,r,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments);}_renderTileClippingMasks(e,t,i){if(this.currentStencilSource===e.source||!e.isTileClipped()||!t||!t.length)return;this.currentStencilSource=e.source,this.nextStencilID+t.length>256&&this.clearStencil();const a=this.context;a.setColorMode(Qt.disabled),a.setDepthMode(ti.disabled);const r={};for(const e of t)r[e.key]=this.nextStencilID++;this._renderTileMasks(r,t,i,!0),this._renderTileMasks(r,t,i,!1),this._tileClippingMaskIDs=r;}_renderTileMasks(e,t,i,a){const r=this.context,o=r.gl,s=this.style.projection,n=this.transform,l=this.useProgram("clippingMask");for(const c of t){const t=e[c.key],h=this.style.map.terrain&&this.style.map.terrain.getTerrainData(c),u=s.getMeshFromTileID(this.context,c.canonical,a,!0,"stencil"),d=n.getProjectionData({overscaledTileID:c,applyGlobeMatrix:!i,applyTerrainMatrix:!0});l.draw(r,o.TRIANGLES,ti.disabled,new ai({func:o.ALWAYS,mask:0},t,255,o.KEEP,o.KEEP,o.REPLACE),Qt.disabled,i?ei.disabled:ei.backCCW,null,h,d,"$clipping",u.vertexBuffer,u.indexBuffer,u.segments);}}_renderTilesDepthBuffer(){const e=this.context,t=e.gl,i=this.style.projection,a=this.transform,r=this.useProgram("depth"),o=this.getDepthModeFor3D(),s=Ie(a,{tileSize:a.tileSize});for(const n of s){const s=this.style.map.terrain&&this.style.map.terrain.getTerrainData(n),l=i.getMeshFromTileID(this.context,n.canonical,!0,!0,"raster"),c=a.getProjectionData({overscaledTileID:n,applyGlobeMatrix:!0,applyTerrainMatrix:!0});r.draw(e,t.TRIANGLES,o,ai.disabled,Qt.disabled,ei.backCCW,null,s,c,"$clipping",l.vertexBuffer,l.indexBuffer,l.segments);}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,t=this.context.gl;return new ai({func:t.NOTEQUAL,mask:255},e,255,t.KEEP,t.KEEP,t.REPLACE)}stencilModeForClipping(e){const t=this.context.gl;return new ai({func:t.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,t.KEEP,t.KEEP,t.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(e){const t=this.context.gl,i=e.sort(((e,t)=>t.overscaledZ-e.overscaledZ)),a=i[i.length-1].overscaledZ,r=i[0].overscaledZ-a+1;if(r>1){this.currentStencilSource=void 0,this.nextStencilID+r>256&&this.clearStencil();const e={};for(let i=0;i<r;i++)e[i+a]=new ai({func:t.GEQUAL,mask:255},i+this.nextStencilID,255,t.KEEP,t.KEEP,t.REPLACE);return this.nextStencilID+=r,[e,i]}return [{[a]:ai.disabled},i]}stencilConfigForOverlapTwoPass(e){const t=this.context.gl,i=e.sort(((e,t)=>t.overscaledZ-e.overscaledZ)),a=i[i.length-1].overscaledZ,r=i[0].overscaledZ-a+1;if(this.clearStencil(),r>1){const e={},o={};for(let i=0;i<r;i++)e[i+a]=new ai({func:t.GREATER,mask:255},r+1+i,255,t.KEEP,t.KEEP,t.REPLACE),o[i+a]=new ai({func:t.GREATER,mask:255},1+i,255,t.KEEP,t.KEEP,t.REPLACE);return this.nextStencilID=2*r+1,[e,o,i]}return this.nextStencilID=3,[{[a]:new ai({func:t.GREATER,mask:255},2,255,t.KEEP,t.KEEP,t.REPLACE)},{[a]:new ai({func:t.GREATER,mask:255},1,255,t.KEEP,t.KEEP,t.REPLACE)},i]}colorModeForRenderPass(){const e=this.context.gl;if(this._showOverdrawInspector){const i=1/8;return new Qt([e.CONSTANT_COLOR,e.ONE],new t.bp(i,i,i,0),[!0,!0,!0,!0])}return "opaque"===this.renderPass?Qt.unblended:Qt.alphaBlended}getDepthModeForSublayer(e,t,i){if(!this.opaquePassEnabledForLayer())return ti.disabled;const a=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new ti(i||this.context.gl.LEQUAL,t,[a,a])}getDepthModeFor3D(){return new ti(this.context.gl.LEQUAL,ti.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,i){var a,r;this.style=e,this.options=i,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(c()),this.imageManager.beginFrame();const o=this.style._order,s=this.style.tileManagers,n={},l={},h={},u={isRenderingToTexture:!1,isRenderingGlobe:(null===(a=e.projection)||void 0===a?void 0:a.transitionState)>0};for(const e in s){const t=s[e];t.used&&t.prepare(this.context),n[e]=t.getVisibleCoordinates(!1),l[e]=n[e].slice().reverse(),h[e]=t.getVisibleCoordinates(!0).reverse();}this.opaquePassCutoff=1/0;for(let e=0;e<o.length;e++)if(this.style._layers[o[e]].is3D()){this.opaquePassCutoff=e;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const e of o){const t=this.style._layers[e];if(!t.hasOffscreenPass()||t.isHidden(this.transform.zoom))continue;const i=l[t.source];("custom"===t.type||i.length)&&this.renderLayer(this,s[t.source],t,i,u);}if(null===(r=this.style.projection)||void 0===r||r.updateGPUdependent({context:this.context,useProgram:e=>this.useProgram(e)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:i.showOverdrawInspector?t.bp.black:t.bp.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(e,t){const i=e.context,a=i.gl,r=((e,t,i)=>{const a=Math.cos(t.rollInRadians),r=Math.sin(t.rollInRadians),o=ge(t),s=t.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return {u_sky_color:e.properties.get("sky-color"),u_horizon_color:e.properties.get("horizon-color"),u_horizon:[(t.width/2-o*r)*i,(t.height/2+o*a)*i],u_horizon_normal:[-r,a],u_sky_horizon_blend:e.properties.get("sky-horizon-blend")*t.height/2*i,u_sky_blend:s}})(t,e.style.map.transform,e.pixelRatio),o=new ti(a.LEQUAL,ti.ReadWrite,[0,1]),s=ai.disabled,n=e.colorModeForRenderPass(),l=e.useProgram("sky"),c=Vr(i,t);l.draw(i,a.TRIANGLES,o,s,n,ei.disabled,r,null,void 0,"sky",c.vertexBuffer,c.indexBuffer,c.segments);}(this,this.style.sky),this._showOverdrawInspector=i.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=o.length-1;this.currentLayer>=0;this.currentLayer--){const e=this.style._layers[o[this.currentLayer]],t=s[e.source],i=n[e.source];this._renderTileClippingMasks(e,i,!1),this.renderLayer(this,t,e,i,u);}this.renderPass="translucent";let d=!1;for(this.currentLayer=0;this.currentLayer<o.length;this.currentLayer++){const e=this.style._layers[o[this.currentLayer]],t=s[e.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(e,u))continue;this.opaquePassEnabledForLayer()||d||(d=!0,u.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const i=("symbol"===e.type?h:l)[e.source];this._renderTileClippingMasks(e,n[e.source],!!this.renderToTexture),this.renderLayer(this,t,e,i,u);}if(u.isRenderingGlobe&&function(e,i,a){const r=e.context,o=r.gl,s=e.useProgram("atmosphere"),n=new ti(o.LEQUAL,ti.ReadOnly,[0,1]),l=e.transform,c=function(e,i){const a=e.properties.get("position"),r=[-a.x,-a.y,-a.z],o=t.ar(new Float64Array(16));return "map"===e.properties.get("anchor")&&(t.bg(o,o,i.rollInRadians),t.bh(o,o,-i.pitchInRadians),t.bg(o,o,i.bearingInRadians),t.bh(o,o,i.center.lat*Math.PI/180),t.bJ(o,o,-i.center.lng*Math.PI/180)),t.cg(r,r,o),r}(a,e.transform),h=l.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),u=i.properties.get("atmosphere-blend")*h.projectionTransition;if(0===u)return;const d=fi(l.worldSize,l.center.lat),_=l.inverseProjectionMatrix,p=new Float64Array(4);p[3]=1,t.aH(p,p,l.modelViewProjectionMatrix),p[0]/=p[3],p[1]/=p[3],p[2]/=p[3],p[3]=1,t.aH(p,p,_),p[0]/=p[3],p[1]/=p[3],p[2]/=p[3],p[3]=1;const m=((e,t,i,a,r)=>({u_sun_pos:e,u_atmosphere_blend:t,u_globe_position:i,u_globe_radius:a,u_inv_proj_matrix:r}))(c,u,[p[0],p[1],p[2]],d,_),f=Vr(r,i);s.draw(r,o.TRIANGLES,n,ai.disabled,Qt.alphaBlended,ei.disabled,m,null,null,"atmosphere",f.vertexBuffer,f.indexBuffer,f.segments);}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const e=function(e,t){let i=null;const a=Object.values(e._layers).flatMap((i=>i.source&&!i.isHidden(t)?[e.tileManagers[i.source]]:[])),r=a.filter((e=>"vector"===e.getSource().type)),o=a.filter((e=>"vector"!==e.getSource().type)),s=e=>{(!i||i.getSource().maxzoom<e.getSource().maxzoom)&&(i=e);};return r.forEach((e=>s(e))),i||o.forEach((e=>s(e))),i}(this.style,this.transform.zoom);e&&function(e,t,i){for(let a=0;a<i.length;a++)Gr(e,t,i[a]);}(this,e,e.getVisibleCoordinates());}this.options.showPadding&&function(e){const t=e.transform.padding;jr(e,e.transform.height-(t.top||0),3,Lr),jr(e,t.bottom||0,3,kr),Nr(e,t.left||0,3,Fr),Nr(e,e.transform.width-(t.right||0),3,Br);const i=e.transform.centerPoint;!function(e,t,i,a){Zr(e,t-1,i-10,2,20,a),Zr(e,t-10,i-1,20,2,a);}(e,i.x,e.transform.height-i.y,Or);}(this),this.context.setDefault();}maybeDrawDepthAndCoords(e){if(!this.style||!this.style.map||!this.style.map.terrain)return;const i=this.terrainFacilitator.matrix,a=this.transform.modelViewProjectionMatrix;let r=this.terrainFacilitator.dirty;r||(r=e?!t.cj(i,a):!t.ck(i,a)),r||(r=this.style.map.terrain.tileManager.anyTilesAfterTime(this.terrainFacilitator.renderTime)),r&&(t.cl(i,a),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(e,i){const a=e.context,r=a.gl,o=e.transform,s=Qt.unblended,n=new ti(r.LEQUAL,ti.ReadWrite,[0,1]),l=i.tileManager.getRenderableTiles(),c=e.useProgram("terrainDepth");a.bindFramebuffer.set(i.getFramebuffer("depth").framebuffer),a.viewport.set([0,0,e.width/devicePixelRatio,e.height/devicePixelRatio]),a.clear({color:t.bp.transparent,depth:1});for(const e of l){const t=i.getTerrainMesh(e.tileID),l=i.getTerrainData(e.tileID),h=o.getProjectionData({overscaledTileID:e.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),u={u_ele_delta:i.getMeshFrameDelta(o.zoom)};c.draw(a,r.TRIANGLES,n,ai.disabled,s,ei.backCCW,u,l,h,"terrain",t.vertexBuffer,t.indexBuffer,t.segments);}a.bindFramebuffer.set(null),a.viewport.set([0,0,e.width,e.height]);}(this,this.style.map.terrain),function(e,i){const a=e.context,r=a.gl,o=e.transform,s=Qt.unblended,n=new ti(r.LEQUAL,ti.ReadWrite,[0,1]),l=i.getCoordsTexture(),c=i.tileManager.getRenderableTiles(),h=e.useProgram("terrainCoords");a.bindFramebuffer.set(i.getFramebuffer("coords").framebuffer),a.viewport.set([0,0,e.width/devicePixelRatio,e.height/devicePixelRatio]),a.clear({color:t.bp.transparent,depth:1}),i.coordsIndex=[];for(const e of c){const t=i.getTerrainMesh(e.tileID),c=i.getTerrainData(e.tileID);a.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,l.texture);const u={u_terrain_coords_id:(255-i.coordsIndex.length)/255,u_texture:0,u_ele_delta:i.getMeshFrameDelta(o.zoom)},d=o.getProjectionData({overscaledTileID:e.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});h.draw(a,r.TRIANGLES,n,ai.disabled,s,ei.backCCW,u,c,d,"terrain",t.vertexBuffer,t.indexBuffer,t.segments),i.coordsIndex.push(e.tileID.key);}a.bindFramebuffer.set(null),a.viewport.set([0,0,e.width,e.height]);}(this,this.style.map.terrain));}renderLayer(e,i,a,r,o){a.isHidden(this.transform.zoom)||("background"===a.type||"custom"===a.type||(r||[]).length)&&(this.id=a.id,t.cm(a)?function(e,i,a,r,o,s){if("translucent"!==e.renderPass)return;const{isRenderingToTexture:n}=s,l=ai.disabled,c=e.colorModeForRenderPass();(a._unevaluatedLayout.hasValue("text-variable-anchor")||a._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(e,i,a,r,o,s,n,l,c){const h=i.transform,u=i.style.map.terrain,d="map"===o,_="map"===s;for(const o of e){const e=r.getTile(o),s=e.getBucket(a);if(!s||!s.text||!s.text.segments.get().length)continue;const p=t.ay(s.textSizeData,h.zoom),m=t.aN(e,1,i.transform.zoom),f=je(d,i.transform,m),g="none"!==a.layout.get("icon-text-fit")&&s.hasIconData();if(p){const i=Math.pow(2,h.zoom-e.tileID.overscaledZ),a=u?(e,t)=>u.getElevation(o,e,t):null;_r(s,d,_,c,h,f,i,p,g,t.aO(h,e,n,l),o.toUnwrapped(),a);}}}(r,e,a,i,a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),o),0!==a.paint.get("icon-opacity").constantOr(1)&&mr(e,i,a,r,!1,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),a.layout.get("icon-rotation-alignment"),a.layout.get("icon-pitch-alignment"),a.layout.get("icon-keep-upright"),l,c,n),0!==a.paint.get("text-opacity").constantOr(1)&&mr(e,i,a,r,!0,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),a.layout.get("text-keep-upright"),l,c,n),i.map.showCollisionBoxes&&(cr(e,i,a,r,!0),cr(e,i,a,r,!1));}(e,i,a,r,this.style.placement.variableOffsets,o):t.cn(a)?function(e,i,a,r,o){if("translucent"!==e.renderPass)return;const{isRenderingToTexture:s}=o,n=a.paint.get("circle-opacity"),l=a.paint.get("circle-stroke-width"),c=a.paint.get("circle-stroke-opacity"),h=!a.layout.get("circle-sort-key").isConstant();if(0===n.constantOr(1)&&(0===l.constantOr(1)||0===c.constantOr(1)))return;const u=e.context,d=u.gl,_=e.transform,p=e.getDepthModeForSublayer(0,ti.ReadOnly),m=ai.disabled,f=e.colorModeForRenderPass(),g=[],v=_.getCircleRadiusCorrection();for(let o=0;o<r.length;o++){const n=r[o],l=i.getTile(n),c=l.getBucket(a);if(!c)continue;const u=a.paint.get("circle-translate"),d=a.paint.get("circle-translate-anchor"),p=t.aO(_,l,u,d),m=c.programConfigurations.get(a.id),f=e.useProgram("circle",m),x=c.layoutVertexBuffer,b=c.indexBuffer,y=e.style.map.terrain&&e.style.map.terrain.getTerrainData(n),w={programConfiguration:m,program:f,layoutVertexBuffer:x,indexBuffer:b,uniformValues:Hi(e,l,a,p,v),terrainData:y,projectionData:_.getProjectionData({overscaledTileID:n,applyGlobeMatrix:!s,applyTerrainMatrix:!0})};if(h){const e=c.segments.get();for(const i of e)g.push({segments:new t.aX([i]),sortKey:i.sortKey,state:w});}else g.push({segments:c.segments,sortKey:0,state:w});}h&&g.sort(((e,t)=>e.sortKey-t.sortKey));for(const t of g){const{programConfiguration:i,program:r,layoutVertexBuffer:o,indexBuffer:s,uniformValues:n,terrainData:l,projectionData:c}=t.state;r.draw(u,d.TRIANGLES,p,m,f,ei.backCCW,n,l,c,a.id,o,s,t.segments,a.paint,e.transform.zoom,i);}}(e,i,a,r,o):t.co(a)?function(e,i,a,r,o){if(0===a.paint.get("heatmap-opacity"))return;const s=e.context,{isRenderingToTexture:n,isRenderingGlobe:l}=o;if(e.style.map.terrain){for(const t of r){const r=i.getTile(t);i.hasRenderableParent(t)||("offscreen"===e.renderPass?gr(e,r,a,t,l):"translucent"===e.renderPass&&vr(e,a,t,n,l));}s.viewport.set([0,0,e.width,e.height]);}else "offscreen"===e.renderPass?function(e,i,a,r){const o=e.context,s=o.gl,n=e.transform,l=ai.disabled,c=new Qt([s.ONE,s.ONE],t.bp.transparent,[!0,!0,!0,!0]);((function(e,i,a){const r=e.gl;e.activeTexture.set(r.TEXTURE1),e.viewport.set([0,0,i.width/4,i.height/4]);let o=a.heatmapFbos.get(t.cd);o?(r.bindTexture(r.TEXTURE_2D,o.colorAttachment.get()),e.bindFramebuffer.set(o.framebuffer)):(o=xr(e,i.width/4,i.height/4),a.heatmapFbos.set(t.cd,o));}))(o,e,a),o.clear({color:t.bp.transparent});for(let t=0;t<r.length;t++){const h=r[t];if(i.hasRenderableParent(h))continue;const u=i.getTile(h),d=u.getBucket(a);if(!d)continue;const _=d.programConfigurations.get(a.id),p=e.useProgram("heatmap",_),m=n.getProjectionData({overscaledTileID:h,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),f=n.getCircleRadiusCorrection();p.draw(o,s.TRIANGLES,ti.disabled,l,c,ei.backCCW,Qi(u,n.zoom,a.paint.get("heatmap-intensity"),f),null,m,a.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,a.paint,n.zoom,_);}o.viewport.set([0,0,e.width,e.height]);}(e,i,a,r):"translucent"===e.renderPass&&function(e,i){const a=e.context,r=a.gl;a.setColorMode(e.colorModeForRenderPass());const o=i.heatmapFbos.get(t.cd);o&&(a.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,o.colorAttachment.get()),a.activeTexture.set(r.TEXTURE1),br(a,i).bind(r.LINEAR,r.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(a,r.TRIANGLES,ti.disabled,ai.disabled,e.colorModeForRenderPass(),ei.disabled,Ji(e,i,0,1),null,null,i.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,i.paint,e.transform.zoom));}(e,a);}(e,i,a,r,o):t.cp(a)?function(e,t,i,a,r){if("translucent"!==e.renderPass)return;const{isRenderingToTexture:o}=r,s=i.paint.get("line-opacity"),n=i.paint.get("line-width");if(0===s.constantOr(1)||0===n.constantOr(1))return;const l=e.getDepthModeForSublayer(0,ti.ReadOnly),c=e.colorModeForRenderPass(),h=i.paint.get("line-dasharray"),u=h.constantOr(1),d=i.paint.get("line-pattern"),_=d.constantOr(1),p=i.paint.get("line-gradient"),m=i.getCrossfadeParameters();let f;f=_?"linePattern":u&&p?"lineGradientSDF":u?"lineSDF":p?"lineGradient":"line";const g=e.context,v=g.gl,x=e.transform;let b=!0;for(const r of a){const a=t.getTile(r);if(_&&!a.patternsLoaded())continue;const s=a.getBucket(i);if(!s)continue;const n=s.programConfigurations.get(i.id),y=e.context.program.get(),w=e.useProgram(f,n),T=b||w.program!==y,P=e.style.map.terrain&&e.style.map.terrain.getTerrainData(r),C=d.constantOr(null),I=h&&h.constantOr(null);if(C&&a.imageAtlas){const e=a.imageAtlas,t=e.patternPositions[C.to.toString()],i=e.patternPositions[C.from.toString()];t&&i&&n.setConstantPatternPositions(t,i);}else if(I){const t="round"===i.layout.get("line-cap"),a=e.lineAtlas.getDash(I.to,t),r=e.lineAtlas.getDash(I.from,t);n.setConstantDashPositions(a,r);}const M=x.getProjectionData({overscaledTileID:r,applyGlobeMatrix:!o,applyTerrainMatrix:!0}),E=x.getPixelScale();let S;_?(S=sa(e,a,i,E,m),wr(g,v,a,n,m)):u&&p?(S=la(e,a,i,E,m,s.lineClipsArray.length),Cr(e,t,g,v,i,s,r,n,m)):u?(S=na(e,a,i,E,m),Tr(e,g,v,n,T,m)):p?(S=oa(e,a,i,E,s.lineClipsArray.length),Pr(e,t,g,v,i,s,r)):S=ra(e,a,i,E);const R=e.stencilModeForClipping(r);w.draw(g,v.TRIANGLES,l,R,c,ei.disabled,S,P,M,i.id,s.layoutVertexBuffer,s.indexBuffer,s.segments,i.paint,e.transform.zoom,n,s.layoutVertexBuffer2),b=!1;}}(e,i,a,r,o):t.cq(a)?function(e,i,a,r,o){const s=a.paint.get("fill-color"),n=a.paint.get("fill-opacity");if(0===n.constantOr(1))return;const{isRenderingToTexture:l}=o,c=e.colorModeForRenderPass(),h=a.paint.get("fill-pattern"),u=e.opaquePassEnabledForLayer()&&!h.constantOr(1)&&1===s.constantOr(t.bp.transparent).a&&1===n.constantOr(0)?"opaque":"translucent";if(e.renderPass===u){const t=e.getDepthModeForSublayer(1,"opaque"===e.renderPass?ti.ReadWrite:ti.ReadOnly);Mr(e,i,a,r,t,c,!1,l);}if("translucent"===e.renderPass&&a.paint.get("fill-antialias")){const t=e.getDepthModeForSublayer(a.getPaintProperty("fill-outline-color")?2:0,ti.ReadOnly);Mr(e,i,a,r,t,c,!0,l);}}(e,i,a,r,o):t.cr(a)?function(e,t,i,a,r){const o=i.paint.get("fill-extrusion-opacity");if(0===o)return;const{isRenderingToTexture:s}=r;if("translucent"===e.renderPass){const r=new ti(e.context.gl.LEQUAL,ti.ReadWrite,e.depthRangeFor3D);if(1!==o||i.paint.get("fill-extrusion-pattern").constantOr(1))Er(e,t,i,a,r,ai.disabled,Qt.disabled,s),Er(e,t,i,a,r,e.stencilModeFor3D(),e.colorModeForRenderPass(),s);else {const o=e.colorModeForRenderPass();Er(e,t,i,a,r,ai.disabled,o,s);}}}(e,i,a,r,o):t.cs(a)?function(e,i,a,r,o){if("offscreen"!==e.renderPass&&"translucent"!==e.renderPass)return;const{isRenderingToTexture:s}=o,n=e.context,l=e.style.projection.useSubdivision,c=e.getDepthModeForSublayer(0,ti.ReadOnly),h=e.colorModeForRenderPass();if("offscreen"===e.renderPass)!function(e,i,a,r,o,s,n){const l=e.context,c=l.gl;for(const h of a){const a=i.getTile(h),u=a.dem;if(!u||!u.data)continue;if(!a.needsHillshadePrepare)continue;const d=u.dim,_=u.stride,p=u.getPixels();if(l.activeTexture.set(c.TEXTURE1),l.pixelStoreUnpackPremultiplyAlpha.set(!1),a.demTexture=a.demTexture||e.getTileTexture(_),a.demTexture){const e=a.demTexture;e.update(p,{premultiply:!1}),e.bind(c.NEAREST,c.CLAMP_TO_EDGE);}else a.demTexture=new t.T(l,p,c.RGBA,{premultiply:!1}),a.demTexture.bind(c.NEAREST,c.CLAMP_TO_EDGE);l.activeTexture.set(c.TEXTURE0);let m=a.fbo;if(!m){const e=new t.T(l,{width:d,height:d,data:null},c.RGBA);e.bind(c.LINEAR,c.CLAMP_TO_EDGE),m=a.fbo=l.createFramebuffer(d,d,!0,!1),m.colorAttachment.set(e.texture);}l.bindFramebuffer.set(m.framebuffer),l.viewport.set([0,0,d,d]),e.useProgram("hillshadePrepare").draw(l,c.TRIANGLES,o,s,n,ei.disabled,ta(a.tileID,u),null,null,r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),a.needsHillshadePrepare=!1;}}(e,i,r,a,c,ai.disabled,h),n.viewport.set([0,0,e.width,e.height]);else if("translucent"===e.renderPass)if(l){const[t,o,n]=e.stencilConfigForOverlapTwoPass(r);Sr(e,i,a,n,t,c,h,!1,s),Sr(e,i,a,n,o,c,h,!0,s);}else {const[t,o]=e.getStencilConfigForOverlapAndUpdateStencilID(r);Sr(e,i,a,o,t,c,h,!1,s);}}(e,i,a,r,o):t.ct(a)?function(e,t,i,a,r){if("translucent"!==e.renderPass)return;if(!a.length)return;const{isRenderingToTexture:o}=r,s=e.style.projection.useSubdivision,n=e.getDepthModeForSublayer(0,ti.ReadOnly),l=e.colorModeForRenderPass();if(s){const[r,s,c]=e.stencilConfigForOverlapTwoPass(a);Rr(e,t,i,c,r,n,l,!1,o),Rr(e,t,i,c,s,n,l,!0,o);}else {const[r,s]=e.getStencilConfigForOverlapAndUpdateStencilID(a);Rr(e,t,i,s,r,n,l,!1,o);}}(e,i,a,r,o):t.bU(a)?function(e,t,i,a,r){if("translucent"!==e.renderPass)return;if(0===i.paint.get("raster-opacity"))return;if(!a.length)return;const{isRenderingToTexture:o}=r,s=t.getSource(),n=e.style.projection.useSubdivision;if(s instanceof te)Dr(e,t,i,a,null,!1,!1,s.tileCoords,s.flippedWindingOrder,o);else if(n){const[r,s,n]=e.stencilConfigForOverlapTwoPass(a);Dr(e,t,i,n,r,!1,!0,zr,!1,o),Dr(e,t,i,n,s,!0,!0,zr,!1,o);}else {const[r,s]=e.getStencilConfigForOverlapAndUpdateStencilID(a);Dr(e,t,i,s,r,!1,!0,zr,!1,o);}}(e,i,a,r,o):t.cu(a)?function(e,t,i,a,r){const o=i.paint.get("background-color"),s=i.paint.get("background-opacity");if(0===s)return;const{isRenderingToTexture:n}=r,l=e.context,c=l.gl,h=e.style.projection,u=e.transform,d=u.tileSize,_=i.paint.get("background-pattern");if(e.isPatternMissing(_))return;const p=!_&&1===o.a&&1===s&&e.opaquePassEnabledForLayer()?"opaque":"translucent";if(e.renderPass!==p)return;const m=ai.disabled,f=e.getDepthModeForSublayer(0,"opaque"===p?ti.ReadWrite:ti.ReadOnly),g=e.colorModeForRenderPass(),v=e.useProgram(_?"backgroundPattern":"background"),x=a||Ie(u,{tileSize:d,terrain:e.style.map.terrain});_&&(l.activeTexture.set(c.TEXTURE0),e.imageManager.bind(e.context));const b=i.getCrossfadeParameters();for(const t of x){const a=u.getProjectionData({overscaledTileID:t,applyGlobeMatrix:!n,applyTerrainMatrix:!0}),r=_?ga(s,e,_,{tileID:t,tileSize:d},b):fa(s,o),p=e.style.map.terrain&&e.style.map.terrain.getTerrainData(t),x=h.getMeshFromTileID(l,t.canonical,!1,!0,"raster");v.draw(l,c.TRIANGLES,f,m,g,ei.backCCW,r,p,a,i.id,x.vertexBuffer,x.indexBuffer,x.segments);}}(e,0,a,r,o):t.cv(a)&&function(e,t,i,a){const{isRenderingGlobe:r}=a,o=e.context,s=i.implementation,n=e.style.projection,l=e.transform,c=l.getProjectionDataForCustomLayer(r),h={farZ:l.farZ,nearZ:l.nearZ,fov:l.fov*Math.PI/180,modelViewProjectionMatrix:l.modelViewProjectionMatrix,projectionMatrix:l.projectionMatrix,shaderData:{variantName:n.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;\nuniform mat4 u_projection_matrix;\n${n.shaderPreludeCode.vertexSource}`,define:n.shaderDefine},defaultProjectionData:c},u=s.renderingMode?s.renderingMode:"2d";if("offscreen"===e.renderPass){const t=s.prerender;t&&(e.setCustomLayerDefaults(),o.setColorMode(e.colorModeForRenderPass()),t.call(s,o.gl,h),o.setDirty(),e.setBaseState());}else if("translucent"===e.renderPass){e.setCustomLayerDefaults(),o.setColorMode(e.colorModeForRenderPass()),o.setStencilMode(ai.disabled);const t="3d"===u?e.getDepthModeFor3D():e.getDepthModeForSublayer(0,ti.ReadOnly);o.setDepthMode(t),s.render(o.gl,h),o.setDirty(),e.setBaseState(),o.bindFramebuffer.set(null);}}(e,0,a,o));}saveTileTexture(e){const t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e];}getTileTexture(e){const t=this._tileTextures[e];return t&&t.length>0?t.pop():null}isPatternMissing(e){if(!e)return !1;if(!e.from||!e.to)return !0;const t=this.imageManager.getPattern(e.from.toString()),i=this.imageManager.getPattern(e.to.toString());return !t||!i}useProgram(e,t,i=!1,a=[]){this.cache=this.cache||{};const r=!!this.style.map.terrain,o=this.style.projection,s=i?At.projectionMercator:o.shaderPreludeCode,n=i?Bt:o.shaderDefine,l=e+(t?t.cacheKey:"")+`/${i?Ot:o.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(r?"/terrain":"")+(a?`/${a.join("/")}`:"");return this.cache[l]||(this.cache[l]=new Zi(this.context,At[e],t,xa[e],this._showOverdrawInspector,r,s,n,a)),this.cache[l]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault();}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD);}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA));}destroy(){var e,t;if(this._tileTextures){for(const e in this._tileTextures){const t=this._tileTextures[e];if(t)for(const e of t)e.destroy();}this._tileTextures={};}if(this.tileExtentBuffer&&this.tileExtentBuffer.destroy(),this.debugBuffer&&this.debugBuffer.destroy(),this.rasterBoundsBuffer&&this.rasterBoundsBuffer.destroy(),this.rasterBoundsBufferPosOnly&&this.rasterBoundsBufferPosOnly.destroy(),this.viewportBuffer&&this.viewportBuffer.destroy(),this.tileBorderIndexBuffer&&this.tileBorderIndexBuffer.destroy(),this.quadTriangleIndexBuffer&&this.quadTriangleIndexBuffer.destroy(),this.tileExtentMesh&&(null===(e=this.tileExtentMesh.vertexBuffer)||void 0===e||e.destroy()),this.tileExtentMesh&&(null===(t=this.tileExtentMesh.indexBuffer)||void 0===t||t.destroy()),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.cache){for(const e in this.cache){const t=this.cache[e];t&&t.program&&this.context.gl.deleteProgram(t.program);}this.cache={};}this.context&&this.context.setDefault();}overLimit(){const{drawingBufferWidth:e,drawingBufferHeight:t}=this.context.gl;return this.width!==e||this.height!==t}}function Wr(e,t){let i,a=!1,r=null,o=null;const s=()=>{r=null,a&&(e.apply(o,i),r=setTimeout(s,t),a=!1);};return (...e)=>(a=!0,o=this,i=e,r||s(),r)}class $r{constructor(e){this._getCurrentHash=()=>{const e=window.location.hash.replace("#","");if(this._hashName){let t;return e.split("&").map((e=>e.split("="))).forEach((e=>{e[0]===this._hashName&&(t=e);})),(t&&t[1]||"").split("/")}return e.split("/")},this._onHashChange=()=>{const e=this._getCurrentHash();if(!this._isValidHash(e))return !1;const t=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(e[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:t,pitch:+(e[4]||0)}),!0},this._updateHashUnthrottled=()=>{const e=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,e);},this._removeHash=()=>{const e=this._getCurrentHash();if(0===e.length)return;const t=e.join("/");let i=t;i.split("&").length>0&&(i=i.split("&")[0]),this._hashName&&(i=`${this._hashName}=${t}`);let a=window.location.hash.replace(i,"");a.startsWith("#&")?a=a.slice(0,1)+a.slice(2):"#"===a&&(a="");let r=window.location.href.replace(/(#.+)?$/,a);r=r.replace("&&","&"),window.history.replaceState(window.history.state,null,r);},this._updateHash=Wr(this._updateHashUnthrottled,300),this._hashName=e&&encodeURIComponent(e);}addTo(e){return this._map=e,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(e){const t=this._map.getCenter(),i=Math.round(100*this._map.getZoom())/100,a=Math.ceil((i*Math.LN2+Math.log(512/360/.5))/Math.LN10),r=Math.pow(10,a),o=Math.round(t.lng*r)/r,s=Math.round(t.lat*r)/r,n=this._map.getBearing(),l=this._map.getPitch();let c="";if(c+=e?`/${o}/${s}/${i}`:`${i}/${s}/${o}`,(n||l)&&(c+="/"+Math.round(10*n)/10),l&&(c+=`/${Math.round(l)}`),this._hashName){const e=this._hashName;let t=!1;const i=window.location.hash.slice(1).split("&").map((i=>{const a=i.split("=")[0];return a===e?(t=!0,`${a}=${c}`):i})).filter((e=>e));return t||i.push(`${e}=${c}`),`#${i.join("&")}`}return `#${c}`}_isValidHash(e){if(e.length<3||e.some(isNaN))return !1;try{new t.V(+e[2],+e[1]);}catch(e){return !1}const i=+e[0],a=+(e[3]||0),r=+(e[4]||0);return i>=this._map.getMinZoom()&&i<=this._map.getMaxZoom()&&a>=-180&&a<=180&&r>=this._map.getMinPitch()&&r<=this._map.getMaxPitch()}}const Hr={linearity:.3,easing:t.cw(0,0,.3,1)},Xr=t.e({deceleration:2500,maxSpeed:1400},Hr),Kr=t.e({deceleration:20,maxSpeed:1400},Hr),Yr=t.e({deceleration:1e3,maxSpeed:360},Hr),Qr=t.e({deceleration:1e3,maxSpeed:90},Hr),Jr=t.e({deceleration:1e3,maxSpeed:360},Hr);class eo{constructor(e){this._map=e,this.clear();}clear(){this._inertiaBuffer=[];}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:c(),settings:e});}_drainInertiaBuffer(){const e=this._inertiaBuffer,t=c();for(;e.length>0&&t-e[0].time>160;)e.shift();}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const i={zoom:0,bearing:0,pitch:0,roll:0,pan:new t.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:e}of this._inertiaBuffer)i.zoom+=e.zoomDelta||0,i.bearing+=e.bearingDelta||0,i.pitch+=e.pitchDelta||0,i.roll+=e.rollDelta||0,e.panDelta&&i.pan._add(e.panDelta),e.around&&(i.around=e.around),e.pinchAround&&(i.pinchAround=e.pinchAround);const a=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,r={};if(i.pan.mag()){const o=io(i.pan.mag(),a,t.e({},Xr,e||{})),s=i.pan.mult(o.amount/i.pan.mag()),n=this._map.cameraHelper.handlePanInertia(s,this._map.transform);r.center=n.easingCenter,r.offset=n.easingOffset,to(r,o);}if(i.zoom){const e=io(i.zoom,a,Kr);r.zoom=this._map.transform.zoom+e.amount,to(r,e);}if(i.bearing){const e=io(i.bearing,a,Yr);r.bearing=this._map.transform.bearing+t.an(e.amount,-179,179),to(r,e);}if(i.pitch){const e=io(i.pitch,a,Qr);r.pitch=this._map.transform.pitch+e.amount,to(r,e);}if(i.roll){const e=io(i.roll,a,Jr);r.roll=this._map.transform.roll+t.an(e.amount,-179,179),to(r,e);}if(r.zoom||r.bearing){const e=void 0===i.pinchAround?i.around:i.pinchAround;r.around=e?this._map.unproject(e):this._map.getCenter();}return this.clear(),t.e(r,{noMoveStart:!0})}}function to(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing);}function io(e,i,a){const{maxSpeed:r,linearity:o,deceleration:s}=a,n=t.an(e*o/(i/1e3),-r,r),l=Math.abs(n)/(s*o);return {easing:a.easing,duration:1e3*l,amount:n*(l/2)}}class ao extends t.l{preventDefault(){this._defaultPrevented=!0;}get defaultPrevented(){return this._defaultPrevented}constructor(e,i,a,r={}){a=a instanceof MouseEvent?a:new MouseEvent(e,a);const o=h.mousePos(i.getCanvas(),a),s=i.unproject(o);super(e,t.e({point:o,lngLat:s,originalEvent:a},r)),this._defaultPrevented=!1,this.target=i;}}class ro extends t.l{preventDefault(){this._defaultPrevented=!0;}get defaultPrevented(){return this._defaultPrevented}constructor(e,i,a){const r="touchend"===e?a.changedTouches:a.touches,o=h.touchPos(i.getCanvasContainer(),r),s=o.map((e=>i.unproject(e))),n=o.reduce(((e,t,i,a)=>e.add(t.div(a.length))),new t.P(0,0));super(e,{points:o,point:n,lngLats:s,lngLat:i.unproject(n),originalEvent:a}),this._defaultPrevented=!1;}}class oo extends t.l{preventDefault(){this._defaultPrevented=!0;}get defaultPrevented(){return this._defaultPrevented}constructor(e,t,i){super(e,{originalEvent:i}),this._defaultPrevented=!1;}}class so{constructor(e,t){this._map=e,this._clickTolerance=t.clickTolerance;}reset(){delete this._mousedownPos;}wheel(e){return this._firePreventable(new oo(e.type,this._map,e))}mousedown(e,t){return this._mousedownPos=t,this._firePreventable(new ao(e.type,this._map,e))}mouseup(e){this._map.fire(new ao(e.type,this._map,e));}click(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||this._map.fire(new ao(e.type,this._map,e));}dblclick(e){return this._firePreventable(new ao(e.type,this._map,e))}mouseover(e){this._map.fire(new ao(e.type,this._map,e));}mouseout(e){this._map.fire(new ao(e.type,this._map,e));}touchstart(e){return this._firePreventable(new ro(e.type,this._map,e))}touchmove(e){this._map.fire(new ro(e.type,this._map,e));}touchend(e){this._map.fire(new ro(e.type,this._map,e));}touchcancel(e){this._map.fire(new ro(e.type,this._map,e));}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return {}}isEnabled(){return !0}isActive(){return !1}enable(){}disable(){}}class no{constructor(e){this._map=e;}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent;}mousemove(e){this._map.fire(new ao(e.type,this._map,e));}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1;}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ao("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent);}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._ignoreContextMenu||this._map.fire(new ao(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault();}isEnabled(){return !0}isActive(){return !1}enable(){}disable(){}}class lo{constructor(e){this._map=e;}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return {lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(e){return this.transform.screenPointToLocation(t.P.convert(e),this._map.terrain)}}class co{constructor(e,t){this._map=e,this._tr=new lo(e),this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1;}isEnabled(){return !!this._enabled}isActive(){return !!this._active}enable(){this.isEnabled()||(this._enabled=!0);}disable(){this.isEnabled()&&(this._enabled=!1);}mousedown(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(h.disableDrag(),this._startPos=this._lastPos=t,this._active=!0);}mousemoveWindow(e,t){if(!this._active)return;const i=t;if(this._lastPos.equals(i)||!this._box&&i.dist(this._startPos)<this._clickTolerance)return;const a=this._startPos;this._lastPos=i,this._box||(this._box=h.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",e));const r=Math.min(a.x,i.x),o=Math.max(a.x,i.x),s=Math.min(a.y,i.y),n=Math.max(a.y,i.y);h.setTransform(this._box,`translate(${r}px,${s}px)`),this._box.style.width=o-r+"px",this._box.style.height=n-s+"px";}mouseupWindow(e,i){if(!this._active)return;if(0!==e.button)return;const a=this._startPos,r=i;if(this.reset(),h.suppressClick(),a.x!==r.x||a.y!==r.y)return this._map.fire(new t.l("boxzoomend",{originalEvent:e})),{cameraAnimation:e=>e.fitScreenCoordinates(a,r,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",e);}keydown(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e));}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(h.remove(this._box),this._box=null),h.enableDrag(),delete this._startPos,delete this._lastPos;}_fireEvent(e,i){return this._map.fire(new t.l(e,{originalEvent:i}))}}function ho(e,t){if(e.length!==t.length)throw new Error(`The number of touches and points are not equal - touches ${e.length}, points ${t.length}`);const i={};for(let a=0;a<e.length;a++)i[e[a].identifier]=t[a];return i}class uo{constructor(e){this.reset(),this.numTouches=e.numTouches;}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1;}touchstart(e,i,a){(this.centroid||a.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),a.length===this.numTouches&&(this.centroid=function(e){const i=new t.P(0,0);for(const t of e)i._add(t);return i.div(e.length)}(i),this.touches=ho(a,i)));}touchmove(e,t,i){if(this.aborted||!this.centroid)return;const a=ho(i,t);for(const e in this.touches){const t=a[e];(!t||t.dist(this.touches[e])>30)&&(this.aborted=!0);}}touchend(e,t,i){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===i.length){const e=!this.aborted&&this.centroid;if(this.reset(),e)return e}}}class _o{constructor(e){this.singleTap=new uo(e),this.numTaps=e.numTaps,this.reset();}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset();}touchstart(e,t,i){this.singleTap.touchstart(e,t,i);}touchmove(e,t,i){this.singleTap.touchmove(e,t,i);}touchend(e,t,i){const a=this.singleTap.touchend(e,t,i);if(a){const t=e.timeStamp-this.lastTime<500,i=!this.lastTap||this.lastTap.dist(a)<30;if(t&&i||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=a,this.count===this.numTaps)return this.reset(),a}}}class po{constructor(e){this._tr=new lo(e),this._zoomIn=new _o({numTouches:1,numTaps:2}),this._zoomOut=new _o({numTouches:2,numTaps:1}),this.reset();}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset();}touchstart(e,t,i){this._zoomIn.touchstart(e,t,i),this._zoomOut.touchstart(e,t,i);}touchmove(e,t,i){this._zoomIn.touchmove(e,t,i),this._zoomOut.touchmove(e,t,i);}touchend(e,t,i){const a=this._zoomIn.touchend(e,t,i),r=this._zoomOut.touchend(e,t,i),o=this._tr;return a?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:o.zoom+1,around:o.unproject(a)},{originalEvent:e})}):r?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:o.zoom-1,around:o.unproject(r)},{originalEvent:e})}):void 0}touchcancel(){this.reset();}enable(){this._enabled=!0;}disable(){this._enabled=!1,this.reset();}isEnabled(){return this._enabled}isActive(){return this._active}}class mo{constructor(e){this._enabled=!!e.enable,this._moveStateManager=e.moveStateManager,this._clickTolerance=e.clickTolerance||1,this._moveFunction=e.move,this._activateOnStart=!!e.activateOnStart,e.assignEvents(this),this.reset();}reset(e){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(e);}_move(...e){const t=this._moveFunction(...e);if(t.bearingDelta||t.pitchDelta||t.rollDelta||t.around||t.panDelta)return this._active=!0,t}dragStart(e,t){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(e)&&(this._moveStateManager.startMove(e),this._lastPoint=Array.isArray(t)?t[0]:t,this._activateOnStart&&this._lastPoint&&(this._active=!0));}dragMove(e,t){if(!this.isEnabled())return;const i=this._lastPoint;if(!i)return;if(e.preventDefault(),!this._moveStateManager.isValidMoveEvent(e))return void this.reset(e);const a=Array.isArray(t)?t[0]:t;return !this._moved&&a.dist(i)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=a,this._move(i,a))}dragEnd(e){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(e)&&(this._moved&&h.suppressClick(),this.reset(e));}enable(){this._enabled=!0;}disable(){this._enabled=!1,this.reset();}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const fo=0,go=2,vo={[fo]:1,[go]:2};class xo{constructor(e){this._correctEvent=e.checkCorrectEvent;}startMove(e){const t=h.mouseButton(e);this._eventButton=t;}endMove(e){delete this._eventButton;}isValidStartEvent(e){return this._correctEvent(e)}isValidMoveEvent(e){return !function(e,t){const i=vo[t];return void 0===e.buttons||(e.buttons&i)!==i}(e,this._eventButton)}isValidEndEvent(e){return h.mouseButton(e)===this._eventButton}}class bo{constructor(){this._firstTouch=void 0;}_isOneFingerTouch(e){return 1===e.targetTouches.length}_isSameTouchEvent(e){return e.targetTouches[0].identifier===this._firstTouch}startMove(e){this._firstTouch=e.targetTouches[0].identifier;}endMove(e){delete this._firstTouch;}isValidStartEvent(e){return this._isOneFingerTouch(e)}isValidMoveEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}isValidEndEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}}class yo{constructor(e=new xo({checkCorrectEvent:()=>!0}),t=new bo){this.mouseMoveStateManager=e,this.oneFingerTouchMoveStateManager=t;}_executeRelevantHandler(e,t,i){return e instanceof MouseEvent?t(e):"undefined"!=typeof TouchEvent&&e instanceof TouchEvent?i(e):void 0}startMove(e){this._executeRelevantHandler(e,(e=>this.mouseMoveStateManager.startMove(e)),(e=>this.oneFingerTouchMoveStateManager.startMove(e)));}endMove(e){this._executeRelevantHandler(e,(e=>this.mouseMoveStateManager.endMove(e)),(e=>this.oneFingerTouchMoveStateManager.endMove(e)));}isValidStartEvent(e){return this._executeRelevantHandler(e,(e=>this.mouseMoveStateManager.isValidStartEvent(e)),(e=>this.oneFingerTouchMoveStateManager.isValidStartEvent(e)))}isValidMoveEvent(e){return this._executeRelevantHandler(e,(e=>this.mouseMoveStateManager.isValidMoveEvent(e)),(e=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(e)))}isValidEndEvent(e){return this._executeRelevantHandler(e,(e=>this.mouseMoveStateManager.isValidEndEvent(e)),(e=>this.oneFingerTouchMoveStateManager.isValidEndEvent(e)))}}const wo=e=>{e.mousedown=e.dragStart,e.mousemoveWindow=e.dragMove,e.mouseup=e.dragEnd,e.contextmenu=e=>{e.preventDefault();};};class To{constructor(e,t){this._clickTolerance=e.clickTolerance||1,this._map=t,this.reset();}reset(){this._active=!1,this._touches={},this._sum=new t.P(0,0);}_shouldBePrevented(e){return e<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(e,t,i){return this._calculateTransform(e,t,i)}touchmove(e,t,i){if(this._active){if(!this._shouldBePrevented(i.length))return e.preventDefault(),this._calculateTransform(e,t,i);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",e);}}touchend(e,t,i){this._calculateTransform(e,t,i),this._active&&this._shouldBePrevented(i.length)&&this.reset();}touchcancel(){this.reset();}_calculateTransform(e,i,a){a.length>0&&(this._active=!0);const r=ho(a,i),o=new t.P(0,0),s=new t.P(0,0);let n=0;for(const e in r){const t=r[e],i=this._touches[e];i&&(o._add(t),s._add(t.sub(i)),n++,r[e]=t);}if(this._touches=r,this._shouldBePrevented(n)||!s.mag())return;const l=s.div(n);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(n),panDelta:l}}enable(){this._enabled=!0;}disable(){this._enabled=!1,this.reset();}isEnabled(){return this._enabled}isActive(){return this._active}}class Po{constructor(){this.reset();}reset(){this._active=!1,delete this._firstTwoTouches;}touchstart(e,t,i){this._firstTwoTouches||i.length<2||(this._firstTwoTouches=[i[0].identifier,i[1].identifier],this._start([t[0],t[1]]));}touchmove(e,t,i){if(!this._firstTwoTouches)return;e.preventDefault();const[a,r]=this._firstTwoTouches,o=Co(i,t,a),s=Co(i,t,r);if(!o||!s)return;const n=this._aroundCenter?null:o.add(s).div(2);return this._move([o,s],n,e)}touchend(e,t,i){if(!this._firstTwoTouches)return;const[a,r]=this._firstTwoTouches,o=Co(i,t,a),s=Co(i,t,r);o&&s||(this._active&&h.suppressClick(),this.reset());}touchcancel(){this.reset();}enable(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around;}disable(){this._enabled=!1,this.reset();}isEnabled(){return !!this._enabled}isActive(){return !!this._active}}function Co(e,t,i){for(let a=0;a<e.length;a++)if(e[a].identifier===i)return t[a]}function Io(e,t){return Math.log(e/t)/Math.LN2}class Mo extends Po{reset(){super.reset(),delete this._distance,delete this._startDistance;}_start(e){this._startDistance=this._distance=e[0].dist(e[1]);}_move(e,t){const i=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Io(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Io(this._distance,i),pinchAround:t}}}function Eo(e,t){return 180*e.angleWith(t)/Math.PI}class So extends Po{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector;}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1]);}_move(e,t,i){const a=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Eo(this._vector,a),pinchAround:t}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const t=25/(Math.PI*this._minDiameter)*360,i=Eo(e,this._startVector);return Math.abs(i)<t}}function Ro(e){return Math.abs(e.y)>Math.abs(e.x)}class zo extends Po{constructor(e){super(),this._currentTouchCount=0,this._map=e;}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints;}touchstart(e,t,i){super.touchstart(e,t,i),this._currentTouchCount=i.length;}_start(e){this._lastPoints=e,Ro(e[0].sub(e[1]))&&(this._valid=!1);}_move(e,t,i){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const a=e[0].sub(this._lastPoints[0]),r=e[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(a,r,i.timeStamp),this._valid?(this._lastPoints=e,this._active=!0,{pitchDelta:(a.y+r.y)/2*-.5}):void 0}gestureBeginsVertically(e,t,i){if(void 0!==this._valid)return this._valid;const a=e.mag()>=2,r=t.mag()>=2;if(!a&&!r)return;if(!a||!r)return void 0===this._firstMove&&(this._firstMove=i),i-this._firstMove<100&&void 0;const o=e.y>0==t.y>0;return Ro(e)&&Ro(t)&&o}}const Do={panStep:100,bearingStep:15,pitchStep:10};class Ao{constructor(e){this._tr=new lo(e);const t=Do;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1;}reset(){this._active=!1;}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let t=0,i=0,a=0,r=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?i=-1:(e.preventDefault(),r=-1);break;case 39:e.shiftKey?i=1:(e.preventDefault(),r=1);break;case 38:e.shiftKey?a=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?a=-1:(e.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(i=0,a=0),{cameraAnimation:s=>{const n=this._tr;s.easeTo({duration:300,easeId:"keyboardHandler",easing:Lo,zoom:t?Math.round(n.zoom)+t*(e.shiftKey?2:1):n.zoom,bearing:n.bearing+i*this._bearingStep,pitch:n.pitch+a*this._pitchStep,offset:[-r*this._panStep,-o*this._panStep],center:n.center},{originalEvent:e});}}}enable(){this._enabled=!0;}disable(){this._enabled=!1,this.reset();}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0;}enableRotation(){this._rotationDisabled=!1;}}function Lo(e){return e*(2-e)}const ko=4.000244140625,Fo=1/450;class Bo{constructor(e,t){this._onTimeout=e=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e);},this._map=e,this._tr=new lo(e),this._triggerRenderFrame=t,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Fo;}setZoomRate(e){this._defaultZoomRate=e;}setWheelZoomRate(e){this._wheelZoomRate=e;}isEnabled(){return !!this._enabled}isActive(){return !!this._active||void 0!==this._finishTimeout}isZooming(){return !!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around);}disable(){this.isEnabled()&&(this._enabled=!1);}_shouldBePrevented(e){return !!this._map.cooperativeGestures.isEnabled()&&!(e.ctrlKey||this._map.cooperativeGestures.isBypassed(e))}wheel(e){if(!this.isEnabled())return;if(this._shouldBePrevented(e))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",e);let t=e.deltaMode===WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const i=c(),a=i-(this._lastWheelEventTime||0);this._lastWheelEventTime=i,0!==t&&t%ko==0?this._type="wheel":0!==t&&Math.abs(t)<4?this._type="trackpad":a>400?(this._type=null,this._lastValue=t,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(a*t)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,t+=this._lastValue)),e.shiftKey&&t&&(t/=4),this._type&&(this._lastWheelEvent=e,this._delta-=t,this._active||this._start(e)),e.preventDefault();}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const i=h.mousePos(this._map.getCanvas(),e),a=this._tr;this._aroundPoint=this._aroundCenter?a.transform.locationToScreenPoint(t.V.convert(a.center)):i,this._frameId||(this._frameId=!0,this._triggerRenderFrame());}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const e=this._tr.transform;if("number"==typeof this._lastExpectedZoom){const t=e.zoom-this._lastExpectedZoom;"number"==typeof this._startZoom&&(this._startZoom+=t),"number"==typeof this._targetZoom&&(this._targetZoom+=t);}if(0!==this._delta){const i="wheel"===this._type&&Math.abs(this._delta)>ko?this._wheelZoomRate:this._defaultZoomRate;let a=2/(1+Math.exp(-Math.abs(this._delta*i)));this._delta<0&&0!==a&&(a=1/a);const r="number"!=typeof this._targetZoom?e.scale:t.aq(this._targetZoom);this._targetZoom=e.applyConstrain(e.getCameraLngLat(),t.at(r*a)).zoom,"wheel"===this._type&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0;}const i="number"!=typeof this._targetZoom?e.zoom:this._targetZoom,a=this._startZoom,r=this._easing;let o,s=!1;if("wheel"===this._type&&a&&r){const e=c()-this._lastWheelEventTime,n=Math.min((e+5)/200,1),l=r(n);o=t.G.number(a,i,l),n<1?this._frameId||(this._frameId=!0):s=!0;}else o=i,s=!0;return this._active=!0,s&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout;}),200)),this._lastExpectedZoom=o,{noInertia:!0,needsRenderFrame:!s,zoomDelta:o-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let i=t.cy;if(this._prevEase){const e=this._prevEase,a=(c()-e.start)/e.duration,r=e.easing(a+.01)-e.easing(a),o=.27/Math.sqrt(r*r+1e-4)*.01,s=Math.sqrt(.0729-o*o);i=t.cw(o,s,.25,1);}return this._prevEase={start:c(),duration:e,easing:i},i}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);}}class Oo{constructor(e,t){this._clickZoom=e,this._tapZoom=t;}enable(){this._clickZoom.enable(),this._tapZoom.enable();}disable(){this._clickZoom.disable(),this._tapZoom.disable();}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class jo{constructor(e){this._tr=new lo(e),this.reset();}reset(){this._active=!1;}dblclick(e,t){return e.preventDefault(),{cameraAnimation:i=>{i.easeTo({duration:300,zoom:this._tr.zoom+(e.shiftKey?-1:1),around:this._tr.unproject(t)},{originalEvent:e});}}}enable(){this._enabled=!0;}disable(){this._enabled=!1,this.reset();}isEnabled(){return this._enabled}isActive(){return this._active}}class No{constructor(){this._tap=new _o({numTouches:1,numTaps:1}),this.reset();}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset();}touchstart(e,t,i){if(!this._swipePoint)if(this._tapTime){const a=t[0],r=e.timeStamp-this._tapTime<500,o=this._tapPoint.dist(a)<30;r&&o?i.length>0&&(this._swipePoint=a,this._swipeTouch=i[0].identifier):this.reset();}else this._tap.touchstart(e,t,i);}touchmove(e,t,i){if(this._tapTime){if(this._swipePoint){if(i[0].identifier!==this._swipeTouch)return;const a=t[0],r=a.y-this._swipePoint.y;return this._swipePoint=a,e.preventDefault(),this._active=!0,{zoomDelta:r/128}}}else this._tap.touchmove(e,t,i);}touchend(e,t,i){if(this._tapTime)this._swipePoint&&0===i.length&&this.reset();else {const a=this._tap.touchend(e,t,i);a&&(this._tapTime=e.timeStamp,this._tapPoint=a);}}touchcancel(){this.reset();}enable(){this._enabled=!0;}disable(){this._enabled=!1,this.reset();}isEnabled(){return this._enabled}isActive(){return this._active}}class Zo{constructor(e,t,i){this._el=e,this._mousePan=t,this._touchPan=i;}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan");}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan");}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Go{constructor(e,t,i,a){this._pitchWithRotate=e.pitchWithRotate,this._rollEnabled=e.rollEnabled,this._mouseRotate=t,this._mousePitch=i,this._mouseRoll=a;}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable();}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable();}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Uo{constructor(e,t,i,a){this._el=e,this._touchZoom=t,this._touchRotate=i,this._tapDragZoom=a,this._rotationDisabled=!1,this._enabled=!0;}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate");}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate");}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable();}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable();}}class Vo{constructor(e,t){this._bypassKey=-1!==navigator.userAgent.indexOf("Mac")?"metaKey":"ctrlKey",this._map=e,this._options=t,this._enabled=!1;}isActive(){return !1}reset(){}_setupUI(){if(this._container)return;const e=this._map.getCanvasContainer();e.classList.add("maplibregl-cooperative-gestures"),this._container=h.create("div","maplibregl-cooperative-gesture-screen",e);let t=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");"metaKey"===this._bypassKey&&(t=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const i=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),a=document.createElement("div");a.className="maplibregl-desktop-message",a.textContent=t,this._container.appendChild(a);const r=document.createElement("div");r.className="maplibregl-mobile-message",r.textContent=i,this._container.appendChild(r),this._container.setAttribute("aria-hidden","true");}_destroyUI(){this._container&&(h.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container;}enable(){this._setupUI(),this._enabled=!0;}disable(){this._enabled=!1,this._destroyUI();}isEnabled(){return this._enabled}isBypassed(e){return e[this._bypassKey]}notifyGestureBlocked(e,i){this._enabled&&(this._map.fire(new t.l("cooperativegestureprevented",{gestureType:e,originalEvent:i})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show");}),100));}}const qo=e=>e.zoom||e.drag||e.roll||e.pitch||e.rotate;class Wo extends t.l{}function $o(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta||e.rollDelta}class Ho{constructor(e,i){this.handleWindowEvent=e=>{this.handleEvent(e,`${e.type}Window`);},this.handleEvent=(e,i)=>{if("blur"===e.type)return void this.stop(!0);this._updatingCamera=!0;const a="renderFrame"===e.type?void 0:e,r={needsRenderFrame:!1},o={},s={};for(const{handlerName:n,handler:l,allowed:c}of this._handlers){if(!l.isEnabled())continue;let u;if(this._blockedByActive(s,c,n))l.reset();else if(l[i||e.type]){if(t.cz(e,i||e.type)){const t=h.mousePos(this._map.getCanvas(),e);u=l[i||e.type](e,t);}else if(t.cA(e,i||e.type)){const t=this._getMapTouches(e.touches),a=h.touchPos(this._map.getCanvas(),t);u=l[i||e.type](e,a,t);}else t.cB(i||e.type)||(u=l[i||e.type](e));this.mergeHandlerResult(r,o,u,n,a),u&&u.needsRenderFrame&&this._triggerRenderFrame();}(u||l.isActive())&&(s[n]=l);}const n={};for(const e in this._previousActiveHandlers)s[e]||(n[e]=a);this._previousActiveHandlers=s,(Object.keys(n).length||$o(r))&&(this._changes.push([r,o,n]),this._triggerRenderFrame()),(Object.keys(s).length||$o(r))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:l}=r;l&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],l(this._map));},this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new eo(e),this._bearingSnap=i.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(i);const a=this._el;this._listeners=[[a,"touchstart",{passive:!0}],[a,"touchmove",{passive:!1}],[a,"touchend",void 0],[a,"touchcancel",void 0],[a,"mousedown",void 0],[a,"mousemove",void 0],[a,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[a,"mouseover",void 0],[a,"mouseout",void 0],[a,"dblclick",void 0],[a,"click",void 0],[a,"keydown",{capture:!1}],[a,"keyup",void 0],[a,"wheel",{passive:!1}],[a,"contextmenu",void 0],[window,"blur",void 0]];for(const[e,t,i]of this._listeners)h.addEventListener(e,t,e===document?this.handleWindowEvent:this.handleEvent,i);}destroy(){for(const[e,t,i]of this._listeners)h.removeEventListener(e,t,e===document?this.handleWindowEvent:this.handleEvent,i);}_addDefaultHandlers(e){const i=this._map,a=i.getCanvasContainer();this._add("mapEvent",new so(i,e));const r=i.boxZoom=new co(i,e);this._add("boxZoom",r),e.interactive&&e.boxZoom&&r.enable();const o=i.cooperativeGestures=new Vo(i,e.cooperativeGestures);this._add("cooperativeGestures",o),e.cooperativeGestures&&o.enable();const s=new po(i),n=new jo(i);i.doubleClickZoom=new Oo(n,s),this._add("tapZoom",s),this._add("clickZoom",n),e.interactive&&e.doubleClickZoom&&i.doubleClickZoom.enable();const l=new No;this._add("tapDragZoom",l);const c=i.touchPitch=new zo(i);this._add("touchPitch",c),e.interactive&&e.touchPitch&&i.touchPitch.enable(e.touchPitch);const u=()=>i.project(i.getCenter()),d=function({enable:e,clickTolerance:i,aroundCenter:a=!0,minPixelCenterThreshold:r=100,rotateDegreesPerPixelMoved:o=.8},s){const n=new xo({checkCorrectEvent:e=>0===h.mouseButton(e)&&e.ctrlKey||2===h.mouseButton(e)&&!e.ctrlKey});return new mo({clickTolerance:i,move:(e,i)=>{const n=s();if(a&&Math.abs(n.y-e.y)>r)return {bearingDelta:t.cx(new t.P(e.x,i.y),i,n)};let l=(i.x-e.x)*o;return a&&i.y<n.y&&(l=-l),{bearingDelta:l}},moveStateManager:n,enable:e,assignEvents:wo})}(e,u),_=function({enable:e,clickTolerance:t,pitchDegreesPerPixelMoved:i=-.5}){const a=new xo({checkCorrectEvent:e=>0===h.mouseButton(e)&&e.ctrlKey||2===h.mouseButton(e)});return new mo({clickTolerance:t,move:(e,t)=>({pitchDelta:(t.y-e.y)*i}),moveStateManager:a,enable:e,assignEvents:wo})}(e),p=function({enable:e,clickTolerance:t,rollDegreesPerPixelMoved:i=.3},a){const r=new xo({checkCorrectEvent:e=>2===h.mouseButton(e)&&e.ctrlKey});return new mo({clickTolerance:t,move:(e,t)=>{const r=a();let o=(t.x-e.x)*i;return t.y<r.y&&(o=-o),{rollDelta:o}},moveStateManager:r,enable:e,assignEvents:wo})}(e,u);i.dragRotate=new Go(e,d,_,p),this._add("mouseRotate",d,["mousePitch"]),this._add("mousePitch",_,["mouseRotate","mouseRoll"]),this._add("mouseRoll",p,["mousePitch"]),e.interactive&&e.dragRotate&&i.dragRotate.enable();const m=function({enable:e,clickTolerance:t}){const i=new xo({checkCorrectEvent:e=>0===h.mouseButton(e)&&!e.ctrlKey});return new mo({clickTolerance:t,move:(e,t)=>({around:t,panDelta:t.sub(e)}),activateOnStart:!0,moveStateManager:i,enable:e,assignEvents:wo})}(e),f=new To(e,i);i.dragPan=new Zo(a,m,f),this._add("mousePan",m),this._add("touchPan",f,["touchZoom","touchRotate"]),e.interactive&&e.dragPan&&i.dragPan.enable(e.dragPan);const g=new So,v=new Mo;i.touchZoomRotate=new Uo(a,v,g,l),this._add("touchRotate",g,["touchPan","touchZoom"]),this._add("touchZoom",v,["touchPan","touchRotate"]),e.interactive&&e.touchZoomRotate&&i.touchZoomRotate.enable(e.touchZoomRotate),this._add("blockableMapEvent",new no(i));const x=i.scrollZoom=new Bo(i,(()=>this._triggerRenderFrame()));this._add("scrollZoom",x,["mousePan"]),e.interactive&&e.scrollZoom&&i.scrollZoom.enable(e.scrollZoom);const b=i.keyboard=new Ao(i);this._add("keyboard",b),e.interactive&&e.keyboard&&i.keyboard.enable();}_add(e,t,i){this._handlers.push({handlerName:e,handler:t,allowed:i}),this._handlersById[e]=t;}stop(e){if(!this._updatingCamera){for(const{handler:e}of this._handlers)e.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[];}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return !0;return !1}isZooming(){return !!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return !!this._eventsInProgress.rotate}isMoving(){return Boolean(qo(this._eventsInProgress))||this.isZooming()}_blockedByActive(e,t,i){for(const a in e)if(a!==i&&(!t||t.indexOf(a)<0))return !0;return !1}_getMapTouches(e){const t=[];for(const i of e)this._el.contains(i.target)&&t.push(i);return t}mergeHandlerResult(e,i,a,r,o){if(!a)return;t.e(e,a);const s={handlerName:r,originalEvent:a.originalEvent||o};void 0!==a.zoomDelta&&(i.zoom=s),void 0!==a.panDelta&&(i.drag=s),void 0!==a.rollDelta&&(i.roll=s),void 0!==a.pitchDelta&&(i.pitch=s),void 0!==a.bearingDelta&&(i.rotate=s);}_applyChanges(){const e={},i={},a={};for(const[r,o,s]of this._changes)r.panDelta&&(e.panDelta=(e.panDelta||new t.P(0,0))._add(r.panDelta)),r.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+r.zoomDelta),r.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+r.bearingDelta),r.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+r.pitchDelta),r.rollDelta&&(e.rollDelta=(e.rollDelta||0)+r.rollDelta),void 0!==r.around&&(e.around=r.around),void 0!==r.pinchAround&&(e.pinchAround=r.pinchAround),r.noInertia&&(e.noInertia=r.noInertia),t.e(i,o),t.e(a,s);this._updateMapTransform(e,i,a),this._changes=[];}_updateMapTransform(e,t,i){const a=this._map,r=a._getTransformForUpdate(),o=a.terrain;if(!($o(e)||o&&this._terrainMovement))return this._fireEvents(t,i,!0);a._stop(!0);let{panDelta:s,zoomDelta:n,bearingDelta:l,pitchDelta:c,rollDelta:h,around:u,pinchAround:d}=e;void 0!==d&&(u=d),u=u||a.transform.centerPoint,o&&!r.isPointOnMapSurface(u)&&(u=r.centerPoint);const _={panDelta:s,zoomDelta:n,rollDelta:h,pitchDelta:c,bearingDelta:l,around:u};this._map.cameraHelper.useGlobeControls&&!r.isPointOnMapSurface(u)&&(u=r.centerPoint);const p=u.distSqr(r.centerPoint)<.01?r.center:r.screenPointToLocation(s?u.sub(s):u);this._handleMapControls({terrain:o,tr:r,deltasForHelper:_,preZoomAroundLoc:p,combinedEventsInProgress:t,panDelta:s}),a._applyUpdatedTransform(r),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(t,i,!0);}_handleMapControls({terrain:e,tr:t,deltasForHelper:i,preZoomAroundLoc:a,combinedEventsInProgress:r,panDelta:o}){const s=this._map.cameraHelper;if(s.handleMapControlsRollPitchBearingZoom(i,t),e)return s.useGlobeControls?(this._terrainMovement||!r.drag&&!r.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void s.handleMapControlsPan(i,t,a)):this._terrainMovement||!r.drag&&!r.zoom?void(r.drag&&this._terrainMovement&&o?t.setCenter(t.screenPointToLocation(t.centerPoint.sub(o))):s.handleMapControlsPan(i,t,a)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void s.handleMapControlsPan(i,t,a));s.handleMapControlsPan(i,t,a);}_fireEvents(e,i,a){const r=qo(this._eventsInProgress),o=qo(e),s={};for(const t in e){const{originalEvent:i}=e[t];this._eventsInProgress[t]||(s[`${t}start`]=i),this._eventsInProgress[t]=e[t];}!r&&o&&this._fireEvent("movestart",o.originalEvent);for(const e in s)this._fireEvent(e,s[e]);o&&this._fireEvent("move",o.originalEvent);for(const t in e){const{originalEvent:i}=e[t];this._fireEvent(t,i);}const l={};let c;for(const e in this._eventsInProgress){const{handlerName:t,originalEvent:a}=this._eventsInProgress[e];this._handlersById[t].isActive()||(delete this._eventsInProgress[e],c=i[t]||a,l[`${e}end`]=c);}for(const e in l)this._fireEvent(e,l[e]);const h=qo(this._eventsInProgress),u=(r||o)&&!h;if(u&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const e=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&e.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(e);}if(a&&u){this._updatingCamera=!0;const e=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),i=e=>0!==e&&-this._bearingSnap<e&&e<this._bearingSnap;!e||!e.essential&&n.prefersReducedMotion?(this._map.fire(new t.l("moveend",{originalEvent:c})),i(this._map.getBearing())&&this._map.resetNorth()):(i(e.bearing||this._map.getBearing())&&(e.bearing=0),e.freezeElevation=!0,this._map.easeTo(e,{originalEvent:c})),this._updatingCamera=!1;}}_fireEvent(e,i){this._map.fire(new t.l(e,i?{originalEvent:i}:{}));}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((e=>{delete this._frameId,this.handleEvent(new Wo("renderFrame",{timeStamp:e})),this._applyChanges();}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame());}}class Xo extends t.E{constructor(e,t,i){super(),this._renderFrameCallback=()=>{const e=Math.min((c()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop();},this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=i.bearingSnap,this.cameraHelper=t,this.on("moveend",(()=>{delete this._requestedCameraState;}));}migrateProjection(e,t){e.apply(this.transform),this.transform=e,this.cameraHelper=t;}getCenter(){return new t.V(this.transform.center.lng,this.transform.center.lat)}setCenter(e,t){return this.jumpTo({center:e},t)}getCenterElevation(){return this.transform.elevation}setCenterElevation(e,t){return this.jumpTo({elevation:e},t),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(e){this._centerClampedToGround=e;}panBy(e,i,a){return e=t.P.convert(e).mult(-1),this.panTo(this.transform.center,t.e({offset:e},i),a)}panTo(e,i,a){return this.easeTo(t.e({center:e},i),a)}getZoom(){return this.transform.zoom}setZoom(e,t){return this.jumpTo({zoom:e},t),this}zoomTo(e,i,a){return this.easeTo(t.e({zoom:e},i),a)}zoomIn(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}zoomOut(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(e,i){return e!=this.transform.fov&&(this.transform.setFov(e),this.fire(new t.l("movestart",i)).fire(new t.l("move",i)).fire(new t.l("moveend",i))),this}getBearing(){return this.transform.bearing}setBearing(e,t){return this.jumpTo({bearing:e},t),this}getPadding(){return this.transform.padding}setPadding(e,t){return this.jumpTo({padding:e},t),this}rotateTo(e,i,a){return this.easeTo(t.e({bearing:e},i),a)}resetNorth(e,i){return this.rotateTo(0,t.e({duration:1e3},e),i),this}resetNorthPitch(e,i){return this.easeTo(t.e({bearing:0,pitch:0,roll:0,duration:1e3},e),i),this}snapToNorth(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}getPitch(){return this.transform.pitch}setPitch(e,t){return this.jumpTo({pitch:e},t),this}getRoll(){return this.transform.roll}setRoll(e,t){return this.jumpTo({roll:e},t),this}cameraForBounds(e,t){e=$.convert(e).adjustAntiMeridian();const i=t&&t.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),i,t)}_cameraForBoxAndBearing(e,i,a,r){const o={top:0,bottom:0,right:0,left:0};if("number"==typeof(r=t.e({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},r)).padding){const e=r.padding;r.padding={top:e,bottom:e,right:e,left:e};}const s=t.e(o,r.padding);r.padding=s;const n=this.transform,l=new $(e,i);return this.cameraHelper.cameraForBoxAndBearing(r,s,l,a,n)}fitBounds(e,t,i){return this._fitInternal(this.cameraForBounds(e,t),t,i)}fitScreenCoordinates(e,i,a,r,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(t.P.convert(e)),this.transform.screenPointToLocation(t.P.convert(i)),a,r),r,o)}_fitInternal(e,i,a){return e?(delete(i=t.e(e,i)).padding,i.linear?this.easeTo(i,a):this.flyTo(i,a)):this}jumpTo(e,i){this.stop();const a=this._getTransformForUpdate();let r=!1,o=!1,s=!1;const n=a.zoom;this.cameraHelper.handleJumpToCenterZoom(a,e);const l=a.zoom!==n;return "elevation"in e&&a.elevation!==+e.elevation&&a.setElevation(+e.elevation),"bearing"in e&&a.bearing!==+e.bearing&&(r=!0,a.setBearing(+e.bearing)),"pitch"in e&&a.pitch!==+e.pitch&&(o=!0,a.setPitch(+e.pitch)),"roll"in e&&a.roll!==+e.roll&&(s=!0,a.setRoll(+e.roll)),null==e.padding||a.isPaddingEqual(e.padding)||a.setPadding(e.padding),this._applyUpdatedTransform(a),this.fire(new t.l("movestart",i)).fire(new t.l("move",i)),l&&this.fire(new t.l("zoomstart",i)).fire(new t.l("zoom",i)).fire(new t.l("zoomend",i)),r&&this.fire(new t.l("rotatestart",i)).fire(new t.l("rotate",i)).fire(new t.l("rotateend",i)),o&&this.fire(new t.l("pitchstart",i)).fire(new t.l("pitch",i)).fire(new t.l("pitchend",i)),s&&this.fire(new t.l("rollstart",i)).fire(new t.l("roll",i)).fire(new t.l("rollend",i)),this.fire(new t.l("moveend",i))}calculateCameraOptionsFromTo(e,i,a,r=0){const o=t.a9.fromLngLat(e,i),s=t.a9.fromLngLat(a,r),n=s.x-o.x,l=s.y-o.y,c=s.z-o.z,h=Math.hypot(n,l,c);if(0===h)throw new Error("Can't calculate camera options with same From and To");const u=Math.hypot(n,l),d=t.at(this.transform.cameraToCenterDistance/h/this.transform.tileSize),_=180*Math.atan2(n,-l)/Math.PI;let p=180*Math.acos(u/h)/Math.PI;return p=c<0?90-p:90+p,{center:s.toLngLat(),elevation:r,zoom:d,pitch:p,bearing:_}}calculateCameraOptionsFromCameraLngLatAltRotation(e,t,i,a,r){const o=this.transform.calculateCenterFromCameraLngLatAlt(e,t,i,a);return {center:o.center,elevation:o.elevation,zoom:o.zoom,bearing:i,pitch:a,roll:r}}easeTo(e,i){this._stop(!1,e.easeId),(!1===(e=t.e({offset:[0,0],duration:500,easing:t.cy},e)).animate||!e.essential&&n.prefersReducedMotion)&&(e.duration=0);const a=this._getTransformForUpdate(),r=this.getBearing(),o=a.pitch,s=a.roll,l="bearing"in e?this._normalizeBearing(e.bearing,r):r,c="pitch"in e?+e.pitch:o,h="roll"in e?this._normalizeBearing(e.roll,s):s,u="padding"in e?e.padding:a.padding,d=t.P.convert(e.offset);let _,p;e.around&&(_=t.V.convert(e.around),p=a.locationToScreenPoint(_));const m={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},f=this.cameraHelper.handleEaseTo(a,{bearing:l,pitch:c,roll:h,padding:u,around:_,aroundPoint:p,offsetAsPoint:d,offset:e.offset,zoom:e.zoom,center:e.center});return this._rotating=this._rotating||r!==l,this._pitching=this._pitching||c!==o,this._rolling=this._rolling||h!==s,this._padding=!a.isPaddingEqual(u),this._zooming=this._zooming||f.isZooming,this._easeId=e.easeId,this._prepareEase(i,e.noMoveStart,m),this.terrain&&this._prepareElevation(f.elevationCenter),this._ease((t=>{f.easeFunc(t),this.terrain&&!e.freezeElevation&&this._updateElevation(t),this._applyUpdatedTransform(a),this._fireMoveEvents(i);}),(t=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(i,t);}),e),this}_prepareEase(e,i,a={}){this._moving=!0,i||a.moving||this.fire(new t.l("movestart",e)),this._zooming&&!a.zooming&&this.fire(new t.l("zoomstart",e)),this._rotating&&!a.rotating&&this.fire(new t.l("rotatestart",e)),this._pitching&&!a.pitching&&this.fire(new t.l("pitchstart",e)),this._rolling&&!a.rolling&&this.fire(new t.l("rollstart",e));}_prepareElevation(e){this._elevationCenter=e,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(e,this.transform.tileZoom),this._elevationFreeze=!0;}_updateElevation(e){void 0!==this._elevationStart&&void 0!==this._elevationCenter||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const i=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(e<1&&i!==this._elevationTarget){const t=this._elevationTarget-this._elevationStart;this._elevationStart+=e*(t-(i-(t*e+this._elevationStart))/(1-e)),this._elevationTarget=i;}this.transform.setElevation(t.G.number(this._elevationStart,this._elevationTarget,e));}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain);}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(e){if(!this.terrain&&e.elevation>=0&&e.pitch<=90)return {};const t=e.getCameraLngLat(),i=e.getCameraAltitude(),a=this.terrain?this.terrain.getElevationForLngLatZoom(t,e.zoom):0;if(i<a){const i=this.calculateCameraOptionsFromTo(t,a,e.center,e.elevation);return {pitch:i.pitch,zoom:i.zoom}}return {}}_applyUpdatedTransform(e){const t=[];if(t.push((e=>this._elevateCameraIfInsideTerrain(e))),this.transformCameraUpdate&&t.push((e=>this.transformCameraUpdate(e))),!t.length)return;const i=e.clone();for(const e of t){const t=i.clone(),{center:a,zoom:r,roll:o,pitch:s,bearing:n,elevation:l}=e(t);a&&t.setCenter(a),void 0!==l&&t.setElevation(l),void 0!==r&&t.setZoom(r),void 0!==o&&t.setRoll(o),void 0!==s&&t.setPitch(s),void 0!==n&&t.setBearing(n),i.apply(t);}this.transform.apply(i);}_fireMoveEvents(e){this.fire(new t.l("move",e)),this._zooming&&this.fire(new t.l("zoom",e)),this._rotating&&this.fire(new t.l("rotate",e)),this._pitching&&this.fire(new t.l("pitch",e)),this._rolling&&this.fire(new t.l("roll",e));}_afterEase(e,i){if(this._easeId&&i&&this._easeId===i)return;delete this._easeId;const a=this._zooming,r=this._rotating,o=this._pitching,s=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,a&&this.fire(new t.l("zoomend",e)),r&&this.fire(new t.l("rotateend",e)),o&&this.fire(new t.l("pitchend",e)),s&&this.fire(new t.l("rollend",e)),this.fire(new t.l("moveend",e));}flyTo(e,i){if(!e.essential&&n.prefersReducedMotion){const a=t.U(e,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(a,i)}this.stop(),e=t.e({offset:[0,0],speed:1.2,curve:1.42,easing:t.cy},e);const a=this._getTransformForUpdate(),r=a.bearing,o=a.pitch,s=a.roll,l=a.padding,c="bearing"in e?this._normalizeBearing(e.bearing,r):r,h="pitch"in e?+e.pitch:o,u="roll"in e?this._normalizeBearing(e.roll,s):s,d="padding"in e?e.padding:a.padding,_=t.P.convert(e.offset);let p=a.centerPoint.add(_);const m=a.screenPointToLocation(p),f=this.cameraHelper.handleFlyTo(a,{bearing:c,pitch:h,roll:u,padding:d,locationAtOffset:m,offsetAsPoint:_,center:e.center,minZoom:e.minZoom,zoom:e.zoom});let g=e.curve;const v=Math.max(a.width,a.height),x=v/f.scaleOfZoom,b=f.pixelPathLength;"number"==typeof f.scaleOfMinZoom&&(g=Math.sqrt(v/f.scaleOfMinZoom/b*2));const y=g*g;function w(e){const t=(x*x-v*v+(e?-1:1)*y*y*b*b)/(2*(e?x:v)*y*b);return Math.log(Math.sqrt(t*t+1)-t)}function T(e){return (Math.exp(e)-Math.exp(-e))/2}function P(e){return (Math.exp(e)+Math.exp(-e))/2}const C=w(!1);let I=function(e){return P(C)/P(C+g*e)},M=function(e){return v*((P(C)*(T(t=C+g*e)/P(t))-T(C))/y)/b;var t;},E=(w(!0)-C)/g;if(Math.abs(b)<2e-6||!isFinite(E)){if(Math.abs(v-x)<1e-6)return this.easeTo(e,i);const t=x<v?-1:1;E=Math.abs(Math.log(x/v))/g,M=()=>0,I=e=>Math.exp(t*g*e);}return e.duration="duration"in e?+e.duration:1e3*E/("screenSpeed"in e?+e.screenSpeed/g:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=r!==c,this._pitching=h!==o,this._rolling=u!==s,this._padding=!a.isPaddingEqual(d),this._prepareEase(i,!1),this.terrain&&this._prepareElevation(f.targetCenter),this._ease((n=>{const m=n*E,g=1/I(m),v=M(m);this._rotating&&a.setBearing(t.G.number(r,c,n)),this._pitching&&a.setPitch(t.G.number(o,h,n)),this._rolling&&a.setRoll(t.G.number(s,u,n)),this._padding&&(a.interpolatePadding(l,d,n),p=a.centerPoint.add(_)),f.easeFunc(n,g,v,p),this.terrain&&!e.freezeElevation&&this._updateElevation(n),this._applyUpdatedTransform(a),this._fireMoveEvents(i);}),(()=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(i);}),e),this}isEasing(){return !!this._easeFrameId}stop(){return this._stop()}_stop(e,t){var i;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const e=this._onEaseEnd;delete this._onEaseEnd,e.call(this,t);}return e||null===(i=this.handlers)||void 0===i||i.stop(!1),this}_ease(e,t,i){!1===i.animate||0===i.duration?(e(1),t()):(this._easeStart=c(),this._easeOptions=i,this._onEaseFrame=e,this._onEaseEnd=t,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback));}_normalizeBearing(e,i){e=t.W(e,-180,180);const a=Math.abs(e-i);return Math.abs(e-360-i)<a&&(e-=360),Math.abs(e+360-i)<a&&(e+=360),e}queryTerrainElevation(e){return this.terrain?this.terrain.getElevationForLngLat(t.V.convert(e),this.transform):null}}const Ko={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Yo{constructor(e=Ko){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")));},this._updateData=e=>{!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType&&"terrain"!==e.type||this._updateAttributions();},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"));},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show");},this.options=e;}getDefaultPosition(){return "bottom-right"}onAdd(e){return this._map=e,this._compact=this.options.compact,this._container=h.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=h.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=h.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){h.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0;}_setElementTitle(e,t){const i=this._map._getUIString(`AttributionControl.${t}`);e.title=i,e.setAttribute("aria-label",i);}_updateAttributions(){if(!this._map.style)return;let e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map((e=>"string"!=typeof e?"":e))):"string"==typeof this.options.customAttribution&&e.push(this.options.customAttribution)),this._map.style.stylesheet){const e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id;}const t=this._map.style.tileManagers;for(const i in t){const a=t[i];if(a.used||a.usedForTerrain){const t=a.getSource();t.attribution&&e.indexOf(t.attribution)<0&&e.push(t.attribution);}}e=e.filter((e=>String(e).trim())),e.sort(((e,t)=>e.length-t.length)),e=e.filter(((t,i)=>{for(let a=i+1;a<e.length;a++)if(e[a].indexOf(t)>=0)return !1;return !0}));const i=e.join(" | ");i!==this._attribHTML&&(this._attribHTML=i,e.length?(this._innerContainer.innerHTML=h.sanitize(i),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null);}}class Qo{constructor(e={}){this._updateCompact=()=>{const e=this._container.children;if(e.length){const t=e[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&t.classList.add("maplibregl-compact"):t.classList.remove("maplibregl-compact");}},this.options=e;}getDefaultPosition(){return "bottom-left"}onAdd(e){this._map=e,this._compact=this.options&&this.options.compact,this._container=h.create("div","maplibregl-ctrl");const t=h.create("a","maplibregl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://maplibre.org/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){h.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0;}}class Jo{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1;}add(e){const t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}remove(e){const t=this._currentlyRunning,i=t?this._queue.concat(t):this._queue;for(const t of i)if(t.id===e)return void(t.cancelled=!0)}run(e=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const t=this._currentlyRunning=this._queue;this._queue=[];for(const i of t)if(!i.cancelled&&(i.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1;}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[];}}var es=t.aU([{name:"a_pos3d",type:"Int16",components:3}]);class ts extends t.E{constructor(e){super(),this._lastTilesetChange=c(),this.tileManager=e,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=e._source.tileSize*2**this.deltaZoom,e.usedForTerrain=!0,e.tileSize=this.tileSize;}destruct(){this.tileManager.usedForTerrain=!1,this.tileManager.tileSize=null;}getSource(){return this.tileManager._source}update(e,i){this.tileManager.update(e,i),this._renderableTilesKeys=[];const a={};for(const r of Ie(e,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:i,calculateTileZoom:this.tileManager._source.calculateTileZoom}))a[r.key]=!0,this._renderableTilesKeys.push(r.key),this._tiles[r.key]||(r.terrainRttPosMatrix32f=new Float64Array(16),t.c7(r.terrainRttPosMatrix32f,0,t.a5,t.a5,0,0,1),this._tiles[r.key]=new de(r,this.tileSize),this._lastTilesetChange=c());for(const e in this._tiles)a[e]||delete this._tiles[e];}freeRtt(e){for(const t in this._tiles){const i=this._tiles[t];(!e||i.tileID.equals(e)||i.tileID.isChildOf(e)||e.isChildOf(i.tileID))&&(i.rtt=[]);}}getRenderableTiles(){return this._renderableTilesKeys.map((e=>this.getTileByID(e)))}getTileByID(e){return this._tiles[e]}getTerrainCoords(e,t){return t?this._getTerrainCoordsForTileRanges(e,t):this._getTerrainCoordsForRegularTile(e)}_getTerrainCoordsForRegularTile(e){const i={};for(const a of this._renderableTilesKeys){const r=this._tiles[a].tileID,o=e.clone(),s=t.bk();if(r.canonical.equals(e.canonical))t.c7(s,0,t.a5,t.a5,0,0,1);else if(r.canonical.isChildOf(e.canonical)){const i=r.canonical.z-e.canonical.z,a=r.canonical.x-(r.canonical.x>>i<<i),o=r.canonical.y-(r.canonical.y>>i<<i),n=t.a5>>i;t.c7(s,0,n,n,0,0,1),t.O(s,s,[-a*n,-o*n,0]);}else {if(!e.canonical.isChildOf(r.canonical))continue;{const i=e.canonical.z-r.canonical.z,a=e.canonical.x-(e.canonical.x>>i<<i),o=e.canonical.y-(e.canonical.y>>i<<i),n=t.a5>>i;t.c7(s,0,t.a5,t.a5,0,0,1),t.O(s,s,[a*n,o*n,0]),t.Q(s,s,[1/2**i,1/2**i,0]);}}o.terrainRttPosMatrix32f=new Float32Array(s),i[a]=o;}return i}_getTerrainCoordsForTileRanges(e,i){const a={};for(const r of this._renderableTilesKeys){const o=this._tiles[r].tileID;if(!this._isWithinTileRanges(o,i))continue;const s=e.clone(),n=t.bk();if(o.canonical.z===e.canonical.z){const i=e.canonical.x-o.canonical.x,a=e.canonical.y-o.canonical.y;t.c7(n,0,t.a5,t.a5,0,0,1),t.O(n,n,[i*t.a5,a*t.a5,0]);}else if(o.canonical.z>e.canonical.z){const i=o.canonical.z-e.canonical.z,a=o.canonical.x-(o.canonical.x>>i<<i),r=o.canonical.y-(o.canonical.y>>i<<i),s=e.canonical.x-(o.canonical.x>>i),l=e.canonical.y-(o.canonical.y>>i),c=t.a5>>i;t.c7(n,0,c,c,0,0,1),t.O(n,n,[-a*c+s*t.a5,-r*c+l*t.a5,0]);}else {const i=e.canonical.z-o.canonical.z,a=e.canonical.x-(e.canonical.x>>i<<i),r=e.canonical.y-(e.canonical.y>>i<<i),s=(e.canonical.x>>i)-o.canonical.x,l=(e.canonical.y>>i)-o.canonical.y,c=t.a5<<i;t.c7(n,0,c,c,0,0,1),t.O(n,n,[a*t.a5+s*c,r*t.a5+l*c,0]);}s.terrainRttPosMatrix32f=new Float32Array(n),a[r]=s;}return a}getSourceTile(e,t){const i=this.tileManager._source;let a=e.overscaledZ-this.deltaZoom;if(a>i.maxzoom&&(a=i.maxzoom),a<i.minzoom)return;this._sourceTileCache[e.key]||(this._sourceTileCache[e.key]=e.scaledTo(a).key);let r=this.findTileInCaches(this._sourceTileCache[e.key]);if(!(null==r?void 0:r.dem)&&t)for(;a>=i.minzoom&&!(null==r?void 0:r.dem);)r=this.findTileInCaches(e.scaledTo(a--).key);return r}findTileInCaches(e){let t=this.tileManager.getTileByID(e);return t||(t=this.tileManager._outOfViewCache.getByKey(e),t)}anyTilesAfterTime(e=Date.now()){return this._lastTilesetChange>=e}_isWithinTileRanges(e,t){return t[e.canonical.z]&&e.canonical.x>=t[e.canonical.z].minTileX&&e.canonical.x<=t[e.canonical.z].maxTileX&&e.canonical.y>=t[e.canonical.z].minTileY&&e.canonical.y<=t[e.canonical.z].maxTileY}}class is{constructor(e,t,i){this._meshCache={},this.painter=e,this.tileManager=new ts(t),this.options=i,this.exaggeration="number"==typeof i.exaggeration?i.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024;}getDEMElevation(e,i,a,r=t.a5){var o;if(!(i>=0&&i<r&&a>=0&&a<r))return 0;const s=this.getTerrainData(e),n=null===(o=s.tile)||void 0===o?void 0:o.dem;if(!n)return 0;const l=t.cC([],[i/r*t.a5,a/r*t.a5],s.u_terrain_matrix),c=[l[0]*n.dim,l[1]*n.dim],h=Math.floor(c[0]),u=Math.floor(c[1]),d=c[0]-h,_=c[1]-u;return n.get(h,u)*(1-d)*(1-_)+n.get(h+1,u)*d*(1-_)+n.get(h,u+1)*(1-d)*_+n.get(h+1,u+1)*d*_}getElevationForLngLatZoom(e,i){if(!t.cD(i,e.wrap()))return 0;const{tileID:a,mercatorX:r,mercatorY:o}=this._getOverscaledTileIDFromLngLatZoom(e,i);return this.getElevation(a,r%t.a5,o%t.a5,t.a5)}getElevationForLngLat(e,t){const i=Ie(t,{maxzoom:this.tileManager.maxzoom,minzoom:this.tileManager.minzoom,tileSize:512,terrain:this});let a=0;for(const e of i)e.canonical.z>a&&(a=Math.min(e.canonical.z,this.tileManager.maxzoom));return this.getElevationForLngLatZoom(e,a)}getElevation(e,i,a,r=t.a5){return this.getDEMElevation(e,i,a,r)*this.exaggeration}getTerrainData(e){if(!this._emptyDemTexture){const e=this.painter.context,i=new t.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new t.T(e,i,e.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new t.T(e,new t.R({width:1,height:1}),e.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=t.ar([]);}const i=this.tileManager.getSourceTile(e,!0);if(i&&i.dem&&(!i.demTexture||i.needsTerrainPrepare)){const e=this.painter.context;i.demTexture=this.painter.getTileTexture(i.dem.stride),i.demTexture?i.demTexture.update(i.dem.getPixels(),{premultiply:!1}):i.demTexture=new t.T(e,i.dem.getPixels(),e.gl.RGBA,{premultiply:!1}),i.demTexture.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),i.needsTerrainPrepare=!1;}const a=i&&i.toString()+i.tileID.key+e.key;if(a&&!this._demMatrixCache[a]){const a=this.tileManager.getSource().maxzoom;let r=e.canonical.z-i.tileID.canonical.z;e.overscaledZ>e.canonical.z&&(e.canonical.z>=a?r=e.canonical.z-a:t.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const o=e.canonical.x-(e.canonical.x>>r<<r),s=e.canonical.y-(e.canonical.y>>r<<r),n=t.cE(new Float64Array(16),[1/(t.a5<<r),1/(t.a5<<r),0]);t.O(n,n,[o*t.a5,s*t.a5,0]),this._demMatrixCache[e.key]={matrix:n,coord:e};}return {u_depth:2,u_terrain:3,u_terrain_dim:i&&i.dem&&i.dem.dim||1,u_terrain_matrix:a?this._demMatrixCache[e.key].matrix:this._emptyDemMatrix,u_terrain_unpack:i&&i.dem&&i.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(i&&i.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:i}}getFramebuffer(e){const i=this.painter,a=i.width/devicePixelRatio,r=i.height/devicePixelRatio;return !this._fbo||this._fbo.width===a&&this._fbo.height===r||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new t.T(i.context,{width:a,height:r,data:null},i.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(i.context.gl.NEAREST,i.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new t.T(i.context,{width:a,height:r,data:null},i.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(i.context.gl.NEAREST,i.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=i.context.createFramebuffer(a,r,!0,!1),this._fbo.depthAttachment.set(i.context.createRenderbuffer(i.context.gl.DEPTH_COMPONENT16,a,r))),this._fbo.colorAttachment.set("coords"===e?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const e=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const i=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let e=0,t=0;e<this._coordsTextureSize;e++)for(let a=0;a<this._coordsTextureSize;a++,t+=4)i[t+0]=255&a,i[t+1]=255&e,i[t+2]=a>>8<<4|e>>8,i[t+3]=0;const a=new t.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(i.buffer)),r=new t.T(e,a,e.gl.RGBA,{premultiply:!1});return r.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._coordsTexture=r,r}pointCoordinate(e){this.painter.maybeDrawDepthAndCoords(!0);const i=new Uint8Array(4),a=this.painter.context,r=a.gl,o=Math.round(e.x*this.painter.pixelRatio/devicePixelRatio),s=Math.round(e.y*this.painter.pixelRatio/devicePixelRatio),n=Math.round(this.painter.height/devicePixelRatio);a.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),r.readPixels(o,n-s-1,1,1,r.RGBA,r.UNSIGNED_BYTE,i),a.bindFramebuffer.set(null);const l=i[0]+(i[2]>>4<<8),c=i[1]+((15&i[2])<<8),h=this.coordsIndex[255-i[3]],u=h&&this.tileManager.getTileByID(h);if(!u)return null;const d=this._coordsTextureSize,_=(1<<u.tileID.canonical.z)*d;return new t.a9((u.tileID.canonical.x*d+l)/_+u.tileID.wrap,(u.tileID.canonical.y*d+c)/_,this.getElevation(u.tileID,l,c,d))}depthAtPoint(e){const t=new Uint8Array(4),i=this.painter.context,a=i.gl;return i.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),a.readPixels(e.x,this.painter.height/devicePixelRatio-e.y-1,1,1,a.RGBA,a.UNSIGNED_BYTE,t),i.bindFramebuffer.set(null),(t[0]/16777216+t[1]/65536+t[2]/256+t[3])/256}getTerrainMesh(e){var i;const a=(null===(i=this.painter.style.projection)||void 0===i?void 0:i.transitionState)>0,r=a&&0===e.canonical.y,o=a&&e.canonical.y===(1<<e.canonical.z)-1,s=`m_${r?"n":""}_${o?"s":""}`;if(this._meshCache[s])return this._meshCache[s];const n=this.painter.context,l=new t.cF,c=new t.aY,h=this.meshSize,u=t.a5/h,d=h*h;for(let e=0;e<=h;e++)for(let t=0;t<=h;t++)l.emplaceBack(t*u,e*u,0);for(let e=0;e<d;e+=h+1)for(let t=0;t<h;t++)c.emplaceBack(t+e,h+t+e+1,h+t+e+2),c.emplaceBack(t+e,h+t+e+2,t+e+1);const _=l.length,p=_+(h+1),m=(h+1)*h,f=r?t.br:0,g=r?0:1,v=o?t.bs:t.a5,x=o?0:1;for(let e=0;e<=h;e++)l.emplaceBack(e*u,f,g);for(let e=0;e<=h;e++)l.emplaceBack(e*u,v,x);for(let e=0;e<h;e++)c.emplaceBack(m+e,p+e,p+e+1),c.emplaceBack(m+e,p+e+1,m+e+1),c.emplaceBack(0+e,_+e+1,_+e),c.emplaceBack(0+e,0+e+1,_+e+1);const b=l.length,y=b+2*(h+1);for(const e of [0,1])for(let i=0;i<=h;i++)for(const a of [0,1])l.emplaceBack(e*t.a5,i*u,a);for(let e=0;e<2*h;e+=2)c.emplaceBack(b+e,b+e+1,b+e+3),c.emplaceBack(b+e,b+e+3,b+e+2),c.emplaceBack(y+e,y+e+3,y+e+1),c.emplaceBack(y+e,y+e+2,y+e+3);const w=new kt(n.createVertexBuffer(l,es.members),n.createIndexBuffer(c),t.aX.simpleSegment(0,0,l.length,c.length));return this._meshCache[s]=w,w}getMeshFrameDelta(e){return 2*Math.PI*t.bE/Math.pow(2,Math.max(e,0))/5}getMinTileElevationForLngLatZoom(e,i){var a;if(!t.cD(i,e.wrap()))return 0;const{tileID:r}=this._getOverscaledTileIDFromLngLatZoom(e,i);return null!==(a=this.getMinMaxElevation(r).minElevation)&&void 0!==a?a:0}getMinMaxElevation(e){const t=this.getTerrainData(e).tile,i={minElevation:null,maxElevation:null};return t&&t.dem&&(i.minElevation=t.dem.min*this.exaggeration,i.maxElevation=t.dem.max*this.exaggeration),i}_getOverscaledTileIDFromLngLatZoom(e,i){const a=t.a9.fromLngLat(e.wrap()),r=(1<<i)*t.a5,o=a.x*r,s=a.y*r,n=Math.floor(o/t.a5),l=Math.floor(s/t.a5);return {tileID:new t.a2(i,0,i,n,l),mercatorX:o,mercatorY:s}}}class as{constructor(e,t,i){this._context=e,this._size=t,this._tileSize=i,this._objects=[],this._recentlyUsed=[],this._stamp=0;}destruct(){for(const e of this._objects)e.texture.destroy(),e.fbo.destroy();}_createObject(e){const i=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),a=new t.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return a.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),i.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),i.colorAttachment.set(a.texture),{id:e,fbo:i,texture:a,stamp:-1,inUse:!1}}getObjectForId(e){return this._objects[e]}useObject(e){e.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((t=>e.id!==t)),this._recentlyUsed.push(e.id);}stampObject(e){e.stamp=++this._stamp;}getOrCreateFreeObject(){for(const e of this._recentlyUsed)if(!this._objects[e].inUse)return this._objects[e];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const e=this._createObject(this._objects.length);return this._objects.push(e),e}freeObject(e){e.inUse=!1;}freeAllObjects(){for(const e of this._objects)this.freeObject(e);}isFull(){return !(this._objects.length<this._size)&&!1===this._objects.some((e=>!e.inUse))}}const rs={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class os{constructor(e,t){this.painter=e,this.terrain=t,this.pool=new as(e.context,30,t.tileManager.tileSize*t.qualityFactor);}destruct(){this.pool.destruct();}getTexture(e){return this.pool.getObjectForId(e.rtt[this._stacks.length-1].id).texture}prepareForRender(e,t){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.tileManager.getRenderableTiles(),this._renderableLayerIds=e._order.filter((i=>!e._layers[i].isHidden(t))),this._coordsAscending={};for(const t in e.tileManagers){this._coordsAscending[t]={};const i=e.tileManagers[t].getVisibleCoordinates(),a=e.tileManagers[t].getSource(),r=a instanceof te?a.terrainTileRanges:null;for(const e of i){const i=this.terrain.tileManager.getTerrainCoords(e,r);for(const e in i)this._coordsAscending[t][e]||(this._coordsAscending[t][e]=[]),this._coordsAscending[t][e].push(i[e]);}}this._coordsAscendingStr={};for(const t of e._order){const i=e._layers[t],a=i.source;if(rs[i.type]&&!this._coordsAscendingStr[a]){this._coordsAscendingStr[a]={};for(const e in this._coordsAscending[a])this._coordsAscendingStr[a][e]=this._coordsAscending[a][e].map((e=>e.key)).sort().join();}}for(const e of this._renderableTiles)for(const t in this._coordsAscendingStr){const i=this._coordsAscendingStr[t][e.tileID.key];i&&i!==e.rttCoords[t]&&(e.rtt=[]);}}renderLayer(e,i){if(e.isHidden(this.painter.transform.zoom))return !1;const a=Object.assign(Object.assign({},i),{isRenderingToTexture:!0}),r=e.type,o=this.painter,s=this._renderableLayerIds[this._renderableLayerIds.length-1]===e.id;if(rs[r]&&(this._prevType&&rs[this._prevType]||this._stacks.push([]),this._prevType=r,this._stacks[this._stacks.length-1].push(e.id),!s))return !0;if(rs[this._prevType]||rs[r]&&s){this._prevType=r;const e=this._stacks.length-1,i=this._stacks[e]||[];for(const r of this._renderableTiles){if(this.pool.isFull()&&(Ur(this.painter,this.terrain,this._rttTiles,a),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(r),r.rtt[e]){const t=this.pool.getObjectForId(r.rtt[e].id);if(t.stamp===r.rtt[e].stamp){this.pool.useObject(t);continue}}const s=this.pool.getOrCreateFreeObject();this.pool.useObject(s),this.pool.stampObject(s),r.rtt[e]={id:s.id,stamp:s.stamp},o.context.bindFramebuffer.set(s.fbo.framebuffer),o.context.clear({color:t.bp.transparent,stencil:0}),o.currentStencilSource=void 0;for(let e=0;e<i.length;e++){const t=o.style._layers[i[e]],n=t.source?this._coordsAscending[t.source][r.tileID.key]:[r.tileID];o.context.viewport.set([0,0,s.fbo.width,s.fbo.height]),o._renderTileClippingMasks(t,n,!0),o.renderLayer(o,o.style.tileManagers[t.source],t,n,a),t.source&&(r.rttCoords[t.source]=this._coordsAscendingStr[t.source][r.tileID.key]);}}return Ur(this.painter,this.terrain,this._rttTiles,a),this._rttTiles=[],this.pool.freeAllObjects(),rs[r]}return !1}}const ss={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},ns=i,ls={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Ko,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:t.c.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,reduceMotion:void 0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0,experimentalZoomLevelsToOverscale:void 0},cs={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class hs{constructor(e,i,a=!1){this.mousedown=e=>{this.startMove(e,h.mousePos(this.element,e)),h.addEventListener(window,"mousemove",this.mousemove),h.addEventListener(window,"mouseup",this.mouseup);},this.mousemove=e=>{this.move(e,h.mousePos(this.element,e));},this.mouseup=e=>{this._rotatePitchHandler.dragEnd(e),this.offTemp();},this.touchstart=e=>{1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=h.touchPos(this.element,e.targetTouches)[0],this.startMove(e,this._startPos),h.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),h.addEventListener(window,"touchend",this.touchend));},this.touchmove=e=>{1!==e.targetTouches.length?this.reset():(this._lastPos=h.touchPos(this.element,e.targetTouches)[0],this.move(e,this._lastPos));},this.touchend=e=>{0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp();},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp();},this._clickTolerance=10,this.element=i;const r=new yo;this._rotatePitchHandler=new mo({clickTolerance:3,move:(e,r)=>{const o=i.getBoundingClientRect(),s=new t.P((o.bottom-o.top)/2,(o.right-o.left)/2);return {bearingDelta:t.cx(new t.P(e.x,r.y),r,s),pitchDelta:a?-.5*(r.y-e.y):void 0}},moveStateManager:r,enable:!0,assignEvents:()=>{}}),this.map=e,h.addEventListener(i,"mousedown",this.mousedown),h.addEventListener(i,"touchstart",this.touchstart,{passive:!1}),h.addEventListener(i,"touchcancel",this.reset);}startMove(e,t){this._rotatePitchHandler.dragStart(e,t),h.disableDrag();}move(e,t){const i=this.map,{bearingDelta:a,pitchDelta:r}=this._rotatePitchHandler.dragMove(e,t)||{};a&&i.setBearing(i.getBearing()+a),r&&i.setPitch(i.getPitch()+r);}off(){const e=this.element;h.removeEventListener(e,"mousedown",this.mousedown),h.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),h.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),h.removeEventListener(window,"touchend",this.touchend),h.removeEventListener(e,"touchcancel",this.reset),this.offTemp();}offTemp(){h.enableDrag(),h.removeEventListener(window,"mousemove",this.mousemove),h.removeEventListener(window,"mouseup",this.mouseup),h.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),h.removeEventListener(window,"touchend",this.touchend);}}let us;function ds(e,i,a,r=!1){if(r||!a.getCoveringTilesDetailsProvider().allowWorldCopies())return null==e?void 0:e.wrap();const o=new t.V(e.lng,e.lat);if(e=new t.V(e.lng,e.lat),i){const r=new t.V(e.lng-360,e.lat),o=new t.V(e.lng+360,e.lat),s=a.locationToScreenPoint(e).distSqr(i);a.locationToScreenPoint(r).distSqr(i)<s?e=r:a.locationToScreenPoint(o).distSqr(i)<s&&(e=o);}for(;Math.abs(e.lng-a.center.lng)>180;){const t=a.locationToScreenPoint(e);if(t.x>=0&&t.y>=0&&t.x<=a.width&&t.y<=a.height)break;e.lng>a.center.lng?e.lng-=360:e.lng+=360;}return e.lng!==o.lng&&a.isPointOnMapSurface(a.locationToScreenPoint(e))?e:o}const _s={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ps(e,t,i){const a=e.classList;for(const e in _s)a.remove(`maplibregl-${i}-anchor-${e}`);a.add(`maplibregl-${i}-anchor-${t}`);}class ms extends t.E{constructor(e){if(super(),this._onKeyPress=e=>{const t=e.code,i=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==i&&13!==i||this.togglePopup();},this._onMapClick=e=>{const t=e.originalEvent.target,i=this._element;this._popup&&(t===i||i.contains(t))&&this.togglePopup();},this._update=e=>{if(!this._map)return;const t=this._map.loaded()&&!this._map.isMoving();("terrain"===(null==e?void 0:e.type)||"render"===(null==e?void 0:e.type)&&!t)&&this._map.once("render",this._update),this._lngLat=ds(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let i="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?i=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(i=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let a="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?a="rotateX(0deg)":"map"===this._pitchAlignment&&(a=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||e&&"moveend"!==e.type||(this._pos=this._pos.round()),h.setTransform(this._element,`${_s[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${a} ${i}`),n.frameAsync(new AbortController).then((()=>{this._updateOpacity(e&&"moveend"===e.type);})).catch((()=>{}));},this._onMove=e=>{if(!this._isDragging){const t=this._clickTolerance||this._map._clickTolerance;this._isDragging=e.point.dist(this._pointerdownPos)>=t;}this._isDragging&&(this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.l("dragstart"))),this.fire(new t.l("drag")));},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.l("dragend")),this._state="inactive";},this._addDragHandler=e=>{this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos).add(this._offset),this._pointerdownPos=e.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp));},this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._subpixelPositioning=e&&e.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&"auto"!==e.pitchAlignment?e.pitchAlignment:this._rotationAlignment,this.setOpacity(null==e?void 0:e.opacity,null==e?void 0:e.opacityWhenCovered),e&&e.element)this._element=e.element,this._offset=t.P.convert(e&&e.offset||[0,0]);else {this._defaultMarker=!0,this._element=h.create("div");const i=h.createNS("http://www.w3.org/2000/svg","svg"),a=41,r=27;i.setAttributeNS(null,"display","block"),i.setAttributeNS(null,"height",`${a}px`),i.setAttributeNS(null,"width",`${r}px`),i.setAttributeNS(null,"viewBox",`0 0 ${r} ${a}`);const o=h.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"stroke","none"),o.setAttributeNS(null,"stroke-width","1"),o.setAttributeNS(null,"fill","none"),o.setAttributeNS(null,"fill-rule","evenodd");const s=h.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill-rule","nonzero");const n=h.createNS("http://www.w3.org/2000/svg","g");n.setAttributeNS(null,"transform","translate(3.0, 29.0)"),n.setAttributeNS(null,"fill","#000000");const l=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const e of l){const t=h.createNS("http://www.w3.org/2000/svg","ellipse");t.setAttributeNS(null,"opacity","0.04"),t.setAttributeNS(null,"cx","10.5"),t.setAttributeNS(null,"cy","5.80029008"),t.setAttributeNS(null,"rx",e.rx),t.setAttributeNS(null,"ry",e.ry),n.appendChild(t);}const c=h.createNS("http://www.w3.org/2000/svg","g");c.setAttributeNS(null,"fill",this._color);const u=h.createNS("http://www.w3.org/2000/svg","path");u.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),c.appendChild(u);const d=h.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"opacity","0.25"),d.setAttributeNS(null,"fill","#000000");const _=h.createNS("http://www.w3.org/2000/svg","path");_.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),d.appendChild(_);const p=h.createNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"transform","translate(6.0, 7.0)"),p.setAttributeNS(null,"fill","#FFFFFF");const m=h.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(8.0, 8.0)");const f=h.createNS("http://www.w3.org/2000/svg","circle");f.setAttributeNS(null,"fill","#000000"),f.setAttributeNS(null,"opacity","0.25"),f.setAttributeNS(null,"cx","5.5"),f.setAttributeNS(null,"cy","5.5"),f.setAttributeNS(null,"r","5.4999962");const g=h.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#FFFFFF"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962"),m.appendChild(f),m.appendChild(g),s.appendChild(n),s.appendChild(c),s.appendChild(d),s.appendChild(p),s.appendChild(m),i.appendChild(s),i.setAttributeNS(null,"height",a*this._scale+"px"),i.setAttributeNS(null,"width",r*this._scale+"px"),this._element.appendChild(i),this._offset=t.P.convert(e&&e.offset||[0,-14]);}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(e=>{e.preventDefault();})),this._element.addEventListener("mousedown",(e=>{e.preventDefault();})),ps(this._element,this._anchor,"marker"),e&&e.className)for(const t of e.className.split(" "))this._element.classList.add(t);this._popup=null;}addTo(e){return this.remove(),this._map=e,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",e._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),e.on("terrain",this._update),e.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),h.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.V.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const t=38.1,i=13.5,a=Math.abs(i)/Math.SQRT2;e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[a,-1*(t-i+a)],"bottom-right":[-a,-1*(t-i+a)],left:[i,-1*(t-i)],right:[-i,-1*(t-i)]}:this._offset;}this._popup=e,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress);}return this}setSubpixelPositioning(e){return this._subpixelPositioning=e,this}getPopup(){return this._popup}togglePopup(){const e=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:e?(e.isOpen()?e.remove():(e.setLngLat(this._lngLat),e.addTo(this._map)),this):this}_updateOpacity(e=!1){var i,a;const r=null===(i=this._map)||void 0===i?void 0:i.terrain,o=this._map.transform.isLocationOccluded(this._lngLat);if(!r||o){const e=o?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==e&&(this._element.style.opacity=e))}if(e)this._opacityTimeout=null;else {if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null;}),100);}const s=this._map,n=s.terrain.depthAtPoint(this._pos),l=s.terrain.getElevationForLngLat(this._lngLat,s.transform);if(s.transform.lngLatToCameraDepth(this._lngLat,l)-n<.006)return void(this._element.style.opacity=this._opacity);const c=-this._offset.y/s.transform.pixelsPerMeter,h=Math.sin(s.getPitch()*Math.PI/180)*c,u=s.terrain.depthAtPoint(new t.P(this._pos.x,this._pos.y-this._offset.y)),d=s.transform.lngLatToCameraDepth(this._lngLat,l+h)-u>.006;(null===(a=this._popup)||void 0===a?void 0:a.isOpen())&&d&&this._popup.remove(),this._element.style.opacity=d?this._opacityWhenCovered:this._opacity;}getOffset(){return this._offset}setOffset(e){return this._offset=t.P.convert(e),this._update(),this}addClassName(e){this._element.classList.add(e);}removeClassName(e){this._element.classList.remove(e);}toggleClassName(e){return this._element.classList.toggle(e)}setDraggable(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&"auto"!==e?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(e,t){return (void 0===this._opacity||void 0===e&&void 0===t)&&(this._opacity="1",this._opacityWhenCovered="0.2"),void 0!==e&&(this._opacity=e),void 0!==t&&(this._opacityWhenCovered=t),this._map&&this._updateOpacity(!0),this}}const fs={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let gs=0,vs=!1;const xs={maxWidth:100,unit:"metric"};function bs(e,t,i){const a=i&&i.maxWidth||100,r=e._container.clientHeight/2,o=e._container.clientWidth/2,s=e.unproject([o-a/2,r]),n=e.unproject([o+a/2,r]),l=Math.round(e.project(n).x-e.project(s).x),c=Math.min(a,l,e._container.clientWidth),h=s.distanceTo(n);if(i&&"imperial"===i.unit){const i=3.2808*h;i>5280?ys(t,c,i/5280,e._getUIString("ScaleControl.Miles")):ys(t,c,i,e._getUIString("ScaleControl.Feet"));}else i&&"nautical"===i.unit?ys(t,c,h/1852,e._getUIString("ScaleControl.NauticalMiles")):h>=1e3?ys(t,c,h/1e3,e._getUIString("ScaleControl.Kilometers")):ys(t,c,h,e._getUIString("ScaleControl.Meters"));}function ys(e,t,i,a){const r=function(e){const t=Math.pow(10,`${Math.floor(e)}`.length-1);let i=e/t;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:i>=1?1:function(e){const t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(i),t*i}(i);e.style.width=t*(r/i)+"px",e.innerHTML=`${r}&nbsp;${a}`;}const ws={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Ts=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ps(e){if(e){if("number"==typeof e){const i=Math.round(Math.abs(e)/Math.SQRT2);return {center:new t.P(0,0),top:new t.P(0,e),"top-left":new t.P(i,i),"top-right":new t.P(-i,i),bottom:new t.P(0,-e),"bottom-left":new t.P(i,-i),"bottom-right":new t.P(-i,-i),left:new t.P(e,0),right:new t.P(-e,0)}}if(e instanceof t.P||Array.isArray(e)){const i=t.P.convert(e);return {center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return {center:t.P.convert(e.center||[0,0]),top:t.P.convert(e.top||[0,0]),"top-left":t.P.convert(e["top-left"]||[0,0]),"top-right":t.P.convert(e["top-right"]||[0,0]),bottom:t.P.convert(e.bottom||[0,0]),"bottom-left":t.P.convert(e["bottom-left"]||[0,0]),"bottom-right":t.P.convert(e["bottom-right"]||[0,0]),left:t.P.convert(e.left||[0,0]),right:t.P.convert(e.right||[0,0])}}return Ps(new t.P(0,0))}const Cs=i;e.AJAXError=t.cI,e.Event=t.l,e.Evented=t.E,e.LngLat=t.V,e.MercatorCoordinate=t.a9,e.Point=t.P,e.addProtocol=t.cJ,e.config=t.c,e.removeProtocol=t.cK,e.AttributionControl=Yo,e.BoxZoomHandler=co,e.CanvasSource=ae,e.CooperativeGesturesHandler=Vo,e.DoubleClickZoomHandler=Oo,e.DragPanHandler=Zo,e.DragRotateHandler=Go,e.EdgeInsets=Nt,e.FullscreenControl=class extends t.E{constructor(e={}){super(),this._onFullscreenChange=()=>{var e;let t=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;null===(e=null==t?void 0:t.shadowRoot)||void 0===e?void 0:e.fullscreenElement;)t=t.shadowRoot.fullscreenElement;t===this._container!==this._fullscreen&&this._handleFullscreenChange();},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen();},this._fullscreen=!1,e&&e.container&&(e.container instanceof HTMLElement?this._container=e.container:t.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange");}onAdd(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=h.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){h.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange);}_setupUI(){const e=this._fullscreenButton=h.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);h.create("span","maplibregl-ctrl-icon",e).setAttribute("aria-hidden","true"),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange);}_updateTitle(){const e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.title=e;}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new t.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new t.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable());}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen();}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen();}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize();}},e.GeoJSONSource=ee,e.GeolocateControl=class extends t.E{constructor(e){super(),this._onSuccess=e=>{if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.l("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case "WAITING_ACTIVE":case "ACTIVE_LOCK":case "ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case "BACKGROUND":case "BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new t.l("geolocate",e)),this._finish();}},this._updateCamera=e=>{const i=new t.V(e.coords.longitude,e.coords.latitude),a=e.coords.accuracy,r=this._map.getBearing(),o=t.e({bearing:r},this.options.fitBoundsOptions),s=$.fromLngLat(i,a);this._map.fitBounds(s,o,{geolocateSource:!0});},this._updateMarker=e=>{if(e){const i=new t.V(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=e.coords.accuracy,this._updateCircleRadiusIfNeeded();}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove();},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded();},this._onError=e=>{if(this._map){if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e),void 0!==this._geolocationWatchID&&this._clearWatch();}else {if(3===e.code&&vs)return;this._setErrorState();}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new t.l("error",e)),this._finish();}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0;},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this._geolocateButton=h.create("button","maplibregl-ctrl-geolocate",this._container),h.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0);},this._finishSetupUI=e=>{if(this._map){if(!1===e){t.w("Geolocation support is not available so the GeolocateControl will be disabled.");const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e);}else {const e=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e);}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=h.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new ms({element:this._dotElement}),this._circleElement=h.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ms({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(e=>{const i=(null==e?void 0:e[0])instanceof ResizeObserverEntry;e.geolocateSource||"ACTIVE_LOCK"!==this._watchState||i||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new t.l("trackuserlocationend")),this.fire(new t.l("userlocationlostfocus")));}));}},this.options=t.e({},fs,e);}onAdd(e){return this._map=e,this._container=h.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return t._(this,arguments,void 0,(function*(e=!1){if(void 0!==us&&!e)return us;if(void 0===window.navigator.permissions)return us=!!window.navigator.geolocation,us;try{const e=yield window.navigator.permissions.query({name:"geolocation"});us="denied"!==e.state;}catch(e){us=!!window.navigator.geolocation;}return us}))}().then((e=>this._finishSetupUI(e))),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),h.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,gs=0,vs=!1;}_isOutOfMapMaxBounds(e){const t=this._map.getMaxBounds(),i=e.coords;return t&&(i.longitude<t.getWest()||i.longitude>t.getEast()||i.latitude<t.getSouth()||i.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case "WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case "ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case "BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case "ACTIVE_ERROR":case "BACKGROUND_ERROR":case "OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const e=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&e))return;const t=this._map.project(e),i=this._map.unproject([t.x+100,t.y]),a=e.distanceTo(i)/100,r=2*this._accuracy/a;this._circleElement.style.width=`${r.toFixed(2)}px`,this._circleElement.style.height=`${r.toFixed(2)}px`;}trigger(){if(!this._setup)return t.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case "OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.l("trackuserlocationstart"));break;case "WAITING_ACTIVE":case "ACTIVE_LOCK":case "ACTIVE_ERROR":case "BACKGROUND_ERROR":gs--,vs=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new t.l("trackuserlocationend"));break;case "BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.l("trackuserlocationstart")),this.fire(new t.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case "WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case "ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case "OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let e;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),gs++,gs>1?(e={maximumAge:6e5,timeout:0},vs=!0):(e=this.options.positionOptions,vs=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e);}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return !0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null);}},e.GlobeControl=class{constructor(){this._toggleProjection=()=>{var e;const t=null===(e=this._map.getProjection())||void 0===e?void 0:e.type;this._map.setProjection("mercator"!==t&&t?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon();},this._updateGlobeIcon=()=>{var e;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),"globe"===(null===(e=this._map.getProjection())||void 0===e?void 0:e.type)?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"));};}onAdd(e){return this._map=e,this._container=h.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=h.create("button","maplibregl-ctrl-globe",this._container),h.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){h.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0;}},e.Hash=$r,e.ImageSource=te,e.KeyboardHandler=Ao,e.LngLatBounds=$,e.LogoControl=Qo,e.Map=class extends Xo{constructor(e){var i,a;t.cG.mark(t.cH.create);const r=Object.assign(Object.assign(Object.assign({},ls),e),{canvasContextAttributes:Object.assign(Object.assign({},ls.canvasContextAttributes),e.canvasContextAttributes)});if(null!=r.minZoom&&null!=r.maxZoom&&r.minZoom>r.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=r.minPitch&&null!=r.maxPitch&&r.minPitch>r.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=r.minPitch&&r.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=r.maxPitch&&r.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const o=new $t,s=new Yt;if(void 0!==r.minZoom&&o.setMinZoom(r.minZoom),void 0!==r.maxZoom&&o.setMaxZoom(r.maxZoom),void 0!==r.minPitch&&o.setMinPitch(r.minPitch),void 0!==r.maxPitch&&o.setMaxPitch(r.maxPitch),void 0!==r.renderWorldCopies&&o.setRenderWorldCopies(r.renderWorldCopies),null!==r.transformConstrain&&o.setConstrainOverride(r.transformConstrain),super(o,s,{bearingSnap:r.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Jo,this._controls=[],this._mapId=t.af(),this._lostContextStyle={style:null,images:null},this._contextLost=e=>{e.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.painter.destroy();for(const e of Object.values(this.style._layers))if("custom"===e.type&&console.warn(`Custom layer with id '${e.id}' cannot be restored after WebGL context loss. You will need to re-add it manually after context restoration.`),e._listeners)for(const[t]of Object.entries(e._listeners))console.warn(`Custom layer with id '${e.id}' had event listeners for event '${t}' which cannot be restored after WebGL context loss. You will need to re-add them manually after context restoration.`);this._lostContextStyle=this._getStyleAndImages(),this.style.destroy(),this.style=null,this.fire(new t.l("webglcontextlost",{originalEvent:e}));},this._contextRestored=e=>{this._lostContextStyle.style&&this.setStyle(this._lostContextStyle.style,{diff:!1}),this._lostContextStyle.images&&(this.style.imageManager.images=this._lostContextStyle.images),this._setupPainter(),this.resize(),this._update(),this.fire(new t.l("webglcontextrestored",{originalEvent:e}));},this._onMapScroll=e=>{if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update();},this._interactive=r.interactive,this._maxTileCacheSize=r.maxTileCacheSize,this._maxTileCacheZoomLevels=r.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},r.canvasContextAttributes),this._trackResize=!0===r.trackResize,this._bearingSnap=r.bearingSnap,this._centerClampedToGround=r.centerClampedToGround,this._refreshExpiredTiles=!0===r.refreshExpiredTiles,this._fadeDuration=r.fadeDuration,this._crossSourceCollisions=!0===r.crossSourceCollisions,this._collectResourceTiming=!0===r.collectResourceTiming,this._locale=Object.assign(Object.assign({},ss),r.locale),this._clickTolerance=r.clickTolerance,this._overridePixelRatio=r.pixelRatio,this._maxCanvasSize=r.maxCanvasSize,this._zoomLevelsToOverscale=r.experimentalZoomLevelsToOverscale,this.transformCameraUpdate=r.transformCameraUpdate,this.transformConstrain=r.transformConstrain,this.cancelPendingTileRequestsWhileZooming=!0===r.cancelPendingTileRequestsWhileZooming,void 0!==r.reduceMotion&&(n.prefersReducedMotion=r.reduceMotion),this._imageQueueHandle=g.addThrottleControl((()=>this.isMoving())),this._requestManager=new v(r.transformRequest),"string"==typeof r.container){if(this._container=document.getElementById(r.container),!this._container)throw new Error(`Container '${r.container}' not found.`)}else {if(!(r.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=r.container;}if(r.maxBounds&&this.setMaxBounds(r.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0);})),this.once("idle",(()=>{this._idleTriggered=!0;})),"undefined"!=typeof window){addEventListener("online",this._onWindowOnline,!1);let e=!1;const t=Wr((e=>{this._trackResize&&!this._removed&&(this.resize(e),this.redraw());}),50);this._resizeObserver=new ResizeObserver((i=>{e?t(i):e=!0;})),this._resizeObserver.observe(this._container);}this.handlers=new Ho(this,r),this._hash=r.hash&&new $r("string"==typeof r.hash&&r.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:r.center,elevation:r.elevation,zoom:r.zoom,bearing:r.bearing,pitch:r.pitch,roll:r.roll}),r.bounds&&(this.resize(),this.fitBounds(r.bounds,t.e({},r.fitBoundsOptions,{duration:0}))));const l="string"==typeof r.style||!("globe"===(null===(a=null===(i=r.style)||void 0===i?void 0:i.projection)||void 0===a?void 0:a.type));this.resize(null,l),this._localIdeographFontFamily=r.localIdeographFontFamily,this._validateStyle=r.validateStyle,r.style&&this.setStyle(r.style,{localIdeographFontFamily:r.localIdeographFontFamily}),r.attributionControl&&this.addControl(new Yo("boolean"==typeof r.attributionControl?void 0:r.attributionControl)),r.maplibreLogo&&this.addControl(new Qo,r.logoPosition),this.on("style.load",(()=>{if(l||this._resizeTransform(),this.transform.unmodified){const e=t.U(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(e);}})),this.on("data",(e=>{this._update("style"===e.dataType),this.fire(new t.l(`${e.dataType}data`,e));})),this.on("dataloading",(e=>{this.fire(new t.l(`${e.dataType}dataloading`,e));})),this.on("dataabort",(e=>{this.fire(new t.l("sourcedataabort",e));}));}_getMapId(){return this._mapId}setGlobalStateProperty(e,t){return this.style.setGlobalStateProperty(e,t),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(e,i){if(void 0===i&&(i=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new t.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const a=e.onAdd(this);this._controls.push(e);const r=this._controlPositions[i];return -1!==i.indexOf("bottom")?r.insertBefore(a,r.firstChild):r.appendChild(a),this}removeControl(e){if(!e||!e.onRemove)return this.fire(new t.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(e);return i>-1&&this._controls.splice(i,1),e.onRemove(this),this}hasControl(e){return this._controls.indexOf(e)>-1}coveringTiles(e){return Ie(this.transform,e)}calculateCameraOptionsFromTo(e,t,i,a){return null==a&&this.terrain&&(a=this.terrain.getElevationForLngLat(i,this.transform)),super.calculateCameraOptionsFromTo(e,t,i,a)}resize(e,i=!0){const[a,r]=this._containerDimensions(),o=this._getClampedPixelRatio(a,r);if(this._resizeCanvas(a,r,o),this.painter.resize(a,r,o),this.painter.overLimit()){const e=this.painter.context.gl;this._maxCanvasSize=[e.drawingBufferWidth,e.drawingBufferHeight];const t=this._getClampedPixelRatio(a,r);this._resizeCanvas(a,r,t),this.painter.resize(a,r,t);}this._resizeTransform(i);const s=!this._moving;return s&&(this.stop(),this.fire(new t.l("movestart",e)).fire(new t.l("move",e))),this.fire(new t.l("resize",e)),s&&this.fire(new t.l("moveend",e)),this}_resizeTransform(e=!0){var t;const[i,a]=this._containerDimensions();this.transform.resize(i,a,e),null===(t=this._requestedCameraState)||void 0===t||t.resize(i,a,e);}_getClampedPixelRatio(e,t){const{0:i,1:a}=this._maxCanvasSize,r=this.getPixelRatio(),o=e*r,s=t*r;return Math.min(o>i?i/o:1,s>a?a/s:1)*r}getPixelRatio(){var e;return null!==(e=this._overridePixelRatio)&&void 0!==e?e:devicePixelRatio}setPixelRatio(e){this._overridePixelRatio=e,this.resize();}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(e){return this.transform.setMaxBounds($.convert(e)),this._update()}setMinZoom(e){if((e=null==e?-2:e)>=-2&&e<=this.transform.maxZoom){const t=this._getTransformForUpdate();return t.setMinZoom(e),this._applyUpdatedTransform(t),this._update(),this}throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(e){if((e=null==e?22:e)>=this.transform.minZoom){const t=this._getTransformForUpdate();return t.setMaxZoom(e),this._applyUpdatedTransform(t),this._update(),this}throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(e){if((e=null==e?0:e)<0)throw new Error("minPitch must be greater than or equal to 0");if(e>=0&&e<=this.transform.maxPitch)return this.transform.setMinPitch(e),this._update(),this.getPitch()<e&&this.setPitch(e),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(e){if((e=null==e?60:e)>180)throw new Error("maxPitch must be less than or equal to 180");if(e>=this.transform.minPitch)return this.transform.setMaxPitch(e),this._update(),this.getPitch()>e&&this.setPitch(e),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(e){return this.transform.setRenderWorldCopies(e),this._update()}setTransformConstrain(e){return this.transform.setConstrainOverride(e),this._update()}project(e){return this.transform.locationToScreenPoint(t.V.convert(e),this.style&&this.terrain)}unproject(e){return this.transform.screenPointToLocation(t.P.convert(e),this.terrain)}isMoving(){var e;return this._moving||(null===(e=this.handlers)||void 0===e?void 0:e.isMoving())}isZooming(){var e;return this._zooming||(null===(e=this.handlers)||void 0===e?void 0:e.isZooming())}isRotating(){var e;return this._rotating||(null===(e=this.handlers)||void 0===e?void 0:e.isRotating())}_createDelegatedListener(e,t,i){if("mouseenter"===e||"mouseover"===e){let a=!1;const r=r=>{const o=t.filter((e=>this.getLayer(e))),s=0!==o.length?this.queryRenderedFeatures(r.point,{layers:o}):[];s.length?a||(a=!0,i.call(this,new ao(e,this,r.originalEvent,{features:s}))):a=!1;};return {layers:t,listener:i,delegates:{mousemove:r,mouseout:()=>{a=!1;}}}}if("mouseleave"===e||"mouseout"===e){let a=!1;const r=r=>{const o=t.filter((e=>this.getLayer(e)));(0!==o.length?this.queryRenderedFeatures(r.point,{layers:o}):[]).length?a=!0:a&&(a=!1,i.call(this,new ao(e,this,r.originalEvent)));},o=t=>{a&&(a=!1,i.call(this,new ao(e,this,t.originalEvent)));};return {layers:t,listener:i,delegates:{mousemove:r,mouseout:o}}}{const a=e=>{const a=t.filter((e=>this.getLayer(e))),r=0!==a.length?this.queryRenderedFeatures(e.point,{layers:a}):[];r.length&&(e.features=r,i.call(this,e),delete e.features);};return {layers:t,listener:i,delegates:{[e]:a}}}}_saveDelegatedListener(e,t){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(t);}_removeDelegatedListener(e,t,i){if(!this._delegatedListeners||!this._delegatedListeners[e])return;const a=this._delegatedListeners[e];for(let e=0;e<a.length;e++){const r=a[e];if(r.listener===i&&r.layers.length===t.length&&r.layers.every((e=>t.includes(e)))){for(const e in r.delegates)this.off(e,r.delegates[e]);return void a.splice(e,1)}}}on(e,t,i){if(void 0===i)return super.on(e,t);const a="string"==typeof t?[t]:t,r=this._createDelegatedListener(e,a,i);this._saveDelegatedListener(e,r);for(const e in r.delegates)this.on(e,r.delegates[e]);return {unsubscribe:()=>{this._removeDelegatedListener(e,a,i);}}}once(e,t,i){if(void 0===i)return super.once(e,t);const a="string"==typeof t?[t]:t,r=this._createDelegatedListener(e,a,i);for(const t in r.delegates){const o=r.delegates[t];r.delegates[t]=(...t)=>{this._removeDelegatedListener(e,a,i),o(...t);};}this._saveDelegatedListener(e,r);for(const e in r.delegates)this.once(e,r.delegates[e]);return this}off(e,t,i){return void 0===i?super.off(e,t):(this._removeDelegatedListener(e,"string"==typeof t?[t]:t,i),this)}queryRenderedFeatures(e,i){if(!this.style)return [];let a;const r=e instanceof t.P||Array.isArray(e),o=r?e:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(r?{}:e)||{},o instanceof t.P||"number"==typeof o[0])a=[t.P.convert(o)];else {const e=t.P.convert(o[0]),i=t.P.convert(o[1]);a=[e,new t.P(i.x,e.y),i,new t.P(e.x,i.y),e];}return this.style.queryRenderedFeatures(a,i,this.transform)}querySourceFeatures(e,t){return this.style.querySourceFeatures(e,t)}setStyle(e,i){return !1!==(i=t.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(e,i))}setTransformRequest(e){return this._requestManager.setTransformRequest(e),this}_getUIString(e){const t=this._locale[e];if(null==t)throw new Error(`Missing UI string '${e}'`);return t}_updateStyle(e,t){var i,a;if(t.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(e,t)));const r=this.style&&t.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!e)),e?(this.style=new ki(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e,t,r):this.style.loadJSON(e,t,r),this):(null===(a=null===(i=this.style)||void 0===i?void 0:i.projection)||void 0===a||a.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ki(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty());}_diffStyle(e,i){if("string"==typeof e){const a=this._requestManager.transformRequest(e,"Style");t.j(a,new AbortController).then((e=>{this._updateDiff(e.data,i);})).catch((e=>{e&&this.fire(new t.k(e));}));}else "object"==typeof e&&this._updateDiff(e,i);}_updateDiff(e,i){try{this.style.setState(e,i)&&this._update(!0);}catch(a){t.w(`Unable to perform style diff: ${a.message||a.error||a}.  Rebuilding the style from scratch.`),this._updateStyle(e,i);}}getStyle(){if(this.style)return this.style.serialize()}_getStyleAndImages(){return this.style?{style:this.style.serialize(),images:this.style.imageManager.cloneImages()}:{style:null,images:{}}}isStyleLoaded(){return this.style?this.style.loaded():t.w("There is no style added to the map.")}addSource(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}isSourceLoaded(e){const i=this.style&&this.style.tileManagers[e];if(void 0!==i)return i.loaded();this.fire(new t.k(new Error(`There is no tile manager with ID '${e}'`)));}setTerrain(e){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),e){const i=this.style.tileManagers[e.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${e.source}`);null===this.terrain&&i.reload();for(const i in this.style._layers){const a=this.style._layers[i];"hillshade"===a.type&&a.source===e.source&&t.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),"color-relief"===a.type&&a.source===e.source&&t.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.");}this.terrain=new is(this.painter,i,e),this.painter.renderToTexture=new os(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=t=>{var i;"style"===t.dataType?this.terrain.tileManager.freeRtt():"source"===t.dataType&&t.tile&&(t.sourceId!==e.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),"image"===(null===(i=t.source)||void 0===i?void 0:i.type)?this.terrain.tileManager.freeRtt():this.terrain.tileManager.freeRtt(t.tile.tileID));},this.style.on("data",this._terrainDataCallback);}else this.terrain&&this.terrain.tileManager.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new t.l("terrain",{terrain:e})),this}getTerrain(){var e,t;return null!==(t=null===(e=this.terrain)||void 0===e?void 0:e.options)&&void 0!==t?t:null}areTilesLoaded(){const e=this.style&&this.style.tileManagers;for(const t of Object.values(e))if(!t.areTilesLoaded())return !1;return !0}removeSource(e){return this.style.removeSource(e),this._update(!0)}getSource(e){return this.style.getSource(e)}setSourceTileLodParams(e,t,i){if(i){const a=this.getSource(i);if(!a)throw new Error(`There is no source with ID "${i}", cannot set LOD parameters`);a.calculateTileZoom=Te(Math.max(1,e),Math.max(1,t));}else for(const i in this.style.tileManagers)this.style.tileManagers[i].getSource().calculateTileZoom=Te(Math.max(1,e),Math.max(1,t));return this._update(!0),this}refreshTiles(e,i){const a=this.style.tileManagers[e];if(!a)throw new Error(`There is no tile manager with ID "${e}", cannot refresh tile`);void 0===i?a.reload(!0):a.refreshTiles(i.map((e=>new t.ac(e.z,e.x,e.y))));}addImage(e,i,a={}){const{pixelRatio:r=1,sdf:o=!1,stretchX:s,stretchY:l,content:c,textFitWidth:h,textFitHeight:u}=a;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||t.b(i))){if(void 0===i.width||void 0===i.height)return this.fire(new t.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:a,height:n,data:d}=i,_=i;return this.style.addImage(e,{data:new t.R({width:a,height:n},new Uint8Array(d)),pixelRatio:r,stretchX:s,stretchY:l,content:c,textFitWidth:h,textFitHeight:u,sdf:o,version:0,userImage:_}),_.onAdd&&_.onAdd(this,e),this}}{const{width:a,height:d,data:_}=n.getImageData(i);this.style.addImage(e,{data:new t.R({width:a,height:d},_),pixelRatio:r,stretchX:s,stretchY:l,content:c,textFitWidth:h,textFitHeight:u,sdf:o,version:0});}}updateImage(e,i){const a=this.style.getImage(e);if(!a)return this.fire(new t.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const r=i instanceof HTMLImageElement||t.b(i)?n.getImageData(i):i,{width:o,height:s,data:l}=r;if(void 0===o||void 0===s)return this.fire(new t.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(o!==a.data.width||s!==a.data.height)return this.fire(new t.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const c=!(i instanceof HTMLImageElement||t.b(i));return a.data.replace(l,c),this.style.updateImage(e,a),this}getImage(e){return this.style.getImage(e)}hasImage(e){return e?!!this.style.getImage(e):(this.fire(new t.k(new Error("Missing required image id"))),!1)}removeImage(e){this.style.removeImage(e);}loadImage(e){return g.getImage(this._requestManager.transformRequest(e,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}moveLayer(e,t){return this.style.moveLayer(e,t),this._update(!0)}removeLayer(e){return this.style.removeLayer(e),this._update(!0)}getLayer(e){return this.style.getLayer(e)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(e,t,i){return this.style.setLayerZoomRange(e,t,i),this._update(!0)}setFilter(e,t,i={}){return this.style.setFilter(e,t,i),this._update(!0)}getFilter(e){return this.style.getFilter(e)}setPaintProperty(e,t,i,a={}){return this.style.setPaintProperty(e,t,i,a),this._update(!0)}getPaintProperty(e,t){return this.style.getPaintProperty(e,t)}setLayoutProperty(e,t,i,a={}){return this.style.setLayoutProperty(e,t,i,a),this._update(!0)}getLayoutProperty(e,t){return this.style.getLayoutProperty(e,t)}setGlyphs(e,t={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(e,t),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(e,t,i={}){return this._lazyInitEmptyStyle(),this.style.addSprite(e,t,i,(e=>{e||this._update(!0);})),this}removeSprite(e){return this._lazyInitEmptyStyle(),this.style.removeSprite(e),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(e,t={}){return this._lazyInitEmptyStyle(),this.style.setSprite(e,t,(e=>{e||this._update(!0);})),this}setLight(e,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}getLight(){return this.style.getLight()}setSky(e,t={}){return this._lazyInitEmptyStyle(),this.style.setSky(e,t),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(e,t){return this.style.setFeatureState(e,t),this._update()}removeFeatureState(e,t){return this.style.removeFeatureState(e,t),this._update()}getFeatureState(e){return this.style.getFeatureState(e)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let e=0,t=0;return this._container&&(e=this._container.clientWidth||400,t=this._container.clientHeight||300),[e,t]}_setupContainer(){const e=this._container;e.classList.add("maplibregl-map");const t=this._canvasContainer=h.create("div","maplibregl-canvas-container",e);this._interactive&&t.classList.add("maplibregl-interactive"),this._canvas=h.create("canvas","maplibregl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const i=this._containerDimensions(),a=this._getClampedPixelRatio(i[0],i[1]);this._resizeCanvas(i[0],i[1],a);const r=this._controlContainer=h.create("div","maplibregl-control-container",e),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((e=>{o[e]=h.create("div",`maplibregl-ctrl-${e} `,r);})),this._container.addEventListener("scroll",this._onMapScroll,!1);}_resizeCanvas(e,t,i){this._canvas.width=Math.floor(i*e),this._canvas.height=Math.floor(i*t),this._canvas.style.width=`${e}px`,this._canvas.style.height=`${t}px`;}_setupPainter(){const e=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let t=null;this._canvas.addEventListener("webglcontextcreationerror",(i=>{t={requestedAttributes:e},i&&(t.statusMessage=i.statusMessage,t.type=i.type);}),{once:!0});let i=null;if(i=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,e):this._canvas.getContext("webgl2",e)||this._canvas.getContext("webgl",e),!i){const e="Failed to initialize WebGL";throw t?(t.message=e,new Error(JSON.stringify(t))):new Error(e)}this.painter=new qr(i,this.transform),u.testSupport(i);}migrateProjection(e,i){super.migrateProjection(e,i),this.painter.transform=e,this.fire(new t.l("projectiontransition",{newProjection:this.style.projection.name}));}loaded(){return !this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(e){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(e){return this._update(),this._renderTaskQueue.add(e)}_cancelRenderFrame(e){this._renderTaskQueue.remove(e);}_render(e){var i,a,r,o,s;const n=this._idleTriggered?this._fadeDuration:0,l=(null===(i=this.style.projection)||void 0===i?void 0:i.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),this._removed)return;let h=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const e=this.transform.zoom,i=c();this.style.zoomHistory.update(e,i);const a=new t.H(e,{now:i,fadeDuration:n,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),r=a.crossFadingFactor();1===r&&r===this._crossFadingFactor||(h=!0,this._crossFadingFactor=r),this.style.update(a);}const u=(null===(a=this.style.projection)||void 0===a?void 0:a.transitionState)>0!==l;null===(r=this.style.projection)||void 0===r||r.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState(null===(o=this.style.projection)||void 0===o?void 0:o.transitionState,null===(s=this.style.projection)||void 0===s?void 0:s.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||u)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.tileManager.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,n,this._crossSourceCollisions,u),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:n,showPadding:this.showPadding}),this.fire(new t.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,t.cG.mark(t.cH.load),this.fire(new t.l("load"))),this.style&&(this.style.hasTransitions()||h)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const d=this._sourcesDirty||this._styleDirty||this._placementDirty;return d||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.l("idle")),!this._loaded||this._fullyLoaded||d||(this._fullyLoaded=!0,t.cG.mark(t.cH.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var e;this._hash&&this._hash.remove();for(const e of this._controls)e.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),"undefined"!=typeof window&&removeEventListener("online",this._onWindowOnline,!1),g.removeThrottleControl(this._imageQueueHandle),null===(e=this._resizeObserver)||void 0===e||e.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");(null==i?void 0:i.loseContext)&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),h.remove(this._canvasContainer),h.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),t.cG.clearMetrics(),this._removed=!0,this.fire(new t.l("remove"));}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,n.frame(this._frameRequest,(e=>{t.cG.frame(e),this._frameRequest=null;try{this._render(e);}catch(e){if(!t.Z(e)&&!function(e){return e.message===or}(e))throw e}}),(()=>{})));}get showTileBoundaries(){return !!this._showTileBoundaries}set showTileBoundaries(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update());}get showPadding(){return !!this._showPadding}set showPadding(e){this._showPadding!==e&&(this._showPadding=e,this._update());}get showCollisionBoxes(){return !!this._showCollisionBoxes}set showCollisionBoxes(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update());}get showOverdrawInspector(){return !!this._showOverdrawInspector}set showOverdrawInspector(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update());}get repaint(){return !!this._repaint}set repaint(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint());}get vertices(){return !!this._vertices}set vertices(e){this._vertices=e,this._update();}get version(){return ns}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(e){return this._lazyInitEmptyStyle(),this.style.setProjection(e),this._update(!0)}},e.MapMouseEvent=ao,e.MapTouchEvent=ro,e.MapWheelEvent=oo,e.Marker=ms,e.NavigationControl=class{constructor(e){this._updateZoomButtons=()=>{const e=this._map.getZoom(),t=e===this._map.getMaxZoom(),i=e===this._map.getMinZoom();this._zoomInButton.disabled=t,this._zoomOutButton.disabled=i,this._zoomInButton.setAttribute("aria-disabled",t.toString()),this._zoomOutButton.setAttribute("aria-disabled",i.toString());},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`;},this._setButtonTitle=(e,t)=>{const i=this._map._getUIString(`NavigationControl.${t}`);e.title=i,e.setAttribute("aria-label",i);},this.options=t.e({},cs,e),this._container=h.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(e=>this._map.zoomIn({},{originalEvent:e}))),h.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(e=>this._map.zoomOut({},{originalEvent:e}))),h.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(e=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e});})),this._compassIcon=h.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"));}onAdd(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new hs(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){h.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map;}_createButton(e,t){const i=h.create("button",e,this._container);return i.type="button",i.addEventListener("click",t),i}},e.Popup=class extends t.E{constructor(e){super(),this._updateOpacity=()=>{void 0!==this.options.locationOccludedOpacity&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"");},this.remove=()=>(this._content&&h.remove(this._content),this._container&&(h.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new t.l("close"))),this),this._onMouseUp=e=>{this._update(e.point);},this._onMouseMove=e=>{this._update(e.point);},this._onDrag=e=>{this._update(e.point);},this._update=e=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=h.create("div","maplibregl-popup",this._map.getContainer()),this._tip=h.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const e of this.options.className.split(" "))this._container.classList.add(e);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer");}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=ds(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!e)return;const t=this._flatPos=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&e?e:this._map.transform.locationToScreenPoint(this._lngLat));let i=this.options.anchor;const a=Ps(this.options.offset);if(!i){const e=this._container.offsetWidth,r=this._container.offsetHeight;let o;o=t.y+a.bottom.y<r?["top"]:t.y>this._map.transform.height-r?["bottom"]:[],t.x<e/2?o.push("left"):t.x>this._map.transform.width-e/2&&o.push("right"),i=0===o.length?"bottom":o.join("-");}let r=t.add(a[i]);this.options.subpixelPositioning||(r=r.round()),h.setTransform(this._container,`${_s[i]} translate(${r.x}px,${r.y}px)`),ps(this._container,i,"popup"),this._updateOpacity();},this._onClose=()=>{this.remove();},this.options=t.e(Object.create(ws),e);}addTo(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new t.l("open")),this}isOpen(){return !!this._map}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.V.convert(e),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(e){return this.setDOMContent(document.createTextNode(e))}setHTML(e){const t=document.createDocumentFragment(),i=document.createElement("body");let a;for(i.innerHTML=e;a=i.firstChild,a;)t.appendChild(a);return this.setDOMContent(t)}getMaxWidth(){var e;return null===(e=this._container)||void 0===e?void 0:e.style.maxWidth}setMaxWidth(e){return this.options.maxWidth=e,this._update(),this}setDOMContent(e){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=h.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(e),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(e){return this._container&&this._container.classList.add(e),this}removeClassName(e){return this._container&&this._container.classList.remove(e),this}setOffset(e){return this.options.offset=e,this._update(),this}toggleClassName(e){if(this._container)return this._container.classList.toggle(e)}setSubpixelPositioning(e){this.options.subpixelPositioning=e;}_createCloseButton(){this.options.closeButton&&(this._closeButton=h.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose));}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const e=this._container.querySelector(Ts);e&&e.focus();}},e.RasterDEMTileSource=Y,e.RasterTileSource=K,e.ScaleControl=class{constructor(e){this._onMove=()=>{bs(this._map,this._container,this.options);},this.setUnit=e=>{this.options.unit=e,bs(this._map,this._container,this.options);},this.options=Object.assign(Object.assign({},xs),e);}getDefaultPosition(){return "bottom-left"}onAdd(e){return this._map=e,this._container=h.create("div","maplibregl-ctrl maplibregl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){h.remove(this._container),this._map.off("move",this._onMove),this._map=void 0;}},e.ScrollZoomHandler=Bo,e.Style=ki,e.TerrainControl=class{constructor(e){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon();},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"));},this.options=e;}onAdd(e){return this._map=e,this._container=h.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=h.create("button","maplibregl-ctrl-terrain",this._container),h.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){h.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0;}},e.TwoFingersTouchPitchHandler=zo,e.TwoFingersTouchRotateHandler=So,e.TwoFingersTouchZoomHandler=Mo,e.TwoFingersTouchZoomRotateHandler=Uo,e.VectorTileSource=X,e.VideoSource=ie,e.addSourceType=(e,i)=>t._(void 0,void 0,void 0,(function*(){if(oe(e))throw new Error(`A source type called "${e}" already exists.`);((e,t)=>{re[e]=t;})(e,i);})),e.clearPrewarmedResources=function(){const e=B;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(L),B=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"));},e.createTileMesh=li,e.getMaxParallelImageRequests=function(){return t.c.MAX_PARALLEL_IMAGE_REQUESTS},e.getRTLTextPluginStatus=function(){return ce().getRTLTextPluginStatus()},e.getVersion=function(){return Cs},e.getWorkerCount=function(){return k.workerCount},e.getWorkerUrl=function(){return t.c.WORKER_URL},e.importScriptInWorkers=function(e){return Z().broadcast("IS",e)},e.isTimeFrozen=function(){return l.isFrozen()},e.now=c,e.prewarm=function(){j().acquire(L);},e.restoreNow=function(){l.restoreNow();},e.setMaxParallelImageRequests=function(e){t.c.MAX_PARALLEL_IMAGE_REQUESTS=e;},e.setNow=function(e){l.setNow(e);},e.setRTLTextPlugin=function(e,t){return ce().setRTLTextPlugin(e,t)},e.setWorkerCount=function(e){k.workerCount=e;},e.setWorkerUrl=function(e){t.c.WORKER_URL=e;};}));

//
// Our custom intro provides a specialized "define()" function, called by the
// AMD modules below, that sets up the worker blob URL and then executes the
// main module, storing its exported value as 'maplibregl'


var maplibregl$1 = maplibregl;

return maplibregl$1;

}));
//# sourceMappingURL=maplibre-gl.js.map
</script>
<style type="text/css">

.mapbox-gl-draw_ctrl-bottom-left,
.mapbox-gl-draw_ctrl-top-left {
margin-left:0;
border-radius:0 4px 4px 0;
}
.mapbox-gl-draw_ctrl-top-right,
.mapbox-gl-draw_ctrl-bottom-right {
margin-right:0;
border-radius:4px 0 0 4px;
}
.mapbox-gl-draw_ctrl-draw-btn {
border-color:rgba(0,0,0,0.9);
color:rgba(255,255,255,0.5);
width:30px;
height:30px;
}
.mapbox-gl-draw_ctrl-draw-btn.active,
.mapbox-gl-draw_ctrl-draw-btn.active:hover {
background-color:rgb(0 0 0/5%);
}
.mapbox-gl-draw_ctrl-draw-btn {
background-repeat: no-repeat;
background-position: center;
}
.mapbox-gl-draw_point {
background-image: url('data:image/svg+xml;utf8,%3Csvg xmlns="http://www.w3.org/2000/svg" width="20" height="20">%3Cpath d="m10 2c-3.3 0-6 2.7-6 6s6 9 6 9 6-5.7 6-9-2.7-6-6-6zm0 2c2.1 0 3.8 1.7 3.8 3.8 0 1.5-1.8 3.9-2.9 5.2h-1.7c-1.1-1.4-2.9-3.8-2.9-5.2-.1-2.1 1.6-3.8 3.7-3.8z"/>%3C/svg>');
}
.mapbox-gl-draw_polygon {
background-image: url('data:image/svg+xml;utf8,%3Csvg xmlns="http://www.w3.org/2000/svg" width="20" height="20">%3Cpath d="m15 12.3v-4.6c.6-.3 1-1 1-1.7 0-1.1-.9-2-2-2-.7 0-1.4.4-1.7 1h-4.6c-.3-.6-1-1-1.7-1-1.1 0-2 .9-2 2 0 .7.4 1.4 1 1.7v4.6c-.6.3-1 1-1 1.7 0 1.1.9 2 2 2 .7 0 1.4-.4 1.7-1h4.6c.3.6 1 1 1.7 1 1.1 0 2-.9 2-2 0-.7-.4-1.4-1-1.7zm-8-.3v-4l1-1h4l1 1v4l-1 1h-4z"/>%3C/svg>');
}
.mapbox-gl-draw_line {
background-image: url('data:image/svg+xml;utf8,%3Csvg xmlns="http://www.w3.org/2000/svg" width="20" height="20">%3Cpath d="m13.5 3.5c-1.4 0-2.5 1.1-2.5 2.5 0 .3 0 .6.2.9l-3.8 3.8c-.3-.1-.6-.2-.9-.2-1.4 0-2.5 1.1-2.5 2.5s1.1 2.5 2.5 2.5 2.5-1.1 2.5-2.5c0-.3 0-.6-.2-.9l3.8-3.8c.3.1.6.2.9.2 1.4 0 2.5-1.1 2.5-2.5s-1.1-2.5-2.5-2.5z"/>%3C/svg>');
}
.mapbox-gl-draw_trash {
background-image: url('data:image/svg+xml;utf8,%3Csvg xmlns="http://www.w3.org/2000/svg" width="20" height="20">%3Cpath d="M10,3.4 c-0.8,0-1.5,0.5-1.8,1.2H5l-1,1v1h12v-1l-1-1h-3.2C11.5,3.9,10.8,3.4,10,3.4z M5,8v7c0,1,1,2,2,2h6c1,0,2-1,2-2V8h-2v5.5h-1.5V8h-3 v5.5H7V8H5z"/>%3C/svg>');
}
.mapbox-gl-draw_uncombine {
background-image: url('data:image/svg+xml;utf8,%3Csvg xmlns="http://www.w3.org/2000/svg" width="20" height="20">%3Cpath d="m12 2c-.3 0-.5.1-.7.3l-1 1c-.4.4-.4 1 0 1.4l1 1c.4.4 1 .4 1.4 0l1-1c.4-.4.4-1 0-1.4l-1-1c-.2-.2-.4-.3-.7-.3zm4 4c-.3 0-.5.1-.7.3l-1 1c-.4.4-.4 1 0 1.4l1 1c.4.4 1 .4 1.4 0l1-1c.4-.4.4-1 0-1.4l-1-1c-.2-.2-.4-.3-.7-.3zm-7 1c-1 0-1 1-.5 1.5.3.3 1 1 1 1l-1 1s-.5.5 0 1 1 0 1 0l1-1 1 1c.5.5 1.5.5 1.5-.5v-4zm-5 3c-.3 0-.5.1-.7.3l-1 1c-.4.4-.4 1 0 1.4l4.9 4.9c.4.4 1 .4 1.4 0l1-1c.4-.4.4-1 0-1.4l-4.9-4.9c-.1-.2-.4-.3-.7-.3z"/>%3C/svg>');
}
.mapbox-gl-draw_combine {
background-image: url('data:image/svg+xml;utf8,%3Csvg xmlns="http://www.w3.org/2000/svg" width="20" height="20">%3Cpath d="M12.1,2c-0.3,0-0.5,0.1-0.7,0.3l-1,1c-0.4,0.4-0.4,1,0,1.4l4.9,4.9c0.4,0.4,1,0.4,1.4,0l1-1 c0.4-0.4,0.4-1,0-1.4l-4.9-4.9C12.6,2.1,12.3,2,12.1,2z M8,8C7,8,7,9,7.5,9.5c0.3,0.3,1,1,1,1l-1,1c0,0-0.5,0.5,0,1s1,0,1,0l1-1l1,1 C11,13,12,13,12,12V8H8z M4,10c-0.3,0-0.5,0.1-0.7,0.3l-1,1c-0.4,0.4-0.4,1,0,1.4l1,1c0.4,0.4,1,0.4,1.4,0l1-1c0.4-0.4,0.4-1,0-1.4 l-1-1C4.5,10.1,4.3,10,4,10z M8,14c-0.3,0-0.5,0.1-0.7,0.3l-1,1c-0.4,0.4-0.4,1,0,1.4l1,1c0.4,0.4,1,0.4,1.4,0l1-1 c0.4-0.4,0.4-1,0-1.4l-1-1C8.5,14.1,8.3,14,8,14z"/>%3C/svg>');
}
.mapboxgl-map.mouse-pointer .mapboxgl-canvas-container.mapboxgl-interactive {
cursor: pointer;
}
.mapboxgl-map.mouse-move .mapboxgl-canvas-container.mapboxgl-interactive {
cursor: move;
}
.mapboxgl-map.mouse-add .mapboxgl-canvas-container.mapboxgl-interactive {
cursor: crosshair;
}
.mapboxgl-map.mouse-move.mode-direct_select .mapboxgl-canvas-container.mapboxgl-interactive {
cursor: grab;
cursor: -moz-grab;
cursor: -webkit-grab;
}
.mapboxgl-map.mode-direct_select.feature-vertex.mouse-move .mapboxgl-canvas-container.mapboxgl-interactive {
cursor: move;
}
.mapboxgl-map.mode-direct_select.feature-midpoint.mouse-pointer .mapboxgl-canvas-container.mapboxgl-interactive {
cursor: cell;
}
.mapboxgl-map.mode-direct_select.feature-feature.mouse-move .mapboxgl-canvas-container.mapboxgl-interactive {
cursor: move;
}
.mapboxgl-map.mode-static.mouse-pointer .mapboxgl-canvas-container.mapboxgl-interactive {
cursor: grab;
cursor: -moz-grab;
cursor: -webkit-grab;
}
.mapbox-gl-draw_boxselect {
pointer-events: none;
position: absolute;
top: 0;
left: 0;
width: 0;
height: 0;
background: rgba(0,0,0,.1);
border: 2px dotted #fff;
opacity: 0.5;
}
</style>
<script>var e,t;e=this,t=function(){const e=function(e,t){const o={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},n={on(e,t,n){if(void 0===o[e])throw new Error(`Invalid event type: ${e}`);o[e].push({selector:t,fn:n})},render(e){t.store.featureChanged(e)}},r=function(e,r){const i=o[e];let s=i.length;for(;s--;){const e=i[s];if(e.selector(r)){e.fn.call(n,r)||t.store.render(),t.ui.updateMapClasses();break}}};return e.start.call(n),{render:e.render,stop(){e.stop&&e.stop()},trash(){e.trash&&(e.trash(),t.store.render())},combineFeatures(){e.combineFeatures&&e.combineFeatures()},uncombineFeatures(){e.uncombineFeatures&&e.uncombineFeatures()},drag(e){r("drag",e)},click(e){r("click",e)},mousemove(e){r("mousemove",e)},mousedown(e){r("mousedown",e)},mouseup(e){r("mouseup",e)},mouseout(e){r("mouseout",e)},keydown(e){r("keydown",e)},keyup(e){r("keyup",e)},touchstart(e){r("touchstart",e)},touchmove(e){r("touchmove",e)},touchend(e){r("touchend",e)},tap(e){r("tap",e)}}};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var o,n,r={},i={};function s(){return o||(o=1,i.RADIUS=6378137,i.FLATTENING=1/298.257223563,i.POLAR_RADIUS=6356752.3142),i}var a=function(){if(n)return r;n=1;var e=s();function t(e){var t=0;if(e&&e.length>0){t+=Math.abs(o(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(o(e[n]))}return t}function o(t){var o,n,r,s,a,c,u=0,l=t.length;if(l>2){for(c=0;c<l;c++)c===l-2?(r=l-2,s=l-1,a=0):c===l-1?(r=l-1,s=0,a=1):(r=c,s=c+1,a=c+2),o=t[r],n=t[s],u+=(i(t[a][0])-i(o[0]))*Math.sin(i(n[1]));u=u*e.RADIUS*e.RADIUS/2}return u}function i(e){return e*Math.PI/180}return r.geometry=function e(o){var n,r=0;switch(o.type){case"Polygon":return t(o.coordinates);case"MultiPolygon":for(n=0;n<o.coordinates.length;n++)r+=t(o.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<o.geometries.length;n++)r+=e(o.geometries[n]);return r}},r.ring=o,r}(),c=t(a);const u={CANVAS:"mapboxgl-canvas",CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},l={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},d={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},p={POLYGON:"polygon",LINE:"line_string",POINT:"point"},h={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},f={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select"},g={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},m={MOVE:"move",CHANGE_PROPERTIES:"change_properties",CHANGE_COORDINATES:"change_coordinates"},y={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},E={ACTIVE:"true",INACTIVE:"false"},T=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],C=-85,_=85;var v=Object.freeze({__proto__:null,LAT_MAX:90,LAT_MIN:-90,LAT_RENDERED_MAX:_,LAT_RENDERED_MIN:C,LNG_MAX:270,LNG_MIN:-270,activeStates:E,classes:u,cursors:d,events:g,geojsonTypes:h,interactions:T,meta:y,modes:f,sources:l,types:p,updateActions:m});const I={Point:0,LineString:1,MultiLineString:1,Polygon:2};function S(e,t){const o=I[e.geometry.type]-I[t.geometry.type];return 0===o&&e.geometry.type===h.POLYGON?e.area-t.area:o}function O(e){return e.map((e=>(e.geometry.type===h.POLYGON&&(e.area=c.geometry({type:h.FEATURE,property:{},geometry:e.geometry})),e))).sort(S).map((e=>(delete e.area,e)))}function L(e,t=0){return[[e.point.x-t,e.point.y-t],[e.point.x+t,e.point.y+t]]}function M(e){if(this._items={},this._nums={},this._length=e?e.length:0,e)for(let t=0,o=e.length;t<o;t++)this.add(e[t]),void 0!==e[t]&&("string"==typeof e[t]?this._items[e[t]]=t:this._nums[e[t]]=t)}M.prototype.add=function(e){return this.has(e)||(this._length++,"string"==typeof e?this._items[e]=this._length:this._nums[e]=this._length),this},M.prototype.delete=function(e){return!1===this.has(e)||(this._length--,delete this._items[e],delete this._nums[e]),this},M.prototype.has=function(e){return!("string"!=typeof e&&"number"!=typeof e||void 0===this._items[e]&&void 0===this._nums[e])},M.prototype.values=function(){const e=[];return Object.keys(this._items).forEach((t=>{e.push({k:t,v:this._items[t]})})),Object.keys(this._nums).forEach((t=>{e.push({k:JSON.parse(t),v:this._nums[t]})})),e.sort(((e,t)=>e.v-t.v)).map((e=>e.k))},M.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};const N=[y.FEATURE,y.MIDPOINT,y.VERTEX];var b={click:function(e,t,o){return x(e,t,o,o.options.clickBuffer)},touch:function(e,t,o){return x(e,t,o,o.options.touchBuffer)}};function x(e,t,o,n){if(null===o.map)return[];const r=e?L(e,n):t,i={};o.options.styles&&(i.layers=o.options.styles.map((e=>e.id)).filter((e=>null!=o.map.getLayer(e))));const s=o.map.queryRenderedFeatures(r,i).filter((e=>-1!==N.indexOf(e.properties.meta))),a=new M,c=[];return s.forEach((e=>{const t=e.properties.id;a.has(t)||(a.add(t),c.push(e))})),O(c)}function A(e,t){const o=b.click(e,null,t),n={mouse:d.NONE};return o[0]&&(n.mouse=o[0].properties.active===E.ACTIVE?d.MOVE:d.POINTER,n.feature=o[0].properties.meta),-1!==t.events.currentModeName().indexOf("draw")&&(n.mouse=d.ADD),t.ui.queueMapClasses(n),t.ui.updateMapClasses(),o[0]}function P(e,t){const o=e.x-t.x,n=e.y-t.y;return Math.sqrt(o*o+n*n)}const F=4,R=12,w=500;function D(e,t,o={}){const n=null!=o.fineTolerance?o.fineTolerance:F,r=null!=o.grossTolerance?o.grossTolerance:R,i=null!=o.interval?o.interval:w;e.point=e.point||t.point,e.time=e.time||t.time;const s=P(e.point,t.point);return s<n||s<r&&t.time-e.time<i}const U=25,k=250;function V(e,t,o={}){const n=null!=o.tolerance?o.tolerance:U,r=null!=o.interval?o.interval:k;return e.point=e.point||t.point,e.time=e.time||t.time,P(e.point,t.point)<n&&t.time-e.time<r}const G=((e,t=21)=>(o=t)=>{let n="",r=0|o;for(;r--;)n+=e[Math.random()*e.length|0];return n})("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",32);function B(){return G()}const j=function(e,t){this.ctx=e,this.properties=t.properties||{},this.coordinates=t.geometry.coordinates,this.id=t.id||B(),this.type=t.geometry.type};j.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},j.prototype.incomingCoords=function(e){this.setCoordinates(e)},j.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()},j.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},j.prototype.setProperty=function(e,t){this.properties[e]=t},j.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:h.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},j.prototype.internal=function(e){const t={id:this.id,meta:y.FEATURE,"meta:type":this.type,active:E.INACTIVE,mode:e};if(this.ctx.options.userProperties)for(const e in this.properties)t[`user_${e}`]=this.properties[e];return{type:h.FEATURE,properties:t,geometry:{coordinates:this.getCoordinates(),type:this.type}}};const J=function(e,t){j.call(this,e,t)};(J.prototype=Object.create(j.prototype)).isValid=function(){return"number"==typeof this.coordinates[0]&&"number"==typeof this.coordinates[1]},J.prototype.updateCoordinate=function(e,t,o){this.coordinates=3===arguments.length?[t,o]:[e,t],this.changed()},J.prototype.getCoordinate=function(){return this.getCoordinates()};const $=function(e,t){j.call(this,e,t)};($.prototype=Object.create(j.prototype)).isValid=function(){return this.coordinates.length>1},$.prototype.addCoordinate=function(e,t,o){this.changed();const n=parseInt(e,10);this.coordinates.splice(n,0,[t,o])},$.prototype.getCoordinate=function(e){const t=parseInt(e,10);return JSON.parse(JSON.stringify(this.coordinates[t]))},$.prototype.removeCoordinate=function(e){this.changed(),this.coordinates.splice(parseInt(e,10),1)},$.prototype.updateCoordinate=function(e,t,o){const n=parseInt(e,10);this.coordinates[n]=[t,o],this.changed()};const Y=function(e,t){j.call(this,e,t),this.coordinates=this.coordinates.map((e=>e.slice(0,-1)))};(Y.prototype=Object.create(j.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every((e=>e.length>2))},Y.prototype.incomingCoords=function(e){this.coordinates=e.map((e=>e.slice(0,-1))),this.changed()},Y.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()},Y.prototype.addCoordinate=function(e,t,o){this.changed();const n=e.split(".").map((e=>parseInt(e,10)));this.coordinates[n[0]].splice(n[1],0,[t,o])},Y.prototype.removeCoordinate=function(e){this.changed();const t=e.split(".").map((e=>parseInt(e,10))),o=this.coordinates[t[0]];o&&(o.splice(t[1],1),o.length<3&&this.coordinates.splice(t[0],1))},Y.prototype.getCoordinate=function(e){const t=e.split(".").map((e=>parseInt(e,10))),o=this.coordinates[t[0]];return JSON.parse(JSON.stringify(o[t[1]]))},Y.prototype.getCoordinates=function(){return this.coordinates.map((e=>e.concat([e[0]])))},Y.prototype.updateCoordinate=function(e,t,o){this.changed();const n=e.split("."),r=parseInt(n[0],10),i=parseInt(n[1],10);void 0===this.coordinates[r]&&(this.coordinates[r]=[]),this.coordinates[r][i]=[t,o]};const H={MultiPoint:J,MultiLineString:$,MultiPolygon:Y},X=(e,t,o,n,r)=>{const i=o.split("."),s=parseInt(i[0],10),a=i[1]?i.slice(1).join("."):null;return e[s][t](a,n,r)},q=function(e,t){if(j.call(this,e,t),delete this.coordinates,this.model=H[t.geometry.type],void 0===this.model)throw new TypeError(`${t.geometry.type} is not a valid type`);this.features=this._coordinatesToFeatures(t.geometry.coordinates)};function Z(e){this.map=e.map,this.drawConfig=JSON.parse(JSON.stringify(e.options||{})),this._ctx=e}(q.prototype=Object.create(j.prototype))._coordinatesToFeatures=function(e){const t=this.model.bind(this);return e.map((e=>new t(this.ctx,{id:B(),type:h.FEATURE,properties:{},geometry:{coordinates:e,type:this.type.replace("Multi","")}})))},q.prototype.isValid=function(){return this.features.every((e=>e.isValid()))},q.prototype.setCoordinates=function(e){this.features=this._coordinatesToFeatures(e),this.changed()},q.prototype.getCoordinate=function(e){return X(this.features,"getCoordinate",e)},q.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map((e=>e.type===h.POLYGON?e.getCoordinates():e.coordinates))))},q.prototype.updateCoordinate=function(e,t,o){X(this.features,"updateCoordinate",e,t,o),this.changed()},q.prototype.addCoordinate=function(e,t,o){X(this.features,"addCoordinate",e,t,o),this.changed()},q.prototype.removeCoordinate=function(e){X(this.features,"removeCoordinate",e),this.changed()},q.prototype.getFeatures=function(){return this.features},Z.prototype.setSelected=function(e){return this._ctx.store.setSelected(e)},Z.prototype.setSelectedCoordinates=function(e){this._ctx.store.setSelectedCoordinates(e),e.reduce(((e,t)=>(void 0===e[t.feature_id]&&(e[t.feature_id]=!0,this._ctx.store.get(t.feature_id).changed()),e)),{})},Z.prototype.getSelected=function(){return this._ctx.store.getSelected()},Z.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},Z.prototype.isSelected=function(e){return this._ctx.store.isSelected(e)},Z.prototype.getFeature=function(e){return this._ctx.store.get(e)},Z.prototype.select=function(e){return this._ctx.store.select(e)},Z.prototype.deselect=function(e){return this._ctx.store.deselect(e)},Z.prototype.deleteFeature=function(e,t={}){return this._ctx.store.delete(e,t)},Z.prototype.addFeature=function(e,t={}){return this._ctx.store.add(e,t)},Z.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},Z.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},Z.prototype.setActionableState=function(e={}){const t={trash:e.trash||!1,combineFeatures:e.combineFeatures||!1,uncombineFeatures:e.uncombineFeatures||!1};return this._ctx.events.actionable(t)},Z.prototype.changeMode=function(e,t={},o={}){return this._ctx.events.changeMode(e,t,o)},Z.prototype.fire=function(e,t){return this._ctx.events.fire(e,t)},Z.prototype.updateUIClasses=function(e){return this._ctx.ui.queueMapClasses(e)},Z.prototype.activateUIButton=function(e){return this._ctx.ui.setActiveButton(e)},Z.prototype.featuresAt=function(e,t,o="click"){if("click"!==o&&"touch"!==o)throw new Error("invalid buffer type");return b[o](e,t,this._ctx)},Z.prototype.newFeature=function(e){const t=e.geometry.type;return t===h.POINT?new J(this._ctx,e):t===h.LINE_STRING?new $(this._ctx,e):t===h.POLYGON?new Y(this._ctx,e):new q(this._ctx,e)},Z.prototype.isInstanceOf=function(e,t){if(e===h.POINT)return t instanceof J;if(e===h.LINE_STRING)return t instanceof $;if(e===h.POLYGON)return t instanceof Y;if("MultiFeature"===e)return t instanceof q;throw new Error(`Unknown feature class: ${e}`)},Z.prototype.doRender=function(e){return this._ctx.store.featureChanged(e)},Z.prototype.onSetup=function(){},Z.prototype.onDrag=function(){},Z.prototype.onClick=function(){},Z.prototype.onMouseMove=function(){},Z.prototype.onMouseDown=function(){},Z.prototype.onMouseUp=function(){},Z.prototype.onMouseOut=function(){},Z.prototype.onKeyUp=function(){},Z.prototype.onKeyDown=function(){},Z.prototype.onTouchStart=function(){},Z.prototype.onTouchMove=function(){},Z.prototype.onTouchEnd=function(){},Z.prototype.onTap=function(){},Z.prototype.onStop=function(){},Z.prototype.onTrash=function(){},Z.prototype.onCombineFeature=function(){},Z.prototype.onUncombineFeature=function(){},Z.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};const W={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},K=Object.keys(W);function z(e){const t=Object.keys(e);return function(o,n={}){let r={};const i=t.reduce(((t,o)=>(t[o]=e[o],t)),new Z(o));return{start(){r=i.onSetup(n),K.forEach((t=>{const o=W[t];let n=()=>!1;var s;e[o]&&(n=()=>!0),this.on(t,n,(s=o,e=>i[s](r,e)))}))},stop(){i.onStop(r)},trash(){i.onTrash(r)},combineFeatures(){i.onCombineFeatures(r)},uncombineFeatures(){i.onUncombineFeatures(r)},render(e,t){i.toDisplayFeatures(r,e,t)}}}}function Q(e){return[].concat(e).filter((e=>void 0!==e))}function ee(){const e=this;if(!e.ctx.map||void 0===e.ctx.map.getSource(l.HOT))return a();const t=e.ctx.events.currentModeName();e.ctx.ui.queueMapClasses({mode:t});let o=[],n=[];e.isDirty?n=e.getAllIds():(o=e.getChangedIds().filter((t=>void 0!==e.get(t))),n=e.sources.hot.filter((t=>t.properties.id&&-1===o.indexOf(t.properties.id)&&void 0!==e.get(t.properties.id))).map((e=>e.properties.id))),e.sources.hot=[];const r=e.sources.cold.length;e.sources.cold=e.isDirty?[]:e.sources.cold.filter((e=>{const t=e.properties.id||e.properties.parent;return-1===o.indexOf(t)}));const i=r!==e.sources.cold.length||n.length>0;function s(o,n){const r=e.get(o).internal(t);e.ctx.events.currentModeRender(r,(o=>{o.properties.mode=t,e.sources[n].push(o)}))}function a(){e.isDirty=!1,e.clearChangedIds()}o.forEach((e=>s(e,"hot"))),n.forEach((e=>s(e,"cold"))),i&&e.ctx.map.getSource(l.COLD).setData({type:h.FEATURE_COLLECTION,features:e.sources.cold}),e.ctx.map.getSource(l.HOT).setData({type:h.FEATURE_COLLECTION,features:e.sources.hot}),a()}function te(e){let t;this._features={},this._featureIds=new M,this._selectedFeatureIds=new M,this._selectedCoordinates=[],this._changedFeatureIds=new M,this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=e,this.sources={hot:[],cold:[]},this.render=()=>{t||(t=requestAnimationFrame((()=>{t=null,ee.call(this),this._emitSelectionChange&&(this.ctx.events.fire(g.SELECTION_CHANGE,{features:this.getSelected().map((e=>e.toGeoJSON())),points:this.getSelectedCoordinates().map((e=>({type:h.FEATURE,properties:{},geometry:{type:h.POINT,coordinates:e.coordinates}})))}),this._emitSelectionChange=!1),this.ctx.events.fire(g.RENDER,{})})))},this.isDirty=!1}function oe(e,t={}){const o=e._selectedCoordinates.filter((t=>e._selectedFeatureIds.has(t.feature_id)));e._selectedCoordinates.length===o.length||t.silent||(e._emitSelectionChange=!0),e._selectedCoordinates=o}te.prototype.createRenderBatch=function(){const e=this.render;let t=0;return this.render=function(){t++},()=>{this.render=e,t>0&&this.render()}},te.prototype.setDirty=function(){return this.isDirty=!0,this},te.prototype.featureCreated=function(e,t={}){if(this._changedFeatureIds.add(e),!0!==(null!=t.silent?t.silent:this.ctx.options.suppressAPIEvents)){const t=this.get(e);this.ctx.events.fire(g.CREATE,{features:[t.toGeoJSON()]})}return this},te.prototype.featureChanged=function(e,t={}){return this._changedFeatureIds.add(e),!0!==(null!=t.silent?t.silent:this.ctx.options.suppressAPIEvents)&&this.ctx.events.fire(g.UPDATE,{action:t.action?t.action:m.CHANGE_COORDINATES,features:[this.get(e).toGeoJSON()]}),this},te.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},te.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},te.prototype.getAllIds=function(){return this._featureIds.values()},te.prototype.add=function(e,t={}){return this._features[e.id]=e,this._featureIds.add(e.id),this.featureCreated(e.id,{silent:t.silent}),this},te.prototype.delete=function(e,t={}){const o=[];return Q(e).forEach((e=>{this._featureIds.has(e)&&(this._featureIds.delete(e),this._selectedFeatureIds.delete(e),t.silent||-1===o.indexOf(this._features[e])&&o.push(this._features[e].toGeoJSON()),delete this._features[e],this.isDirty=!0)})),o.length&&this.ctx.events.fire(g.DELETE,{features:o}),oe(this,t),this},te.prototype.get=function(e){return this._features[e]},te.prototype.getAll=function(){return Object.keys(this._features).map((e=>this._features[e]))},te.prototype.select=function(e,t={}){return Q(e).forEach((e=>{this._selectedFeatureIds.has(e)||(this._selectedFeatureIds.add(e),this._changedFeatureIds.add(e),t.silent||(this._emitSelectionChange=!0))})),this},te.prototype.deselect=function(e,t={}){return Q(e).forEach((e=>{this._selectedFeatureIds.has(e)&&(this._selectedFeatureIds.delete(e),this._changedFeatureIds.add(e),t.silent||(this._emitSelectionChange=!0))})),oe(this,t),this},te.prototype.clearSelected=function(e={}){return this.deselect(this._selectedFeatureIds.values(),{silent:e.silent}),this},te.prototype.setSelected=function(e,t={}){return e=Q(e),this.deselect(this._selectedFeatureIds.values().filter((t=>-1===e.indexOf(t))),{silent:t.silent}),this.select(e.filter((e=>!this._selectedFeatureIds.has(e))),{silent:t.silent}),this},te.prototype.setSelectedCoordinates=function(e){return this._selectedCoordinates=e,this._emitSelectionChange=!0,this},te.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},te.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},te.prototype.getSelected=function(){return this.getSelectedIds().map((e=>this.get(e)))},te.prototype.getSelectedCoordinates=function(){return this._selectedCoordinates.map((e=>({coordinates:this.get(e.feature_id).getCoordinate(e.coord_path)})))},te.prototype.isSelected=function(e){return this._selectedFeatureIds.has(e)},te.prototype.setFeatureProperty=function(e,t,o,n={}){this.get(e).setProperty(t,o),this.featureChanged(e,{silent:n.silent,action:m.CHANGE_PROPERTIES})},te.prototype.storeMapConfig=function(){T.forEach((e=>{this.ctx.map[e]&&(this._mapInitialConfig[e]=this.ctx.map[e].isEnabled())}))},te.prototype.restoreMapConfig=function(){Object.keys(this._mapInitialConfig).forEach((e=>{this._mapInitialConfig[e]?this.ctx.map[e].enable():this.ctx.map[e].disable()}))},te.prototype.getInitialConfigValue=function(e){return void 0===this._mapInitialConfig[e]||this._mapInitialConfig[e]};const ne=["mode","feature","mouse"];function re(t){let o=null,n=null;const r={onRemove(){return t.map.off("load",r.connect),clearInterval(n),r.removeLayers(),t.store.restoreMapConfig(),t.ui.removeButtons(),t.events.removeEventListeners(),t.ui.clearMapClasses(),t.boxZoomInitial&&t.map.boxZoom.enable(),t.map=null,t.container=null,t.store=null,o&&o.parentNode&&o.parentNode.removeChild(o),o=null,this},connect(){t.map.off("load",r.connect),clearInterval(n),r.addLayers(),t.store.storeMapConfig(),t.events.addEventListeners()},onAdd(i){if(t.map=i,t.events=function(t){const o=Object.keys(t.options.modes).reduce(((e,o)=>(e[o]=z(t.options.modes[o]),e)),{});let n={},r={};const i={};let s=null,a=null;i.drag=function(e,o){o({point:e.point,time:(new Date).getTime()})?(t.ui.queueMapClasses({mouse:d.DRAG}),a.drag(e)):e.originalEvent.stopPropagation()},i.mousedrag=function(e){i.drag(e,(e=>!D(n,e)))},i.touchdrag=function(e){i.drag(e,(e=>!V(r,e)))},i.mousemove=function(e){if(1===(void 0!==e.originalEvent.buttons?e.originalEvent.buttons:e.originalEvent.which))return i.mousedrag(e);const o=A(e,t);e.featureTarget=o,a.mousemove(e)},i.mousedown=function(e){n={time:(new Date).getTime(),point:e.point};const o=A(e,t);e.featureTarget=o,a.mousedown(e)},i.mouseup=function(e){const o=A(e,t);e.featureTarget=o,D(n,{point:e.point,time:(new Date).getTime()})?a.click(e):a.mouseup(e)},i.mouseout=function(e){a.mouseout(e)},i.touchstart=function(e){if(!t.options.touchEnabled)return;r={time:(new Date).getTime(),point:e.point};const o=b.touch(e,null,t)[0];e.featureTarget=o,a.touchstart(e)},i.touchmove=function(e){if(t.options.touchEnabled)return a.touchmove(e),i.touchdrag(e)},i.touchend=function(e){if(e.originalEvent.preventDefault(),!t.options.touchEnabled)return;const o=b.touch(e,null,t)[0];e.featureTarget=o,V(r,{time:(new Date).getTime(),point:e.point})?a.tap(e):a.touchend(e)};const c=e=>!(8===e||46===e||e>=48&&e<=57);function l(n,r,i={}){a.stop();const c=o[n];if(void 0===c)throw new Error(`${n} is not valid`);s=n;const u=c(t,r);a=e(u,t),i.silent||t.map.fire(g.MODE_CHANGE,{mode:n}),t.store.setDirty(),t.store.render()}i.keydown=function(e){(e.srcElement||e.target).classList.contains(u.CANVAS)&&(8!==e.keyCode&&46!==e.keyCode||!t.options.controls.trash?c(e.keyCode)?a.keydown(e):49===e.keyCode&&t.options.controls.point?l(f.DRAW_POINT):50===e.keyCode&&t.options.controls.line_string?l(f.DRAW_LINE_STRING):51===e.keyCode&&t.options.controls.polygon&&l(f.DRAW_POLYGON):(e.preventDefault(),a.trash()))},i.keyup=function(e){c(e.keyCode)&&a.keyup(e)},i.zoomend=function(){t.store.changeZoom()},i.data=function(e){if("style"===e.dataType){const{setup:e,map:o,options:n,store:r}=t;n.styles.some((e=>o.getLayer(e.id)))||(e.addLayers(),r.setDirty(),r.render())}};const p={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start(){s=t.options.defaultMode,a=e(o[s](t),t)},changeMode:l,actionable:function(e){let o=!1;Object.keys(e).forEach((t=>{if(void 0===p[t])throw new Error("Invalid action type");p[t]!==e[t]&&(o=!0),p[t]=e[t]})),o&&t.map.fire(g.ACTIONABLE,{actions:p})},currentModeName:()=>s,currentModeRender:(e,t)=>a.render(e,t),fire(e,o){t.map&&t.map.fire(e,o)},addEventListeners(){t.map.on("mousemove",i.mousemove),t.map.on("mousedown",i.mousedown),t.map.on("mouseup",i.mouseup),t.map.on("data",i.data),t.map.on("touchmove",i.touchmove),t.map.on("touchstart",i.touchstart),t.map.on("touchend",i.touchend),t.container.addEventListener("mouseout",i.mouseout),t.options.keybindings&&(t.container.addEventListener("keydown",i.keydown),t.container.addEventListener("keyup",i.keyup))},removeEventListeners(){t.map.off("mousemove",i.mousemove),t.map.off("mousedown",i.mousedown),t.map.off("mouseup",i.mouseup),t.map.off("data",i.data),t.map.off("touchmove",i.touchmove),t.map.off("touchstart",i.touchstart),t.map.off("touchend",i.touchend),t.container.removeEventListener("mouseout",i.mouseout),t.options.keybindings&&(t.container.removeEventListener("keydown",i.keydown),t.container.removeEventListener("keyup",i.keyup))},trash(e){a.trash(e)},combineFeatures(){a.combineFeatures()},uncombineFeatures(){a.uncombineFeatures()},getMode:()=>s}}(t),t.ui=function(e){const t={};let o=null,n={mode:null,feature:null,mouse:null},r={mode:null,feature:null,mouse:null};function i(e){r=Object.assign(r,e)}function s(){if(!e.container)return;const t=[],o=[];ne.forEach((e=>{r[e]!==n[e]&&(t.push(`${e}-${n[e]}`),null!==r[e]&&o.push(`${e}-${r[e]}`))})),t.length>0&&e.container.classList.remove(...t),o.length>0&&e.container.classList.add(...o),n=Object.assign(n,r)}function a(e,t={}){const n=document.createElement("button");return n.className=`${u.CONTROL_BUTTON} ${t.className}`,n.setAttribute("title",t.title),t.container.appendChild(n),n.addEventListener("click",(n=>{if(n.preventDefault(),n.stopPropagation(),n.target===o)return c(),void t.onDeactivate();l(e),t.onActivate()}),!0),n}function c(){o&&(o.classList.remove(u.ACTIVE_BUTTON),o=null)}function l(e){c();const n=t[e];n&&n&&"trash"!==e&&(n.classList.add(u.ACTIVE_BUTTON),o=n)}return{setActiveButton:l,queueMapClasses:i,updateMapClasses:s,clearMapClasses:function(){i({mode:null,feature:null,mouse:null}),s()},addButtons:function(){const o=e.options.controls,n=document.createElement("div");return n.className=`${u.CONTROL_GROUP} ${u.CONTROL_BASE}`,o?(o[p.LINE]&&(t[p.LINE]=a(p.LINE,{container:n,className:u.CONTROL_BUTTON_LINE,title:"LineString tool "+(e.options.keybindings?"(l)":""),onActivate:()=>e.events.changeMode(f.DRAW_LINE_STRING),onDeactivate:()=>e.events.trash()})),o[p.POLYGON]&&(t[p.POLYGON]=a(p.POLYGON,{container:n,className:u.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(e.options.keybindings?"(p)":""),onActivate:()=>e.events.changeMode(f.DRAW_POLYGON),onDeactivate:()=>e.events.trash()})),o[p.POINT]&&(t[p.POINT]=a(p.POINT,{container:n,className:u.CONTROL_BUTTON_POINT,title:"Marker tool "+(e.options.keybindings?"(m)":""),onActivate:()=>e.events.changeMode(f.DRAW_POINT),onDeactivate:()=>e.events.trash()})),o.trash&&(t.trash=a("trash",{container:n,className:u.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:()=>{e.events.trash()}})),o.combine_features&&(t.combine_features=a("combineFeatures",{container:n,className:u.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:()=>{e.events.combineFeatures()}})),o.uncombine_features&&(t.uncombine_features=a("uncombineFeatures",{container:n,className:u.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:()=>{e.events.uncombineFeatures()}})),n):n},removeButtons:function(){Object.keys(t).forEach((e=>{const o=t[e];o.parentNode&&o.parentNode.removeChild(o),delete t[e]}))}}}(t),t.container=i.getContainer(),t.store=new te(t),o=t.ui.addButtons(),t.options.boxSelect){t.boxZoomInitial=i.boxZoom.isEnabled(),i.boxZoom.disable();const e=i.dragPan.isEnabled();i.dragPan.disable(),i.dragPan.enable(),e||i.dragPan.disable()}return i.loaded()?r.connect():(i.on("load",r.connect),n=setInterval((()=>{i.loaded()&&r.connect()}),16)),t.events.start(),o},addLayers(){t.map.addSource(l.COLD,{data:{type:h.FEATURE_COLLECTION,features:[]},type:"geojson"}),t.map.addSource(l.HOT,{data:{type:h.FEATURE_COLLECTION,features:[]},type:"geojson"}),t.options.styles.forEach((e=>{t.map.addLayer(e)})),t.store.setDirty(!0),t.store.render()},removeLayers(){t.options.styles.forEach((e=>{t.map.getLayer(e.id)&&t.map.removeLayer(e.id)})),t.map.getSource(l.COLD)&&t.map.removeSource(l.COLD),t.map.getSource(l.HOT)&&t.map.removeSource(l.HOT)}};return t.setup=r,r}const ie="#3bb2d0",se="#fbb03b",ae="#fff";var ce=[{id:"gl-draw-polygon-fill",type:"fill",filter:["all",["==","$type","Polygon"]],paint:{"fill-color":["case",["==",["get","active"],"true"],se,ie],"fill-opacity":.1}},{id:"gl-draw-lines",type:"line",filter:["any",["==","$type","LineString"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":["case",["==",["get","active"],"true"],se,ie],"line-dasharray":["case",["==",["get","active"],"true"],[.2,2],[2,0]],"line-width":2}},{id:"gl-draw-point-outer",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":ae}},{id:"gl-draw-point-inner",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":["case",["==",["get","active"],"true"],se,ie]}},{id:"gl-draw-vertex-outer",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["!=","mode","simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":ae}},{id:"gl-draw-vertex-inner",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["!=","mode","simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":se}},{id:"gl-draw-midpoint",type:"circle",filter:["all",["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":se}}];function ue(e){return function(t){const o=t.featureTarget;return!!o&&!!o.properties&&o.properties.meta===e}}function le(e){return!!e.originalEvent&&!!e.originalEvent.shiftKey&&0===e.originalEvent.button}function de(e){return!!e.featureTarget&&!!e.featureTarget.properties&&e.featureTarget.properties.active===E.ACTIVE&&e.featureTarget.properties.meta===y.FEATURE}function pe(e){return!!e.featureTarget&&!!e.featureTarget.properties&&e.featureTarget.properties.active===E.INACTIVE&&e.featureTarget.properties.meta===y.FEATURE}function he(e){return void 0===e.featureTarget}function fe(e){return!!e.featureTarget&&!!e.featureTarget.properties&&e.featureTarget.properties.meta===y.FEATURE}function ge(e){const t=e.featureTarget;return!!t&&!!t.properties&&t.properties.meta===y.VERTEX}function me(e){return!!e.originalEvent&&!0===e.originalEvent.shiftKey}function ye(e){return 27===e.keyCode}function Ee(e){return 13===e.keyCode}var Te=Object.freeze({__proto__:null,isActiveFeature:de,isEnterKey:Ee,isEscapeKey:ye,isFeature:fe,isInactiveFeature:pe,isOfMetaType:ue,isShiftDown:me,isShiftMousedown:le,isTrue:function(){return!0},isVertex:ge,noTarget:he});function Ce(e,t){this.x=e,this.y=t}function _e(e,t){const o=t.getBoundingClientRect();return new Ce(e.clientX-o.left-(t.clientLeft||0),e.clientY-o.top-(t.clientTop||0))}function ve(e,t,o,n){return{type:h.FEATURE,properties:{meta:y.VERTEX,parent:e,coord_path:o,active:n?E.ACTIVE:E.INACTIVE},geometry:{type:h.POINT,coordinates:t}}}function Ie(e,t,o){const n=t.geometry.coordinates,r=o.geometry.coordinates;if(n[1]>_||n[1]<C||r[1]>_||r[1]<C)return null;const i={lng:(n[0]+r[0])/2,lat:(n[1]+r[1])/2};return{type:h.FEATURE,properties:{meta:y.MIDPOINT,parent:e,lng:i.lng,lat:i.lat,coord_path:o.properties.coord_path},geometry:{type:h.POINT,coordinates:[i.lng,i.lat]}}}function Se(e,t={},o=null){const{type:n,coordinates:r}=e.geometry,i=e.properties&&e.properties.id;let s=[];function a(e,o){let n="",r=null;e.forEach(((e,a)=>{const u=null!=o?`${o}.${a}`:String(a),l=ve(i,e,u,c(u));if(t.midpoints&&r){const e=Ie(i,r,l);e&&s.push(e)}r=l;const d=JSON.stringify(e);n!==d&&s.push(l),0===a&&(n=d)}))}function c(e){return!!t.selectedPaths&&-1!==t.selectedPaths.indexOf(e)}return n===h.POINT?s.push(ve(i,r,o,c(o))):n===h.POLYGON?r.forEach(((e,t)=>{a(e,null!==o?`${o}.${t}`:String(t))})):n===h.LINE_STRING?a(r,o):0===n.indexOf(h.MULTI_PREFIX)&&function(){const o=n.replace(h.MULTI_PREFIX,"");r.forEach(((n,r)=>{const i={type:h.FEATURE,properties:e.properties,geometry:{type:o,coordinates:n}};s=s.concat(Se(i,t,r))}))}(),s}Ce.prototype={clone(){return new Ce(this.x,this.y)},add(e){return this.clone()._add(e)},sub(e){return this.clone()._sub(e)},multByPoint(e){return this.clone()._multByPoint(e)},divByPoint(e){return this.clone()._divByPoint(e)},mult(e){return this.clone()._mult(e)},div(e){return this.clone()._div(e)},rotate(e){return this.clone()._rotate(e)},rotateAround(e,t){return this.clone()._rotateAround(e,t)},matMult(e){return this.clone()._matMult(e)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(e){return this.x===e.x&&this.y===e.y},dist(e){return Math.sqrt(this.distSqr(e))},distSqr(e){const t=e.x-this.x,o=e.y-this.y;return t*t+o*o},angle(){return Math.atan2(this.y,this.x)},angleTo(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith(e){return this.angleWithSep(e.x,e.y)},angleWithSep(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult(e){const t=e[0]*this.x+e[1]*this.y,o=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=o,this},_add(e){return this.x+=e.x,this.y+=e.y,this},_sub(e){return this.x-=e.x,this.y-=e.y,this},_mult(e){return this.x*=e,this.y*=e,this},_div(e){return this.x/=e,this.y/=e,this},_multByPoint(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint(e){return this.x/=e.x,this.y/=e.y,this},_unit(){return this._div(this.mag()),this},_perp(){const e=this.y;return this.y=this.x,this.x=-e,this},_rotate(e){const t=Math.cos(e),o=Math.sin(e),n=t*this.x-o*this.y,r=o*this.x+t*this.y;return this.x=n,this.y=r,this},_rotateAround(e,t){const o=Math.cos(e),n=Math.sin(e),r=t.x+o*(this.x-t.x)-n*(this.y-t.y),i=t.y+n*(this.x-t.x)+o*(this.y-t.y);return this.x=r,this.y=i,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:Ce},Ce.convert=function(e){if(e instanceof Ce)return e;if(Array.isArray(e))return new Ce(+e[0],+e[1]);if(void 0!==e.x&&void 0!==e.y)return new Ce(+e.x,+e.y);throw new Error("Expected [x, y] or {x, y} point format")};var Oe={enable(e){setTimeout((()=>{e.map&&e.map.doubleClickZoom&&e._ctx&&e._ctx.store&&e._ctx.store.getInitialConfigValue&&e._ctx.store.getInitialConfigValue("doubleClickZoom")&&e.map.doubleClickZoom.enable()}),0)},disable(e){setTimeout((()=>{e.map&&e.map.doubleClickZoom&&e.map.doubleClickZoom.disable()}),0)}};const{LAT_MIN:Le,LAT_MAX:Me,LAT_RENDERED_MIN:Ne,LAT_RENDERED_MAX:be,LNG_MIN:xe,LNG_MAX:Ae}=v;function Pe(e,t){let o=Le,n=Me,r=Le,i=Me,s=Ae,a=xe;e.forEach((e=>{const t=function(e){const t={Point:0,LineString:1,Polygon:2,MultiPoint:1,MultiLineString:2,MultiPolygon:3}[e.geometry.type],o=[e.geometry.coordinates].flat(t),n=o.map((e=>e[0])),r=o.map((e=>e[1])),i=e=>Math.min.apply(null,e),s=e=>Math.max.apply(null,e);return[i(n),i(r),s(n),s(r)]}(e),c=t[1],u=t[3],l=t[0],d=t[2];c>o&&(o=c),u<n&&(n=u),u>r&&(r=u),c<i&&(i=c),l<s&&(s=l),d>a&&(a=d)}));const c=t;return o+c.lat>be&&(c.lat=be-o),r+c.lat>Me&&(c.lat=Me-r),n+c.lat<Ne&&(c.lat=Ne-n),i+c.lat<Le&&(c.lat=Le-i),s+c.lng<=xe&&(c.lng+=360*Math.ceil(Math.abs(c.lng)/360)),a+c.lng>=Ae&&(c.lng-=360*Math.ceil(Math.abs(c.lng)/360)),c}function Fe(e,t){const o=Pe(e.map((e=>e.toGeoJSON())),t);e.forEach((e=>{const t=e.getCoordinates(),n=e=>{const t={lng:e[0]+o.lng,lat:e[1]+o.lat};return[t.lng,t.lat]},r=e=>e.map((e=>n(e))),i=e=>e.map((e=>r(e)));let s;e.type===h.POINT?s=n(t):e.type===h.LINE_STRING||e.type===h.MULTI_POINT?s=t.map(n):e.type===h.POLYGON||e.type===h.MULTI_LINE_STRING?s=t.map(r):e.type===h.MULTI_POLYGON&&(s=t.map(i)),e.incomingCoords(s)}))}const Re={onSetup:function(e){const t={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initialDragPanState:this.map.dragPan.isEnabled(),initiallySelectedFeatureIds:e.featureIds||[]};return this.setSelected(t.initiallySelectedFeatureIds.filter((e=>void 0!==this.getFeature(e)))),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),t},fireUpdate:function(){this.fire(g.UPDATE,{action:m.MOVE,features:this.getSelected().map((e=>e.toGeoJSON()))})},fireActionable:function(){const e=this.getSelected(),t=e.filter((e=>this.isInstanceOf("MultiFeature",e)));let o=!1;if(e.length>1){o=!0;const t=e[0].type.replace("Multi","");e.forEach((e=>{e.type.replace("Multi","")!==t&&(o=!1)}))}const n=t.length>0,r=e.length>0;this.setActionableState({combineFeatures:o,uncombineFeatures:n,trash:r})},getUniqueIds:function(e){return e.length?e.map((e=>e.properties.id)).filter((e=>void 0!==e)).reduce(((e,t)=>(e.add(t),e)),new M).values():[]},stopExtendedInteractions:function(e){e.boxSelectElement&&(e.boxSelectElement.parentNode&&e.boxSelectElement.parentNode.removeChild(e.boxSelectElement),e.boxSelectElement=null),(e.canDragMove||e.canBoxSelect)&&!0===e.initialDragPanState&&this.map.dragPan.enable(),e.boxSelecting=!1,e.canBoxSelect=!1,e.dragMoving=!1,e.canDragMove=!1},onStop:function(){Oe.enable(this)},onMouseMove:function(e,t){return fe(t)&&e.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(e),!0},onMouseOut:function(e){return!e.dragMoving||this.fireUpdate()}};Re.onTap=Re.onClick=function(e,t){return he(t)?this.clickAnywhere(e,t):ue(y.VERTEX)(t)?this.clickOnVertex(e,t):fe(t)?this.clickOnFeature(e,t):void 0},Re.clickAnywhere=function(e){const t=this.getSelectedIds();t.length&&(this.clearSelectedFeatures(),t.forEach((e=>this.doRender(e)))),Oe.enable(this),this.stopExtendedInteractions(e)},Re.clickOnVertex=function(e,t){this.changeMode(f.DIRECT_SELECT,{featureId:t.featureTarget.properties.parent,coordPath:t.featureTarget.properties.coord_path,startPos:t.lngLat}),this.updateUIClasses({mouse:d.MOVE})},Re.startOnActiveFeature=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),this.doRender(t.featureTarget.properties.id),e.canDragMove=!0,e.dragMoveLocation=t.lngLat},Re.clickOnFeature=function(e,t){Oe.disable(this),this.stopExtendedInteractions(e);const o=me(t),n=this.getSelectedIds(),r=t.featureTarget.properties.id,i=this.isSelected(r);if(!o&&i&&this.getFeature(r).type!==h.POINT)return this.changeMode(f.DIRECT_SELECT,{featureId:r});i&&o?(this.deselect(r),this.updateUIClasses({mouse:d.POINTER}),1===n.length&&Oe.enable(this)):!i&&o?(this.select(r),this.updateUIClasses({mouse:d.MOVE})):i||o||(n.forEach((e=>this.doRender(e))),this.setSelected(r),this.updateUIClasses({mouse:d.MOVE})),this.doRender(r)},Re.onMouseDown=function(e,t){return e.initialDragPanState=this.map.dragPan.isEnabled(),de(t)?this.startOnActiveFeature(e,t):this.drawConfig.boxSelect&&le(t)?this.startBoxSelect(e,t):void 0},Re.startBoxSelect=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),e.boxSelectStartLocation=_e(t.originalEvent,this.map.getContainer()),e.canBoxSelect=!0},Re.onTouchStart=function(e,t){if(de(t))return this.startOnActiveFeature(e,t)},Re.onDrag=function(e,t){return e.canDragMove?this.dragMove(e,t):this.drawConfig.boxSelect&&e.canBoxSelect?this.whileBoxSelect(e,t):void 0},Re.whileBoxSelect=function(e,t){e.boxSelecting=!0,this.updateUIClasses({mouse:d.ADD}),e.boxSelectElement||(e.boxSelectElement=document.createElement("div"),e.boxSelectElement.classList.add(u.BOX_SELECT),this.map.getContainer().appendChild(e.boxSelectElement));const o=_e(t.originalEvent,this.map.getContainer()),n=Math.min(e.boxSelectStartLocation.x,o.x),r=Math.max(e.boxSelectStartLocation.x,o.x),i=Math.min(e.boxSelectStartLocation.y,o.y),s=Math.max(e.boxSelectStartLocation.y,o.y),a=`translate(${n}px, ${i}px)`;e.boxSelectElement.style.transform=a,e.boxSelectElement.style.WebkitTransform=a,e.boxSelectElement.style.width=r-n+"px",e.boxSelectElement.style.height=s-i+"px"},Re.dragMove=function(e,t){e.dragMoving=!0,t.originalEvent.stopPropagation();const o={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};Fe(this.getSelected(),o),e.dragMoveLocation=t.lngLat},Re.onTouchEnd=Re.onMouseUp=function(e,t){if(e.dragMoving)this.fireUpdate();else if(e.boxSelecting){const o=[e.boxSelectStartLocation,_e(t.originalEvent,this.map.getContainer())],n=this.featuresAt(null,o,"click"),r=this.getUniqueIds(n).filter((e=>!this.isSelected(e)));r.length&&(this.select(r),r.forEach((e=>this.doRender(e))),this.updateUIClasses({mouse:d.MOVE}))}this.stopExtendedInteractions(e)},Re.toDisplayFeatures=function(e,t,o){t.properties.active=this.isSelected(t.properties.id)?E.ACTIVE:E.INACTIVE,o(t),this.fireActionable(),t.properties.active===E.ACTIVE&&t.geometry.type!==h.POINT&&Se(t).forEach(o)},Re.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},Re.onCombineFeatures=function(){const e=this.getSelected();if(0===e.length||e.length<2)return;const t=[],o=[],n=e[0].type.replace("Multi","");for(let r=0;r<e.length;r++){const i=e[r];if(i.type.replace("Multi","")!==n)return;i.type.includes("Multi")?i.getCoordinates().forEach((e=>{t.push(e)})):t.push(i.getCoordinates()),o.push(i.toGeoJSON())}if(o.length>1){const e=this.newFeature({type:h.FEATURE,properties:o[0].properties,geometry:{type:`Multi${n}`,coordinates:t}});this.addFeature(e),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([e.id]),this.fire(g.COMBINE_FEATURES,{createdFeatures:[e.toGeoJSON()],deletedFeatures:o})}this.fireActionable()},Re.onUncombineFeatures=function(){const e=this.getSelected();if(0===e.length)return;const t=[],o=[];for(let n=0;n<e.length;n++){const r=e[n];this.isInstanceOf("MultiFeature",r)&&(r.getFeatures().forEach((e=>{this.addFeature(e),e.properties=r.properties,t.push(e.toGeoJSON()),this.select([e.id])})),this.deleteFeature(r.id,{silent:!0}),o.push(r.toGeoJSON()))}t.length>1&&this.fire(g.UNCOMBINE_FEATURES,{createdFeatures:t,deletedFeatures:o}),this.fireActionable()};const we=ue(y.VERTEX),De=ue(y.MIDPOINT),Ue={fireUpdate:function(){this.fire(g.UPDATE,{action:m.CHANGE_COORDINATES,features:this.getSelected().map((e=>e.toGeoJSON()))})},fireActionable:function(e){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:e.selectedCoordPaths.length>0})},startDragging:function(e,t){e.initialDragPanState=this.map.dragPan.isEnabled(),this.map.dragPan.disable(),e.canDragMove=!0,e.dragMoveLocation=t.lngLat},stopDragging:function(e){e.canDragMove&&!0===e.initialDragPanState&&this.map.dragPan.enable(),e.dragMoving=!1,e.canDragMove=!1,e.dragMoveLocation=null},onVertex:function(e,t){this.startDragging(e,t);const o=t.featureTarget.properties,n=e.selectedCoordPaths.indexOf(o.coord_path);me(t)||-1!==n?me(t)&&-1===n&&e.selectedCoordPaths.push(o.coord_path):e.selectedCoordPaths=[o.coord_path];const r=this.pathsToCoordinates(e.featureId,e.selectedCoordPaths);this.setSelectedCoordinates(r)},onMidpoint:function(e,t){this.startDragging(e,t);const o=t.featureTarget.properties;e.feature.addCoordinate(o.coord_path,o.lng,o.lat),this.fireUpdate(),e.selectedCoordPaths=[o.coord_path]},pathsToCoordinates:function(e,t){return t.map((t=>({feature_id:e,coord_path:t})))},onFeature:function(e,t){0===e.selectedCoordPaths.length?this.startDragging(e,t):this.stopDragging(e)},dragFeature:function(e,t,o){Fe(this.getSelected(),o),e.dragMoveLocation=t.lngLat},dragVertex:function(e,t,o){const n=e.selectedCoordPaths.map((t=>e.feature.getCoordinate(t))),r=Pe(n.map((e=>({type:h.FEATURE,properties:{},geometry:{type:h.POINT,coordinates:e}}))),o);for(let t=0;t<n.length;t++){const o=n[t];e.feature.updateCoordinate(e.selectedCoordPaths[t],o[0]+r.lng,o[1]+r.lat)}},clickNoTarget:function(){this.changeMode(f.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(f.SIMPLE_SELECT)},clickActiveFeature:function(e){e.selectedCoordPaths=[],this.clearSelectedCoordinates(),e.feature.changed()},onSetup:function(e){const t=e.featureId,o=this.getFeature(t);if(!o)throw new Error("You must provide a featureId to enter direct_select mode");if(o.type===h.POINT)throw new TypeError("direct_select mode doesn't handle point features");const n={featureId:t,feature:o,dragMoveLocation:e.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:e.coordPath?[e.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(t,n.selectedCoordPaths)),this.setSelected(t),Oe.disable(this),this.setActionableState({trash:!0}),n},onStop:function(){Oe.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(e,t,o){e.featureId===t.properties.id?(t.properties.active=E.ACTIVE,o(t),Se(t,{map:this.map,midpoints:!0,selectedPaths:e.selectedCoordPaths}).forEach(o)):(t.properties.active=E.INACTIVE,o(t)),this.fireActionable(e)},onTrash:function(e){e.selectedCoordPaths.sort(((e,t)=>t.localeCompare(e,"en",{numeric:!0}))).forEach((t=>e.feature.removeCoordinate(t))),this.fireUpdate(),e.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(e),!1===e.feature.isValid()&&(this.deleteFeature([e.featureId]),this.changeMode(f.SIMPLE_SELECT,{}))},onMouseMove:function(e,t){const o=de(t),n=we(t),r=De(t),i=0===e.selectedCoordPaths.length;return o&&i||n&&!i?this.updateUIClasses({mouse:d.MOVE}):this.updateUIClasses({mouse:d.NONE}),(n||o||r)&&e.dragMoving&&this.fireUpdate(),this.stopDragging(e),!0},onMouseOut:function(e){return e.dragMoving&&this.fireUpdate(),!0}};Ue.onTouchStart=Ue.onMouseDown=function(e,t){return we(t)?this.onVertex(e,t):de(t)?this.onFeature(e,t):De(t)?this.onMidpoint(e,t):void 0},Ue.onDrag=function(e,t){if(!0!==e.canDragMove)return;e.dragMoving=!0,t.originalEvent.stopPropagation();const o={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};e.selectedCoordPaths.length>0?this.dragVertex(e,t,o):this.dragFeature(e,t,o),e.dragMoveLocation=t.lngLat},Ue.onClick=function(e,t){return he(t)?this.clickNoTarget(e,t):de(t)?this.clickActiveFeature(e,t):pe(t)?this.clickInactive(e,t):void this.stopDragging(e)},Ue.onTap=function(e,t){return he(t)?this.clickNoTarget(e,t):de(t)?this.clickActiveFeature(e,t):pe(t)?this.clickInactive(e,t):void 0},Ue.onTouchEnd=Ue.onMouseUp=function(e){e.dragMoving&&this.fireUpdate(),this.stopDragging(e)};const ke={};function Ve(e,t){return!!e.lngLat&&e.lngLat.lng===t[0]&&e.lngLat.lat===t[1]}ke.onSetup=function(){const e=this.newFeature({type:h.FEATURE,properties:{},geometry:{type:h.POINT,coordinates:[]}});return this.addFeature(e),this.clearSelectedFeatures(),this.updateUIClasses({mouse:d.ADD}),this.activateUIButton(p.POINT),this.setActionableState({trash:!0}),{point:e}},ke.stopDrawingAndRemove=function(e){this.deleteFeature([e.point.id],{silent:!0}),this.changeMode(f.SIMPLE_SELECT)},ke.onTap=ke.onClick=function(e,t){this.updateUIClasses({mouse:d.MOVE}),e.point.updateCoordinate("",t.lngLat.lng,t.lngLat.lat),this.fire(g.CREATE,{features:[e.point.toGeoJSON()]}),this.changeMode(f.SIMPLE_SELECT,{featureIds:[e.point.id]})},ke.onStop=function(e){this.activateUIButton(),e.point.getCoordinate().length||this.deleteFeature([e.point.id],{silent:!0})},ke.toDisplayFeatures=function(e,t,o){const n=t.properties.id===e.point.id;if(t.properties.active=n?E.ACTIVE:E.INACTIVE,!n)return o(t)},ke.onTrash=ke.stopDrawingAndRemove,ke.onKeyUp=function(e,t){if(ye(t)||Ee(t))return this.stopDrawingAndRemove(e,t)};const Ge={onSetup:function(){const e=this.newFeature({type:h.FEATURE,properties:{},geometry:{type:h.POLYGON,coordinates:[[]]}});return this.addFeature(e),this.clearSelectedFeatures(),Oe.disable(this),this.updateUIClasses({mouse:d.ADD}),this.activateUIButton(p.POLYGON),this.setActionableState({trash:!0}),{polygon:e,currentVertexPosition:0}},clickAnywhere:function(e,t){if(e.currentVertexPosition>0&&Ve(t,e.polygon.coordinates[0][e.currentVertexPosition-1]))return this.changeMode(f.SIMPLE_SELECT,{featureIds:[e.polygon.id]});this.updateUIClasses({mouse:d.ADD}),e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat),e.currentVertexPosition++,e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat)},clickOnVertex:function(e){return this.changeMode(f.SIMPLE_SELECT,{featureIds:[e.polygon.id]})},onMouseMove:function(e,t){e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat),ge(t)&&this.updateUIClasses({mouse:d.POINTER})}};Ge.onTap=Ge.onClick=function(e,t){return ge(t)?this.clickOnVertex(e,t):this.clickAnywhere(e,t)},Ge.onKeyUp=function(e,t){ye(t)?(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(f.SIMPLE_SELECT)):Ee(t)&&this.changeMode(f.SIMPLE_SELECT,{featureIds:[e.polygon.id]})},Ge.onStop=function(e){this.updateUIClasses({mouse:d.NONE}),Oe.enable(this),this.activateUIButton(),void 0!==this.getFeature(e.polygon.id)&&(e.polygon.removeCoordinate(`0.${e.currentVertexPosition}`),e.polygon.isValid()?this.fire(g.CREATE,{features:[e.polygon.toGeoJSON()]}):(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(f.SIMPLE_SELECT,{},{silent:!0})))},Ge.toDisplayFeatures=function(e,t,o){const n=t.properties.id===e.polygon.id;if(t.properties.active=n?E.ACTIVE:E.INACTIVE,!n)return o(t);if(0===t.geometry.coordinates.length)return;const r=t.geometry.coordinates[0].length;if(!(r<3)){if(t.properties.meta=y.FEATURE,o(ve(e.polygon.id,t.geometry.coordinates[0][0],"0.0",!1)),r>3){const n=t.geometry.coordinates[0].length-3;o(ve(e.polygon.id,t.geometry.coordinates[0][n],`0.${n}`,!1))}if(r<=4){const e=[[t.geometry.coordinates[0][0][0],t.geometry.coordinates[0][0][1]],[t.geometry.coordinates[0][1][0],t.geometry.coordinates[0][1][1]]];if(o({type:h.FEATURE,properties:t.properties,geometry:{coordinates:e,type:h.LINE_STRING}}),3===r)return}return o(t)}},Ge.onTrash=function(e){this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(f.SIMPLE_SELECT)};const Be={onSetup:function(e){const t=(e=e||{}).featureId;let o,n,r="forward";if(t){if(o=this.getFeature(t),!o)throw new Error("Could not find a feature with the provided featureId");let i=e.from;if(i&&"Feature"===i.type&&i.geometry&&"Point"===i.geometry.type&&(i=i.geometry),i&&"Point"===i.type&&i.coordinates&&2===i.coordinates.length&&(i=i.coordinates),!i||!Array.isArray(i))throw new Error("Please use the `from` property to indicate which point to continue the line from");const s=o.coordinates.length-1;if(o.coordinates[s][0]===i[0]&&o.coordinates[s][1]===i[1])n=s+1,o.addCoordinate(n,...o.coordinates[s]);else{if(o.coordinates[0][0]!==i[0]||o.coordinates[0][1]!==i[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");r="backwards",n=0,o.addCoordinate(n,...o.coordinates[0])}}else o=this.newFeature({type:h.FEATURE,properties:{},geometry:{type:h.LINE_STRING,coordinates:[]}}),n=0,this.addFeature(o);return this.clearSelectedFeatures(),Oe.disable(this),this.updateUIClasses({mouse:d.ADD}),this.activateUIButton(p.LINE),this.setActionableState({trash:!0}),{line:o,currentVertexPosition:n,direction:r}},clickAnywhere:function(e,t){if(e.currentVertexPosition>0&&Ve(t,e.line.coordinates[e.currentVertexPosition-1])||"backwards"===e.direction&&Ve(t,e.line.coordinates[e.currentVertexPosition+1]))return this.changeMode(f.SIMPLE_SELECT,{featureIds:[e.line.id]});this.updateUIClasses({mouse:d.ADD}),e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),"forward"===e.direction?(e.currentVertexPosition++,e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat)):e.line.addCoordinate(0,t.lngLat.lng,t.lngLat.lat)},clickOnVertex:function(e){return this.changeMode(f.SIMPLE_SELECT,{featureIds:[e.line.id]})},onMouseMove:function(e,t){e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),ge(t)&&this.updateUIClasses({mouse:d.POINTER})}};Be.onTap=Be.onClick=function(e,t){if(ge(t))return this.clickOnVertex(e,t);this.clickAnywhere(e,t)},Be.onKeyUp=function(e,t){Ee(t)?this.changeMode(f.SIMPLE_SELECT,{featureIds:[e.line.id]}):ye(t)&&(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(f.SIMPLE_SELECT))},Be.onStop=function(e){Oe.enable(this),this.activateUIButton(),void 0!==this.getFeature(e.line.id)&&(e.line.removeCoordinate(`${e.currentVertexPosition}`),e.line.isValid()?this.fire(g.CREATE,{features:[e.line.toGeoJSON()]}):(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(f.SIMPLE_SELECT,{},{silent:!0})))},Be.onTrash=function(e){this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(f.SIMPLE_SELECT)},Be.toDisplayFeatures=function(e,t,o){const n=t.properties.id===e.line.id;if(t.properties.active=n?E.ACTIVE:E.INACTIVE,!n)return o(t);t.geometry.coordinates.length<2||(t.properties.meta=y.FEATURE,o(ve(e.line.id,t.geometry.coordinates["forward"===e.direction?t.geometry.coordinates.length-2:1],""+("forward"===e.direction?t.geometry.coordinates.length-2:1),!1)),o(t))};var je={simple_select:Re,direct_select:Ue,draw_point:ke,draw_polygon:Ge,draw_line_string:Be};const Je={defaultMode:f.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:ce,modes:je,controls:{},userProperties:!1,suppressAPIEvents:!0},$e={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},Ye={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function He(e,t){return e.map((e=>e.source?e:Object.assign({},e,{id:`${e.id}.${t}`,source:"hot"===t?l.HOT:l.COLD})))}var Xe,qe,Ze,We,Ke=t(qe?Xe:(qe=1,Xe=function e(t,o){if(t===o)return!0;if(t&&o&&"object"==typeof t&&"object"==typeof o){if(t.constructor!==o.constructor)return!1;var n,r,i;if(Array.isArray(t)){if((n=t.length)!=o.length)return!1;for(r=n;0!=r--;)if(!e(t[r],o[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===o.source&&t.flags===o.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===o.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===o.toString();if((n=(i=Object.keys(t)).length)!==Object.keys(o).length)return!1;for(r=n;0!=r--;)if(!Object.prototype.hasOwnProperty.call(o,i[r]))return!1;for(r=n;0!=r--;){var s=i[r];if(!e(t[s],o[s]))return!1}return!0}return t!=t&&o!=o})),ze=function(){if(We)return Ze;We=1,Ze=function(t){if(!t||!t.type)return null;var o=e[t.type];return o?"geometry"===o?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]}:"feature"===o?{type:"FeatureCollection",features:[t]}:"featurecollection"===o?t:void 0:null};var e={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};return Ze}(),Qe=t(ze);function et(e,t){return e.length===t.length&&JSON.stringify(e.map((e=>e)).sort())===JSON.stringify(t.map((e=>e)).sort())}const tt={Polygon:Y,LineString:$,Point:J,MultiPolygon:q,MultiLineString:q,MultiPoint:q};var ot=Object.freeze({__proto__:null,CommonSelectors:Te,ModeHandler:e,StringSet:M,constrainFeatureMovement:Pe,createMidPoint:Ie,createSupplementaryPoints:Se,createVertex:ve,doubleClickZoom:Oe,euclideanDistance:P,featuresAt:b,getFeatureAtAndSetCursors:A,isClick:D,isEventAtCoordinates:Ve,isTap:V,mapEventToBoundingBox:L,moveFeatures:Fe,sortFeatures:O,stringSetsAreEqual:et,theme:ce,toDenseArray:Q});const nt=function(e,t){const o={options:e=function(e={}){let t=Object.assign({},e);return e.controls||(t.controls={}),!1===e.displayControlsDefault?t.controls=Object.assign({},Ye,e.controls):t.controls=Object.assign({},$e,e.controls),t=Object.assign({},Je,t),t.styles=He(t.styles,"cold").concat(He(t.styles,"hot")),t}(e)};t=function(e,t){t.modes=f;const o=void 0===e.options.suppressAPIEvents||!!e.options.suppressAPIEvents;return t.getFeatureIdsAt=function(t){return b.click({point:t},null,e).map((e=>e.properties.id))},t.getSelectedIds=function(){return e.store.getSelectedIds()},t.getSelected=function(){return{type:h.FEATURE_COLLECTION,features:e.store.getSelectedIds().map((t=>e.store.get(t))).map((e=>e.toGeoJSON()))}},t.getSelectedPoints=function(){return{type:h.FEATURE_COLLECTION,features:e.store.getSelectedCoordinates().map((e=>({type:h.FEATURE,properties:{},geometry:{type:h.POINT,coordinates:e.coordinates}})))}},t.set=function(o){if(void 0===o.type||o.type!==h.FEATURE_COLLECTION||!Array.isArray(o.features))throw new Error("Invalid FeatureCollection");const n=e.store.createRenderBatch();let r=e.store.getAllIds().slice();const i=t.add(o),s=new M(i);return r=r.filter((e=>!s.has(e))),r.length&&t.delete(r),n(),i},t.add=function(t){const n=JSON.parse(JSON.stringify(Qe(t))).features.map((t=>{if(t.id=t.id||B(),null===t.geometry)throw new Error("Invalid geometry: null");if(void 0===e.store.get(t.id)||e.store.get(t.id).type!==t.geometry.type){const n=tt[t.geometry.type];if(void 0===n)throw new Error(`Invalid geometry type: ${t.geometry.type}.`);const r=new n(e,t);e.store.add(r,{silent:o})}else{const n=e.store.get(t.id),r=n.properties;n.properties=t.properties,Ke(r,t.properties)||e.store.featureChanged(n.id,{silent:o}),Ke(n.getCoordinates(),t.geometry.coordinates)||n.incomingCoords(t.geometry.coordinates)}return t.id}));return e.store.render(),n},t.get=function(t){const o=e.store.get(t);if(o)return o.toGeoJSON()},t.getAll=function(){return{type:h.FEATURE_COLLECTION,features:e.store.getAll().map((e=>e.toGeoJSON()))}},t.delete=function(n){return e.store.delete(n,{silent:o}),t.getMode()!==f.DIRECT_SELECT||e.store.getSelectedIds().length?e.store.render():e.events.changeMode(f.SIMPLE_SELECT,void 0,{silent:o}),t},t.deleteAll=function(){return e.store.delete(e.store.getAllIds(),{silent:o}),t.getMode()===f.DIRECT_SELECT?e.events.changeMode(f.SIMPLE_SELECT,void 0,{silent:o}):e.store.render(),t},t.changeMode=function(n,r={}){return n===f.SIMPLE_SELECT&&t.getMode()===f.SIMPLE_SELECT?(et(r.featureIds||[],e.store.getSelectedIds())||(e.store.setSelected(r.featureIds,{silent:o}),e.store.render()),t):(n===f.DIRECT_SELECT&&t.getMode()===f.DIRECT_SELECT&&r.featureId===e.store.getSelectedIds()[0]||e.events.changeMode(n,r,{silent:o}),t)},t.getMode=function(){return e.events.getMode()},t.trash=function(){return e.events.trash({silent:o}),t},t.combineFeatures=function(){return e.events.combineFeatures({silent:o}),t},t.uncombineFeatures=function(){return e.events.uncombineFeatures({silent:o}),t},t.setFeatureProperty=function(n,r,i){return e.store.setFeatureProperty(n,r,i,{silent:o}),t},t}(o,t),o.api=t;const n=re(o);return t.onAdd=n.onAdd,t.onRemove=n.onRemove,t.types=p,t.options=e,t};function rt(e){nt(e,this)}return rt.modes=je,rt.constants=v,rt.lib=ot,rt},"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).MapboxDraw=t();
//# sourceMappingURL=mapbox-gl-draw.js.map
</script>
<script>// This code is derived from the ISC-licensed "mapbox-gl-draw-freehand-mode" plugin
// by Ben Ehmke, Eric Dong, and Joe Woodhouse.
// Source: https://github.com/bemky/mapbox-gl-draw-freehand-mode
(function (MapboxDraw) {
    const { geojsonTypes, cursors, types, updateActions, modes, events } =
        MapboxDraw.constants;

    const FreehandMode = {};

    FreehandMode.onSetup = function () {
        const polygon = this.newFeature({
            type: geojsonTypes.FEATURE,
            properties: {},
            geometry: {
                type: geojsonTypes.POLYGON,
                coordinates: [[]],
            },
        });

        this.addFeature(polygon);
        this.clearSelectedFeatures();

        // Disable map dragging
        setTimeout(() => {
            if (!this.map || !this.map.dragPan) return;
            this.map.dragPan.disable();
        }, 0);

        this.updateUIClasses({ mouse: cursors.ADD });
        this.activateUIButton(types.POLYGON);
        this.setActionableState({
            trash: true,
        });

        return {
            polygon,
            currentVertexPosition: 0,
            dragMoving: false,
            isDrawing: false,
        };
    };

    FreehandMode.onDrag = FreehandMode.onTouchMove = function (state, e) {
        state.dragMoving = true;
        state.isDrawing = true;
        this.updateUIClasses({ mouse: cursors.ADD });
        state.polygon.updateCoordinate(
            `0.${state.currentVertexPosition}`,
            e.lngLat.lng,
            e.lngLat.lat,
        );
        state.currentVertexPosition++;
        state.polygon.updateCoordinate(
            `0.${state.currentVertexPosition}`,
            e.lngLat.lng,
            e.lngLat.lat,
        );
    };

    FreehandMode.onMouseUp = function (state) {
        if (state.dragMoving) {
            this.simplify(state.polygon);
            this.updateUIClasses({ mouse: cursors.MOVE });
            this.fireUpdate();
            this.changeMode(modes.SIMPLE_SELECT, {
                featureIds: [state.polygon.id],
            });
        }
    };

    FreehandMode.fireCreate = function (polygon) {
        this.map.fire(events.CREATE, {
            features: [polygon.toGeoJSON()],
        });
    };

    FreehandMode.fireUpdate = function () {
        this.map.fire(events.UPDATE, {
            action: updateActions.MOVE,
            features: this.getSelected().map((f) => f.toGeoJSON()),
        });
    };

    FreehandMode.simplify = function (polygon) {
        if (!this.map.simplify_freehand) return;

        const tolerance = 1 / Math.pow(1.05, 10 * this.map.getZoom());
        const simplifiedCoords = simplifyGeometry(
            polygon.coordinates[0],
            tolerance,
        );
        polygon.setCoordinates([simplifiedCoords]);
    };

    function simplifyGeometry(points, tolerance) {
        if (points.length <= 2) return points;

        const sqTolerance = tolerance * tolerance;
        const last = points.length - 1;
        const simplified = [points[0]];
        simplifyDPStep(points, 0, last, sqTolerance, simplified);
        simplified.push(points[last]);

        return simplified;
    }

    function simplifyDPStep(points, first, last, sqTolerance, simplified) {
        let maxSqDist = sqTolerance;
        let index;

        for (let i = first + 1; i < last; i++) {
            const sqDist = getSquareSegmentDistance(
                points[i],
                points[first],
                points[last],
            );
            if (sqDist > maxSqDist) {
                index = i;
                maxSqDist = sqDist;
            }
        }

        if (maxSqDist > sqTolerance) {
            if (index - first > 1)
                simplifyDPStep(points, first, index, sqTolerance, simplified);
            simplified.push(points[index]);
            if (last - index > 1)
                simplifyDPStep(points, index, last, sqTolerance, simplified);
        }
    }

    function getSquareSegmentDistance(p, p1, p2) {
        let x = p1[0],
            y = p1[1];
        let dx = p2[0] - x,
            dy = p2[1] - y;

        if (dx !== 0 || dy !== 0) {
            const t = ((p[0] - x) * dx + (p[1] - y) * dy) / (dx * dx + dy * dy);
            if (t > 1) {
                x = p2[0];
                y = p2[1];
            } else if (t > 0) {
                x += dx * t;
                y += dy * t;
            }
        }

        dx = p[0] - x;
        dy = p[1] - y;

        return dx * dx + dy * dy;
    }

    FreehandMode.onStop = function (state) {
        this.updateUIClasses({ mouse: cursors.NONE });
        this.activateUIButton();

        // Enable map dragging
        setTimeout(() => {
            if (!this.map || !this.map.dragPan) return;
            this.map.dragPan.enable();
        }, 0);
    };

    FreehandMode.toDisplayFeatures = function (state, geojson, display) {
        const isActivePolygon = geojson.properties.id === state.polygon.id;
        geojson.properties.active = isActivePolygon ? "true" : "false";
        if (!isActivePolygon) return display(geojson);

        // Only render the polygon if it has at least three points
        if (geojson.geometry.coordinates[0].length < 3) return;

        const coordinateCount = geojson.geometry.coordinates[0].length;

        // If we have fewer than three coordinates, we need to create a LineString instead of a Polygon
        if (coordinateCount < 3) {
            const lineCoordinates = [
                [
                    geojson.geometry.coordinates[0][0][0],
                    geojson.geometry.coordinates[0][0][1],
                ],
                [
                    geojson.geometry.coordinates[0][1][0],
                    geojson.geometry.coordinates[0][1][1],
                ],
            ];
            return display({
                type: geojsonTypes.FEATURE,
                properties: geojson.properties,
                geometry: {
                    coordinates: lineCoordinates,
                    type: geojsonTypes.LINE_STRING,
                },
            });
        }

        return display(geojson);
    };

    FreehandMode.onTrash = function (state) {
        this.deleteFeature([state.polygon.id], { silent: true });
        this.changeMode(modes.SIMPLE_SELECT);
    };

    MapboxDraw.modes.draw_freehand = FreehandMode;
})(MapboxDraw);
</script>
<script>// Rectangle drawing mode for Mapbox GL Draw
// Adapted from https://github.com/edgespatial/mapbox-gl-draw-rectangle-mode
(function (MapboxDraw) {
    const doubleClickZoom = {
        enable: function (ctx) {
            setTimeout(function () {
                if (!ctx.map || !ctx.map.doubleClickZoom) return;
                if (ctx._ctx && ctx._ctx.store && ctx._ctx.store.getInitialConfigValue) {
                    if (ctx._ctx.store.getInitialConfigValue("doubleClickZoom")) {
                        ctx.map.doubleClickZoom.enable();
                    }
                }
            }, 0);
        },
        disable: function (ctx) {
            setTimeout(function () {
                if (ctx.map && ctx.map.doubleClickZoom) {
                    ctx.map.doubleClickZoom.disable();
                }
            }, 0);
        }
    };

    const RectangleMode = {
        onSetup: function (opts) {
            const rectangle = this.newFeature({
                type: "Feature",
                properties: {},
                geometry: {
                    type: "Polygon",
                    coordinates: [[]]
                }
            });

            this.addFeature(rectangle);
            this.clearSelectedFeatures();
            doubleClickZoom.disable(this);
            this.updateUIClasses({ mouse: "add" });
            this.setActionableState({ trash: true });

            return {
                rectangle: rectangle
            };
        },

        onClick: function (state, e) {
            // If we have a start point and click on a different point, complete the rectangle
            if (state.startPoint &&
                (state.startPoint[0] !== e.lngLat.lng || state.startPoint[1] !== e.lngLat.lat)) {
                this.updateUIClasses({ mouse: "pointer" });
                state.endPoint = [e.lngLat.lng, e.lngLat.lat];
                this.changeMode("simple_select", { featuresId: state.rectangle.id });
                return;
            }

            // Set the start point
            const startPoint = [e.lngLat.lng, e.lngLat.lat];
            state.startPoint = startPoint;
        },

        onMouseMove: function (state, e) {
            // Update rectangle coordinates as the mouse moves
            if (state.startPoint) {
                const startX = state.startPoint[0];
                const startY = state.startPoint[1];
                const endX = e.lngLat.lng;
                const endY = e.lngLat.lat;

                state.rectangle.updateCoordinate("0.0", startX, startY);
                state.rectangle.updateCoordinate("0.1", endX, startY);
                state.rectangle.updateCoordinate("0.2", endX, endY);
                state.rectangle.updateCoordinate("0.3", startX, endY);
                state.rectangle.updateCoordinate("0.4", startX, startY);
            }
        },

        onKeyUp: function (state, e) {
            if (e.keyCode === 27) { // Escape key
                return this.changeMode("simple_select");
            }
        },

        onStop: function (state) {
            doubleClickZoom.enable(this);
            this.updateUIClasses({ mouse: "none" });
            this.activateUIButton();

            if (this.getFeature(state.rectangle.id) !== undefined) {
                // Remove the closing coordinate (duplicate of first)
                state.rectangle.removeCoordinate("0.4");

                if (state.rectangle.isValid()) {
                    this.map.fire("draw.create", {
                        features: [state.rectangle.toGeoJSON()]
                    });
                } else {
                    this.deleteFeature([state.rectangle.id], { silent: true });
                    this.changeMode("simple_select", {}, { silent: true });
                }
            }
        },

        toDisplayFeatures: function (state, geojson, display) {
            const isActiveRectangle = geojson.properties.id === state.rectangle.id;
            geojson.properties.active = isActiveRectangle ? "true" : "false";

            if (!isActiveRectangle) {
                return display(geojson);
            }

            // Only display the rectangle if we have started drawing
            if (state.startPoint) {
                return display(geojson);
            }
        },

        onTrash: function (state) {
            this.deleteFeature([state.rectangle.id], { silent: true });
            this.changeMode("simple_select");
        }
    };

    MapboxDraw.modes.draw_rectangle = RectangleMode;
})(MapboxDraw);</script>
<script>// Radius/Circle drawing mode for Mapbox GL Draw
// Creates a circle by drawing from center to edge
(function (MapboxDraw) {
    const DrawLine = MapboxDraw.modes.draw_line_string;

    // Utility function to create a vertex feature
    const createVertex = function (parentId, coordinates, path, selected) {
        return {
            type: "Feature",
            properties: {
                meta: "vertex",
                parent: parentId,
                coord_path: path,
                active: selected ? "true" : "false"
            },
            geometry: {
                type: "Point",
                coordinates: coordinates
            }
        };
    };

    // Utility function to calculate distance between two points in kilometers
    const calculateDistance = function (coord1, coord2) {
        const lat1 = coord1[1];
        const lon1 = coord1[0];
        const lat2 = coord2[1];
        const lon2 = coord2[0];

        const R = 6371; // Radius of the Earth in kilometers
        const dLat = (lat2 - lat1) * Math.PI / 180;
        const dLon = (lon2 - lon1) * Math.PI / 180;
        const a =
            Math.sin(dLat/2) * Math.sin(dLat/2) +
            Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
            Math.sin(dLon/2) * Math.sin(dLon/2);
        const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
        const distance = R * c;

        return distance;
    };

    // Utility function to create a GeoJSON circle
    const createGeoJSONCircle = function (center, radiusInKm, parentId, points) {
        points = points || 64;

        const coords = {
            latitude: center[1],
            longitude: center[0]
        };

        const km = radiusInKm;
        const ret = [];
        const distanceX = km / (111.32 * Math.cos((coords.latitude * Math.PI) / 180));
        const distanceY = km / 110.574;

        let theta, x, y;
        for (let i = 0; i < points; i++) {
            theta = (i / points) * (2 * Math.PI);
            x = distanceX * Math.cos(theta);
            y = distanceY * Math.sin(theta);

            ret.push([coords.longitude + x, coords.latitude + y]);
        }
        ret.push(ret[0]);

        return {
            type: "Feature",
            geometry: {
                type: "Polygon",
                coordinates: [ret]
            },
            properties: {
                parent: parentId,
                meta: "radius"
            }
        };
    };

    // Utility function to format distance for display
    const getDisplayMeasurements = function (distanceKm) {
        let metricUnits = "m";
        let metricFormat = "0,0";
        let metricMeasurement;

        let standardUnits = "feet";
        let standardFormat = "0,0";
        let standardMeasurement;

        metricMeasurement = distanceKm * 1000; // Convert to meters
        if (metricMeasurement >= 1000) {
            metricMeasurement = metricMeasurement / 1000;
            metricUnits = "km";
            metricFormat = "0.00";
        }

        standardMeasurement = distanceKm * 1000 * 3.28084; // Convert to feet
        if (standardMeasurement >= 5280) {
            standardMeasurement = standardMeasurement / 5280;
            standardUnits = "mi";
            standardFormat = "0.00";
        }

        // Simple number formatting (without numeral.js dependency)
        const formatNumber = function(num, format) {
            if (format === "0,0") {
                return Math.round(num).toLocaleString();
            } else if (format === "0.00") {
                return num.toFixed(2);
            }
            return num.toString();
        };

        return {
            metric: formatNumber(metricMeasurement, metricFormat) + " " + metricUnits,
            standard: formatNumber(standardMeasurement, standardFormat) + " " + standardUnits
        };
    };

    const doubleClickZoom = {
        enable: function (ctx) {
            setTimeout(function () {
                if (!ctx.map || !ctx.map.doubleClickZoom) return;
                if (ctx._ctx && ctx._ctx.store && ctx._ctx.store.getInitialConfigValue) {
                    if (ctx._ctx.store.getInitialConfigValue("doubleClickZoom")) {
                        ctx.map.doubleClickZoom.enable();
                    }
                }
            }, 0);
        },
        disable: function (ctx) {
            setTimeout(function () {
                if (ctx.map && ctx.map.doubleClickZoom) {
                    ctx.map.doubleClickZoom.disable();
                }
            }, 0);
        }
    };

    const RadiusMode = Object.assign({}, DrawLine);

    RadiusMode.onSetup = function (opts) {
        const line = this.newFeature({
            type: "Feature",
            properties: {},
            geometry: {
                type: "LineString",
                coordinates: []
            }
        });

        this.addFeature(line);
        this.clearSelectedFeatures();
        doubleClickZoom.disable(this);
        this.updateUIClasses({ mouse: "add" });
        this.activateUIButton("line");
        this.setActionableState({ trash: true });

        return {
            line: line,
            currentVertexPosition: 0,
            direction: "forward"
        };
    };

    RadiusMode.onClick = function (state, e) {
        // This ends the drawing after the user creates a second point
        if (state.currentVertexPosition === 1) {
            // Update the second coordinate in place, don't add at position 0
            state.line.updateCoordinate(1, e.lngLat.lng, e.lngLat.lat);
            return this.changeMode("simple_select", { featureIds: [state.line.id] });
        }

        this.updateUIClasses({ mouse: "add" });
        state.line.updateCoordinate(
            state.currentVertexPosition,
            e.lngLat.lng,
            e.lngLat.lat
        );

        if (state.direction === "forward") {
            state.currentVertexPosition += 1;
            state.line.updateCoordinate(
                state.currentVertexPosition,
                e.lngLat.lng,
                e.lngLat.lat
            );
        } else {
            state.line.addCoordinate(0, e.lngLat.lng, e.lngLat.lat);
        }

        return null;
    };

    RadiusMode.onMouseMove = function (state, e) {
        if (state.currentVertexPosition === 1) {
            state.line.updateCoordinate(1, e.lngLat.lng, e.lngLat.lat);
        }
    };

    // Creates the final geojson circle polygon
    RadiusMode.onStop = function (state) {
        doubleClickZoom.enable(this);
        this.activateUIButton();

        // Check to see if we've deleted this feature
        if (this.getFeature(state.line.id) === undefined) return;

        if (state.line.isValid()) {
            const lineGeoJson = state.line.toGeoJSON();
            const coords = lineGeoJson.geometry.coordinates;

            if (coords.length >= 2) {
                // Calculate radius in kilometers
                const radiusKm = calculateDistance(coords[0], coords[1]);

                // Create the circle polygon
                const circleFeature = createGeoJSONCircle(coords[0], radiusKm, state.line.id);

                // Add radius property for reference
                circleFeature.properties.radius = (radiusKm * 1000).toFixed(1);

                // Remove the meta property that was interfering
                delete circleFeature.properties.meta;
                delete circleFeature.properties.parent;

                // Delete the temporary line first
                this.deleteFeature([state.line.id], { silent: true });

                // Add the circle feature to the draw instance
                const circleDrawFeature = this.newFeature(circleFeature);
                this.addFeature(circleDrawFeature);

                this.map.fire("draw.create", {
                    features: [circleDrawFeature.toGeoJSON()]
                });
            } else {
                this.deleteFeature([state.line.id], { silent: true });
            }
        } else {
            this.deleteFeature([state.line.id], { silent: true });
        }

        this.changeMode("simple_select", {}, { silent: true });
    };

    RadiusMode.toDisplayFeatures = function (state, geojson, display) {
        const isActiveLine = geojson.properties.id === state.line.id;
        geojson.properties.active = isActiveLine ? "true" : "false";

        if (!isActiveLine) return display(geojson);

        // Only render the line if it has at least one real coordinate
        if (geojson.geometry.coordinates.length < 2) return null;

        geojson.properties.meta = "feature";

        // Display center vertex as a point feature
        display(createVertex(
            state.line.id,
            geojson.geometry.coordinates[
                state.direction === "forward"
                    ? geojson.geometry.coordinates.length - 2
                    : 1
            ],
            "" + (state.direction === "forward"
                ? geojson.geometry.coordinates.length - 2
                : 1),
            false
        ));

        // Display the line as it is drawn
        display(geojson);

        const coords = geojson.geometry.coordinates;
        if (coords.length >= 2) {
            const distanceKm = calculateDistance(coords[0], coords[1]);
            const displayMeasurements = getDisplayMeasurements(distanceKm);

            // Create custom feature for the current pointer position
            const currentVertex = {
                type: "Feature",
                properties: {
                    meta: "currentPosition",
                    radiusMetric: displayMeasurements.metric,
                    radiusStandard: displayMeasurements.standard,
                    parent: state.line.id
                },
                geometry: {
                    type: "Point",
                    coordinates: coords[1]
                }
            };
            display(currentVertex);

            // Create custom feature for radius circle
            const center = coords[0];
            const circleFeature = createGeoJSONCircle(center, distanceKm, state.line.id);
            display(circleFeature);
        }

        return null;
    };

    RadiusMode.onTrash = function (state) {
        this.deleteFeature([state.line.id], { silent: true });
        this.changeMode("simple_select");
    };

    MapboxDraw.modes.draw_radius = RadiusMode;
})(MapboxDraw);</script>
<style type="text/css">
.maplibregl-ctrl-geocoder,
.maplibregl-ctrl-geocoder *,
.maplibregl-ctrl-geocoder *:after,
.maplibregl-ctrl-geocoder *:before {
box-sizing: border-box;
}
.maplibregl-ctrl-geocoder {
font-size: 18px;
line-height: 24px;
font-family: "Open Sans", "Helvetica Neue", Arial, Helvetica, sans-serif;
position: relative;
background-color: #fff;
width: 100%;
min-width: 240px;
z-index: 1;
border-radius: 4px;
transition: width 0.25s, min-width 0.25s;
}
.maplibregl-ctrl-geocoder--input {
font: inherit;
width: 100%;
border: 0;
background-color: transparent;
margin: 0;
height: 50px;
color: #404040; 
color: rgba(0, 0, 0, 0.75);
padding: 6px 45px;
text-overflow: ellipsis;
white-space: nowrap;
overflow: hidden;
}
.maplibregl-ctrl-geocoder--input::-ms-clear {
display: none; 
}
.maplibregl-ctrl-geocoder--input:focus {
color: #404040; 
color: rgba(0, 0, 0, 0.75);
outline: 0;
box-shadow: none;
outline: thin dotted;
}
.maplibregl-ctrl-geocoder .maplibregl-ctrl-geocoder--pin-right > * {
z-index: 2;
position: absolute;
right: 8px;
top: 7px;
display: none;
}
.maplibregl-ctrl-geocoder,
.maplibregl-ctrl-geocoder .suggestions {
box-shadow: 0 0 10px 2px rgba(0, 0, 0, 0.1);
}

.maplibregl-ctrl-geocoder.maplibregl-ctrl-geocoder--collapsed {
width: 50px;
min-width: 50px;
transition: width 0.25s, min-width 0.25s;
}

.maplibregl-ctrl-geocoder .suggestions {
background-color: #fff;
border-radius: 4px;
left: 0;
list-style: none;
margin: 0;
padding: 0;
position: absolute;
width: 100%;
top: 110%; 
top: calc(100% + 6px);
z-index: 1000;
overflow: hidden;
font-size: 15px;
}
.maplibregl-ctrl-bottom-left .suggestions,
.maplibregl-ctrl-bottom-right .suggestions {
top: auto;
bottom: 100%;
}
.maplibregl-ctrl-geocoder .suggestions > li > a {
cursor: default;
display: block;
padding: 6px 12px;
color: #404040;
}
.maplibregl-ctrl-geocoder .suggestions > .active > a,
.maplibregl-ctrl-geocoder .suggestions > li > a:hover {
color: #404040;
background-color: #f3f3f3;
text-decoration: none;
cursor: pointer;
}
.maplibregl-ctrl-geocoder--suggestion {
display: flex;
flex-direction: row;
align-items: center;
}
.maplibre-ctrl-geocoder--suggestion-icon {
min-width: 30px;
min-height: 24px;
max-width: 30px;
max-height: 24px;
padding-right: 12px;
}
.maplibregl-ctrl-geocoder--suggestion-info {
display: flex;
flex-direction: column;
}
.maplibregl-ctrl-geocoder--suggestion-match {
font-weight: bold;
}
.maplibregl-ctrl-geocoder--suggestion-title,
.maplibregl-ctrl-geocoder--suggestion-address {
text-overflow: ellipsis;
overflow: hidden;
white-space: nowrap;
}
.maplibregl-ctrl-geocoder--result {
display: flex;
flex-direction: row;
align-items: center;
}
.maplibre-ctrl-geocoder--result-icon {
min-width: 30px;
min-height: 24px;
max-width: 30px;
max-height: 24px;
padding-right: 12px;
}
.maplibregl-ctrl-geocoder--result-title {
font-weight: bold;
}
.maplibregl-ctrl-geocoder--result-title,
.maplibregl-ctrl-geocoder--result-address {
text-overflow: ellipsis;
overflow: hidden;
white-space: nowrap;
}

.maplibregl-ctrl-geocoder--icon {
display: inline-block;
vertical-align: middle;
speak: none;
fill: #757575;
top: 15px;
}
.maplibregl-ctrl-geocoder--icon-search {
position: absolute;
top: 13px;
left: 12px;
width: 23px;
height: 23px;
}
.maplibregl-ctrl-geocoder--button {
padding: 0;
margin: 0;
border: none;
cursor: pointer;
background: #fff;
line-height: 1;
}
.maplibregl-ctrl-geocoder--icon-close {
width: 20px;
height: 20px;
margin-top: 8px;
margin-right: 3px;
}
.maplibregl-ctrl-geocoder--button:hover .maplibregl-ctrl-geocoder--icon-close {
fill: #909090;
}
.maplibregl-ctrl-geocoder--icon-loading {
width: 26px;
height: 26px;
margin-top: 5px;
margin-right: 0px;
-moz-animation: rotate 0.8s infinite cubic-bezier(0.45, 0.05, 0.55, 0.95);
-webkit-animation: rotate 0.8s infinite cubic-bezier(0.45, 0.05, 0.55, 0.95);
animation: rotate 0.8s infinite cubic-bezier(0.45, 0.05, 0.55, 0.95);
}

@-webkit-keyframes rotate {
from {
-webkit-transform: rotate(0);
transform: rotate(0);
}
to {
-webkit-transform: rotate(360deg);
transform: rotate(360deg);
}
}
@keyframes rotate {
from {
-webkit-transform: rotate(0);
transform: rotate(0);
}
to {
-webkit-transform: rotate(360deg);
transform: rotate(360deg);
}
}

@media screen and (min-width: 640px) {
.maplibregl-ctrl-geocoder.maplibregl-ctrl-geocoder--collapsed {
width: 36px;
min-width: 36px;
}
.maplibregl-ctrl-geocoder {
width: 33.3333%;
font-size: 15px;
line-height: 20px;
max-width: 360px;
}
.maplibregl-ctrl-geocoder .suggestions {
font-size: 13px;
}
.maplibregl-ctrl-geocoder--icon {
top: 8px;
}
.maplibregl-ctrl-geocoder--icon-close {
width: 16px;
height: 16px;
margin-top: 3px;
margin-right: 0;
}
.maplibregl-ctrl-geocoder--icon-search {
left: 7px;
width: 20px;
height: 20px;
}
.maplibregl-ctrl-geocoder--input {
height: 36px;
padding: 6px 35px;
}
.maplibregl-ctrl-geocoder--icon-loading {
width: 26px;
height: 26px;
margin-top: -2px;
margin-right: -5px;
}
.maplibre-gl-geocoder--error {
color: #909090;
padding: 6px 12px;
font-size: 16px;
text-align: center;
}
}
</style>
<script>!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.MaplibreGeocoder=t()}}(function(){return function(){function t(e,i,n){function s(o,l){if(!i[o]){if(!e[o]){var a="function"==typeof require&&require;if(!l&&a)return a(o,!0);if(r)return r(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var u=i[o]={exports:{}};e[o][0].call(u.exports,function(t){return s(e[o][1][t]||t)},u,u.exports,t,e,i,n)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)s(n[o]);return s}return t}()({1:[function(t,e,i){e.exports={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}}},{}],2:[function(t,e,i){"use strict";function n(t,e){this._eventEmitter=new l,this.options=o({},this.options,e),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geocoderApi=t}var s=t("suggestions-list"),r=t("lodash.debounce"),o=t("xtend"),l=t("events").EventEmitter,a=t("./exceptions"),h=t("./localization"),u=t("subtag");n.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,showResultsWhileTyping:!1,minLength:2,reverseGeocode:!1,limit:5,enableEventLogging:!0,marker:!0,popup:!1,maplibregl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,getItemValue:function(t){return void 0!==t.text?t.text:t.place_name},render:function(t){if(t.geometry){var e=t.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--result maplibregl-ctrl-geocoder--result"><svg class="mapboxgl-ctrl-geocoder--result-icon maplibre-ctrl-geocoder--result-icon" viewBox="0 0 24 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36571 0 0 5.38676 0 12.0471C0 21.0824 12 32 12 32C12 32 24 21.0824 24 12.0471C24 5.38676 18.6343 0 12 0ZM12 16.3496C9.63428 16.3496 7.71429 14.4221 7.71429 12.0471C7.71429 9.67207 9.63428 7.74454 12 7.74454C14.3657 7.74454 16.2857 9.67207 16.2857 12.0471C16.2857 14.4221 14.3657 16.3496 12 16.3496Z" fill="#687078"/></svg><div><div class="mapboxgl-ctrl-geocoder--result-title maplibregl-ctrl-geocoder--result-title">'+e[0]+'</div><div class="mapboxgl-ctrl-geocoder--result-address maplibregl-ctrl-geocoder--result-address">'+e.splice(1,e.length).join(",")+"</div></div></div>"}var i=t.text,n=i.toLowerCase().indexOf(this.query.toLowerCase()),s=this.query.length;return'<div class="mapboxgl-ctrl-geocoder--suggestion maplibregl-ctrl-geocoder--suggestion"><svg class="mapboxgl-ctrl-geocoder--suggestion-icon maplibre-ctrl-geocoder--suggestion-icon" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22.8702 20.1258H21.4248L20.9125 19.6318C22.7055 17.546 23.785 14.8382 23.785 11.8925C23.785 5.32419 18.4608 0 11.8925 0C5.32419 0 0 5.32419 0 11.8925C0 18.4608 5.32419 23.785 11.8925 23.785C14.8382 23.785 17.546 22.7055 19.6318 20.9125L20.1258 21.4248V22.8702L29.2739 32L32 29.2739L22.8702 20.1258ZM11.8925 20.1258C7.33676 20.1258 3.65923 16.4483 3.65923 11.8925C3.65923 7.33676 7.33676 3.65923 11.8925 3.65923C16.4483 3.65923 20.1258 7.33676 20.1258 11.8925C20.1258 16.4483 16.4483 20.1258 11.8925 20.1258Z" fill="#687078"/></svg><div class="mapboxgl-ctrl-geocoder--suggestion-info maplibregl-ctrl-geocoder--suggestion-info"><div class="mapboxgl-ctrl-geocoder--suggestion-title maplibregl-ctrl-geocoder--suggestion-title">'+i.substring(0,n)+'<span class="mapboxgl-ctrl-geocoder--suggestion-match maplibregl-ctrl-geocoder--suggestion-match">'+i.substring(n,n+s)+"</span>"+i.substring(n+s)+"</div></div></div>"},popupRender:function(t){var e=t.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion maplibre-ctrl-geocoder--suggestion popup-suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title maplibre-ctrl-geocoder--suggestion-title popup-suggestion-title">'+e[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address maplibre-ctrl-geocoder--suggestion-address popup-suggestion-address">'+e.splice(1,e.length).join(",")+"</div></div>"},showResultMarkers:!0,debounceSearch:200},addTo:function(t){function e(t,e){if(!document.body.contains(e))throw new Error("Element provided to #addTo() exists, but is not in the DOM");var i=t.onAdd();e.appendChild(i)}if(t._controlContainer)t.addControl(this);else if(t instanceof HTMLElement)e(this,t);else{if("string"!=typeof t)throw new Error("Error: addTo must be a maplibre-gl-js map, an html element, or a CSS selector query for a single html element");var i=document.querySelectorAll(t);if(0===i.length)throw new Error("Element ",t,"not found.");if(i.length>1)throw new Error("Geocoder can only be added to a single html element");e(this,i[0])}},onAdd:function(t){if(t&&"string"!=typeof t&&(this._map=t),this.setLanguage(),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this);var e=this.container=document.createElement("div");e.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl";var i=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input maplibregl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",r(this._onKeyDown,this.options.debounceSearch)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton);var n=document.createElement("div");n.classList.add("mapboxgl-ctrl-geocoder--pin-right","maplibregl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button maplibregl-ctrl-geocoder--button";var o=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');return this._clearEl.appendChild(o),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),n.appendChild(this._clearEl),n.appendChild(this._loadingEl),e.appendChild(i),e.appendChild(this._inputEl),e.appendChild(n),this._typeahead=new s(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit,noInitialSelection:!0}),this.setRenderFunction(this.options.render),this._typeahead.getItemValue=this.options.getItemValue,this.mapMarker=null,this.resultMarkers=[],this._handleMarker=this._handleMarker.bind(this),this._handleResultMarkers=this._handleResultMarkers.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._maplibregl=this.options.maplibregl,!this._maplibregl&&this.options.marker&&(console.error("No maplibregl detected in options. Map markers are disabled. Please set options.maplibregl."),this.options.marker=!1)),e},createIcon:function(t,e){var i=document.createElementNS("http://www.w3.org/2000/svg","svg");if(i.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+t+" maplibregl-ctrl-geocoder--icon maplibregl-ctrl-geocoder--icon-"+t),i.setAttribute("viewBox","0 0 18 18"),i.setAttribute("xml:space","preserve"),i.setAttribute("width",18),i.setAttribute("height",18),"innerHTML"in i)i.innerHTML=e;else{var n=document.createElement("div");n.innerHTML="<svg>"+e.valueOf().toString()+"</svg>";var s=n.firstChild,r=s.firstChild;i.appendChild(r)}return i},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_onPaste:function(t){var e=(t.clipboardData||window.clipboardData).getData("text");e.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(e)},_onKeyDown:function(t){if(27===t.keyCode&&this.options.clearAndBlurOnEsc)return this._clear(t),this._inputEl.blur();var e=t.target&&t.target.shadowRoot?t.target.shadowRoot.activeElement:t.target;if(!(e?e.value:""))return this.fresh=!0,9!==t.keyCode&&this.clear(t),this._clearEl.style.display="none";if(!t.metaKey&&-1===[9,27,37,39,38,40].indexOf(t.keyCode)){if(13===t.keyCode){if(this.options.showResultsWhileTyping)return void(null==this._typeahead.selected&&this.geocoderApi.getSuggestions?this._geocode(e.value,!0):null==this._typeahead.selected&&this.options.showResultMarkers&&this._fitBoundsForMarkers());this._typeahead.selected||this._geocode(e.value)}e.value.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(e.value)}},_showButton:function(){this._inputEl.value.length>0&&(this._clearEl.style.display="block")},_hideButton:function(){this._typeahead.selected&&(this._clearEl.style.display="none")},_onBlur:function(t){this.options.clearOnBlur&&this._clearOnBlur(t),this.options.collapsed&&this._collapse()},_onChange:function(){var t=this._typeahead.selected;if(t&&!t.geometry)t.placeId?this._geocode(t.placeId,!0,!0):this._geocode(t.text,!0);else if(t&&JSON.stringify(t)!==this.lastSelected){if(this._clearEl.style.display="none",this.options.flyTo){var e;if(this._removeResultMarkers(),t.properties&&a[t.properties.short_code])e=o({},this.options.flyTo),this._map&&this._map.fitBounds(a[t.properties.short_code].bbox,e);else if(t.bbox){var i=t.bbox;e=o({},this.options.flyTo),this._map&&this._map.fitBounds([[i[0],i[1]],[i[2],i[3]]],e)}else{var n={zoom:this.options.zoom};e=o({},n,this.options.flyTo),t.center?e.center=t.center:t.geometry&&t.geometry.type&&"Point"===t.geometry.type&&t.geometry.coordinates&&(e.center=t.geometry.coordinates),this._map&&this._map.flyTo(e)}}this.options.marker&&this._maplibregl&&this._handleMarker(t),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(t),this._typeahead.selected=null,this._eventEmitter.emit("result",{result:t})}},_getConfigForRequest:function(){var t=["bbox","limit","proximity","countries","types","language","reverseMode"],e=this;return t.reduce(function(t,i){return e.options[i]&&(["countries","types","language"].indexOf(i)>-1?t[i]=e.options[i].split(/[\s,]+/):t[i]=e.options[i],"proximity"===i&&e.options[i]&&"number"==typeof e.options[i].longitude&&"number"==typeof e.options[i].latitude&&(t[i]=[e.options[i].longitude,e.options[i].latitude])),t},{})},_geocode:function(t,e,i){this._loadingEl.style.display="block",this._eventEmitter.emit("loading",{query:t}),this.inputString=t;var n,s=null,r=this._getConfigForRequest();if(this.options.localGeocoderOnly)n=Promise.resolve();else if(this.options.reverseGeocode&&/(-?\d+\.?\d*)[, ]+(-?\d+\.?\d*)[ ]*$/.test(t)){var l=t.split(/[\s(,)?]+/).map(function(t){return parseFloat(t,10)}).reverse();r.types&&r.types[0],r=o(r,{query:l,limit:1}),"proximity"in r&&delete r.proximity,n=this.geocoderApi.reverseGeocode(r)}else r=o(r,{query:t}),n=this.geocoderApi.getSuggestions?e?this.geocoderApi.searchByPlaceId&&i?this.geocoderApi.searchByPlaceId(r):this.geocoderApi.forwardGeocode(r):this.geocoderApi.getSuggestions(r):this.geocoderApi.forwardGeocode(r);var a=[];this.options.localGeocoder&&((a=this.options.localGeocoder(t))||(a=[]));var h=[];return n.catch(function(t){s=t}.bind(this)).then(function(e){this._loadingEl.style.display="none";var i={};return i=e||{type:"FeatureCollection",features:[]},i.config=r,this.fresh&&(this.fresh=!1),i.features=i.features?a.concat(i.features):a,this.options.externalGeocoder?(h=this.options.externalGeocoder(t,i.features,r)||[],h.then(function(t){return i.features=i.features?t.concat(i.features):t,i},function(){return i})):i}.bind(this)).then(function(t){if(s)throw s;this.options.filter&&t.features.length&&(t.features=t.features.filter(this.options.filter));var i=[];i=t.suggestions?t.suggestions:t.place?[t.place]:t.features,i.length?(this._clearEl.style.display="block",this._typeahead.update(i),(!this.options.showResultsWhileTyping||e)&&this.options.showResultMarkers&&(t.features.length>0||t.place)&&this._fitBoundsForMarkers(),this._eventEmitter.emit("results",t)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",t))}.bind(this)).catch(function(t){this._loadingEl.style.display="none",a.length&&this.options.localGeocoder||h.length&&this.options.externalGeocoder?(this._clearEl.style.display="block",this._typeahead.update(a)):(this._clearEl.style.display="none",this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:a}),this._eventEmitter.emit("error",{error:t})}.bind(this)),n},_clear:function(t){t&&t.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._clearEl.style.display="none",this._removeMarker(),this._removeResultMarkers(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(t){this._clear(t),this._inputEl.focus()},_clearOnBlur:function(t){var e=this;t.relatedTarget&&e._clear(t)},_onQueryResult:function(t){var e=t;if(e.features.length){var i=e.features[0];this._typeahead.selected=i,this._inputEl.value=i.place_name,this._onChange()}},_updateProximity:function(){if(this._map)if(this._map.getZoom()>9){var t=this._map.getCenter().wrap();this.setProximity({longitude:t.lng,latitude:t.lat})}else this.setProximity(null)},_collapse:function(){this._inputEl.value||this._inputEl===document.activeElement||this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed","maplibregl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed","maplibregl-ctrl-geocoder--collapsed")},query:function(t){return this._geocode(t).then(this._onQueryResult),this},_renderError:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error maplibre-gl-geocoder--error'>There was an error reaching the server</div>")},_renderNoResults:function(){this._renderMessage("<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results maplibre-gl-geocoder--error maplibre-gl-geocoder--no-results'>No results found</div>")},_renderMessage:function(t){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(t)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var t=this.options.language.split(",")[0],e=u.language(t),i=h.placeholder[e];if(i)return i}return"Search"},_fitBoundsForMarkers:function(){if(!(this._typeahead.data.length<1)){var t=this._typeahead.data.filter(function(t){return"string"!=typeof t}).slice(0,this.options.limit);if(this._clearEl.style.display="none",this.options.flyTo&&this._maplibregl&&this._map){var e={padding:100},i=o({},e,this.options.flyTo),n=new this._maplibregl.LngLatBounds;t.forEach(function(t){n.extend(t.geometry.coordinates)}),this._map.fitBounds(n.toArray(),i)}return t.length>0&&this._maplibregl&&this._handleResultMarkers(t),this}},setInput:function(t){return this._inputEl.value=t,this._typeahead.selected=null,this._typeahead.clear(),t.length>=this.options.minLength&&this.options.showResultsWhileTyping&&this._geocode(t),this},setProximity:function(t){return this.options.proximity=t,this},getProximity:function(){return this.options.proximity},setRenderFunction:function(t){return t&&"function"==typeof t&&(this._typeahead.render=t),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(t){var e=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=t||this.options.language||e,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(t){return this.options.zoom=t,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(t){return this.options.flyTo=t,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(t){return this.placeholder=t||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(t){return this.options.bbox=t,this},getCountries:function(){return this.options.countries},setCountries:function(t){return this.options.countries=t,this},getTypes:function(){return this.options.types},setTypes:function(t){return this.options.types=t,this},getMinLength:function(){return this.options.minLength},setMinLength:function(t){return this.options.minLength=t,this._typeahead&&(this._typeahead.options.minLength=t),this},getLimit:function(){return this.options.limit},setLimit:function(t){return this.options.limit=t,this._typeahead&&(this._typeahead.options.limit=t),this},getFilter:function(){return this.options.filter},setFilter:function(t){return this.options.filter=t,this},setGeocoderApi:function(t){return this.geocoderApi=t,this},getGeocoderApi:function(){return this.geocoderApi},_handleMarker:function(t){if(this._map){this._removeMarker();var e={color:"#4668F2"},i=o({},e,this.options.marker);this.mapMarker=new this._maplibregl.Marker(i);var n;if(this.options.popup){var s={},r=o({},s,this.options.popup);n=new this._maplibregl.Popup(r).setHTML(this.options.popupRender(t))}return t.center?(this.mapMarker.setLngLat(t.center).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(n)):t.geometry&&t.geometry.type&&"Point"===t.geometry.type&&t.geometry.coordinates&&(this.mapMarker.setLngLat(t.geometry.coordinates).addTo(this._map),this.options.popup&&this.mapMarker.setPopup(n)),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},_handleResultMarkers:function(t){if(this._map){this._removeResultMarkers();var e={color:"#4668F2"},i=o({},e,this.options.showResultMarkers);return t.forEach(function(t){if(this.options.showResultMarkers&&this.options.showResultMarkers.element){var e=this.options.showResultMarkers.element.cloneNode(!0);i=o(i,{element:e})}var n,s=new this._maplibregl.Marker(o({},i,{element:e}));if(this.options.popup){var r={},l=o({},r,this.options.popup);n=new this._maplibregl.Popup(l).setHTML(this.options.popupRender(t))}t.center?(s.setLngLat(t.center).addTo(this._map),this.options.popup&&s.setPopup(n)):t.geometry&&t.geometry.type&&"Point"===t.geometry.type&&t.geometry.coordinates&&(s.setLngLat(t.geometry.coordinates).addTo(this._map),this.options.popup&&s.setPopup(n)),this.resultMarkers.push(s)}.bind(this)),this}},_removeResultMarkers:function(){this.resultMarkers&&this.resultMarkers.length>0&&(this.resultMarkers.forEach(function(t){t.remove()}),this.resultMarkers=[])},on:function(t,e){return this._eventEmitter.on(t,e),this},off:function(t,e){return this._eventEmitter.removeListener(t,e),this}},e.exports=n},{"./exceptions":1,"./localization":3,events:4,"lodash.debounce":6,subtag:7,"suggestions-list":8,xtend:11}],3:[function(t,e,i){"use strict";var n={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"",ja:"",lv:"Meklt",pt:"Procurar",sr:"",zh:"",cs:"Vyhledvn",hu:"Keress",ka:"",nb:"Ske",sk:"Vyhadvanie",th:"",fi:"Hae",is:"Leita",ko:"",pl:"Szukaj",sl:"Iskanje",fa:"",ru:""};e.exports={placeholder:n}},{}],4:[function(t,e,i){function n(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=w(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}function s(t){return void 0===t._maxListeners?n.defaultMaxListeners:t._maxListeners}function r(t,e,i){if(e)t.call(i);else for(var n=t.length,s=m(t,n),r=0;r<n;++r)s[r].call(i)}function o(t,e,i,n){if(e)t.call(i,n);else for(var s=t.length,r=m(t,s),o=0;o<s;++o)r[o].call(i,n)}function l(t,e,i,n,s){if(e)t.call(i,n,s);else for(var r=t.length,o=m(t,r),l=0;l<r;++l)o[l].call(i,n,s)}function a(t,e,i,n,s,r){if(e)t.call(i,n,s,r);else for(var o=t.length,l=m(t,o),a=0;a<o;++a)l[a].call(i,n,s,r)}function h(t,e,i,n){if(e)t.apply(i,n);else for(var s=t.length,r=m(t,s),o=0;o<s;++o)r[o].apply(i,n)}function u(t,e,i,n){var r,o,l;if("function"!=typeof i)throw new TypeError('"listener" argument must be a function');if(o=t._events,o?(o.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),o=t._events),l=o[e]):(o=t._events=w(null),t._eventsCount=0),l){if("function"==typeof l?l=o[e]=n?[i,l]:[l,i]:n?l.unshift(i):l.push(i),!l.warned&&(r=s(t))&&r>0&&l.length>r){l.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+l.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=l.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",a.name,a.message)}}else l=o[e]=i,++t._eventsCount;return t}function c(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];this.listener.apply(this.target,t)}}function p(t,e,i){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},s=E.call(c,n);return s.listener=i,n.wrapFn=s,s}function d(t,e,i){var n=t._events;if(!n)return[];var s=n[e];return s?"function"==typeof s?i?[s.listener||s]:[s]:i?v(s):m(s,s.length):[]}function f(t){var e=this._events;if(e){var i=e[t];if("function"==typeof i)return 1;if(i)return i.length}return 0}function g(t,e){for(var i=e,n=i+1,s=t.length;n<s;i+=1,n+=1)t[i]=t[n];t.pop()}function m(t,e){for(var i=new Array(e),n=0;n<e;++n)i[n]=t[n];return i}function v(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}function y(t){var e=function(){};return e.prototype=t,new e}function _(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return i}function b(t){var e=this;return function(){return e.apply(t,arguments)}}var w=Object.create||y,x=Object.keys||_,E=Function.prototype.bind||b;e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0;var L,k=10;try{var C={};Object.defineProperty&&Object.defineProperty(C,"x",{value:0}),L=0===C.x}catch(t){L=!1}L?Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return k},set:function(t){if("number"!=typeof t||t<0||t!==t)throw new TypeError('"defaultMaxListeners" must be a positive number');k=t}}):n.defaultMaxListeners=k,n.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},n.prototype.getMaxListeners=function(){return s(this)},n.prototype.emit=function(t){var e,i,n,s,u,c,p="error"===t;if(c=this._events)p=p&&null==c.error;else if(!p)return!1;if(p){if(arguments.length>1&&(e=arguments[1]),e instanceof Error)throw e;var d=new Error('Unhandled "error" event. ('+e+")");throw d.context=e,d}if(!(i=c[t]))return!1;var f="function"==typeof i;switch(n=arguments.length){case 1:r(i,f,this);break;case 2:o(i,f,this,arguments[1]);break;case 3:l(i,f,this,arguments[1],arguments[2]);break;case 4:a(i,f,this,arguments[1],arguments[2],arguments[3]);break;default:for(s=new Array(n-1),u=1;u<n;u++)s[u-1]=arguments[u];h(i,f,this,s)}return!0},n.prototype.addListener=function(t,e){return u(this,t,e,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(t,e){return u(this,t,e,!0)},n.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,p(this,t,e)),this},n.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,p(this,t,e)),this},n.prototype.removeListener=function(t,e){var i,n,s,r,o;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(i=n[t]))return this;if(i===e||i.listener===e)0==--this._eventsCount?this._events=w(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(s=-1,r=i.length-1;r>=0;r--)if(i[r]===e||i[r].listener===e){o=i[r].listener,s=r;break}if(s<0)return this;0===s?i.shift():g(i,s),1===i.length&&(n[t]=i[0]),n.removeListener&&this.emit("removeListener",t,o||e)}return this},n.prototype.removeAllListeners=function(t){var e,i,n;if(!(i=this._events))return this;if(!i.removeListener)return 0===arguments.length?(this._events=w(null),this._eventsCount=0):i[t]&&(0==--this._eventsCount?this._events=w(null):delete i[t]),this;if(0===arguments.length){var s,r=x(i);for(n=0;n<r.length;++n)"removeListener"!==(s=r[n])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=w(null),this._eventsCount=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},n.prototype.listeners=function(t){return d(this,t,!0)},n.prototype.rawListeners=function(t){return d(this,t,!1)},n.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):f.call(t,e)},n.prototype.listenerCount=f,n.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],5:[function(t,e,i){!function(){var t=this,n={};void 0!==i?e.exports=n:t.fuzzy=n,n.simpleFilter=function(t,e){return e.filter(function(e){return n.test(t,e)})},n.test=function(t,e){return null!==n.match(t,e)},n.match=function(t,e,i){i=i||{};var n,s=0,r=[],o=e.length,l=0,a=0,h=i.pre||"",u=i.post||"",c=i.caseSensitive&&e||e.toLowerCase();t=i.caseSensitive&&t||t.toLowerCase();for(var p=0;p<o;p++)n=e[p],c[p]===t[s]?(n=h+n+u,s+=1,a+=1+a):a=0,l+=a,r[r.length]=n;return s===t.length?(l=c===t?1/0:l,{rendered:r.join(""),score:l}):null},n.filter=function(t,e,i){return e&&0!==e.length?"string"!=typeof t?e:(i=i||{},e.reduce(function(e,s,r,o){var l=s;i.extract&&(l=i.extract(s));var a=n.match(t,l,i);return null!=a&&(e[e.length]={string:a.rendered,score:a.score,index:r,original:s}),e},[]).sort(function(t,e){var i=e.score-t.score;return i||t.index-e.index})):[]}}()},{}],6:[function(t,e,i){(function(t){(function(){function i(t,e,i){function s(e){var i=g,n=m;return g=m=void 0,L=e,y=t.apply(n,i)}function r(t){return L=t,_=setTimeout(u,e),k?s(t):y}function a(t){var i=t-E,n=t-L,s=e-i;return C?w(s,v-n):s}function h(t){var i=t-E,n=t-L;return void 0===E||i>=e||i<0||C&&n>=v}function u(){var t=x();if(h(t))return c(t);_=setTimeout(u,a(t))}function c(t){return _=void 0,M&&g?s(t):(g=m=void 0,y)}function p(){void 0!==_&&clearTimeout(_),L=0,g=E=m=_=void 0}function d(){return void 0===_?y:c(x())}function f(){var t=x(),i=h(t);if(g=arguments,m=this,E=t,i){if(void 0===_)return r(E);if(C)return _=setTimeout(u,e),s(E)}return void 0===_&&(_=setTimeout(u,e)),y}var g,m,v,y,_,E,L=0,k=!1,C=!1,M=!0;if("function"!=typeof t)throw new TypeError(l);return e=o(e)||0,n(i)&&(k=!!i.leading,C="maxWait"in i,v=C?b(o(i.maxWait)||0,e):v,M="trailing"in i?!!i.trailing:M),f.cancel=p,f.flush=d,f}function n(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function s(t){return!!t&&"object"==typeof t}function r(t){return"symbol"==typeof t||s(t)&&_.call(t)==h}function o(t){if("number"==typeof t)return t;if(r(t))return a;if(n(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=n(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(u,"");var i=p.test(t);return i||d.test(t)?f(t.slice(2),i?2:8):c.test(t)?a:+t}var l="Expected a function",a=NaN,h="[object Symbol]",u=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,d=/^0o[0-7]+$/i,f=parseInt,g="object"==typeof t&&t&&t.Object===Object&&t,m="object"==typeof self&&self&&self.Object===Object&&self,v=g||m||Function("return this")(),y=Object.prototype,_=y.toString,b=Math.max,w=Math.min,x=function(){return v.Date.now()};e.exports=i}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(t,e,i){!function(t,i,n){void 0!==e&&e.exports?e.exports=n():t.subtag=n()}(this,0,function(){function t(t){return t.match(o)||[]}function e(e){return t(e).filter(function(t,e){return t&&e})}function i(e){return e=t(e),{language:e[1]||r,extlang:e[2]||r,script:e[3]||r,region:e[4]||r}}function n(t,e,i){Object.defineProperty(t,e,{value:i,enumerable:!0})}function s(e,s,o){function l(i){return t(i)[e]||r}n(l,"pattern",s),n(i,o,l)}var r="",o=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;return s(1,/^[a-zA-Z]{2,3}$/,"language"),s(2,/^[a-zA-Z]{3}$/,"extlang"),s(3,/^[a-zA-Z]{4}$/,"script"),s(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),n(i,"split",e),i})},{}],8:[function(t,e,i){"use strict";var n=t("./src/suggestions");e.exports=n,"undefined"!=typeof window&&(window.Suggestions=n)},{"./src/suggestions":10}],9:[function(t,e,i){"use strict";var n=function(t){return this.component=t,this.items=[],this.active=t.options.noInitialSelection?-1:0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,t.el.parentNode.insertBefore(this.wrapper,t.el.nextSibling),this};n.prototype.show=function(){this.element.style.display="block"},n.prototype.hide=function(){this.element.style.display="none"},n.prototype.add=function(t){this.items.push(t)},n.prototype.clear=function(){this.items=[],this.active=this.component.options.noInitialSelection?-1:0},n.prototype.isEmpty=function(){return!this.items.length},n.prototype.isVisible=function(){return"block"===this.element.style.display},n.prototype.draw=function(){if(this.element.innerHTML="",
0===this.items.length)return void this.hide();for(var t=0;t<this.items.length;t++)this.drawItem(this.items[t],this.active===t);this.show()},n.prototype.drawItem=function(t,e){var i=document.createElement("li"),n=document.createElement("a");e&&(i.className+=" active"),n.innerHTML=t.string,i.appendChild(n),this.element.appendChild(i),i.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),i.addEventListener("mouseup",function(){this.handleMouseUp.call(this,t)}.bind(this))},n.prototype.handleMouseUp=function(t){this.selectingListItem=!1,this.component.value(t.original),this.clear(),this.draw()},n.prototype.move=function(t){this.active=t,this.draw()},n.prototype.previous=function(){this.move(this.active<=0?this.items.length-1:this.active-1)},n.prototype.next=function(){this.move(this.active>=this.items.length-1?0:this.active+1)},n.prototype.drawError=function(t){var e=document.createElement("li");e.innerHTML=t,this.element.appendChild(e),this.show()},e.exports=n},{}],10:[function(t,e,i){"use strict";var n=t("xtend"),s=t("fuzzy"),r=t("./list"),o=function(t,e,i){return i=i||{},this.options=n({minLength:2,limit:5,filter:!0,hideOnBlur:!0,noInitialSelection:!0},i),this.el=t,this.data=e||[],this.list=new r(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(t){this.handleKeyUp(t.keyCode,t)}.bind(this),!1),this.el.addEventListener("keydown",function(t){this.handleKeyDown(t)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function(t){this.handlePaste(t)}.bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};o.prototype.handleKeyUp=function(t,e){if(40!==t&&38!==t&&27!==t&&9!==t)return 13===t?void(this.list.items[this.list.active]&&(this.list.handleMouseUp(this.list.items[this.list.active]),e.stopPropagation())):void this.handleInputChange(this.el.value)},o.prototype.handleKeyDown=function(t){switch(t.keyCode){case 13:this.list.active>=0&&(this.list.selectingListItem=!0);break;case 9:this.list.isEmpty()||(this.list.isVisible()&&t.preventDefault(),this.value(this.list.active>=0?this.list.items[this.list.active].original:null),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next()}},o.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},o.prototype.handlePaste=function(t){if(t.clipboardData)this.handleInputChange(t.clipboardData.getData("Text"));else{var e=this;setTimeout(function(){e.handleInputChange(t.target.value)},100)}},o.prototype.handleInputChange=function(t){if(this.query=this.normalize(t),this.list.clear(),this.query.length<this.options.minLength)return void this.list.draw();this.getCandidates(function(t){for(var e=0;e<t.length&&(this.list.add(t[e]),e!==this.options.limit-1);e++);this.list.draw()}.bind(this))},o.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},o.prototype.update=function(t){this.data=t,this.handleKeyUp()},o.prototype.clear=function(){this.data=[],this.list.clear()},o.prototype.normalize=function(t){return t=t.toLowerCase()},o.prototype.match=function(t,e){return t.indexOf(e)>-1},o.prototype.value=function(t){if(this.selected=t,this.el.value=this.getItemValue(t||{place_name:this.query}),document.createEvent){var e=document.createEvent("HTMLEvents");e.initEvent("change",!0,!1),this.el.dispatchEvent(e)}else this.el.fireEvent("onchange")},o.prototype.getCandidates=function(t){var e,i={pre:"<strong>",post:"</strong>",extract:function(t){return this.getItemValue(t)}.bind(this)};this.options.filter?(e=s.filter(this.query,this.data,i),e=e.map(function(t){return{original:t.original,string:this.render(t.original,t.string)}}.bind(this))):e=this.data.map(function(t){return{original:t,string:this.render(t)}}.bind(this)),t(e)},o.prototype.getItemValue=function(t){return t},o.prototype.render=function(t,e){if(e)return e;for(var i=t.original?this.getItemValue(t.original):this.getItemValue(t),n=this.normalize(i),s=n.lastIndexOf(this.query);s>-1;){var r=s+this.query.length;i=i.slice(0,s)+"<strong>"+i.slice(s,r)+"</strong>"+i.slice(r),s=n.slice(0,s).lastIndexOf(this.query)}return i},o.prototype.renderError=function(t){this.list.drawError(t)},e.exports=o},{"./list":9,fuzzy:5,xtend:11}],11:[function(t,e,i){function n(){for(var t={},e=0;e<arguments.length;e++){var i=arguments[e];for(var n in i)s.call(i,n)&&(t[n]=i[n])}return t}e.exports=n;var s=Object.prototype.hasOwnProperty},{}]},{},[2])(2)});
</script>
<script>var MapboxGLGlobeMinimap=function(){"use strict";class t{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let e=0;for(let r=0;r<this._n&&r<32;r++){const i=n[r],o=t+i,u=Math.abs(t)<Math.abs(i)?t-(o-i):i-(o-t);u&&(n[e++]=u),t=o}return n[e]=t,this._n=e+1,this}valueOf(){const t=this._partials;let n,e,r,i=this._n,o=0;if(i>0){for(o=t[--i];i>0&&(n=o,e=t[--i],o=n+e,r=e-(o-n),!r););i>0&&(r<0&&t[i-1]<0||r>0&&t[i-1]>0)&&(e=2*r,n=o+e,e==n-o&&(o=n))}return o}}function n(t){return Array.from(function*(t){for(const n of t)yield*n}(t))}var e={value:()=>{}};function r(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new i(r)}function i(t){this._=t}function o(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}function u(t,n,r){for(var i=0,o=t.length;i<o;++i)if(t[i].name===n){t[i]=e,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=r&&t.push({name:n,value:r}),t}i.prototype=r.prototype={constructor:i,on:function(t,n){var e,r,i=this._,a=(r=i,(t+"").trim().split(/^|\s+/).map((function(t){var n="",e=t.indexOf(".");if(e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))),l=-1,s=a.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++l<s;)if(e=(t=a[l]).type)i[e]=u(i[e],t.name,n);else if(null==n)for(e in i)i[e]=u(i[e],t.name,null);return this}for(;++l<s;)if((e=(t=a[l]).type)&&(e=o(i[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new i(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,e=(r=this._[t]).length;o<e;++o)r[o].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};var a="http://www.w3.org/1999/xhtml",l={svg:"http://www.w3.org/2000/svg",xhtml:a,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function s(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),l.hasOwnProperty(n)?{space:l[n],local:t}:t}function c(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===a&&n.documentElement.namespaceURI===a?n.createElement(t):n.createElementNS(e,t)}}function f(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function h(t){var n=s(t);return(n.local?f:c)(n)}function p(){}function d(t){return null==t?p:function(){return this.querySelector(t)}}function v(){return[]}function g(t){return null==t?v:function(){return this.querySelectorAll(t)}}function y(t){return function(){return null==(n=t.apply(this,arguments))?[]:Array.isArray(n)?n:Array.from(n);var n}}function _(t){return function(){return this.matches(t)}}function m(t){return function(n){return n.matches(t)}}var w=Array.prototype.find;function b(){return this.firstElementChild}var x=Array.prototype.filter;function E(){return Array.from(this.children)}function S(t){return new Array(t.length)}function N(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}function k(t,n,e,r,i,o){for(var u,a=0,l=n.length,s=o.length;a<s;++a)(u=n[a])?(u.__data__=o[a],r[a]=u):e[a]=new N(t,o[a]);for(;a<l;++a)(u=n[a])&&(i[a]=u)}function M(t,n,e,r,i,o,u){var a,l,s,c=new Map,f=n.length,h=o.length,p=new Array(f);for(a=0;a<f;++a)(l=n[a])&&(p[a]=s=u.call(l,l.__data__,a,n)+"",c.has(s)?i[a]=l:c.set(s,l));for(a=0;a<h;++a)s=u.call(t,o[a],a,o)+"",(l=c.get(s))?(r[a]=l,l.__data__=o[a],c.delete(s)):e[a]=new N(t,o[a]);for(a=0;a<f;++a)(l=n[a])&&c.get(p[a])===l&&(i[a]=l)}function A(t){return t.__data__}function $(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function C(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function P(t){return function(){this.removeAttribute(t)}}function j(t){return function(){this.removeAttributeNS(t.space,t.local)}}function R(t,n){return function(){this.setAttribute(t,n)}}function T(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function q(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}function O(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function L(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function X(t){return function(){this.style.removeProperty(t)}}function z(t,n,e){return function(){this.style.setProperty(t,n,e)}}function D(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function H(t,n){return t.style.getPropertyValue(n)||L(t).getComputedStyle(t,null).getPropertyValue(n)}function I(t){return function(){delete this[t]}}function Y(t,n){return function(){this[t]=n}}function B(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}function F(t){return t.trim().split(/^|\s+/)}function V(t){return t.classList||new G(t)}function G(t){this._node=t,this._names=F(t.getAttribute("class")||"")}function U(t,n){for(var e=V(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function Z(t,n){for(var e=V(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function W(t){return function(){U(this,t)}}function K(t){return function(){Z(this,t)}}function J(t,n){return function(){(n.apply(this,arguments)?U:Z)(this,t)}}function Q(){this.textContent=""}function tt(t){return function(){this.textContent=t}}function nt(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}function et(){this.innerHTML=""}function rt(t){return function(){this.innerHTML=t}}function it(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}function ot(){this.nextSibling&&this.parentNode.appendChild(this)}function ut(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function at(){return null}function lt(){var t=this.parentNode;t&&t.removeChild(this)}function st(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function ct(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function ft(t){return function(){var n=this.__on;if(n){for(var e,r=0,i=-1,o=n.length;r<o;++r)e=n[r],t.type&&e.type!==t.type||e.name!==t.name?n[++i]=e:this.removeEventListener(e.type,e.listener,e.options);++i?n.length=i:delete this.__on}}}function ht(t,n,e){return function(){var r,i=this.__on,o=function(t){return function(n){t.call(this,n,this.__data__)}}(n);if(i)for(var u=0,a=i.length;u<a;++u)if((r=i[u]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=e),void(r.value=n);this.addEventListener(t.type,o,e),r={type:t.type,name:t.name,value:n,listener:o,options:e},i?i.push(r):this.__on=[r]}}function pt(t,n,e){var r=L(t),i=r.CustomEvent;"function"==typeof i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function dt(t,n){return function(){return pt(this,t,n)}}function vt(t,n){return function(){return pt(this,t,n.apply(this,arguments))}}N.prototype={constructor:N,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},G.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var gt=[null];function yt(t,n){this._groups=t,this._parents=n}function _t(){return new yt([[document.documentElement]],gt)}function mt(t){return"string"==typeof t?new yt([[document.querySelector(t)]],[document.documentElement]):new yt([[t]],gt)}function wt(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function bt(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function xt(){}yt.prototype=_t.prototype={constructor:yt,select:function(t){"function"!=typeof t&&(t=d(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,u,a=n[i],l=a.length,s=r[i]=new Array(l),c=0;c<l;++c)(o=a[c])&&(u=t.call(o,o.__data__,c,a))&&("__data__"in o&&(u.__data__=o.__data__),s[c]=u);return new yt(r,this._parents)},selectAll:function(t){t="function"==typeof t?y(t):g(t);for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var u,a=n[o],l=a.length,s=0;s<l;++s)(u=a[s])&&(r.push(t.call(u,u.__data__,s,a)),i.push(u));return new yt(r,i)},selectChild:function(t){return this.select(null==t?b:function(t){return function(){return w.call(this.children,t)}}("function"==typeof t?t:m(t)))},selectChildren:function(t){return this.selectAll(null==t?E:function(t){return function(){return x.call(this.children,t)}}("function"==typeof t?t:m(t)))},filter:function(t){"function"!=typeof t&&(t=_(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,u=n[i],a=u.length,l=r[i]=[],s=0;s<a;++s)(o=u[s])&&t.call(o,o.__data__,s,u)&&l.push(o);return new yt(r,this._parents)},data:function(t,n){if(!arguments.length)return Array.from(this,A);var e,r=n?M:k,i=this._parents,o=this._groups;"function"!=typeof t&&(e=t,t=function(){return e});for(var u=o.length,a=new Array(u),l=new Array(u),s=new Array(u),c=0;c<u;++c){var f=i[c],h=o[c],p=h.length,d=$(t.call(f,f&&f.__data__,c,i)),v=d.length,g=l[c]=new Array(v),y=a[c]=new Array(v);r(f,h,g,y,s[c]=new Array(p),d,n);for(var _,m,w=0,b=0;w<v;++w)if(_=g[w]){for(w>=b&&(b=w+1);!(m=y[b])&&++b<v;);_._next=m||null}}return(a=new yt(a,i))._enter=l,a._exit=s,a},enter:function(){return new yt(this._enter||this._groups.map(S),this._parents)},exit:function(){return new yt(this._exit||this._groups.map(S),this._parents)},join:function(t,n,e){var r=this.enter(),i=this,o=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=n&&(i=n(i))&&(i=i.selection()),null==e?o.remove():e(o),r&&i?r.merge(i).order():i},merge:function(t){for(var n=t.selection?t.selection():t,e=this._groups,r=n._groups,i=e.length,o=r.length,u=Math.min(i,o),a=new Array(i),l=0;l<u;++l)for(var s,c=e[l],f=r[l],h=c.length,p=a[l]=new Array(h),d=0;d<h;++d)(s=c[d]||f[d])&&(p[d]=s);for(;l<i;++l)a[l]=e[l];return new yt(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],o=i.length-1,u=i[o];--o>=0;)(r=i[o])&&(u&&4^r.compareDocumentPosition(u)&&u.parentNode.insertBefore(r,u),u=r);return this},sort:function(t){function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}t||(t=C);for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var u,a=e[o],l=a.length,s=i[o]=new Array(l),c=0;c<l;++c)(u=a[c])&&(s[c]=u);s.sort(n)}return new yt(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var u=r[i];if(u)return u}return null},size:function(){let t=0;for(const n of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,o=n[e],u=0,a=o.length;u<a;++u)(i=o[u])&&t.call(i,i.__data__,u,o);return this},attr:function(t,n){var e=s(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?j:P:"function"==typeof n?e.local?O:q:e.local?T:R)(e,n))},style:function(t,n,e){return arguments.length>1?this.each((null==n?X:"function"==typeof n?D:z)(t,n,null==e?"":e)):H(this.node(),t)},property:function(t,n){return arguments.length>1?this.each((null==n?I:"function"==typeof n?B:Y)(t,n)):this.node()[t]},classed:function(t,n){var e=F(t+"");if(arguments.length<2){for(var r=V(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?J:n?W:K)(e,n))},text:function(t){return arguments.length?this.each(null==t?Q:("function"==typeof t?nt:tt)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?et:("function"==typeof t?it:rt)(t)):this.node().innerHTML},raise:function(){return this.each(ot)},lower:function(){return this.each(ut)},append:function(t){var n="function"==typeof t?t:h(t);return this.select((function(){return this.appendChild(n.apply(this,arguments))}))},insert:function(t,n){var e="function"==typeof t?t:h(t),r=null==n?at:"function"==typeof n?n:d(n);return this.select((function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(lt)},clone:function(t){return this.select(t?ct:st)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,n,e){var r,i,o=function(t){return t.trim().split(/^|\s+/).map((function(t){var n="",e=t.indexOf(".");return e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}}))}(t+""),u=o.length;if(!(arguments.length<2)){for(a=n?ht:ft,r=0;r<u;++r)this.each(a(o[r],n,e));return this}var a=this.node().__on;if(a)for(var l,s=0,c=a.length;s<c;++s)for(r=0,l=a[s];r<u;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(t,n){return this.each(("function"==typeof n?vt:dt)(t,n))},[Symbol.iterator]:function*(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r,i=t[n],o=0,u=i.length;o<u;++o)(r=i[o])&&(yield r)}};var Et=.7,St=1/Et,Nt="\\s*([+-]?\\d+)\\s*",kt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Mt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",At=/^#([0-9a-f]{3,8})$/,$t=new RegExp(`^rgb\\(${Nt},${Nt},${Nt}\\)$`),Ct=new RegExp(`^rgb\\(${Mt},${Mt},${Mt}\\)$`),Pt=new RegExp(`^rgba\\(${Nt},${Nt},${Nt},${kt}\\)$`),jt=new RegExp(`^rgba\\(${Mt},${Mt},${Mt},${kt}\\)$`),Rt=new RegExp(`^hsl\\(${kt},${Mt},${Mt}\\)$`),Tt=new RegExp(`^hsla\\(${kt},${Mt},${Mt},${kt}\\)$`),qt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ot(){return this.rgb().formatHex()}function Lt(){return this.rgb().formatRgb()}function Xt(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=At.exec(t))?(e=n[1].length,n=parseInt(n[1],16),6===e?zt(n):3===e?new It(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===e?Dt(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===e?Dt(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=$t.exec(t))?new It(n[1],n[2],n[3],1):(n=Ct.exec(t))?new It(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=Pt.exec(t))?Dt(n[1],n[2],n[3],n[4]):(n=jt.exec(t))?Dt(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=Rt.exec(t))?Ut(n[1],n[2]/100,n[3]/100,1):(n=Tt.exec(t))?Ut(n[1],n[2]/100,n[3]/100,n[4]):qt.hasOwnProperty(t)?zt(qt[t]):"transparent"===t?new It(NaN,NaN,NaN,0):null}function zt(t){return new It(t>>16&255,t>>8&255,255&t,1)}function Dt(t,n,e,r){return r<=0&&(t=n=e=NaN),new It(t,n,e,r)}function Ht(t,n,e,r){return 1===arguments.length?((i=t)instanceof xt||(i=Xt(i)),i?new It((i=i.rgb()).r,i.g,i.b,i.opacity):new It):new It(t,n,e,null==r?1:r);var i}function It(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function Yt(){return`#${Gt(this.r)}${Gt(this.g)}${Gt(this.b)}`}function Bt(){const t=Ft(this.opacity);return`${1===t?"rgb(":"rgba("}${Vt(this.r)}, ${Vt(this.g)}, ${Vt(this.b)}${1===t?")":`, ${t})`}`}function Ft(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Vt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Gt(t){return((t=Vt(t))<16?"0":"")+t.toString(16)}function Ut(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new Wt(t,n,e,r)}function Zt(t){if(t instanceof Wt)return new Wt(t.h,t.s,t.l,t.opacity);if(t instanceof xt||(t=Xt(t)),!t)return new Wt;if(t instanceof Wt)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),u=NaN,a=o-i,l=(o+i)/2;return a?(u=n===o?(e-r)/a+6*(e<r):e===o?(r-n)/a+2:(n-e)/a+4,a/=l<.5?o+i:2-o-i,u*=60):a=l>0&&l<1?0:u,new Wt(u,a,l,t.opacity)}function Wt(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function Kt(t){return(t=(t||0)%360)<0?t+360:t}function Jt(t){return Math.max(0,Math.min(1,t||0))}function Qt(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}wt(xt,Xt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ot,formatHex:Ot,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Zt(this).formatHsl()},formatRgb:Lt,toString:Lt}),wt(It,Ht,bt(xt,{brighter(t){return t=null==t?St:Math.pow(St,t),new It(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?Et:Math.pow(Et,t),new It(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new It(Vt(this.r),Vt(this.g),Vt(this.b),Ft(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Yt,formatHex:Yt,formatHex8:function(){return`#${Gt(this.r)}${Gt(this.g)}${Gt(this.b)}${Gt(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Bt,toString:Bt})),wt(Wt,(function(t,n,e,r){return 1===arguments.length?Zt(t):new Wt(t,n,e,null==r?1:r)}),bt(xt,{brighter(t){return t=null==t?St:Math.pow(St,t),new Wt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Et:Math.pow(Et,t),new Wt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new It(Qt(t>=240?t-240:t+120,i,r),Qt(t,i,r),Qt(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Wt(Kt(this.h),Jt(this.s),Jt(this.l),Ft(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ft(this.opacity);return`${1===t?"hsl(":"hsla("}${Kt(this.h)}, ${100*Jt(this.s)}%, ${100*Jt(this.l)}%${1===t?")":`, ${t})`}`}}));var tn=t=>()=>t;function nn(t){return 1==(t=+t)?en:function(n,e){return e-n?function(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}(n,e,t):tn(isNaN(n)?e:n)}}function en(t,n){var e=n-t;return e?function(t,n){return function(e){return t+e*n}}(t,e):tn(isNaN(t)?n:t)}var rn=function t(n){var e=nn(n);function r(t,n){var r=e((t=Ht(t)).r,(n=Ht(n)).r),i=e(t.g,n.g),o=e(t.b,n.b),u=en(t.opacity,n.opacity);return function(n){return t.r=r(n),t.g=i(n),t.b=o(n),t.opacity=u(n),t+""}}return r.gamma=t,r}(1);function on(t,n){n||(n=[]);var e,r=t?Math.min(n.length,t.length):0,i=n.slice();return function(o){for(e=0;e<r;++e)i[e]=t[e]*(1-o)+n[e]*o;return i}}function un(t,n){var e,r=n?n.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),u=new Array(r);for(e=0;e<i;++e)o[e]=pn(t[e],n[e]);for(;e<r;++e)u[e]=n[e];return function(t){for(e=0;e<i;++e)u[e]=o[e](t);return u}}function an(t,n){var e=new Date;return t=+t,n=+n,function(r){return e.setTime(t*(1-r)+n*r),e}}function ln(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function sn(t,n){var e,r={},i={};for(e in null!==t&&"object"==typeof t||(t={}),null!==n&&"object"==typeof n||(n={}),n)e in t?r[e]=pn(t[e],n[e]):i[e]=n[e];return function(t){for(e in r)i[e]=r[e](t);return i}}var cn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fn=new RegExp(cn.source,"g");function hn(t,n){var e,r,i,o=cn.lastIndex=fn.lastIndex=0,u=-1,a=[],l=[];for(t+="",n+="";(e=cn.exec(t))&&(r=fn.exec(n));)(i=r.index)>o&&(i=n.slice(o,i),a[u]?a[u]+=i:a[++u]=i),(e=e[0])===(r=r[0])?a[u]?a[u]+=r:a[++u]=r:(a[++u]=null,l.push({i:u,x:ln(e,r)})),o=fn.lastIndex;return o<n.length&&(i=n.slice(o),a[u]?a[u]+=i:a[++u]=i),a.length<2?l[0]?function(t){return function(n){return t(n)+""}}(l[0].x):function(t){return function(){return t}}(n):(n=l.length,function(t){for(var e,r=0;r<n;++r)a[(e=l[r]).i]=e.x(t);return a.join("")})}function pn(t,n){var e,r,i=typeof n;return null==n||"boolean"===i?tn(n):("number"===i?ln:"string"===i?(e=Xt(n))?(n=e,rn):hn:n instanceof Xt?rn:n instanceof Date?an:(r=n,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(n)?un:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?sn:ln:on))(t,n)}var dn,vn=180/Math.PI,gn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function yn(t,n,e,r,i,o){var u,a,l;return(u=Math.sqrt(t*t+n*n))&&(t/=u,n/=u),(l=t*e+n*r)&&(e-=t*l,r-=n*l),(a=Math.sqrt(e*e+r*r))&&(e/=a,r/=a,l/=a),t*r<n*e&&(t=-t,n=-n,l=-l,u=-u),{translateX:i,translateY:o,rotate:Math.atan2(n,t)*vn,skewX:Math.atan(l)*vn,scaleX:u,scaleY:a}}function _n(t,n,e,r){function i(t){return t.length?t.pop()+" ":""}return function(o,u){var a=[],l=[];return o=t(o),u=t(u),function(t,r,i,o,u,a){if(t!==i||r!==o){var l=u.push("translate(",null,n,null,e);a.push({i:l-4,x:ln(t,i)},{i:l-2,x:ln(r,o)})}else(i||o)&&u.push("translate("+i+n+o+e)}(o.translateX,o.translateY,u.translateX,u.translateY,a,l),function(t,n,e,o){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),o.push({i:e.push(i(e)+"rotate(",null,r)-2,x:ln(t,n)})):n&&e.push(i(e)+"rotate("+n+r)}(o.rotate,u.rotate,a,l),function(t,n,e,o){t!==n?o.push({i:e.push(i(e)+"skewX(",null,r)-2,x:ln(t,n)}):n&&e.push(i(e)+"skewX("+n+r)}(o.skewX,u.skewX,a,l),function(t,n,e,r,o,u){if(t!==e||n!==r){var a=o.push(i(o)+"scale(",null,",",null,")");u.push({i:a-4,x:ln(t,e)},{i:a-2,x:ln(n,r)})}else 1===e&&1===r||o.push(i(o)+"scale("+e+","+r+")")}(o.scaleX,o.scaleY,u.scaleX,u.scaleY,a,l),o=u=null,function(t){for(var n,e=-1,r=l.length;++e<r;)a[(n=l[e]).i]=n.x(t);return a.join("")}}}var mn,wn,bn=_n((function(t){const n=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?gn:yn(n.a,n.b,n.c,n.d,n.e,n.f)}),"px, ","px)","deg)"),xn=_n((function(t){return null==t?gn:(dn||(dn=document.createElementNS("http://www.w3.org/2000/svg","g")),dn.setAttribute("transform",t),(t=dn.transform.baseVal.consolidate())?yn((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):gn)}),", ",")",")"),En=0,Sn=0,Nn=0,kn=1e3,Mn=0,An=0,$n=0,Cn="object"==typeof performance&&performance.now?performance:Date,Pn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function jn(){return An||(Pn(Rn),An=Cn.now()+$n)}function Rn(){An=0}function Tn(){this._call=this._time=this._next=null}function qn(t,n,e){var r=new Tn;return r.restart(t,n,e),r}function On(){An=(Mn=Cn.now())+$n,En=Sn=0;try{!function(){jn(),++En;for(var t,n=mn;n;)(t=An-n._time)>=0&&n._call.call(void 0,t),n=n._next;--En}()}finally{En=0,function(){var t,n,e=mn,r=1/0;for(;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:mn=n);wn=t,Xn(r)}(),An=0}}function Ln(){var t=Cn.now(),n=t-Mn;n>kn&&($n-=n,Mn=t)}function Xn(t){En||(Sn&&(Sn=clearTimeout(Sn)),t-An>24?(t<1/0&&(Sn=setTimeout(On,t-Cn.now()-$n)),Nn&&(Nn=clearInterval(Nn))):(Nn||(Mn=Cn.now(),Nn=setInterval(Ln,kn)),En=1,Pn(On)))}function zn(t,n,e){var r=new Tn;return n=null==n?0:+n,r.restart((e=>{r.stop(),t(e+n)}),n,e),r}Tn.prototype=qn.prototype={constructor:Tn,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?jn():+e)+(null==n?0:+n),this._next||wn===this||(wn?wn._next=this:mn=this,wn=this),this._call=t,this._time=e,Xn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Xn())}};var Dn=r("start","end","cancel","interrupt"),Hn=[],In=0,Yn=1,Bn=2,Fn=3,Vn=4,Gn=5,Un=6;function Zn(t,n,e,r,i,o){var u=t.__transition;if(u){if(e in u)return}else t.__transition={};!function(t,n,e){var r,i=t.__transition;function o(t){e.state=Yn,e.timer.restart(u,e.delay,e.time),e.delay<=t&&u(t-e.delay)}function u(o){var s,c,f,h;if(e.state!==Yn)return l();for(s in i)if((h=i[s]).name===e.name){if(h.state===Fn)return zn(u);h.state===Vn?(h.state=Un,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[s]):+s<n&&(h.state=Un,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[s])}if(zn((function(){e.state===Fn&&(e.state=Vn,e.timer.restart(a,e.delay,e.time),a(o))})),e.state=Bn,e.on.call("start",t,t.__data__,e.index,e.group),e.state===Bn){for(e.state=Fn,r=new Array(f=e.tween.length),s=0,c=-1;s<f;++s)(h=e.tween[s].value.call(t,t.__data__,e.index,e.group))&&(r[++c]=h);r.length=c+1}}function a(n){for(var i=n<e.duration?e.ease.call(null,n/e.duration):(e.timer.restart(l),e.state=Gn,1),o=-1,u=r.length;++o<u;)r[o].call(t,i);e.state===Gn&&(e.on.call("end",t,t.__data__,e.index,e.group),l())}function l(){for(var r in e.state=Un,e.timer.stop(),delete i[n],i)return;delete t.__transition}i[n]=e,e.timer=qn(o,0,e.time)}(t,e,{name:n,index:r,group:i,on:Dn,tween:Hn,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:In})}function Wn(t,n){var e=Jn(t,n);if(e.state>In)throw new Error("too late; already scheduled");return e}function Kn(t,n){var e=Jn(t,n);if(e.state>Fn)throw new Error("too late; already running");return e}function Jn(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function Qn(t,n){var e,r;return function(){var i=Kn(this,t),o=i.tween;if(o!==e)for(var u=0,a=(r=e=o).length;u<a;++u)if(r[u].name===n){(r=r.slice()).splice(u,1);break}i.tween=r}}function te(t,n,e){var r,i;if("function"!=typeof e)throw new Error;return function(){var o=Kn(this,t),u=o.tween;if(u!==r){i=(r=u).slice();for(var a={name:n,value:e},l=0,s=i.length;l<s;++l)if(i[l].name===n){i[l]=a;break}l===s&&i.push(a)}o.tween=i}}function ne(t,n,e){var r=t._id;return t.each((function(){var t=Kn(this,r);(t.value||(t.value={}))[n]=e.apply(this,arguments)})),function(t){return Jn(t,r).value[n]}}function ee(t,n){var e;return("number"==typeof n?ln:n instanceof Xt?rn:(e=Xt(n))?(n=e,rn):hn)(t,n)}function re(t){return function(){this.removeAttribute(t)}}function ie(t){return function(){this.removeAttributeNS(t.space,t.local)}}function oe(t,n,e){var r,i,o=e+"";return function(){var u=this.getAttribute(t);return u===o?null:u===r?i:i=n(r=u,e)}}function ue(t,n,e){var r,i,o=e+"";return function(){var u=this.getAttributeNS(t.space,t.local);return u===o?null:u===r?i:i=n(r=u,e)}}function ae(t,n,e){var r,i,o;return function(){var u,a,l=e(this);if(null!=l)return(u=this.getAttribute(t))===(a=l+"")?null:u===r&&a===i?o:(i=a,o=n(r=u,l));this.removeAttribute(t)}}function le(t,n,e){var r,i,o;return function(){var u,a,l=e(this);if(null!=l)return(u=this.getAttributeNS(t.space,t.local))===(a=l+"")?null:u===r&&a===i?o:(i=a,o=n(r=u,l));this.removeAttributeNS(t.space,t.local)}}function se(t,n){var e,r;function i(){var i=n.apply(this,arguments);return i!==r&&(e=(r=i)&&function(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}(t,i)),e}return i._value=n,i}function ce(t,n){var e,r;function i(){var i=n.apply(this,arguments);return i!==r&&(e=(r=i)&&function(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}(t,i)),e}return i._value=n,i}function fe(t,n){return function(){Wn(this,t).delay=+n.apply(this,arguments)}}function he(t,n){return n=+n,function(){Wn(this,t).delay=n}}function pe(t,n){return function(){Kn(this,t).duration=+n.apply(this,arguments)}}function de(t,n){return n=+n,function(){Kn(this,t).duration=n}}var ve=_t.prototype.constructor;function ge(t){return function(){this.style.removeProperty(t)}}var ye=0;function _e(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function me(t){return _t().transition(t)}function we(){return++ye}var be=_t.prototype;_e.prototype=me.prototype={constructor:_e,select:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=d(t));for(var r=this._groups,i=r.length,o=new Array(i),u=0;u<i;++u)for(var a,l,s=r[u],c=s.length,f=o[u]=new Array(c),h=0;h<c;++h)(a=s[h])&&(l=t.call(a,a.__data__,h,s))&&("__data__"in a&&(l.__data__=a.__data__),f[h]=l,Zn(f[h],n,e,h,f,Jn(a,e)));return new _e(o,this._parents,n,e)},selectAll:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=g(t));for(var r=this._groups,i=r.length,o=[],u=[],a=0;a<i;++a)for(var l,s=r[a],c=s.length,f=0;f<c;++f)if(l=s[f]){for(var h,p=t.call(l,l.__data__,f,s),d=Jn(l,e),v=0,y=p.length;v<y;++v)(h=p[v])&&Zn(h,n,e,v,p,d);o.push(p),u.push(l)}return new _e(o,u,n,e)},selectChild:be.selectChild,selectChildren:be.selectChildren,filter:function(t){"function"!=typeof t&&(t=_(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,u=n[i],a=u.length,l=r[i]=[],s=0;s<a;++s)(o=u[s])&&t.call(o,o.__data__,s,u)&&l.push(o);return new _e(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),u=new Array(r),a=0;a<o;++a)for(var l,s=n[a],c=e[a],f=s.length,h=u[a]=new Array(f),p=0;p<f;++p)(l=s[p]||c[p])&&(h[p]=l);for(;a<r;++a)u[a]=n[a];return new _e(u,this._parents,this._name,this._id)},selection:function(){return new ve(this._groups,this._parents)},transition:function(){for(var t=this._name,n=this._id,e=we(),r=this._groups,i=r.length,o=0;o<i;++o)for(var u,a=r[o],l=a.length,s=0;s<l;++s)if(u=a[s]){var c=Jn(u,n);Zn(u,t,e,s,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new _e(r,this._parents,t,e)},call:be.call,nodes:be.nodes,node:be.node,size:be.size,empty:be.empty,each:be.each,on:function(t,n){var e=this._id;return arguments.length<2?Jn(this.node(),e).on.on(t):this.each(function(t,n,e){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||"start"===t}))}(n)?Wn:Kn;return function(){var u=o(this,t),a=u.on;a!==r&&(i=(r=a).copy()).on(n,e),u.on=i}}(e,t,n))},attr:function(t,n){var e=s(t),r="transform"===e?xn:ee;return this.attrTween(t,"function"==typeof n?(e.local?le:ae)(e,r,ne(this,"attr."+t,n)):null==n?(e.local?ie:re)(e):(e.local?ue:oe)(e,r,n))},attrTween:function(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!=typeof n)throw new Error;var r=s(t);return this.tween(e,(r.local?se:ce)(r,n))},style:function(t,n,e){var r="transform"==(t+="")?bn:ee;return null==n?this.styleTween(t,function(t,n){var e,r,i;return function(){var o=H(this,t),u=(this.style.removeProperty(t),H(this,t));return o===u?null:o===e&&u===r?i:i=n(e=o,r=u)}}(t,r)).on("end.style."+t,ge(t)):"function"==typeof n?this.styleTween(t,function(t,n,e){var r,i,o;return function(){var u=H(this,t),a=e(this),l=a+"";return null==a&&(this.style.removeProperty(t),l=a=H(this,t)),u===l?null:u===r&&l===i?o:(i=l,o=n(r=u,a))}}(t,r,ne(this,"style."+t,n))).each(function(t,n){var e,r,i,o,u="style."+n,a="end."+u;return function(){var l=Kn(this,t),s=l.on,c=null==l.value[u]?o||(o=ge(n)):void 0;s===e&&i===c||(r=(e=s).copy()).on(a,i=c),l.on=r}}(this._id,t)):this.styleTween(t,function(t,n,e){var r,i,o=e+"";return function(){var u=H(this,t);return u===o?null:u===r?i:i=n(r=u,e)}}(t,r,n),e).on("end.style."+t,null)},styleTween:function(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;return this.tween(r,function(t,n,e){var r,i;function o(){var o=n.apply(this,arguments);return o!==i&&(r=(i=o)&&function(t,n,e){return function(r){this.style.setProperty(t,n.call(this,r),e)}}(t,o,e)),r}return o._value=n,o}(t,n,null==e?"":e))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var n=t(this);this.textContent=null==n?"":n}}(ne(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;return this.tween(n,function(t){var n,e;function r(){var r=t.apply(this,arguments);return r!==e&&(n=(e=r)&&function(t){return function(n){this.textContent=t.call(this,n)}}(r)),n}return r._value=t,r}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}(this._id))},tween:function(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r,i=Jn(this.node(),e).tween,o=0,u=i.length;o<u;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==n?Qn:te)(e,t,n))},delay:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?fe:he)(n,t)):Jn(this.node(),n).delay},duration:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?pe:de)(n,t)):Jn(this.node(),n).duration},ease:function(t){var n=this._id;return arguments.length?this.each(function(t,n){if("function"!=typeof n)throw new Error;return function(){Kn(this,t).ease=n}}(n,t)):Jn(this.node(),n).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,n){return function(){var e=n.apply(this,arguments);if("function"!=typeof e)throw new Error;Kn(this,t).ease=e}}(this._id,t))},end:function(){var t,n,e=this,r=e._id,i=e.size();return new Promise((function(o,u){var a={value:u},l={value:function(){0==--i&&o()}};e.each((function(){var e=Kn(this,r),i=e.on;i!==t&&((n=(t=i).copy())._.cancel.push(a),n._.interrupt.push(a),n._.end.push(l)),e.on=n})),0===i&&o()}))},[Symbol.iterator]:be[Symbol.iterator]};var xe={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Ee(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}_t.prototype.interrupt=function(t){return this.each((function(){!function(t,n){var e,r,i,o=t.__transition,u=!0;if(o){for(i in n=null==n?null:n+"",o)(e=o[i]).name===n?(r=e.state>Bn&&e.state<Gn,e.state=Un,e.timer.stop(),e.on.call(r?"interrupt":"cancel",t,t.__data__,e.index,e.group),delete o[i]):u=!1;u&&delete t.__transition}}(this,t)}))},_t.prototype.transition=function(t){var n,e;t instanceof _e?(n=t._id,t=t._name):(n=we(),(e=xe).time=jn(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var u,a=r[o],l=a.length,s=0;s<l;++s)(u=a[s])&&Zn(u,t,n,s,a,e||Ee(u,n));return new _e(r,this._parents,t,n)};var Se=1e-6,Ne=1e-12,ke=Math.PI,Me=ke/2,Ae=ke/4,$e=2*ke,Ce=180/ke,Pe=ke/180,je=Math.abs,Re=Math.atan,Te=Math.atan2,qe=Math.cos,Oe=Math.sin,Le=Math.sign||function(t){return t>0?1:t<0?-1:0},Xe=Math.sqrt;function ze(t){return t>1?Me:t<-1?-Me:Math.asin(t)}function De(){}function He(t,n){t&&Ye.hasOwnProperty(t.type)&&Ye[t.type](t,n)}var Ie={Feature:function(t,n){He(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)He(e[r].geometry,n)}},Ye={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){Be(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)Be(e[r],n,0)},Polygon:function(t,n){Fe(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)Fe(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)He(e[r],n)}};function Be(t,n,e){var r,i=-1,o=t.length-e;for(n.lineStart();++i<o;)r=t[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function Fe(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)Be(t[e],n,1);n.polygonEnd()}function Ve(t,n){t&&Ie.hasOwnProperty(t.type)?Ie[t.type](t,n):He(t,n)}function Ge(t){return[Te(t[1],t[0]),ze(t[2])]}function Ue(t){var n=t[0],e=t[1],r=qe(e);return[r*qe(n),r*Oe(n),Oe(e)]}function Ze(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function We(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function Ke(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function Je(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function Qe(t){var n=Xe(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function tr(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return(e=n.invert(e,r))&&t.invert(e[0],e[1])}),e}function nr(t,n){return je(t)>ke&&(t-=Math.round(t/$e)*$e),[t,n]}function er(t){return function(n,e){return je(n+=t)>ke&&(n-=Math.round(n/$e)*$e),[n,e]}}function rr(t){var n=er(t);return n.invert=er(-t),n}function ir(t,n){var e=qe(t),r=Oe(t),i=qe(n),o=Oe(n);function u(t,n){var u=qe(n),a=qe(t)*u,l=Oe(t)*u,s=Oe(n),c=s*e+a*r;return[Te(l*i-c*o,a*e-s*r),ze(c*i+l*o)]}return u.invert=function(t,n){var u=qe(n),a=qe(t)*u,l=Oe(t)*u,s=Oe(n),c=s*i-l*o;return[Te(l*i+s*o,a*e+c*r),ze(c*e-a*r)]},u}function or(t,n){(n=Ue(n))[0]-=t,Qe(n);var e,r=(e=-n[1])>1?0:e<-1?ke:Math.acos(e);return((-n[2]<0?-r:r)+$e-Se)%$e}function ur(){var t,n=[];return{point:function(n,e,r){t.push([n,e,r])},lineStart:function(){n.push(t=[])},lineEnd:De,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function ar(t,n){return je(t[0]-n[0])<Se&&je(t[1]-n[1])<Se}function lr(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function sr(t,n,e,r,i){var o,u,a=[],l=[];if(t.forEach((function(t){if(!((n=t.length-1)<=0)){var n,e,r=t[0],u=t[n];if(ar(r,u)){if(!r[2]&&!u[2]){for(i.lineStart(),o=0;o<n;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}u[0]+=2*Se}a.push(e=new lr(r,t,null,!0)),l.push(e.o=new lr(r,null,e,!1)),a.push(e=new lr(u,t,null,!1)),l.push(e.o=new lr(u,null,e,!0))}})),a.length){for(l.sort(n),cr(a),cr(l),o=0,u=l.length;o<u;++o)l[o].e=e=!e;for(var s,c,f=a[0];;){for(var h=f,p=!0;h.v;)if((h=h.n)===f)return;s=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(o=0,u=s.length;o<u;++o)i.point((c=s[o])[0],c[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p)for(s=h.p.z,o=s.length-1;o>=0;--o)i.point((c=s[o])[0],c[1]);else r(h.x,h.p.x,-1,i);h=h.p}s=(h=h.o).z,p=!p}while(!h.v);i.lineEnd()}}}function cr(t){if(n=t.length){for(var n,e,r=0,i=t[0];++r<n;)i.n=e=t[r],e.p=i,i=e;i.n=e=t[0],e.p=i}}function fr(t){return je(t[0])<=ke?t[0]:Le(t[0])*((je(t[0])+ke)%$e-ke)}function hr(e,r,i,o){return function(u){var a,l,s,c=r(u),f=ur(),h=r(f),p=!1,d={point:v,lineStart:y,lineEnd:_,polygonStart:function(){d.point=m,d.lineStart=w,d.lineEnd=b,l=[],a=[]},polygonEnd:function(){d.point=v,d.lineStart=y,d.lineEnd=_,l=n(l);var e=function(n,e){var r=fr(e),i=e[1],o=Oe(i),u=[Oe(r),-qe(r),0],a=0,l=0,s=new t;1===o?i=Me+Se:-1===o&&(i=-Me-Se);for(var c=0,f=n.length;c<f;++c)if(p=(h=n[c]).length)for(var h,p,d=h[p-1],v=fr(d),g=d[1]/2+Ae,y=Oe(g),_=qe(g),m=0;m<p;++m,v=b,y=E,_=S,d=w){var w=h[m],b=fr(w),x=w[1]/2+Ae,E=Oe(x),S=qe(x),N=b-v,k=N>=0?1:-1,M=k*N,A=M>ke,$=y*E;if(s.add(Te($*k*Oe(M),_*S+$*qe(M))),a+=A?N+k*$e:N,A^v>=r^b>=r){var C=We(Ue(d),Ue(w));Qe(C);var P=We(u,C);Qe(P);var j=(A^N>=0?-1:1)*ze(P[2]);(i>j||i===j&&(C[0]||C[1]))&&(l+=A^N>=0?1:-1)}}return(a<-Se||a<Se&&s<-Ne)^1&l}(a,o);l.length?(p||(u.polygonStart(),p=!0),sr(l,dr,e,i,u)):e&&(p||(u.polygonStart(),p=!0),u.lineStart(),i(null,null,1,u),u.lineEnd()),p&&(u.polygonEnd(),p=!1),l=a=null},sphere:function(){u.polygonStart(),u.lineStart(),i(null,null,1,u),u.lineEnd(),u.polygonEnd()}};function v(t,n){e(t,n)&&u.point(t,n)}function g(t,n){c.point(t,n)}function y(){d.point=g,c.lineStart()}function _(){d.point=v,c.lineEnd()}function m(t,n){s.push([t,n]),h.point(t,n)}function w(){h.lineStart(),s=[]}function b(){m(s[0][0],s[0][1]),h.lineEnd();var t,n,e,r,i=h.clean(),o=f.result(),c=o.length;if(s.pop(),a.push(s),s=null,c)if(1&i){if((n=(e=o[0]).length-1)>0){for(p||(u.polygonStart(),p=!0),u.lineStart(),t=0;t<n;++t)u.point((r=e[t])[0],r[1]);u.lineEnd()}}else c>1&&2&i&&o.push(o.pop().concat(o.shift())),l.push(o.filter(pr))}return d}}function pr(t){return t.length>1}function dr(t,n){return((t=t.x)[0]<0?t[1]-Me-Se:Me-t[1])-((n=n.x)[0]<0?n[1]-Me-Se:Me-n[1])}nr.invert=nr;var vr=hr((function(){return!0}),(function(t){var n,e=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(o,u){var a=o>0?ke:-ke,l=je(o-e);je(l-ke)<Se?(t.point(e,r=(r+u)/2>0?Me:-Me),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),t.point(o,r),n=0):i!==a&&l>=ke&&(je(e-i)<Se&&(e-=i*Se),je(o-a)<Se&&(o-=a*Se),r=function(t,n,e,r){var i,o,u=Oe(t-e);return je(u)>Se?Re((Oe(n)*(o=qe(r))*Oe(e)-Oe(r)*(i=qe(n))*Oe(t))/(i*o*u)):(n+r)/2}(e,r,o,u),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),n=0),t.point(e=o,r=u),i=a},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}}),(function(t,n,e,r){var i;if(null==t)i=e*Me,r.point(-ke,i),r.point(0,i),r.point(ke,i),r.point(ke,0),r.point(ke,-i),r.point(0,-i),r.point(-ke,-i),r.point(-ke,0),r.point(-ke,i);else if(je(t[0]-n[0])>Se){var o=t[0]<n[0]?ke:-ke;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(n[0],n[1])}),[-ke,-Me]);function gr(t){var n=qe(t),e=2*Pe,r=n>0,i=je(n)>Se;function o(t,e){return qe(t)*qe(e)>n}function u(t,e,r){var i=[1,0,0],o=We(Ue(t),Ue(e)),u=Ze(o,o),a=o[0],l=u-a*a;if(!l)return!r&&t;var s=n*u/l,c=-n*a/l,f=We(i,o),h=Je(i,s);Ke(h,Je(o,c));var p=f,d=Ze(h,p),v=Ze(p,p),g=d*d-v*(Ze(h,h)-1);if(!(g<0)){var y=Xe(g),_=Je(p,(-d-y)/v);if(Ke(_,h),_=Ge(_),!r)return _;var m,w=t[0],b=e[0],x=t[1],E=e[1];b<w&&(m=w,w=b,b=m);var S=b-w,N=je(S-ke)<Se;if(!N&&E<x&&(m=x,x=E,E=m),N||S<Se?N?x+E>0^_[1]<(je(_[0]-w)<Se?x:E):x<=_[1]&&_[1]<=E:S>ke^(w<=_[0]&&_[0]<=b)){var k=Je(p,(-d+y)/v);return Ke(k,h),[_,Ge(k)]}}}function a(n,e){var i=r?t:ke-t,o=0;return n<-i?o|=1:n>i&&(o|=2),e<-i?o|=4:e>i&&(o|=8),o}return hr(o,(function(t){var n,e,l,s,c;return{lineStart:function(){s=l=!1,c=1},point:function(f,h){var p,d=[f,h],v=o(f,h),g=r?v?0:a(f,h):v?a(f+(f<0?ke:-ke),h):0;if(!n&&(s=l=v)&&t.lineStart(),v!==l&&(!(p=u(n,d))||ar(n,p)||ar(d,p))&&(d[2]=1),v!==l)c=0,v?(t.lineStart(),p=u(d,n),t.point(p[0],p[1])):(p=u(n,d),t.point(p[0],p[1],2),t.lineEnd()),n=p;else if(i&&n&&r^v){var y;g&e||!(y=u(d,n,!0))||(c=0,r?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1],3)))}!v||n&&ar(n,d)||t.point(d[0],d[1]),n=d,l=v,e=g},lineEnd:function(){l&&t.lineEnd(),n=null},clean:function(){return c|(s&&l)<<1}}}),(function(n,r,i,o){!function(t,n,e,r,i,o){if(e){var u=qe(n),a=Oe(n),l=r*e;null==i?(i=n+r*$e,o=n-l/2):(i=or(u,i),o=or(u,o),(r>0?i<o:i>o)&&(i+=r*$e));for(var s,c=i;r>0?c>o:c<o;c-=l)s=Ge([u,-a*qe(c),-a*Oe(c)]),t.point(s[0],s[1])}}(o,t,e,i,n,r)}),r?[0,-t]:[-ke,t-ke])}var yr=1e9,_r=-yr;function mr(t,e,r,i){function o(n,o){return t<=n&&n<=r&&e<=o&&o<=i}function u(n,o,u,l){var c=0,f=0;if(null==n||(c=a(n,u))!==(f=a(o,u))||s(n,o)<0^u>0)do{l.point(0===c||3===c?t:r,c>1?i:e)}while((c=(c+u+4)%4)!==f);else l.point(o[0],o[1])}function a(n,i){return je(n[0]-t)<Se?i>0?0:3:je(n[0]-r)<Se?i>0?2:1:je(n[1]-e)<Se?i>0?1:0:i>0?3:2}function l(t,n){return s(t.x,n.x)}function s(t,n){var e=a(t,1),r=a(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(a){var s,c,f,h,p,d,v,g,y,_,m,w=a,b=ur(),x={point:E,lineStart:function(){x.point=S,c&&c.push(f=[]);_=!0,y=!1,v=g=NaN},lineEnd:function(){s&&(S(h,p),d&&y&&b.rejoin(),s.push(b.result()));x.point=E,y&&w.lineEnd()},polygonStart:function(){w=b,s=[],c=[],m=!0},polygonEnd:function(){var e=function(){for(var n=0,e=0,r=c.length;e<r;++e)for(var o,u,a=c[e],l=1,s=a.length,f=a[0],h=f[0],p=f[1];l<s;++l)o=h,u=p,h=(f=a[l])[0],p=f[1],u<=i?p>i&&(h-o)*(i-u)>(p-u)*(t-o)&&++n:p<=i&&(h-o)*(i-u)<(p-u)*(t-o)&&--n;return n}(),r=m&&e,o=(s=n(s)).length;(r||o)&&(a.polygonStart(),r&&(a.lineStart(),u(null,null,1,a),a.lineEnd()),o&&sr(s,l,e,u,a),a.polygonEnd());w=a,s=c=f=null}};function E(t,n){o(t,n)&&w.point(t,n)}function S(n,u){var a=o(n,u);if(c&&f.push([n,u]),_)h=n,p=u,d=a,_=!1,a&&(w.lineStart(),w.point(n,u));else if(a&&y)w.point(n,u);else{var l=[v=Math.max(_r,Math.min(yr,v)),g=Math.max(_r,Math.min(yr,g))],s=[n=Math.max(_r,Math.min(yr,n)),u=Math.max(_r,Math.min(yr,u))];!function(t,n,e,r,i,o){var u,a=t[0],l=t[1],s=0,c=1,f=n[0]-a,h=n[1]-l;if(u=e-a,f||!(u>0)){if(u/=f,f<0){if(u<s)return;u<c&&(c=u)}else if(f>0){if(u>c)return;u>s&&(s=u)}if(u=i-a,f||!(u<0)){if(u/=f,f<0){if(u>c)return;u>s&&(s=u)}else if(f>0){if(u<s)return;u<c&&(c=u)}if(u=r-l,h||!(u>0)){if(u/=h,h<0){if(u<s)return;u<c&&(c=u)}else if(h>0){if(u>c)return;u>s&&(s=u)}if(u=o-l,h||!(u<0)){if(u/=h,h<0){if(u>c)return;u>s&&(s=u)}else if(h>0){if(u<s)return;u<c&&(c=u)}return s>0&&(t[0]=a+s*f,t[1]=l+s*h),c<1&&(n[0]=a+c*f,n[1]=l+c*h),!0}}}}}(l,s,t,e,r,i)?a&&(w.lineStart(),w.point(n,u),m=!1):(y||(w.lineStart(),w.point(l[0],l[1])),w.point(s[0],s[1]),a||w.lineEnd(),m=!1)}v=n,g=u,y=a}return x}}var wr,br,xr,Er,Sr=t=>t,Nr=new t,kr=new t,Mr={point:De,lineStart:De,lineEnd:De,polygonStart:function(){Mr.lineStart=Ar,Mr.lineEnd=Pr},polygonEnd:function(){Mr.lineStart=Mr.lineEnd=Mr.point=De,Nr.add(je(kr)),kr=new t},result:function(){var n=Nr/2;return Nr=new t,n}};function Ar(){Mr.point=$r}function $r(t,n){Mr.point=Cr,wr=xr=t,br=Er=n}function Cr(t,n){kr.add(Er*t-xr*n),xr=t,Er=n}function Pr(){Cr(wr,br)}var jr=1/0,Rr=jr,Tr=-jr,qr=Tr,Or={point:function(t,n){t<jr&&(jr=t);t>Tr&&(Tr=t);n<Rr&&(Rr=n);n>qr&&(qr=n)},lineStart:De,lineEnd:De,polygonStart:De,polygonEnd:De,result:function(){var t=[[jr,Rr],[Tr,qr]];return Tr=qr=-(Rr=jr=1/0),t}};var Lr,Xr,zr,Dr,Hr=0,Ir=0,Yr=0,Br=0,Fr=0,Vr=0,Gr=0,Ur=0,Zr=0,Wr={point:Kr,lineStart:Jr,lineEnd:ni,polygonStart:function(){Wr.lineStart=ei,Wr.lineEnd=ri},polygonEnd:function(){Wr.point=Kr,Wr.lineStart=Jr,Wr.lineEnd=ni},result:function(){var t=Zr?[Gr/Zr,Ur/Zr]:Vr?[Br/Vr,Fr/Vr]:Yr?[Hr/Yr,Ir/Yr]:[NaN,NaN];return Hr=Ir=Yr=Br=Fr=Vr=Gr=Ur=Zr=0,t}};function Kr(t,n){Hr+=t,Ir+=n,++Yr}function Jr(){Wr.point=Qr}function Qr(t,n){Wr.point=ti,Kr(zr=t,Dr=n)}function ti(t,n){var e=t-zr,r=n-Dr,i=Xe(e*e+r*r);Br+=i*(zr+t)/2,Fr+=i*(Dr+n)/2,Vr+=i,Kr(zr=t,Dr=n)}function ni(){Wr.point=Kr}function ei(){Wr.point=ii}function ri(){oi(Lr,Xr)}function ii(t,n){Wr.point=oi,Kr(Lr=zr=t,Xr=Dr=n)}function oi(t,n){var e=t-zr,r=n-Dr,i=Xe(e*e+r*r);Br+=i*(zr+t)/2,Fr+=i*(Dr+n)/2,Vr+=i,Gr+=(i=Dr*t-zr*n)*(zr+t),Ur+=i*(Dr+n),Zr+=3*i,Kr(zr=t,Dr=n)}function ui(t){this._context=t}ui.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._context.moveTo(t,n),this._point=1;break;case 1:this._context.lineTo(t,n);break;default:this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,$e)}},result:De};var ai,li,si,ci,fi,hi=new t,pi={point:De,lineStart:function(){pi.point=di},lineEnd:function(){ai&&vi(li,si),pi.point=De},polygonStart:function(){ai=!0},polygonEnd:function(){ai=null},result:function(){var n=+hi;return hi=new t,n}};function di(t,n){pi.point=vi,li=ci=t,si=fi=n}function vi(t,n){ci-=t,fi-=n,hi.add(Xe(ci*ci+fi*fi)),ci=t,fi=n}let gi,yi,_i,mi;class wi{constructor(t){this._append=null==t?bi:function(t){const n=Math.floor(t);if(!(n>=0))throw new RangeError(`invalid digits: ${t}`);if(n>15)return bi;if(n!==gi){const t=10**n;gi=n,yi=function(n){let e=1;this._+=n[0];for(const r=n.length;e<r;++e)this._+=Math.round(arguments[e]*t)/t+n[e]}}return yi}(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:this._append`M${t},${n}`,this._point=1;break;case 1:this._append`L${t},${n}`;break;default:if(this._append`M${t},${n}`,this._radius!==_i||this._append!==yi){const t=this._radius,n=this._;this._="",this._append`m0,${t}a${t},${t} 0 1,1 0,${-2*t}a${t},${t} 0 1,1 0,${2*t}z`,_i=t,yi=this._append,mi=this._,this._=n}this._+=mi}}result(){const t=this._;return this._="",t.length?t:null}}function bi(t){let n=1;this._+=t[0];for(const e=t.length;n<e;++n)this._+=arguments[n]+t[n]}function xi(t){return function(n){var e=new Ei;for(var r in t)e[r]=t[r];return e.stream=n,e}}function Ei(){}function Si(t,n,e){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),Ve(e,t.stream(Or)),n(Or.result()),null!=r&&t.clipExtent(r),t}function Ni(t,n,e){return Si(t,(function(e){var r=n[1][0]-n[0][0],i=n[1][1]-n[0][1],o=Math.min(r/(e[1][0]-e[0][0]),i/(e[1][1]-e[0][1])),u=+n[0][0]+(r-o*(e[1][0]+e[0][0]))/2,a=+n[0][1]+(i-o*(e[1][1]+e[0][1]))/2;t.scale(150*o).translate([u,a])}),e)}Ei.prototype={constructor:Ei,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var ki=16,Mi=qe(30*Pe);function Ai(t,n){return+n?function(t,n){function e(r,i,o,u,a,l,s,c,f,h,p,d,v,g){var y=s-r,_=c-i,m=y*y+_*_;if(m>4*n&&v--){var w=u+h,b=a+p,x=l+d,E=Xe(w*w+b*b+x*x),S=ze(x/=E),N=je(je(x)-1)<Se||je(o-f)<Se?(o+f)/2:Te(b,w),k=t(N,S),M=k[0],A=k[1],$=M-r,C=A-i,P=_*$-y*C;(P*P/m>n||je((y*$+_*C)/m-.5)>.3||u*h+a*p+l*d<Mi)&&(e(r,i,o,u,a,l,M,A,N,w/=E,b/=E,x,v,g),g.point(M,A),e(M,A,N,w,b,x,s,c,f,h,p,d,v,g))}}return function(n){var r,i,o,u,a,l,s,c,f,h,p,d,v={point:g,lineStart:y,lineEnd:m,polygonStart:function(){n.polygonStart(),v.lineStart=w},polygonEnd:function(){n.polygonEnd(),v.lineStart=y}};function g(e,r){e=t(e,r),n.point(e[0],e[1])}function y(){c=NaN,v.point=_,n.lineStart()}function _(r,i){var o=Ue([r,i]),u=t(r,i);e(c,f,s,h,p,d,c=u[0],f=u[1],s=r,h=o[0],p=o[1],d=o[2],ki,n),n.point(c,f)}function m(){v.point=g,n.lineEnd()}function w(){y(),v.point=b,v.lineEnd=x}function b(t,n){_(r=t,n),i=c,o=f,u=h,a=p,l=d,v.point=_}function x(){e(c,f,s,h,p,d,i,o,r,u,a,l,ki,n),v.lineEnd=m,m()}return v}}(t,n):function(t){return xi({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}(t)}var $i,Ci=xi({point:function(t,n){this.stream.point(t*Pe,n*Pe)}});function Pi(t,n,e,r,i,o){if(!o)return function(t,n,e,r,i){function o(o,u){return[n+t*(o*=r),e-t*(u*=i)]}return o.invert=function(o,u){return[(o-n)/t*r,(e-u)/t*i]},o}(t,n,e,r,i);var u=qe(o),a=Oe(o),l=u*t,s=a*t,c=u/t,f=a/t,h=(a*e-u*n)/t,p=(a*n+u*e)/t;function d(t,o){return[l*(t*=r)-s*(o*=i)+n,e-s*t-l*o]}return d.invert=function(t,n){return[r*(c*t-f*n+h),i*(p-f*t-c*n)]},d}function ji(t){return function(t){var n,e,r,i,o,u,a,l,s,c,f=150,h=480,p=250,d=0,v=0,g=0,y=0,_=0,m=0,w=1,b=1,x=null,E=vr,S=null,N=Sr,k=.5;function M(t){return l(t[0]*Pe,t[1]*Pe)}function A(t){return(t=l.invert(t[0],t[1]))&&[t[0]*Ce,t[1]*Ce]}function $(){var t=Pi(f,0,0,w,b,m).apply(null,n(d,v)),r=Pi(f,h-t[0],p-t[1],w,b,m);return e=function(t,n,e){return(t%=$e)?n||e?tr(rr(t),ir(n,e)):rr(t):n||e?ir(n,e):nr}(g,y,_),a=tr(n,r),l=tr(e,a),u=Ai(a,k),C()}function C(){return s=c=null,M}return M.stream=function(t){return s&&c===t?s:s=Ci(function(t){return xi({point:function(n,e){var r=t(n,e);return this.stream.point(r[0],r[1])}})}(e)(E(u(N(c=t)))))},M.preclip=function(t){return arguments.length?(E=t,x=void 0,C()):E},M.postclip=function(t){return arguments.length?(N=t,S=r=i=o=null,C()):N},M.clipAngle=function(t){return arguments.length?(E=+t?gr(x=t*Pe):(x=null,vr),C()):x*Ce},M.clipExtent=function(t){return arguments.length?(N=null==t?(S=r=i=o=null,Sr):mr(S=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),C()):null==S?null:[[S,r],[i,o]]},M.scale=function(t){return arguments.length?(f=+t,$()):f},M.translate=function(t){return arguments.length?(h=+t[0],p=+t[1],$()):[h,p]},M.center=function(t){return arguments.length?(d=t[0]%360*Pe,v=t[1]%360*Pe,$()):[d*Ce,v*Ce]},M.rotate=function(t){return arguments.length?(g=t[0]%360*Pe,y=t[1]%360*Pe,_=t.length>2?t[2]%360*Pe:0,$()):[g*Ce,y*Ce,_*Ce]},M.angle=function(t){return arguments.length?(m=t%360*Pe,$()):m*Ce},M.reflectX=function(t){return arguments.length?(w=t?-1:1,$()):w<0},M.reflectY=function(t){return arguments.length?(b=t?-1:1,$()):b<0},M.precision=function(t){return arguments.length?(u=Ai(a,k=t*t),C()):Xe(k)},M.fitExtent=function(t,n){return Ni(M,t,n)},M.fitSize=function(t,n){return function(t,n,e){return Ni(t,[[0,0],n],e)}(M,t,n)},M.fitWidth=function(t,n){return function(t,n,e){return Si(t,(function(e){var r=+n,i=r/(e[1][0]-e[0][0]),o=(r-i*(e[1][0]+e[0][0]))/2,u=-i*e[0][1];t.scale(150*i).translate([o,u])}),e)}(M,t,n)},M.fitHeight=function(t,n){return function(t,n,e){return Si(t,(function(e){var r=+n,i=r/(e[1][1]-e[0][1]),o=-i*e[0][0],u=(r-i*(e[1][1]+e[0][1]))/2;t.scale(150*i).translate([o,u])}),e)}(M,t,n)},function(){return n=t.apply(this,arguments),M.invert=n.invert&&A,$()}}((function(){return t}))()}function Ri(t,n){return[qe(n)*Oe(t),Oe(n)]}function Ti(t,n,e){this.k=t,this.x=n,this.y=e}function qi(t){return t}function Oi(t,n){var e=n.id,r=n.bbox,i=null==n.properties?{}:n.properties,o=function(t,n){var e=function(t){if(null==t)return qi;var n,e,r=t.scale[0],i=t.scale[1],o=t.translate[0],u=t.translate[1];return function(t,a){a||(n=e=0);var l=2,s=t.length,c=new Array(s);for(c[0]=(n+=t[0])*r+o,c[1]=(e+=t[1])*i+u;l<s;)c[l]=t[l],++l;return c}}(t.transform),r=t.arcs;function i(t,n){n.length&&n.pop();for(var i=r[t<0?~t:t],o=0,u=i.length;o<u;++o)n.push(e(i[o],o));t<0&&function(t,n){for(var e,r=t.length,i=r-n;i<--r;)e=t[i],t[i++]=t[r],t[r]=e}(n,u)}function o(t){return e(t)}function u(t){for(var n=[],e=0,r=t.length;e<r;++e)i(t[e],n);return n.length<2&&n.push(n[0]),n}function a(t){for(var n=u(t);n.length<4;)n.push(n[0]);return n}function l(t){return t.map(a)}function s(t){var n,e=t.type;switch(e){case"GeometryCollection":return{type:e,geometries:t.geometries.map(s)};case"Point":n=o(t.coordinates);break;case"MultiPoint":n=t.coordinates.map(o);break;case"LineString":n=u(t.arcs);break;case"MultiLineString":n=t.arcs.map(u);break;case"Polygon":n=l(t.arcs);break;case"MultiPolygon":n=t.arcs.map(l);break;default:return null}return{type:e,coordinates:n}}return s(n)}(t,n);return null==e&&null==r?{type:"Feature",properties:i,geometry:o}:null==r?{type:"Feature",id:e,properties:i,geometry:o}:{type:"Feature",id:e,bbox:r,properties:i,geometry:o}}Ri.invert=($i=ze,function(t,n){var e=Xe(t*t+n*n),r=$i(e),i=Oe(r),o=qe(r);return[Te(t*i,e*o),ze(e&&n*i/e)]}),Ti.prototype={constructor:Ti,scale:function(t){return 1===t?this:new Ti(this.k*t,this.x,this.y)},translate:function(t,n){return 0===t&0===n?this:new Ti(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},Ti.prototype;const Li={type:"Topology",objects:{land:{type:"MultiPolygon",arcs:[[[540,266,539],[123,542,536],[592,399,564,457,565,439,78,350,483,355,359,405,532,507,533,18,482,20,481,595,531,379,247,538,254,229,552,554,389,575,445,597,461,8,200,10,203,283,303,191,467,67,563,291,184,412,550,295,301,544,299,543,453,530,428,242,571,416,250,369,410,561,572,288,521,578,511,81,573,305,15,441,323,558,375,281,257,506,255,282,66,470,227,234,222,498,514,422,425,259,523,269,559,473,524,504,400,505,169],[386,520,55,358,567]],[[24,164]],[[556,275],[579,28,165,486,245,206,484,211,468,317,551,309,433,586,139,590,141,585,432,98,311,319,469,213,485,208,591,314,555,277,111]],[[36]],[[37]],[[38]],[[39]],[[40]],[[41]],[[42]],[[43]],[[44]],[[45]],[[46]],[[86]],[[87]],[[88]],[[459,113,460,346]],[[128]],[[129]],[[130]],[[131]],[[132]],[[133]],[[134]],[[135]],[[136]],[[137]],[[142]],[[143]],[[144]],[[145]],[[146]],[[147]],[[148]],[[149]],[[150]],[[151]],[[152]],[[153]],[[154]],[[155]],[[156]],[[157]],[[158]],[[159]],[[160]],[[167]],[[215]],[[216,218]],[[233]],[[235,326]],[[272]],[[273]],[[274]],[[278]],[[286,352]],[[287]],[[304]],[[308]],[[332]],[[334,569]],[[335]],[[336]],[[337]],[[338]],[[339]],[[340]],[[342,496]],[[343]],[[344]],[[347]],[[365]],[[372]],[[373]],[[376]],[[381]],[[382]],[[383]],[[419]],[[431]],[[464]],[[474]],[[475]],[[476]],[[477]],[[478]],[[487]],[[488]],[[489]],[[490]],[[491]],[[492]],[[493]],[[494]],[[495]],[[497]],[[502]],[[513]],[[515]],[[516]],[[517]],[[518]],[[519]],[[525]],[[526]],[[527]],[[545]],[[546]],[[547]],[[548]],[[549]],[[570]],[[574]],[[580]],[[581]],[[582]],[[583]],[[584]],[[587]],[[588]],[[589]],[[593]],[[594]]]}},arcs:[[[67002,72360],[284,-219],[209,77],[58,261],[219,87],[157,175],[55,460],[234,112],[44,205],[131,-154],[84,-18]],[[68477,73346],[154,-4],[210,-122]],[[68841,73220],[85,-70],[201,185],[93,-111],[90,264],[166,-12],[43,84],[29,233],[120,200],[150,-131],[-30,-176],[84,-27],[-26,-484],[110,-189],[97,121],[123,57],[173,258],[192,-42],[286,-1]],[[70827,73379],[50,-165]],[[70877,73214],[-162,-65],[-141,-106],[-319,-67],[-298,-121],[-163,-251],[66,-244],[32,-287],[-139,-242],[12,-221],[-76,-207],[-265,18],[110,-381],[-177,-146],[-118,-347],[15,-346],[-108,-162],[-103,53],[-212,-75],[-31,-161],[-207,1],[-154,-326],[-10,-490],[-361,-239],[-194,50],[-56,-126],[-166,74],[-278,-87],[-465,294]],[[66909,69007],[252,523],[-23,370],[-210,97],[-22,366],[-91,460],[119,315],[-121,85],[76,419],[113,718]],[[56642,45537],[29,-179],[-32,-279],[49,-270],[-41,-216],[24,-199],[-579,7],[-13,-1832],[188,-471],[181,-360]],[[56448,41738],[-510,-235],[-673,82],[-192,276],[-1126,-25],[-42,-40],[-166,260],[-180,17],[-166,-98],[-134,-110]],[[53259,41865],[-26,363],[38,506],[96,527],[15,247],[90,519],[66,236],[159,377],[90,256],[29,427],[-15,326],[-83,206],[-74,350],[-68,345],[15,120],[85,228],[-84,557],[-57,385],[-139,364],[26,112]],[[53422,48316],[115,78],[80,-11],[98,69],[820,-7],[68,-430],[80,-345],[64,-186],[106,-301],[184,46],[91,81],[154,-81],[42,144],[69,336],[172,22],[15,100],[142,2],[-24,-207],[337,5],[5,-363],[56,-222],[-41,-347],[21,-354],[93,-214],[-15,-685],[68,53],[121,-15],[172,87],[127,-34]],[[53383,48495],[-74,433]],[[53309,48928],[112,249],[84,97],[104,-198]],[[53609,49076],[-101,-121],[-45,-148],[-9,-251],[-71,-61]],[[55719,75933],[-35,-196],[39,-247],[115,-140]],[[55838,75350],[-5,-151],[-91,-84],[-16,-187],[-129,-279]],[[55597,74649],[-48,40],[-5,127],[-154,193],[-24,274],[23,393],[38,179],[-47,91]],[[55380,75946],[-18,183],[120,284],[18,-109],[75,51]],[[55575,76355],[59,-154],[66,-59],[19,-209]],[[64327,65792],[49,28],[11,-158],[217,91],[230,-15],[168,-17],[190,389],[207,369],[176,355]],[[65575,66834],[52,-196]],[[65627,66638],[38,-455]],[[65665,66183],[-142,-2],[-23,-375],[50,-80],[-126,-114],[-1,-235],[-81,-238],[-7,-232]],[[65335,64907],[-56,-122],[-835,290],[-106,584],[-11,133]],[[31400,20215],[-168,16],[-297,0],[0,1286]],[[30935,21517],[106,-267],[139,-432],[361,-345],[389,-144],[-125,-288],[-264,-29],[-141,203]],[[32587,39017],[511,-940],[227,-88],[339,-425],[286,-225],[40,-254],[-273,-876],[280,-156],[312,-88],[220,92],[252,441],[45,509]],[[34826,37007],[138,110],[139,-332],[-6,-460],[-234,-318],[-186,-234],[-314,-559],[-370,-786]],[[33993,34428],[-70,-461],[-74,-592],[3,-573],[-61,-128],[-21,-372]],[[33770,32302],[-19,-301],[353,-493],[-38,-397],[173,-251],[-14,-282],[-267,-738],[-412,-309],[-557,-120],[-305,58],[59,-343],[-57,-431],[51,-291],[-167,-202],[-284,-80],[-267,210],[-108,-151],[39,-572],[188,-173],[152,181],[82,-299],[-255,-179],[-223,-358],[-41,-579],[-66,-309],[-262,-1],[-218,-295],[-80,-432],[273,-422],[266,-116],[-96,-517],[-328,-325],[-180,-675],[-254,-227],[-113,-270],[89,-598],[185,-333],[-117,29]],[[30952,21711],[-257,90],[-672,77],[-115,336],[6,431],[-185,-37],[-98,209],[-24,611],[213,253],[88,365],[-33,292],[148,491],[101,763],[-30,338],[122,109],[-30,217],[-129,115],[92,242],[-126,218],[-65,665],[112,117],[-47,702],[65,590],[75,513],[166,209],[-84,563],[-1,529],[210,376],[-7,481],[159,562],[1,530],[-72,105],[-128,994],[171,592],[-27,558],[100,523],[182,540],[196,358],[-83,226],[58,186],[-9,960],[302,284],[96,598],[-34,144]],[[31359,38736],[231,521],[364,-141],[163,-416],[109,464],[316,-24],[45,-123]],[[62106,75494],[386,89]],[[62492,75583],[57,-151],[106,-100],[-56,-144],[148,-198],[-78,-183],[118,-157],[124,-94],[7,-399]],[[62918,74157],[-101,-17]],[[62817,74140],[-113,333],[1,89],[-123,-2],[-82,155],[-58,-16]],[[62442,74699],[-109,168],[-207,144],[27,280],[-47,203]],[[33452,5736],[-82,-294],[-81,-259],[-582,79],[-621,-34],[-348,192],[0,22],[-152,170],[625,-23],[599,-56],[207,237],[147,203],[288,-237]],[[5775,6048],[-533,-79],[-364,204],[-163,203],[-11,34],[-180,158],[169,214],[517,-90],[277,-181],[212,-203],[76,-260]],[[37457,6883],[342,-248],[120,-350],[33,-248],[11,-293],[-430,-181],[-452,-146],[-522,-136],[-582,-113],[-658,34],[-365,192],[49,237],[593,158],[239,192],[174,248],[126,214],[168,203],[180,238],[0,-1],[141,0],[414,125],[419,-125]],[[16330,9501],[359,-90],[332,102],[-158,-203],[-261,-147],[-386,45],[-278,203],[60,192],[332,-102]],[[15122,9513],[425,-226],[-164,23],[-359,56],[-381,158],[202,124],[277,-135]],[[22505,10404],[305,-79],[304,68],[163,-327],[-217,45],[-337,-23],[-343,23],[-376,-34],[-283,113],[-146,237],[174,101],[353,-79],[403,-45]],[[30985,10967],[33,-259],[-49,-226],[-76,-214],[-326,-79],[-311,-113],[-364,11],[136,226],[-327,-79],[-310,-79],[-212,169],[-16,237],[305,226],[190,67],[321,-22],[82,293],[16,215],[-6,462],[158,271],[256,90],[147,-214],[65,-214],[120,-260],[92,-248],[76,-260]],[[0,3044],[16,-4],[245,335],[501,-181],[32,21],[294,183],[38,-6],[32,-5],[402,-239],[352,239],[63,33],[816,102],[265,-135],[130,-68],[419,-192],[789,-147],[625,-180],[1072,-136],[800,158],[1181,-113],[669,-180],[734,169],[773,158],[60,271],[-1094,22],[-898,136],[-234,225],[-745,125],[49,259],[103,237],[104,214],[-55,237],[-462,158],[-212,204],[-430,180],[675,-34],[642,91],[402,-192],[495,169],[457,214],[223,192],[-98,237],[-359,158],[-408,169],[-571,34],[-500,79],[-539,57],[-180,214],[-359,181],[-217,203],[-87,654],[136,-56],[250,-181],[457,57],[441,79],[228,-249],[441,57],[370,124],[348,158],[315,192],[419,56],[-11,215],[-97,214],[81,203],[359,102],[163,-192],[425,113],[321,146],[397,12],[375,56],[376,136],[299,124],[337,124],[218,-34],[190,-45],[414,79],[370,-102],[381,12],[364,79],[375,-57],[414,-56],[386,22],[403,-11],[413,-11],[381,22],[283,170],[337,90],[349,-124],[331,101],[300,203],[179,-180],[98,-203],[180,-192],[288,169],[332,-214],[375,-68],[321,-158],[392,34],[354,101],[418,-22],[376,-79],[381,-102],[147,249],[-180,191],[-136,204],[-359,45],[-158,214],[-60,214],[-98,429],[213,-79],[364,-34],[359,34],[327,-90],[283,-169],[119,-203],[376,-34],[359,79],[381,113],[342,67],[283,-135],[370,45],[239,440],[224,-259],[321,-102],[348,56],[228,-225],[365,-23],[337,-68],[332,-124],[218,215],[108,203],[278,-226],[381,57],[283,-125],[190,-191],[370,56],[288,124],[283,147],[337,79],[392,68],[354,79],[272,124],[163,180],[65,249],[-32,236],[-87,226],[-98,226],[-87,226],[-71,203],[-16,225],[27,226],[130,214],[109,237],[44,226],[-55,248],[-32,226],[136,260],[152,169],[180,214],[190,181],[223,169],[109,248],[152,158],[174,147],[267,34],[174,180],[196,113],[228,68],[202,147],[157,180],[218,68],[163,-147],[-103,-192],[-283,-169],[-120,-124],[-206,90],[-229,-56],[-190,-136],[-202,-146],[-136,-170],[-38,-225],[17,-215],[130,-191],[-190,-136],[-261,-45],[-153,-192],[-163,-180],[-174,-249],[-44,-214],[98,-237],[147,-181],[229,-135],[212,-181],[114,-225],[60,-215],[82,-225],[130,-192],[82,-215],[38,-530],[81,-214],[22,-226],[87,-226],[-38,-304],[-152,-237],[-163,-192],[-370,-79],[-125,-203],[-169,-192],[-419,-215],[-370,-90],[-348,-124],[-376,-124],[-223,-237],[-446,-23],[-489,23],[-441,-45],[-468,0],[87,-226],[424,-101],[311,-158],[174,-204],[-310,-180],[-479,56],[-397,-146],[-17,-237],[-11,-226],[327,-192],[60,-214],[353,-215],[588,-90],[500,-158],[398,-180],[506,-181],[690,-90],[681,-158],[473,-170],[517,-191],[272,-271],[136,-215],[337,204],[457,169],[484,180],[577,147],[495,158],[691,11],[680,-79],[560,-135],[180,248],[386,169],[702,12],[550,124],[522,124],[577,79],[614,102],[430,146],[-196,203],[-119,203],[0,215],[-539,-23],[-571,-90],[-544,0],[-77,214],[39,429],[125,124],[397,136],[468,135],[337,169],[337,170],[251,225],[380,102],[376,79],[190,45],[430,23],[408,79],[343,112],[337,136],[305,135],[386,181],[245,192],[261,169],[82,226],[-294,135],[98,237],[185,181],[288,112],[305,136],[283,180],[217,226],[136,271],[202,158],[331,-34],[136,-192],[332,-22],[11,214],[142,226],[299,-57],[71,-214],[331,-34],[360,102],[348,67],[315,-34],[120,-237],[305,192],[283,102],[315,79],[310,79],[283,135],[310,91],[240,124],[168,203],[207,-147],[288,79],[202,-271],[157,-203],[316,113],[125,226],[283,158],[365,-34],[108,-215],[229,215],[299,68],[326,22],[294,-11],[310,-68],[300,-34],[130,-192],[180,-169],[304,102],[327,22],[315,0],[310,12],[278,79],[294,67],[245,158],[261,102],[283,56],[212,158],[152,316],[158,192],[288,-90],[109,-203],[239,-136],[289,45],[196,-203],[206,-146],[283,135],[98,248],[250,102],[289,192],[272,79],[326,112],[218,125],[228,135],[218,124],[261,-68],[250,203],[180,158],[261,-11],[229,136],[54,203],[234,158],[228,113],[278,90],[256,45],[244,-34],[262,-56],[223,-158],[27,-249],[245,-191],[168,-158],[332,-68],[185,-158],[229,-158],[266,-34],[223,113],[240,237],[261,-124],[272,-68],[261,-68],[272,-45],[277,0],[229,-598],[-11,-147],[-33,-259],[-266,-147],[-218,-214],[38,-226],[310,11],[-38,-225],[-141,-215],[-131,-237],[212,-180],[321,-57],[321,102],[153,226],[92,214],[153,181],[174,169],[70,203],[147,282],[174,57],[316,22],[277,68],[283,90],[136,226],[82,214],[190,215],[272,146],[234,113],[153,192],[157,101],[202,91],[277,-57],[250,57],[272,67],[305,-33],[201,158],[142,383],[103,-158],[131,-271],[234,-112],[266,-46],[267,68],[283,-45],[261,-11],[174,56],[234,-34],[212,-124],[250,79],[300,0],[255,79],[289,-79],[185,192],[141,192],[191,158],[348,429],[179,-79],[212,-158],[185,-203],[354,-350],[272,-12],[256,0],[299,68],[299,79],[229,158],[190,169],[310,23],[207,124],[218,-113],[141,-180],[196,-181],[305,23],[190,-147],[332,-147],[348,-56],[288,45],[218,181],[185,180],[250,45],[251,-79],[288,-56],[261,90],[250,0],[245,-56],[256,-57],[250,102],[299,90],[283,23],[316,0],[255,56],[251,45],[76,282],[11,237],[174,-158],[49,-259],[92,-237],[115,-192],[234,-102],[315,34],[365,12],[250,33],[364,0],[262,12],[364,-23],[310,-45],[196,-181],[-54,-214],[179,-169],[299,-136],[310,-146],[360,-102],[375,-90],[283,-90],[315,-12],[180,192],[245,-158],[212,-180],[245,-136],[337,-56],[321,-68],[136,-226],[316,-135],[212,-203],[310,-90],[321,11],[299,-34],[332,11],[332,-45],[310,-79],[288,-135],[289,-113],[195,-169],[-32,-226],[-147,-203],[-125,-260],[-98,-203],[-131,-237],[-364,-90],[-163,-203],[-360,-124],[-125,-226],[-190,-214],[-201,-181],[-115,-237],[-70,-214],[-28,-260],[6,-214],[158,-226],[60,-214],[130,-204],[517,-78],[109,-249],[-501,-90],[-424,-124],[-528,-23],[-234,-327],[-49,-271],[-119,-214],[-147,-215],[370,-191],[141,-237],[239,-215],[338,-192],[386,-180],[419,-181],[636,-180],[142,-282],[800,-125],[53,-44],[208,-170],[767,147],[636,-181],[-99520,-139]],[[69148,23827],[179,-181],[263,-72],[9,-110],[-77,-262],[-427,-37],[-7,306],[41,238],[19,118]],[[90387,28338],[269,-199],[151,79],[217,111],[166,-39],[20,-684],[-95,-198],[-29,-463],[-97,157],[-193,-401],[-57,31],[-171,18],[-171,493],[-38,380],[-160,502],[7,264],[181,-51]],[[89877,43903],[100,-452],[179,217],[92,-243],[133,-225],[-29,-255],[60,-494],[42,-288],[70,-70],[75,-492],[-27,-299],[90,-390],[301,-301],[197,-274],[186,-251],[-37,-139],[159,-361],[108,-623],[111,126],[113,-249],[68,88],[48,-610],[197,-354],[129,-220],[217,-466],[78,-463],[7,-328],[-19,-356],[132,-490],[-16,-509],[-48,-267],[-75,-514],[6,-330],[-55,-413],[-123,-524],[-205,-283],[-102,-446],[-93,-284],[-82,-497],[-107,-287],[-70,-431],[-36,-397],[14,-182],[-159,-200],[-311,-21],[-257,-236],[-127,-223],[-168,-248],[-230,255],[-170,101],[43,301],[-152,-109],[-243,-417],[-240,156],[-158,91],[-159,41],[-269,167],[-179,355],[-52,437],[-64,291],[-137,233],[-267,70],[91,279],[-67,428],[-136,-399],[-247,-106],[146,319],[42,332],[107,282],[-22,427],[-226,-491],[-174,-197],[-106,-458],[-217,237],[9,305],[-174,418],[-147,216],[52,133],[-356,349],[-195,16],[-267,280],[-498,-54],[-359,-206],[-317,-192],[-265,38],[-294,-296],[-241,-132],[-53,-302],[-103,-234],[-236,-14],[-174,-52],[-246,105],[-199,-62],[-191,-27],[-165,-307],[-81,26],[-140,-163],[-133,-183],[-203,23],[-186,0],[-295,368],[-149,109],[6,330],[138,79],[47,131],[-10,207],[34,400],[-31,341],[-147,582],[-45,329],[12,328],[-111,375],[-7,169],[-123,230],[-35,451],[-158,456],[-39,245],[122,-249],[-93,535],[137,-167],[83,-223],[-5,294],[-138,454],[-26,181],[-65,173],[31,333],[56,141],[38,289],[-29,336],[114,415],[21,-439],[118,396],[225,193],[136,245],[212,212],[126,45],[77,-71],[219,214],[168,64],[42,126],[74,53],[153,-14],[292,169],[151,256],[71,307],[163,293],[13,229],[7,314],[194,489],[117,-497],[119,115],[-99,272],[87,279],[122,-125],[34,439],[152,283],[67,227],[140,98],[4,161],[122,-67],[5,145],[122,82],[134,78],[205,-264],[155,-342],[173,-3],[177,-54],[-59,316],[133,462],[126,150],[-44,144],[121,329],[168,203],[142,-68],[234,108],[-5,294],[-204,190],[148,84],[184,-143],[148,-236],[234,-148],[79,59],[172,-177],[162,164],[105,-50],[65,111],[127,-285],[-74,-308],[-105,-233],[-96,-19],[32,-230],[-81,-288],[-99,-283],[20,-163],[221,-318],[214,-184],[143,-199],[201,-341],[78,1],[145,-148],[43,-178],[265,-195],[183,197],[55,309],[56,255],[34,316],[85,458],[-39,279],[20,167],[-32,330],[37,434],[53,117],[-43,192],[67,305],[52,317],[7,164],[104,216],[78,-282],[19,-361],[70,-70],[11,-242],[101,-293],[21,-326],[-10,-209]],[[54716,79543],[-21,-236],[-156,-1],[53,-125],[-92,-370]],[[54500,78811],[-53,-97],[-243,-15],[-140,-130],[-229,44]],[[53835,78613],[-398,149],[-62,200],[-274,-100],[-32,-109],[-169,81]],[[52900,78834],[-142,16],[-125,105],[42,141],[-10,102]],[[52665,79198],[83,32],[141,-160],[39,152],[245,-25],[199,104],[133,-18],[87,-118],[26,98],[-40,375],[100,73],[98,266]],[[53776,79977],[206,-186],[157,236],[98,43],[215,-176],[131,30],[128,-109]],[[54711,79815],[-23,-73],[28,-199]],[[62817,74140],[-190,76],[-141,266],[-44,217]],[[63495,75906],[146,-303],[141,-408],[130,-27],[85,-156],[-228,-46],[-49,-447],[-48,-202],[-101,-135],[7,-285]],[[63578,73897],[-69,-28],[-173,301],[95,285],[-82,169],[-104,-43],[-327,-424]],[[62492,75583],[68,94],[207,-165],[149,-34],[38,67],[-136,312],[72,79]],[[62890,75936],[78,-19],[191,-350],[122,-39],[48,146],[166,232]],[[58149,49238],[-17,694],[-70,262]],[[58062,50194],[169,-45],[85,328],[147,-38]],[[58463,50439],[16,-227],[60,-130],[3,-187],[-69,-121],[-108,-300],[-101,-209],[-115,-27]],[[50920,81398],[204,-45],[257,120],[176,-252],[153,-135]],[[51710,81086],[-32,-389]],[[51678,80697],[-72,-22],[-30,-323]],[[51576,80352],[-243,263],[-143,-45],[-194,272],[-129,231],[-129,9],[-40,203]],[[50698,81285],[222,113]],[[50747,55434],[-229,-68]],[[50518,55366],[-69,398],[13,1322],[-56,119],[-11,283],[-96,201],[-85,170],[35,303]],[[50249,58162],[96,66],[56,251],[136,54],[61,172]],[[50598,58705],[93,169],[100,2],[212,-332]],[[51003,58544],[-11,-191],[62,-342],[-54,-232],[29,-154],[-135,-357],[-86,-176],[-52,-364],[7,-366],[-16,-928]],[[49214,57382],[-190,149],[-130,-22],[-97,-145],[-125,122],[-49,190],[-125,126]],[[48498,57802],[-18,334],[76,244],[-7,195],[221,477],[41,395],[76,141],[134,-78],[116,117],[38,148],[216,259],[53,180],[259,238],[153,82],[70,-110],[178,3]],[[50104,60427],[-22,-280],[37,-262],[156,-376],[9,-279],[320,-130],[-6,-395]],[[50249,58162],[-243,13]],[[50006,58175],[-128,46],[-90,-93],[-123,42],[-482,-27],[-7,-327],[38,-434]],[[75742,64522],[-6,-413],[-97,88],[18,-464]],[[75657,63733],[-79,301],[-16,293],[-53,277],[-116,335],[-256,23],[25,-237],[-87,-321],[-118,117],[-41,-105],[-78,63],[-108,52]],[[74730,64531],[-43,474],[-96,433],[47,347],[-171,154],[62,210],[173,215],[-200,305],[98,390],[220,-248],[133,-29],[24,-400],[265,-79],[257,8],[160,-98],[-128,-487],[-124,-34],[-86,-327],[152,-299],[46,368],[76,2],[147,-914]],[[56293,77303],[80,-236],[108,42],[213,-90],[408,-30],[138,147],[327,133],[202,-209],[163,-60]],[[57932,77e3],[-144,-239],[-101,-412],[89,-328]],[[57776,76021],[-239,77],[-283,-181]],[[57254,75917],[-3,-287],[-252,-55],[-196,202],[-222,-159],[-206,17]],[[56375,75635],[-20,381],[-139,185]],[[56216,76201],[46,81],[-30,69],[47,183],[105,180],[-135,248],[-24,211],[68,130]],[[28462,65512],[-68,-29],[-70,332],[-104,167],[60,365],[84,-23],[97,-478],[1,-334]],[[28383,67136],[-303,-92],[-19,213],[130,46],[184,-17],[8,-150]],[[28611,67142],[-48,-409],[-51,73],[4,301],[-124,228],[-1,66],[220,-259]],[[55279,77663],[100,2],[-69,-253],[134,-222],[-41,-271],[-65,-25]],[[55338,76894],[-52,-53],[-90,-134],[-41,-316]],[[55155,76391],[-246,218],[-105,240],[-106,128],[-127,215],[-61,178],[-136,270],[59,239],[99,-133],[60,120],[130,13],[239,-96],[192,8],[126,-128]],[[56523,82877],[268,-4],[302,217],[64,325],[228,184],[-26,258]],[[57359,83857],[169,97],[298,222]],[[57826,84176],[293,-144],[39,-143],[146,68],[272,-137],[27,-270],[-60,-156],[174,-377],[113,-105],[-16,-104],[187,-101],[80,-154],[-108,-126],[-224,20],[-54,-53],[66,-192],[68,-368]],[[58829,81834],[-239,-34],[-85,-127],[-18,-290],[-111,56],[-250,-28],[-73,135],[-104,-100],[-105,83],[-218,11],[-310,139],[-281,45],[-215,-13],[-152,-156],[-133,-23]],[[56535,81532],[-6,257],[-85,267],[166,117],[2,230],[-77,219],[-12,255]],[[25238,62085],[-2,85],[33,26],[51,-68],[99,348],[53,7]],[[25472,62483],[1,-84],[53,-3],[-5,-157],[-45,-249],[24,-89],[-29,-206],[18,-55],[-32,-291],[-55,-153],[-50,-18],[-55,-199]],[[25297,60979],[-83,-1],[22,650],[2,457]],[[31359,38736],[-200,-79],[-109,794],[-150,646],[88,557],[-146,244],[-37,416],[-136,391]],[[30669,41705],[175,622],[-119,484],[63,194],[-49,213],[108,288],[6,490],[13,405],[60,195],[-240,926]],[[30686,45522],[206,-48],[143,12],[62,174],[243,234],[147,216],[363,98],[-29,-432],[34,-221],[-23,-386],[302,-516],[311,-95],[109,-216],[188,-114],[115,-167],[175,6],[161,-171],[12,-333],[55,-168],[3,-248],[-81,-10],[107,-671],[533,-23],[-41,-333],[30,-227],[151,-162],[66,-358],[-49,-453],[-77,-253],[27,-328],[-87,-119]],[[33842,40210],[-4,177],[-259,295],[-258,8],[-484,-167],[-133,-507],[-7,-310],[-110,-689]],[[34826,37007],[54,332],[38,340],[0,317],[-100,105],[-104,-94],[-103,26],[-33,222],[-26,527],[-52,172],[-187,156],[-114,-113],[-293,111],[18,782],[-82,320]],[[30686,45522],[-157,-99],[-126,66],[18,875],[-228,-339],[-245,15],[-105,307],[-184,33],[59,247],[-155,351],[-115,518],[73,106],[0,243],[168,166],[-28,312],[71,200],[20,269],[318,392],[227,111],[37,86],[251,-27]],[[30585,49354],[125,1579],[6,250],[-43,330],[-123,210],[1,418],[156,95],[56,-60],[9,221],[-162,60],[-4,360],[541,-13],[92,198],[77,-182],[55,-340],[52,71]],[[31423,52551],[153,-304],[216,37],[54,176],[206,135],[115,94],[32,244],[198,164],[-15,121],[-235,49],[-39,363],[12,386],[-125,149],[52,53],[206,-73],[221,-144],[80,136],[200,89],[310,216],[102,220],[-37,162]],[[33129,54824],[145,26],[64,-133],[-36,-253],[96,-87],[63,-268],[-77,-203],[-44,-490],[71,-291],[20,-267],[171,-270],[137,-28],[30,112],[88,25],[126,101],[90,153],[154,-48],[67,20]],[[34294,52923],[151,-47],[25,118],[-46,114],[28,167],[112,-51],[131,59],[159,-122]],[[34854,53161],[121,-119],[86,156],[62,-24],[38,-162],[133,41],[107,219],[85,424],[164,527]],[[35650,54223],[95,27],[69,-318],[155,-1008],[149,-95],[7,-397],[-208,-474],[86,-174],[491,-90],[10,-578],[211,378],[349,-207],[462,-351],[135,-338],[-45,-319],[323,178],[540,-305],[415,23],[411,-477],[355,-645],[214,-166],[237,-23],[101,-182],[94,-733],[46,-348],[-110,-953],[-142,-376],[-391,-801],[-177,-651],[-206,-499],[-69,-11],[-78,-424],[20,-1079],[-77,-888],[-30,-379],[-88,-228],[-49,-769],[-282,-752],[-47,-595],[-225,-250],[-65,-345],[-302,2],[-437,-222],[-195,-256],[-311,-168],[-327,-459],[-235,-571],[-41,-430],[46,-318],[-51,-582],[-63,-281],[-195,-317],[-308,-1013],[-244,-457],[-189,-269],[-127,-548],[-183,-329]],[[35174,32383],[-77,326],[122,273],[-160,392],[-218,318],[-286,369],[-103,-17],[-279,446],[-180,-62]],[[81723,54436],[110,215],[236,316]],[[82069,54967],[-13,-284],[-16,-368],[-133,18],[-58,-196],[-126,299]],[[75471,67823],[113,-184],[-20,-354],[-227,-17],[-234,39],[-175,-90],[-252,218],[-6,115]],[[74670,67550],[184,429],[150,146],[198,-134],[147,-14],[122,-154]],[[58175,39107],[-393,-424],[-249,-430],[-93,-383],[-83,-217],[-152,-46],[-48,-275],[-28,-180],[-178,-134],[-226,28],[-133,162],[-117,70],[-135,-134],[-68,-276],[-132,-173],[-139,-257],[-199,-59],[-62,202],[26,351],[-165,548],[-75,86]],[[55526,37566],[0,1681],[274,20],[8,2051],[207,19],[428,202],[106,-238],[177,226],[85,1],[156,130]],[[56967,41658],[50,-43]],[[57017,41615],[107,-460],[56,-103],[87,-333],[315,-633],[119,-62],[0,-203],[82,-365],[215,-88],[177,-261]],[[54244,56103],[229,44],[52,148],[46,-11],[69,-131],[350,221],[118,224],[145,202],[-28,202],[78,53],[269,-35],[261,266],[201,629],[141,233],[176,98]],[[56351,58246],[31,-246],[160,-360],[1,-235],[-45,-240],[18,-179],[96,-166]],[[56612,56820],[212,-252]],[[56824,56568],[152,-232],[2,-188],[187,-299],[116,-250],[70,-345],[208,-228],[44,-183]],[[57603,54843],[-91,-61],[-178,14],[-209,60],[-104,-49],[-41,-140],[-90,-17],[-110,121],[-309,-287],[-127,58],[-38,-45],[-83,-347],[-207,112],[-203,57],[-177,212],[-229,196],[-149,-186],[-108,-292],[-25,-402]],[[55125,53847],[-178,33],[-188,96],[-166,-305],[-146,-536]],[[54447,53135],[-29,167],[-12,263],[-127,185],[-103,297],[-23,207],[-132,301],[23,171],[-28,243],[21,446],[67,105],[140,583]],[[32315,78637],[202,-78],[257,16],[-137,-236],[-102,-37],[-353,244],[-69,193],[105,177],[97,-279]],[[32831,80108],[-135,-10],[-360,180],[-258,272],[96,49],[365,-145],[284,-240],[8,-106]],[[15692,79765],[-140,-80],[-456,262],[-84,204],[-248,202],[-50,164],[-286,103],[-107,314],[24,133],[291,-125],[171,-88],[261,-61],[94,-198],[138,-274],[277,-238],[115,-318]],[[34407,81019],[-184,-504],[181,195],[187,-124],[-98,-200],[247,-158],[128,140],[277,-177],[-86,-422],[194,99],[36,-306],[86,-358],[-117,-507],[-125,-21],[-183,109],[60,471],[-77,73],[-322,-499],[-166,20],[196,270],[-267,140],[-298,-34],[-539,17],[-43,171],[173,202],[-121,157],[234,347],[287,917],[172,328],[241,198],[129,-25],[-54,-156],[-148,-363]],[[13005,83025],[131,-75],[267,46],[-84,-654],[242,-463],[-111,1],[-167,264],[-103,265],[-140,179],[-51,253],[16,184]],[[27981,87625],[-108,-302],[-123,49],[-73,171],[13,40],[107,173],[114,-13],[70,-118]],[[27250,87943],[-325,-317],[-196,13],[-61,156],[207,265],[381,-5],[-6,-112]],[[26344,89640],[51,-253],[143,89],[161,-151],[304,-198],[318,-179],[25,-274],[204,45],[199,-191],[-247,-181],[-432,138],[-156,259],[-275,-306],[-396,-298],[-95,337],[-377,-55],[242,284],[35,454],[95,527],[201,-47]],[[28926,90499],[-312,-29],[-69,282],[118,323],[255,80],[217,-160],[3,-246],[-32,-80],[-180,-170]],[[23431,91627],[-173,-202],[-374,175],[-226,-63],[-380,259],[245,178],[194,250],[295,-164],[166,-103],[84,-110],[169,-220]],[[31350,77823],[-181,326],[0,785],[-123,166],[-187,-98],[-92,152],[-212,-435],[-84,-448],[-99,-262],[-118,-89],[-89,-29],[-28,-142],[-512,-1],[-422,-4],[-125,-106],[-294,-414],[-34,-45],[-89,-225],[-255,0],[-273,-2],[-125,-91],[44,-113],[25,-176],[-5,-58],[-363,-287],[-286,-90],[-323,-308],[-70,0],[-94,91],[-31,82],[6,60],[61,202],[131,317],[81,340],[-56,500],[-59,523],[-290,270],[35,103],[-41,70],[-76,0],[-56,91],[-14,137],[-54,-60],[-75,18],[17,57],[-65,57],[-27,151],[-216,185],[-224,191],[-272,223],[-261,209],[-248,-163],[-91,-6],[-342,150],[-225,-75],[-269,179],[-284,91],[-194,36],[-86,97],[-49,317],[-94,-3],[-1,-221],[-575,0],[-951,0],[-944,-1],[-833,1],[-834,0],[-819,0],[-847,0],[-273,0],[-825,0],[-788,0]],[[15878,80048],[-38,1],[-537,566],[-199,248],[-503,239],[-155,510],[40,353],[-356,245],[-48,464],[-336,419],[-6,296]],[[13740,83389],[154,278],[-7,363],[-473,367],[-284,657],[-173,413],[-255,259],[-187,236],[-147,298],[-279,-187],[-270,-321],[-247,378],[-194,252],[-271,160],[-273,17],[1,3279],[2,2137]],[[10837,91975],[518,-139],[438,-277],[289,-53],[244,241],[336,179],[413,-70],[416,253],[455,144],[191,-239],[207,134],[62,272],[192,-62],[470,-516],[369,390],[38,-437],[341,95],[105,168],[337,-33],[424,-242],[650,-211],[383,-98],[272,37],[374,-292],[-390,-286],[502,-123],[750,68],[236,100],[296,-345],[302,291],[-283,245],[179,197],[338,26],[223,58],[224,-138],[279,-312],[310,46],[491,-260],[431,91],[405,-13],[-32,358],[247,100],[431,-195],[-2,-545],[177,459],[223,-15],[126,579],[-298,355],[-324,233],[22,636],[329,418],[366,-92],[281,-255],[378,-649],[-247,-283],[517,-116],[-1,-589],[371,451],[332,-371],[-83,-427],[269,-388],[290,416],[202,497],[16,632],[394,-44],[411,-85],[373,-286],[17,-285],[-207,-307],[196,-309],[-36,-280],[-544,-403],[-386,-88],[-287,173],[-83,-289],[-268,-486],[-81,-252],[-322,-389],[-397,-38],[-220,-244],[-18,-374],[-323,-72],[-340,-467],[-301,-648],[-108,-454],[-16,-669],[409,-96],[125,-539],[130,-437],[388,114],[517,-250],[277,-219],[199,-272],[348,-158],[294,-243],[459,-33],[302,-56],[-45,-499],[86,-578],[201,-645],[414,-547],[214,188],[150,592],[-145,909],[-196,303],[445,270],[314,404],[154,401],[-23,385],[-188,489],[-338,434],[328,603],[-121,522],[-93,899],[194,133],[476,-157],[286,-56],[230,152],[258,-196],[342,-333],[85,-224],[495,-44],[-8,-483],[92,-728],[254,-90],[201,-339],[402,319],[266,636],[184,267],[216,-514],[362,-734],[307,-691],[-112,-362],[370,-325],[250,-329],[442,-149],[179,-183],[110,-488],[216,-76],[112,-217],[20,-647],[-202,-217],[-199,-202],[-458,-205],[-349,-473],[-470,-93],[-594,121],[-417,4],[-287,-40],[-233,-413],[-354,-255],[-401,-762],[-320,-532],[236,95],[446,756],[583,480],[415,58],[246,-283],[-262,-387],[88,-620],[91,-435],[361,-287],[459,83],[278,647],[19,-417],[180,-209],[-344,-377],[-615,-343],[-276,-233],[-310,-415],[-211,43],[-11,487],[483,476],[-445,-19],[-309,-70]],[[18287,93939],[-139,-270],[618,174],[386,-291],[314,294],[254,-188],[227,-566],[140,238],[-197,590],[244,85],[276,-93],[311,-232],[175,-561],[86,-406],[466,-285],[502,-273],[-31,-253],[-456,-47],[178,-221],[-94,-211],[-503,90],[-478,156],[-322,-35],[-522,-196],[-704,-86],[-494,-54],[-151,271],[-379,157],[-246,-64],[-343,456],[185,61],[429,99],[392,-26],[362,100],[-537,135],[-594,-46],[-394,11],[-146,213],[644,230],[-428,-8],[-485,152],[233,431],[193,229],[744,351],[284,-111]],[[20972,94111],[-244,-381],[-434,404],[95,80],[372,23],[211,-126]],[[28794,93928],[25,-159],[-296,16],[-299,13],[-304,-78],[-80,35],[-306,306],[12,207],[133,38],[636,-62],[479,-316]],[[25955,93959],[219,-359],[256,465],[704,236],[477,-596],[-42,-377],[550,168],[263,228],[616,-291],[383,-274],[36,-252],[515,131],[290,-367],[670,-228],[242,-232],[263,-539],[-510,-268],[654,-376],[441,-127],[400,-529],[437,-38],[-87,-404],[-487,-669],[-342,246],[-437,554],[-359,-72],[-35,-330],[292,-335],[377,-265],[114,-153],[181,-570],[-96,-414],[-350,156],[-697,461],[393,-496],[289,-348],[45,-201],[-753,230],[-596,334],[-337,281],[97,162],[-414,296],[-405,280],[5,-167],[-803,-92],[-235,198],[183,424],[522,10],[571,74],[-92,205],[96,287],[360,561],[-77,255],[-107,197],[-425,280],[-563,196],[178,145],[-294,358],[-245,33],[-219,196],[-149,-170],[-503,-74],[-1011,129],[-588,169],[-450,87],[-231,202],[290,263],[-394,2],[-88,583],[213,515],[286,235],[717,154],[-204,-373]],[[22123,94355],[331,-122],[496,73],[72,-167],[-259,-276],[420,-248],[-50,-518],[-455,-223],[-268,48],[-192,220],[-690,444],[5,185],[567,-72],[-306,377],[329,279]],[[24112,93737],[-298,-430],[-317,21],[-173,506],[4,287],[145,244],[276,157],[579,-20],[530,-140],[-415,-513],[-331,-112]],[[16539,92938],[-731,-278],[-147,253],[-641,304],[119,244],[192,421],[241,378],[-272,353],[939,90],[397,-119],[709,-32],[270,-167],[298,-243],[-349,-145],[-681,-405],[-344,-403],[0,-251]],[[23996,95009],[-151,-223],[-403,43],[-337,150],[148,259],[399,155],[243,-202],[101,-182]],[[22639,96011],[212,-267],[9,-295],[-127,-429],[-458,-59],[-298,92],[5,336],[-455,-44],[-18,445],[299,-18],[419,197],[390,-34],[22,76]],[[19941,95712],[109,-205],[247,97],[291,-25],[49,-282],[-169,-274],[-940,-89],[-701,-249],[-423,-13],[-35,187],[577,255],[-1255,-69],[-389,103],[379,563],[262,161],[782,-194],[493,-341],[485,-44],[-397,551],[255,210],[286,-67],[94,-275]],[[23699,96229],[308,-186],[547,2],[240,-190],[-64,-216],[319,-130],[177,-137],[374,-26],[406,-48],[441,125],[566,49],[451,-40],[298,-218],[62,-238],[-174,-153],[-414,-124],[-355,70],[-797,-88],[-570,-11],[-449,71],[-738,186],[-96,316],[-34,286],[-279,251],[-574,70],[-322,179],[104,236],[573,-36]],[[17722,96544],[-38,-443],[-214,-199],[-259,-29],[-517,-246],[-444,-88],[-377,124],[472,431],[570,373],[426,-8],[381,85]],[[23933,96472],[-126,-17],[-521,37],[-74,161],[559,-9],[195,-107],[-33,-65]],[[19392,96574],[-518,-166],[-411,186],[224,183],[406,59],[392,-90],[-93,-172]],[[19538,97095],[-339,-113],[-461,1],[5,82],[285,173],[149,-27],[361,-116]],[[23380,96781],[-411,-119],[-226,134],[-119,216],[-22,238],[360,-23],[162,-38],[332,-200],[-76,-208]],[[22205,96935],[108,-240],[-453,64],[-457,187],[-619,21],[268,171],[-335,139],[-21,221],[546,-79],[751,-210],[212,-274]],[[25828,97704],[334,-186],[-381,-171],[-513,-434],[-492,-41],[-575,74],[-299,235],[4,208],[220,154],[-508,-5],[-306,192],[-176,261],[193,256],[192,175],[285,41],[-122,132],[646,29],[355,-308],[468,-123],[455,-109],[220,-380]],[[30972,99689],[742,-45],[597,-74],[508,-156],[-12,-154],[-678,-250],[-672,-117],[-251,-129],[605,3],[-656,-349],[-452,-163],[-476,-470],[-573,-96],[-177,-117],[-841,-62],[383,-72],[-192,-103],[230,-284],[-264,-198],[-429,-163],[-132,-225],[-388,-172],[39,-130],[475,22],[6,-141],[-742,-345],[-726,159],[-816,-89],[-414,69],[-525,30],[-35,277],[514,130],[-137,415],[170,41],[742,-249],[-379,370],[-450,110],[225,223],[492,137],[79,201],[-392,225],[-118,297],[759,-25],[220,-63],[433,210],[-625,67],[-972,-37],[-491,196],[-232,232],[-324,169],[-61,197],[413,110],[324,18],[545,94],[409,214],[344,-30],[300,-161],[211,311],[367,92],[498,64],[849,24],[148,-63],[802,98],[601,-37],[602,-36]],[[52900,78834],[-22,-236],[-122,-97],[-206,72],[-60,-232],[-132,-18],[-48,91],[-156,-195],[-134,-28],[-120,124]],[[51900,78315],[-95,252],[-133,-90],[5,261],[203,323],[-9,147],[126,-53],[77,98]],[[52074,79253],[236,-4],[57,125],[298,-176]],[[31400,20215],[-92,-233],[-238,-178],[-137,18],[-164,46],[-202,174],[-291,83],[-350,322],[-283,309],[-383,645],[229,-121],[390,-384],[369,-207],[143,264],[90,394],[256,238],[198,-68]],[[30952,21711],[-247,4],[-134,-141],[-250,-208],[-45,-538],[-118,-14],[-313,188],[-318,401],[-346,329],[-87,365],[79,337],[-140,383],[-36,982],[119,554],[293,445],[-422,168],[265,509],[94,956],[309,-202],[145,1193],[-186,153],[-87,-719],[-175,81],[87,823],[95,1067],[127,394],[-80,562],[-22,649],[117,18],[170,930],[192,922],[118,858],[-64,863],[83,475],[-34,711],[163,703],[50,1114],[89,1196],[87,1287],[-20,943],[-58,811]],[[30452,41263],[143,147],[74,295]],[[80649,62586],[-240,-277],[-228,179],[-8,495],[137,261],[304,161],[159,-13],[62,-220],[-122,-254],[-64,-332]],[[86288,76244],[-179,340],[-111,-323],[-429,-248],[44,-304],[-241,21],[-131,181],[-191,-409],[-306,-309],[-227,-370]],[[84517,74823],[-388,-167],[-204,-269],[-300,-157],[148,267],[-58,224],[220,387],[-147,302],[-242,-204],[-314,-400],[-171,-372],[-272,-28],[-142,-268],[147,-390],[227,-94],[9,-259],[220,-168],[311,411],[247,-224],[179,-15],[45,-302],[-393,-161],[-130,-311],[-270,-289],[-142,-403],[299,-316],[109,-567],[169,-527],[189,-443],[-5,-428],[-174,-157],[66,-307],[164,-179],[-43,-469],[-71,-456],[-155,-52],[-203,-623],[-225,-756],[-258,-687],[-382,-532],[-386,-484],[-313,-67],[-170,-255],[-96,186],[-157,-286],[-388,-288],[-294,-88],[-95,-609],[-154,-33],[-73,418],[66,222],[-373,185],[-131,-94]],[[80013,64241],[-280,149],[-132,234],[44,332],[-254,105],[-134,216],[-236,-307],[-271,-66],[-221,3],[-149,-141]],[[78380,64766],[-144,-84],[42,-659],[-148,16],[-25,135]],[[78105,64174],[-9,238],[-203,-167],[-121,106],[-206,216],[81,478],[-176,112],[-66,530],[-293,-96],[33,684],[263,480],[11,475],[-8,441],[-121,137],[-93,339],[-162,-42]],[[77035,68105],[-300,86],[94,242],[-130,358],[-198,-243],[-233,142],[-321,-367],[-252,-428],[-224,-72]],[[74670,67550],[-23,454],[-170,-121]],[[74477,67883],[-324,56],[-314,132],[-225,253],[-216,114],[-93,276],[-157,83],[-280,375],[-223,177],[-115,-138]],[[72530,69211],[-386,403],[-273,365],[-78,635],[200,-78],[9,294],[-111,295],[28,470],[-298,675]],[[71621,72270],[-457,233],[-82,442],[-205,269]],[[70827,73379],[-42,328],[10,224],[-169,131],[-91,-58],[-70,533]],[[70465,74537],[79,132],[-39,135],[266,272],[192,112],[294,-77],[105,368],[356,68],[99,229],[438,312],[39,130]],[[72294,76218],[-22,328],[190,150],[-250,1e3],[550,231],[143,128],[200,1031],[551,-190],[155,261],[13,577],[230,54],[212,383]],[[74266,80171],[109,48]],[[74375,80219],[73,-402],[233,-306],[396,-216],[192,-464],[-107,-673],[100,-249],[330,-99],[374,-80],[336,-359],[171,-64],[127,-531],[163,-342],[306,14],[574,-129],[369,80],[274,-86],[411,-350],[336,1],[123,-179],[324,309],[448,200],[417,21],[324,203],[200,309],[194,193],[-45,190],[-89,222],[146,371],[156,-52],[286,-117],[277,306],[423,223],[204,380],[195,164],[404,77],[219,-65],[30,204],[-251,403],[-223,184],[-214,-212],[-274,89],[-157,-73],[-72,236],[197,575],[135,434]],[[82410,80559],[333,-217],[392,364],[-3,253],[251,611],[155,184],[-4,318],[-152,137],[229,287],[345,104],[369,15],[415,-171],[244,-212],[172,-581],[104,-248],[97,-354],[103,-564],[483,-184],[329,-409],[112,-541],[423,-1],[240,227],[459,170],[-146,-518],[-107,-211],[-96,-631],[-186,-560],[-338,102],[-238,-203],[73,-494],[-40,-680],[-142,-16],[2,-292]],[[49206,54706],[-126,-6],[-194,112],[-178,-6],[-329,-101],[-193,-166],[-275,-211],[-54,15]],[[47857,54343],[22,474],[26,72],[-8,227],[-118,241],[-88,39],[-81,158],[60,256],[-28,278],[13,168]],[[47655,56256],[44,0],[17,251],[-22,112],[27,80],[103,69],[-69,461],[-64,238],[23,195],[55,45]],[[47769,57707],[36,52],[77,-86],[215,-5],[51,168],[48,-11],[80,65],[43,-246],[65,72],[114,86]],[[49214,57382],[74,-819],[-117,-484],[-73,-650],[121,-496],[-13,-227]],[[53632,53135],[-35,31],[-164,-74],[-169,77],[-132,-38]],[[53132,53131],[-452,14]],[[52680,53145],[40,454],[-108,381],[-127,98],[-56,258],[-72,82],[4,159]],[[52361,54577],[71,408],[132,556],[81,5],[165,337],[105,9],[156,-236],[191,194],[26,239],[63,232],[43,291],[148,238],[56,403],[59,128],[39,299],[74,368],[234,446],[14,191],[31,104],[-110,229]],[[53939,59018],[9,184],[78,33]],[[54026,59235],[111,-369],[18,-382],[-10,-383],[151,-523],[-155,6],[-78,-41],[-127,57],[-60,-271],[164,-336],[121,-98],[39,-239],[87,-397],[-43,-156]],[[54447,53135],[-20,-311],[-220,136],[-225,152],[-350,23]],[[58564,53850],[-16,-673],[111,-78],[-89,-205],[-107,-153],[-106,-300],[-59,-268],[-15,-462],[-65,-220],[-2,-434]],[[58216,51057],[-80,-161],[-10,-342],[-38,-45],[-26,-315]],[[58149,49238],[50,-530],[-27,-299],[55,-334],[161,-323],[150,-726]],[[58538,47026],[-109,59],[-373,-97],[-75,-69],[-79,-368],[62,-254],[-49,-681],[-34,-578],[75,-103],[194,-224],[76,105],[23,-621],[-212,4],[-114,317],[-103,246],[-213,80],[-62,302],[-170,-182],[-222,81],[-93,261],[-176,53],[-131,-14],[-15,179],[-96,15]],[[53422,48316],[-39,179]],[[53609,49076],[73,-59],[95,221],[152,-6],[17,-163],[104,-102],[164,361],[161,281],[71,185],[-10,473],[121,560],[127,296],[183,278],[32,184],[7,211],[45,200],[-14,326],[34,510],[55,360],[83,308],[16,347]],[[57603,54843],[169,-475],[124,-70],[75,97],[128,-38],[155,122],[66,-246],[244,-383]],[[53309,48928],[-228,610]],[[53081,49538],[212,318],[-105,381],[95,144],[187,71],[23,255],[148,-276],[245,-25],[85,273],[36,382],[-31,450],[-131,341],[120,667],[-69,114],[-207,-47],[-78,298],[21,251]],[[29063,51742],[-119,136],[-137,191],[-79,-92],[-235,80],[-68,248],[-52,-9],[-278,329]],[[28095,52625],[-37,178],[103,44],[-12,288],[65,209],[138,38],[117,362],[106,302],[-102,137],[52,335],[-62,526],[59,152],[-44,487],[-112,306]],[[28366,55989],[36,280],[89,-41],[52,171],[-64,339],[34,85]],[[28513,56823],[143,-19],[209,402],[114,62],[3,190],[51,487],[159,267],[175,11],[22,120],[218,-48],[218,291],[109,128],[134,278],[98,-36],[73,-151],[-54,-194]],[[30185,58611],[-178,-96],[-71,-288],[-107,-165],[-81,-215],[-34,-410],[-77,-337],[144,-39],[35,-265],[62,-126],[21,-232],[-33,-213],[10,-120],[69,-48],[66,-201],[357,55],[161,-73],[196,-496],[112,62],[200,-31],[158,66],[99,-99],[-50,-311],[-62,-193],[-22,-413],[56,-383],[79,-171],[9,-129],[-140,-286],[100,-127],[74,-202],[85,-574]],[[30585,49354],[-139,306],[-83,14],[179,586],[-213,270],[-166,-50],[-101,100],[-153,-152],[-207,72],[-163,603],[-129,149],[-89,272],[-184,272],[-74,-54]],[[26954,56566],[-151,128],[-56,121],[32,100],[-11,127],[-77,138],[-109,113],[-95,74],[-19,168],[-73,103],[18,-167],[-55,-138],[-64,160],[-89,57],[-38,116],[2,175],[36,182],[-78,81],[64,111]],[[26191,58215],[42,74],[183,-152],[63,75],[89,-48],[46,-119],[82,-38],[66,122]],[[26762,58129],[70,-313],[108,-232],[130,-246]],[[27070,57338],[-107,-51],[1,-232],[58,-86],[-41,-68],[10,-104],[-23,-117],[-14,-114]],[[27147,65183],[240,-41],[219,-6],[261,-197],[110,-210],[260,65],[98,-136],[235,-356],[173,-260],[92,8],[165,-118],[-20,-162],[205,-23],[210,-236],[-33,-135],[-185,-73],[-187,-29],[-191,46],[-398,-56],[186,321],[-113,150],[-179,38],[-96,166],[-66,328],[-157,-22],[-259,154],[-83,121],[-362,89],[-97,113],[104,144],[-273,29],[-199,-299],[-115,-8],[-40,-141],[-138,-63],[-118,55],[146,178],[60,208],[126,128],[142,112],[210,55],[67,63]],[[59092,72066],[19,3],[40,139],[200,-8],[253,172],[-188,-245],[21,-108]],[[59437,72019],[-30,20],[-53,-44],[-42,12],[-14,-22],[-5,59],[-20,35],[-54,6],[-75,-49],[-52,30]],[[59437,72019],[8,-46],[-285,-234],[-136,74],[-64,232],[132,21]],[[53776,79977],[-157,247],[-141,139],[-30,243],[-49,171],[202,125],[103,144],[200,111],[70,110],[73,-66],[124,60]],[[54171,81261],[132,-186],[207,-50],[-17,-158],[151,-119],[41,148],[191,-64],[26,-180],[207,-35],[127,-284]],[[55236,80333],[-82,0],[-43,-104],[-64,-25],[-18,-131],[-54,-28],[-7,-53],[-95,-60],[-123,10],[-39,-127]],[[52756,83493],[4,-222],[281,-135],[-3,-204],[283,108],[156,158],[313,-228],[132,-183]],[[53922,82787],[64,-293],[-77,-154],[101,-205],[69,-308],[-22,-199],[114,-367]],[[52074,79253],[35,410],[140,395],[-400,106],[-131,151]],[[51718,80315],[16,252],[-56,130]],[[51710,81086],[-47,604],[167,0],[70,217],[69,527],[-51,195]],[[51918,82629],[54,122],[232,31],[52,-127],[188,284],[-63,216],[-13,326]],[[52368,83481],[210,-76],[178,88]],[[61966,59143],[66,-178],[-9,-240],[-158,-137],[119,-158]],[[61984,58430],[-102,-308]],[[61882,58122],[-62,103],[-67,-41],[-155,9],[-4,176],[-22,159],[94,269],[98,255]],[[61764,59052],[119,-50],[83,141]],[[53524,83854],[-166,-466],[-291,325],[-39,239],[408,191],[88,-289]],[[52368,83481],[-113,320],[-8,589],[46,155],[80,173],[244,36],[98,159],[223,162],[-9,-296],[-82,-188],[33,-161],[151,-87],[-68,-217],[-83,62],[-200,-415],[76,-280]],[[30080,63183],[34,98],[217,-3],[165,-148],[73,14],[50,-204],[152,11],[-9,-171],[124,-21],[136,-211],[-103,-235],[-132,126],[-127,-25],[-92,28],[-50,-105],[-106,-36],[-43,140],[-92,-83],[-111,-394],[-71,92],[-14,165]],[[30081,62221],[5,157],[-71,172],[68,97],[21,222],[-24,314]],[[53333,65346],[-952,-1097],[-804,-1132],[-392,-257]],[[51185,62860],[-308,-56],[-3,366],[-129,94],[-173,165],[-66,270],[-937,1256],[-937,1257]],[[48632,66212],[-1045,1394]],[[47587,67606],[6,112],[-1,38]],[[47592,67756],[-2,682],[449,425],[277,88],[227,155],[107,288],[324,228],[12,427],[161,50],[126,213],[363,97],[51,224],[-73,122],[-96,608],[-17,350],[-104,369]],[[49397,72082],[267,315],[300,100],[175,238],[268,175],[471,102],[459,47],[140,-85],[262,227],[297,4],[113,-134],[190,35]],[[52339,73106],[-57,-295],[44,-549],[-65,-475],[-171,-322],[24,-433],[227,-344],[3,-139],[171,-232],[118,-1034]],[[52633,69283],[90,-509],[15,-267],[-49,-470],[21,-263],[-36,-315],[24,-362],[-110,-240],[164,-420],[11,-247],[99,-321],[130,105],[219,-267],[122,-361]],[[27693,49869],[148,430],[-60,251],[-106,-267],[-166,252],[56,163],[-47,522],[97,87],[52,359],[105,371],[-20,235],[153,123],[190,230]],[[29063,51742],[38,-438],[-86,-374],[-303,-603],[-334,-227],[-170,-501],[-53,-389],[-157,-237],[-116,291],[-113,62],[-114,-45],[-8,211],[79,137],[-33,240]],[[59700,68819],[-78,-232],[-60,-435],[-75,-300],[-65,-100],[-93,186],[-125,257],[-198,825],[-29,-52],[115,-608],[171,-579],[210,-897],[102,-313],[90,-325],[249,-638],[-55,-100],[9,-374],[323,-517],[49,-118]],[[60240,64499],[-1102,0],[-1077,0],[-1117,0]],[[56944,64499],[0,2120],[0,2048],[-83,464],[71,356],[-43,246],[101,276]],[[56990,70009],[369,10],[268,-152],[275,-171],[129,-89],[214,182],[114,165],[245,48],[198,-73],[75,-286],[65,189],[222,-136],[217,-33],[137,145]],[[59518,69808],[182,-989]],[[61764,59052],[-95,187],[-114,337],[-124,185],[-71,199],[-242,231],[-191,7],[-67,120],[-163,-135],[-168,261],[-87,-430],[-323,121]],[[60119,60135],[-30,230],[120,847],[27,382],[88,177],[204,95],[141,328]],[[60669,62194],[161,-666],[77,-529],[152,-281],[379,-544],[154,-328],[151,-332],[87,-198],[136,-173]],[[47490,75948],[14,410],[-114,250],[393,415],[340,-104],[373,4],[296,-98],[230,30],[449,-19]],[[49471,76836],[111,-224],[511,-262],[101,125],[313,-261],[322,75]],[[50829,76289],[15,-335],[-263,-383],[-356,-122],[-25,-194],[-171,-319],[-107,-469],[108,-329],[-160,-257],[-60,-374],[-210,-115],[-197,-443],[-352,-8],[-265,10],[-174,-203],[-106,-218],[-136,48],[-103,195],[-79,331],[-259,89]],[[47929,73193],[-23,191],[103,216],[38,156],[-96,172],[77,378],[-111,345],[120,48],[11,272],[45,84],[3,449],[129,156],[-78,289],[-162,20],[-47,-72],[-164,-1],[-70,282],[-113,-84],[-101,-146]],[[56753,85111],[32,340],[-102,-72],[-176,204],[-24,331],[351,161],[350,83],[301,-95],[287,17]],[[57772,86080],[42,-100],[-198,-332],[83,-537],[-120,-183]],[[57579,84928],[-229,1],[-239,214],[-121,70],[-237,-102]],[[61882,58122],[-61,-204],[103,-317],[102,-277],[106,-206],[909,-683],[233,3]],[[63274,56438],[-785,-1728],[-362,-26],[-247,-406],[-178,-10],[-76,-182]],[[61626,54086],[-190,0],[-112,195],[-254,-241],[-82,-240],[-185,45],[-62,67],[-65,-16],[-87,6],[-352,489],[-193,0],[-95,189],[0,324],[-145,96]],[[59804,55e3],[-164,627],[-127,133],[-48,231],[-141,280],[-171,42],[95,328],[147,14],[42,176]],[[59437,56831],[-4,517]],[[59433,57348],[82,603],[132,161],[28,236],[119,440],[168,285],[112,567],[45,495]],[[57942,91602],[-41,-403],[425,-383],[-256,-435],[323,-655],[-187,-494],[250,-429],[-113,-375],[411,-394],[-105,-294],[-258,-333],[-594,-735]],[[57797,86672],[-504,-46],[-489,-211],[-452,-121],[-161,314],[-269,189],[62,567],[-135,520],[133,335],[252,362],[635,624],[185,121],[-28,243],[-387,272]],[[56639,89841],[-93,225],[-8,886],[-433,392],[-371,282]],[[55734,91626],[167,152],[309,-304],[362,29],[298,-140],[265,255],[137,422],[431,196],[356,-229],[-117,-405]],[[99547,41844],[96,-167],[-46,-300],[-172,-79],[-153,71],[-27,253],[107,198],[126,-71],[69,95]],[[0,42577],[57,26],[-34,-277],[-23,-31],[99822,-141],[-177,-122],[-36,215],[139,118],[88,32],[-99836,180]],[[33e3,21970],[333,345],[236,-144],[167,231],[222,-259],[-83,-202],[-375,-173],[-125,202],[-236,-259],[-139,259]],[[34854,53161],[70,246],[24,262],[48,246],[-107,340]],[[34889,54255],[-22,394],[144,495]],[[35011,55144],[95,-63],[204,-136],[294,-486],[46,-236]],[[52655,76104],[-92,-445],[-126,118],[-64,387],[56,214],[179,220],[47,-494]],[[51576,80352],[62,-50],[80,13]],[[51900,78315],[-11,-163],[82,-216],[-97,-176],[72,-445],[151,-73],[-32,-250]],[[52065,76992],[-252,-326],[-548,156],[-404,-186],[-32,-347]],[[49471,76836],[144,345],[53,1147],[-287,605],[-205,291],[-424,222],[-28,420],[360,125],[466,-148],[-88,652],[263,-247],[646,449],[84,472],[243,116]],[[53081,49538],[-285,581],[-184,475],[-169,595],[9,192],[61,184],[67,419],[56,427]],[[52636,52411],[94,33],[404,-6],[-2,693]],[[48278,82851],[-210,118],[-172,-8],[57,309],[-57,309]],[[47896,83579],[233,23],[298,-356],[-149,-395]],[[49165,85596],[-297,-623],[283,79],[304,-3],[-72,-469],[-250,-516],[287,-37],[22,-61],[248,-679],[190,-93],[171,-656],[79,-227],[337,-110],[-34,-368],[-142,-169],[111,-298],[-250,-302],[-371,6],[-473,-159],[-130,114],[-183,-270],[-257,65],[-195,-220],[-148,115],[407,605],[249,125],[-2,0],[-434,96],[-79,229],[291,179],[-152,310],[52,377],[413,-52],[1,0],[40,334],[-186,355],[-4,8],[-337,101],[-66,156],[101,258],[-92,158],[-149,-272],[-17,555],[-140,294],[101,595],[216,467],[222,-45],[335,48]],[[61542,75749],[42,246],[-70,393],[-160,212],[-154,66],[-102,177]],[[61098,76843],[34,68],[235,-99],[409,-93],[378,-276],[48,-107],[169,90],[259,-120],[85,-236],[175,-134]],[[62106,75494],[-268,282],[-296,-27]],[[50294,55244],[-436,-337],[-154,-198],[-250,-167],[-248,164]],[[50006,58175],[-20,-180],[116,-297],[-1,-418],[27,-454],[69,-210],[-61,-518],[22,-287],[74,-365],[62,-202]],[[47655,56256],[-78,14],[-57,-232],[-78,3],[-55,123],[19,231],[-116,353],[-73,-65],[-59,-13]],[[47158,56670],[-77,-33],[3,211],[-44,151],[9,168],[-60,242],[-78,206],[-222,0],[-65,-108],[-76,-13],[-48,-125],[-32,-159],[-148,-254]],[[46320,56956],[-122,341],[-108,226],[-71,74],[-69,115],[-32,254],[-41,127],[-80,94]],[[45797,58187],[123,281],[84,-11],[73,97],[61,1],[44,76],[-24,191],[31,60],[5,195]],[[46194,59077],[134,-5],[200,-141],[61,13],[21,64],[151,-45],[40,32]],[[46801,58995],[16,-211],[44,1],[73,77],[46,-20],[77,-146],[119,-46],[76,125],[90,77],[67,80],[55,-15],[62,-126],[33,-159],[114,-241],[-57,-149],[-11,-187],[59,57],[35,-67],[-15,-172],[85,-166]],[[45321,59403],[36,255]],[[45357,59658],[302,17],[63,136],[88,10],[110,-142],[86,-3],[92,97],[56,-166],[-120,-130],[-121,11],[-119,121],[-103,-133],[-50,-5],[-67,-80],[-253,12]],[[45797,58187],[-149,241],[-117,38],[-63,162],[1,88],[-84,122],[-18,124]],[[45367,58962],[147,93],[92,-18],[75,65],[513,-25]],[[52636,52411],[-52,87],[96,647]],[[56583,72391],[152,-194],[216,33],[207,-41],[-7,-100],[151,69],[-35,-170],[-400,-49],[3,95],[-339,112],[52,245]],[[57237,75339],[-169,17],[-145,54],[-336,-150],[192,-323],[-141,-94],[-154,-1],[-147,297],[-52,-127],[62,-344],[139,-270],[-105,-126],[155,-265],[137,-167],[4,-326],[-257,153],[82,-294],[-176,-60],[105,-509],[-184,-7],[-228,251],[-104,460],[-49,384],[-108,264],[-143,329],[-18,164]],[[55838,75350],[182,51],[106,126],[150,-11],[46,100],[53,19]],[[57254,75917],[135,-153],[-86,-360],[-66,-65]],[[37010,99413],[932,344],[975,-26],[354,213],[982,55],[2219,-72],[1737,-457],[-513,-222],[-1062,-25],[-1496,-56],[140,-103],[984,63],[836,-198],[540,176],[231,-206],[-305,-335],[707,214],[1348,223],[833,-111],[156,-246],[-1132,-410],[-157,-133],[-888,-99],[643,-28],[-324,-420],[-224,-373],[9,-641],[333,-376],[-434,-24],[-457,-182],[513,-305],[65,-490],[-297,-53],[360,-495],[-617,-42],[322,-234],[-91,-203],[-391,-89],[-388,-2],[348,-390],[4,-256],[-549,238],[-143,-154],[375,-144],[364,-352],[105,-464],[-495,-111],[-214,222],[-344,331],[95,-391],[-322,-303],[732,-24],[383,-31],[-745,-502],[-755,-454],[-813,-199],[-306,-2],[-288,-222],[-386,-608],[-597,-404],[-192,-23],[-370,-142],[-399,-134],[-238,-357],[-4,-403],[-141,-378],[-453,-461],[112,-450],[-125,-476],[-142,-563],[-391,-35],[-410,471],[-556,3],[-269,315],[-186,563],[-481,716],[-141,375],[-38,517],[-384,532],[100,424],[-186,203],[275,673],[418,214],[110,241],[58,450],[-318,-204],[-151,-85],[-249,-83],[-341,188],[-19,392],[109,306],[258,8],[567,-153],[-478,366],[-249,197],[-276,-81],[-232,143],[310,536],[-169,215],[-220,398],[-335,611],[-353,223],[3,241],[-745,337],[-590,42],[-743,-23],[-677,-42],[-323,183],[-482,362],[729,181],[559,31],[-1188,149],[-627,236],[39,223],[1051,277],[1018,277],[107,210],[-750,206],[243,230],[961,402],[404,62],[-115,258],[658,152],[854,90],[853,6],[303,-180],[737,317],[663,-215],[390,-45],[577,-188],[-660,311],[38,246]],[[24973,59739],[-142,101],[-174,10],[-127,114],[-149,238]],[[24381,60202],[7,168],[32,135],[-39,107],[133,470],[357,1],[7,197],[-45,35],[-31,124],[-103,133],[-103,193],[125,1],[1,324],[259,1],[257,-6]],[[25297,60979],[90,-105],[24,86],[82,-73]],[[25493,60887],[-127,-220],[-131,-161],[-20,-111],[22,-113],[-58,-146]],[[25179,60136],[-65,-36],[15,-67],[-52,-64],[-95,-145],[-9,-85]],[[33400,56648],[183,-212],[171,-375],[8,-297],[105,-13],[149,-281],[109,-201]],[[34125,55269],[-44,-518],[-169,-150],[15,-136],[-51,-297],[123,-418],[89,-1],[37,-325],[169,-501]],[[33129,54824],[-188,437],[75,159],[-5,265],[171,93],[69,108],[-95,213],[24,210],[220,339]],[[25745,59307],[-48,180],[-84,50]],[[25613,59537],[19,231],[-38,62],[-57,41],[-122,-68],[-10,77],[-84,93],[-60,114],[-82,49]],[[25493,60887],[29,-23],[61,101],[79,9],[26,-47],[43,28],[129,-52],[128,15],[90,64],[32,65],[89,-30],[66,-39],[73,13],[55,50],[127,-80],[44,-13],[85,-107],[80,-129],[101,-88],[73,-159]],[[26903,60465],[-95,12],[-38,-79],[-97,-75],[-70,0],[-61,-73],[-56,26],[-47,88],[-29,-17],[-36,-138],[-27,5],[-4,-118],[-97,-159],[-51,-68],[-29,-72],[-82,117],[-60,-154],[-58,4],[-65,-14],[6,-283],[-41,-5],[-35,-131],[-86,-24]],[[55230,78267],[67,-223],[89,-164],[-107,-217]],[[55155,76391],[-31,-98]],[[55124,76293],[-261,213],[-161,207],[-254,171],[-233,424],[56,43],[-127,242],[-5,195],[-179,91],[-85,-249],[-82,193],[6,200],[10,9]],[[53809,78032],[194,-20],[51,98],[94,-94],[109,-12],[-1,161],[97,59],[27,233],[221,153]],[[54601,78610],[88,-71],[208,-247],[229,-111],[104,86]],[[30081,62221],[-185,98],[-131,-40],[-169,42],[-130,-108],[-149,179],[24,186],[256,-80],[210,-46],[100,128],[-127,250],[2,220],[-175,89],[62,159],[170,-25],[241,-90]],[[54716,79543],[141,-148],[103,-62],[233,70],[22,116],[111,17],[135,89],[30,-37],[130,72],[66,136],[91,35],[297,-175],[59,59]],[[56134,79715],[155,-157],[19,-154]],[[56308,79404],[-170,-121],[-131,-391],[-168,-390],[-223,-109]],[[55616,78393],[-173,26],[-213,-152]],[[54601,78610],[-54,194],[-47,7]],[[83531,45933],[-117,-11],[-368,403],[259,113],[146,-175],[97,-175],[-17,-155]],[[84713,46708],[28,-113],[5,-175]],[[84746,46420],[-181,-430],[-238,-127],[-33,69],[25,196],[119,351],[275,229]],[[82749,47167],[100,-153],[172,47],[69,-245],[-321,-116],[-193,-77],[-149,4],[95,332],[153,5],[74,203]],[[84139,47168],[-41,-320],[-417,-163],[-370,71],[0,210],[220,120],[174,-173],[185,44],[249,211]],[[80172,47926],[533,-57],[61,237],[515,-277],[101,-373],[417,-105],[341,-342],[-317,-220],[-306,232],[-251,-15],[-288,42],[-260,104],[-322,220],[-204,57],[-116,-72],[-506,237],[-48,247],[-255,43],[191,550],[337,-34],[224,-225],[115,-44],[38,-205]],[[87423,48251],[-143,-393],[-27,434],[49,207],[58,195],[63,-169],[0,-274]],[[85346,49837],[-104,-191],[-192,106],[-54,248],[281,27],[69,-190]],[[86241,50048],[101,-441],[-234,238],[-232,48],[-157,-38],[-192,20],[65,317],[344,24],[305,-168]],[[89166,50332],[5,-1877],[4,-1876]],[[89175,46579],[-247,472],[-282,116],[-69,-164],[-352,-18],[118,469],[175,160],[-72,626],[-134,483],[-538,488],[-229,48],[-417,532],[-82,-279],[-107,-51],[-63,211],[-1,250],[-212,283],[299,207],[198,-11],[-23,153],[-407,1],[-110,343],[-248,106],[-117,285],[374,140],[142,188],[446,-237],[44,-214],[78,-931],[287,-345],[232,611],[319,347],[247,1],[238,-201],[206,-206],[298,-110]],[[84788,52647],[-223,-571],[-209,-111],[-267,113],[-463,-29],[-243,-83],[-39,-436],[248,-512],[150,261],[518,196],[-22,-265],[-121,83],[-121,-337],[-245,-223],[263,-738],[-50,-198],[249,-665],[-2,-378],[-148,-170],[-109,203],[134,471],[-273,-222],[-69,159],[36,222],[-200,338],[21,561],[-186,-175],[24,-671],[11,-824],[-176,-84],[-119,169],[79,530],[-43,556],[-117,4],[-86,395],[115,377],[40,457],[139,868],[58,238],[237,427],[217,-170],[350,-80],[319,24],[275,419],[48,-129]],[[85746,52481],[-15,-503],[-143,57],[-42,-351],[114,-304],[-78,-69],[-112,365],[-82,736],[56,460],[92,210],[20,-315],[164,-50],[26,-236]],[[80461,52985],[47,-385],[190,-325],[179,117],[177,-42],[162,291],[133,51],[263,-162],[226,123],[143,801],[107,200],[96,655],[319,0],[241,-97]],[[82744,54212],[-158,-520],[204,-545],[-48,-265],[312,-533],[-329,-68],[-93,-393],[12,-522],[-267,-393],[-7,-574],[-107,-881],[-41,205],[-316,-259],[-110,352],[-198,33],[-139,184],[-330,-207],[-101,279],[-182,-32],[-229,67],[-43,772],[-138,160],[-134,493],[-38,504],[32,533],[165,383]],[[79393,48459],[-308,-12],[-234,481],[-356,471],[-119,349],[-210,469],[-138,432],[-212,806],[-244,480],[-81,495],[-103,449],[-250,363],[-145,493],[-209,322],[-290,635],[-24,293],[178,-23],[430,-111],[246,-564],[215,-390],[153,-240],[263,-619],[283,-9],[233,-394],[161,-482],[211,-263],[-111,-471],[159,-200],[100,-14],[47,-402],[97,-321],[204,-51],[135,-365],[-70,-716],[-11,-891]],[[72530,69211],[-176,-261],[-108,-538],[269,-218],[262,-283],[362,-323],[381,-75],[160,-293],[215,-54],[334,-135],[231,10],[32,228],[-36,366],[21,248]],[[77035,68105],[20,-219],[-97,-105],[23,-355],[-199,104],[-359,-397],[8,-330],[-153,-483],[-14,-281],[-124,-474],[-217,131],[-11,-596],[-63,-196],[30,-245],[-137,-137]],[[74730,64531],[-39,-210],[-189,7],[-343,-120],[16,-433],[-148,-341],[-400,-387],[-311,-678],[-209,-363],[-276,-377],[-1,-265],[-138,-142],[-251,-206],[-129,-31],[-84,-439],[58,-749],[15,-478],[-118,-547],[-1,-978],[-144,-28],[-126,-439],[84,-190],[-253,-163],[-93,-392],[-112,-165],[-263,537],[-128,807],[-107,581],[-97,272],[-148,553],[-69,720],[-48,360],[-253,791],[-115,1116],[-83,737],[1,698],[-54,539],[-404,-345],[-196,69],[-362,698],[133,208],[-82,226],[-326,489]],[[68937,65473],[185,384],[612,-1],[-56,494],[-156,292],[-31,444],[-182,258],[306,604],[323,-44],[290,604],[174,584],[270,578],[-4,411],[236,333],[-224,284],[-96,390],[-99,504],[137,249],[421,-141],[310,86],[268,484]],[[48278,82851],[46,-412],[-210,-514],[-493,-340],[-393,87],[225,601],[-145,586],[378,451],[210,269]],[[64978,73251],[244,112],[197,329],[186,-17],[122,108],[197,-53],[308,-292],[221,-63],[318,-510],[207,-21],[24,-484]],[[66909,69007],[137,-302],[112,-348],[266,-253],[7,-508],[133,-93],[23,-265],[-400,-298],[-105,-669]],[[67082,66271],[-523,174],[-303,133],[-313,74],[-118,707],[-133,102],[-214,-103],[-280,-279],[-339,191],[-281,443],[-267,164],[-186,546],[-205,768],[-149,-93],[-177,190],[-104,-224]],[[63490,69064],[-153,302],[-3,307],[-89,0],[46,417],[-143,438],[-340,315],[-193,548],[65,449],[139,199],[-21,336],[-182,173],[-180,687]],[[62436,73235],[-152,461],[55,179],[-87,660],[190,164]],[[63578,73897],[88,-424],[263,-120],[193,-289],[395,-100],[434,153],[27,134]],[[63490,69064],[-164,28]],[[63326,69092],[-187,48],[-204,-553]],[[62935,68587],[-516,46],[-784,1158],[-413,403],[-335,156]],[[60887,70350],[-112,701]],[[60775,71051],[615,600],[105,696],[-26,421],[152,142],[142,359]],[[61763,73269],[119,90],[324,-75],[97,-146],[133,97]],[[45969,90100],[-64,-373],[314,-392],[-361,-440],[-801,-394],[-240,-105],[-365,85],[-775,182],[273,254],[-605,282],[492,112],[-12,169],[-583,134],[188,375],[421,85],[433,-391],[422,314],[349,-163],[453,307],[461,-41]],[[59922,70666],[-49,-182]],[[59873,70484],[-100,80],[-58,-383],[69,-65],[-71,-79],[-12,-152],[131,78]],[[59832,69963],[7,-224],[-139,-920]],[[59518,69808],[80,190],[-19,32],[74,270],[56,434],[40,146],[8,6]],[[59757,70886],[93,-1],[25,101],[75,7]],[[59950,70993],[4,-236],[-38,-87],[6,-4]],[[54311,73846],[-100,-453],[41,-179],[-58,-296],[-213,217],[-141,62],[-387,293],[38,296],[325,-53],[284,63],[211,50]],[[52558,75561],[166,-408],[-39,-762],[-126,36],[-113,-192],[-105,153],[-11,694],[-64,330],[153,-29],[139,178]],[[53835,78613],[-31,-283],[67,-246]],[[53871,78084],[-221,84],[-226,-204],[15,-286],[-34,-164],[91,-293],[261,-290],[140,-476],[309,-464],[217,3],[68,-127],[-78,-115],[249,-208],[204,-174],[238,-301],[29,-107],[-52,-206],[-154,268],[-242,95],[-116,-372],[200,-214],[-33,-300],[-116,-34],[-148,-494],[-116,-45],[1,176],[57,309],[60,123],[-108,334],[-85,290],[-115,72],[-82,249],[-179,104],[-120,232],[-206,37],[-217,260],[-254,375],[-189,332],[-86,569],[-138,67],[-226,190],[-128,-78],[-161,-267],[-115,-42]],[[28453,62478],[187,-52],[147,-138],[46,-158],[-195,-11],[-84,-96],[-156,92],[-159,210],[34,132],[116,40],[64,-19]],[[59922,70666],[309,-228],[544,613]],[[60887,70350],[-53,-87],[-556,-289],[277,-575],[-92,-98],[-46,-193],[-212,-80],[-66,-207],[-120,-177],[-310,91]],[[59709,68735],[-9,84]],[[59832,69963],[41,169],[0,352]],[[87399,71495],[35,-197],[-156,-349],[-114,185],[-143,-134],[-73,-337],[-181,164],[2,273],[154,344],[158,-67],[114,242],[204,-124]],[[89159,73219],[-104,-460],[48,-288],[-145,-406],[-355,-271],[-488,-36],[-396,-657],[-186,221],[-12,431],[-483,-127],[-329,-271],[-325,-11],[282,-424],[-186,-979],[-179,-242],[-135,224],[69,519],[-176,167],[-113,395],[263,177],[145,362],[280,298],[203,394],[553,171],[297,-117],[291,1024],[185,-275],[408,575],[158,224],[174,704],[-47,648],[117,364],[295,105],[152,-798],[-9,-467],[-256,-580],[4,-594]],[[89974,77268],[195,-122],[197,244],[62,-647],[-412,-157],[-244,-572],[-436,393],[-152,-630],[-308,-9],[-39,573],[138,443],[296,32],[81,797],[83,449],[326,-600],[213,-194]],[[69711,76170],[-159,-107],[-367,-401],[-121,-412],[-104,-4],[-76,273],[-353,18],[-57,472],[-135,4],[21,578],[-333,421],[-476,-45],[-326,-84],[-265,519],[-227,218],[-431,412],[-52,50],[-715,-340],[11,-2124]],[[65546,75618],[-142,-28],[-195,452],[-188,161],[-315,-120],[-123,-191]],[[64583,75892],[-15,140],[68,240],[-53,201],[-322,196],[-125,517],[-154,146],[-9,187],[270,-54],[11,421],[236,93],[243,-86],[50,562],[-50,356],[-278,-28],[-236,141],[-321,-253],[-259,-121]],[[63639,78550],[-142,93],[29,296],[-177,385],[-207,-16],[-235,391],[160,436],[-81,118],[222,632],[285,-334],[35,421],[573,626],[434,15],[612,-399],[329,-233],[295,243],[440,12],[356,-298],[80,170],[391,-24],[69,272],[-450,396],[267,281],[-52,157],[266,150],[-200,394],[127,197],[1039,200],[136,142],[695,213],[250,239],[499,-124],[88,-597],[290,140],[356,-197],[-23,-314],[267,33],[696,543],[-102,-180],[355,-445],[620,-1463],[148,302],[383,-332],[399,148],[154,-104],[133,-332],[194,-112],[119,-244],[358,77],[147,-353]],[[72294,76218],[-171,84],[-140,207],[-412,61],[-461,15],[-100,-63],[-396,242],[-158,-119],[-43,-340],[-457,198],[-183,-81],[-62,-252]],[[61551,50860],[-195,-230],[-68,-240],[-104,-42],[-40,-406],[-89,-233],[-54,-383],[-112,-190]],[[60889,49136],[-399,576],[-19,334],[-1007,1173],[-47,63]],[[59417,51282],[-3,611],[80,233],[137,381],[101,420],[-123,661],[-32,289],[-132,400]],[[59445,54277],[171,344],[188,379]],[[61626,54086],[-243,-653],[3,-2098],[165,-475]],[[70465,74537],[-526,-87],[-343,187],[-301,-45],[26,332],[303,-96],[101,177]],[[69725,75005],[212,-56],[355,414],[-329,304],[-198,-144],[-205,217],[234,373],[-83,57]],[[78495,58847],[-66,696],[178,479],[359,110],[261,-83]],[[79227,60049],[229,-226],[126,397],[246,-212]],[[79828,60008],[64,-384],[-34,-690],[-467,-443],[122,-349],[-292,-42],[-240,-232]],[[78981,57868],[-233,84],[-112,301],[-141,594]],[[85652,74065],[240,-679],[68,-373],[3,-664],[-105,-316],[-252,-111],[-222,-239],[-250,-49],[-31,313],[51,432],[-122,600],[206,97],[-190,493]],[[85048,73569],[17,52],[124,-21],[108,260],[197,28],[118,38],[40,139]],[[55575,76355],[52,129]],[[55627,76484],[66,42],[38,191],[50,32],[40,-81],[52,-36],[36,-92],[46,-27],[54,-107],[39,3],[-31,-140],[-33,-68],[9,-43]],[[55993,76158],[-62,-23],[-164,-89],[-13,-118],[-35,5]],[[63326,69092],[58,-254],[-25,-132],[89,-434]],[[63448,68272],[-196,-15],[-69,274],[-248,56]],[[79227,60049],[90,260],[12,487],[-224,502],[-18,568],[-211,468],[-210,40],[-56,-201],[-163,-17],[-83,102],[-293,-344],[-6,517],[68,606],[-188,27],[-16,346],[-120,178]],[[77809,63588],[59,212],[237,374]],[[78380,64766],[162,-454],[125,-524],[342,-4],[108,-502],[-178,-151],[-80,-207],[333,-345],[231,-680],[175,-508],[210,-400],[70,-407],[-50,-576]],[[59757,70886],[99,469],[138,406],[5,20]],[[59999,71781],[125,-30],[45,-226],[-151,-217],[-68,-315]],[[47857,54343],[-73,-5],[-286,274],[-252,439],[-237,315],[-187,371]],[[46822,55737],[66,184],[15,168],[126,313],[129,268]],[[54125,64996],[-197,-214],[-156,316],[-439,248]],[[52633,69283],[136,133],[24,244],[-30,238],[191,222],[86,185],[135,165],[16,442]],[[53191,70912],[326,-198],[117,50],[232,-96],[368,-258],[130,-512],[250,-111],[391,-242],[296,-286],[136,150],[133,264],[-65,442],[87,280],[200,270],[192,78],[375,-118],[95,-257],[104,-3],[88,-98],[276,-67],[68,-191]],[[56944,64499],[0,-1150],[-320,-2],[-3,-242]],[[56621,63105],[-1108,1103],[-1108,1103],[-280,-315]],[[72718,56162],[-42,-600],[-116,-164],[-242,-132],[-132,458],[-49,828],[126,935],[192,-320],[129,-406],[134,-599]],[[58049,35154],[96,-173],[-85,-281],[-47,-187],[-155,-90],[-51,-184],[-99,-58],[-209,443],[148,365],[151,225],[130,118],[121,-178]],[[56314,83116],[-23,147],[30,157],[-123,92],[-291,100]],[[55907,83612],[-59,485]],[[55848,84097],[318,176],[466,-37],[273,57],[39,-120],[148,-37],[267,-279]],[[56523,82877],[-67,177],[-142,62]],[[55848,84097],[10,433],[136,362],[262,196],[221,-430],[223,11],[53,442]],[[57579,84928],[134,-133],[24,-279],[89,-340]],[[47592,67756],[-42,0],[7,-308],[-172,-19],[-90,-131],[-126,0],[-100,75],[-234,-62],[-91,-449],[-86,-42],[-131,-726],[-386,-621],[-92,-796],[-114,-258],[-33,-208],[-625,-46],[-5,1]],[[45272,64166],[13,267],[106,157],[91,300],[-18,195],[96,406],[155,366],[93,93],[74,336],[6,307],[100,356],[185,210],[177,588],[5,8],[139,221],[259,64],[218,393],[140,154],[232,481],[-70,716],[106,495],[37,304],[179,389],[278,263],[206,238],[186,596],[87,354],[205,-3],[167,-244],[264,39],[288,-127],[121,-6]],[[57394,79599],[66,85],[185,57],[204,-180],[115,-21],[125,-155],[-20,-195],[101,-95],[40,-240],[97,-147],[-19,-86],[52,-58],[-74,-43],[-164,17],[-27,80],[-58,-46],[20,-103],[-76,-184],[-49,-197],[-70,-63]],[[57842,78025],[-50,263],[30,246],[-9,253],[-160,342],[-89,243],[-86,171],[-84,56]],[[63761,44648],[74,-245],[69,-380],[45,-693],[72,-269],[-28,-277],[-49,-169],[-94,338],[-53,-171],[53,-427],[-24,-244],[-77,-133],[-18,-488],[-109,-671],[-137,-793],[-172,-1092],[-106,-800],[-125,-668],[-226,-136],[-243,-244],[-160,147],[-220,206],[-77,304],[-18,510],[-98,460],[-26,414],[50,415],[128,100],[1,191],[133,437],[25,367],[-65,272],[-52,364],[-23,530],[97,322],[38,366],[138,21],[155,118],[103,104],[122,8],[158,328],[229,355],[83,289],[-38,247],[118,-70],[153,401],[6,346],[92,257],[96,-247]],[[23016,66727],[-107,-505],[-49,-415],[-20,-771],[-27,-281],[48,-315],[86,-280],[56,-447],[184,-429],[65,-328],[109,-284],[295,-153],[114,-241],[244,161],[212,58],[208,104],[175,99],[176,235],[67,336],[22,483],[48,169],[188,151],[294,133],[246,-20],[169,49],[66,-122],[-9,-278],[-149,-342],[-66,-351],[51,-100],[-42,-249],[-69,-449],[-71,148],[-58,-10]],[[24381,60202],[-314,620],[-144,187],[-226,150],[-156,-42],[-223,-216],[-140,-57],[-196,152],[-208,109],[-260,264],[-208,81],[-314,268],[-233,275],[-70,154],[-155,34],[-284,183],[-116,262],[-299,327],[-139,363],[-66,281],[93,56],[-29,164],[64,150],[1,199],[-93,259],[-25,229],[-94,290],[-244,573],[-280,450],[-135,359],[-238,235],[-51,140],[42,356],[-142,135],[-164,279],[-69,402],[-149,47],[-162,303],[-130,281],[-12,180],[-149,434],[-99,441],[5,221],[-201,229],[-93,-26],[-159,159],[-44,-234],[46,-276],[27,-433],[95,-237],[206,-397],[46,-135],[42,-41],[37,-198],[49,8],[56,-372],[85,-146],[59,-204],[174,-293],[92,-536],[83,-252],[77,-270],[15,-304],[134,-19],[112,-261],[100,-257],[-6,-104],[-117,-211],[-49,3],[-74,350],[-181,328],[-201,278],[-142,147],[9,421],[-42,312],[-132,179],[-191,257],[-37,-75],[-70,151],[-171,139],[-164,334],[20,44],[115,-33],[103,215],[10,260],[-214,411],[-163,159],[-102,360],[-103,377],[-129,461],[-113,518]],[[17464,70566],[316,44],[353,63],[-26,-113],[419,-280],[634,-406],[552,5],[221,0],[0,237],[481,0],[102,-204],[142,-182],[165,-253],[92,-301],[69,-317],[144,-174],[230,-172],[175,455],[227,11],[196,-230],[139,-394],[96,-338],[164,-328],[61,-403],[78,-271],[217,-178],[197,-127],[108,17]],[[55993,76158],[95,33],[128,10]],[[46619,60247],[93,105],[47,339],[88,13],[194,-160],[157,114],[107,-38],[42,128],[1114,8],[62,404],[-48,71],[-134,2485],[-134,2485],[425,11]],[[51185,62860],[1,-1326],[-152,-384],[-24,-355],[-247,-92],[-379,-49],[-102,-205],[-178,-22]],[[46801,58995],[13,179],[-24,223],[-104,162],[-54,330],[-13,358]],[[77375,57550],[-27,427],[86,441],[-94,341],[23,627],[-113,299],[-90,689],[-50,727],[-121,477],[-183,-289],[-315,-410],[-156,51],[-172,135],[96,714],[-58,539],[-218,664],[34,208],[-163,74],[-197,469]],[[77809,63588],[-159,-134],[-162,-249],[-196,-26],[-127,-623],[-117,-104],[134,-506],[177,-420],[113,-380],[-101,-501],[-96,-106],[66,-289],[185,-458],[32,-321],[-4,-268],[108,-525],[-152,-537],[-135,-591]],[[55380,75946],[-58,44],[-78,188],[-120,115]],[[55338,76894],[74,-99],[40,-80],[91,-62],[106,-119],[-22,-50]],[[74375,80219],[292,99],[530,496],[423,271],[242,-176],[289,-9],[186,-269],[277,-21],[402,-144],[270,401],[-113,339],[288,596],[311,-238],[252,-67],[327,-148],[53,-432],[394,-242],[263,107],[351,75],[279,-76],[272,-276],[168,-295],[258,6],[350,-94],[255,143],[366,96],[407,405],[166,-62],[146,-193],[331,48]],[[59599,45195],[209,47],[334,-163],[73,73],[193,15],[99,173],[167,-10],[303,224],[221,334]],[[61198,45888],[45,-258],[-11,-574],[34,-505],[11,-900],[49,-282],[-83,-412],[-108,-400],[-177,-357],[-254,-219],[-313,-279],[-313,-618],[-107,-106],[-194,-409],[-115,-133],[-23,-411],[132,-436],[54,-337],[4,-173],[49,29],[-8,-565],[-45,-267],[65,-99],[-41,-239],[-116,-205],[-229,-195],[-334,-312],[-122,-213],[24,-242],[71,-39],[-24,-303]],[[59119,36429],[-211,5]],[[58908,36434],[-24,254],[-41,259]],[[58843,36947],[-23,206],[49,642],[-72,410],[-133,810]],[[58664,39015],[292,654],[74,415],[42,52],[31,339],[-45,171],[12,430],[54,400],[0,728],[-145,185],[-132,42],[-60,143],[-128,121],[-232,-11],[-18,215]],[[58409,42899],[-26,410],[843,474]],[[59226,43783],[159,-276],[77,53],[110,-146],[16,-231],[-59,-268],[21,-405],[181,-356],[85,399],[120,122],[-24,740],[-116,417],[-100,185],[-97,-8],[-77,748],[77,438]],[[46619,60247],[-184,395],[-168,424],[-184,153],[-133,169],[-155,-6],[-135,-126],[-138,50],[-96,-185]],[[45426,61121],[-24,311],[78,283],[34,543],[-30,569],[-34,286],[28,287],[-72,274],[-146,249]],[[45260,63923],[60,192],[1088,-4],[-53,832],[68,296],[261,51],[-9,1474],[911,-30],[1,872]],[[59226,43783],[-147,149],[85,535],[87,201],[-53,477],[56,467],[47,156],[-71,489],[-131,257]],[[59099,46514],[273,-108],[55,-159],[95,-269],[77,-783]],[[78372,55412],[64,-54],[164,-347],[116,-386],[16,-388],[-29,-262],[27,-198],[20,-340],[98,-159],[109,-509],[-5,-195],[-197,-38],[-263,426],[-329,457],[-32,294],[-161,385],[-38,477],[-100,314],[30,419],[-61,244]],[[77801,55552],[48,103],[227,-252],[22,-296],[183,69],[91,236]],[[80461,52985],[204,-198],[214,108],[56,488],[119,108],[333,125],[199,456],[137,364]],[[82069,54967],[214,400],[140,450],[112,2],[143,-291],[13,-251],[183,-160],[231,-173],[-20,-226],[-186,-29],[50,-281],[-205,-196]],[[54540,35373],[-207,435],[-108,420],[-62,561],[-68,417],[-93,887],[-7,689],[-35,314],[-108,237],[-144,476],[-146,691],[-60,361],[-226,563],[-17,441]],[[56448,41738],[228,131],[180,-33],[109,-130],[2,-48]],[[55526,37566],[0,-2127],[-248,-294],[-149,-42],[-175,108],[-125,42],[-47,247],[-109,157],[-133,-284]],[[96049,39690],[228,-357],[144,-265],[-105,-138],[-153,155],[-199,259],[-179,306],[-184,406],[-38,195],[119,-8],[156,-196],[122,-196],[89,-161]],[[54125,64996],[68,-895],[104,-150],[4,-183],[116,-198],[-60,-248],[-107,-1168],[-15,-749],[-354,-543],[-120,-759],[115,-213],[0,-371],[178,-13],[-28,-271]],[[53939,59018],[-52,-12],[-188,630],[-65,23],[-217,-322],[-215,168],[-150,34],[-80,-81],[-163,17],[-164,-245],[-141,-14],[-337,298],[-131,-142],[-142,10],[-104,218],[-279,214],[-298,-68],[-72,-124],[-39,-331],[-80,-233],[-19,-514]],[[52361,54577],[-289,-207],[-105,30],[-107,-129],[-222,13],[-149,360],[-91,417],[-197,379],[-209,-7],[-245,1]],[[26191,58215],[-96,181],[-130,233],[-61,194],[-117,181],[-140,260],[31,89],[46,-87],[21,41]],[[26903,60465],[-24,-55],[-14,-129],[29,-210],[-64,-197],[-30,-231],[-9,-254],[15,-148],[7,-260],[-43,-56],[-26,-247],[19,-152],[-56,-147],[12,-156],[43,-94]],[[50920,81398],[143,159],[244,847],[380,241],[231,-16]],[[58639,91887],[-473,-231],[-224,-54]],[[55734,91626],[-172,-23],[-41,-379],[-523,92],[-74,-321],[-267,2],[-183,-409],[-278,-639],[-431,-810],[101,-197],[-97,-228],[-275,10],[-180,-540],[17,-765],[177,-292],[-92,-677],[-231,-395],[-122,-332]],[[53063,85723],[-187,354],[-548,-666],[-371,-135],[-384,293],[-99,619],[-88,1329],[256,371],[733,483],[549,595],[508,802],[668,1112],[465,434],[763,722],[610,252],[457,-31],[423,477],[506,-25],[499,115],[869,-422],[-358,-154],[305,-361]],[[56867,96664],[-620,-236],[-490,134],[191,149],[-167,184],[575,115],[110,-216],[401,-130]],[[55069,97728],[915,-429],[-699,-227],[-155,-424],[-243,-108],[-132,-478],[-335,-22],[-598,351],[252,205],[-416,166],[-541,487],[-216,451],[757,206],[152,-202],[396,8],[105,197],[408,20],[350,-201]],[[57068,98134],[545,-202],[-412,-310],[-806,-68],[-819,96],[-50,159],[-398,10],[-304,264],[858,161],[403,-138],[281,172],[702,-144]],[[98060,28265],[63,-238],[198,233],[80,-243],[0,-242],[-103,-267],[-182,-424],[-142,-232],[103,-277],[-214,-7],[-238,-217],[-75,-377],[-157,-583],[-219,-257],[-138,-164],[-256,12],[-180,190],[-302,40],[-46,212],[149,427],[349,568],[179,109],[200,219],[238,301],[167,299],[123,429],[106,146],[41,321],[195,267],[61,-245]],[[98502,31008],[202,-607],[5,394],[126,-158],[41,-435],[224,-188],[188,-46],[158,220],[141,-67],[-67,-511],[-85,-336],[-212,12],[-74,-175],[26,-248],[-41,-107],[-105,-310],[-138,-395],[-214,-229],[-48,151],[-116,83],[160,474],[-91,317],[-299,230],[8,209],[201,200],[47,444],[-13,372],[-113,386],[8,102],[-133,237],[-218,510],[-117,408],[104,45],[151,-320],[216,-149],[78,-513]],[[64752,61418],[-91,403],[-217,950]],[[64444,62771],[833,576],[185,1152],[-127,408]],[[65665,66183],[125,-393],[155,-209],[203,-76],[165,-105],[125,-330],[75,-191],[100,-73],[-1,-128],[-101,-344],[-44,-161],[-117,-184],[-104,-395],[-126,30],[-58,-137],[-44,-292],[34,-385],[-26,-71],[-128,2],[-174,-215],[-27,-281],[-63,-121],[-173,4],[-109,-145],[1,-232],[-134,-160],[-153,54],[-186,-194],[-128,-33]],[[65575,66834],[80,196],[35,-50],[-26,-238],[-37,-104]],[[68937,65473],[-203,146],[-83,414],[-215,438],[-512,-108],[-451,-11],[-391,-81]],[[28366,55989],[-93,166],[-59,311],[68,154],[-70,40],[-52,190],[-138,160],[-122,-37],[-56,-200],[-112,-145],[-61,-20],[-27,-120],[132,-312],[-75,-74],[-40,-85],[-130,-29],[-48,344],[-36,-98],[-92,33],[-56,232],[-114,38],[-72,68],[-119,-1],[-8,-125],[-32,87]],[[27070,57338],[100,-206],[-6,-122],[111,-26],[26,47],[77,-142],[136,42],[119,145],[168,116],[95,172],[153,-33],[-10,-57],[155,-20],[124,-99],[90,-173],[105,-159]],[[30452,41263],[-279,331],[-24,236],[-551,578],[-498,630],[-214,355],[-115,476],[46,166],[-236,755],[-274,1063],[-262,1147],[-114,262],[-87,424],[-216,376],[-198,233],[90,257],[-134,550],[86,403],[221,364]],[[85104,56675],[28,-382],[16,-323],[-94,-527],[-102,587],[-130,-292],[89,-425],[-79,-270],[-327,335],[-78,416],[84,274],[-176,273],[-87,-239],[-131,22],[-205,-321],[-46,168],[109,486],[175,161],[151,217],[98,-260],[212,157],[45,257],[196,16],[-16,445],[225,-273],[23,-290],[20,-212]],[[84439,57749],[-100,-190],[-87,-363],[-87,-171],[-171,398],[57,154],[70,162],[30,357],[153,34],[-44,-388],[205,556],[-26,-549]],[[82917,57194],[-369,-546],[136,403],[200,355],[167,399],[146,572],[49,-470],[-183,-317],[-146,-396]],[[83856,58678],[166,-179],[177,1],[-5,-240],[-129,-245],[-176,-173],[-10,268],[20,293],[-43,275]],[[84861,58834],[78,-643],[-214,152],[5,-193],[68,-355],[-132,-129],[-11,405],[-84,30],[-43,348],[163,-46],[-4,218],[-169,440],[266,-13],[77,-214]],[[83757,59356],[-74,-498],[-119,288],[-142,438],[238,-21],[97,-207]],[[83700,62485],[171,-164],[85,150],[26,-146],[-46,-239],[95,-413],[-73,-478],[-164,-191],[-43,-465],[62,-458],[147,-64],[123,68],[347,-319],[-27,-313],[91,-139],[-29,-265],[-216,283],[-103,302],[-71,-211],[-177,345],[-253,-86],[-138,128],[14,238],[87,146],[-83,133],[-36,-207],[-137,331],[-41,251],[-11,551],[112,-190],[29,901],[90,522],[169,-1]],[[93299,47902],[-78,-58],[-120,221],[-122,366],[-59,439],[38,55],[30,-171],[84,-130],[135,-366],[131,-195],[-39,-161]],[[92217,48675],[-146,-48],[-44,-161],[-152,-140],[-142,-135],[-148,1],[-228,167],[-158,161],[23,178],[249,-84],[152,45],[42,276],[40,14],[27,-306],[158,44],[78,197],[155,206],[-30,339],[166,11],[56,-94],[-5,-320],[-93,-351]],[[89166,50332],[482,-397],[513,-329],[192,-295],[154,-290],[43,-339],[462,-356],[68,-306],[-256,-62],[62,-383],[248,-378],[180,-611],[159,19],[-11,-255],[215,-98],[-84,-108],[295,-243],[-30,-166],[-184,-40],[-69,149],[-238,65],[-281,86],[-216,368],[-158,316],[-144,504],[-362,252],[-235,-164],[-170,-190],[35,-425],[-218,-198],[-155,96],[-288,25]],[[92538,49238],[-87,-154],[-52,340],[-65,223],[-126,189],[-158,245],[-200,170],[77,139],[150,-162],[94,-126],[117,-139],[111,-241],[106,-185],[33,-299]],[[53922,82787],[189,169],[434,266],[350,195],[277,-97],[21,-140],[268,-8]],[[55461,83172],[342,-65],[511,9]],[[56535,81532],[139,-502],[-29,-162],[-138,-67],[-252,-479],[71,-259],[-60,34]],[[56266,80097],[-264,221],[-200,-81],[-131,59],[-165,-123],[-140,204],[-114,-78],[-16,34]],[[31588,62492],[142,-51],[50,-114],[-71,-146],[-209,4],[-163,-21],[-16,247],[40,84],[227,-3]],[[86288,76244],[39,-101]],[[86327,76143],[-106,35],[-120,-195],[-83,-196],[10,-414],[-143,-127],[-50,-102],[-104,-170],[-185,-95],[-121,-154],[-9,-250],[-32,-63],[111,-94],[157,-253]],[[85048,73569],[-135,109],[-34,-108],[-81,-48],[-10,109],[-72,52],[-75,92],[76,254],[66,67],[-25,105],[71,311],[-18,94],[-163,63],[-131,154]],[[47929,73193],[-112,-149],[-146,81],[-143,-64],[42,451],[-26,354],[-124,53],[-67,218],[22,377],[111,210],[20,232],[58,347],[-6,244],[-56,206],[-12,195]],[[64113,66085],[-18,419],[75,302],[76,62],[84,-180],[5,-337],[-61,-339]],[[64274,66012],[-77,-41],[-84,114]],[[56308,79404],[120,123],[172,-64],[178,-2],[129,-141],[95,89],[205,55],[69,135],[118,0]],[[57842,78025],[124,-106],[131,93],[126,-99]],[[58223,77913],[6,-149],[-135,-124],[-84,54],[-78,-694]],[[56293,77303],[-51,101],[65,97],[-69,72],[-87,-129],[-162,167],[-22,237],[-169,136],[-31,183],[-151,226]],[[89901,81054],[280,-1020],[-411,190],[-171,-832],[271,-590],[-8,-403],[-211,347],[-182,-445],[-51,483],[31,561],[-32,621],[64,436],[13,770],[-163,566],[24,787],[257,265],[-110,267],[123,81],[73,-381],[96,-555],[-7,-567],[114,-581]],[[55461,83172],[63,254],[383,186]],[[99999,92620],[-305,-29],[-49,183],[-99645,240],[36,24],[235,-1],[402,-165],[-24,-79],[-286,-138],[-363,-35],[99999,0]],[[89889,93991],[-421,-4],[-569,64],[-49,31],[263,227],[348,54],[394,-221],[34,-151]],[[91869,95069],[-321,-228],[-444,52],[-516,227],[66,187],[518,-87],[697,-151]],[[90301,95344],[-219,-427],[-1023,16],[-461,-136],[-550,374],[149,396],[366,108],[734,-25],[1004,-306]],[[65981,92556],[-164,-51],[-907,75],[-74,256],[-503,154],[-40,311],[284,124],[-10,314],[551,491],[-255,70],[665,506],[-75,261],[621,304],[917,370],[925,108],[475,214],[541,74],[193,-227],[-187,-179],[-984,-286],[-848,-274],[-863,-548],[-414,-563],[-435,-553],[56,-479],[531,-472]],[[63639,78550],[-127,-342],[-269,-95],[-276,-594],[252,-547],[-27,-388],[303,-678]],[[61098,76843],[-354,486],[-317,218],[-240,338],[202,92],[231,482],[-156,227],[410,236],[-8,125],[-249,-92]],[[60617,78955],[9,255],[143,161],[269,42],[44,192],[-62,318],[113,302],[-3,169],[-410,187],[-162,-6],[-172,270],[-213,-92],[-352,203],[6,113],[-99,250],[-222,28],[-23,178],[70,117],[-178,326],[-288,-56],[-84,29],[-70,-131],[-104,24]],[[57772,86080],[316,318],[-291,274]],[[58639,91887],[286,200],[456,-348],[761,-137],[1050,-652],[213,-273],[18,-384],[-308,-302],[-454,-154],[-1240,438],[-204,-73],[453,-422],[18,-267],[18,-589],[358,-175],[217,-150],[36,279],[-168,248],[177,218],[672,-358],[233,140],[-186,422],[647,564],[256,-33],[260,-202],[161,396],[-231,343],[136,345],[-204,357],[777,-185],[158,-322],[-351,-71],[1,-321],[219,-197],[429,125],[68,367],[580,274],[970,495],[209,-28],[-273,-350],[344,-60],[199,197],[521,16],[412,239],[317,-347],[315,381],[-291,334],[145,190],[820,-175],[385,-180],[1006,-658],[186,302],[-282,304],[-8,122],[-335,57],[92,273],[-149,449],[-8,185],[512,521],[183,523],[206,114],[736,-152],[57,-320],[-263,-468],[173,-183],[89,-403],[-63,-789],[307,-353],[-120,-384],[-544,-818],[318,-85],[110,207],[306,148],[74,285],[240,274],[-162,328],[130,380],[-304,47],[-67,321],[222,578],[-361,469],[497,389],[-64,409],[139,13],[145,-319],[-109,-556],[297,-105],[-127,415],[465,227],[577,30],[513,-328],[-247,479],[-28,614],[483,116],[669,-25],[602,75],[-226,301],[321,378],[319,16],[540,286],[734,77],[93,157],[729,54],[227,-129],[624,306],[510,-10],[77,249],[265,245],[656,236],[476,-186],[-378,-142],[629,-89],[75,-284],[254,140],[812,-8],[626,-281],[223,-215],[-69,-300],[-307,-170],[-730,-320],[-209,-171],[345,-80],[410,-146],[251,109],[141,-369],[122,149],[444,91],[892,-95],[67,-269],[1162,-86],[15,440],[590,-101],[443,3],[449,-303],[128,-369],[-165,-241],[349,-453],[437,-234],[268,605],[446,-260],[473,155],[538,-177],[204,162],[455,-81],[-201,534],[367,250],[2509,-374],[236,-342],[727,-440],[1122,109],[553,-95],[231,-238],[-33,-421],[342,-164],[372,118],[492,15],[525,-113],[526,64],[484,-512],[344,184],[-224,368],[123,256],[886,-161],[578,34],[799,-275],[-99610,-251],[681,-440],[728,-572],[-24,-358],[187,-143],[-64,418],[754,-86],[544,-539],[-276,-251],[-455,-59],[-7,-563],[-111,-120],[-260,17],[-212,201],[-369,168],[-62,250],[-283,94],[-315,-74],[-151,201],[60,214],[-333,-137],[126,-271],[-158,-244],[0,-3],[99640,-253],[-360,42],[250,-307],[166,-474],[128,-155],[32,-238],[-71,-153],[-518,126],[-777,-434],[-247,-67],[-425,-405],[-403,-353],[-102,-262],[-397,399],[-724,-453],[-126,214],[-268,-246],[-371,79],[-90,-379],[-333,-557],[10,-233],[316,-129],[-37,-839],[-258,-21],[-119,-482],[116,-248],[-486,-294],[-96,-657],[-415,-141],[-83,-585],[-400,-536],[-103,396],[-119,841],[-155,1279],[134,799],[234,344],[14,269],[432,129],[496,725],[479,592],[499,459],[223,812],[-337,-49],[-167,-474],[-705,-632],[-227,708],[-717,-196],[-696,-965],[230,-353],[-620,-151],[-430,-59],[20,417],[-431,87],[-344,-283],[-850,99],[-914,-171],[-899,-1124],[-1065,-1358],[438,-73],[136,-360],[270,-128],[178,288],[305,-38],[401,-633],[9,-490],[-217,-576],[-23,-687],[-126,-921],[-418,-833],[-94,-399],[-377,-670],[-374,-665],[-179,-340],[-370,-338],[-175,-8],[-175,280],[-373,-421],[-43,-192]],[[79187,96925],[-1566,-222],[507,756],[229,64],[208,-37],[704,-327],[-82,-234]],[[64204,98215],[-373,-76],[-250,-44],[-39,-94],[-324,-95],[-301,136],[158,180],[-618,17],[542,105],[422,7],[57,-155],[159,138],[262,95],[412,-126],[-107,-88]],[[77760,97255],[-606,-71],[-773,166],[-462,220],[-213,413],[-379,113],[722,394],[600,130],[540,-290],[640,-557],[-69,-518]],[[58449,51176],[110,-325],[-16,-339],[-80,-73]],[[58216,51057],[67,-59],[166,178]],[[45260,63923],[12,243]],[[61883,61244],[-37,246],[-83,173],[-22,230],[-143,206],[-148,483],[-79,469],[-192,397],[-124,94],[-184,549],[-32,400],[12,342],[-159,638],[-130,225],[-150,119],[-92,330],[15,130],[-77,299],[-81,128],[-108,429],[-170,464],[-141,395],[-139,-2],[44,316],[12,201],[34,230]],[[63448,68272],[109,-497],[137,-131],[47,-203],[190,-242],[16,-237],[-27,-192],[35,-193],[80,-162],[37,-189],[41,-141]],[[64274,66012],[53,-220]],[[64444,62771],[-801,-221],[-259,-259],[-199,-604],[-130,-96],[-70,191],[-106,-28],[-269,57],[-50,58],[-321,-13],[-75,-52],[-114,149],[-74,-283],[28,-243],[-121,-183]],[[59434,57280],[-39,11],[5,287],[-33,197],[-143,228],[-34,415],[34,425],[-129,40],[-19,-129],[-167,-29],[67,-169],[23,-346],[-152,-316],[-138,-415],[-144,-59],[-233,336],[-105,-119],[-29,-168],[-143,-109],[-9,-118],[-277,0],[-38,118],[-200,20],[-100,-99],[-77,50],[-143,336],[-48,158],[-200,-79],[-76,-267],[-72,-514],[-95,-109],[-85,-63]],[[56635,56793],[-23,27]],[[56351,58246],[3,140],[-102,169],[-3,335],[-58,222],[-98,-33],[28,211],[72,240],[-32,239],[92,176],[-58,135],[73,355],[127,425],[240,-41],[-14,2286]],[[60240,64499],[90,-565],[-61,-105],[40,-593],[102,-687],[106,-142],[152,-213]],[[59433,57348],[1,-68]],[[59434,57280],[3,-449]],[[59445,54277],[-171,-265],[-195,1],[-224,-135],[-176,129],[-115,-157]],[[56824,56568],[-189,225]],[[45357,59658],[-115,449],[-138,205],[122,109],[134,404],[66,296]],[[45367,58962],[-46,441]],[[95032,45793],[78,-198],[-194,3],[-106,355],[166,-140],[56,-20]],[[94680,46144],[-108,-13],[-170,58],[-58,89],[17,228],[183,-90],[91,-121],[45,-151]],[[94910,46301],[-42,-106],[-206,499],[-57,344],[94,0],[100,-461],[111,-276]],[[94409,47028],[12,-116],[-218,245],[-152,206],[-104,192],[41,59],[128,-138],[228,-265],[65,-183]],[[93760,47598],[-56,-33],[-121,131],[-114,237],[14,96],[166,-243],[111,-188]],[[46822,55737],[-75,43],[-200,232],[-144,308],[-49,211],[-34,425]],[[25613,59537],[-31,-135],[-161,8],[-100,55],[-115,115],[-154,36],[-79,123]],[[61984,58430],[91,-106],[54,-238],[125,-241],[138,-2],[262,147],[302,68],[245,179],[138,38],[99,105],[158,20]],[[63596,58400],[-2,-9],[-1,-237],[0,-581],[0,-301],[-125,-353],[-194,-481]],[[63596,58400],[89,12],[128,85],[147,58],[132,198],[105,1],[6,-159],[-25,-335],[1,-303],[-59,-208],[-78,-622],[-134,-644],[-172,-735],[-238,-844],[-237,-645],[-327,-785],[-278,-467],[-415,-571],[-259,-438],[-304,-698],[-64,-304],[-63,-136]],[[34125,55269],[333,-115],[30,104],[225,41],[298,-155]],[[34889,54255],[109,-341],[-49,-248],[-24,-263],[-71,-242]],[[56266,80097],[-77,-150],[-55,-232]],[[53809,78032],[62,52]],[[56639,89841],[-478,-163],[-269,-401],[43,-353],[-441,-463],[-537,-495],[-202,-811],[198,-406],[265,-320],[-255,-649],[-289,-135],[-106,-967],[-157,-539],[-337,55],[-158,-456],[-321,-27],[-89,545],[-232,653],[-211,814]],[[58908,36434],[-56,-256],[-163,-62],[-166,312],[-2,199],[76,216],[26,168],[80,41],[140,-105]],[[59999,71781],[-26,440],[68,237]],[[60041,72458],[74,126],[75,127],[15,321],[91,-112],[306,160],[147,-108],[229,1],[320,217],[149,-10],[316,89]],[[50518,55366],[-224,-122]],[[78495,58847],[-249,265],[-238,-11],[41,452],[-245,-3],[-22,-633],[-150,-841],[-90,-509],[19,-417],[181,-18],[113,-526],[50,-498],[155,-330],[168,-67],[144,-299]],[[77801,55552],[-110,221],[-47,285],[-148,325],[-135,274],[-45,-339],[-53,320],[30,359],[82,553]],[[68841,73220],[156,583],[-60,429],[-204,137],[72,254],[232,-27],[132,318],[89,370],[371,134],[-58,-267],[40,-161],[114,15]],[[64978,73251],[-52,408],[40,602],[-216,195],[71,394],[-184,34],[61,485],[262,-141],[244,184],[-202,346],[-80,329],[-224,-147],[-28,-422],[-87,374]],[[65546,75618],[313,8],[-45,290],[237,199],[234,334],[374,-304],[30,-460],[106,-118],[301,27],[93,-105],[137,-593],[317,-398],[181,-271],[291,-282],[369,-247],[-7,-352]],[[84713,46708],[32,136],[239,129],[194,20],[87,72],[105,-72],[-102,-156],[-289,-252],[-233,-165]],[[32866,58026],[160,75],[58,-20],[-11,-430],[-232,-63],[-50,52],[81,158],[-6,228]],[[52339,73106],[302,232],[195,-69],[-9,-291],[236,212],[20,-111],[-139,-282],[-2,-266],[96,-143],[-36,-499],[-183,-289],[53,-314],[143,-10],[70,-274],[106,-90]],[[60041,72458],[-102,261],[105,217],[-169,-49],[-233,132],[-191,-331],[-421,-65],[-225,309],[-300,19],[-64,-238],[-192,-69],[-268,307],[-303,-11],[-165,573],[-203,320],[135,447],[-176,276],[308,550],[428,23],[117,438],[529,-76],[334,373],[324,163],[459,13],[485,-406],[399,-223],[323,89],[239,-52],[328,301]],[[57776,76021],[33,-222],[243,-186],[-51,-141],[-330,-32],[-118,-178],[-232,-310],[-87,268],[3,119]],[[83826,65878],[-167,-924],[-119,-472],[-146,486],[-32,427],[163,566],[223,436],[127,-172],[-49,-347]],[[60889,49136],[-128,-710],[16,-326],[178,-210],[8,-149],[-76,-348],[16,-175],[-18,-275],[97,-361],[115,-568],[101,-126]],[[59099,46514],[-157,172],[-177,97],[-111,97],[-116,146]],[[58449,51176],[98,69],[304,-7],[566,44]],[[60617,78955],[-222,-46],[-185,-187],[-260,-30],[-239,-215],[16,-358],[136,-139],[284,35],[-55,-206],[-304,-100],[-377,-333],[-154,117],[61,271],[-304,169],[50,110],[265,191],[-80,132],[-432,146],[-19,215],[-257,-71],[-103,-317],[-215,-426]],[[35174,32383],[-121,-362],[-313,-320],[-205,115],[-151,-62],[-256,247],[-189,-18],[-169,319]],[[6794,62819],[-41,-96],[-69,82],[8,161],[-46,210],[14,64],[48,94],[-19,113],[16,54],[21,-11],[107,-97],[49,-50],[45,-77],[71,-202],[-7,-32],[-108,-123],[-89,-90]],[[6645,63718],[-94,-41],[-47,121],[-32,47],[-3,36],[27,49],[99,-55],[73,-88],[-23,-69]],[[6456,64025],[-9,-63],[-149,17],[21,70],[137,-24]],[[6207,64108],[-15,-33],[-19,8],[-97,20],[-35,130],[-11,23],[74,80],[23,-37],[80,-191]],[[5737,64488],[-33,-57],[-93,105],[14,42],[43,57],[64,-13],[5,-134]],[[31350,77823],[48,-189],[-296,-279],[-286,-198],[-293,-171],[-147,-342],[-47,-129],[-3,-306],[92,-305],[115,-14],[-29,210],[83,-128],[-22,-165],[-188,-93],[-133,11],[-205,-100],[-121,-29],[-162,-28],[-231,-167],[408,108],[82,-109],[-389,-173],[-177,-1],[8,71],[-84,-160],[82,-26],[-60,-414],[-203,-443],[-20,148],[-61,30],[-91,144],[57,-310],[69,-103],[5,-217],[-89,-224],[-157,-460],[-25,23],[86,392],[-142,220],[-33,478],[-53,-249],[59,-365],[-183,90],[191,-185],[12,-548],[79,-40],[29,-199],[39,-577],[-176,-427],[-288,-171],[-182,-338],[-139,-37],[-141,-211],[-39,-193],[-305,-374],[-157,-274],[-131,-342],[-43,-409],[50,-400],[92,-492],[124,-408],[1,-249],[132,-668],[-9,-388],[-12,-224],[-69,-352],[-83,-73],[-137,70],[-44,253],[-105,132],[-148,496],[-129,440],[-42,225],[57,383],[-77,316],[-217,482],[-108,89],[-281,-262],[-49,29],[-135,269],[-174,142],[-314,-72],[-247,63],[-212,-39],[-114,-90],[50,-153],[-5,-234],[59,-113],[-53,-76],[-103,85],[-104,-109],[-202,17],[-207,305],[-242,-72],[-202,133],[-173,-40],[-234,-135],[-253,-427],[-276,-248],[-152,-275],[-63,-259],[-3,-397],[14,-277],[52,-196]],[[17464,70566],[-46,294],[-180,331],[-130,69],[-30,165],[-156,29],[-100,156],[-258,57],[-71,93],[-33,316],[-270,578],[-231,801],[10,133],[-123,190],[-215,483],[-38,469],[-148,315],[61,477],[-10,494],[-89,441],[109,543],[34,523],[33,522],[-50,773],[-88,492],[-80,268],[33,112],[402,-195],[148,-544],[69,152],[-45,472],[-94,473]],[[7498,84721],[-277,-219],[-142,148],[-43,270],[252,205],[148,88],[185,-39],[117,-179],[-240,-274]],[[4006,86330],[-171,-89],[-182,107],[-168,157],[274,98],[220,-52],[27,-221]],[[2297,88560],[171,-109],[173,59],[225,-152],[276,-77],[-23,-63],[-211,-121],[-211,125],[-106,104],[-245,-33],[-66,51],[17,216]],[[13740,83389],[-153,217],[-245,183],[-78,503],[-358,466],[-150,543],[-267,38],[-441,14],[-326,165],[-574,598],[-266,109],[-486,206],[-385,-49],[-546,264],[-330,246],[-309,-122],[58,-400],[-154,-37],[-321,-120],[-245,-195],[-308,-122],[-39,339],[125,565],[295,177],[-76,145],[-354,-321],[-190,-383],[-400,-410],[203,-280],[-262,-413],[-299,-241],[-278,-176],[-69,-255],[-434,-297],[-87,-271],[-325,-246],[-191,44],[-259,-160],[-282,-196],[-231,-193],[-477,-164],[-43,96],[304,270],[271,177],[296,315],[345,65],[137,236],[385,345],[62,115],[205,204],[48,437],[141,340],[-320,-175],[-90,99],[-150,-209],[-181,292],[-75,-207],[-104,287],[-278,-230],[-170,0],[-24,343],[50,211],[-179,205],[-361,-110],[-235,270],[-190,138],[-1,327],[-214,245],[108,331],[226,322],[99,295],[225,42],[191,-92],[224,278],[201,-50],[212,179],[-52,263],[-155,104],[205,222],[-170,-7],[-295,-125],[-85,-127],[-219,127],[-392,-65],[-407,138],[-117,232],[-351,334],[390,241],[620,282],[228,0],[-38,-288],[586,22],[-225,357],[-342,219],[-197,288],[-267,246],[-381,182],[155,302],[493,19],[350,262],[66,280],[284,274],[271,66],[526,256],[256,-39],[427,307],[421,-121],[201,-260],[123,112],[469,-35],[-16,-132],[425,-98],[283,57],[585,-182],[534,-54],[214,-75],[370,94],[421,-173],[302,-81]],[[30185,58611],[-8,-136],[-163,-67],[91,-262],[-3,-301],[-123,-334],[105,-457],[120,37],[62,417],[-86,202],[-14,436],[346,234],[-38,272],[97,181],[100,-404],[195,-10],[180,-321],[11,-190],[249,-6],[297,60],[159,-258],[213,-71],[155,180],[4,145],[344,34],[333,8],[-236,-170],[95,-272],[222,-43],[210,-283],[45,-462],[144,13],[109,-135]],[[80013,64241],[-371,-493],[-231,-544],[-61,-399],[212,-607],[260,-753],[252,-356],[169,-462],[127,-1066],[-37,-1013],[-232,-379],[-318,-371],[-227,-480],[-346,-536],[-101,369],[78,390],[-206,327]],[[96623,42347],[-92,-76],[-93,252],[10,155],[175,-331]],[[96418,43229],[45,-464],[-75,72],[-58,-31],[-39,159],[-6,441],[133,-177]],[[64752,61418],[-201,-154],[-54,-256],[-6,-196],[-277,-244],[-444,-268],[-249,-406],[-122,-32],[-83,34],[-163,-239],[-177,-111],[-233,-30],[-70,-33],[-61,-152],[-73,-42],[-43,-146],[-137,12],[-89,-78],[-192,30],[-72,336],[8,315],[-46,170],[-54,426],[-80,236],[56,28],[-29,264],[34,111],[-12,251]],[[58175,39107],[113,-6],[134,-97],[94,69],[148,-58]],[[59119,36429],[-70,-419],[-32,-479],[-72,-260],[-190,-290],[-54,-84],[-118,-292],[-77,-296],[-158,-413],[-314,-594],[-196,-345],[-210,-262],[-290,-224],[-141,-30],[-36,-160],[-169,85],[-138,-109],[-301,111],[-168,-71],[-115,31],[-286,-228],[-238,-91],[-171,-218],[-127,-13],[-117,205],[-94,10],[-120,258],[-13,-80],[-37,155],[2,337],[-90,386],[89,105],[-7,442],[-182,539],[-139,488],[-1,1],[-199,749]],[[58409,42899],[-210,-79],[-159,-230],[-33,-199],[-100,-46],[-241,-473],[-154,-373],[-94,-13],[-90,66],[-311,63]]],transform:{scale:[.0036000360003600037,.0017364686646866468],translate:[-180,-90]}},Xi=".mapboxgl-ctrl-globe-minimap";function zi(t){Object.assign(this.options,t),this._parentMap=null}return zi.prototype={options:{id:"mapboxgl-globe-minimap",globeSize:82,landColor:"white",waterColor:"rgba(30 40 70/60%)",markerColor:"#ff2233",markerSize:1},onAdd:function(t){return this._parentMap=t,this._container=this._createContainer(t),this._load(),this._container},initialTween:!0,_load:async function(){const{globeSize:t}=this.options,n=this._parentMap,e=this.canvas=mt(Xi).append("canvas").node(),r=this.context=e.getContext("2d"),i=window.devicePixelRatio||1;var o,u;e.width=t*i,e.height=t*i,e.style.width=t+"px",e.style.height=t+"px",r.scale(i,i),this.projection=ji(Ri).scale(249.5).clipAngle(90+Se).fitExtent([[0,0],[t,t]],{type:"Sphere"}),this.path=function(t,n){let e,r,i=3,o=4.5;function u(t){return t&&("function"==typeof o&&r.pointRadius(+o.apply(this,arguments)),Ve(t,e(r))),r.result()}return u.area=function(t){return Ve(t,e(Mr)),Mr.result()},u.measure=function(t){return Ve(t,e(pi)),pi.result()},u.bounds=function(t){return Ve(t,e(Or)),Or.result()},u.centroid=function(t){return Ve(t,e(Wr)),Wr.result()},u.projection=function(n){return arguments.length?(e=null==n?(t=null,Sr):(t=n).stream,u):t},u.context=function(t){return arguments.length?(r=null==t?(n=null,new wi(i)):new ui(n=t),"function"!=typeof o&&r.pointRadius(o),u):n},u.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(r.pointRadius(+t),+t),u):o},u.digits=function(t){if(!arguments.length)return i;if(null==t)i=null;else{const n=Math.floor(t);if(!(n>=0))throw new RangeError(`invalid digits: ${t}`);i=n}return null===n&&(r=new wi(i)),u},u.projection(t).digits(i).context(n)}(this.projection,r),this.globe={type:"Sphere"},this.land=(o=Li,"GeometryCollection"===(u=Li.objects.land).type?{type:"FeatureCollection",features:u.geometries.map((function(t){return Oi(o,t)}))}:Oi(o,u)),this._update(),n.on("move",this._update.bind(this))},_draw_marker:function(){const{globeSize:t,markerSize:n,markerColor:e}=this.options;mt(Xi).append("svg").attr("width",t).attr("height",t).attr("style","position: absolute; left: 0; top: 0;").append("path").attr("opacity",0).attr("d","M5.36018 5.33333C5.36018 4.59722 5.61972 3.96875 6.13881 3.44792C6.65789 2.92708 7.28426 2.66667 8.0179 2.66667C8.75154 2.66667 9.3779 2.92708 9.89699 3.44792C10.4161 3.96875 10.6756 4.59722 10.6756 5.33333C10.6756 6.06944 10.4161 6.69792 9.89699 7.21875C9.3779 7.73958 8.75154 8 8.0179 8C7.28426 8 6.65789 7.73958 6.13881 7.21875C5.61972 6.69792 5.36018 6.06944 5.36018 5.33333ZM2.70246 5.33333C2.70246 6.09028 2.81666 6.7118 3.04506 7.19792L6.824 15.2604C6.93474 15.4896 7.09911 15.6701 7.31713 15.8021C7.53515 15.934 7.76874 16 8.0179 16C8.26706 16 8.50065 15.934 8.71866 15.8021C8.93668 15.6701 9.09759 15.4896 9.20141 15.2604L12.9907 7.19792C13.2191 6.71181 13.3333 6.09028 13.3333 5.33333C13.3333 3.86111 12.8142 2.60417 11.7761 1.5625C10.7379 0.520833 9.48518 -8.13254e-07 8.0179 -9.41527e-07C6.55062 -1.0698e-06 5.29789 0.520832 4.25972 1.5625C3.22155 2.60417 2.70246 3.86111 2.70246 5.33333Z").attr("transform",`scale(${n}, ${n}), translate(${t*(1/n)/2-8}, ${t*(1/n)/2-16})`).attr("style","fill:"+e).transition().duration(100).attr("opacity",1)},_update:function(){const t=this,n=this._parentMap.getCenter();me().duration(this.initialTween?1e3:1).tween("rotate",(function(){const e=pn(t.projection.rotate(),[-n.lng,-n.lat]);return function(n){t.projection.rotate(e(n)),t.context.clearRect(0,0,t.canvas.width,t.canvas.height),t.context.fillStyle=t.options.waterColor,t.context.beginPath(),t.path(t.globe),t.context.fill(),t.context.fillStyle=t.options.landColor,t.context.beginPath(),t.path(t.land),t.context.fill()}})).on("end",(()=>{t.initialTween&&(t._draw_marker(),t.initialTween=!1)}))},_createContainer:function(t){const{globeSize:n,id:e}=this.options,r=document.createElement("div");return r.className="mapboxgl-ctrl-globe-minimap mapboxgl-ctrl",r.setAttribute("style","width: "+n+"; height: "+n+";"),r.addEventListener("contextmenu",this._preventDefault),t.getContainer().appendChild(r),""!==e&&(r.id=e),r},_preventDefault:function(t){t.preventDefault()}},window.GlobeMinimap=zi,zi}();
</script>
<script>"use strict";var pmtiles=(()=>{var k=Object.defineProperty;var Je=Object.getOwnPropertyDescriptor;var Ye=Object.getOwnPropertyNames;var Qe=Object.prototype.hasOwnProperty;var U=Math.pow;var f=(r,e)=>k(r,"name",{value:e,configurable:!0});var Xe=(r,e)=>{for(var t in e)k(r,t,{get:e[t],enumerable:!0})},_e=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Ye(e))!Qe.call(r,i)&&i!==t&&k(r,i,{get:()=>e[i],enumerable:!(n=Je(e,i))||n.enumerable});return r};var et=r=>_e(k({},"__esModule",{value:!0}),r);var m=(r,e,t)=>new Promise((n,i)=>{var a=h=>{try{u(t.next(h))}catch(l){i(l)}},s=h=>{try{u(t.throw(h))}catch(l){i(l)}},u=h=>h.done?n(h.value):Promise.resolve(h.value).then(a,s);u((t=t.apply(r,e)).next())});var Dt={};Xe(Dt,{Compression:()=>Oe,EtagMismatch:()=>B,FetchSource:()=>K,FileSource:()=>oe,PMTiles:()=>P,Protocol:()=>ie,ResolvedValueCache:()=>ue,SharedPromiseCache:()=>G,TileType:()=>se,bytesToHeader:()=>$e,findTile:()=>Fe,getUint64:()=>b,leafletRasterLayer:()=>wt,readVarint:()=>R,tileIdToZxy:()=>Tt,tileTypeExt:()=>Ze,zxyToTileId:()=>Ie});var w=Uint8Array,E=Uint16Array,tt=Int32Array,Me=new w([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ue=new w([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),rt=new w([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ee=f(function(r,e){for(var t=new E(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var i=new tt(t[30]),n=1;n<30;++n)for(var a=t[n];a<t[n+1];++a)i[a]=a-t[n]<<5|n;return{b:t,r:i}},"freb"),Le=Ee(Me,2),Pe=Le.b,nt=Le.r;Pe[28]=258,nt[258]=28;var Se=Ee(Ue,0),it=Se.b,Ut=Se.r,re=new E(32768);for(g=0;g<32768;++g)T=(g&43690)>>1|(g&21845)<<1,T=(T&52428)>>2|(T&13107)<<2,T=(T&61680)>>4|(T&3855)<<4,re[g]=((T&65280)>>8|(T&255)<<8)>>1;var T,g,F=f(function(r,e,t){for(var n=r.length,i=0,a=new E(e);i<n;++i)r[i]&&++a[r[i]-1];var s=new E(e);for(i=1;i<e;++i)s[i]=s[i-1]+a[i-1]<<1;var u;if(t){u=new E(1<<e);var h=15-e;for(i=0;i<n;++i)if(r[i])for(var l=i<<4|r[i],c=e-r[i],o=s[r[i]-1]++<<c,v=o|(1<<c)-1;o<=v;++o)u[re[o]>>h]=l}else for(u=new E(n),i=0;i<n;++i)r[i]&&(u[i]=re[s[r[i]-1]++]>>15-r[i]);return u},"hMap"),$=new w(288);for(g=0;g<144;++g)$[g]=8;var g;for(g=144;g<256;++g)$[g]=9;var g;for(g=256;g<280;++g)$[g]=7;var g;for(g=280;g<288;++g)$[g]=8;var g,Re=new w(32);for(g=0;g<32;++g)Re[g]=5;var g;var at=F($,9,1);var st=F(Re,5,1),ee=f(function(r){for(var e=r[0],t=1;t<r.length;++t)r[t]>e&&(e=r[t]);return e},"max"),z=f(function(r,e,t){var n=e/8|0;return(r[n]|r[n+1]<<8)>>(e&7)&t},"bits"),te=f(function(r,e){var t=e/8|0;return(r[t]|r[t+1]<<8|r[t+2]<<16)>>(e&7)},"bits16"),ot=f(function(r){return(r+7)/8|0},"shft"),ut=f(function(r,e,t){return(e==null||e<0)&&(e=0),(t==null||t>r.length)&&(t=r.length),new w(r.subarray(e,t))},"slc");var ft=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],y=f(function(r,e,t){var n=new Error(e||ft[r]);if(n.code=r,Error.captureStackTrace&&Error.captureStackTrace(n,y),!t)throw n;return n},"err"),ne=f(function(r,e,t,n){var i=r.length,a=n?n.length:0;if(!i||e.f&&!e.l)return t||new w(0);var s=!t,u=s||e.i!=2,h=e.i;s&&(t=new w(i*3));var l=f(function(Te){var Ce=t.length;if(Te>Ce){var De=new w(Math.max(Ce*2,Te));De.set(t),t=De}},"cbuf"),c=e.f||0,o=e.p||0,v=e.b||0,d=e.l,p=e.d,H=e.m,I=e.n,q=i*8;do{if(!d){c=z(r,o,1);var j=z(r,o+1,3);if(o+=3,j)if(j==1)d=at,p=st,H=9,I=5;else if(j==2){var J=z(r,o,31)+257,me=z(r,o+10,15)+4,de=J+z(r,o+5,31)+1;o+=14;for(var O=new w(de),Y=new w(19),x=0;x<me;++x)Y[rt[x]]=z(r,o+x*3,7);o+=me*3;for(var ye=ee(Y),Ge=(1<<ye)-1,qe=F(Y,ye,1),x=0;x<de;){var we=qe[z(r,o,Ge)];o+=we&15;var A=we>>4;if(A<16)O[x++]=A;else{var D=0,V=0;for(A==16?(V=3+z(r,o,3),o+=2,D=O[x-1]):A==17?(V=3+z(r,o,7),o+=3):A==18&&(V=11+z(r,o,127),o+=7);V--;)O[x++]=D}}var xe=O.subarray(0,J),C=O.subarray(J);H=ee(xe),I=ee(C),d=F(xe,H,1),p=F(C,I,1)}else y(1);else{var A=ot(o)+4,W=r[A-4]|r[A-3]<<8,N=A+W;if(N>i){h&&y(0);break}u&&l(v+W),t.set(r.subarray(A,N),v),e.b=v+=W,e.p=o=N*8,e.f=c;continue}if(o>q){h&&y(0);break}}u&&l(v+131072);for(var je=(1<<H)-1,We=(1<<I)-1,Q=o;;Q=o){var D=d[te(r,o)&je],M=D>>4;if(o+=D&15,o>q){h&&y(0);break}if(D||y(2),M<256)t[v++]=M;else if(M==256){Q=o,d=null;break}else{var be=M-254;if(M>264){var x=M-257,Z=Me[x];be=z(r,o,(1<<Z)-1)+Pe[x],o+=Z}var X=p[te(r,o)&We],_=X>>4;X||y(3),o+=X&15;var C=it[_];if(_>3){var Z=Ue[_];C+=te(r,o)&(1<<Z)-1,o+=Z}if(o>q){h&&y(0);break}u&&l(v+131072);var ze=v+be;if(v<C){var Ae=a-C,Ne=Math.min(C,ze);for(Ae+v<0&&y(3);v<Ne;++v)t[v]=n[Ae+v]}for(;v<ze;++v)t[v]=t[v-C]}}e.l=d,e.p=Q,e.b=v,e.f=c,d&&(c=1,e.m=H,e.d=p,e.n=I)}while(!c);return v!=t.length&&s?ut(t,0,v):t.subarray(0,v)},"inflt");var lt=new w(0);var ht=f(function(r){(r[0]!=31||r[1]!=139||r[2]!=8)&&y(6,"invalid gzip data");var e=r[3],t=10;e&4&&(t+=(r[10]|r[11]<<8)+2);for(var n=(e>>3&1)+(e>>4&1);n>0;n-=!r[t++]);return t+(e&2)},"gzs"),ct=f(function(r){var e=r.length;return(r[e-4]|r[e-3]<<8|r[e-2]<<16|r[e-1]<<24)>>>0},"gzl");var vt=f(function(r,e){return((r[0]&15)!=8||r[0]>>4>7||(r[0]<<8|r[1])%31)&&y(6,"invalid zlib data"),(r[1]>>5&1)==+!e&&y(6,"invalid zlib data: "+(r[1]&32?"need":"unexpected")+" dictionary"),(r[1]>>3&4)+2},"zls");function gt(r,e){return ne(r,{i:2},e&&e.out,e&&e.dictionary)}f(gt,"inflateSync");function pt(r,e){var t=ht(r);return t+8>r.length&&y(6,"invalid gzip data"),ne(r.subarray(t,-8),{i:2},e&&e.out||new w(ct(r)),e&&e.dictionary)}f(pt,"gunzipSync");function mt(r,e){return ne(r.subarray(vt(r,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}f(mt,"unzlibSync");function Be(r,e){return r[0]==31&&r[1]==139&&r[2]==8?pt(r,e):(r[0]&15)!=8||r[0]>>4>7||(r[0]<<8|r[1])%31?gt(r,e):mt(r,e)}f(Be,"decompressSync");var dt=typeof TextDecoder!="undefined"&&new TextDecoder,yt=0;try{dt.decode(lt,{stream:!0}),yt=1}catch(r){}var wt=f((r,e)=>{let t=!1,n="",i=L.GridLayer.extend({createTile:f((a,s)=>{let u=document.createElement("img"),h=new AbortController,l=h.signal;return u.cancel=()=>{h.abort()},t||(r.getHeader().then(c=>{c.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):c.tileType===2?n="image/png":c.tileType===3?n="image/jpeg":c.tileType===4?n="image/webp":c.tileType===5&&(n="image/avif")}),t=!0),r.getZxy(a.z,a.x,a.y,l).then(c=>{if(c){let o=new Blob([c.data],{type:n}),v=window.URL.createObjectURL(o);u.src=v,u.cancel=void 0,s(void 0,u)}}).catch(c=>{if(c.name!=="AbortError")throw c}),u},"createTile"),_removeTile:f(function(a){let s=this._tiles[a];s&&(s.el.cancel&&s.el.cancel(),s.el.width=0,s.el.height=0,s.el.deleted=!0,L.DomUtil.remove(s.el),delete this._tiles[a],this.fire("tileunload",{tile:s.el,coords:this._keyToTileCoords(a)}))},"_removeTile")});return new i(e)},"leafletRasterLayer"),xt=f(r=>(e,t)=>{if(t instanceof AbortController)return r(e,t);let n=new AbortController;return r(e,n).then(i=>t(void 0,i.data,i.cacheControl||"",i.expires||""),i=>t(i)).catch(i=>t(i)),{cancel:f(()=>n.abort(),"cancel")}},"v3compat"),ae=class ae{constructor(e){this.tilev4=f((e,t)=>m(this,null,function*(){if(e.type==="json"){let v=e.url.substr(10),d=this.tiles.get(v);if(d||(d=new P(v),this.tiles.set(v,d)),this.metadata)return{data:yield d.getTileJson(e.url)};let p=yield d.getHeader();return(p.minLon>=p.maxLon||p.minLat>=p.maxLat)&&console.error(`Bounds of PMTiles archive ${p.minLon},${p.minLat},${p.maxLon},${p.maxLat} are not valid.`),{data:{tiles:[`${e.url}/{z}/{x}/{y}`],minzoom:p.minZoom,maxzoom:p.maxZoom,bounds:[p.minLon,p.minLat,p.maxLon,p.maxLat]}}}let n=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),i=e.url.match(n);if(!i)throw new Error("Invalid PMTiles protocol URL");let a=i[1],s=this.tiles.get(a);s||(s=new P(a),this.tiles.set(a,s));let u=i[2],h=i[3],l=i[4],c=yield s.getHeader(),o=yield s==null?void 0:s.getZxy(+u,+h,+l,t.signal);if(o)return{data:new Uint8Array(o.data),cacheControl:o.cacheControl,expires:o.expires};if(c.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4");this.tile=xt(this.tilev4);this.tiles=new Map,this.metadata=(e==null?void 0:e.metadata)||!1,this.errorOnMissingTile=(e==null?void 0:e.errorOnMissingTile)||!1}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};f(ae,"Protocol");var ie=ae;function S(r,e){return(e>>>0)*4294967296+(r>>>0)}f(S,"toNum");function bt(r,e){let t=e.buf,n=t[e.pos++],i=(n&112)>>4;if(n<128||(n=t[e.pos++],i|=(n&127)<<3,n<128)||(n=t[e.pos++],i|=(n&127)<<10,n<128)||(n=t[e.pos++],i|=(n&127)<<17,n<128)||(n=t[e.pos++],i|=(n&127)<<24,n<128)||(n=t[e.pos++],i|=(n&1)<<31,n<128))return S(r,i);throw new Error("Expected varint not more than 10 bytes")}f(bt,"readVarintRemainder");function R(r){let e=r.buf,t=e[r.pos++],n=t&127;return t<128||(t=e[r.pos++],n|=(t&127)<<7,t<128)||(t=e[r.pos++],n|=(t&127)<<14,t<128)||(t=e[r.pos++],n|=(t&127)<<21,t<128)?n:(t=e[r.pos],n|=(t&15)<<28,bt(n,r))}f(R,"readVarint");function He(r,e,t,n){if(n===0){t===1&&(e[0]=r-1-e[0],e[1]=r-1-e[1]);let i=e[0];e[0]=e[1],e[1]=i}}f(He,"rotate");function zt(r,e){let t=U(2,r),n=e,i=e,a=e,s=[0,0],u=1;for(;u<t;)n=1&a/2,i=1&(a^n),He(u,s,n,i),s[0]+=u*n,s[1]+=u*i,a=a/4,u*=2;return[r,s[0],s[1]]}f(zt,"idOnLevel");var At=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function Ie(r,e,t){if(r>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(e>U(2,r)-1||t>U(2,r)-1)throw new Error("tile x/y outside zoom level bounds");let n=At[r],i=U(2,r),a=0,s=0,u=0,h=[e,t],l=i/2;for(;l>0;)a=(h[0]&l)>0?1:0,s=(h[1]&l)>0?1:0,u+=l*l*(3*a^s),He(l,h,a,s),l=l/2;return n+u}f(Ie,"zxyToTileId");function Tt(r){let e=0,t=0;for(let n=0;n<27;n++){let i=(1<<n)*(1<<n);if(e+i>r)return zt(n,r-e);e+=i}throw new Error("Tile zoom level exceeds max safe number limit (26)")}f(Tt,"tileIdToZxy");var Oe=(a=>(a[a.Unknown=0]="Unknown",a[a.None=1]="None",a[a.Gzip=2]="Gzip",a[a.Brotli=3]="Brotli",a[a.Zstd=4]="Zstd",a))(Oe||{});function fe(r,e){return m(this,null,function*(){if(e===1||e===0)return r;if(e===2){if(typeof globalThis.DecompressionStream=="undefined")return Be(new Uint8Array(r));let t=new Response(r).body;if(!t)throw new Error("Failed to read response stream");let n=t.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(n).arrayBuffer()}throw new Error("Compression method not supported")})}f(fe,"defaultDecompress");var se=(s=>(s[s.Unknown=0]="Unknown",s[s.Mvt=1]="Mvt",s[s.Png=2]="Png",s[s.Jpeg=3]="Jpeg",s[s.Webp=4]="Webp",s[s.Avif=5]="Avif",s))(se||{});function Ze(r){return r===1?".mvt":r===2?".png":r===3?".jpg":r===4?".webp":r===5?".avif":""}f(Ze,"tileTypeExt");var Ct=127;function Fe(r,e){let t=0,n=r.length-1;for(;t<=n;){let i=n+t>>1,a=e-r[i].tileId;if(a>0)t=i+1;else if(a<0)n=i-1;else return r[i]}return n>=0&&(r[n].runLength===0||e-r[n].tileId<r[n].runLength)?r[n]:null}f(Fe,"findTile");var le=class le{constructor(e){this.file=e}getKey(){return this.file.name}getBytes(e,t){return m(this,null,function*(){return{data:yield this.file.slice(e,e+t).arrayBuffer()}})}};f(le,"FileSource");var oe=le,he=class he{constructor(e,t=new Headers){this.url=e,this.customHeaders=t,this.mustReload=!1;let n="";"navigator"in globalThis&&(n=globalThis.navigator.userAgent||"");let i=n.indexOf("Windows")>-1,a=/Chrome|Chromium|Edg|OPR|Brave/.test(n);this.chromeWindowsNoCache=!1,i&&a&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,n,i){return m(this,null,function*(){let a,s;n?s=n:(a=new AbortController,s=a.signal);let u=new Headers(this.customHeaders);u.set("range",`bytes=${e}-${e+t-1}`);let h;this.mustReload?h="reload":this.chromeWindowsNoCache&&(h="no-store");let l=yield fetch(this.url,{signal:s,cache:h,headers:u});if(e===0&&l.status===416){let d=l.headers.get("Content-Range");if(!d||!d.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let p=+d.substr(8);l=yield fetch(this.url,{signal:s,cache:"reload",headers:{range:`bytes=0-${p-1}`}})}let c=l.headers.get("Etag");if(c!=null&&c.startsWith("W/")&&(c=null),l.status===416||i&&c&&c!==i)throw this.mustReload=!0,new B(`Server returned non-matching ETag ${i} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(l.status>=300)throw new Error(`Bad response code: ${l.status}`);let o=l.headers.get("Content-Length");if(l.status===200&&(!o||+o>t))throw a&&a.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield l.arrayBuffer(),etag:c||void 0,cacheControl:l.headers.get("Cache-Control")||void 0,expires:l.headers.get("Expires")||void 0}})}};f(he,"FetchSource");var K=he;function b(r,e){let t=r.getUint32(e+4,!0),n=r.getUint32(e+0,!0);return t*U(2,32)+n}f(b,"getUint64");function $e(r,e){let t=new DataView(r),n=t.getUint8(7);if(n>3)throw new Error(`Archive is spec version ${n} but this library supports up to spec version 3`);return{specVersion:n,rootDirectoryOffset:b(t,8),rootDirectoryLength:b(t,16),jsonMetadataOffset:b(t,24),jsonMetadataLength:b(t,32),leafDirectoryOffset:b(t,40),leafDirectoryLength:b(t,48),tileDataOffset:b(t,56),tileDataLength:b(t,64),numAddressedTiles:b(t,72),numTileEntries:b(t,80),numTileContents:b(t,88),clustered:t.getUint8(96)===1,internalCompression:t.getUint8(97),tileCompression:t.getUint8(98),tileType:t.getUint8(99),minZoom:t.getUint8(100),maxZoom:t.getUint8(101),minLon:t.getInt32(102,!0)/1e7,minLat:t.getInt32(106,!0)/1e7,maxLon:t.getInt32(110,!0)/1e7,maxLat:t.getInt32(114,!0)/1e7,centerZoom:t.getUint8(118),centerLon:t.getInt32(119,!0)/1e7,centerLat:t.getInt32(123,!0)/1e7,etag:e}}f($e,"bytesToHeader");function Ve(r){let e={buf:new Uint8Array(r),pos:0},t=R(e),n=[],i=0;for(let a=0;a<t;a++){let s=R(e);n.push({tileId:i+s,offset:0,length:0,runLength:1}),i+=s}for(let a=0;a<t;a++)n[a].runLength=R(e);for(let a=0;a<t;a++)n[a].length=R(e);for(let a=0;a<t;a++){let s=R(e);s===0&&a>0?n[a].offset=n[a-1].offset+n[a-1].length:n[a].offset=s-1}return n}f(Ve,"deserializeIndex");var ce=class ce extends Error{};f(ce,"EtagMismatch");var B=ce;function ke(r,e){return m(this,null,function*(){let t=yield r.getBytes(0,16384);if(new DataView(t.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let i=t.data.slice(0,Ct),a=$e(i,t.etag),s=t.data.slice(a.rootDirectoryOffset,a.rootDirectoryOffset+a.rootDirectoryLength),u=`${r.getKey()}|${a.etag||""}|${a.rootDirectoryOffset}|${a.rootDirectoryLength}`,h=Ve(yield e(s,a.internalCompression));return[a,[u,h.length,h]]})}f(ke,"getHeaderAndRoot");function Ke(r,e,t,n,i){return m(this,null,function*(){let a=yield r.getBytes(t,n,void 0,i.etag),s=yield e(a.data,i.internalCompression),u=Ve(s);if(u.length===0)throw new Error("Empty directory is invalid");return u})}f(Ke,"getDirectory");var ve=class ve{constructor(e=100,t=!0,n=fe){this.cache=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=n}getHeader(e){return m(this,null,function*(){let t=e.getKey(),n=this.cache.get(t);if(n)return n.lastUsed=this.counter++,n.data;let i=yield ke(e,this.decompress);return i[1]&&this.cache.set(i[1][0],{lastUsed:this.counter++,data:i[1][2]}),this.cache.set(t,{lastUsed:this.counter++,data:i[0]}),this.prune(),i[0]})}getDirectory(e,t,n,i){return m(this,null,function*(){let a=`${e.getKey()}|${i.etag||""}|${t}|${n}`,s=this.cache.get(a);if(s)return s.lastUsed=this.counter++,s.data;let u=yield Ke(e,this.decompress,t,n,i);return this.cache.set(a,{lastUsed:this.counter++,data:u}),this.prune(),u})}prune(){if(this.cache.size>this.maxCacheEntries){let e=1/0,t;this.cache.forEach((n,i)=>{n.lastUsed<e&&(e=n.lastUsed,t=i)}),t&&this.cache.delete(t)}}invalidate(e){return m(this,null,function*(){this.cache.delete(e.getKey())})}};f(ve,"ResolvedValueCache");var ue=ve,ge=class ge{constructor(e=100,t=!0,n=fe){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=n}getHeader(e){return m(this,null,function*(){let t=e.getKey(),n=this.cache.get(t);if(n)return n.lastUsed=this.counter++,yield n.data;let i=new Promise((a,s)=>{ke(e,this.decompress).then(u=>{u[1]&&this.cache.set(u[1][0],{lastUsed:this.counter++,data:Promise.resolve(u[1][2])}),a(u[0]),this.prune()}).catch(u=>{s(u)})});return this.cache.set(t,{lastUsed:this.counter++,data:i}),i})}getDirectory(e,t,n,i){return m(this,null,function*(){let a=`${e.getKey()}|${i.etag||""}|${t}|${n}`,s=this.cache.get(a);if(s)return s.lastUsed=this.counter++,yield s.data;let u=new Promise((h,l)=>{Ke(e,this.decompress,t,n,i).then(c=>{h(c),this.prune()}).catch(c=>{l(c)})});return this.cache.set(a,{lastUsed:this.counter++,data:u}),u})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((n,i)=>{n.lastUsed<e&&(e=n.lastUsed,t=i)}),t&&this.cache.delete(t)}}invalidate(e){return m(this,null,function*(){let t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());let n=new Promise((i,a)=>{this.getHeader(e).then(s=>{i(),this.invalidations.delete(t)}).catch(s=>{a(s)})});this.invalidations.set(t,n)})}};f(ge,"SharedPromiseCache");var G=ge,pe=class pe{constructor(e,t,n){typeof e=="string"?this.source=new K(e):this.source=e,n?this.decompress=n:this.decompress=fe,t?this.cache=t:this.cache=new G}getHeader(){return m(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,n,i){return m(this,null,function*(){let a=Ie(e,t,n),s=yield this.cache.getHeader(this.source);if(e<s.minZoom||e>s.maxZoom)return;let u=s.rootDirectoryOffset,h=s.rootDirectoryLength;for(let l=0;l<=3;l++){let c=yield this.cache.getDirectory(this.source,u,h,s),o=Fe(c,a);if(o){if(o.runLength>0){let v=yield this.source.getBytes(s.tileDataOffset+o.offset,o.length,i,s.etag);return{data:yield this.decompress(v.data,s.tileCompression),cacheControl:v.cacheControl,expires:v.expires}}u=s.leafDirectoryOffset+o.offset,h=o.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(e,t,n,i){return m(this,null,function*(){try{return yield this.getZxyAttempt(e,t,n,i)}catch(a){if(a instanceof B)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,n,i);throw a}})}getMetadataAttempt(){return m(this,null,function*(){let e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),n=yield this.decompress(t.data,e.internalCompression),i=new TextDecoder("utf-8");return JSON.parse(i.decode(n))})}getMetadata(){return m(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof B)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}getTileJson(e){return m(this,null,function*(){let t=yield this.getHeader(),n=yield this.getMetadata(),i=Ze(t.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${e}/{z}/{x}/{y}${i}`],vector_layers:n.vector_layers,attribution:n.attribution,description:n.description,name:n.name,version:n.version,bounds:[t.minLon,t.minLat,t.maxLon,t.maxLat],center:[t.centerLon,t.centerLat,t.centerZoom],minzoom:t.minZoom,maxzoom:t.maxZoom}})}};f(pe,"PMTiles");var P=pe;return et(Dt);})();
//# sourceMappingURL=pmtiles.js.map</script>
<script>!function(A){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=A();else if("function"==typeof define&&define.amd)define([],A);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).h3j_h3t=A()}}((function(){return function A(e,r,t){function i(o,a){if(!r[o]){if(!e[o]){var f="function"==typeof require&&require;if(!a&&f)return f(o,!0);if(n)return n(o,!0);var s=new Error("Cannot find module '"+o+"'");throw s.code="MODULE_NOT_FOUND",s}var u=r[o]={exports:{}};e[o][0].call(u.exports,(function(A){return i(e[o][1][A]||A)}),u,u.exports,A,e,r,t)}return r[o].exports}for(var n="function"==typeof require&&require,o=0;o<t.length;o++)i(t[o]);return i}({1:[function(A,e,r){"use strict";function t(A,e){this.x=A,this.y=e}e.exports=t,t.prototype={clone:function(){return new t(this.x,this.y)},add:function(A){return this.clone()._add(A)},sub:function(A){return this.clone()._sub(A)},multByPoint:function(A){return this.clone()._multByPoint(A)},divByPoint:function(A){return this.clone()._divByPoint(A)},mult:function(A){return this.clone()._mult(A)},div:function(A){return this.clone()._div(A)},rotate:function(A){return this.clone()._rotate(A)},rotateAround:function(A,e){return this.clone()._rotateAround(A,e)},matMult:function(A){return this.clone()._matMult(A)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(A){return this.x===A.x&&this.y===A.y},dist:function(A){return Math.sqrt(this.distSqr(A))},distSqr:function(A){var e=A.x-this.x,r=A.y-this.y;return e*e+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(A){return Math.atan2(this.y-A.y,this.x-A.x)},angleWith:function(A){return this.angleWithSep(A.x,A.y)},angleWithSep:function(A,e){return Math.atan2(this.x*e-this.y*A,this.x*A+this.y*e)},_matMult:function(A){var e=A[0]*this.x+A[1]*this.y,r=A[2]*this.x+A[3]*this.y;return this.x=e,this.y=r,this},_add:function(A){return this.x+=A.x,this.y+=A.y,this},_sub:function(A){return this.x-=A.x,this.y-=A.y,this},_mult:function(A){return this.x*=A,this.y*=A,this},_div:function(A){return this.x/=A,this.y/=A,this},_multByPoint:function(A){return this.x*=A.x,this.y*=A.y,this},_divByPoint:function(A){return this.x/=A.x,this.y/=A.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var A=this.y;return this.y=this.x,this.x=-A,this},_rotate:function(A){var e=Math.cos(A),r=Math.sin(A),t=e*this.x-r*this.y,i=r*this.x+e*this.y;return this.x=t,this.y=i,this},_rotateAround:function(A,e){var r=Math.cos(A),t=Math.sin(A),i=e.x+r*(this.x-e.x)-t*(this.y-e.y),n=e.y+t*(this.x-e.x)+r*(this.y-e.y);return this.x=i,this.y=n,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},t.convert=function(A){return A instanceof t?A:Array.isArray(A)?new t(A[0],A[1]):A}},{}],2:[function(A,e,r){e.exports.VectorTile=A("./lib/vectortile.js"),e.exports.VectorTileFeature=A("./lib/vectortilefeature.js"),e.exports.VectorTileLayer=A("./lib/vectortilelayer.js")},{"./lib/vectortile.js":3,"./lib/vectortilefeature.js":4,"./lib/vectortilelayer.js":5}],3:[function(A,e,r){"use strict";var t=A("./vectortilelayer");function i(A,e,r){if(3===A){var i=new t(r,r.readVarint()+r.pos);i.length&&(e[i.name]=i)}}e.exports=function(A,e){this.layers=A.readFields(i,{},e)}},{"./vectortilelayer":5}],4:[function(A,e,r){"use strict";var t=A("@mapbox/point-geometry");function i(A,e,r,t,i){this.properties={},this.extent=r,this.type=0,this._pbf=A,this._geometry=-1,this._keys=t,this._values=i,A.readFields(n,this,e)}function n(A,e,r){1==A?e.id=r.readVarint():2==A?function(A,e){var r=A.readVarint()+A.pos;for(;A.pos<r;){var t=e._keys[A.readVarint()],i=e._values[A.readVarint()];e.properties[t]=i}}(r,e):3==A?e.type=r.readVarint():4==A&&(e._geometry=r.pos)}function o(A){for(var e,r,t=0,i=0,n=A.length,o=n-1;i<n;o=i++)e=A[i],t+=((r=A[o]).x-e.x)*(e.y+r.y);return t}e.exports=i,i.types=["Unknown","Point","LineString","Polygon"],i.prototype.loadGeometry=function(){var A=this._pbf;A.pos=this._geometry;for(var e,r=A.readVarint()+A.pos,i=1,n=0,o=0,a=0,f=[];A.pos<r;){if(n<=0){var s=A.readVarint();i=7&s,n=s>>3}if(n--,1===i||2===i)o+=A.readSVarint(),a+=A.readSVarint(),1===i&&(e&&f.push(e),e=[]),e.push(new t(o,a));else{if(7!==i)throw new Error("unknown command "+i);e&&e.push(e[0].clone())}}return e&&f.push(e),f},i.prototype.bbox=function(){var A=this._pbf;A.pos=this._geometry;for(var e=A.readVarint()+A.pos,r=1,t=0,i=0,n=0,o=1/0,a=-1/0,f=1/0,s=-1/0;A.pos<e;){if(t<=0){var u=A.readVarint();r=7&u,t=u>>3}if(t--,1===r||2===r)(i+=A.readSVarint())<o&&(o=i),i>a&&(a=i),(n+=A.readSVarint())<f&&(f=n),n>s&&(s=n);else if(7!==r)throw new Error("unknown command "+r)}return[o,f,a,s]},i.prototype.toGeoJSON=function(A,e,r){var t,n,a=this.extent*Math.pow(2,r),f=this.extent*A,s=this.extent*e,u=this.loadGeometry(),l=i.types[this.type];function h(A){for(var e=0;e<A.length;e++){var r=A[e],t=180-360*(r.y+s)/a;A[e]=[360*(r.x+f)/a-180,360/Math.PI*Math.atan(Math.exp(t*Math.PI/180))-90]}}switch(this.type){case 1:var c=[];for(t=0;t<u.length;t++)c[t]=u[t][0];h(u=c);break;case 2:for(t=0;t<u.length;t++)h(u[t]);break;case 3:for(u=function(A){var e=A.length;if(e<=1)return[A];for(var r,t,i=[],n=0;n<e;n++){var a=o(A[n]);0!==a&&(void 0===t&&(t=a<0),t===a<0?(r&&i.push(r),r=[A[n]]):r.push(A[n]))}r&&i.push(r);return i}(u),t=0;t<u.length;t++)for(n=0;n<u[t].length;n++)h(u[t][n])}1===u.length?u=u[0]:l="Multi"+l;var d={type:"Feature",geometry:{type:l,coordinates:u},properties:this.properties};return"id"in this&&(d.id=this.id),d}},{"@mapbox/point-geometry":1}],5:[function(A,e,r){"use strict";var t=A("./vectortilefeature.js");function i(A,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=A,this._keys=[],this._values=[],this._features=[],A.readFields(n,this,e),this.length=this._features.length}function n(A,e,r){15===A?e.version=r.readVarint():1===A?e.name=r.readString():5===A?e.extent=r.readVarint():2===A?e._features.push(r.pos):3===A?e._keys.push(r.readString()):4===A&&e._values.push(function(A){var e=null,r=A.readVarint()+A.pos;for(;A.pos<r;){var t=A.readVarint()>>3;e=1===t?A.readString():2===t?A.readFloat():3===t?A.readDouble():4===t?A.readVarint64():5===t?A.readVarint():6===t?A.readSVarint():7===t?A.readBoolean():null}return e}(r))}e.exports=i,i.prototype.feature=function(A){if(A<0||A>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[A];var e=this._pbf.readVarint()+this._pbf.pos;return new t(this._pbf,e,this.extent,this._keys,this._values)}},{"./vectortilefeature.js":4}],6:[function(A,e,r){!function(A,t){"object"==typeof r&&void 0!==e?e.exports=t():A.geojsonvt=t()}(this,(function(){"use strict";function A(r,t,i,n){for(var o,a=n,f=i-t>>1,s=i-t,u=r[t],l=r[t+1],h=r[i],c=r[i+1],d=t+3;d<i;d+=3){var g=e(r[d],r[d+1],u,l,h,c);if(g>a)o=d,a=g;else if(g===a){var w=Math.abs(d-f);w<s&&(o=d,s=w)}}a>n&&(o-t>3&&A(r,t,o,n),r[o+2]=a,i-o>3&&A(r,o,i,n))}function e(A,e,r,t,i,n){var o=i-r,a=n-t;if(0!==o||0!==a){var f=((A-r)*o+(e-t)*a)/(o*o+a*a);f>1?(r=i,t=n):f>0&&(r+=o*f,t+=a*f)}return(o=A-r)*o+(a=e-t)*a}function r(A,e,r,i){var n={id:void 0===A?null:A,type:e,geometry:r,tags:i,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(A){var e=A.geometry,r=A.type;if("Point"===r||"MultiPoint"===r||"LineString"===r)t(A,e);else if("Polygon"===r||"MultiLineString"===r)for(var i=0;i<e.length;i++)t(A,e[i]);else if("MultiPolygon"===r)for(i=0;i<e.length;i++)for(var n=0;n<e[i].length;n++)t(A,e[i][n])}(n),n}function t(A,e){for(var r=0;r<e.length;r+=3)A.minX=Math.min(A.minX,e[r]),A.minY=Math.min(A.minY,e[r+1]),A.maxX=Math.max(A.maxX,e[r]),A.maxY=Math.max(A.maxY,e[r+1])}function i(A,e,t,f){if(e.geometry){var s=e.geometry.coordinates,u=e.geometry.type,l=Math.pow(t.tolerance/((1<<t.maxZoom)*t.extent),2),h=[],c=e.id;if(t.promoteId?c=e.properties[t.promoteId]:t.generateId&&(c=f||0),"Point"===u)n(s,h);else if("MultiPoint"===u)for(var d=0;d<s.length;d++)n(s[d],h);else if("LineString"===u)o(s,h,l,!1);else if("MultiLineString"===u){if(t.lineMetrics){for(d=0;d<s.length;d++)h=[],o(s[d],h,l,!1),A.push(r(c,"LineString",h,e.properties));return}a(s,h,l,!1)}else if("Polygon"===u)a(s,h,l,!0);else{if("MultiPolygon"!==u){if("GeometryCollection"===u){for(d=0;d<e.geometry.geometries.length;d++)i(A,{id:c,geometry:e.geometry.geometries[d],properties:e.properties},t,f);return}throw new Error("Input data is not a valid GeoJSON object.")}for(d=0;d<s.length;d++){var g=[];a(s[d],g,l,!0),h.push(g)}}A.push(r(c,u,h,e.properties))}}function n(A,e){e.push(f(A[0])),e.push(s(A[1])),e.push(0)}function o(e,r,t,i){for(var n,o,a=0,u=0;u<e.length;u++){var l=f(e[u][0]),h=s(e[u][1]);r.push(l),r.push(h),r.push(0),u>0&&(a+=i?(n*h-l*o)/2:Math.sqrt(Math.pow(l-n,2)+Math.pow(h-o,2))),n=l,o=h}var c=r.length-3;r[2]=1,A(r,0,c,t),r[c+2]=1,r.size=Math.abs(a),r.start=0,r.end=r.size}function a(A,e,r,t){for(var i=0;i<A.length;i++){var n=[];o(A[i],n,r,t),e.push(n)}}function f(A){return A/360+.5}function s(A){var e=Math.sin(A*Math.PI/180),r=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return r<0?0:r>1?1:r}function u(A,e,t,i,n,o,a,f){if(i/=e,o>=(t/=e)&&a<i)return A;if(a<t||o>=i)return null;for(var s=[],u=0;u<A.length;u++){var c=A[u],g=c.geometry,w=c.type,p=0===n?c.minX:c.minY,B=0===n?c.maxX:c.maxY;if(p>=t&&B<i)s.push(c);else if(!(B<t||p>=i)){var b=[];if("Point"===w||"MultiPoint"===w)l(g,b,t,i,n);else if("LineString"===w)h(g,b,t,i,n,!1,f.lineMetrics);else if("MultiLineString"===w)d(g,b,t,i,n,!1);else if("Polygon"===w)d(g,b,t,i,n,!0);else if("MultiPolygon"===w)for(var v=0;v<g.length;v++){var m=[];d(g[v],m,t,i,n,!0),m.length&&b.push(m)}if(b.length){if(f.lineMetrics&&"LineString"===w){for(v=0;v<b.length;v++)s.push(r(c.id,w,b[v],c.tags));continue}"LineString"!==w&&"MultiLineString"!==w||(1===b.length?(w="LineString",b=b[0]):w="MultiLineString"),"Point"!==w&&"MultiPoint"!==w||(w=3===b.length?"Point":"MultiPoint"),s.push(r(c.id,w,b,c.tags))}}}return s.length?s:null}function l(A,e,r,t,i){for(var n=0;n<A.length;n+=3){var o=A[n+i];o>=r&&o<=t&&(e.push(A[n]),e.push(A[n+1]),e.push(A[n+2]))}}function h(A,e,r,t,i,n,o){for(var a,f,s=c(A),u=0===i?w:p,l=A.start,h=0;h<A.length-3;h+=3){var d=A[h],B=A[h+1],b=A[h+2],v=A[h+3],m=A[h+4],k=0===i?d:B,M=0===i?v:m,Q=!1;o&&(a=Math.sqrt(Math.pow(d-v,2)+Math.pow(B-m,2))),k<r?M>r&&(f=u(s,d,B,v,m,r),o&&(s.start=l+a*f)):k>t?M<t&&(f=u(s,d,B,v,m,t),o&&(s.start=l+a*f)):g(s,d,B,b),M<r&&k>=r&&(f=u(s,d,B,v,m,r),Q=!0),M>t&&k<=t&&(f=u(s,d,B,v,m,t),Q=!0),!n&&Q&&(o&&(s.end=l+a*f),e.push(s),s=c(A)),o&&(l+=a)}var y=A.length-3;d=A[y],B=A[y+1],b=A[y+2],(k=0===i?d:B)>=r&&k<=t&&g(s,d,B,b),y=s.length-3,n&&y>=3&&(s[y]!==s[0]||s[y+1]!==s[1])&&g(s,s[0],s[1],s[2]),s.length&&e.push(s)}function c(A){var e=[];return e.size=A.size,e.start=A.start,e.end=A.end,e}function d(A,e,r,t,i,n){for(var o=0;o<A.length;o++)h(A[o],e,r,t,i,n,!1)}function g(A,e,r,t){A.push(e),A.push(r),A.push(t)}function w(A,e,r,t,i,n){var o=(n-e)/(t-e);return A.push(n),A.push(r+(i-r)*o),A.push(1),o}function p(A,e,r,t,i,n){var o=(n-r)/(i-r);return A.push(e+(t-e)*o),A.push(n),A.push(1),o}function B(A,e){for(var t=[],i=0;i<A.length;i++){var n,o=A[i],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)n=b(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){n=[];for(var f=0;f<o.geometry.length;f++)n.push(b(o.geometry[f],e))}else if("MultiPolygon"===a)for(n=[],f=0;f<o.geometry.length;f++){for(var s=[],u=0;u<o.geometry[f].length;u++)s.push(b(o.geometry[f][u],e));n.push(s)}t.push(r(o.id,a,n,o.tags))}return t}function b(A,e){var r=[];r.size=A.size,void 0!==A.start&&(r.start=A.start,r.end=A.end);for(var t=0;t<A.length;t+=3)r.push(A[t]+e,A[t+1],A[t+2]);return r}function v(A,e){if(A.transformed)return A;var r,t,i,n=1<<A.z,o=A.x,a=A.y;for(r=0;r<A.features.length;r++){var f=A.features[r],s=f.geometry,u=f.type;if(f.geometry=[],1===u)for(t=0;t<s.length;t+=2)f.geometry.push(m(s[t],s[t+1],e,n,o,a));else for(t=0;t<s.length;t++){var l=[];for(i=0;i<s[t].length;i+=2)l.push(m(s[t][i],s[t][i+1],e,n,o,a));f.geometry.push(l)}}return A.transformed=!0,A}function m(A,e,r,t,i,n){return[Math.round(r*(A*t-i)),Math.round(r*(e*t-n))]}function k(A,e,r,t,i){for(var n=e===i.maxZoom?0:i.tolerance/((1<<e)*i.extent),o={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:t,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},a=0;a<A.length;a++){o.numFeatures++,M(o,A[a],n,i);var f=A[a].minX,s=A[a].minY,u=A[a].maxX,l=A[a].maxY;f<o.minX&&(o.minX=f),s<o.minY&&(o.minY=s),u>o.maxX&&(o.maxX=u),l>o.maxY&&(o.maxY=l)}return o}function M(A,e,r,t){var i=e.geometry,n=e.type,o=[];if("Point"===n||"MultiPoint"===n)for(var a=0;a<i.length;a+=3)o.push(i[a]),o.push(i[a+1]),A.numPoints++,A.numSimplified++;else if("LineString"===n)Q(o,i,A,r,!1,!1);else if("MultiLineString"===n||"Polygon"===n)for(a=0;a<i.length;a++)Q(o,i[a],A,r,"Polygon"===n,0===a);else if("MultiPolygon"===n)for(var f=0;f<i.length;f++){var s=i[f];for(a=0;a<s.length;a++)Q(o,s[a],A,r,!0,0===a)}if(o.length){var u=e.tags||null;if("LineString"===n&&t.lineMetrics){for(var l in u={},e.tags)u[l]=e.tags[l];u.mapbox_clip_start=i.start/i.size,u.mapbox_clip_end=i.end/i.size}var h={geometry:o,type:"Polygon"===n||"MultiPolygon"===n?3:"LineString"===n||"MultiLineString"===n?2:1,tags:u};null!==e.id&&(h.id=e.id),A.features.push(h)}}function Q(A,e,r,t,i,n){var o=t*t;if(t>0&&e.size<(i?o:t))r.numPoints+=e.length/3;else{for(var a=[],f=0;f<e.length;f+=3)(0===t||e[f+2]>o)&&(r.numSimplified++,a.push(e[f]),a.push(e[f+1])),r.numPoints++;i&&function(A,e){for(var r=0,t=0,i=A.length,n=i-2;t<i;n=t,t+=2)r+=(A[t]-A[n])*(A[t+1]+A[n+1]);if(r>0===e)for(t=0,i=A.length;t<i/2;t+=2){var o=A[t],a=A[t+1];A[t]=A[i-2-t],A[t+1]=A[i-1-t],A[i-2-t]=o,A[i-1-t]=a}}(a,n),A.push(a)}}function y(A,e){var r=(e=this.options=function(A,e){for(var r in e)A[r]=e[r];return A}(Object.create(this.options),e)).debug;if(r&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var t=function(A,e){var r=[];if("FeatureCollection"===A.type)for(var t=0;t<A.features.length;t++)i(r,A.features[t],e,t);else"Feature"===A.type?i(r,A,e):i(r,{geometry:A},e);return r}(A,e);this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(t=function(A,e){var r=e.buffer/e.extent,t=A,i=u(A,1,-1-r,r,0,-1,2,e),n=u(A,1,1-r,2+r,0,-1,2,e);return(i||n)&&(t=u(A,1,-r,1+r,0,-1,2,e)||[],i&&(t=B(i,1).concat(t)),n&&(t=t.concat(B(n,-1)))),t}(t,e)).length&&this.splitTile(t,0,0,0),r&&(t.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function E(A,e,r){return 32*((1<<A)*r+e)+A}return y.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},y.prototype.splitTile=function(A,e,r,t,i,n,o){for(var a=[A,e,r,t],f=this.options,s=f.debug;a.length;){t=a.pop(),r=a.pop(),e=a.pop(),A=a.pop();var l=1<<e,h=E(e,r,t),c=this.tiles[h];if(!c&&(s>1&&console.time("creation"),c=this.tiles[h]=k(A,e,r,t,f),this.tileCoords.push({z:e,x:r,y:t}),s)){s>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,r,t,c.numFeatures,c.numPoints,c.numSimplified),console.timeEnd("creation"));var d="z"+e;this.stats[d]=(this.stats[d]||0)+1,this.total++}if(c.source=A,i){if(e===f.maxZoom||e===i)continue;var g=1<<i-e;if(r!==Math.floor(n/g)||t!==Math.floor(o/g))continue}else if(e===f.indexMaxZoom||c.numPoints<=f.indexMaxPoints)continue;if(c.source=null,0!==A.length){s>1&&console.time("clipping");var w,p,B,b,v,m,M=.5*f.buffer/f.extent,Q=.5-M,y=.5+M,x=1+M;w=p=B=b=null,v=u(A,l,r-M,r+y,0,c.minX,c.maxX,f),m=u(A,l,r+Q,r+x,0,c.minX,c.maxX,f),A=null,v&&(w=u(v,l,t-M,t+y,1,c.minY,c.maxY,f),p=u(v,l,t+Q,t+x,1,c.minY,c.maxY,f),v=null),m&&(B=u(m,l,t-M,t+y,1,c.minY,c.maxY,f),b=u(m,l,t+Q,t+x,1,c.minY,c.maxY,f),m=null),s>1&&console.timeEnd("clipping"),a.push(w||[],e+1,2*r,2*t),a.push(p||[],e+1,2*r,2*t+1),a.push(B||[],e+1,2*r+1,2*t),a.push(b||[],e+1,2*r+1,2*t+1)}}},y.prototype.getTile=function(A,e,r){var t=this.options,i=t.extent,n=t.debug;if(A<0||A>24)return null;var o=1<<A,a=E(A,e=(e%o+o)%o,r);if(this.tiles[a])return v(this.tiles[a],i);n>1&&console.log("drilling down to z%d-%d-%d",A,e,r);for(var f,s=A,u=e,l=r;!f&&s>0;)s--,u=Math.floor(u/2),l=Math.floor(l/2),f=this.tiles[E(s,u,l)];return f&&f.source?(n>1&&console.log("found parent tile z%d-%d-%d",s,u,l),n>1&&console.time("drilling down"),this.splitTile(f.source,s,u,l,A,e,r),n>1&&console.timeEnd("drilling down"),this.tiles[a]?v(this.tiles[a],i):null):null},function(A,e){return new y(A,e)}}))},{}],7:[function(A,e,r){var t=function(A){var e,r=void 0!==(A=A||{})?A:{},t={};for(e in r)r.hasOwnProperty(e)&&(t[e]=r[e]);var i,n=[],o="";document.currentScript&&(o=document.currentScript.src),o=0!==o.indexOf("blob:")?o.substr(0,o.lastIndexOf("/")+1):"",i=function(A,e,r){var t=new XMLHttpRequest;t.open("GET",A,!0),t.responseType="arraybuffer",t.onload=function(){if(200==t.status||0==t.status&&t.response)e(t.response);else{var i=J(A);i?e(i.buffer):r()}},t.onerror=r,t.send(null)};var a=r.print||console.log.bind(console),f=r.printErr||console.warn.bind(console);for(e in t)t.hasOwnProperty(e)&&(r[e]=t[e]);t=null,r.arguments&&(n=r.arguments);var s=0,u=function(){return s};var l=!1;function h(A){var e,t=r["_"+A];return e="Cannot call unknown function "+A+", make sure it is exported",t||fA("Assertion failed: "+e),t}function c(A,e,r,t,i){var n={string:function(A){var e=0;if(null!=A&&0!==A){var r=1+(A.length<<2);(function(A,e,r){(function(A,e,r,t){if(!(t>0))return 0;for(var i=r,n=r+t-1,o=0;o<A.length;++o){var a=A.charCodeAt(o);if(a>=55296&&a<=57343)a=65536+((1023&a)<<10)|1023&A.charCodeAt(++o);if(a<=127){if(r>=n)break;e[r++]=a}else if(a<=2047){if(r+1>=n)break;e[r++]=192|a>>6,e[r++]=128|63&a}else if(a<=65535){if(r+2>=n)break;e[r++]=224|a>>12,e[r++]=128|a>>6&63,e[r++]=128|63&a}else{if(r+3>=n)break;e[r++]=240|a>>18,e[r++]=128|a>>12&63,e[r++]=128|a>>6&63,e[r++]=128|63&a}}e[r]=0})(A,B,e,r)})(A,e=AA(r),r)}return e},array:function(A){var e=AA(A.length);return function(A,e){p.set(A,e)}(A,e),e}};var o=h(A),a=[],f=0;if(t)for(var s=0;s<t.length;s++){var u=n[r[s]];u?(0===f&&(f=rA()),a[s]=u(t[s])):a[s]=t[s]}var l=o.apply(null,a);return l=function(A){return"string"===e?g(A):"boolean"===e?Boolean(A):A}(l),0!==f&&eA(f),l}var d="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function g(A,e){return A?function(A,e,r){for(var t=e+r,i=e;A[i]&&!(i>=t);)++i;if(i-e>16&&A.subarray&&d)return d.decode(A.subarray(e,i));for(var n="";e<i;){var o=A[e++];if(128&o){var a=63&A[e++];if(192!=(224&o)){var f=63&A[e++];if((o=224==(240&o)?(15&o)<<12|a<<6|f:(7&o)<<18|a<<12|f<<6|63&A[e++])<65536)n+=String.fromCharCode(o);else{var s=o-65536;n+=String.fromCharCode(55296|s>>10,56320|1023&s)}}else n+=String.fromCharCode((31&o)<<6|a)}else n+=String.fromCharCode(o)}return n}(B,A,e):""}var w,p,B,b,v,m,k;"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");function M(A,e){return A%e>0&&(A+=e-A%e),A}function Q(A){w=A,r.HEAP8=p=new Int8Array(A),r.HEAP16=b=new Int16Array(A),r.HEAP32=v=new Int32Array(A),r.HEAPU8=B=new Uint8Array(A),r.HEAPU16=new Uint16Array(A),r.HEAPU32=new Uint32Array(A),r.HEAPF32=m=new Float32Array(A),r.HEAPF64=k=new Float64Array(A)}var y=r.TOTAL_MEMORY||33554432;function E(A){for(;A.length>0;){var e=A.shift();if("function"!=typeof e){var t=e.func;"number"==typeof t?void 0===e.arg?r.dynCall_v(t):r.dynCall_vi(t,e.arg):t(void 0===e.arg?null:e.arg)}else e()}}y=(w=r.buffer?r.buffer:new ArrayBuffer(y)).byteLength,Q(w),v[6004]=5266928;var x=[],D=[],_=[],I=[];var F=Math.abs,C=Math.ceil,P=Math.floor,U=Math.min,G=0,S=null,T=null;r.preloadedImages={},r.preloadedAudios={};var V,H,R=null,L="data:application/octet-stream;base64,";function z(A){return String.prototype.startsWith?A.startsWith(L):0===A.indexOf(L)}R="data:application/octet-stream;base64,AAAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAABAAAAAMAAAAGAAAABQAAAAIAAAAAAAAAAgAAAAMAAAABAAAABAAAAAYAAAAAAAAABQAAAAMAAAAGAAAABAAAAAUAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAABAAAABQAAAAIAAAAAAAAAAQAAAAMAAAAGAAAABAAAAAYAAAAAAAAABQAAAAIAAAABAAAABAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAgAAAAMAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABgAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAABgAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAAAAAAABgAAAAAAAAADAAAAAgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAUAAAAEAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAEAAAAAAAAAAYAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAUAAAACAAAABAAAAAMAAAAIAAAAAQAAAAcAAAAGAAAACQAAAAAAAAADAAAAAgAAAAIAAAAGAAAACgAAAAsAAAAAAAAAAQAAAAUAAAADAAAADQAAAAEAAAAHAAAABAAAAAwAAAAAAAAABAAAAH8AAAAPAAAACAAAAAMAAAAAAAAADAAAAAUAAAACAAAAEgAAAAoAAAAIAAAAAAAAABAAAAAGAAAADgAAAAsAAAARAAAAAQAAAAkAAAACAAAABwAAABUAAAAJAAAAEwAAAAMAAAANAAAAAQAAAAgAAAAFAAAAFgAAABAAAAAEAAAAAAAAAA8AAAAJAAAAEwAAAA4AAAAUAAAAAQAAAAcAAAAGAAAACgAAAAsAAAAYAAAAFwAAAAUAAAACAAAAEgAAAAsAAAARAAAAFwAAABkAAAACAAAABgAAAAoAAAAMAAAAHAAAAA0AAAAaAAAABAAAAA8AAAADAAAADQAAABoAAAAVAAAAHQAAAAMAAAAMAAAABwAAAA4AAAB/AAAAEQAAABsAAAAJAAAAFAAAAAYAAAAPAAAAFgAAABwAAAAfAAAABAAAAAgAAAAMAAAAEAAAABIAAAAhAAAAHgAAAAgAAAAFAAAAFgAAABEAAAALAAAADgAAAAYAAAAjAAAAGQAAABsAAAASAAAAGAAAAB4AAAAgAAAABQAAAAoAAAAQAAAAEwAAACIAAAAUAAAAJAAAAAcAAAAVAAAACQAAABQAAAAOAAAAEwAAAAkAAAAoAAAAGwAAACQAAAAVAAAAJgAAABMAAAAiAAAADQAAAB0AAAAHAAAAFgAAABAAAAApAAAAIQAAAA8AAAAIAAAAHwAAABcAAAAYAAAACwAAAAoAAAAnAAAAJQAAABkAAAAYAAAAfwAAACAAAAAlAAAACgAAABcAAAASAAAAGQAAABcAAAARAAAACwAAAC0AAAAnAAAAIwAAABoAAAAqAAAAHQAAACsAAAAMAAAAHAAAAA0AAAAbAAAAKAAAACMAAAAuAAAADgAAABQAAAARAAAAHAAAAB8AAAAqAAAALAAAAAwAAAAPAAAAGgAAAB0AAAArAAAAJgAAAC8AAAANAAAAGgAAABUAAAAeAAAAIAAAADAAAAAyAAAAEAAAABIAAAAhAAAAHwAAACkAAAAsAAAANQAAAA8AAAAWAAAAHAAAACAAAAAeAAAAGAAAABIAAAA0AAAAMgAAACUAAAAhAAAAHgAAADEAAAAwAAAAFgAAABAAAAApAAAAIgAAABMAAAAmAAAAFQAAADYAAAAkAAAAMwAAACMAAAAuAAAALQAAADgAAAARAAAAGwAAABkAAAAkAAAAFAAAACIAAAATAAAANwAAACgAAAA2AAAAJQAAACcAAAA0AAAAOQAAABgAAAAXAAAAIAAAACYAAAB/AAAAIgAAADMAAAAdAAAALwAAABUAAAAnAAAAJQAAABkAAAAXAAAAOwAAADkAAAAtAAAAKAAAABsAAAAkAAAAFAAAADwAAAAuAAAANwAAACkAAAAxAAAANQAAAD0AAAAWAAAAIQAAAB8AAAAqAAAAOgAAACsAAAA+AAAAHAAAACwAAAAaAAAAKwAAAD4AAAAvAAAAQAAAABoAAAAqAAAAHQAAACwAAAA1AAAAOgAAAEEAAAAcAAAAHwAAACoAAAAtAAAAJwAAACMAAAAZAAAAPwAAADsAAAA4AAAALgAAADwAAAA4AAAARAAAABsAAAAoAAAAIwAAAC8AAAAmAAAAKwAAAB0AAABFAAAAMwAAAEAAAAAwAAAAMQAAAB4AAAAhAAAAQwAAAEIAAAAyAAAAMQAAAH8AAAA9AAAAQgAAACEAAAAwAAAAKQAAADIAAAAwAAAAIAAAAB4AAABGAAAAQwAAADQAAAAzAAAARQAAADYAAABHAAAAJgAAAC8AAAAiAAAANAAAADkAAABGAAAASgAAACAAAAAlAAAAMgAAADUAAAA9AAAAQQAAAEsAAAAfAAAAKQAAACwAAAA2AAAARwAAADcAAABJAAAAIgAAADMAAAAkAAAANwAAACgAAAA2AAAAJAAAAEgAAAA8AAAASQAAADgAAABEAAAAPwAAAE0AAAAjAAAALgAAAC0AAAA5AAAAOwAAAEoAAABOAAAAJQAAACcAAAA0AAAAOgAAAH8AAAA+AAAATAAAACwAAABBAAAAKgAAADsAAAA/AAAATgAAAE8AAAAnAAAALQAAADkAAAA8AAAASAAAAEQAAABQAAAAKAAAADcAAAAuAAAAPQAAADUAAAAxAAAAKQAAAFEAAABLAAAAQgAAAD4AAAArAAAAOgAAACoAAABSAAAAQAAAAEwAAAA/AAAAfwAAADgAAAAtAAAATwAAADsAAABNAAAAQAAAAC8AAAA+AAAAKwAAAFQAAABFAAAAUgAAAEEAAAA6AAAANQAAACwAAABWAAAATAAAAEsAAABCAAAAQwAAAFEAAABVAAAAMQAAADAAAAA9AAAAQwAAAEIAAAAyAAAAMAAAAFcAAABVAAAARgAAAEQAAAA4AAAAPAAAAC4AAABaAAAATQAAAFAAAABFAAAAMwAAAEAAAAAvAAAAWQAAAEcAAABUAAAARgAAAEMAAAA0AAAAMgAAAFMAAABXAAAASgAAAEcAAABZAAAASQAAAFsAAAAzAAAARQAAADYAAABIAAAAfwAAAEkAAAA3AAAAUAAAADwAAABYAAAASQAAAFsAAABIAAAAWAAAADYAAABHAAAANwAAAEoAAABOAAAAUwAAAFwAAAA0AAAAOQAAAEYAAABLAAAAQQAAAD0AAAA1AAAAXgAAAFYAAABRAAAATAAAAFYAAABSAAAAYAAAADoAAABBAAAAPgAAAE0AAAA/AAAARAAAADgAAABdAAAATwAAAFoAAABOAAAASgAAADsAAAA5AAAAXwAAAFwAAABPAAAATwAAAE4AAAA/AAAAOwAAAF0AAABfAAAATQAAAFAAAABEAAAASAAAADwAAABjAAAAWgAAAFgAAABRAAAAVQAAAF4AAABlAAAAPQAAAEIAAABLAAAAUgAAAGAAAABUAAAAYgAAAD4AAABMAAAAQAAAAFMAAAB/AAAASgAAAEYAAABkAAAAVwAAAFwAAABUAAAARQAAAFIAAABAAAAAYQAAAFkAAABiAAAAVQAAAFcAAABlAAAAZgAAAEIAAABDAAAAUQAAAFYAAABMAAAASwAAAEEAAABoAAAAYAAAAF4AAABXAAAAUwAAAGYAAABkAAAAQwAAAEYAAABVAAAAWAAAAEgAAABbAAAASQAAAGMAAABQAAAAaQAAAFkAAABhAAAAWwAAAGcAAABFAAAAVAAAAEcAAABaAAAATQAAAFAAAABEAAAAagAAAF0AAABjAAAAWwAAAEkAAABZAAAARwAAAGkAAABYAAAAZwAAAFwAAABTAAAATgAAAEoAAABsAAAAZAAAAF8AAABdAAAATwAAAFoAAABNAAAAbQAAAF8AAABqAAAAXgAAAFYAAABRAAAASwAAAGsAAABoAAAAZQAAAF8AAABcAAAATwAAAE4AAABtAAAAbAAAAF0AAABgAAAAaAAAAGIAAABuAAAATAAAAFYAAABSAAAAYQAAAH8AAABiAAAAVAAAAGcAAABZAAAAbwAAAGIAAABuAAAAYQAAAG8AAABSAAAAYAAAAFQAAABjAAAAUAAAAGkAAABYAAAAagAAAFoAAABxAAAAZAAAAGYAAABTAAAAVwAAAGwAAAByAAAAXAAAAGUAAABmAAAAawAAAHAAAABRAAAAVQAAAF4AAABmAAAAZQAAAFcAAABVAAAAcgAAAHAAAABkAAAAZwAAAFsAAABhAAAAWQAAAHQAAABpAAAAbwAAAGgAAABrAAAAbgAAAHMAAABWAAAAXgAAAGAAAABpAAAAWAAAAGcAAABbAAAAcQAAAGMAAAB0AAAAagAAAF0AAABjAAAAWgAAAHUAAABtAAAAcQAAAGsAAAB/AAAAZQAAAF4AAABzAAAAaAAAAHAAAABsAAAAZAAAAF8AAABcAAAAdgAAAHIAAABtAAAAbQAAAGwAAABdAAAAXwAAAHUAAAB2AAAAagAAAG4AAABiAAAAaAAAAGAAAAB3AAAAbwAAAHMAAABvAAAAYQAAAG4AAABiAAAAdAAAAGcAAAB3AAAAcAAAAGsAAABmAAAAZQAAAHgAAABzAAAAcgAAAHEAAABjAAAAdAAAAGkAAAB1AAAAagAAAHkAAAByAAAAcAAAAGQAAABmAAAAdgAAAHgAAABsAAAAcwAAAG4AAABrAAAAaAAAAHgAAAB3AAAAcAAAAHQAAABnAAAAdwAAAG8AAABxAAAAaQAAAHkAAAB1AAAAfwAAAG0AAAB2AAAAcQAAAHkAAABqAAAAdgAAAHgAAABsAAAAcgAAAHUAAAB5AAAAbQAAAHcAAABvAAAAcwAAAG4AAAB5AAAAdAAAAHgAAAB4AAAAcwAAAHIAAABwAAAAeQAAAHcAAAB2AAAAeQAAAHQAAAB4AAAAdwAAAHUAAABxAAAAdgAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAQAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAADAAAABQAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAgAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAABQAAAAUAAAAAAAAAAAAAAP////8BAAAAAAAAAAMAAAAEAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAQAAAP//////////AQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAIAAAAAAAAAAAAAAAEAAAACAAAABgAAAAQAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAoAAAACAAAAAAAAAAAAAAABAAAAAQAAAAUAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAAAAAAAAAAAAAEAAAADAAAABwAAAAYAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAJAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAAAAAAAAAAAAQAAAAQAAAAIAAAACgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAAAAAAAAAAABAAAACwAAAA8AAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAgAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAAAAAAAAAAABAAAADAAAABAAAAAMAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAEAAAAKAAAAEwAAAAgAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAgAAAAAAAAAAAAAAAQAAAA0AAAARAAAADQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAAAAAAAAAAAAAEAAAAOAAAAEgAAAA8AAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAAAAAABAAAA//////////8TAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABIAAAAAAAAAGAAAAAAAAAAhAAAAAAAAAB4AAAAAAAAAIAAAAAMAAAAxAAAAAQAAADAAAAADAAAAMgAAAAMAAAAIAAAAAAAAAAUAAAAFAAAACgAAAAUAAAAWAAAAAAAAABAAAAAAAAAAEgAAAAAAAAApAAAAAQAAACEAAAAAAAAAHgAAAAAAAAAEAAAAAAAAAAAAAAAFAAAAAgAAAAUAAAAPAAAAAQAAAAgAAAAAAAAABQAAAAUAAAAfAAAAAQAAABYAAAAAAAAAEAAAAAAAAAACAAAAAAAAAAYAAAAAAAAADgAAAAAAAAAKAAAAAAAAAAsAAAAAAAAAEQAAAAMAAAAYAAAAAQAAABcAAAADAAAAGQAAAAMAAAAAAAAAAAAAAAEAAAAFAAAACQAAAAUAAAAFAAAAAAAAAAIAAAAAAAAABgAAAAAAAAASAAAAAQAAAAoAAAAAAAAACwAAAAAAAAAEAAAAAQAAAAMAAAAFAAAABwAAAAUAAAAIAAAAAQAAAAAAAAAAAAAAAQAAAAUAAAAQAAAAAQAAAAUAAAAAAAAAAgAAAAAAAAAHAAAAAAAAABUAAAAAAAAAJgAAAAAAAAAJAAAAAAAAABMAAAAAAAAAIgAAAAMAAAAOAAAAAQAAABQAAAADAAAAJAAAAAMAAAADAAAAAAAAAA0AAAAFAAAAHQAAAAUAAAABAAAAAAAAAAcAAAAAAAAAFQAAAAAAAAAGAAAAAQAAAAkAAAAAAAAAEwAAAAAAAAAEAAAAAgAAAAwAAAAFAAAAGgAAAAUAAAAAAAAAAQAAAAMAAAAAAAAADQAAAAUAAAACAAAAAQAAAAEAAAAAAAAABwAAAAAAAAAaAAAAAAAAACoAAAAAAAAAOgAAAAAAAAAdAAAAAAAAACsAAAAAAAAAPgAAAAMAAAAmAAAAAQAAAC8AAAADAAAAQAAAAAMAAAAMAAAAAAAAABwAAAAFAAAALAAAAAUAAAANAAAAAAAAABoAAAAAAAAAKgAAAAAAAAAVAAAAAQAAAB0AAAAAAAAAKwAAAAAAAAAEAAAAAwAAAA8AAAAFAAAAHwAAAAUAAAADAAAAAQAAAAwAAAAAAAAAHAAAAAUAAAAHAAAAAQAAAA0AAAAAAAAAGgAAAAAAAAAfAAAAAAAAACkAAAAAAAAAMQAAAAAAAAAsAAAAAAAAADUAAAAAAAAAPQAAAAMAAAA6AAAAAQAAAEEAAAADAAAASwAAAAMAAAAPAAAAAAAAABYAAAAFAAAAIQAAAAUAAAAcAAAAAAAAAB8AAAAAAAAAKQAAAAAAAAAqAAAAAQAAACwAAAAAAAAANQAAAAAAAAAEAAAABAAAAAgAAAAFAAAAEAAAAAUAAAAMAAAAAQAAAA8AAAAAAAAAFgAAAAUAAAAaAAAAAQAAABwAAAAAAAAAHwAAAAAAAAAyAAAAAAAAADAAAAAAAAAAMQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAIQAAAAMAAAAYAAAAAwAAABIAAAADAAAAEAAAAAMAAABGAAAAAAAAAEMAAAAAAAAAQgAAAAMAAAA0AAAAAwAAADIAAAAAAAAAMAAAAAAAAAAlAAAAAwAAACAAAAAAAAAAHgAAAAMAAABTAAAAAAAAAFcAAAADAAAAVQAAAAMAAABKAAAAAwAAAEYAAAAAAAAAQwAAAAAAAAA5AAAAAQAAADQAAAADAAAAMgAAAAAAAAAZAAAAAAAAABcAAAAAAAAAGAAAAAMAAAARAAAAAAAAAAsAAAADAAAACgAAAAMAAAAOAAAAAwAAAAYAAAADAAAAAgAAAAMAAAAtAAAAAAAAACcAAAAAAAAAJQAAAAMAAAAjAAAAAwAAABkAAAAAAAAAFwAAAAAAAAAbAAAAAwAAABEAAAAAAAAACwAAAAMAAAA/AAAAAAAAADsAAAADAAAAOQAAAAMAAAA4AAAAAwAAAC0AAAAAAAAAJwAAAAAAAAAuAAAAAwAAACMAAAADAAAAGQAAAAAAAAAkAAAAAAAAABQAAAAAAAAADgAAAAMAAAAiAAAAAAAAABMAAAADAAAACQAAAAMAAAAmAAAAAwAAABUAAAADAAAABwAAAAMAAAA3AAAAAAAAACgAAAAAAAAAGwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAFAAAAAAAAAAzAAAAAwAAACIAAAAAAAAAEwAAAAMAAABIAAAAAAAAADwAAAADAAAALgAAAAMAAABJAAAAAwAAADcAAAAAAAAAKAAAAAAAAABHAAAAAwAAADYAAAADAAAAJAAAAAAAAABAAAAAAAAAAC8AAAAAAAAAJgAAAAMAAAA+AAAAAAAAACsAAAADAAAAHQAAAAMAAAA6AAAAAwAAACoAAAADAAAAGgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAMwAAAAMAAABSAAAAAwAAAEAAAAAAAAAALwAAAAAAAABMAAAAAwAAAD4AAAAAAAAAKwAAAAMAAABhAAAAAAAAAFkAAAADAAAARwAAAAMAAABiAAAAAwAAAFQAAAAAAAAARQAAAAAAAABgAAAAAwAAAFIAAAADAAAAQAAAAAAAAABLAAAAAAAAAEEAAAAAAAAAOgAAAAMAAAA9AAAAAAAAADUAAAADAAAALAAAAAMAAAAxAAAAAwAAACkAAAADAAAAHwAAAAMAAABeAAAAAAAAAFYAAAAAAAAATAAAAAMAAABRAAAAAwAAAEsAAAAAAAAAQQAAAAAAAABCAAAAAwAAAD0AAAAAAAAANQAAAAMAAABrAAAAAAAAAGgAAAADAAAAYAAAAAMAAABlAAAAAwAAAF4AAAAAAAAAVgAAAAAAAABVAAAAAwAAAFEAAAADAAAASwAAAAAAAAA5AAAAAAAAADsAAAAAAAAAPwAAAAMAAABKAAAAAAAAAE4AAAADAAAATwAAAAMAAABTAAAAAwAAAFwAAAADAAAAXwAAAAMAAAAlAAAAAAAAACcAAAADAAAALQAAAAMAAAA0AAAAAAAAADkAAAAAAAAAOwAAAAAAAABGAAAAAwAAAEoAAAAAAAAATgAAAAMAAAAYAAAAAAAAABcAAAADAAAAGQAAAAMAAAAgAAAAAwAAACUAAAAAAAAAJwAAAAMAAAAyAAAAAwAAADQAAAAAAAAAOQAAAAAAAAAuAAAAAAAAADwAAAAAAAAASAAAAAMAAAA4AAAAAAAAAEQAAAADAAAAUAAAAAMAAAA/AAAAAwAAAE0AAAADAAAAWgAAAAMAAAAbAAAAAAAAACgAAAADAAAANwAAAAMAAAAjAAAAAAAAAC4AAAAAAAAAPAAAAAAAAAAtAAAAAwAAADgAAAAAAAAARAAAAAMAAAAOAAAAAAAAABQAAAADAAAAJAAAAAMAAAARAAAAAwAAABsAAAAAAAAAKAAAAAMAAAAZAAAAAwAAACMAAAAAAAAALgAAAAAAAABHAAAAAAAAAFkAAAAAAAAAYQAAAAMAAABJAAAAAAAAAFsAAAADAAAAZwAAAAMAAABIAAAAAwAAAFgAAAADAAAAaQAAAAMAAAAzAAAAAAAAAEUAAAADAAAAVAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAWQAAAAAAAAA3AAAAAwAAAEkAAAAAAAAAWwAAAAMAAAAmAAAAAAAAAC8AAAADAAAAQAAAAAMAAAAiAAAAAwAAADMAAAAAAAAARQAAAAMAAAAkAAAAAwAAADYAAAAAAAAARwAAAAAAAABgAAAAAAAAAGgAAAAAAAAAawAAAAMAAABiAAAAAAAAAG4AAAADAAAAcwAAAAMAAABhAAAAAwAAAG8AAAADAAAAdwAAAAMAAABMAAAAAAAAAFYAAAADAAAAXgAAAAMAAABSAAAAAAAAAGAAAAAAAAAAaAAAAAAAAABUAAAAAwAAAGIAAAAAAAAAbgAAAAMAAAA6AAAAAAAAAEEAAAADAAAASwAAAAMAAAA+AAAAAwAAAEwAAAAAAAAAVgAAAAMAAABAAAAAAwAAAFIAAAAAAAAAYAAAAAAAAABVAAAAAAAAAFcAAAAAAAAAUwAAAAMAAABlAAAAAAAAAGYAAAADAAAAZAAAAAMAAABrAAAAAwAAAHAAAAADAAAAcgAAAAMAAABCAAAAAAAAAEMAAAADAAAARgAAAAMAAABRAAAAAAAAAFUAAAAAAAAAVwAAAAAAAABeAAAAAwAAAGUAAAAAAAAAZgAAAAMAAAAxAAAAAAAAADAAAAADAAAAMgAAAAMAAAA9AAAAAwAAAEIAAAAAAAAAQwAAAAMAAABLAAAAAwAAAFEAAAAAAAAAVQAAAAAAAABfAAAAAAAAAFwAAAAAAAAAUwAAAAAAAABPAAAAAAAAAE4AAAAAAAAASgAAAAMAAAA/AAAAAQAAADsAAAADAAAAOQAAAAMAAABtAAAAAAAAAGwAAAAAAAAAZAAAAAUAAABdAAAAAQAAAF8AAAAAAAAAXAAAAAAAAABNAAAAAQAAAE8AAAAAAAAATgAAAAAAAAB1AAAABAAAAHYAAAAFAAAAcgAAAAUAAABqAAAAAQAAAG0AAAAAAAAAbAAAAAAAAABaAAAAAQAAAF0AAAABAAAAXwAAAAAAAABaAAAAAAAAAE0AAAAAAAAAPwAAAAAAAABQAAAAAAAAAEQAAAAAAAAAOAAAAAMAAABIAAAAAQAAADwAAAADAAAALgAAAAMAAABqAAAAAAAAAF0AAAAAAAAATwAAAAUAAABjAAAAAQAAAFoAAAAAAAAATQAAAAAAAABYAAAAAQAAAFAAAAAAAAAARAAAAAAAAAB1AAAAAwAAAG0AAAAFAAAAXwAAAAUAAABxAAAAAQAAAGoAAAAAAAAAXQAAAAAAAABpAAAAAQAAAGMAAAABAAAAWgAAAAAAAABpAAAAAAAAAFgAAAAAAAAASAAAAAAAAABnAAAAAAAAAFsAAAAAAAAASQAAAAMAAABhAAAAAQAAAFkAAAADAAAARwAAAAMAAABxAAAAAAAAAGMAAAAAAAAAUAAAAAUAAAB0AAAAAQAAAGkAAAAAAAAAWAAAAAAAAABvAAAAAQAAAGcAAAAAAAAAWwAAAAAAAAB1AAAAAgAAAGoAAAAFAAAAWgAAAAUAAAB5AAAAAQAAAHEAAAAAAAAAYwAAAAAAAAB3AAAAAQAAAHQAAAABAAAAaQAAAAAAAAB3AAAAAAAAAG8AAAAAAAAAYQAAAAAAAABzAAAAAAAAAG4AAAAAAAAAYgAAAAMAAABrAAAAAQAAAGgAAAADAAAAYAAAAAMAAAB5AAAAAAAAAHQAAAAAAAAAZwAAAAUAAAB4AAAAAQAAAHcAAAAAAAAAbwAAAAAAAABwAAAAAQAAAHMAAAAAAAAAbgAAAAAAAAB1AAAAAQAAAHEAAAAFAAAAaQAAAAUAAAB2AAAAAQAAAHkAAAAAAAAAdAAAAAAAAAByAAAAAQAAAHgAAAABAAAAdwAAAAAAAAByAAAAAAAAAHAAAAAAAAAAawAAAAAAAABkAAAAAAAAAGYAAAAAAAAAZQAAAAMAAABTAAAAAQAAAFcAAAADAAAAVQAAAAMAAAB2AAAAAAAAAHgAAAAAAAAAcwAAAAUAAABsAAAAAQAAAHIAAAAAAAAAcAAAAAAAAABcAAAAAQAAAGQAAAAAAAAAZgAAAAAAAAB1AAAAAAAAAHkAAAAFAAAAdwAAAAUAAABtAAAAAQAAAHYAAAAAAAAAeAAAAAAAAABfAAAAAQAAAGwAAAABAAAAcgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAB+ogX28rbpPxqumpJv+fM/165tC4ns9D+XaEnTqUsEQFrOtNlC4PA/3U+0XG6P9b9TdUUBxTTjP4PUp8ex1ty/B1rD/EN43z+lcDi6LLrZP/a45NWEHMY/oJ5ijLDZ+j/xw3rjxWPjP2B8A46ioQdAotff3wla2z+FMSpA1jj+v6b5Y1mtPbS/cIu8K0F457/2esiyJpDNv98k5Ts2NeA/pvljWa09tD88ClUJ60MDQPZ6yLImkM0/4ONKxa0UBcD2uOTVhBzGv5G7JRxGave/8cN648Vj47+HCwtkjAXIv6LX398JWtu/qyheaCAL9D9TdUUBxTTjv4gyTxslhwVAB1rD/EN4378EH/28teoFwH6iBfbytum/F6ztFYdK/r/Xrm0Liez0vwcS6wNGWeO/Ws602ULg8L9TCtRLiLT8P8pi5RexJsw/BlIKPVwR5T95Wyu0/QjnP5PjoT7YYcu/mBhKZ6zrwj8wRYS7NebuP3qW6geh+Ls/SLrixebL3r+pcyymN9XrPwmkNHp7xec/GWNMZVAA17+82s+x2BLiPwn2ytbJ9ek/LgEH1sMS1j8yp/2LhTfeP+SnWwtQBbu/d38gkp5X7z8ytsuHaADGPzUYObdf1+m/7IauECWhwz+cjSACjzniP76Z+wUhN9K/1+GEKzup67+/GYr/04baPw6idWOvsuc/ZedTWsRa5b/EJQOuRzi0v/OncYhHPes/h49PixY53j+i8wWfC03Nvw2idWOvsue/ZedTWsRa5T/EJQOuRzi0P/KncYhHPeu/iY9PixY53r+i8wWfC03NP9anWwtQBbs/d38gkp5X778ytsuHaADGvzUYObdf1+k/74auECWhw7+cjSACjzniv8CZ+wUhN9I/1uGEKzup6z+/GYr/04bavwmkNHp7xee/F2NMZVAA1z+82s+x2BLivwr2ytbJ9em/KwEH1sMS1r8yp/2LhTfev81i5RexJsy/BlIKPVwR5b95Wyu0/Qjnv5DjoT7YYcs/nBhKZ6zrwr8wRYS7Nebuv3OW6geh+Lu/SLrixebL3j+pcyymN9Xrv8rHIFfWehZAMBwUdlo0DECTUc17EOb2PxpVB1SWChdAzjbhb9pTDUDQhmdvECX5P9FlMKCC9+g/IIAzjELgE0DajDngMv8GQFhWDmDPjNs/y1guLh96EkAxPi8k7DIEQJCc4URlhRhA3eLKKLwkEECqpNAyTBD/P6xpjXcDiwVAFtl//cQm4z+Ibt3XKiYTQM7mCLUb3QdAoM1t8yVv7D8aLZv2Nk8UQEAJPV5nQwxAtSsfTCoE9z9TPjXLXIIWQBVanC5W9AtAYM3d7Adm9j++5mQz1FoWQBUThyaVBghAwH5muQsV7T89Q1qv82MUQJoWGOfNuBdAzrkClkmwDkDQjKq77t37Py+g0dtitsE/ZwAMTwVPEUBojepluNwBQGYbtuW+t9w/HNWIJs6MEkDTNuQUSlgEQKxktPP5TcQ/ixbLB8JjEUCwuWjXMQYCQAS/R09FkRdAowpiZjhhDkB7LmlczD/7P01iQmhhsAVAnrtTwDy84z/Z6jfQ2TgTQChOCXMnWwpAhrW3daoz8z/HYJvVPI4VQLT3ik5FcA5Angi7LOZd+z+NNVzDy5gXQBXdvVTFUA1AYNMgOeYe+T8+qHXGCwkXQKQTOKwa5AJA8gFVoEMW0T+FwzJyttIRQAEAAAD/////BwAAAP////8xAAAA/////1cBAAD/////YQkAAP////+nQQAA/////5HLAQD/////95AMAP/////B9lcAAAAAAAAAAAAAAAAAAgAAAP////8OAAAA/////2IAAAD/////rgIAAP/////CEgAA/////06DAAD/////IpcDAP/////uIRkA/////4LtrwAAAAAAAAAAAAAAAAAAAAAAAgAAAP//////////AQAAAAMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////wIAAAD//////////wEAAAAAAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA/////////////////////wEAAAD///////////////8CAAAA////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD///////////////////////////////8CAAAA////////////////AQAAAP////////////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAAAQAAAP//////////AgAAAP//////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAAEAAAD//////////wIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAgAAAAAAAAACAAAAAQAAAAEAAAACAAAAAgAAAAAAAAAFAAAABQAAAAAAAAACAAAAAgAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAIAAAABAAAAAgAAAAIAAAACAAAAAAAAAAUAAAAGAAAAAAAAAAIAAAACAAAAAwAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAIAAAAAAAAAAgAAAAEAAAADAAAAAgAAAAIAAAAAAAAABQAAAAcAAAAAAAAAAgAAAAIAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAACAAAAAQAAAAQAAAACAAAAAgAAAAAAAAAFAAAACAAAAAAAAAACAAAAAgAAAAMAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAACAAAAAAAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAUAAAAJAAAAAAAAAAIAAAACAAAAAwAAAAUAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAIAAAACAAAAAAAAAAMAAAAOAAAAAgAAAAAAAAACAAAAAwAAAAAAAAAAAAAAAgAAAAIAAAADAAAABgAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAgAAAAIAAAAAAAAAAwAAAAoAAAACAAAAAAAAAAIAAAADAAAAAQAAAAAAAAACAAAAAgAAAAMAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAgAAAAAAAAADAAAACwAAAAIAAAAAAAAAAgAAAAMAAAACAAAAAAAAAAIAAAACAAAAAwAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAACAAAAAAAAAAMAAAAMAAAAAgAAAAAAAAACAAAAAwAAAAMAAAAAAAAAAgAAAAIAAAADAAAACQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAIAAAAAAAAAAwAAAA0AAAACAAAAAAAAAAIAAAADAAAABAAAAAAAAAACAAAAAgAAAAMAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAgAAAAAAAAADAAAABgAAAAIAAAAAAAAAAgAAAAMAAAAPAAAAAAAAAAIAAAACAAAAAwAAAAsAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAIAAAACAAAAAAAAAAMAAAAHAAAAAgAAAAAAAAACAAAAAwAAABAAAAAAAAAAAgAAAAIAAAADAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAIAAAAAAAAAAwAAAAgAAAACAAAAAAAAAAIAAAADAAAAEQAAAAAAAAACAAAAAgAAAAMAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAACAAAAAgAAAAAAAAADAAAACQAAAAIAAAAAAAAAAgAAAAMAAAASAAAAAAAAAAIAAAACAAAAAwAAAA4AAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAACAAAAAAAAAAMAAAAFAAAAAgAAAAAAAAACAAAAAwAAABMAAAAAAAAAAgAAAAIAAAADAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAgAAAAAAAAACAAAAAQAAABMAAAACAAAAAgAAAAAAAAAFAAAACgAAAAAAAAACAAAAAgAAAAMAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABEAAAACAAAAAAAAAAIAAAABAAAADwAAAAIAAAACAAAAAAAAAAUAAAALAAAAAAAAAAIAAAACAAAAAwAAABEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAIAAAAAAAAAAgAAAAEAAAAQAAAAAgAAAAIAAAAAAAAABQAAAAwAAAAAAAAAAgAAAAIAAAADAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAACAAAAAQAAABEAAAACAAAAAgAAAAAAAAAFAAAADQAAAAAAAAACAAAAAgAAAAMAAAATAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAACAAAAAAAAAAIAAAABAAAAEgAAAAIAAAACAAAAAAAAAAUAAAAOAAAAAAAAAAIAAAACAAAAAwAAAAIAAAABAAAAAAAAAAEAAAACAAAAAAAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAEAAAAAAAAAAgAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAgAAAAAAAAABAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAFAAAAAAAAAAEAAAAAAAAAAAAAAMuhRbbsNlBBYqHW9OmHIkF9XBuqnS31QAK37uYhNMhAOSo3UUupm0DC+6pc6JxvQHV9eseEEEJAzURsCyqlFEB8BQ4NMJjnPyy3tBoS97o/xawXQznRjj89J2K2CZxhP6vX43RIIDQ/S8isgygEBz+LvFHQkmzaPjFFFO7wMq4+AADMLkTtjkIAAOgkJqxhQgAAU7B0MjRCAADwpBcVB0IAAACYP2HaQQAAAIn/Ja5BzczM4Eg6gUHNzMxMU7BTQTMzMzNfgCZBAAAAAEi3+UAAAAAAwGPNQDMzMzMzy6BAmpmZmZkxc0AzMzMzM/NFQDMzMzMzMxlAzczMzMzM7D+ygXSx2U6RQKimJOvQKnpA23hmONTHY0A/AGcxyudNQNb3K647mzZA+S56rrwWIUAm4kUQ+9UJQKre9hGzh/M/BLvoy9WG3T+LmqMf8VHGP2m3nYNV37A/gbFHcyeCmT+cBPWBckiDP61tZACjKW0/q2RbYVUYVj8uDypVyLNAP6jGS5cA5zBBwcqhBdCNGUEGEhQ/JVEDQT6WPnRbNO1AB/AWSJgT1kDfUWNCNLDAQNk+5C33OqlAchWL34QSk0DKvtDIrNV8QNF0G3kFzGVASSeWhBl6UED+/0mNGuk4QGjA/dm/1CJALPLPMql6DEDSHoDrwpP1P2jouzWST+A/egAAAAAAAABKAwAAAAAAAPoWAAAAAAAAyqAAAAAAAAB6ZQQAAAAAAErGHgAAAAAA+mvXAAAAAADK8+MFAAAAAHqqOykAAAAASqmhIAEAAAD6oGvkBwAAAMpm8T43AAAAes+ZuIIBAABKrDQMkwoAAPq1cFUFSgAAyvkUViUGAgAAAAAAAwAAAAYAAAACAAAABQAAAAEAAAAEAAAAAAAAAAAAAAAFAAAAAwAAAAEAAAAGAAAABAAAAAIAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAA/////wAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAP////8AAAAAAAAAAAEAAAABAAAAAAAAAAAAAAD/////AAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAAAAAAABAAEAAAEBAAAAAAABAAAAAQAAAAEAAQAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAHAAAABwAAAAEAAAACAAAABAAAAAMAAAAAAAAAAAAAAAcAAAADAAAAAQAAAAIAAAAFAAAABAAAAAAAAAAAAAAAYWxnb3MuYwBfcG9seWZpbGxJbnRlcm5hbABhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0dlb0JvdW5kYXJ5AGFkamFjZW50RmFjZURpcltjZW50ZXJJSksuZmFjZV1bZmFjZTJdID09IEtJAF9mYWNlSWprVG9HZW9Cb3VuZGFyeQBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGgzVG9Mb2NhbElqawBiYXNlQ2VsbCAhPSBvcmlnaW5CYXNlQ2VsbAAhKG9yaWdpbk9uUGVudCAmJiBpbmRleE9uUGVudCkAcGVudGFnb25Sb3RhdGlvbnMgPj0gMABkaXJlY3Rpb25Sb3RhdGlvbnMgPj0gMABiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvSDMAIV9pc0Jhc2VDZWxsUGVudGFnb24oYmFzZUNlbGwpAGJhc2VDZWxsUm90YXRpb25zID49IDAAd2l0aGluUGVudGFnb25Sb3RhdGlvbnMgPj0gMABncmFwaC0+YnVja2V0cyAhPSBOVUxMAHZlcnRleEdyYXBoLmMAaW5pdFZlcnRleEdyYXBoAG5vZGUgIT0gTlVMTABhZGRWZXJ0ZXhOb2Rl";function Y(A){return A}function O(A){return A.replace(/\b__Z[\w\d_]+/g,(function(A){return A===A?A:A+" ["+A+"]"}))}function j(){var A=new Error;if(!A.stack){try{throw new Error(0)}catch(e){A=e}if(!A.stack)return"(no stack trace available)"}return A.stack.toString()}function N(){return p.length}function Z(A){try{var e=new ArrayBuffer(A);if(e.byteLength!=A)return;return new Int8Array(e).set(p),$(e),Q(e),1}catch(A){}}var W="function"==typeof atob?atob:function(A){var e,r,t,i,n,o,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f="",s=0;A=A.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{e=a.indexOf(A.charAt(s++))<<2|(i=a.indexOf(A.charAt(s++)))>>4,r=(15&i)<<4|(n=a.indexOf(A.charAt(s++)))>>2,t=(3&n)<<6|(o=a.indexOf(A.charAt(s++))),f+=String.fromCharCode(e),64!==n&&(f+=String.fromCharCode(r)),64!==o&&(f+=String.fromCharCode(t))}while(s<A.length);return f};function J(A){if(z(A))return function(A){try{for(var e=W(A),r=new Uint8Array(e.length),t=0;t<e.length;++t)r[t]=e.charCodeAt(t);return r}catch(A){throw new Error("Converting base64 string to bytes failed.")}}(A.slice(L.length))}var K,X,q=function(A,e,r){var t=new A.Int8Array(r),i=new A.Int32Array(r),n=(new A.Uint8Array(r),new A.Float32Array(r),new A.Float64Array(r)),o=0|e.p,a=A.Math.floor,f=A.Math.abs,s=A.Math.sqrt,u=A.Math.pow,l=A.Math.cos,h=A.Math.sin,c=A.Math.tan,d=A.Math.acos,g=A.Math.asin,w=A.Math.atan,p=A.Math.atan2,B=A.Math.ceil,b=A.Math.imul,v=A.Math.min,m=A.Math.clz32,k=e.b,M=e.c,Q=e.d,y=e.e,E=e.f,x=e.g,D=e.h,_=e.i,I=24048;function F(A,e,r,t){var i,n;0|C(A|=0,e|=0,r|=0,t|=0,0)&&(_e(0|t,0,(n=1+(0|b(3*r|0,r+1|0))|0)<<3|0),(i=0|be(n,4))&&(P(A,e,r,t,i,n,0),Be(i)))}function C(A,e,r,t,n){A|=0,e|=0,r|=0,n|=0;var o,a=0,f=0,s=0,u=0,l=0,h=0,c=0,d=0;if(o=I,I=I+16|0,d=o,i[(a=t|=0)>>2]=A,i[a+4>>2]=e,(a=0!=(0|n))&&(i[n>>2]=0),0|UA(A,e))return I=o,0|(d=1);i[d>>2]=0;A:do{if((0|r)>=1)if(a)for(l=0,h=1,c=1,f=0,a=A;;){if(!(f|l)){if(0==(0|(a=0|U(a,e,4,d)))&0==(0|(e=0|M()))){a=2;break A}if(0|UA(a,e)){a=1;break A}}if(0==(0|(a=0|U(a,e,0|i[16+(l<<2)>>2],d)))&0==(0|(e=0|M()))){a=2;break A}if(i[(A=t+(c<<3)|0)>>2]=a,i[A+4>>2]=e,i[n+(c<<2)>>2]=h,A=(0|(f=f+1|0))==(0|h),u=6==(0|(s=l+1|0)),0|UA(a,e)){a=1;break A}if((0|(h=h+(u&A&1)|0))>(0|r)){a=0;break}l=A?u?0:s:l,c=c+1|0,f=A?0:f}else for(l=0,h=1,c=1,f=0,a=A;;){if(!(f|l)){if(0==(0|(a=0|U(a,e,4,d)))&0==(0|(e=0|M()))){a=2;break A}if(0|UA(a,e)){a=1;break A}}if(0==(0|(a=0|U(a,e,0|i[16+(l<<2)>>2],d)))&0==(0|(e=0|M()))){a=2;break A}if(i[(A=t+(c<<3)|0)>>2]=a,i[A+4>>2]=e,A=(0|(f=f+1|0))==(0|h),u=6==(0|(s=l+1|0)),0|UA(a,e)){a=1;break A}if((0|(h=h+(u&A&1)|0))>(0|r)){a=0;break}l=A?u?0:s:l,c=c+1|0,f=A?0:f}else a=0}while(0);return I=o,0|(d=a)}function P(A,e,r,t,n,o,a){r|=0,t|=0,n|=0,o|=0,a|=0;var f,s,u=0,l=0,h=0,c=0,d=0;if(s=I,I=I+16|0,f=s,0==(0|(A|=0))&0==(0|(e|=0)))I=s;else{if(u=0|Me(0|A,0|e,0|o,((0|o)<0)<<31>>31|0),M(),!(0==(0|(d=0|i[(c=l=t+(u<<3)|0)>>2]))&0==(0|(c=0|i[c+4>>2]))|(h=(0|d)==(0|A)&(0|c)==(0|e))))do{h=(0|(c=0|i[(d=l=t+((u=(u+1|0)%(0|o)|0)<<3)|0)>>2]))==(0|A)&(0|(d=0|i[d+4>>2]))==(0|e)}while(!(0==(0|c)&0==(0|d)|h));u=n+(u<<2)|0,h&&(0|i[u>>2])<=(0|a)||(i[(d=l)>>2]=A,i[d+4>>2]=e,i[u>>2]=a,(0|a)>=(0|r)||(d=a+1|0,i[f>>2]=0,P(c=0|U(A,e,2,f),0|M(),r,t,n,o,d),i[f>>2]=0,P(c=0|U(A,e,3,f),0|M(),r,t,n,o,d),i[f>>2]=0,P(c=0|U(A,e,1,f),0|M(),r,t,n,o,d),i[f>>2]=0,P(c=0|U(A,e,5,f),0|M(),r,t,n,o,d),i[f>>2]=0,P(c=0|U(A,e,4,f),0|M(),r,t,n,o,d),i[f>>2]=0,P(c=0|U(A,e,6,f),0|M(),r,t,n,o,d))),I=s}}function U(A,e,r,t){A|=0,e|=0,r|=0;var n,o,a=0,f=0,s=0,u=0,l=0,h=0,c=0;if((0|i[(t|=0)>>2])>0){a=0;do{r=0|fA(r),a=a+1|0}while((0|a)<(0|i[t>>2]))}n=0|Qe(0|A,0|e,45),M(),o=127&n,f=0|GA(A,e),a=0|Qe(0|A,0|e,52),M(),a&=15;A:do{if(a)for(;;){if(h=0|Qe(0|A,0|e,0|(l=3*(15-a|0)|0)),M(),h&=7,c=0==(0|RA(a)),a=a+-1|0,u=0|ye(7,0,0|l),e&=~(0|M()),A=(l=0|ye(0|i[(c?464:48)+(28*h|0)+(r<<2)>>2],0,0|l))|A&~u,e|=0|M(),!(r=0|i[(c?672:256)+(28*h|0)+(r<<2)>>2])){r=0;break A}if(!a){s=6;break}}else s=6}while(0);6==(0|s)&&(A|=h=0|ye(0|(c=0|i[880+(28*o|0)+(r<<2)>>2]),0,45),e=0|M()|-1040385&e,r=0|i[4304+(28*o|0)+(r<<2)>>2],127==(127&c|0)&&(c=0|ye(0|i[880+(28*o|0)+20>>2],0,45),e=0|M()|-1040385&e,r=0|i[4304+(28*o|0)+20>>2],A=0|TA(c|A,e),e=0|M(),i[t>>2]=1+(0|i[t>>2]))),s=0|Qe(0|A,0|e,45),M(),s&=127;A:do{if(0|S(s)){e:do{if(1==(0|GA(A,e))){if((0|o)!=(0|s)){if(0|R(s,0|i[7728+(28*o|0)>>2])){A=0|HA(A,e),f=1,e=0|M();break}A=0|TA(A,e),f=1,e=0|M();break}switch(0|f){case 5:A=0|HA(A,e),e=0|M(),i[t>>2]=5+(0|i[t>>2]),f=0;break e;case 3:A=0|TA(A,e),e=0|M(),i[t>>2]=1+(0|i[t>>2]),f=0;break e;default:return c=0,k(0|(h=0)),0|c}}else f=0}while(0);if((0|r)>0){a=0;do{A=0|SA(A,e),e=0|M(),a=a+1|0}while((0|a)!=(0|r))}if((0|o)!=(0|s)){if(!(0|T(s))){if(0!=(0|f)|5!=(0|GA(A,e)))break;i[t>>2]=1+(0|i[t>>2]);break}switch(127&n){case 8:case 118:break A}3!=(0|GA(A,e))&&(i[t>>2]=1+(0|i[t>>2]))}}else if((0|r)>0){a=0;do{A=0|TA(A,e),e=0|M(),a=a+1|0}while((0|a)!=(0|r))}}while(0);return i[t>>2]=((0|i[t>>2])+r|0)%6|0,c=A,k(0|(h=e)),0|c}function G(A,e,r,t,o,a){e|=0,r|=0,t|=0,o|=0,a|=0;var f,s,u,l,h,c,d,g,w,p=0,B=0,b=0,v=0,m=0,k=0,Q=0,y=0,E=0,x=0,D=0,_=0,F=0,C=0;if(w=I,I=I+48|0,c=w+32|0,d=w+16|0,g=w,(0|(p=0|i[(A|=0)>>2]))<=0)return I=w,0|(_=0);f=A+4|0,s=c+8|0,u=d+8|0,l=g+8|0,h=((0|e)<0)<<31>>31,D=0;A:for(;;){E=(B=0|i[f>>2])+(D<<4)|0,i[c>>2]=i[E>>2],i[c+4>>2]=i[E+4>>2],i[c+8>>2]=i[E+8>>2],i[c+12>>2]=i[E+12>>2],(0|D)==(p+-1|0)?(i[d>>2]=i[B>>2],i[d+4>>2]=i[B+4>>2],i[d+8>>2]=i[B+8>>2],i[d+12>>2]=i[B+12>>2]):(E=B+(D+1<<4)|0,i[d>>2]=i[E>>2],i[d+4>>2]=i[E+4>>2],i[d+8>>2]=i[E+8>>2],i[d+12>>2]=i[E+12>>2]),E=0|N(c,d,r);e:do{if((0|E)>0){x=+(0|E),y=0;r:for(;;){C=+(E-y|0),F=+(0|y),n[g>>3]=+n[c>>3]*C/x+ +n[d>>3]*F/x,n[l>>3]=+n[s>>3]*C/x+ +n[u>>3]*F/x,B=0|Me(0|(k=0|LA(g,r)),0|(Q=0|M()),0|e,0|h),M(),v=0|i[(b=p=a+(B<<3)|0)>>2],b=0|i[b+4>>2];t:do{if(0==(0|v)&0==(0|b))_=14;else for(m=0;;){if((0|m)>(0|e)){p=1;break t}if((0|v)==(0|k)&(0|b)==(0|Q)){p=7;break t}if(0==(0|(v=0|i[(b=p=a+((B=(B+1|0)%(0|e)|0)<<3)|0)>>2]))&0==(0|(b=0|i[b+4>>2]))){_=14;break}m=m+1|0}}while(0);switch(14==(0|_)&&(_=0,0==(0|k)&0==(0|Q)?p=7:(i[p>>2]=k,i[p+4>>2]=Q,p=0|i[t>>2],i[(m=o+(p<<3)|0)>>2]=k,i[m+4>>2]=Q,i[t>>2]=p+1,p=0)),7&p){case 7:case 0:break;default:break r}if((0|E)<=(0|(y=y+1|0))){_=8;break e}}if(0|p){p=-1,_=20;break A}}else _=8}while(0);if(8==(0|_)&&(_=0),(0|(D=D+1|0))>=(0|(p=0|i[A>>2]))){p=0,_=20;break}}return 20==(0|_)?(I=w,0|p):0}function S(A){return 0|i[7728+(28*(A|=0)|0)+16>>2]}function T(A){return 4==(0|(A|=0))|117==(0|A)|0}function V(A){return 0|i[11152+(216*(0|i[(A|=0)>>2])|0)+(72*(0|i[A+4>>2])|0)+(24*(0|i[A+8>>2])|0)+(i[A+12>>2]<<3)>>2]}function H(A){return 0|i[11152+(216*(0|i[(A|=0)>>2])|0)+(72*(0|i[A+4>>2])|0)+(24*(0|i[A+8>>2])|0)+(i[A+12>>2]<<3)+4>>2]}function R(A,e){return e|=0,(0|i[7728+(28*(A|=0)|0)+20>>2])==(0|e)?0|(e=1):0|(e=(0|i[7728+(28*A|0)+24>>2])==(0|e))}function L(A,e){return 0|i[880+(28*(A|=0)|0)+((e|=0)<<2)>>2]}function z(A,e){return e|=0,(0|i[880+(28*(A|=0)|0)>>2])==(0|e)?0|(e=0):(0|i[880+(28*A|0)+4>>2])==(0|e)?0|(e=1):(0|i[880+(28*A|0)+8>>2])==(0|e)?0|(e=2):(0|i[880+(28*A|0)+12>>2])==(0|e)?0|(e=3):(0|i[880+(28*A|0)+16>>2])==(0|e)?0|(e=4):(0|i[880+(28*A|0)+20>>2])==(0|e)?0|(e=5):0|((0|i[880+(28*A|0)+24>>2])==(0|e)?6:7)}function Y(A){return+n[(A|=0)+16>>3]<+n[A+24>>3]|0}function O(A,e){A|=0;var r,t,i=0;return(i=+n[(e|=0)>>3])>=+n[A+8>>3]&&i<=+n[A>>3]?(r=+n[A+16>>3],i=+n[A+24>>3],e=(t=+n[e+8>>3])>=i,A=t<=r&1,r<i?e&&(A=1):e||(A=0),0|(e=0!=(0|A))):0|(e=0)}function j(A,e){A|=0,e|=0;var r,t,o,a,s,u,l=0,h=0;a=I,I=I+288|0,r=a+264|0,t=a+96|0,h=(l=o=a)+96|0;do{i[l>>2]=0,l=l+4|0}while((0|l)<(0|h));return NA(e,o),OA(h=0|i[(l=o)>>2],l=0|i[l+4>>2],r),jA(h,l,t),s=+DA(r,t+8|0),n[r>>3]=+n[A>>3],n[(l=r+8|0)>>3]=+n[A+16>>3],n[t>>3]=+n[A+8>>3],n[(h=t+8|0)>>3]=+n[A+24>>3],u=+DA(r,t),h=~~+B(+u*u/+Ee(+ +f(+(+n[l>>3]-+n[h>>3])/(+n[r>>3]-+n[t>>3])),3)/(s*(2.59807621135*s)*.8)),I=a,0|(0==(0|h)?1:h)}function N(A,e,r){A|=0,e|=0,r|=0;var t,n,o,a,f,s=0,u=0;a=I,I=I+288|0,t=a+264|0,n=a+96|0,u=(s=o=a)+96|0;do{i[s>>2]=0,s=s+4|0}while((0|s)<(0|u));return NA(r,o),OA(s=0|i[(u=o)>>2],u=0|i[u+4>>2],t),jA(s,u,n),f=+DA(t,n+8|0),u=~~+B(+ +DA(A,e)/(2*f)),I=a,0|(0==(0|u)?1:u)}function Z(A,e,r,t){e|=0,r|=0,t|=0,i[(A|=0)>>2]=e,i[A+4>>2]=r,i[A+8>>2]=t}function W(A,e){A|=0;var r,t,o,a,s=0,u=0,l=0,h=0,c=0,d=0,g=0;i[(a=(e|=0)+8|0)>>2]=0,t=+n[A>>3],h=+f(+t),o=+n[A+8>>3],h+=.5*(c=+f(+o)/.8660254037844386),h-=+(0|(s=~~h)),c-=+(0|(A=~~c));do{if(h<.5){if(h<.3333333333333333){if(i[e>>2]=s,c<.5*(h+1)){i[e+4>>2]=A;break}A=A+1|0,i[e+4>>2]=A;break}if(A=(1&!(c<(g=1-h)))+A|0,i[e+4>>2]=A,g<=c&c<2*h){s=s+1|0,i[e>>2]=s;break}i[e>>2]=s;break}if(!(h<.6666666666666666)){if(s=s+1|0,i[e>>2]=s,c<.5*h){i[e+4>>2]=A;break}A=A+1|0,i[e+4>>2]=A;break}if(c<1-h){if(i[e+4>>2]=A,2*h-1<c){i[e>>2]=s;break}}else A=A+1|0,i[e+4>>2]=A;s=s+1|0,i[e>>2]=s}while(0);do{if(t<0){if(1&A){s=~~(+(0|s)-(2*(+((d=0|ve(0|s,((0|s)<0)<<31>>31|0,0|(d=(A+1|0)/2|0),((0|d)<0)<<31>>31|0))>>>0)+4294967296*+(0|M()))+1)),i[e>>2]=s;break}s=~~(+(0|s)-2*(+((d=0|ve(0|s,((0|s)<0)<<31>>31|0,0|(d=(0|A)/2|0),((0|d)<0)<<31>>31|0))>>>0)+4294967296*+(0|M()))),i[e>>2]=s;break}}while(0);d=e+4|0,o<0&&(s=s-((1|A<<1)/2|0)|0,i[e>>2]=s,A=0-A|0,i[d>>2]=A),u=A-s|0,(0|s)<0?(l=0-s|0,i[d>>2]=u,i[a>>2]=l,i[e>>2]=0,A=u,s=0):l=0,(0|A)<0&&(s=s-A|0,i[e>>2]=s,l=l-A|0,i[a>>2]=l,i[d>>2]=0,A=0),r=s-l|0,u=A-l|0,(0|l)<0&&(i[e>>2]=r,i[d>>2]=u,i[a>>2]=0,A=u,s=r,l=0),(0|(u=(0|l)<(0|(u=(0|A)<(0|s)?A:s))?l:u))<=0||(i[e>>2]=s-u,i[d>>2]=A-u,i[a>>2]=l-u)}function J(A){var e,r=0,t=0,n=0,o=0,a=0;r=0|i[(A|=0)>>2],t=0|i[(e=A+4|0)>>2],(0|r)<0&&(t=t-r|0,i[e>>2]=t,i[(a=A+8|0)>>2]=(0|i[a>>2])-r,i[A>>2]=0,r=0),(0|t)<0?(r=r-t|0,i[A>>2]=r,o=(0|i[(a=A+8|0)>>2])-t|0,i[a>>2]=o,i[e>>2]=0,t=0):(a=o=A+8|0,o=0|i[o>>2]),(0|o)<0&&(r=r-o|0,i[A>>2]=r,t=t-o|0,i[e>>2]=t,i[a>>2]=0,o=0),(0|(n=(0|o)<(0|(n=(0|t)<(0|r)?t:r))?o:n))<=0||(i[A>>2]=r-n,i[e>>2]=t-n,i[a>>2]=o-n)}function K(A,e){e|=0;var r,t;t=0|i[(A|=0)+8>>2],r=+((0|i[A+4>>2])-t|0),n[e>>3]=+((0|i[A>>2])-t|0)-.5*r,n[e+8>>3]=.8660254037844386*r}function X(A,e,r){A|=0,e|=0,i[(r|=0)>>2]=(0|i[e>>2])+(0|i[A>>2]),i[r+4>>2]=(0|i[e+4>>2])+(0|i[A+4>>2]),i[r+8>>2]=(0|i[e+8>>2])+(0|i[A+8>>2])}function q(A,e,r){A|=0,e|=0,i[(r|=0)>>2]=(0|i[A>>2])-(0|i[e>>2]),i[r+4>>2]=(0|i[A+4>>2])-(0|i[e+4>>2]),i[r+8>>2]=(0|i[A+8>>2])-(0|i[e+8>>2])}function $(A,e){e|=0;var r,t=0;t=0|b(0|i[(A|=0)>>2],e),i[A>>2]=t,r=0|b(0|i[(t=A+4|0)>>2],e),i[t>>2]=r,e=0|b(0|i[(A=A+8|0)>>2],e),i[A>>2]=e}function AA(A){var e,r,t=0,n=0,o=0,a=0,f=0;f=(0|(r=0|i[(A|=0)>>2]))<0,A=(A=(n=(0|(a=((e=(0|(o=(0|i[A+4>>2])-(f?r:0)|0))<0)?0-o|0:0)+((0|i[A+8>>2])-(f?r:0))|0))<0)?0:a)-((o=(0|(n=(0|A)<(0|(n=(0|(t=(e?0:o)-(n?a:0)|0))<(0|(a=(f?0:r)-(e?o:0)-(n?a:0)|0))?t:a))?A:n))>0)?n:0)|0,t=t-(o?n:0)|0;A:do{switch(a-(o?n:0)|0){case 0:switch(0|t){case 0:return 0|(f=0==(0|A)?0:1==(0|A)?1:7);case 1:return 0|(f=0==(0|A)?2:1==(0|A)?3:7);default:break A}case 1:switch(0|t){case 0:return 0|(f=0==(0|A)?4:1==(0|A)?5:7);case 1:if(A)break A;return 0|(A=6);default:break A}}}while(0);return 0|(f=7)}function eA(A){var e,r,t=0,n=0,o=0,a=0,f=0;n=0|i[(e=(A|=0)+8|0)>>2],o=0|we(+((3*(t=(0|i[A>>2])-n|0)|0)-(n=(0|i[(r=A+4|0)>>2])-n|0)|0)/7),i[A>>2]=o,t=0|we(+((n<<1)+t|0)/7),i[r>>2]=t,i[e>>2]=0,n=t-o|0,(0|o)<0?(f=0-o|0,i[r>>2]=n,i[e>>2]=f,i[A>>2]=0,t=n,o=0,n=f):n=0,(0|t)<0&&(o=o-t|0,i[A>>2]=o,n=n-t|0,i[e>>2]=n,i[r>>2]=0,t=0),f=o-n|0,a=t-n|0,(0|n)<0?(i[A>>2]=f,i[r>>2]=a,i[e>>2]=0,t=a,a=f,n=0):a=o,(0|(o=(0|n)<(0|(o=(0|t)<(0|a)?t:a))?n:o))<=0||(i[A>>2]=a-o,i[r>>2]=t-o,i[e>>2]=n-o)}function rA(A){var e,r,t=0,n=0,o=0,a=0,f=0;n=0|i[(e=(A|=0)+8|0)>>2],o=0|we(+(((t=(0|i[A>>2])-n|0)<<1)+(n=(0|i[(r=A+4|0)>>2])-n|0)|0)/7),i[A>>2]=o,t=0|we(+((3*n|0)-t|0)/7),i[r>>2]=t,i[e>>2]=0,n=t-o|0,(0|o)<0?(f=0-o|0,i[r>>2]=n,i[e>>2]=f,i[A>>2]=0,t=n,o=0,n=f):n=0,(0|t)<0&&(o=o-t|0,i[A>>2]=o,n=n-t|0,i[e>>2]=n,i[r>>2]=0,t=0),f=o-n|0,a=t-n|0,(0|n)<0?(i[A>>2]=f,i[r>>2]=a,i[e>>2]=0,t=a,a=f,n=0):a=o,(0|(o=(0|n)<(0|(o=(0|t)<(0|a)?t:a))?n:o))<=0||(i[A>>2]=a-o,i[r>>2]=t-o,i[e>>2]=n-o)}function tA(A){var e,r,t,n=0,o=0,a=0,f=0;n=0|i[(A|=0)>>2],o=0|i[(r=A+4|0)>>2],a=0|i[(t=A+8|0)>>2],f=o+(3*n|0)|0,i[A>>2]=f,o=a+(3*o|0)|0,i[r>>2]=o,n=(3*a|0)+n|0,i[t>>2]=n,a=o-f|0,(0|f)<0?(n=n-f|0,i[r>>2]=a,i[t>>2]=n,i[A>>2]=0,o=a,a=0):a=f,(0|o)<0&&(a=a-o|0,i[A>>2]=a,n=n-o|0,i[t>>2]=n,i[r>>2]=0,o=0),e=a-n|0,f=o-n|0,(0|n)<0?(i[A>>2]=e,i[r>>2]=f,i[t>>2]=0,a=e,n=0):f=o,(0|(o=(0|n)<(0|(o=(0|f)<(0|a)?f:a))?n:o))<=0||(i[A>>2]=a-o,i[r>>2]=f-o,i[t>>2]=n-o)}function iA(A){var e,r,t,n=0,o=0,a=0,f=0;f=0|i[(A|=0)>>2],a=(3*(n=0|i[(r=A+4|0)>>2])|0)+f|0,f=(o=0|i[(t=A+8|0)>>2])+(3*f|0)|0,i[A>>2]=f,i[r>>2]=a,n=(3*o|0)+n|0,i[t>>2]=n,o=a-f|0,(0|f)<0?(n=n-f|0,i[r>>2]=o,i[t>>2]=n,i[A>>2]=0,f=0):o=a,(0|o)<0&&(f=f-o|0,i[A>>2]=f,n=n-o|0,i[t>>2]=n,i[r>>2]=0,o=0),e=f-n|0,a=o-n|0,(0|n)<0?(i[A>>2]=e,i[r>>2]=a,i[t>>2]=0,f=e,n=0):a=o,(0|(o=(0|n)<(0|(o=(0|a)<(0|f)?a:f))?n:o))<=0||(i[A>>2]=f-o,i[r>>2]=a-o,i[t>>2]=n-o)}function nA(A,e){A|=0;var r,t,n,o=0,a=0,f=0;((e|=0)+-1|0)>>>0>=6||(f=(0|i[15472+(12*e|0)>>2])+(0|i[A>>2])|0,i[A>>2]=f,n=A+4|0,a=(0|i[15472+(12*e|0)+4>>2])+(0|i[n>>2])|0,i[n>>2]=a,t=A+8|0,e=(0|i[15472+(12*e|0)+8>>2])+(0|i[t>>2])|0,i[t>>2]=e,o=a-f|0,(0|f)<0?(e=e-f|0,i[n>>2]=o,i[t>>2]=e,i[A>>2]=0,a=0):(o=a,a=f),(0|o)<0&&(a=a-o|0,i[A>>2]=a,e=e-o|0,i[t>>2]=e,i[n>>2]=0,o=0),r=a-e|0,f=o-e|0,(0|e)<0?(i[A>>2]=r,i[n>>2]=f,i[t>>2]=0,a=r,e=0):f=o,(0|(o=(0|e)<(0|(o=(0|f)<(0|a)?f:a))?e:o))<=0||(i[A>>2]=a-o,i[n>>2]=f-o,i[t>>2]=e-o))}function oA(A){var e,r,t,n=0,o=0,a=0,f=0;f=0|i[(A|=0)>>2],a=(n=0|i[(r=A+4|0)>>2])+f|0,f=(o=0|i[(t=A+8|0)>>2])+f|0,i[A>>2]=f,i[r>>2]=a,n=o+n|0,i[t>>2]=n,o=a-f|0,(0|f)<0?(n=n-f|0,i[r>>2]=o,i[t>>2]=n,i[A>>2]=0,a=0):(o=a,a=f),(0|o)<0&&(a=a-o|0,i[A>>2]=a,n=n-o|0,i[t>>2]=n,i[r>>2]=0,o=0),e=a-n|0,f=o-n|0,(0|n)<0?(i[A>>2]=e,i[r>>2]=f,i[t>>2]=0,a=e,n=0):f=o,(0|(o=(0|n)<(0|(o=(0|f)<(0|a)?f:a))?n:o))<=0||(i[A>>2]=a-o,i[r>>2]=f-o,i[t>>2]=n-o)}function aA(A){var e,r,t,n=0,o=0,a=0,f=0;n=0|i[(A|=0)>>2],a=0|i[(r=A+4|0)>>2],o=0|i[(t=A+8|0)>>2],f=a+n|0,i[A>>2]=f,a=o+a|0,i[r>>2]=a,n=o+n|0,i[t>>2]=n,o=a-f|0,(0|f)<0?(n=n-f|0,i[r>>2]=o,i[t>>2]=n,i[A>>2]=0,a=0):(o=a,a=f),(0|o)<0&&(a=a-o|0,i[A>>2]=a,n=n-o|0,i[t>>2]=n,i[r>>2]=0,o=0),e=a-n|0,f=o-n|0,(0|n)<0?(i[A>>2]=e,i[r>>2]=f,i[t>>2]=0,a=e,n=0):f=o,(0|(o=(0|n)<(0|(o=(0|f)<(0|a)?f:a))?n:o))<=0||(i[A>>2]=a-o,i[r>>2]=f-o,i[t>>2]=n-o)}function fA(A){switch(0|(A|=0)){case 1:A=5;break;case 5:A=4;break;case 4:A=6;break;case 6:A=2;break;case 2:A=3;break;case 3:A=1}return 0|A}function sA(A){switch(0|(A|=0)){case 1:A=3;break;case 3:A=2;break;case 2:A=6;break;case 6:A=4;break;case 4:A=5;break;case 5:A=1}return 0|A}function uA(A){var e,r,t,n=0,o=0,a=0,f=0;n=0|i[(A|=0)>>2],o=0|i[(r=A+4|0)>>2],a=0|i[(t=A+8|0)>>2],f=o+(n<<1)|0,i[A>>2]=f,o=a+(o<<1)|0,i[r>>2]=o,n=(a<<1)+n|0,i[t>>2]=n,a=o-f|0,(0|f)<0?(n=n-f|0,i[r>>2]=a,i[t>>2]=n,i[A>>2]=0,o=a,a=0):a=f,(0|o)<0&&(a=a-o|0,i[A>>2]=a,n=n-o|0,i[t>>2]=n,i[r>>2]=0,o=0),e=a-n|0,f=o-n|0,(0|n)<0?(i[A>>2]=e,i[r>>2]=f,i[t>>2]=0,a=e,n=0):f=o,(0|(o=(0|n)<(0|(o=(0|f)<(0|a)?f:a))?n:o))<=0||(i[A>>2]=a-o,i[r>>2]=f-o,i[t>>2]=n-o)}function lA(A){var e,r,t,n=0,o=0,a=0,f=0;f=0|i[(A|=0)>>2],a=((n=0|i[(r=A+4|0)>>2])<<1)+f|0,f=(o=0|i[(t=A+8|0)>>2])+(f<<1)|0,i[A>>2]=f,i[r>>2]=a,n=(o<<1)+n|0,i[t>>2]=n,o=a-f|0,(0|f)<0?(n=n-f|0,i[r>>2]=o,i[t>>2]=n,i[A>>2]=0,f=0):o=a,(0|o)<0&&(f=f-o|0,i[A>>2]=f,n=n-o|0,i[t>>2]=n,i[r>>2]=0,o=0),e=f-n|0,a=o-n|0,(0|n)<0?(i[A>>2]=e,i[r>>2]=a,i[t>>2]=0,f=e,n=0):a=o,(0|(o=(0|n)<(0|(o=(0|a)<(0|f)?a:f))?n:o))<=0||(i[A>>2]=f-o,i[r>>2]=a-o,i[t>>2]=n-o)}function hA(A,e){e|=0;var r,t,n,o=0,a=0,f=0;return n=(0|(t=(0|i[(A|=0)>>2])-(0|i[e>>2])|0))<0,r=(0|(a=(0|i[A+4>>2])-(0|i[e+4>>2])-(n?t:0)|0))<0,e=(e=(A=(0|(f=(n?0-t|0:0)+(0|i[A+8>>2])-(0|i[e+8>>2])+(r?0-a|0:0)|0))<0)?0:f)-((a=(0|(A=(0|e)<(0|(A=(0|(o=(r?0:a)-(A?f:0)|0))<(0|(f=(n?0:t)-(r?a:0)-(A?f:0)|0))?o:f))?e:A))>0)?A:0)|0,o=o-(a?A:0)|0,0|((0|(A=(0|(A=f-(a?A:0)|0))>-1?A:0-A|0))>(0|(e=(0|(o=(0|o)>-1?o:0-o|0))>(0|(e=(0|e)>-1?e:0-e|0))?o:e))?A:e)}function cA(A,e){e|=0;var r;r=0|i[(A|=0)+8>>2],i[e>>2]=(0|i[A>>2])-r,i[e+4>>2]=(0|i[A+4>>2])-r}function dA(A,e){e|=0;var r,t,n,o=0,a=0,f=0;a=0|i[(A|=0)>>2],i[e>>2]=a,A=0|i[A+4>>2],i[(t=e+4|0)>>2]=A,i[(n=e+8|0)>>2]=0,o=A-a|0,(0|a)<0?(A=0-a|0,i[t>>2]=o,i[n>>2]=A,i[e>>2]=0,a=0):(o=A,A=0),(0|o)<0&&(a=a-o|0,i[e>>2]=a,A=A-o|0,i[n>>2]=A,i[t>>2]=0,o=0),r=a-A|0,f=o-A|0,(0|A)<0?(i[e>>2]=r,i[t>>2]=f,i[n>>2]=0,o=f,f=r,A=0):f=a,(0|(a=(0|A)<(0|(a=(0|o)<(0|f)?o:f))?A:a))<=0||(i[e>>2]=f-a,i[t>>2]=o-a,i[n>>2]=A-a)}function gA(A){var e,r,t,n;r=(n=0|i[(e=(A|=0)+8|0)>>2])-(0|i[A>>2])|0,i[A>>2]=r,A=(0|i[(t=A+4|0)>>2])-n|0,i[t>>2]=A,i[e>>2]=0-(A+r)}function wA(A){var e,r,t=0,n=0,o=0,a=0,f=0;t=0-(n=0|i[(A|=0)>>2])|0,i[A>>2]=t,i[(e=A+8|0)>>2]=0,a=(o=0|i[(r=A+4|0)>>2])+n|0,(0|n)>0?(i[r>>2]=a,i[e>>2]=n,i[A>>2]=0,t=0,o=a):n=0,(0|o)<0?(f=t-o|0,i[A>>2]=f,n=n-o|0,i[e>>2]=n,i[r>>2]=0,a=f-n|0,t=0-n|0,(0|n)<0?(i[A>>2]=a,i[r>>2]=t,i[e>>2]=0,o=t,n=0):(o=0,a=f)):a=t,(0|(t=(0|n)<(0|(t=(0|o)<(0|a)?o:a))?n:t))<=0||(i[A>>2]=a-t,i[r>>2]=o-t,i[e>>2]=n-t)}function pA(A,e,r,t){e|=0,r|=0,t|=0;var o,a=0,f=0,s=0,u=0;if(o=I,I=I+32|0,function(A,e){e|=0;var r=0,t=0,i=0;r=+n[(A=A|0)>>3],t=+l(+r),r=+h(+r),n[e+16>>3]=r,r=+n[A+8>>3],i=t*+l(+r),n[e>>3]=i,r=t*+h(+r),n[e+8>>3]=r}(A|=0,f=o),i[r>>2]=0,a=+fe(15888,f),(s=+fe(15912,f))<a&&(i[r>>2]=1,a=s),(s=+fe(15936,f))<a&&(i[r>>2]=2,a=s),(s=+fe(15960,f))<a&&(i[r>>2]=3,a=s),(s=+fe(15984,f))<a&&(i[r>>2]=4,a=s),(s=+fe(16008,f))<a&&(i[r>>2]=5,a=s),(s=+fe(16032,f))<a&&(i[r>>2]=6,a=s),(s=+fe(16056,f))<a&&(i[r>>2]=7,a=s),(s=+fe(16080,f))<a&&(i[r>>2]=8,a=s),(s=+fe(16104,f))<a&&(i[r>>2]=9,a=s),(s=+fe(16128,f))<a&&(i[r>>2]=10,a=s),(s=+fe(16152,f))<a&&(i[r>>2]=11,a=s),(s=+fe(16176,f))<a&&(i[r>>2]=12,a=s),(s=+fe(16200,f))<a&&(i[r>>2]=13,a=s),(s=+fe(16224,f))<a&&(i[r>>2]=14,a=s),(s=+fe(16248,f))<a&&(i[r>>2]=15,a=s),(s=+fe(16272,f))<a&&(i[r>>2]=16,a=s),(s=+fe(16296,f))<a&&(i[r>>2]=17,a=s),(s=+fe(16320,f))<a&&(i[r>>2]=18,a=s),(s=+fe(16344,f))<a&&(i[r>>2]=19,a=s),(s=+d(+(1-.5*a)))<1e-16)return i[t>>2]=0,i[t+4>>2]=0,i[t+8>>2]=0,i[t+12>>2]=0,void(I=o);if(r=0|i[r>>2],a=+EA((a=+n[16368+(24*r|0)>>3])-+EA(+function(A,e){A|=0;var r=0,t=0,i=0,o=0,a=0;return o=+n[(e=e|0)>>3],t=+l(+o),i=+n[e+8>>3]-+n[A+8>>3],a=t*+h(+i),r=+n[A>>3],+ +p(+a,+(+h(+o)*+l(+r)-+l(+i)*(t*+h(+r))))}(15568+(r<<4)|0,A))),u=0|RA(e)?+EA(a+-.3334731722518321):a,a=+c(+s)/.381966011250105,(0|e)>0){f=0;do{a*=2.6457513110645907,f=f+1|0}while((0|f)!=(0|e))}s=+l(+u)*a,n[t>>3]=s,u=+h(+u)*a,n[t+8>>3]=u,I=o}function BA(A,e,r,t,o){e|=0,r|=0,t|=0,o|=0;var a=0,u=0;if((a=+function(A){var e=0,r=0;return r=+n[(A=A|0)>>3],e=+n[A+8>>3],+ +s(+(r*r+e*e))}(A|=0))<1e-16)return e=15568+(e<<4)|0,i[o>>2]=i[e>>2],i[o+4>>2]=i[e+4>>2],i[o+8>>2]=i[e+8>>2],void(i[o+12>>2]=i[e+12>>2]);if(u=+p(+ +n[A+8>>3],+ +n[A>>3]),(0|r)>0){A=0;do{a/=2.6457513110645907,A=A+1|0}while((0|A)!=(0|r))}t?(a/=3,r=0==(0|RA(r)),a=+w(.381966011250105*(r?a:a/2.6457513110645907))):(a=+w(.381966011250105*a),0|RA(r)&&(u=+EA(u+.3334731722518321))),function(A,e,r,t){A|=0,e=+e,t|=0;var o=0,a=0,s=0,u=0;if((r=+r)<1e-16)return i[t>>2]=i[A>>2],i[t+4>>2]=i[A+4>>2],i[t+8>>2]=i[A+8>>2],void(i[t+12>>2]=i[A+12>>2]);a=e<0?e+6.283185307179586:e,a=e>=6.283185307179586?a+-6.283185307179586:a;do{if(!(a<1e-16)){if(o=+f(+(a+-3.141592653589793))<1e-16,e=+n[A>>3],o){e-=r,n[t>>3]=e,o=t;break}if(s=+l(+r),r=+h(+r),e=s*+h(+e)+ +l(+a)*(r*+l(+e)),e=+g(+((e=e>1?1:e)<-1?-1:e)),n[t>>3]=e,+f(+(e+-1.5707963267948966))<1e-16)return n[t>>3]=1.5707963267948966,void(n[t+8>>3]=0);if(+f(+(e+1.5707963267948966))<1e-16)return n[t>>3]=-1.5707963267948966,void(n[t+8>>3]=0);if(u=+l(+e),a=r*+h(+a)/u,r=+n[A>>3],e=(s-+h(+e)*+h(+r))/+l(+r)/u,s=a>1?1:a,e=e>1?1:e,(e=+n[A+8>>3]+ +p(+(s<-1?-1:s),+(e<-1?-1:e)))>3.141592653589793)do{e+=-6.283185307179586}while(e>3.141592653589793);if(e<-3.141592653589793)do{e+=6.283185307179586}while(e<-3.141592653589793);return void(n[t+8>>3]=e)}e=+n[A>>3]+r,n[t>>3]=e,o=t}while(0);if(+f(+(e+-1.5707963267948966))<1e-16)return n[o>>3]=1.5707963267948966,void(n[t+8>>3]=0);if(+f(+(e+1.5707963267948966))<1e-16)return n[o>>3]=-1.5707963267948966,void(n[t+8>>3]=0);if((e=+n[A+8>>3])>3.141592653589793)do{e+=-6.283185307179586}while(e>3.141592653589793);if(e<-3.141592653589793)do{e+=6.283185307179586}while(e<-3.141592653589793);n[t+8>>3]=e}(15568+(e<<4)|0,+EA(+n[16368+(24*e|0)>>3]-u),a,o)}function bA(A,e,r){e|=0,r|=0;var t,n;t=I,I=I+16|0,K((A|=0)+4|0,n=t),BA(n,0|i[A>>2],e,0,r),I=t}function vA(A,e,r,t,o){A|=0,e|=0,r|=0,t|=0,o|=0;var a,f,s,u,l,h,c,d,g,w,p,B,b,v,m,k,M,y,E,x,D,_,F=0,C=0,P=0,U=0,G=0,S=0;if(_=I,I=I+272|0,U=_+240|0,E=_,x=_+224|0,D=_+208|0,p=_+176|0,B=_+160|0,b=_+192|0,v=_+144|0,m=_+128|0,k=_+112|0,M=_+96|0,y=_+80|0,i[(F=_+256|0)>>2]=e,i[U>>2]=i[A>>2],i[U+4>>2]=i[A+4>>2],i[U+8>>2]=i[A+8>>2],i[U+12>>2]=i[A+12>>2],mA(U,F,E),i[o>>2]=0,(0|(U=t+r+(5==(0|t)&1)|0))<=(0|r))I=_;else{f=x+4|0,s=p+4|0,u=r+5|0,l=16848+((a=0|i[F>>2])<<2)|0,h=16928+(a<<2)|0,c=m+8|0,d=k+8|0,g=M+8|0,w=D+4|0,P=r;A:for(;;){C=E+(((0|P)%5|0)<<4)|0,i[D>>2]=i[C>>2],i[D+4>>2]=i[C+4>>2],i[D+8>>2]=i[C+8>>2],i[D+12>>2]=i[C+12>>2];do{}while(2==(0|kA(D,a,0,1)));if((0|P)>(0|r)&0!=(0|RA(e))){if(i[p>>2]=i[D>>2],i[p+4>>2]=i[D+4>>2],i[p+8>>2]=i[D+8>>2],i[p+12>>2]=i[D+12>>2],K(f,B),t=0|i[p>>2],F=0|i[17008+(80*t|0)+(i[x>>2]<<2)>>2],i[p>>2]=i[18608+(80*t|0)+(20*F|0)>>2],(0|(C=0|i[18608+(80*t|0)+(20*F|0)+16>>2]))>0){A=0;do{oA(s),A=A+1|0}while((0|A)<(0|C))}switch(C=18608+(80*t|0)+(20*F|0)+4|0,i[b>>2]=i[C>>2],i[b+4>>2]=i[C+4>>2],i[b+8>>2]=i[C+8>>2],$(b,3*(0|i[l>>2])|0),X(s,b,s),J(s),K(s,v),G=+(0|i[h>>2]),n[m>>3]=3*G,n[c>>3]=0,S=-1.5*G,n[k>>3]=S,n[d>>3]=2.598076211353316*G,n[M>>3]=S,n[g>>3]=-2.598076211353316*G,0|i[17008+(80*(0|i[p>>2])|0)+(i[D>>2]<<2)>>2]){case 1:A=k,t=m;break;case 3:A=M,t=k;break;case 2:A=m,t=M;break;default:A=12;break A}oe(B,v,t,A,y),BA(y,0|i[p>>2],a,1,o+8+(i[o>>2]<<4)|0),i[o>>2]=1+(0|i[o>>2])}if((0|P)<(0|u)&&(K(w,p),BA(p,0|i[D>>2],a,1,o+8+(i[o>>2]<<4)|0),i[o>>2]=1+(0|i[o>>2])),i[x>>2]=i[D>>2],i[x+4>>2]=i[D+4>>2],i[x+8>>2]=i[D+8>>2],i[x+12>>2]=i[D+12>>2],(0|(P=P+1|0))>=(0|U)){A=3;break}}3!=(0|A)?12==(0|A)&&Q(22474,22521,581,22531):I=_}}function mA(A,e,r){A|=0,e|=0,r|=0;var t,n=0,o=0,a=0,f=0,s=0;t=I,I=I+128|0,o=t,f=20208,s=(a=n=t+64|0)+60|0;do{i[a>>2]=i[f>>2],a=a+4|0,f=f+4|0}while((0|a)<(0|s));f=20272,s=(a=o)+60|0;do{i[a>>2]=i[f>>2],a=a+4|0,f=f+4|0}while((0|a)<(0|s));n=(s=0==(0|RA(0|i[e>>2])))?n:o,uA(o=A+4|0),lA(o),0|RA(0|i[e>>2])&&(iA(o),i[e>>2]=1+(0|i[e>>2])),i[r>>2]=i[A>>2],X(o,n,e=r+4|0),J(e),i[r+16>>2]=i[A>>2],X(o,n+12|0,e=r+20|0),J(e),i[r+32>>2]=i[A>>2],X(o,n+24|0,e=r+36|0),J(e),i[r+48>>2]=i[A>>2],X(o,n+36|0,e=r+52|0),J(e),i[r+64>>2]=i[A>>2],X(o,n+48|0,r=r+68|0),J(r),I=t}function kA(A,e,r,t){r|=0,t|=0;var n,o,a,f,s,u,l=0,h=0,c=0,d=0,g=0;if(u=I,I=I+32|0,s=u+12|0,o=u,g=(A|=0)+4|0,d=0|i[16928+((e|=0)<<2)>>2],d=(f=0!=(0|t))?3*d|0:d,l=0|i[g>>2],n=0|i[(a=A+8|0)>>2],f){if((0|(l=n+l+(t=0|i[(h=A+12|0)>>2])|0))==(0|d))return I=u,0|(g=1);c=h}else l=n+l+(t=0|i[(c=A+12|0)>>2])|0;if((0|l)<=(0|d))return I=u,0|(g=0);do{if((0|t)>0){if(t=0|i[A>>2],(0|n)>0){h=18608+(80*t|0)+60|0,t=A;break}t=18608+(80*t|0)+40|0,r?(Z(s,d,0,0),q(g,s,o),aA(o),X(o,s,g),h=t,t=A):(h=t,t=A)}else h=18608+(80*(0|i[A>>2])|0)+20|0,t=A}while(0);if(i[t>>2]=i[h>>2],(0|i[(l=h+16|0)>>2])>0){t=0;do{oA(g),t=t+1|0}while((0|t)<(0|i[l>>2]))}return A=h+4|0,i[s>>2]=i[A>>2],i[s+4>>2]=i[A+4>>2],i[s+8>>2]=i[A+8>>2],e=0|i[16848+(e<<2)>>2],$(s,f?3*e|0:e),X(g,s,g),J(g),t=f&&((0|i[a>>2])+(0|i[g>>2])+(0|i[c>>2])|0)==(0|d)?1:2,I=u,0|(g=t)}function MA(A,e){A|=0,e|=0;var r=0;do{r=0|kA(A,e,0,1)}while(2==(0|r));return 0|r}function QA(A,e,r,t,o){A|=0,e|=0,r|=0,t|=0,o|=0;var a,f,s,u,l,h,c,d,g,w,p,B,b,v,m,k,M,y,E=0,x=0,D=0,_=0,F=0;if(y=I,I=I+240|0,v=y+208|0,m=y,k=y+192|0,M=y+176|0,g=y+160|0,w=y+144|0,p=y+128|0,B=y+112|0,b=y+96|0,i[(E=y+224|0)>>2]=e,i[v>>2]=i[A>>2],i[v+4>>2]=i[A+4>>2],i[v+8>>2]=i[A+8>>2],i[v+12>>2]=i[A+12>>2],yA(v,E,m),i[o>>2]=0,(0|(d=t+r+(6==(0|t)&1)|0))<=(0|r))I=y;else{f=r+6|0,s=16928+((a=0|i[E>>2])<<2)|0,u=w+8|0,l=p+8|0,h=B+8|0,c=k+4|0,x=0,D=r,t=-1;A:for(;;){if(A=m+((E=(0|D)%6|0)<<4)|0,i[k>>2]=i[A>>2],i[k+4>>2]=i[A+4>>2],i[k+8>>2]=i[A+8>>2],i[k+12>>2]=i[A+12>>2],A=x,x=0|kA(k,a,0,1),(0|D)>(0|r)&0!=(0|RA(e))&&(1!=(0|A)&&(0|i[k>>2])!=(0|t))){switch(K(m+(((E+5|0)%6|0)<<4)+4|0,M),K(m+(E<<4)+4|0,g),_=+(0|i[s>>2]),n[w>>3]=3*_,n[u>>3]=0,F=-1.5*_,n[p>>3]=F,n[l>>3]=2.598076211353316*_,n[B>>3]=F,n[h>>3]=-2.598076211353316*_,E=0|i[v>>2],0|i[17008+(80*E|0)+(((0|t)==(0|E)?0|i[k>>2]:t)<<2)>>2]){case 1:A=p,t=w;break;case 3:A=B,t=p;break;case 2:A=w,t=B;break;default:A=8;break A}oe(M,g,t,A,b),0|ae(M,b)||0|ae(g,b)||(BA(b,0|i[v>>2],a,1,o+8+(i[o>>2]<<4)|0),i[o>>2]=1+(0|i[o>>2]))}if((0|D)<(0|f)&&(K(c,M),BA(M,0|i[k>>2],a,1,o+8+(i[o>>2]<<4)|0),i[o>>2]=1+(0|i[o>>2])),(0|(D=D+1|0))>=(0|d)){A=3;break}t=0|i[k>>2]}3!=(0|A)?8==(0|A)&&Q(22557,22521,746,22602):I=y}}function yA(A,e,r){A|=0,e|=0,r|=0;var t,n=0,o=0,a=0,f=0,s=0;t=I,I=I+160|0,o=t,f=20336,s=(a=n=t+80|0)+72|0;do{i[a>>2]=i[f>>2],a=a+4|0,f=f+4|0}while((0|a)<(0|s));f=20416,s=(a=o)+72|0;do{i[a>>2]=i[f>>2],a=a+4|0,f=f+4|0}while((0|a)<(0|s));n=(s=0==(0|RA(0|i[e>>2])))?n:o,uA(o=A+4|0),lA(o),0|RA(0|i[e>>2])&&(iA(o),i[e>>2]=1+(0|i[e>>2])),i[r>>2]=i[A>>2],X(o,n,e=r+4|0),J(e),i[r+16>>2]=i[A>>2],X(o,n+12|0,e=r+20|0),J(e),i[r+32>>2]=i[A>>2],X(o,n+24|0,e=r+36|0),J(e),i[r+48>>2]=i[A>>2],X(o,n+36|0,e=r+52|0),J(e),i[r+64>>2]=i[A>>2],X(o,n+48|0,e=r+68|0),J(e),i[r+80>>2]=i[A>>2],X(o,n+60|0,r=r+84|0),J(r),I=t}function EA(A){var e;return e=(A=+A)<0?A+6.283185307179586:A,+(A>=6.283185307179586?e+-6.283185307179586:e)}function xA(A,e){return e|=0,+f(+(+n[(A|=0)>>3]-+n[e>>3]))<17453292519943298e-27?0|(e=+f(+(+n[A+8>>3]-+n[e+8>>3]))<17453292519943298e-27):0|(e=0)}function DA(A,e){A|=0;var r,t,i,o=0;return t=+n[(e|=0)>>3],r=+n[A>>3],o=(i=+h(.5*(t-r)))*i+(o=+h(.5*(+n[e+8>>3]-+n[A+8>>3])))*(+l(+t)*+l(+r)*o),2*+p(+ +s(+o),+ +s(+(1-o)))*6371.007180918475}function _A(A,e,r){A|=0,r|=0;var t,i,o,a,f=0,u=0,d=0,g=0,B=0,b=0;return b=+n[(e|=0)>>3],o=+n[A>>3],B=+h(.5*(b-o)),d=+n[e+8>>3],i=+n[A+8>>3],g=+h(.5*(d-i)),t=+l(+o),a=+l(+b),g=2*+p(+ +s(+(g=B*B+g*(a*t*g))),+ +s(+(1-g))),B=+n[r>>3],b=+h(.5*(B-b)),f=+n[r+8>>3],d=+h(.5*(f-d)),u=+l(+B),d=2*+p(+ +s(+(d=b*b+d*(a*u*d))),+ +s(+(1-d))),B=+h(.5*(o-B)),f=+h(.5*(i-f)),f=2*+p(+ +s(+(f=B*B+f*(t*u*f))),+ +s(+(1-f))),4*+w(+ +s(+ +c(.5*(u=.5*(g+d+f)))*+c(.5*(u-g))*+c(.5*(u-d))*+c(.5*(u-f))))}function IA(A,e){return e=0|Qe(0|(A|=0),0|(e|=0),45),M(),127&e|0}function FA(A,e){var r=0,t=0,i=0,n=0,o=0,a=0;if(!(!0&134217728==(-16777216&(e|=0)|0)))return 0|(e=0);if(o=0|Qe(0|(A|=0),0|e,45),M(),(o&=127)>>>0>121)return 0|(e=0);r=0|Qe(0|A,0|e,52),M(),r&=15;do{if(0|r){for(i=1,t=0;;){if(n=0|Qe(0|A,0|e,3*(15-i|0)|0),M(),0!=(0|(n&=7))&(1^t)){if(1==(0|n)&0!=(0|S(o))){a=0,t=13;break}t=1}if(7==(0|n)){a=0,t=13;break}if(!(i>>>0<r>>>0)){t=9;break}i=i+1|0}if(9==(0|t)){if(15!=(0|r))break;return 0|(a=1)}if(13==(0|t))return 0|a}}while(0);for(;;){if(a=0|Qe(0|A,0|e,3*(14-r|0)|0),M(),!(7==(7&a|0)&!0)){a=0,t=13;break}if(!(r>>>0<14)){a=1,t=13;break}r=r+1|0}return 13==(0|t)?0|a:0}function CA(A,e,r){r|=0;var t=0,i=0;if(t=0|Qe(0|(A|=0),0|(e|=0),52),M(),(0|(t&=15))>=(0|r)){if((0|t)!=(0|r))if(r>>>0<=15){if(A|=i=0|ye(0|r,0,52),e=0|M()|-15728641&e,(0|t)>(0|r))do{i=0|ye(7,0,3*(14-r|0)|0),r=r+1|0,A|=i,e=0|M()|e}while((0|r)<(0|t))}else e=0,A=0}else e=0,A=0;return k(0|e),0|A}function PA(A,e,r,t){r|=0,t|=0;var n,o=0,a=0,f=0,s=0,u=0,l=0;if(f=0|Qe(0|(A|=0),0|(e|=0),52),M(),(0|r)<16&(0|(f&=15))<=(0|r)){if((0|f)==(0|r))return i[(r=t)>>2]=A,void(i[r+4>>2]=e);if(n=(0|(u=0|ee(7,r-f|0)))/7|0,s=0|Qe(0|A,0|e,45),M(),0|S(127&s)){A:do{if(f)for(a=1;;){if(o=0|Qe(0|A,0|e,3*(15-a|0)|0),M(),0|(o&=7))break A;if(!(a>>>0<f>>>0)){o=0;break}a=a+1|0}else o=0}while(0);a=0==(0|o)}else a=0;if(l=0|ye(f+1|0,0,52),o=0|M()|-15728641&e,PA(e=(l|A)&~(e=0|ye(7,0,0|(s=3*(14-f|0)|0))),f=o&~(0|M()),r,t),o=t+(n<<3)|0,!a)return PA((l=0|ye(1,0,0|s))|e,0|M()|f,r,o),l=o+(n<<3)|0,PA((u=0|ye(2,0,0|s))|e,0|M()|f,r,l),l=l+(n<<3)|0,PA((u=0|ye(3,0,0|s))|e,0|M()|f,r,l),l=l+(n<<3)|0,PA((u=0|ye(4,0,0|s))|e,0|M()|f,r,l),l=l+(n<<3)|0,PA((u=0|ye(5,0,0|s))|e,0|M()|f,r,l),void PA((u=0|ye(6,0,0|s))|e,0|M()|f,r,l+(n<<3)|0);a=o+(n<<3)|0,(0|u)>6&&(_e(0|o,0,(l=(a>>>0>(u=o+8|0)>>>0?a:u)+-1+(0-o)|0)+8&-8|0),o=u+(l>>>3<<3)|0),PA((l=0|ye(2,0,0|s))|e,0|M()|f,r,o),l=o+(n<<3)|0,PA((u=0|ye(3,0,0|s))|e,0|M()|f,r,l),l=l+(n<<3)|0,PA((u=0|ye(4,0,0|s))|e,0|M()|f,r,l),l=l+(n<<3)|0,PA((u=0|ye(5,0,0|s))|e,0|M()|f,r,l),PA((u=0|ye(6,0,0|s))|e,0|M()|f,r,l+(n<<3)|0)}}function UA(A,e){var r=0,t=0,i=0;if(i=0|Qe(0|(A|=0),0|(e|=0),45),M(),!(0|S(127&i)))return 0|(i=0);i=0|Qe(0|A,0|e,52),M(),i&=15;A:do{if(i)for(t=1;;){if(r=0|Qe(0|A,0|e,3*(15-t|0)|0),M(),0|(r&=7))break A;if(!(t>>>0<i>>>0)){r=0;break}t=t+1|0}else r=0}while(0);return 0|(i=0==(0|r)&1)}function GA(A,e){var r=0,t=0,i=0;if(i=0|Qe(0|(A|=0),0|(e|=0),52),M(),!(i&=15))return 0|(i=0);for(t=1;;){if(r=0|Qe(0|A,0|e,3*(15-t|0)|0),M(),0|(r&=7)){t=5;break}if(!(t>>>0<i>>>0)){r=0,t=5;break}t=t+1|0}return 5==(0|t)?0|r:0}function SA(A,e){var r=0,t=0,i=0,n=0,o=0,a=0,f=0;if(f=0|Qe(0|(A|=0),0|(e|=0),52),M(),!(f&=15))return f=A,k(0|(a=e)),0|f;for(a=1,r=0;;){t=0|ye(7,0,0|(n=3*(15-a|0)|0)),i=0|M(),o=0|Qe(0|A,0|e,0|n),M(),A=(n=0|ye(0|fA(7&o),0,0|n))|A&~t,e=(o=0|M())|e&~i;A:do{if(!r)if(0==(n&t|0)&0==(o&i|0))r=0;else if(t=0|Qe(0|A,0|e,52),M(),t&=15){r=1;e:for(;;){switch(o=0|Qe(0|A,0|e,3*(15-r|0)|0),M(),7&o){case 1:break e;case 0:break;default:r=1;break A}if(!(r>>>0<t>>>0)){r=1;break A}r=r+1|0}for(r=1;;){if(i=0|Qe(0|A,0|e,0|(o=3*(15-r|0)|0)),M(),n=0|ye(7,0,0|o),e&=~(0|M()),A=A&~n|(o=0|ye(0|fA(7&i),0,0|o)),e=0|e|M(),!(r>>>0<t>>>0)){r=1;break}r=r+1|0}}else r=1}while(0);if(!(a>>>0<f>>>0))break;a=a+1|0}return k(0|e),0|A}function TA(A,e){var r=0,t=0,i=0,n=0,o=0;if(t=0|Qe(0|(A|=0),0|(e|=0),52),M(),!(t&=15))return t=A,k(0|(r=e)),0|t;for(r=1;o=0|Qe(0|A,0|e,0|(n=3*(15-r|0)|0)),M(),i=0|ye(7,0,0|n),e&=~(0|M()),A=(n=0|ye(0|fA(7&o),0,0|n))|A&~i,e=0|M()|e,r>>>0<t>>>0;)r=r+1|0;return k(0|e),0|A}function VA(A,e){var r=0,t=0,i=0,n=0,o=0,a=0,f=0;if(f=0|Qe(0|(A|=0),0|(e|=0),52),M(),!(f&=15))return f=A,k(0|(a=e)),0|f;for(a=1,r=0;;){t=0|ye(7,0,0|(n=3*(15-a|0)|0)),i=0|M(),o=0|Qe(0|A,0|e,0|n),M(),A=(n=0|ye(0|sA(7&o),0,0|n))|A&~t,e=(o=0|M())|e&~i;A:do{if(!r)if(0==(n&t|0)&0==(o&i|0))r=0;else if(t=0|Qe(0|A,0|e,52),M(),t&=15){r=1;e:for(;;){switch(o=0|Qe(0|A,0|e,3*(15-r|0)|0),M(),7&o){case 1:break e;case 0:break;default:r=1;break A}if(!(r>>>0<t>>>0)){r=1;break A}r=r+1|0}for(r=1;;){if(n=0|ye(7,0,0|(i=3*(15-r|0)|0)),o=e&~(0|M()),e=0|Qe(0|A,0|e,0|i),M(),A=A&~n|(e=0|ye(0|sA(7&e),0,0|i)),e=0|o|M(),!(r>>>0<t>>>0)){r=1;break}r=r+1|0}}else r=1}while(0);if(!(a>>>0<f>>>0))break;a=a+1|0}return k(0|e),0|A}function HA(A,e){var r=0,t=0,i=0,n=0,o=0;if(t=0|Qe(0|(A|=0),0|(e|=0),52),M(),!(t&=15))return t=A,k(0|(r=e)),0|t;for(r=1;n=0|ye(7,0,0|(o=3*(15-r|0)|0)),i=e&~(0|M()),e=0|Qe(0|A,0|e,0|o),M(),A=(e=0|ye(0|sA(7&e),0,0|o))|A&~n,e=0|M()|i,r>>>0<t>>>0;)r=r+1|0;return k(0|e),0|A}function RA(A){return 0|(0|(A|=0))%2}function LA(A,e){A|=0;var r,t;return t=I,I=I+16|0,r=t,(e|=0)>>>0<=15&&2146435072!=(2146435072&i[A+4>>2]|0)&&2146435072!=(2146435072&i[A+8+4>>2]|0)?(!function(A,e,r){var t,i;t=I,I=I+16|0,pA(A|=0,e|=0,r|=0,i=t),W(i,r+4|0),I=t}(A,e,r),e=0|function(A,e){A|=0;var r,t=0,n=0,o=0,a=0,f=0,s=0,u=0,l=0;if(r=I,I=I+64|0,s=r+40|0,n=r+24|0,o=r+12|0,a=r,ye(0|(e|=0),0,52),t=134225919|M(),!e)return(0|i[A+4>>2])>2||(0|i[A+8>>2])>2||(0|i[A+12>>2])>2?(s=0,k(0|(f=0)),I=r,0|s):(ye(0|V(A),0,45),f=0|M()|t,s=-1,k(0|f),I=r,0|s);if(i[s>>2]=i[A>>2],i[s+4>>2]=i[A+4>>2],i[s+8>>2]=i[A+8>>2],i[s+12>>2]=i[A+12>>2],f=s+4|0,(0|e)>0)for(A=-1;i[n>>2]=i[f>>2],i[n+4>>2]=i[f+4>>2],i[n+8>>2]=i[f+8>>2],1&e?(eA(f),i[o>>2]=i[f>>2],i[o+4>>2]=i[f+4>>2],i[o+8>>2]=i[f+8>>2],tA(o)):(rA(f),i[o>>2]=i[f>>2],i[o+4>>2]=i[f+4>>2],i[o+8>>2]=i[f+8>>2],iA(o)),q(n,o,a),J(a),u=0|ye(7,0,0|(l=3*(15-e|0)|0)),t&=~(0|M()),A=(l=0|ye(0|AA(a),0,0|l))|A&~u,t=0|M()|t,(0|e)>1;)e=e+-1|0;else A=-1;A:do{if((0|i[f>>2])<=2&&(0|i[s+8>>2])<=2&&(0|i[s+12>>2])<=2){if(e=0|ye(0|(n=0|V(s)),0,45),e|=A,A=0|M()|-1040385&t,a=0|H(s),!(0|S(n))){if((0|a)<=0)break;for(o=0;;){if(n=0|Qe(0|e,0|A,52),M(),n&=15)for(t=1;s=0|Qe(0|e,0|A,0|(l=3*(15-t|0)|0)),M(),u=0|ye(7,0,0|l),A&=~(0|M()),e=e&~u|(l=0|ye(0|fA(7&s),0,0|l)),A=0|A|M(),t>>>0<n>>>0;)t=t+1|0;if((0|(o=o+1|0))==(0|a))break A}}o=0|Qe(0|e,0|A,52),M(),o&=15;e:do{if(o){t=1;r:for(;;){switch(l=0|Qe(0|e,0|A,3*(15-t|0)|0),M(),7&l){case 1:break r;case 0:break;default:break e}if(!(t>>>0<o>>>0))break e;t=t+1|0}if(0|R(n,0|i[s>>2]))for(t=1;u=0|ye(7,0,0|(s=3*(15-t|0)|0)),l=A&~(0|M()),A=0|Qe(0|e,0|A,0|s),M(),e=e&~u|(A=0|ye(0|sA(7&A),0,0|s)),A=0|l|M(),t>>>0<o>>>0;)t=t+1|0;else for(t=1;s=0|Qe(0|e,0|A,0|(l=3*(15-t|0)|0)),M(),u=0|ye(7,0,0|l),A&=~(0|M()),e=e&~u|(l=0|ye(0|fA(7&s),0,0|l)),A=0|A|M(),t>>>0<o>>>0;)t=t+1|0}}while(0);if((0|a)>0){t=0;do{e=0|SA(e,A),A=0|M(),t=t+1|0}while((0|t)!=(0|a))}}else e=0,A=0}while(0);return l=e,k(0|(u=A)),I=r,0|l}(r,e),A=0|M()):(A=0,e=0),k(0|A),I=t,0|e}function zA(A,e,r){var t,n=0,o=0,a=0;if(t=(r|=0)+4|0,o=0|Qe(0|(A|=0),0|(e|=0),52),M(),o&=15,a=0|Qe(0|A,0|e,45),M(),n=0==(0|o),0|S(127&a)){if(n)return 0|(a=1);n=1}else{if(n)return 0|(a=0);n=0==(0|i[t>>2])&&0==(0|i[r+8>>2])?0!=(0|i[r+12>>2])&1:1}for(r=1;1&r?tA(t):iA(t),a=0|Qe(0|A,0|e,3*(15-r|0)|0),M(),nA(t,7&a),r>>>0<o>>>0;)r=r+1|0;return 0|n}function YA(A,e,r){r|=0;var t,n,o=0,a=0,f=0,s=0,u=0,l=0;n=I,I=I+16|0,t=n,l=0|Qe(0|(A|=0),0|(e|=0),45),M(),l&=127;A:do{if(0!=(0|S(l))&&(f=0|Qe(0|A,0|e,52),M(),0!=(0|(f&=15)))){o=1;e:for(;;){switch(u=0|Qe(0|A,0|e,3*(15-o|0)|0),M(),7&u){case 5:break e;case 0:break;default:o=e;break A}if(!(o>>>0<f>>>0)){o=e;break A}o=o+1|0}for(a=1,o=e;s=0|ye(7,0,0|(e=3*(15-a|0)|0)),u=o&~(0|M()),o=0|Qe(0|A,0|o,0|e),M(),A=A&~s|(o=0|ye(0|sA(7&o),0,0|e)),o=0|u|M(),a>>>0<f>>>0;)a=a+1|0}else o=e}while(0);if(u=7728+(28*l|0)|0,i[r>>2]=i[u>>2],i[r+4>>2]=i[u+4>>2],i[r+8>>2]=i[u+8>>2],i[r+12>>2]=i[u+12>>2],0|zA(A,o,r)){if(s=r+4|0,i[t>>2]=i[s>>2],i[t+4>>2]=i[s+4>>2],i[t+8>>2]=i[s+8>>2],f=0|Qe(0|A,0|o,52),M(),u=15&f,1&f?(iA(s),f=u+1|0):f=u,0|S(l)){A:do{if(u)for(e=1;;){if(a=0|Qe(0|A,0|o,3*(15-e|0)|0),M(),0|(a&=7)){o=a;break A}if(!(e>>>0<u>>>0)){o=0;break}e=e+1|0}else o=0}while(0);o=4==(0|o)&1}else o=0;if(0|kA(r,f,o,0)){if(0|S(l))do{}while(0!=(0|kA(r,f,0,0)));(0|f)!=(0|u)&&rA(s)}else(0|f)!=(0|u)&&(i[s>>2]=i[t>>2],i[s+4>>2]=i[t+4>>2],i[s+8>>2]=i[t+8>>2]);I=n}else I=n}function OA(A,e,r){r|=0;var t,i;t=I,I=I+16|0,YA(A|=0,e|=0,i=t),e=0|Qe(0|A,0|e,52),M(),bA(i,15&e,r),I=t}function jA(A,e,r){r|=0;var t,i,n=0,o=0;i=I,I=I+16|0,YA(A|=0,e|=0,t=i),n=0|Qe(0|A,0|e,45),M(),n=0==(0|S(127&n)),o=0|Qe(0|A,0|e,52),M(),o&=15;A:do{if(!n){if(0|o)for(n=1;;){if(!(0==((0|ye(7,0,3*(15-n|0)|0))&A|0)&0==((0|M())&e|0)))break A;if(!(n>>>0<o>>>0))break;n=n+1|0}return vA(t,o,0,5,r),void(I=i)}}while(0);QA(t,o,0,6,r),I=i}function NA(A,e){e|=0;var r,t=0,n=0,o=0,a=0,f=0,s=0;if(ye(0|(A|=0),0,52),r=134225919|M(),(0|A)<1){n=0,t=0;do{0|S(n)&&(ye(0|n,0,45),f=0|r|M(),i[(A=e+(t<<3)|0)>>2]=-1,i[A+4>>2]=f,t=t+1|0),n=n+1|0}while(122!=(0|n))}else{f=0,t=0;do{if(0|S(f)){for(ye(0|f,0,45),n=1,o=-1,a=0|r|M();o&=~(s=0|ye(7,0,3*(15-n|0)|0)),a&=~(0|M()),(0|n)!=(0|A);)n=n+1|0;i[(s=e+(t<<3)|0)>>2]=o,i[s+4>>2]=a,t=t+1|0}f=f+1|0}while(122!=(0|f))}}function ZA(A,e,r,t){var n,o=0,a=0,f=0,s=0,u=0;if(n=I,I=I+64|0,f=n,(0|(A|=0))==(0|(r|=0))&(0|(e|=0))==(0|(t|=0))|!1|134217728!=(2013265920&e|0)|!1|134217728!=(2013265920&t|0))return I=n,0|(f=0);if(o=0|Qe(0|A,0|e,52),M(),o&=15,a=0|Qe(0|r,0|t,52),M(),(0|o)!=(15&a|0))return I=n,0|(f=0);if(a=o+-1|0,o>>>0>1&&(u=0|CA(A,e,a),s=0|M(),(0|u)==(0|(a=0|CA(r,t,a)))&(0|s)==(0|M()))){if(o=0|Qe(0|A,0|e,0|(a=3*(15^o)|0)),M(),o&=7,a=0|Qe(0|r,0|t,0|a),M(),0==(0|o)|0==(0|(a&=7)))return I=n,0|(u=1);if((0|i[21136+(o<<2)>>2])==(0|a))return I=n,0|(u=1);if((0|i[21168+(o<<2)>>2])==(0|a))return I=n,0|(u=1)}a=(o=f)+56|0;do{i[o>>2]=0,o=o+4|0}while((0|o)<(0|a));return F(A,e,1,f),o=(0|i[(u=f)>>2])==(0|r)&&(0|i[u+4>>2])==(0|t)||(0|i[(u=f+8|0)>>2])==(0|r)&&(0|i[u+4>>2])==(0|t)||(0|i[(u=f+16|0)>>2])==(0|r)&&(0|i[u+4>>2])==(0|t)||(0|i[(u=f+24|0)>>2])==(0|r)&&(0|i[u+4>>2])==(0|t)||(0|i[(u=f+32|0)>>2])==(0|r)&&(0|i[u+4>>2])==(0|t)||(0|i[(u=f+40|0)>>2])==(0|r)&&(0|i[u+4>>2])==(0|t)?1:1&((0|i[(o=f+48|0)>>2])==(0|r)?(0|i[o+4>>2])==(0|t):0),I=n,0|(u=o)}function WA(A,e,r){r|=0;var t,n,o,a,f=0;if(o=I,I=I+16|0,n=o,f=0|Qe(0|(A|=0),0|(e|=0),56),M(),-1==(0|(e=0|function(A,e,r){r|=0;var t=0,n=0;if(t=0|UA(A=A|0,e=e|0),(r+-1|0)>>>0>5)return 0|(r=-1);if(1==(0|r)&(n=0!=(0|t)))return 0|(r=-1);return t=0|function(A,e){var r=0,t=0,n=0,o=0,a=0,f=0,s=0,u=0;if(u=I,I=I+32|0,o=u,YA(A=A|0,e=e|0,n=u+16|0),a=0|IA(A,e),s=0|GA(A,e),function(A,e){A=7728+(28*(A|=0)|0)|0,i[(e|=0)>>2]=i[A>>2],i[e+4>>2]=i[A+4>>2],i[e+8>>2]=i[A+8>>2],i[e+12>>2]=i[A+12>>2]}(a,o),e=0|function(A,e){A|=0;var r=0,t=0;if((e|=0)>>>0>20)return-1;do{if((0|i[11152+(216*e|0)>>2])!=(0|A))if((0|i[11152+(216*e|0)+8>>2])!=(0|A))if((0|i[11152+(216*e|0)+16>>2])!=(0|A))if((0|i[11152+(216*e|0)+24>>2])!=(0|A))if((0|i[11152+(216*e|0)+32>>2])!=(0|A))if((0|i[11152+(216*e|0)+40>>2])!=(0|A))if((0|i[11152+(216*e|0)+48>>2])!=(0|A))if((0|i[11152+(216*e|0)+56>>2])!=(0|A))if((0|i[11152+(216*e|0)+64>>2])!=(0|A))if((0|i[11152+(216*e|0)+72>>2])!=(0|A))if((0|i[11152+(216*e|0)+80>>2])!=(0|A))if((0|i[11152+(216*e|0)+88>>2])!=(0|A))if((0|i[11152+(216*e|0)+96>>2])!=(0|A))if((0|i[11152+(216*e|0)+104>>2])!=(0|A))if((0|i[11152+(216*e|0)+112>>2])!=(0|A))if((0|i[11152+(216*e|0)+120>>2])!=(0|A))if((0|i[11152+(216*e|0)+128>>2])!=(0|A)){if((0|i[11152+(216*e|0)+136>>2])!=(0|A)){if((0|i[11152+(216*e|0)+144>>2])==(0|A)){A=0,r=2,t=0;break}if((0|i[11152+(216*e|0)+152>>2])==(0|A)){A=0,r=2,t=1;break}if((0|i[11152+(216*e|0)+160>>2])==(0|A)){A=0,r=2,t=2;break}if((0|i[11152+(216*e|0)+168>>2])==(0|A)){A=1,r=2,t=0;break}if((0|i[11152+(216*e|0)+176>>2])==(0|A)){A=1,r=2,t=1;break}if((0|i[11152+(216*e|0)+184>>2])==(0|A)){A=1,r=2,t=2;break}if((0|i[11152+(216*e|0)+192>>2])==(0|A)){A=2,r=2,t=0;break}if((0|i[11152+(216*e|0)+200>>2])==(0|A)){A=2,r=2,t=1;break}if((0|i[11152+(216*e|0)+208>>2])==(0|A)){A=2,r=2,t=2;break}return-1}A=2,r=1,t=2}else A=2,r=1,t=1;else A=2,r=1,t=0;else A=1,r=1,t=2;else A=1,r=1,t=1;else A=1,r=1,t=0;else A=0,r=1,t=2;else A=0,r=1,t=1;else A=0,r=1,t=0;else A=2,r=0,t=2;else A=2,r=0,t=1;else A=2,r=0,t=0;else A=1,r=0,t=2;else A=1,r=0,t=1;else A=1,r=0,t=0;else A=0,r=0,t=2;else A=0,r=0,t=1;else A=0,r=0,t=0}while(0);return 0|i[11152+(216*e|0)+(72*r|0)+(24*A|0)+(t<<3)+4>>2]}(a,0|i[n>>2]),!(0|S(a)))return I=u,0|(s=e);switch(0|a){case 4:A=0,r=14;break;case 14:A=1,r=14;break;case 24:A=2,r=14;break;case 38:A=3,r=14;break;case 49:A=4,r=14;break;case 58:A=5,r=14;break;case 63:A=6,r=14;break;case 72:A=7,r=14;break;case 83:A=8,r=14;break;case 97:A=9,r=14;break;case 107:A=10,r=14;break;case 117:A=11,r=14;break;default:f=0,t=0}14==(0|r)&&(f=0|i[22096+(24*A|0)+8>>2],t=0|i[22096+(24*A|0)+16>>2]);(0|(A=0|i[n>>2]))!=(0|i[o>>2])&&(a=0|T(a))|(0|(A=0|i[n>>2]))==(0|t)&&(e=(e+1|0)%6|0);if(3==(0|s)&(0|A)==(0|t))return I=u,0|(s=(e+5|0)%6|0);if(!(5==(0|s)&(0|A)==(0|f)))return I=u,0|(s=e);return I=u,0|(s=(e+1|0)%6|0)}(A,e),n?0|(r=(5-t+(0|i[22384+(r<<2)>>2])|0)%5|0):0|(r=(6-t+(0|i[22416+(r<<2)>>2])|0)%6|0)}(t=(a=!0&268435456==(2013265920&e|0))?A:0,A=a?-2130706433&e|134217728:0,7&f))))return i[r>>2]=0,void(I=o);YA(t,A,n),f=0|Qe(0|t,0|A,52),M(),f&=15,0|UA(t,A)?vA(n,f,e,2,r):QA(n,f,e,2,r),I=o}function JA(A){A|=0;var e,r,t=0;return(e=0|be(1,12))||Q(22691,22646,49,22704),0|(t=0|i[(r=A+4|0)>>2])?(i[(t=t+8|0)>>2]=e,i[r>>2]=e,0|e):(0|i[A>>2]&&Q(22721,22646,61,22744),i[(t=A)>>2]=e,i[r>>2]=e,0|e)}function KA(A,e){A|=0,e|=0;var r,t;return(t=0|pe(24))||Q(22758,22646,78,22772),i[t>>2]=i[e>>2],i[t+4>>2]=i[e+4>>2],i[t+8>>2]=i[e+8>>2],i[t+12>>2]=i[e+12>>2],i[t+16>>2]=0,0|(r=0|i[(e=A+4|0)>>2])?(i[r+16>>2]=t,i[e>>2]=t,0|t):(0|i[A>>2]&&Q(22787,22646,82,22772),i[A>>2]=t,i[e>>2]=t,0|t)}function XA(A){var e,r,t=0,o=0,a=0,s=0,u=0,l=0,h=0,c=0,d=0,g=0,w=0,p=0,B=0,b=0,v=0,m=0,k=0,M=0,y=0,E=0,x=0,D=0,_=0,I=0,F=0,C=0,P=0,U=0,G=0,S=0;if(0|i[(s=(A|=0)+8|0)>>2])return 0|(S=1);if(!(a=0|i[A>>2]))return 0|(S=0);t=a,o=0;do{o=o+1|0,t=0|i[t+8>>2]}while(0!=(0|t));if(o>>>0<2)return 0|(S=0);(r=0|pe(o<<2))||Q(22807,22646,317,22826),(e=0|pe(o<<5))||Q(22848,22646,321,22826),i[A>>2]=0,i[(D=A+4|0)>>2]=0,i[s>>2]=0,o=0,U=0,x=0,w=0;A:for(;;){if(g=0|i[a>>2]){u=0,l=g;do{if(c=+n[l+8>>3],t=l,l=0|i[l+16>>2],h=+n[(s=(d=0==(0|l))?g:l)+8>>3],+f(+(c-h))>3.141592653589793){S=14;break}u+=(h-c)*(+n[t>>3]+ +n[s>>3])}while(!d);if(14==(0|S)){S=0,u=0,t=g;do{E=+n[t+8>>3],C=0|i[(P=t+16|0)>>2],y=+n[(C=0==(0|C)?g:C)+8>>3],u+=(+n[t>>3]+ +n[C>>3])*((y<0?y+6.283185307179586:y)-(E<0?E+6.283185307179586:E)),t=0|i[(0==(0|t)?a:P)>>2]}while(0!=(0|t))}u>0?(i[r+(U<<2)>>2]=a,U=U+1|0,s=x,t=w):S=19}else S=19;if(19==(0|S)){S=0;do{if(!o){if(w){s=D,l=w+8|0,t=a,o=A;break}if(0|i[A>>2]){S=27;break A}s=D,l=A,t=a,o=A;break}if(0|i[(t=o+8|0)>>2]){S=21;break A}if(!(o=0|be(1,12))){S=23;break A}i[t>>2]=o,s=o+4|0,l=o,t=w}while(0);if(i[l>>2]=a,i[s>>2]=a,l=e+(x<<5)|0,d=0|i[a>>2]){for(n[(g=e+(x<<5)+8|0)>>3]=17976931348623157e292,n[(w=e+(x<<5)+24|0)>>3]=17976931348623157e292,n[l>>3]=-17976931348623157e292,n[(p=e+(x<<5)+16|0)>>3]=-17976931348623157e292,k=17976931348623157e292,M=-17976931348623157e292,s=0,B=d,c=17976931348623157e292,v=17976931348623157e292,m=-17976931348623157e292,h=-17976931348623157e292;u=+n[B>>3],E=+n[B+8>>3],B=0|i[B+16>>2],y=+n[((b=0==(0|B))?d:B)+8>>3],u<c&&(n[g>>3]=u,c=u),E<v&&(n[w>>3]=E,v=E),u>m?n[l>>3]=u:u=m,E>h&&(n[p>>3]=E,h=E),k=E>0&E<k?E:k,M=E<0&E>M?E:M,s|=+f(+(E-y))>3.141592653589793,!b;)m=u;s&&(n[p>>3]=M,n[w>>3]=k)}else i[l>>2]=0,i[l+4>>2]=0,i[l+8>>2]=0,i[l+12>>2]=0,i[l+16>>2]=0,i[l+20>>2]=0,i[l+24>>2]=0,i[l+28>>2]=0;s=x+1|0}if(a=0|i[(P=a+8|0)>>2],i[P>>2]=0,!a){S=45;break}x=s,w=t}if(21==(0|S))Q(22624,22646,35,22658);else if(23==(0|S))Q(22678,22646,37,22658);else if(27==(0|S))Q(22721,22646,61,22744);else if(45==(0|S)){A:do{if((0|U)>0){for(P=0==(0|s),F=s<<2,C=0==(0|A),I=0,t=0;;){if(_=0|i[r+(I<<2)>>2],P)S=73;else{if(!(x=0|pe(F))){S=50;break}if(!(D=0|pe(F))){S=52;break}e:do{if(C)o=0;else{for(s=0,o=0,l=A;a=e+(s<<5)|0,0|qA(0|i[l>>2],a,0|i[_>>2])?(i[x+(o<<2)>>2]=l,i[D+(o<<2)>>2]=a,b=o+1|0):b=o,l=0|i[l+8>>2];)s=s+1|0,o=b;if((0|b)>0)if(a=0|i[x>>2],1==(0|b))o=a;else for(p=0,B=-1,o=a,w=a;;){for(d=0|i[w>>2],a=0,l=0;g=(0|(s=0|i[i[x+(l<<2)>>2]>>2]))==(0|d)?a:a+(1&(0|qA(s,0|i[D+(l<<2)>>2],0|i[d>>2])))|0,(0|(l=l+1|0))!=(0|b);)a=g;if(o=(s=(0|g)>(0|B))?w:o,(0|(a=p+1|0))==(0|b))break e;p=a,B=s?g:B,w=0|i[x+(a<<2)>>2]}else o=0}}while(0);if(Be(x),Be(D),o){if(a=0|i[(s=o+4|0)>>2])o=a+8|0;else if(0|i[o>>2]){S=70;break}i[o>>2]=_,i[s>>2]=_}else S=73}if(73==(0|S)){if(S=0,0|(t=0|i[_>>2]))do{D=t,t=0|i[t+16>>2],Be(D)}while(0!=(0|t));Be(_),t=2}if((0|(I=I+1|0))>=(0|U)){G=t;break A}}50==(0|S)?Q(22863,22646,249,22882):52==(0|S)?Q(22901,22646,252,22882):70==(0|S)&&Q(22721,22646,61,22744)}else G=0}while(0);return Be(r),Be(e),0|(S=G)}return 0}function qA(A,e,r){A|=0;var t,o=0,a=0,f=0,s=0,u=0,l=0,h=0;if(!(0|O(e|=0,r|=0)))return 0|(A=0);if(e=0|Y(e),t=+n[r>>3],o=e&(o=+n[r+8>>3])<0?o+6.283185307179586:o,!(A=0|i[A>>2]))return 0|(A=0);if(e){e=0,r=A;A:for(;;){for(;s=+n[r>>3],l=+n[r+8>>3],h=0|i[(r=r+16|0)>>2],f=+n[(h=0==(0|h)?A:h)>>3],a=+n[h+8>>3],s>f?(u=s,s=l):(u=f,f=s,s=a,a=l),t<f|t>u;)if(!(r=0|i[r>>2])){r=22;break A}if(o=(s=s<0?s+6.283185307179586:s)==o|(l=a<0?a+6.283185307179586:a)==o?o+-2220446049250313e-31:o,((l+=(t-f)/(u-f)*(s-l))<0?l+6.283185307179586:l)>o&&(e^=1),!(r=0|i[r>>2])){r=22;break}}if(22==(0|r))return 0|e}else{e=0,r=A;A:for(;;){for(;s=+n[r>>3],l=+n[r+8>>3],h=0|i[(r=r+16|0)>>2],f=+n[(h=0==(0|h)?A:h)>>3],a=+n[h+8>>3],s>f?(u=s,s=l):(u=f,f=s,s=a,a=l),t<f|t>u;)if(!(r=0|i[r>>2])){r=22;break A}if(a+(t-f)/(u-f)*(s-a)>(o=s==o|a==o?o+-2220446049250313e-31:o)&&(e^=1),!(r=0|i[r>>2])){r=22;break}}if(22==(0|r))return 0|e}return 0}function $A(A,e,r,n,o){r|=0,n|=0,o|=0;var a,f,s,u,l=0,h=0,c=0,d=0,g=0,w=0,p=0,B=0,b=0,v=0;if(u=I,I=I+32|0,v=u+16|0,s=u,l=0|Qe(0|(A|=0),0|(e|=0),52),M(),l&=15,p=0|Qe(0|r,0|n,52),M(),(0|l)!=(15&p|0))return I=u,0|(v=1);if(g=0|Qe(0|A,0|e,45),M(),g&=127,w=0|Qe(0|r,0|n,45),M(),p=(0|g)!=(0|(w&=127))){if(7==(0|(c=0|z(g,w))))return I=u,0|(v=2);7==(0|(d=0|z(w,g)))?Q(22925,22949,151,22959):(B=c,h=d)}else B=0,h=0;a=0|S(g),f=0|S(w),i[v>>2]=0,i[v+4>>2]=0,i[v+8>>2]=0,i[v+12>>2]=0;do{if(B){if(c=(0|(w=0|i[4304+(28*g|0)+(B<<2)>>2]))>0,f)if(c){g=0,d=r,c=n;do{d=0|VA(d,c),c=0|M(),1==(0|(h=0|sA(h)))&&(h=0|sA(1)),g=g+1|0}while((0|g)!=(0|w));w=h,g=d,d=c}else w=h,g=r,d=n;else if(c){g=0,d=r,c=n;do{d=0|HA(d,c),c=0|M(),h=0|sA(h),g=g+1|0}while((0|g)!=(0|w));w=h,g=d,d=c}else w=h,g=r,d=n;if(zA(g,d,v),p||Q(22972,22949,181,22959),(c=0!=(0|a))&(h=0!=(0|f))&&Q(22999,22949,182,22959),c){if(h=0|GA(A,e),0|t[22032+(7*h|0)+B>>0]){l=3;break}g=d=0|i[21200+(28*h|0)+(B<<2)>>2],b=26}else if(h){if(h=0|GA(g,d),0|t[22032+(7*h|0)+w>>0]){l=4;break}g=0,d=0|i[21200+(28*w|0)+(h<<2)>>2],b=26}else h=0;if(26==(0|b))if((0|d)<=-1&&Q(23030,22949,212,22959),(0|g)<=-1&&Q(23053,22949,213,22959),(0|d)>0){c=v+4|0,h=0;do{aA(c),h=h+1|0}while((0|h)!=(0|d));h=g}else h=g;if(i[s>>2]=0,i[s+4>>2]=0,i[s+8>>2]=0,nA(s,B),0|l)for(;0|RA(l)?tA(s):iA(s),(0|l)>1;)l=l+-1|0;if((0|h)>0){l=0;do{aA(s),l=l+1|0}while((0|l)!=(0|h))}X(b=v+4|0,s,b),J(b),b=50}else if(zA(r,n,v),0!=(0|a)&0!=(0|f))if((0|w)!=(0|g)&&Q(23077,22949,243,22959),h=0|GA(A,e),l=0|GA(r,n),0|t[22032+(7*h|0)+l>>0])l=5;else if((0|(h=0|i[21200+(28*h|0)+(l<<2)>>2]))>0){c=v+4|0,l=0;do{aA(c),l=l+1|0}while((0|l)!=(0|h));b=50}else b=50;else b=50}while(0);return 50==(0|b)&&(l=v+4|0,i[o>>2]=i[l>>2],i[o+4>>2]=i[l+4>>2],i[o+8>>2]=i[l+8>>2],l=0),I=u,0|(v=l)}function Ae(A,e,r,t){r|=0,t|=0;var n,o,a=0,f=0,s=0,u=0,l=0,h=0,c=0,d=0,g=0,w=0,p=0,B=0,b=0;if(o=I,I=I+48|0,s=o+36|0,u=o+24|0,l=o+12|0,h=o,f=0|Qe(0|(A|=0),0|(e|=0),52),M(),f&=15,d=0|Qe(0|A,0|e,45),M(),n=0|S(d&=127),ye(0|f,0,52),p=134225919|M(),i[(w=t)>>2]=-1,i[w+4>>2]=p,!f)return(0|i[r>>2])>1||(0|i[r+4>>2])>1||(0|i[r+8>>2])>1||127==(0|(a=0|L(d,0|AA(r))))?(I=o,0|(p=1)):(g=0|ye(0|a,0,45),w=0|M(),w=-1040385&i[(d=t)+4>>2]|w,i[(p=t)>>2]=i[d>>2]|g,i[p+4>>2]=w,I=o,0|(p=0));for(i[s>>2]=i[r>>2],i[s+4>>2]=i[r+4>>2],i[s+8>>2]=i[r+8>>2];i[u>>2]=i[s>>2],i[u+4>>2]=i[s+4>>2],i[u+8>>2]=i[s+8>>2],0|RA(f)?(eA(s),i[l>>2]=i[s>>2],i[l+4>>2]=i[s+4>>2],i[l+8>>2]=i[s+8>>2],tA(l)):(rA(s),i[l>>2]=i[s>>2],i[l+4>>2]=i[s+4>>2],i[l+8>>2]=i[s+8>>2],iA(l)),q(u,l,h),J(h),B=0|i[(w=t)>>2],w=0|i[w+4>>2],r=0|ye(7,0,0|(b=3*(15-f|0)|0)),w&=~(0|M()),b=0|ye(0|AA(h),0,0|b),w=0|M()|w,i[(p=t)>>2]=b|B&~r,i[p+4>>2]=w,(0|f)>1;)f=f+-1|0;A:do{if((0|i[s>>2])<=1&&(0|i[s+4>>2])<=1&&(0|i[s+8>>2])<=1){h=127==(0|(u=0|L(d,f=0|AA(s))))?0:0|S(u);e:do{if(f){if(n){if(s=21408+(28*(0|GA(A,e))|0)+(f<<2)|0,(0|(s=0|i[s>>2]))>0){r=0;do{f=0|fA(f),r=r+1|0}while((0|r)!=(0|s))}if(1==(0|f)){a=3;break A}127==(0|(r=0|L(d,f)))&&Q(23104,22949,376,23134),0|S(r)?Q(23147,22949,377,23134):(g=s,c=f,a=r)}else g=0,c=f,a=u;if((0|(l=0|i[4304+(28*d|0)+(c<<2)>>2]))<=-1&&Q(23178,22949,384,23134),!h){if((0|g)<=-1&&Q(23030,22949,417,23134),0|g){f=0,r=0|i[(s=t)>>2],s=0|i[s+4>>2];do{r=0|TA(r,s),s=0|M(),i[(b=t)>>2]=r,i[b+4>>2]=s,f=f+1|0}while((0|f)<(0|g))}if((0|l)<=0){f=54;break}for(f=0,r=0|i[(s=t)>>2],s=0|i[s+4>>2];;)if(r=0|TA(r,s),s=0|M(),i[(b=t)>>2]=r,i[b+4>>2]=s,(0|(f=f+1|0))==(0|l)){f=54;break e}}if(7==(0|(u=0|z(a,d)))&&Q(22925,22949,393,23134),r=0|i[(f=t)>>2],f=0|i[f+4>>2],(0|l)>0){s=0;do{r=0|TA(r,f),f=0|M(),i[(b=t)>>2]=r,i[b+4>>2]=f,s=s+1|0}while((0|s)!=(0|l))}if(r=0|GA(r,f),b=0|T(a),(0|(r=0|i[(b?21824:21616)+(28*u|0)+(r<<2)>>2]))<=-1&&Q(23030,22949,412,23134),r){f=0,s=0|i[(u=t)>>2],u=0|i[u+4>>2];do{s=0|SA(s,u),u=0|M(),i[(b=t)>>2]=s,i[b+4>>2]=u,f=f+1|0}while((0|f)<(0|r));f=54}else f=54}else if(0!=(0|n)&0!=(0|h))if(f=21408+(28*(b=0|GA(A,e))|0)+((0|GA(0|i[(f=t)>>2],0|i[f+4>>2]))<<2)|0,(0|(f=0|i[f>>2]))<=-1&&Q(23201,22949,433,23134),f){a=0,r=0|i[(s=t)>>2],s=0|i[s+4>>2];do{r=0|TA(r,s),s=0|M(),i[(b=t)>>2]=r,i[b+4>>2]=s,a=a+1|0}while((0|a)<(0|f));a=u,f=54}else a=u,f=55;else a=u,f=54}while(0);if(54==(0|f)&&h&&(f=55),55==(0|f)&&1==(0|GA(0|i[(b=t)>>2],0|i[b+4>>2]))){a=4;break}p=0|i[(b=t)>>2],b=-1040385&i[b+4>>2],B=0|ye(0|a,0,45),b=0|b|M(),i[(a=t)>>2]=p|B,i[a+4>>2]=b,a=0}else a=2}while(0);return I=o,0|(b=a)}function ee(A,e){var r=0;if(!(e|=0))return 0|(r=1);r=A|=0,A=1;do{A=0|b(0==(1&e|0)?1:r,A),e>>=1,r=0|b(r,r)}while(0!=(0|e));return 0|A}function re(A,e,r){A|=0;var t,o,a=0,f=0,s=0,u=0,l=0,h=0,c=0,d=0;if(!(0|O(e|=0,r|=0)))return 0|(d=0);if(e=0|Y(e),o=+n[r>>3],a=e&(a=+n[r+8>>3])<0?a+6.283185307179586:a,(0|(d=0|i[A>>2]))<=0)return 0|(d=0);if(t=0|i[A+4>>2],e){e=0,r=-1,A=0;A:for(;;){for(c=A;u=+n[t+(c<<4)>>3],h=+n[t+(c<<4)+8>>3],s=+n[t+((A=(r+2|0)%(0|d)|0)<<4)>>3],f=+n[t+(A<<4)+8>>3],u>s?(l=u,u=h):(l=s,s=u,u=f,f=h),o<s|o>l;){if(!((0|(r=c+1|0))<(0|d))){r=22;break A}A=c,c=r,r=A}if(a=(u=u<0?u+6.283185307179586:u)==a|(h=f<0?f+6.283185307179586:f)==a?a+-2220446049250313e-31:a,((h+=(o-s)/(l-s)*(u-h))<0?h+6.283185307179586:h)>a&&(e^=1),(0|(A=c+1|0))>=(0|d)){r=22;break}r=c}if(22==(0|r))return 0|e}else{e=0,r=-1,A=0;A:for(;;){for(c=A;u=+n[t+(c<<4)>>3],h=+n[t+(c<<4)+8>>3],s=+n[t+((A=(r+2|0)%(0|d)|0)<<4)>>3],f=+n[t+(A<<4)+8>>3],u>s?(l=u,u=h):(l=s,s=u,u=f,f=h),o<s|o>l;){if(!((0|(r=c+1|0))<(0|d))){r=22;break A}A=c,c=r,r=A}if(f+(o-s)/(l-s)*(u-f)>(a=u==a|f==a?a+-2220446049250313e-31:a)&&(e^=1),(0|(A=c+1|0))>=(0|d)){r=22;break}r=c}if(22==(0|r))return 0|e}return 0}function te(A,e){e|=0;var r,t,o,a,s,u=0,l=0,h=0,c=0,d=0,g=0,w=0,p=0,B=0,b=0,v=0,m=0;if(!(t=0|i[(A|=0)>>2]))return i[e>>2]=0,i[e+4>>2]=0,i[e+8>>2]=0,i[e+12>>2]=0,i[e+16>>2]=0,i[e+20>>2]=0,i[e+24>>2]=0,void(i[e+28>>2]=0);if(n[(o=e+8|0)>>3]=17976931348623157e292,n[(a=e+24|0)>>3]=17976931348623157e292,n[e>>3]=-17976931348623157e292,n[(s=e+16|0)>>3]=-17976931348623157e292,!((0|t)<=0)){for(r=0|i[A+4>>2],p=17976931348623157e292,B=-17976931348623157e292,b=0,A=-1,c=17976931348623157e292,d=17976931348623157e292,w=-17976931348623157e292,l=-17976931348623157e292,v=0;u=+n[r+(v<<4)>>3],g=+n[r+(v<<4)+8>>3],h=+n[r+(((0|(A=A+2|0))==(0|t)?0:A)<<4)+8>>3],u<c&&(n[o>>3]=u,c=u),g<d&&(n[a>>3]=g,d=g),u>w?n[e>>3]=u:u=w,g>l&&(n[s>>3]=g,l=g),p=g>0&g<p?g:p,B=g<0&g>B?g:B,b|=+f(+(g-h))>3.141592653589793,(0|(A=v+1|0))!=(0|t);)m=v,w=u,v=A,A=m;b&&(n[s>>3]=B,n[a>>3]=p)}}function ie(A,e){e|=0;var r,t=0,o=0,a=0,s=0,u=0,l=0,h=0,c=0,d=0,g=0,w=0,p=0,B=0,b=0,v=0,m=0,k=0,M=0,Q=0,y=0,E=0;if(B=0|i[(A|=0)>>2]){if(n[(b=e+8|0)>>3]=17976931348623157e292,n[(v=e+24|0)>>3]=17976931348623157e292,n[e>>3]=-17976931348623157e292,n[(m=e+16|0)>>3]=-17976931348623157e292,(0|B)>0){for(a=0|i[A+4>>2],w=17976931348623157e292,p=-17976931348623157e292,o=0,t=-1,h=17976931348623157e292,c=17976931348623157e292,g=-17976931348623157e292,u=-17976931348623157e292,k=0;s=+n[a+(k<<4)>>3],d=+n[a+(k<<4)+8>>3],l=+n[a+(((0|(y=t+2|0))==(0|B)?0:y)<<4)+8>>3],s<h&&(n[b>>3]=s,h=s),d<c&&(n[v>>3]=d,c=d),s>g?n[e>>3]=s:s=g,d>u&&(n[m>>3]=d,u=d),w=d>0&d<w?d:w,p=d<0&d>p?d:p,o|=+f(+(d-l))>3.141592653589793,(0|(t=k+1|0))!=(0|B);)y=k,g=s,k=t,t=y;o&&(n[m>>3]=p,n[v>>3]=w)}}else i[e>>2]=0,i[e+4>>2]=0,i[e+8>>2]=0,i[e+12>>2]=0,i[e+16>>2]=0,i[e+20>>2]=0,i[e+24>>2]=0,i[e+28>>2]=0;if(!((0|(t=0|i[(y=A+8|0)>>2]))<=0)){r=A+12|0,Q=0;do{if(a=0|i[r>>2],o=Q,v=e+((Q=Q+1|0)<<5)|0,m=0|i[a+(o<<3)>>2]){if(n[(k=e+(Q<<5)+8|0)>>3]=17976931348623157e292,n[(A=e+(Q<<5)+24|0)>>3]=17976931348623157e292,n[v>>3]=-17976931348623157e292,n[(M=e+(Q<<5)+16|0)>>3]=-17976931348623157e292,(0|m)>0){for(B=0|i[a+(o<<3)+4>>2],w=17976931348623157e292,p=-17976931348623157e292,a=0,o=-1,b=0,h=17976931348623157e292,c=17976931348623157e292,d=-17976931348623157e292,u=-17976931348623157e292;s=+n[B+(b<<4)>>3],g=+n[B+(b<<4)+8>>3],l=+n[B+(((0|(o=o+2|0))==(0|m)?0:o)<<4)+8>>3],s<h&&(n[k>>3]=s,h=s),g<c&&(n[A>>3]=g,c=g),s>d?n[v>>3]=s:s=d,g>u&&(n[M>>3]=g,u=g),w=g>0&g<w?g:w,p=g<0&g>p?g:p,a|=+f(+(g-l))>3.141592653589793,(0|(o=b+1|0))!=(0|m);)E=b,b=o,d=s,o=E;a&&(n[M>>3]=p,n[A>>3]=w)}}else i[v>>2]=0,i[v+4>>2]=0,i[v+8>>2]=0,i[v+12>>2]=0,i[v+16>>2]=0,i[v+20>>2]=0,i[v+24>>2]=0,i[v+28>>2]=0,t=0|i[y>>2]}while((0|Q)<(0|t))}}function ne(A,e,r){var t=0,n=0,o=0;if(!(0|re(A|=0,e|=0,r|=0)))return 0|(n=0);if((0|i[(n=A+8|0)>>2])<=0)return 0|(n=1);for(t=A+12|0,A=0;;){if(o=A,A=A+1|0,0|re((0|i[t>>2])+(o<<3)|0,e+(A<<5)|0,r)){A=0,t=6;break}if((0|A)>=(0|i[n>>2])){A=1,t=6;break}}return 6==(0|t)?0|A:0}function oe(A,e,r,t,i){e|=0,r|=0,t|=0,i|=0;var o,a,f,s,u,l,h,c=0;s=+n[(A|=0)>>3],f=+n[e>>3]-s,a=+n[A+8>>3],o=+n[e+8>>3]-a,l=+n[r>>3],c=((c=+n[t>>3]-l)*(a-(h=+n[r+8>>3]))-(s-l)*(u=+n[t+8>>3]-h))/(f*u-o*c),n[i>>3]=s+f*c,n[i+8>>3]=a+o*c}function ae(A,e){return e|=0,+n[(A|=0)>>3]!=+n[e>>3]?0|(e=0):0|(e=+n[A+8>>3]==+n[e+8>>3])}function fe(A,e){e|=0;var r,t,i;return+((i=+n[(A|=0)>>3]-+n[e>>3])*i+(t=+n[A+8>>3]-+n[e+8>>3])*t+(r=+n[A+16>>3]-+n[e+16>>3])*r)}function se(A,e,r){A|=0,r|=0;var t=0;(0|(e|=0))>0?(t=0|be(e,4),i[A>>2]=t,t||Q(23230,23253,40,23267)):i[A>>2]=0,i[A+4>>2]=e,i[A+8>>2]=0,i[A+12>>2]=r}function ue(A){var e,r,t,o=0,a=0,s=0,l=0;e=(A|=0)+4|0,r=A+12|0,t=A+8|0;A:for(;;){for(a=0|i[e>>2],o=0;;){if((0|o)>=(0|a))break A;if(s=0|i[A>>2],l=0|i[s+(o<<2)>>2])break;o=o+1|0}o=s+(~~(+f(+ +u(10,+ +(15-(0|i[r>>2])|0))*(+n[l>>3]+ +n[l+8>>3]))%+(0|a))>>>0<<2)|0,a=0|i[o>>2];e:do{if(0|a){if(s=l+32|0,(0|a)==(0|l))i[o>>2]=i[s>>2];else{if(!(o=0|i[(a=a+32|0)>>2]))break;for(;(0|o)!=(0|l);)if(!(o=0|i[(a=o+32|0)>>2]))break e;i[a>>2]=i[s>>2]}Be(l),i[t>>2]=(0|i[t>>2])-1}}while(0)}Be(0|i[A>>2])}function le(A){var e,r=0,t=0;for(e=0|i[(A|=0)+4>>2],t=0;;){if((0|t)>=(0|e)){r=0,t=4;break}if(r=0|i[(0|i[A>>2])+(t<<2)>>2]){t=4;break}t=t+1|0}return 4==(0|t)?0|r:0}function he(A,e){e|=0;var r=0,t=0,o=0,a=0;if(r=~~(+f(+ +u(10,+ +(15-(0|i[(A|=0)+12>>2])|0))*(+n[e>>3]+ +n[e+8>>3]))%+(0|i[A+4>>2]))>>>0,r=(0|i[A>>2])+(r<<2)|0,!(t=0|i[r>>2]))return 0|(a=1);a=e+32|0;do{if((0|t)!=(0|e)){if(!(r=0|i[t+32>>2]))return 0|(a=1);for(o=r;;){if((0|o)==(0|e)){o=8;break}if(!(r=0|i[o+32>>2])){r=1,o=10;break}t=o,o=r}if(8==(0|o)){i[t+32>>2]=i[a>>2];break}if(10==(0|o))return 0|r}else i[r>>2]=i[a>>2]}while(0);return Be(e),i[(a=A+8|0)>>2]=(0|i[a>>2])-1,0|(a=0)}function ce(A,e,r){A|=0,e|=0,r|=0;var t,o=0,a=0,s=0;(t=0|pe(40))||Q(23283,23253,98,23296),i[t>>2]=i[e>>2],i[t+4>>2]=i[e+4>>2],i[t+8>>2]=i[e+8>>2],i[t+12>>2]=i[e+12>>2],i[(a=t+16|0)>>2]=i[r>>2],i[a+4>>2]=i[r+4>>2],i[a+8>>2]=i[r+8>>2],i[a+12>>2]=i[r+12>>2],i[t+32>>2]=0,a=~~(+f(+ +u(10,+ +(15-(0|i[A+12>>2])|0))*(+n[e>>3]+ +n[e+8>>3]))%+(0|i[A+4>>2]))>>>0,a=(0|i[A>>2])+(a<<2)|0,o=0|i[a>>2];do{if(o){for(;!(0|xA(o,e)&&0|xA(o+16|0,r));)if(a=0|i[o+32>>2],!(0|i[(o=0==(0|a)?o:a)+32>>2])){s=10;break}if(10==(0|s)){i[o+32>>2]=t;break}return Be(t),0|(s=o)}i[a>>2]=t}while(0);return i[(s=A+8|0)>>2]=1+(0|i[s>>2]),0|(s=t)}function de(A,e,r){e|=0,r|=0;var t=0,o=0;if(o=~~(+f(+ +u(10,+ +(15-(0|i[(A|=0)+12>>2])|0))*(+n[e>>3]+ +n[e+8>>3]))%+(0|i[A+4>>2]))>>>0,!(o=0|i[(0|i[A>>2])+(o<<2)>>2]))return 0|(r=0);if(!r){for(A=o;;){if(0|xA(A,e)){t=10;break}if(!(A=0|i[A+32>>2])){A=0,t=10;break}}if(10==(0|t))return 0|A}for(A=o;;){if(0|xA(A,e)&&0|xA(A+16|0,r)){t=10;break}if(!(A=0|i[A+32>>2])){A=0,t=10;break}}return 10==(0|t)?0|A:0}function ge(A,e){e|=0;var r=0;if(r=~~(+f(+ +u(10,+ +(15-(0|i[(A|=0)+12>>2])|0))*(+n[e>>3]+ +n[e+8>>3]))%+(0|i[A+4>>2]))>>>0,!(A=0|i[(0|i[A>>2])+(r<<2)>>2]))return 0|(r=0);for(;;){if(0|xA(A,e)){e=5;break}if(!(A=0|i[A+32>>2])){A=0,e=5;break}}return 5==(0|e)?0|A:0}function we(A){return 0|~~+function(A){return+ +Ie(+(A=+A))}(A=+A)}function pe(A){A|=0;var e,r=0,t=0,n=0,o=0,a=0,f=0,s=0,u=0,l=0,h=0,c=0,d=0,g=0,w=0,p=0,B=0,b=0,v=0,m=0,k=0;e=I,I=I+16|0,d=e;do{if(A>>>0<245){if(A=(l=A>>>0<11?16:A+11&-8)>>>3,3&(t=(c=0|i[5829])>>>A)|0)return n=0|i[(t=(A=23356+((r=(1&t^1)+A|0)<<1<<2)|0)+8|0)>>2],(0|(a=0|i[(o=n+8|0)>>2]))==(0|A)?i[5829]=c&~(1<<r):(i[a+12>>2]=A,i[t>>2]=a),k=r<<3,i[n+4>>2]=3|k,i[(k=n+k+4|0)>>2]=1|i[k>>2],I=e,0|(k=o);if(l>>>0>(h=0|i[5831])>>>0){if(0|t)return r=((r=t<<A&((r=2<<A)|0-r))&0-r)-1|0,a=0|i[(A=(r=23356+((n=((t=(r>>>=s=r>>>12&16)>>>5&8)|s|(a=(r>>>=t)>>>2&4)|(A=(r>>>=a)>>>1&2)|(n=(r>>>=A)>>>1&1))+(r>>>n)|0)<<1<<2)|0)+8|0)>>2],(0|(t=0|i[(s=a+8|0)>>2]))==(0|r)?(A=c&~(1<<n),i[5829]=A):(i[t+12>>2]=r,i[A>>2]=t,A=c),f=(k=n<<3)-l|0,i[a+4>>2]=3|l,i[(o=a+l|0)+4>>2]=1|f,i[a+k>>2]=f,0|h&&(n=0|i[5834],t=23356+((r=h>>>3)<<1<<2)|0,A&(r=1<<r)?r=0|i[(A=t+8|0)>>2]:(i[5829]=A|r,r=t,A=t+8|0),i[A>>2]=n,i[r+12>>2]=n,i[n+8>>2]=r,i[n+12>>2]=t),i[5831]=f,i[5834]=o,I=e,0|(k=s);if(a=0|i[5830]){for(t=(a&0-a)-1|0,t=u=0|i[23620+(((n=(t>>>=o=t>>>12&16)>>>5&8)|o|(f=(t>>>=n)>>>2&4)|(s=(t>>>=f)>>>1&2)|(u=(t>>>=s)>>>1&1))+(t>>>u)<<2)>>2],s=u,u=(-8&i[u+4>>2])-l|0;(A=0|i[t+16>>2])||(A=0|i[t+20>>2]);)t=A,s=(o=(f=(-8&i[A+4>>2])-l|0)>>>0<u>>>0)?A:s,u=o?f:u;if((f=s+l|0)>>>0>s>>>0){o=0|i[s+24>>2],r=0|i[s+12>>2];do{if((0|r)==(0|s)){if(!(r=0|i[(A=s+20|0)>>2])&&!(r=0|i[(A=s+16|0)>>2])){t=0;break}for(;;)if(t=0|i[(n=r+20|0)>>2])r=t,A=n;else{if(!(t=0|i[(n=r+16|0)>>2]))break;r=t,A=n}i[A>>2]=0,t=r}else t=0|i[s+8>>2],i[t+12>>2]=r,i[r+8>>2]=t,t=r}while(0);do{if(0|o){if(r=0|i[s+28>>2],(0|s)==(0|i[(A=23620+(r<<2)|0)>>2])){if(i[A>>2]=t,!t){i[5830]=a&~(1<<r);break}}else if(i[((0|i[(k=o+16|0)>>2])==(0|s)?k:o+20|0)>>2]=t,!t)break;i[t+24>>2]=o,0|(r=0|i[s+16>>2])&&(i[t+16>>2]=r,i[r+24>>2]=t),0|(r=0|i[s+20>>2])&&(i[t+20>>2]=r,i[r+24>>2]=t)}}while(0);return u>>>0<16?(k=u+l|0,i[s+4>>2]=3|k,i[(k=s+k+4|0)>>2]=1|i[k>>2]):(i[s+4>>2]=3|l,i[f+4>>2]=1|u,i[f+u>>2]=u,0|h&&(n=0|i[5834],t=23356+((r=h>>>3)<<1<<2)|0,(r=1<<r)&c?r=0|i[(A=t+8|0)>>2]:(i[5829]=r|c,r=t,A=t+8|0),i[A>>2]=n,i[r+12>>2]=n,i[n+8>>2]=r,i[n+12>>2]=t),i[5831]=u,i[5834]=f),I=e,0|(k=s+8|0)}c=l}else c=l}else c=l}else if(A>>>0<=4294967231)if(l=-8&(A=A+11|0),n=0|i[5830]){o=0-l|0,u=(A>>>=8)?l>>>0>16777215?31:l>>>((u=14-((s=((p=A<<(c=(A+1048320|0)>>>16&8))+520192|0)>>>16&4)|c|(u=((p<<=s)+245760|0)>>>16&2))+(p<<u>>>15)|0)+7|0)&1|u<<1:0,t=0|i[23620+(u<<2)>>2];A:do{if(t)for(A=0,s=l<<(31==(0|u)?0:25-(u>>>1)|0),a=0;;){if((f=(-8&i[t+4>>2])-l|0)>>>0<o>>>0){if(!f){A=t,o=0,p=65;break A}A=t,o=f}if(a=0==(0|(p=0|i[t+20>>2]))|(0|p)==(0|(t=0|i[t+16+(s>>>31<<2)>>2]))?a:p,!t){t=a,p=61;break}s<<=1}else t=0,A=0,p=61}while(0);if(61==(0|p)){if(0==(0|t)&0==(0|A)){if(!(A=((A=2<<u)|0-A)&n)){c=l;break}c=(A&0-A)-1|0,A=0,t=0|i[23620+(((a=(c>>>=f=c>>>12&16)>>>5&8)|f|(s=(c>>>=a)>>>2&4)|(u=(c>>>=s)>>>1&2)|(t=(c>>>=u)>>>1&1))+(c>>>t)<<2)>>2]}t?p=65:(s=A,f=o)}if(65==(0|p))for(a=t;;){if(o=(t=(c=(-8&i[a+4>>2])-l|0)>>>0<o>>>0)?c:o,A=t?a:A,(t=0|i[a+16>>2])||(t=0|i[a+20>>2]),!t){s=A,f=o;break}a=t}if(0!=(0|s)&&f>>>0<((0|i[5831])-l|0)>>>0&&(h=s+l|0)>>>0>s>>>0){a=0|i[s+24>>2],r=0|i[s+12>>2];do{if((0|r)==(0|s)){if(!(r=0|i[(A=s+20|0)>>2])&&!(r=0|i[(A=s+16|0)>>2])){r=0;break}for(;;)if(t=0|i[(o=r+20|0)>>2])r=t,A=o;else{if(!(t=0|i[(o=r+16|0)>>2]))break;r=t,A=o}i[A>>2]=0}else k=0|i[s+8>>2],i[k+12>>2]=r,i[r+8>>2]=k}while(0);do{if(a){if(A=0|i[s+28>>2],(0|s)==(0|i[(t=23620+(A<<2)|0)>>2])){if(i[t>>2]=r,!r){n&=~(1<<A),i[5830]=n;break}}else if(i[((0|i[(k=a+16|0)>>2])==(0|s)?k:a+20|0)>>2]=r,!r)break;i[r+24>>2]=a,0|(A=0|i[s+16>>2])&&(i[r+16>>2]=A,i[A+24>>2]=r),(A=0|i[s+20>>2])&&(i[r+20>>2]=A,i[A+24>>2]=r)}}while(0);A:do{if(f>>>0<16)k=f+l|0,i[s+4>>2]=3|k,i[(k=s+k+4|0)>>2]=1|i[k>>2];else{if(i[s+4>>2]=3|l,i[h+4>>2]=1|f,i[h+f>>2]=f,r=f>>>3,f>>>0<256){t=23356+(r<<1<<2)|0,(A=0|i[5829])&(r=1<<r)?r=0|i[(A=t+8|0)>>2]:(i[5829]=A|r,r=t,A=t+8|0),i[A>>2]=h,i[r+12>>2]=h,i[h+8>>2]=r,i[h+12>>2]=t;break}if(r=23620+((t=(r=f>>>8)?f>>>0>16777215?31:f>>>((t=14-((v=((k=r<<(m=(r+1048320|0)>>>16&8))+520192|0)>>>16&4)|m|(t=((k<<=v)+245760|0)>>>16&2))+(k<<t>>>15)|0)+7|0)&1|t<<1:0)<<2)|0,i[h+28>>2]=t,i[(A=h+16|0)+4>>2]=0,i[A>>2]=0,!(n&(A=1<<t))){i[5830]=n|A,i[r>>2]=h,i[h+24>>2]=r,i[h+12>>2]=h,i[h+8>>2]=h;break}r=0|i[r>>2];e:do{if((-8&i[r+4>>2]|0)!=(0|f)){for(n=f<<(31==(0|t)?0:25-(t>>>1)|0);A=0|i[(t=r+16+(n>>>31<<2)|0)>>2];){if((-8&i[A+4>>2]|0)==(0|f)){r=A;break e}n<<=1,r=A}i[t>>2]=h,i[h+24>>2]=r,i[h+12>>2]=h,i[h+8>>2]=h;break A}}while(0);k=0|i[(m=r+8|0)>>2],i[k+12>>2]=h,i[m>>2]=h,i[h+8>>2]=k,i[h+12>>2]=r,i[h+24>>2]=0}}while(0);return I=e,0|(k=s+8|0)}c=l}else c=l;else c=-1}while(0);if((t=0|i[5831])>>>0>=c>>>0)return r=t-c|0,A=0|i[5834],r>>>0>15?(k=A+c|0,i[5834]=k,i[5831]=r,i[k+4>>2]=1|r,i[A+t>>2]=r,i[A+4>>2]=3|c):(i[5831]=0,i[5834]=0,i[A+4>>2]=3|t,i[(k=A+t+4|0)>>2]=1|i[k>>2]),I=e,0|(k=A+8|0);if((f=0|i[5832])>>>0>c>>>0)return v=f-c|0,i[5832]=v,m=(k=0|i[5835])+c|0,i[5835]=m,i[m+4>>2]=1|v,i[k+4>>2]=3|c,I=e,0|(k=k+8|0);if(0|i[5947]?A=0|i[5949]:(i[5949]=4096,i[5948]=4096,i[5950]=-1,i[5951]=-1,i[5952]=0,i[5940]=0,i[5947]=-16&d^1431655768,A=4096),s=c+48|0,(l=(a=A+(u=c+47|0)|0)&(o=0-A|0))>>>0<=c>>>0)return I=e,0|(k=0);if(0|(A=0|i[5939])&&(d=(h=0|i[5937])+l|0)>>>0<=h>>>0|d>>>0>A>>>0)return I=e,0|(k=0);A:do{if(4&i[5940])r=0,p=143;else{t=0|i[5835];e:do{if(t){for(n=23764;!((d=0|i[n>>2])>>>0<=t>>>0&&(d+(0|i[n+4>>2])|0)>>>0>t>>>0);){if(!(A=0|i[n+8>>2])){p=128;break e}n=A}if((r=a-f&o)>>>0<2147483647)if((0|(A=0|Fe(0|r)))==((0|i[n>>2])+(0|i[n+4>>2])|0)){if(-1!=(0|A)){f=r,a=A,p=145;break A}}else n=A,p=136;else r=0}else p=128}while(0);do{if(128==(0|p))if(-1!=(0|(t=0|Fe(0)))&&(r=t,w=(r=(0==((w=(g=0|i[5948])+-1|0)&r|0)?0:(w+r&0-g)-r|0)+l|0)+(g=0|i[5937])|0,r>>>0>c>>>0&r>>>0<2147483647)){if(0|(d=0|i[5939])&&w>>>0<=g>>>0|w>>>0>d>>>0){r=0;break}if((0|(A=0|Fe(0|r)))==(0|t)){f=r,a=t,p=145;break A}n=A,p=136}else r=0}while(0);do{if(136==(0|p)){if(t=0-r|0,!(s>>>0>r>>>0&r>>>0<2147483647&-1!=(0|n))){if(-1==(0|n)){r=0;break}f=r,a=n,p=145;break A}if((A=u-r+(A=0|i[5949])&0-A)>>>0>=2147483647){f=r,a=n,p=145;break A}if(-1==(0|Fe(0|A))){Fe(0|t),r=0;break}f=A+r|0,a=n,p=145;break A}}while(0);i[5940]=4|i[5940],p=143}}while(0);if(143==(0|p)&&l>>>0<2147483647&&!(-1==(0|(v=0|Fe(0|l)))|1^(b=(B=(w=0|Fe(0))-v|0)>>>0>(c+40|0)>>>0)|v>>>0<w>>>0&-1!=(0|v)&-1!=(0|w)^1)&&(f=b?B:r,a=v,p=145),145==(0|p)){r=(0|i[5937])+f|0,i[5937]=r,r>>>0>(0|i[5938])>>>0&&(i[5938]=r),u=0|i[5835];A:do{if(u){for(r=23764;;){if((0|a)==((A=0|i[r>>2])+(t=0|i[r+4>>2])|0)){p=154;break}if(!(n=0|i[r+8>>2]))break;r=n}if(154==(0|p)&&(m=r+4|0,0==(8&i[r+12>>2]|0))&&a>>>0>u>>>0&A>>>0<=u>>>0){i[m>>2]=t+f,m=u+(v=0==(7&(v=u+8|0)|0)?0:0-v&7)|0,v=(k=(0|i[5832])+f|0)-v|0,i[5835]=m,i[5832]=v,i[m+4>>2]=1|v,i[u+k+4>>2]=40,i[5836]=i[5951];break}for(a>>>0<(0|i[5833])>>>0&&(i[5833]=a),t=a+f|0,r=23764;;){if((0|i[r>>2])==(0|t)){p=162;break}if(!(A=0|i[r+8>>2]))break;r=A}if(162==(0|p)&&0==(8&i[r+12>>2]|0)){i[r>>2]=a,i[(h=r+4|0)>>2]=(0|i[h>>2])+f,l=(h=a+(0==(7&(h=a+8|0)|0)?0:0-h&7)|0)+c|0,s=(r=t+(0==(7&(r=t+8|0)|0)?0:0-r&7)|0)-h-c|0,i[h+4>>2]=3|c;e:do{if((0|u)==(0|r))k=(0|i[5832])+s|0,i[5832]=k,i[5835]=l,i[l+4>>2]=1|k;else{if((0|i[5834])==(0|r)){k=(0|i[5831])+s|0,i[5831]=k,i[5834]=l,i[l+4>>2]=1|k,i[l+k>>2]=k;break}if(1==(3&(A=0|i[r+4>>2])|0)){f=-8&A,n=A>>>3;r:do{if(A>>>0<256){if(A=0|i[r+8>>2],(0|(t=0|i[r+12>>2]))==(0|A)){i[5829]=i[5829]&~(1<<n);break}i[A+12>>2]=t,i[t+8>>2]=A;break}a=0|i[r+24>>2],A=0|i[r+12>>2];do{if((0|A)==(0|r)){if(A=0|i[(n=(t=r+16|0)+4|0)>>2])t=n;else if(!(A=0|i[t>>2])){A=0;break}for(;;)if(n=0|i[(o=A+20|0)>>2])A=n,t=o;else{if(!(n=0|i[(o=A+16|0)>>2]))break;A=n,t=o}i[t>>2]=0}else k=0|i[r+8>>2],i[k+12>>2]=A,i[A+8>>2]=k}while(0);if(!a)break;n=23620+((t=0|i[r+28>>2])<<2)|0;do{if((0|i[n>>2])==(0|r)){if(i[n>>2]=A,0|A)break;i[5830]=i[5830]&~(1<<t);break r}if(i[((0|i[(k=a+16|0)>>2])==(0|r)?k:a+20|0)>>2]=A,!A)break r}while(0);if(i[A+24>>2]=a,0|(n=0|i[(t=r+16|0)>>2])&&(i[A+16>>2]=n,i[n+24>>2]=A),!(t=0|i[t+4>>2]))break;i[A+20>>2]=t,i[t+24>>2]=A}while(0);r=r+f|0,o=f+s|0}else o=s;if(i[(r=r+4|0)>>2]=-2&i[r>>2],i[l+4>>2]=1|o,i[l+o>>2]=o,r=o>>>3,o>>>0<256){t=23356+(r<<1<<2)|0,(A=0|i[5829])&(r=1<<r)?r=0|i[(A=t+8|0)>>2]:(i[5829]=A|r,r=t,A=t+8|0),i[A>>2]=l,i[r+12>>2]=l,i[l+8>>2]=r,i[l+12>>2]=t;break}r=o>>>8;do{if(r){if(o>>>0>16777215){n=31;break}n=o>>>((n=14-((v=((k=r<<(m=(r+1048320|0)>>>16&8))+520192|0)>>>16&4)|m|(n=((k<<=v)+245760|0)>>>16&2))+(k<<n>>>15)|0)+7|0)&1|n<<1}else n=0}while(0);if(r=23620+(n<<2)|0,i[l+28>>2]=n,i[(A=l+16|0)+4>>2]=0,i[A>>2]=0,!((A=0|i[5830])&(t=1<<n))){i[5830]=A|t,i[r>>2]=l,i[l+24>>2]=r,i[l+12>>2]=l,i[l+8>>2]=l;break}r=0|i[r>>2];r:do{if((-8&i[r+4>>2]|0)!=(0|o)){for(n=o<<(31==(0|n)?0:25-(n>>>1)|0);A=0|i[(t=r+16+(n>>>31<<2)|0)>>2];){if((-8&i[A+4>>2]|0)==(0|o)){r=A;break r}n<<=1,r=A}i[t>>2]=l,i[l+24>>2]=r,i[l+12>>2]=l,i[l+8>>2]=l;break e}}while(0);k=0|i[(m=r+8|0)>>2],i[k+12>>2]=l,i[m>>2]=l,i[l+8>>2]=k,i[l+12>>2]=r,i[l+24>>2]=0}}while(0);return I=e,0|(k=h+8|0)}for(r=23764;!((A=0|i[r>>2])>>>0<=u>>>0&&(k=A+(0|i[r+4>>2])|0)>>>0>u>>>0);)r=0|i[r+8>>2];r=(A=(A=(o=k+-47|0)+(0==(7&(A=o+8|0)|0)?0:0-A&7)|0)>>>0<(o=u+16|0)>>>0?u:A)+8|0,m=a+(v=0==(7&(v=a+8|0)|0)?0:0-v&7)|0,v=(t=f+-40|0)-v|0,i[5835]=m,i[5832]=v,i[m+4>>2]=1|v,i[a+t+4>>2]=40,i[5836]=i[5951],i[(t=A+4|0)>>2]=27,i[r>>2]=i[5941],i[r+4>>2]=i[5942],i[r+8>>2]=i[5943],i[r+12>>2]=i[5944],i[5941]=a,i[5942]=f,i[5944]=0,i[5943]=r,r=A+24|0;do{m=r,i[(r=r+4|0)>>2]=7}while((m+8|0)>>>0<k>>>0);if((0|A)!=(0|u)){if(a=A-u|0,i[t>>2]=-2&i[t>>2],i[u+4>>2]=1|a,i[A>>2]=a,r=a>>>3,a>>>0<256){t=23356+(r<<1<<2)|0,(A=0|i[5829])&(r=1<<r)?r=0|i[(A=t+8|0)>>2]:(i[5829]=A|r,r=t,A=t+8|0),i[A>>2]=u,i[r+12>>2]=u,i[u+8>>2]=r,i[u+12>>2]=t;break}if(t=23620+((n=(r=a>>>8)?a>>>0>16777215?31:a>>>((n=14-((v=((k=r<<(m=(r+1048320|0)>>>16&8))+520192|0)>>>16&4)|m|(n=((k<<=v)+245760|0)>>>16&2))+(k<<n>>>15)|0)+7|0)&1|n<<1:0)<<2)|0,i[u+28>>2]=n,i[u+20>>2]=0,i[o>>2]=0,!((r=0|i[5830])&(A=1<<n))){i[5830]=r|A,i[t>>2]=u,i[u+24>>2]=t,i[u+12>>2]=u,i[u+8>>2]=u;break}r=0|i[t>>2];e:do{if((-8&i[r+4>>2]|0)!=(0|a)){for(n=a<<(31==(0|n)?0:25-(n>>>1)|0);A=0|i[(t=r+16+(n>>>31<<2)|0)>>2];){if((-8&i[A+4>>2]|0)==(0|a)){r=A;break e}n<<=1,r=A}i[t>>2]=u,i[u+24>>2]=r,i[u+12>>2]=u,i[u+8>>2]=u;break A}}while(0);k=0|i[(m=r+8|0)>>2],i[k+12>>2]=u,i[m>>2]=u,i[u+8>>2]=k,i[u+12>>2]=r,i[u+24>>2]=0}}else 0==(0|(k=0|i[5833]))|a>>>0<k>>>0&&(i[5833]=a),i[5941]=a,i[5942]=f,i[5944]=0,i[5838]=i[5947],i[5837]=-1,i[5842]=23356,i[5841]=23356,i[5844]=23364,i[5843]=23364,i[5846]=23372,i[5845]=23372,i[5848]=23380,i[5847]=23380,i[5850]=23388,i[5849]=23388,i[5852]=23396,i[5851]=23396,i[5854]=23404,i[5853]=23404,i[5856]=23412,i[5855]=23412,i[5858]=23420,i[5857]=23420,i[5860]=23428,i[5859]=23428,i[5862]=23436,i[5861]=23436,i[5864]=23444,i[5863]=23444,i[5866]=23452,i[5865]=23452,i[5868]=23460,i[5867]=23460,i[5870]=23468,i[5869]=23468,i[5872]=23476,i[5871]=23476,i[5874]=23484,i[5873]=23484,i[5876]=23492,i[5875]=23492,i[5878]=23500,i[5877]=23500,i[5880]=23508,i[5879]=23508,i[5882]=23516,i[5881]=23516,i[5884]=23524,i[5883]=23524,i[5886]=23532,i[5885]=23532,i[5888]=23540,i[5887]=23540,i[5890]=23548,i[5889]=23548,i[5892]=23556,i[5891]=23556,i[5894]=23564,i[5893]=23564,i[5896]=23572,i[5895]=23572,i[5898]=23580,i[5897]=23580,i[5900]=23588,i[5899]=23588,i[5902]=23596,i[5901]=23596,i[5904]=23604,i[5903]=23604,m=a+(v=0==(7&(v=a+8|0)|0)?0:0-v&7)|0,v=(k=f+-40|0)-v|0,i[5835]=m,i[5832]=v,i[m+4>>2]=1|v,i[a+k+4>>2]=40,i[5836]=i[5951]}while(0);if((r=0|i[5832])>>>0>c>>>0)return v=r-c|0,i[5832]=v,m=(k=0|i[5835])+c|0,i[5835]=m,i[m+4>>2]=1|v,i[k+4>>2]=3|c,I=e,0|(k=k+8|0)}return i[(k=23312)>>2]=12,I=e,0|(k=0)}function Be(A){var e=0,r=0,t=0,n=0,o=0,a=0,f=0,s=0;if(A|=0){r=A+-8|0,n=0|i[5833],s=r+(e=-8&(A=0|i[A+-4>>2]))|0;do{if(1&A)f=r,a=r;else{if(t=0|i[r>>2],!(3&A))return;if(o=t+e|0,(a=r+(0-t)|0)>>>0<n>>>0)return;if((0|i[5834])==(0|a)){if(3!=(3&(e=0|i[(A=s+4|0)>>2])|0)){f=a,e=o;break}return i[5831]=o,i[A>>2]=-2&e,i[a+4>>2]=1|o,void(i[a+o>>2]=o)}if(r=t>>>3,t>>>0<256){if(A=0|i[a+8>>2],(0|(e=0|i[a+12>>2]))==(0|A)){i[5829]=i[5829]&~(1<<r),f=a,e=o;break}i[A+12>>2]=e,i[e+8>>2]=A,f=a,e=o;break}n=0|i[a+24>>2],A=0|i[a+12>>2];do{if((0|A)==(0|a)){if(A=0|i[(r=(e=a+16|0)+4|0)>>2])e=r;else if(!(A=0|i[e>>2])){A=0;break}for(;;)if(r=0|i[(t=A+20|0)>>2])A=r,e=t;else{if(!(r=0|i[(t=A+16|0)>>2]))break;A=r,e=t}i[e>>2]=0}else f=0|i[a+8>>2],i[f+12>>2]=A,i[A+8>>2]=f}while(0);if(n){if(e=0|i[a+28>>2],(0|i[(r=23620+(e<<2)|0)>>2])==(0|a)){if(i[r>>2]=A,!A){i[5830]=i[5830]&~(1<<e),f=a,e=o;break}}else if(i[((0|i[(f=n+16|0)>>2])==(0|a)?f:n+20|0)>>2]=A,!A){f=a,e=o;break}i[A+24>>2]=n,0|(r=0|i[(e=a+16|0)>>2])&&(i[A+16>>2]=r,i[r+24>>2]=A),(e=0|i[e+4>>2])?(i[A+20>>2]=e,i[e+24>>2]=A,f=a,e=o):(f=a,e=o)}else f=a,e=o}}while(0);if(!(a>>>0>=s>>>0)&&1&(t=0|i[(A=s+4|0)>>2])){if(2&t)i[A>>2]=-2&t,i[f+4>>2]=1|e,i[a+e>>2]=e,n=e;else{if((0|i[5835])==(0|s)){if(s=(0|i[5832])+e|0,i[5832]=s,i[5835]=f,i[f+4>>2]=1|s,(0|f)!=(0|i[5834]))return;return i[5834]=0,void(i[5831]=0)}if((0|i[5834])==(0|s))return s=(0|i[5831])+e|0,i[5831]=s,i[5834]=a,i[f+4>>2]=1|s,void(i[a+s>>2]=s);n=(-8&t)+e|0,r=t>>>3;do{if(t>>>0<256){if(e=0|i[s+8>>2],(0|(A=0|i[s+12>>2]))==(0|e)){i[5829]=i[5829]&~(1<<r);break}i[e+12>>2]=A,i[A+8>>2]=e;break}o=0|i[s+24>>2],A=0|i[s+12>>2];do{if((0|A)==(0|s)){if(A=0|i[(r=(e=s+16|0)+4|0)>>2])e=r;else if(!(A=0|i[e>>2])){r=0;break}for(;;)if(r=0|i[(t=A+20|0)>>2])A=r,e=t;else{if(!(r=0|i[(t=A+16|0)>>2]))break;A=r,e=t}i[e>>2]=0,r=A}else r=0|i[s+8>>2],i[r+12>>2]=A,i[A+8>>2]=r,r=A}while(0);if(0|o){if(A=0|i[s+28>>2],(0|i[(e=23620+(A<<2)|0)>>2])==(0|s)){if(i[e>>2]=r,!r){i[5830]=i[5830]&~(1<<A);break}}else if(i[((0|i[(t=o+16|0)>>2])==(0|s)?t:o+20|0)>>2]=r,!r)break;i[r+24>>2]=o,0|(e=0|i[(A=s+16|0)>>2])&&(i[r+16>>2]=e,i[e+24>>2]=r),0|(A=0|i[A+4>>2])&&(i[r+20>>2]=A,i[A+24>>2]=r)}}while(0);if(i[f+4>>2]=1|n,i[a+n>>2]=n,(0|f)==(0|i[5834]))return void(i[5831]=n)}if(A=n>>>3,n>>>0<256)return r=23356+(A<<1<<2)|0,(e=0|i[5829])&(A=1<<A)?A=0|i[(e=r+8|0)>>2]:(i[5829]=e|A,A=r,e=r+8|0),i[e>>2]=f,i[A+12>>2]=f,i[f+8>>2]=A,void(i[f+12>>2]=r);A=23620+((t=(A=n>>>8)?n>>>0>16777215?31:n>>>((t=14-((o=((s=A<<(a=(A+1048320|0)>>>16&8))+520192|0)>>>16&4)|a|(t=((s<<=o)+245760|0)>>>16&2))+(s<<t>>>15)|0)+7|0)&1|t<<1:0)<<2)|0,i[f+28>>2]=t,i[f+20>>2]=0,i[f+16>>2]=0,e=0|i[5830],r=1<<t;A:do{if(e&r){A=0|i[A>>2];e:do{if((-8&i[A+4>>2]|0)!=(0|n)){for(t=n<<(31==(0|t)?0:25-(t>>>1)|0);e=0|i[(r=A+16+(t>>>31<<2)|0)>>2];){if((-8&i[e+4>>2]|0)==(0|n)){A=e;break e}t<<=1,A=e}i[r>>2]=f,i[f+24>>2]=A,i[f+12>>2]=f,i[f+8>>2]=f;break A}}while(0);s=0|i[(a=A+8|0)>>2],i[s+12>>2]=f,i[a>>2]=f,i[f+8>>2]=s,i[f+12>>2]=A,i[f+24>>2]=0}else i[5830]=e|r,i[A>>2]=f,i[f+24>>2]=A,i[f+12>>2]=f,i[f+8>>2]=f}while(0);if(s=(0|i[5837])-1|0,i[5837]=s,!(0|s)){for(A=23772;A=0|i[A>>2];)A=A+8|0;i[5837]=-1}}}}function be(A,e){e|=0;var r=0;return(A|=0)?(r=0|b(e,A),(e|A)>>>0>65535&&(r=(0|(r>>>0)/(A>>>0))==(0|e)?r:-1)):r=0,(A=0|pe(r))&&3&i[A+-4>>2]?(_e(0|A,0,0|r),0|A):0|A}function ve(A,e,r,t){return 0|(k(0|(t=(e|=0)-(t|=0)-((r|=0)>>>0>(A|=0)>>>0|0)>>>0)),A-r>>>0|0)}function me(A){return 0|((A|=0)?31-(0|m(A^A-1))|0:32)}function ke(A,e,r,t,n){n|=0;var o=0,a=0,f=0,s=0,u=0,l=0,h=0,c=0,d=0,g=0;if(l=A|=0,a=r|=0,f=c=t|=0,!(u=s=e|=0))return o=0!=(0|n),f?o?(i[n>>2]=0|A,i[n+4>>2]=0&e,n=0,0|(k(0|(c=0)),n)):(n=0,0|(k(0|(c=0)),n)):(o&&(i[n>>2]=(l>>>0)%(a>>>0),i[n+4>>2]=0),n=(l>>>0)/(a>>>0)>>>0,0|(k(0|(c=0)),n));o=0==(0|f);do{if(a){if(!o){if((o=(0|m(0|f))-(0|m(0|u))|0)>>>0<=31){a=h=o+1|0,A=l>>>(h>>>0)&(e=o-31>>31)|u<<(f=31-o|0),e&=u>>>(h>>>0),o=0,f=l<<f;break}return n?(i[n>>2]=0|A,i[n+4>>2]=s|0&e,n=0,0|(k(0|(c=0)),n)):(n=0,0|(k(0|(c=0)),n))}if((o=a-1|0)&a|0){a=f=33+(0|m(0|a))-(0|m(0|u))|0,A=(h=32-f|0)-1>>31&u>>>((d=f-32|0)>>>0)|(u<<h|l>>>(f>>>0))&(e=d>>31),e&=u>>>(f>>>0),o=l<<(g=64-f|0)&(s=h>>31),f=(u<<g|l>>>(d>>>0))&s|l<<h&f-33>>31;break}return 0|n&&(i[n>>2]=o&l,i[n+4>>2]=0),1==(0|a)?(g=0|A,0|(k(0|(d=s|0&e)),g)):(d=u>>>((g=0|me(0|a))>>>0)|0,g=u<<32-g|l>>>(g>>>0)|0,0|(k(0|d),g))}if(o)return 0|n&&(i[n>>2]=(u>>>0)%(a>>>0),i[n+4>>2]=0),g=(u>>>0)/(a>>>0)>>>0,0|(k(0|(d=0)),g);if(!l)return 0|n&&(i[n>>2]=0,i[n+4>>2]=(u>>>0)%(f>>>0)),g=(u>>>0)/(f>>>0)>>>0,0|(k(0|(d=0)),g);if(!((o=f-1|0)&f))return 0|n&&(i[n>>2]=0|A,i[n+4>>2]=o&u|0&e),d=0,g=u>>>((0|me(0|f))>>>0),0|(k(0|d),g);if((o=(0|m(0|f))-(0|m(0|u))|0)>>>0<=30){a=e=o+1|0,A=u<<(f=31-o|0)|l>>>(e>>>0),e=u>>>(e>>>0),o=0,f=l<<f;break}return n?(i[n>>2]=0|A,i[n+4>>2]=s|0&e,g=0,0|(k(0|(d=0)),g)):(g=0,0|(k(0|(d=0)),g))}while(0);if(a){u=0|function(A,e,r,t){return 0|(k((e|=0)+(t|=0)+((r=(A|=0)+(r|=0)>>>0)>>>0<A>>>0|0)>>>0|0),0|r)}(0|(h=0|r),0|(l=c|0&t),-1,-1),r=0|M(),s=f,f=0;do{t=s,s=o>>>31|s<<1,o=f|o<<1,ve(0|u,0|r,0|(t=A<<1|t>>>31|0),0|(c=A>>>31|e<<1|0)),f=1&(d=(g=0|M())>>31|((0|g)<0?-1:0)<<1),A=0|ve(0|t,0|c,d&h|0,(((0|g)<0?-1:0)>>31|((0|g)<0?-1:0)<<1)&l|0),e=0|M(),a=a-1|0}while(0!=(0|a));u=s,s=0}else u=f,s=0,f=0;return a=0,0|n&&(i[n>>2]=A,i[n+4>>2]=e),g=-2&(o<<1|0)|f,0|(k(0|(d=(0|o)>>>31|(u|a)<<1|0&(a<<1|o>>>31)|s)),g)}function Me(A,e,r,t){var n,o;return o=I,I=I+16|0,ke(A|=0,e|=0,r|=0,t|=0,n=0|o),I=o,0|(k(0|i[n+4>>2]),0|i[n>>2])}function Qe(A,e,r){return A|=0,e|=0,(0|(r|=0))<32?(k(e>>>r|0),A>>>r|(e&(1<<r)-1)<<32-r):(k(0),e>>>r-32|0)}function ye(A,e,r){return A|=0,e|=0,(0|(r|=0))<32?(k(e<<r|(A&(1<<r)-1<<32-r)>>>32-r|0),A<<r):(k(A<<r-32|0),0)}function Ee(A,e){return e=+e,(A=+A)!=A?+e:e!=e?+A:+v(+A,+e)}function xe(A){return(A=+A)>=0?+a(A+.5):+B(A-.5)}function De(A,e,r){A|=0,e|=0;var n,o,a=0;if((0|(r|=0))>=8192)return x(0|A,0|e,0|r),0|A;if(o=0|A,n=A+r|0,(3&A)==(3&e)){for(;3&A;){if(!r)return 0|o;t[A>>0]=0|t[e>>0],A=A+1|0,e=e+1|0,r=r-1|0}for(a=(r=-4&n|0)-64|0;(0|A)<=(0|a);)i[A>>2]=i[e>>2],i[A+4>>2]=i[e+4>>2],i[A+8>>2]=i[e+8>>2],i[A+12>>2]=i[e+12>>2],i[A+16>>2]=i[e+16>>2],i[A+20>>2]=i[e+20>>2],i[A+24>>2]=i[e+24>>2],i[A+28>>2]=i[e+28>>2],i[A+32>>2]=i[e+32>>2],i[A+36>>2]=i[e+36>>2],i[A+40>>2]=i[e+40>>2],i[A+44>>2]=i[e+44>>2],i[A+48>>2]=i[e+48>>2],i[A+52>>2]=i[e+52>>2],i[A+56>>2]=i[e+56>>2],i[A+60>>2]=i[e+60>>2],A=A+64|0,e=e+64|0;for(;(0|A)<(0|r);)i[A>>2]=i[e>>2],A=A+4|0,e=e+4|0}else for(r=n-4|0;(0|A)<(0|r);)t[A>>0]=0|t[e>>0],t[A+1>>0]=0|t[e+1>>0],t[A+2>>0]=0|t[e+2>>0],t[A+3>>0]=0|t[e+3>>0],A=A+4|0,e=e+4|0;for(;(0|A)<(0|n);)t[A>>0]=0|t[e>>0],A=A+1|0,e=e+1|0;return 0|o}function _e(A,e,r){e|=0;var n,o=0,a=0,f=0;if(n=(A|=0)+(r|=0)|0,e&=255,(0|r)>=67){for(;3&A;)t[A>>0]=e,A=A+1|0;for(f=e|e<<8|e<<16|e<<24,a=(o=-4&n|0)-64|0;(0|A)<=(0|a);)i[A>>2]=f,i[A+4>>2]=f,i[A+8>>2]=f,i[A+12>>2]=f,i[A+16>>2]=f,i[A+20>>2]=f,i[A+24>>2]=f,i[A+28>>2]=f,i[A+32>>2]=f,i[A+36>>2]=f,i[A+40>>2]=f,i[A+44>>2]=f,i[A+48>>2]=f,i[A+52>>2]=f,i[A+56>>2]=f,i[A+60>>2]=f,A=A+64|0;for(;(0|A)<(0|o);)i[A>>2]=f,A=A+4|0}for(;(0|A)<(0|n);)t[A>>0]=e,A=A+1|0;return n-r|0}function Ie(A){return(A=+A)>=0?+a(A+.5):+B(A-.5)}function Fe(A){A|=0;var e,r,t;return t=0|E(),(0|A)>0&(0|(e=(r=0|i[o>>2])+A|0))<(0|r)|(0|e)<0?(_(0|e),y(12),-1):(0|e)>(0|t)&&!(0|D(0|e))?(y(12),-1):(i[o>>2]=e,0|r)}return{___uremdi3:Me,_bitshift64Lshr:Qe,_bitshift64Shl:ye,_calloc:be,_cellAreaKm2:function(A,e){var r,t,n,o=0;if(n=I,I=I+192|0,t=n,OA(A|=0,e|=0,r=n+168|0),jA(A,e,t),(0|(e=0|i[t>>2]))>0){if(o=+_A(t+8|0,t+8+((1!=(0|e)&1)<<4)|0,r)+0,1!=(0|e)){A=1;do{o+=+_A(t+8+(A<<4)|0,t+8+(((0|(A=A+1|0))%(0|e)|0)<<4)|0,r)}while((0|A)<(0|e))}}else o=0;return I=n,6371.007180918475*o*6371.007180918475},_cellAreaM2:function(A,e){var r,t,n,o=0;if(n=I,I=I+192|0,t=n,OA(A|=0,e|=0,r=n+168|0),jA(A,e,t),(0|(e=0|i[t>>2]))>0){if(o=+_A(t+8|0,t+8+((1!=(0|e)&1)<<4)|0,r)+0,1!=(0|e)){A=1;do{o+=+_A(t+8+(A<<4)|0,t+8+(((0|(A=A+1|0))%(0|e)|0)<<4)|0,r)}while((0|A)<(0|e))}}else o=0;return I=n,6371.007180918475*o*6371.007180918475*1e3*1e3},_cellAreaRads2:function(A,e){var r,t,n,o=0;if(n=I,I=I+192|0,t=n,OA(A|=0,e|=0,r=n+168|0),jA(A,e,t),(0|(e=0|i[t>>2]))<=0)return I=n,+(o=0);if(o=+_A(t+8|0,t+8+((1!=(0|e)&1)<<4)|0,r)+0,1==(0|e))return I=n,+o;A=1;do{o+=+_A(t+8+(A<<4)|0,t+8+(((0|(A=A+1|0))%(0|e)|0)<<4)|0,r)}while((0|A)<(0|e));return I=n,+o},_compact:function(A,e,r){e|=0;var t,n=0,o=0,a=0,f=0,s=0,u=0,l=0,h=0,c=0,d=0,g=0,w=0,p=0,B=0,b=0,v=0,m=0,k=0,Q=0,y=0,E=0;if(!(r|=0))return 0|(y=0);if(n=0|i[(o=A|=0)>>2],!0&0==(15728640&(o=0|i[o+4>>2])|0)){if((0|r)<=0)return 0|(y=0);if(i[(y=e)>>2]=n,i[y+4>>2]=o,1==(0|r))return 0|(y=0);n=1;do{Q=0|i[(k=A+(n<<3)|0)+4>>2],i[(y=e+(n<<3)|0)>>2]=i[k>>2],i[y+4>>2]=Q,n=n+1|0}while((0|n)!=(0|r));return 0|(n=0)}if(!(Q=0|pe(k=r<<3)))return 0|(y=-3);if(De(0|Q,0|A,0|k),!(t=0|be(r,8)))return Be(Q),0|(y=-3);n=r;A:for(;;){v=0|Qe(0|(h=0|i[(f=Q)>>2]),0|(f=0|i[f+4>>2]),52),M(),m=(v&=15)+-1|0,b=(0|n)>0;e:do{if(b){if(B=((0|n)<0)<<31>>31,w=0|ye(0|m,0,52),p=0|M(),m>>>0>15)for(o=0,A=h,r=f;;){if(!(0==(0|A)&0==(0|r))){if(a=0|Qe(0|A,0|r,52),M(),s=(0|(a&=15))<(0|m),a=(0|a)==(0|m),r=0|Me(0|(l=s?0:a?A:0),0|(A=s?0:a?r:0),0|n,0|B),M(),0==(0|(u=0|i[(s=a=t+(r<<3)|0)>>2]))&0==(0|(s=0|i[s+4>>2])))r=l;else for(w=0,g=r,d=s,r=l;;){if((0|w)>(0|n)){y=41;break A}if((0|u)==(0|r)&(-117440513&d|0)==(0|A)){l=0|Qe(0|u,0|d,56),M(),c=(l&=7)+1|0,p=0|Qe(0|u,0|d,45),M();r:do{if(0|S(127&p)){if(u=0|Qe(0|u,0|d,52),M(),!(u&=15)){s=6;break}for(s=1;;){if(!(0==((p=0|ye(7,0,3*(15-s|0)|0))&r|0)&0==((0|M())&A|0))){s=7;break r}if(!(s>>>0<u>>>0)){s=6;break}s=s+1|0}}else s=7}while(0);if((l+2|0)>>>0>s>>>0){y=51;break A}p=0|ye(0|c,0,56),A=0|M()|-117440513&A,i[(s=a)>>2]=0,i[s+4>>2]=0,s=g,r|=p}else s=(g+1|0)%(0|n)|0;if(0==(0|(u=0|i[(d=a=t+(s<<3)|0)>>2]))&0==(0|(d=0|i[d+4>>2])))break;w=w+1|0,g=s}i[(p=a)>>2]=r,i[p+4>>2]=A}if((0|(o=o+1|0))>=(0|n))break e;A=0|i[(r=Q+(o<<3)|0)>>2],r=0|i[r+4>>2]}for(o=0,A=h,r=f;;){if(!(0==(0|A)&0==(0|r))){if(s=0|Qe(0|A,0|r,52),M(),(0|(s&=15))>=(0|m)){if((0|s)!=(0|m)&&(A|=w,r=-15728641&r|p,s>>>0>=v>>>0)){a=m;do{g=0|ye(7,0,3*(14-a|0)|0),a=a+1|0,A|=g,r=0|M()|r}while(a>>>0<s>>>0)}}else A=0,r=0;if(s=0|Me(0|A,0|r,0|n,0|B),M(),!(0==(0|(l=0|i[(u=a=t+(s<<3)|0)>>2]))&0==(0|(u=0|i[u+4>>2]))))for(g=0;;){if((0|g)>(0|n)){y=41;break A}if((0|l)==(0|A)&(-117440513&u|0)==(0|r)){c=0|Qe(0|l,0|u,56),M(),d=(c&=7)+1|0,E=0|Qe(0|l,0|u,45),M();r:do{if(0|S(127&E)){if(l=0|Qe(0|l,0|u,52),M(),!(l&=15)){u=6;break}for(u=1;;){if(!(0==((E=0|ye(7,0,3*(15-u|0)|0))&A|0)&0==((0|M())&r|0))){u=7;break r}if(!(u>>>0<l>>>0)){u=6;break}u=u+1|0}}else u=7}while(0);if((c+2|0)>>>0>u>>>0){y=51;break A}E=0|ye(0|d,0,56),r=0|M()|-117440513&r,i[(d=a)>>2]=0,i[d+4>>2]=0,A|=E}else s=(s+1|0)%(0|n)|0;if(0==(0|(l=0|i[(u=a=t+(s<<3)|0)>>2]))&0==(0|(u=0|i[u+4>>2])))break;g=g+1|0}i[(E=a)>>2]=A,i[E+4>>2]=r}if((0|(o=o+1|0))>=(0|n))break e;A=0|i[(r=Q+(o<<3)|0)>>2],r=0|i[r+4>>2]}}}while(0);if((n+5|0)>>>0<11){y=99;break}if(!(p=0|be((0|n)/6|0,8))){y=58;break}e:do{if(b){g=0,d=0;do{if(!(0==(0|(o=0|i[(A=s=t+(g<<3)|0)>>2]))&0==(0|(A=0|i[A+4>>2])))){u=0|Qe(0|o,0|A,56),M(),r=(u&=7)+1|0,l=-117440513&A,E=0|Qe(0|o,0|A,45),M();r:do{if(0|S(127&E)){if(c=0|Qe(0|o,0|A,52),M(),0|(c&=15))for(a=1;;){if(!(0==(o&(E=0|ye(7,0,3*(15-a|0)|0))|0)&0==(l&(0|M())|0)))break r;if(!(a>>>0<c>>>0))break;a=a+1|0}o|=A=0|ye(0|r,0,56),A=0|M()|l,i[(r=s)>>2]=o,i[r+4>>2]=A,r=u+2|0}}while(0);7==(0|r)&&(i[(E=p+(d<<3)|0)>>2]=o,i[E+4>>2]=-117440513&A,d=d+1|0)}g=g+1|0}while((0|g)!=(0|n));if(b){if(w=((0|n)<0)<<31>>31,c=0|ye(0|m,0,52),g=0|M(),m>>>0>15)for(A=0,o=0;;){do{if(!(0==(0|h)&0==(0|f))){for(u=0|Qe(0|h,0|f,52),M(),a=(0|(u&=15))<(0|m),u=(0|u)==(0|m),a=0|Me(0|(s=a?0:u?h:0),0|(u=a?0:u?f:0),0|n,0|w),M(),r=0;;){if((0|r)>(0|n)){y=98;break A}if((-117440513&(l=0|i[(E=t+(a<<3)|0)+4>>2])|0)==(0|u)&&(0|i[E>>2])==(0|s)){y=70;break}if((0|i[(E=t+((a=(a+1|0)%(0|n)|0)<<3)|0)>>2])==(0|s)&&(0|i[E+4>>2])==(0|u))break;r=r+1|0}if(70==(0|y)&&(y=0,!0&100663296==(117440512&l|0)))break;i[(E=e+(o<<3)|0)>>2]=h,i[E+4>>2]=f,o=o+1|0}}while(0);if((0|(A=A+1|0))>=(0|n)){n=d;break e}h=0|i[(f=Q+(A<<3)|0)>>2],f=0|i[f+4>>2]}for(A=0,o=0;;){do{if(!(0==(0|h)&0==(0|f))){if(u=0|Qe(0|h,0|f,52),M(),(0|(u&=15))>=(0|m))if((0|u)!=(0|m))if(r=h|c,a=-15728641&f|g,u>>>0<v>>>0)u=a;else{s=m;do{E=0|ye(7,0,3*(14-s|0)|0),s=s+1|0,r|=E,a=0|M()|a}while(s>>>0<u>>>0);u=a}else r=h,u=f;else r=0,u=0;for(s=0|Me(0|r,0|u,0|n,0|w),M(),a=0;;){if((0|a)>(0|n)){y=98;break A}if((-117440513&(l=0|i[(E=t+(s<<3)|0)+4>>2])|0)==(0|u)&&(0|i[E>>2])==(0|r)){y=93;break}if((0|i[(E=t+((s=(s+1|0)%(0|n)|0)<<3)|0)>>2])==(0|r)&&(0|i[E+4>>2])==(0|u))break;a=a+1|0}if(93==(0|y)&&(y=0,!0&100663296==(117440512&l|0)))break;i[(E=e+(o<<3)|0)>>2]=h,i[E+4>>2]=f,o=o+1|0}}while(0);if((0|(A=A+1|0))>=(0|n)){n=d;break e}h=0|i[(f=Q+(A<<3)|0)>>2],f=0|i[f+4>>2]}}else o=0,n=d}else o=0,n=0}while(0);if(_e(0|t,0,0|k),De(0|Q,0|p,n<<3|0),Be(p),!n)break;e=e+(o<<3)|0}return 41==(0|y)?(Be(Q),Be(t),0|(E=-1)):51==(0|y)?(Be(Q),Be(t),0|(E=-2)):58==(0|y)?(Be(Q),Be(t),0|(E=-3)):98==(0|y)?(Be(p),Be(Q),Be(t),0|(E=-1)):(99==(0|y)&&De(0|e,0|Q,n<<3|0),Be(Q),Be(t),0|(E=0))},_destroyLinkedPolygon:function(A){var e=0,r=0,t=0,n=0;if(A|=0)for(t=1;;){if(0|(e=0|i[A>>2]))do{if(0|(r=0|i[e>>2]))do{n=r,r=0|i[r+16>>2],Be(n)}while(0!=(0|r));n=e,e=0|i[e+8>>2],Be(n)}while(0!=(0|e));if(e=A,A=0|i[A+8>>2],t||Be(e),!A)break;t=0}},_edgeLengthKm:function(A){return+ +n[20752+((A|=0)<<3)>>3]},_edgeLengthM:function(A){return+ +n[20880+((A|=0)<<3)>>3]},_emscripten_replace_memory:function(A){return t=new Int8Array(A),new Uint8Array(A),i=new Int32Array(A),new Float32Array(A),n=new Float64Array(A),r=A,!0},_exactEdgeLengthKm:function(A,e){var r,t,o=0,a=0,f=0,u=0,c=0,d=0;if(t=I,I=I+176|0,WA(A|=0,e|=0,r=t),(0|(A=0|i[r>>2]))<=1)return I=t,+(f=0);e=A+-1|0,A=0,o=0,a=+n[r+8>>3],f=+n[r+16>>3];do{c=a,a=+n[r+8+((A=A+1|0)<<4)>>3],d=+h(.5*(a-c)),u=f,f=+n[r+8+(A<<4)+8>>3],u=d*d+(u=+h(.5*(f-u)))*(+l(+c)*+l(+a)*u),o+=2*+p(+ +s(+u),+ +s(+(1-u)))}while((0|A)!=(0|e));return I=t,+(d=6371.007180918475*o)},_exactEdgeLengthM:function(A,e){var r,t,o=0,a=0,f=0,u=0,c=0,d=0;if(t=I,I=I+176|0,WA(A|=0,e|=0,r=t),(0|(A=0|i[r>>2]))<=1)return I=t,+(f=0);e=A+-1|0,A=0,o=0,a=+n[r+8>>3],f=+n[r+16>>3];do{c=a,a=+n[r+8+((A=A+1|0)<<4)>>3],d=+h(.5*(a-c)),u=f,f=+n[r+8+(A<<4)+8>>3],u=d*d+(u=+h(.5*(f-u)))*(+l(+c)*+l(+a)*u),o+=2*+p(+ +s(+u),+ +s(+(1-u)))}while((0|A)!=(0|e));return I=t,+(d=6371.007180918475*o*1e3)},_exactEdgeLengthRads:function(A,e){var r,t,o=0,a=0,f=0,u=0,c=0,d=0;if(t=I,I=I+176|0,WA(A|=0,e|=0,r=t),(0|(A=0|i[r>>2]))<=1)return I=t,+(f=0);e=A+-1|0,A=0,o=0,a=+n[r+8>>3],f=+n[r+16>>3];do{c=a,a=+n[r+8+((A=A+1|0)<<4)>>3],d=+h(.5*(a-c)),u=f,f=+n[r+8+(A<<4)+8>>3],u=d*d+(u=+h(.5*(f-u)))*(+l(+a)*+l(+c)*u),o+=2*+p(+ +s(+u),+ +s(+(1-u)))}while((0|A)<(0|e));return I=t,+o},_experimentalH3ToLocalIj:function(A,e,r,t,i){var n,o;return i|=0,o=I,I=I+16|0,(A=0|$A(A|=0,e|=0,r|=0,t|=0,n=o))||(cA(n,i),A=0),I=o,0|A},_experimentalLocalIjToH3:function(A,e,r,t){var i,n;return A|=0,e|=0,t|=0,i=I,I=I+16|0,dA(r|=0,n=i),t=0|Ae(A,e,n,t),I=i,0|t},_free:Be,_geoToH3:LA,_getDestinationH3IndexFromUnidirectionalEdge:function(A,e){A|=0;var r,t,n=0;return r=I,I=I+16|0,n=r,!0&268435456==(2013265920&(e|=0)|0)?(t=0|Qe(0|A,0|e,56),M(),i[n>>2]=0,n=0|U(A,-2130706433&e|134217728,7&t,n),e=0|M(),k(0|e),I=r,0|n):(n=0,k(0|(e=0)),I=r,0|n)},_getH3IndexesFromUnidirectionalEdge:function(A,e,r){A|=0;var t,n,o,a,f=0;o=I,I=I+16|0,t=o,a=!0&268435456==(2013265920&(e|=0)|0),n=-2130706433&e|134217728,i[(f=r|=0)>>2]=a?A:0,i[f+4>>2]=a?n:0,a?(e=0|Qe(0|A,0|e,56),M(),i[t>>2]=0,A=0|U(A,n,7&e,t),e=0|M()):(A=0,e=0),i[(f=r+8|0)>>2]=A,i[f+4>>2]=e,I=o},_getH3UnidirectionalEdge:function(A,e,r,t){var n,o,a=0,f=0,s=0,u=0,l=0;if(o=I,I=I+16|0,n=o,!(0|ZA(A|=0,e|=0,r|=0,t|=0)))return u=0,k(0|(s=0)),I=o,0|u;for(s=-2130706433&e,a=(a=0==(0|UA(A,e)))?1:2;i[n>>2]=0,f=a+1|0,!((0|(l=0|U(A,e,a,n)))==(0|r)&(0|M())==(0|t));){if(!(f>>>0<7)){a=0,A=0,u=6;break}a=f}return 6==(0|u)?(k(0|a),I=o,0|A):(l=0|ye(0|a,0,56),u=0|s|M()|268435456,l|=A,k(0|u),I=o,0|l)},_getH3UnidirectionalEdgeBoundary:WA,_getH3UnidirectionalEdgesFromHexagon:function(A,e,r){r|=0;var t,n=0;t=0==(0|UA(A|=0,e|=0)),e&=-2130706433,i[(n=r)>>2]=t?A:0,i[n+4>>2]=t?285212672|e:0,i[(n=r+8|0)>>2]=A,i[n+4>>2]=301989888|e,i[(n=r+16|0)>>2]=A,i[n+4>>2]=318767104|e,i[(n=r+24|0)>>2]=A,i[n+4>>2]=335544320|e,i[(n=r+32|0)>>2]=A,i[n+4>>2]=352321536|e,i[(r=r+40|0)>>2]=A,i[r+4>>2]=369098752|e},_getOriginH3IndexFromUnidirectionalEdge:function(A,e){var r;return A|=0,k(0|((r=!0&268435456==(2013265920&(e|=0)|0))?-2130706433&e|134217728:0)),0|(r?A:0)},_getPentagonIndexes:NA,_getRes0Indexes:function(A){A|=0;var e=0,r=0,t=0;e=0;do{ye(0|e,0,45),t=134225919|M(),i[(r=A+(e<<3)|0)>>2]=-1,i[r+4>>2]=t,e=e+1|0}while(122!=(0|e))},_h3Distance:function(A,e,r,t){var i,n,o;return r|=0,t|=0,o=I,I=I+32|0,n=o,A=0==(0|$A(A|=0,e|=0,A,e,i=o+12|0))&&0==(0|$A(A,e,r,t,n))?0|hA(i,n):-1,I=o,0|A},_h3GetBaseCell:IA,_h3GetFaces:function A(e,r,t){t|=0;var n,o=0,a=0,f=0,s=0,u=0,l=0,h=0,c=0;n=I,I=I+128|0,h=n+112|0,f=n+96|0,c=n,a=0|Qe(0|(e|=0),0|(r|=0),52),M(),u=15&a,i[h>>2]=u,s=0|Qe(0|e,0|r,45),M(),s&=127;A:do{if(0|S(s)){if(0|u)for(o=1;;){if(!(0==((l=0|ye(7,0,3*(15-o|0)|0))&e|0)&0==((0|M())&r|0))){a=0;break A}if(!(o>>>0<u>>>0))break;o=o+1|0}if(!(1&a))return l=0|ye(u+1|0,0,52),c=0|M()|-15728641&r,A((l|e)&~(h=0|ye(7,0,3*(14-u|0)|0)),c&~(0|M()),t),void(I=n);a=1}else a=0}while(0);YA(e,r,f),a?(mA(f,h,c),l=5):(yA(f,h,c),l=6);A:do{if(0|S(s))if(u)for(o=1;;){if(!(0==((s=0|ye(7,0,3*(15-o|0)|0))&e|0)&0==((0|M())&r|0))){o=8;break A}if(!(o>>>0<u>>>0)){o=20;break}o=o+1|0}else o=20;else o=8}while(0);if(_e(0|t,-1,0|o),a){a=0;do{for(MA(f=c+(a<<4)|0,0|i[h>>2]),f=0|i[f>>2],o=0;!(-1==(0|(u=0|i[(s=t+(o<<2)|0)>>2]))|(0|u)==(0|f));)o=o+1|0;i[s>>2]=f,a=a+1|0}while((0|a)!=(0|l))}else{a=0;do{for(kA(f=c+(a<<4)|0,0|i[h>>2],0,1),f=0|i[f>>2],o=0;!(-1==(0|(u=0|i[(s=t+(o<<2)|0)>>2]))|(0|u)==(0|f));)o=o+1|0;i[s>>2]=f,a=a+1|0}while((0|a)!=(0|l))}I=n},_h3GetResolution:function(A,e){return e=0|Qe(0|(A|=0),0|(e|=0),52),M(),15&e|0},_h3IndexesAreNeighbors:ZA,_h3IsPentagon:UA,_h3IsResClassIII:function(A,e){return e=0|Qe(0|(A|=0),0|(e|=0),52),M(),1&e|0},_h3IsValid:FA,_h3Line:function(A,e,r,t,n){r|=0,t|=0,n|=0;var o,a=0,s=0,u=0,l=0,h=0,c=0,d=0,g=0,w=0,p=0,B=0,b=0,v=0,m=0,k=0,M=0,Q=0;if(o=I,I=I+48|0,s=o+12|0,M=o,0==(0|$A(A|=0,e|=0,A,e,a=o+24|0))&&0==(0|$A(A,e,r,t,s))){if((0|(k=0|hA(a,s)))<0)return I=o,0|(M=k);for(i[a>>2]=0,i[a+4>>2]=0,i[a+8>>2]=0,i[s>>2]=0,i[s+4>>2]=0,i[s+8>>2]=0,$A(A,e,A,e,a),$A(A,e,r,t,s),gA(a),gA(s),k?(w=+(0|k),m=a,r=c=0|i[a>>2],t=d=0|i[(b=a+4|0)>>2],a=g=0|i[(v=a+8|0)>>2],p=+((0|i[s>>2])-c|0)/w,B=+((0|i[s+4>>2])-d|0)/w,w=+((0|i[s+8>>2])-g|0)/w):(b=t=a+4|0,v=g=a+8|0,m=a,r=0|i[a>>2],t=0|i[t>>2],a=0|i[g>>2],p=0,B=0,w=0),i[M>>2]=r,i[(g=M+4|0)>>2]=t,i[(d=M+8|0)>>2]=a,c=0;;){Q=p*(l=+(0|c))+ +(0|r),u=B*l+ +(0|i[b>>2]),l=w*l+ +(0|i[v>>2]),t=~~+xe(+Q),s=~~+xe(+u),r=~~+xe(+l),Q=+f(+(+(0|t)-Q)),u=+f(+(+(0|s)-u)),l=+f(+(+(0|r)-l));do{if(!(Q>u&Q>l)){if(h=0-t|0,u>l){a=h-r|0;break}a=s,r=h-s|0;break}t=0-(s+r)|0,a=s}while(0);if(i[M>>2]=t,i[g>>2]=a,i[d>>2]=r,wA(M),Ae(A,e,M,n+(c<<3)|0),(0|c)==(0|k))break;c=c+1|0,r=0|i[m>>2]}return I=o,0|(M=0)}return I=o,0|(M=-1)},_h3LineSize:function(A,e,r,t){var i,n,o;return r|=0,t|=0,o=I,I=I+32|0,n=o,A=0==(0|$A(A|=0,e|=0,A,e,i=o+12|0))&&0==(0|$A(A,e,r,t,n))?0|hA(i,n):-1,I=o,(A>>>31^1)+A|0},_h3SetToLinkedGeo:function(A,e,r){r|=0;var t,n,o,a=0;if(o=I,I=I+32|0,t=o,function(A,e,r){A|=0,r|=0;var t,n,o=0,a=0,f=0,s=0,u=0;if(n=I,I=I+176|0,t=n,(0|(e|=0))<1)return se(r,0,0),void(I=n);s=0|Qe(0|i[(s=A)>>2],0|i[s+4>>2],52),M(),se(r,(0|e)>6?e:6,15&s),s=0;do{if(jA(0|i[(o=A+(s<<3)|0)>>2],0|i[o+4>>2],t),(0|(o=0|i[t>>2]))>0){u=0;do{f=t+8+(u<<4)|0,(a=0|de(r,o=t+8+(((0|(u=u+1|0))%(0|o)|0)<<4)|0,f))?he(r,a):ce(r,f,o),o=0|i[t>>2]}while((0|u)<(0|o))}s=s+1|0}while((0|s)!=(0|e));I=n}(A|=0,e|=0,n=o+16|0),i[r>>2]=0,i[r+4>>2]=0,i[r+8>>2]=0,!(A=0|le(n)))return XA(r),ue(n),void(I=o);do{e=0|JA(r);do{KA(e,A),a=A+16|0,i[t>>2]=i[a>>2],i[t+4>>2]=i[a+4>>2],i[t+8>>2]=i[a+8>>2],i[t+12>>2]=i[a+12>>2],he(n,A),A=0|ge(n,t)}while(0!=(0|A));A=0|le(n)}while(0!=(0|A));XA(r),ue(n),I=o},_h3ToCenterChild:function(A,e,r){r|=0;var t=0,i=0;if(t=0|Qe(0|(A|=0),0|(e|=0),52),M(),(0|r)<16&(0|(t&=15))<=(0|r)){if((0|t)!=(0|r)&&(A|=i=0|ye(0|r,0,52),e=0|M()|-15728641&e,(0|t)<(0|r)))do{i=0|ye(7,0,3*(14-t|0)|0),t=t+1|0,A&=~i,e&=~(0|M())}while((0|t)<(0|r))}else e=0,A=0;return k(0|e),0|A},_h3ToChildren:PA,_h3ToGeo:OA,_h3ToGeoBoundary:jA,_h3ToParent:CA,_h3UnidirectionalEdgeIsValid:function(A,e){var r=0;if(!(!0&268435456==(2013265920&(e|=0)|0)))return 0|(r=0);switch(r=0|Qe(0|(A|=0),0|e,56),M(),7&r){case 0:case 7:return 0|(r=0)}return!0&16777216==(117440512&e|0)&0!=(0|UA(A,r=-2130706433&e|134217728))?0|(r=0):0|(r=0|FA(A,r))},_hexAreaKm2:function(A){return+ +n[20496+((A|=0)<<3)>>3]},_hexAreaM2:function(A){return+ +n[20624+((A|=0)<<3)>>3]},_hexRing:function(A,e,r,t){A|=0,e|=0,t|=0;var n,o=0,a=0,f=0,s=0,u=0,l=0,h=0;if(n=I,I=I+16|0,h=n,!(r|=0))return i[(h=t)>>2]=A,i[h+4>>2]=e,I=n,0|(h=0);i[h>>2]=0;A:do{if(0|UA(A,e))A=1;else{if(a=(0|r)>0){o=0,l=A;do{if(0==(0|(l=0|U(l,e,4,h)))&0==(0|(e=0|M()))){A=2;break A}if(o=o+1|0,0|UA(l,e)){A=1;break A}}while((0|o)<(0|r));if(i[(u=t)>>2]=l,i[u+4>>2]=e,u=r+-1|0,a){a=0,f=1,o=l,A=e;do{if(0==(0|(o=0|U(o,A,2,h)))&0==(0|(A=0|M()))){A=2;break A}if(i[(s=t+(f<<3)|0)>>2]=o,i[s+4>>2]=A,f=f+1|0,0|UA(o,A)){A=1;break A}a=a+1|0}while((0|a)<(0|r));s=0,a=f;do{if(0==(0|(o=0|U(o,A,3,h)))&0==(0|(A=0|M()))){A=2;break A}if(i[(f=t+(a<<3)|0)>>2]=o,i[f+4>>2]=A,a=a+1|0,0|UA(o,A)){A=1;break A}s=s+1|0}while((0|s)<(0|r));f=0;do{if(0==(0|(o=0|U(o,A,1,h)))&0==(0|(A=0|M()))){A=2;break A}if(i[(s=t+(a<<3)|0)>>2]=o,i[s+4>>2]=A,a=a+1|0,0|UA(o,A)){A=1;break A}f=f+1|0}while((0|f)<(0|r));f=0;do{if(0==(0|(o=0|U(o,A,5,h)))&0==(0|(A=0|M()))){A=2;break A}if(i[(s=t+(a<<3)|0)>>2]=o,i[s+4>>2]=A,a=a+1|0,0|UA(o,A)){A=1;break A}f=f+1|0}while((0|f)<(0|r));f=0;do{if(0==(0|(o=0|U(o,A,4,h)))&0==(0|(A=0|M()))){A=2;break A}if(i[(s=t+(a<<3)|0)>>2]=o,i[s+4>>2]=A,a=a+1|0,0|UA(o,A)){A=1;break A}f=f+1|0}while((0|f)<(0|r));for(f=0;;){if(0==(0|(o=0|U(o,A,6,h)))&0==(0|(A=0|M()))){A=2;break A}if((0|f)!=(0|u)){if(i[(s=t+(a<<3)|0)>>2]=o,i[s+4>>2]=A,0|UA(o,A)){A=1;break A}a=a+1|0}if((0|(f=f+1|0))>=(0|r)){f=l,a=e;break}}}else f=l,o=l,a=e,A=e}else i[(f=t)>>2]=A,i[f+4>>2]=e,f=A,o=A,a=e,A=e;A=1&((0|f)!=(0|o)|(0|a)!=(0|A))}}while(0);return I=n,0|(h=A)},_i64Subtract:ve,_kRing:F,_kRingDistances:function(A,e,r,t,i){var n;if(0|C(A|=0,e|=0,r|=0,t|=0,i|=0)){if(_e(0|t,0,(n=1+(0|b(3*r|0,r+1|0))|0)<<3|0),0|i)return _e(0|i,0,n<<2|0),void P(A,e,r,t,i,n,0);(i=0|be(n,4))&&(P(A,e,r,t,i,n,0),Be(i))}},_llvm_minnum_f64:Ee,_llvm_round_f64:xe,_malloc:pe,_maxFaceCount:function(A,e){var r=0,t=0;if(t=0|Qe(0|(A|=0),0|(e|=0),45),M(),!(0|S(127&t)))return 0|(t=2);if(t=0|Qe(0|A,0|e,52),M(),!(t&=15))return 0|(t=5);for(r=1;;){if(!(0==((0|ye(7,0,3*(15-r|0)|0))&A|0)&0==((0|M())&e|0))){r=2,A=6;break}if(!(r>>>0<t>>>0)){r=5,A=6;break}r=r+1|0}return 6==(0|A)?0|r:0},_maxH3ToChildrenSize:function(A,e,r){return r|=0,A=0|Qe(0|(A|=0),0|(e|=0),52),M(),(0|r)<16&(0|(A&=15))<=(0|r)?0|(r=0|ee(7,r-A|0)):0|(r=0)},_maxKringSize:function(A){return 1+(0|b(3*(A|=0)|0,A+1|0))|0},_maxPolyfillSize:function(A,e){e|=0;var r,t=0,n=0,o=0,a=0,f=0;if(r=I,I=I+48|0,o=r+8|0,n=r,a=0|i[(f=A|=0)+4>>2],i[(t=n)>>2]=i[f>>2],i[t+4>>2]=a,te(n,o),o=0|j(o,e),e=0|i[n>>2],(0|(n=0|i[A+8>>2]))<=0)return I=r,0|(f=(f=(a=(0|o)<(0|(f=e)))?f:o)+12|0);t=0|i[A+12>>2],A=0;do{e=(0|i[t+(A<<3)>>2])+e|0,A=A+1|0}while((0|A)<(0|n));return I=r,0|(f=(f=(f=(0|o)<(0|e))?e:o)+12|0)},_maxUncompactSize:function(A,e,r){A|=0,r|=0;var t=0,n=0,o=0,a=0;if((0|(e|=0))<=0)return 0|(r=0);if((0|r)>=16){for(t=0;;){if(!(0==(0|i[(a=A+(t<<3)|0)>>2])&0==(0|i[a+4>>2]))){t=-1,n=13;break}if((0|(t=t+1|0))>=(0|e)){t=0,n=13;break}}if(13==(0|n))return 0|t}t=0,a=0;A:for(;;){o=0|i[(n=A+(a<<3)|0)>>2],n=0|i[n+4>>2];do{if(!(0==(0|o)&0==(0|n))){if(n=0|Qe(0|o,0|n,52),M(),(0|(n&=15))>(0|r)){t=-1,n=13;break A}if((0|n)==(0|r)){t=t+1|0;break}t=(0|ee(7,r-n|0))+t|0;break}}while(0);if((0|(a=a+1|0))>=(0|e)){n=13;break}}return 13==(0|n)?0|t:0},_memcpy:De,_memset:_e,_numHexagons:function(A){var e;return A=0|i[(e=21008+((A|=0)<<3)|0)>>2],k(0|i[e+4>>2]),0|A},_pentagonIndexCount:function(){return 12},_pointDistKm:DA,_pointDistM:function(A,e){A|=0;var r,t,i,o=0;return t=+n[(e|=0)>>3],r=+n[A>>3],o=(i=+h(.5*(t-r)))*i+(o=+h(.5*(+n[e+8>>3]-+n[A+8>>3])))*(+l(+t)*+l(+r)*o),2*+p(+ +s(+o),+ +s(+(1-o)))*6371.007180918475*1e3},_pointDistRads:function(A,e){A|=0;var r,t,i,o=0;return t=+n[(e|=0)>>3],r=+n[A>>3],o=(i=+h(.5*(t-r)))*i+(o=+h(.5*(+n[e+8>>3]-+n[A+8>>3])))*(+l(+t)*+l(+r)*o),2*+p(+ +s(+o),+ +s(+(1-o)))},_polyfill:function(A,e,r){var t,n=0,o=0,a=0,f=0,s=0;if(t=I,I=I+48|0,n=t+8|0,o=t,0|function(A,e,r){e|=0,r|=0;var t=0,n=0,o=0,a=0,f=0,s=0,u=0,l=0,h=0,c=0,d=0,g=0,w=0,p=0,B=0,b=0,v=0,m=0,k=0,y=0,E=0,x=0,D=0,_=0,F=0,U=0,S=0,T=0,V=0,H=0;H=I,I=I+112|0,U=H+80|0,s=H+72|0,S=H,T=H+56|0,(V=0|pe(32+(i[(u=(A=A|0)+8|0)>>2]<<5)|0))||Q(22848,22448,800,22456);if(ie(A,V),t=0|i[(o=A)+4>>2],i[(f=s)>>2]=i[o>>2],i[f+4>>2]=t,te(s,U),f=0|j(U,e),t=0|i[s>>2],(0|(o=0|i[u>>2]))>0){a=0|i[A+12>>2],n=0;do{t=(0|i[a+(n<<3)>>2])+t|0,n=n+1|0}while((0|n)!=(0|o))}if(n=0|be(F=(f=(0|f)<(0|t)?t:f)+12|0,8),l=0|be(F,8),i[U>>2]=0,_=0|i[(D=A)+4>>2],i[(t=s)>>2]=i[D>>2],i[t+4>>2]=_,0|(t=0|G(s,F,e,U,n,l)))return Be(n),Be(l),Be(V),I=H,0|(V=t);A:do{if((0|i[u>>2])>0){for(o=A+12|0,t=0;a=0|G((0|i[o>>2])+(t<<3)|0,F,e,U,n,l),t=t+1|0,!(0|a);)if((0|t)>=(0|i[u>>2]))break A;return Be(n),Be(l),Be(V),I=H,0|(V=a)}}while(0);(0|f)>-12&&_e(0|l,0,((0|F)>1?F:1)<<3|0);A:do{if((0|i[U>>2])>0){_=((0|F)<0)<<31>>31,m=n,k=l,y=n,E=n,x=l,D=n,t=n,p=n,B=l,b=l,v=l,n=l;e:for(;;){for(w=0|i[U>>2],d=0,g=0,o=0;;){f=(a=S)+56|0;do{i[a>>2]=0,a=a+4|0}while((0|a)<(0|f));if(0|C(s=0|i[(e=m+(d<<3)|0)>>2],e=0|i[e+4>>2],1,S,0)){f=(a=S)+56|0;do{i[a>>2]=0,a=a+4|0}while((0|a)<(0|f));0|(a=0|be(7,4))&&(P(s,e,1,S,a,7,0),Be(a))}c=0;do{l=0|i[(h=S+(c<<3)|0)>>2],h=0|i[h+4>>2];r:do{if(!(0==(0|l)&0==(0|h))){if(s=0|Me(0|l,0|h,0|F,0|_),M(),!(0==(0|(e=0|i[(f=a=r+(s<<3)|0)>>2]))&0==(0|(f=0|i[f+4>>2]))))for(u=0;;){if((0|u)>(0|F))break e;if((0|e)==(0|l)&(0|f)==(0|h))break r;if(0==(0|(e=0|i[(f=a=r+((s=(s+1|0)%(0|F)|0)<<3)|0)>>2]))&0==(0|(f=0|i[f+4>>2])))break;u=u+1|0}0==(0|l)&0==(0|h)||(OA(l,h,T),0|ne(A,V,T)&&(i[(u=a)>>2]=l,i[u+4>>2]=h,i[(u=k+(o<<3)|0)>>2]=l,i[u+4>>2]=h,o=o+1|0))}}while(0);c=c+1|0}while(c>>>0<7);if((0|(g=g+1|0))>=(0|w))break;d=d+1|0}if((0|w)>0&&_e(0|y,0,w<<3|0),i[U>>2]=o,!((0|o)>0))break A;l=n,h=v,c=D,d=b,g=B,w=k,n=p,v=t,b=E,B=y,p=l,t=h,D=x,x=c,E=d,y=g,k=m,m=w}return Be(E),Be(x),Be(V),I=H,0|(V=-1)}t=l}while(0);return Be(V),Be(n),Be(t),I=H,0|(V=0)}(A|=0,e|=0,r|=0)){if(a=0|i[(s=A)+4>>2],i[(f=o)>>2]=i[s>>2],i[f+4>>2]=a,te(o,n),f=0|j(n,e),e=0|i[o>>2],(0|(a=0|i[A+8>>2]))>0){o=0|i[A+12>>2],n=0;do{e=(0|i[o+(n<<3)>>2])+e|0,n=n+1|0}while((0|n)!=(0|a))}(0|(e=(0|f)<(0|e)?e:f))<=-12||_e(0|r,0,8+(((0|(s=e+11|0))>0?s:0)<<3)|0),I=t}else I=t},_res0IndexCount:function(){return 122},_round:Ie,_sbrk:Fe,_sizeOfCoordIJ:function(){return 8},_sizeOfGeoBoundary:function(){return 168},_sizeOfGeoCoord:function(){return 16},_sizeOfGeoPolygon:function(){return 16},_sizeOfGeofence:function(){return 8},_sizeOfH3Index:function(){return 8},_sizeOfLinkedGeoPolygon:function(){return 12},_uncompact:function(A,e,r,t,n){A|=0,r|=0,t|=0,n|=0;var o=0,a=0,f=0,s=0,u=0,l=0;if((0|(e|=0))<=0)return 0|(n=0);if((0|n)>=16){for(o=0;;){if(!(0==(0|i[(l=A+(o<<3)|0)>>2])&0==(0|i[l+4>>2]))){o=14;break}if((0|(o=o+1|0))>=(0|e)){a=0,o=16;break}}if(14==(0|o))return 0|((0|t)>0?-2:-1);if(16==(0|o))return 0|a}o=0,l=0;A:for(;;){a=0|i[(f=u=A+(l<<3)|0)>>2],f=0|i[f+4>>2];do{if(!(0==(0|a)&0==(0|f))){if((0|o)>=(0|t)){a=-1,o=16;break A}if(s=0|Qe(0|a,0|f,52),M(),(0|(s&=15))>(0|n)){a=-2,o=16;break A}if((0|s)==(0|n)){i[(u=r+(o<<3)|0)>>2]=a,i[u+4>>2]=f,o=o+1|0;break}if((0|(a=(0|ee(7,n-s|0))+o|0))>(0|t)){a=-1,o=16;break A}PA(0|i[u>>2],0|i[u+4>>2],n,r+(o<<3)|0),o=a}}while(0);if((0|(l=l+1|0))>=(0|e)){a=0,o=16;break}}return 16==(0|o)?0|a:0},establishStackSpace:function(A,e){I=A|=0},stackAlloc:function(A){var e;return e=I,I=(I=I+(A|=0)|0)+15&-16,0|e},stackRestore:function(A){I=A|=0},stackSave:function(){return 0|I}}}({Math:Math,Int8Array:Int8Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Float32Array:Float32Array,Float64Array:Float64Array},{a:fA,b:function(A){s=A},c:u,d:function(A,e,r,t){fA("Assertion failed: "+g(A)+", at: "+[e?g(e):"unknown filename",r,t?g(t):"unknown function"])},e:function(A){return r.___errno_location&&(v[r.___errno_location()>>2]=A),A},f:N,g:function(A,e,r){B.set(B.subarray(e,e+r),A)},h:function(A){var e=N(),r=16777216,t=2130706432;if(A>t)return!1;for(var i=Math.max(e,16777216);i<A;)i=i<=536870912?M(2*i,r):Math.min(M((3*i+2147483648)/4,r),t);return!!Z(i)},i:function(A){fA("OOM")},j:Y,k:O,l:Z,m:j,n:function(){var A=j();return r.extraStackTrace&&(A+="\n"+r.extraStackTrace()),O(A)},o:24032,p:24016},w),$=(r.___uremdi3=q.___uremdi3,r._bitshift64Lshr=q._bitshift64Lshr,r._bitshift64Shl=q._bitshift64Shl,r._calloc=q._calloc,r._cellAreaKm2=q._cellAreaKm2,r._cellAreaM2=q._cellAreaM2,r._cellAreaRads2=q._cellAreaRads2,r._compact=q._compact,r._destroyLinkedPolygon=q._destroyLinkedPolygon,r._edgeLengthKm=q._edgeLengthKm,r._edgeLengthM=q._edgeLengthM,r._emscripten_replace_memory=q._emscripten_replace_memory),AA=(r._exactEdgeLengthKm=q._exactEdgeLengthKm,r._exactEdgeLengthM=q._exactEdgeLengthM,r._exactEdgeLengthRads=q._exactEdgeLengthRads,r._experimentalH3ToLocalIj=q._experimentalH3ToLocalIj,r._experimentalLocalIjToH3=q._experimentalLocalIjToH3,r._free=q._free,r._geoToH3=q._geoToH3,r._getDestinationH3IndexFromUnidirectionalEdge=q._getDestinationH3IndexFromUnidirectionalEdge,r._getH3IndexesFromUnidirectionalEdge=q._getH3IndexesFromUnidirectionalEdge,r._getH3UnidirectionalEdge=q._getH3UnidirectionalEdge,r._getH3UnidirectionalEdgeBoundary=q._getH3UnidirectionalEdgeBoundary,r._getH3UnidirectionalEdgesFromHexagon=q._getH3UnidirectionalEdgesFromHexagon,r._getOriginH3IndexFromUnidirectionalEdge=q._getOriginH3IndexFromUnidirectionalEdge,r._getPentagonIndexes=q._getPentagonIndexes,r._getRes0Indexes=q._getRes0Indexes,r._h3Distance=q._h3Distance,r._h3GetBaseCell=q._h3GetBaseCell,r._h3GetFaces=q._h3GetFaces,r._h3GetResolution=q._h3GetResolution,r._h3IndexesAreNeighbors=q._h3IndexesAreNeighbors,r._h3IsPentagon=q._h3IsPentagon,r._h3IsResClassIII=q._h3IsResClassIII,r._h3IsValid=q._h3IsValid,r._h3Line=q._h3Line,r._h3LineSize=q._h3LineSize,r._h3SetToLinkedGeo=q._h3SetToLinkedGeo,r._h3ToCenterChild=q._h3ToCenterChild,r._h3ToChildren=q._h3ToChildren,r._h3ToGeo=q._h3ToGeo,r._h3ToGeoBoundary=q._h3ToGeoBoundary,r._h3ToParent=q._h3ToParent,r._h3UnidirectionalEdgeIsValid=q._h3UnidirectionalEdgeIsValid,r._hexAreaKm2=q._hexAreaKm2,r._hexAreaM2=q._hexAreaM2,r._hexRing=q._hexRing,r._i64Subtract=q._i64Subtract,r._kRing=q._kRing,r._kRingDistances=q._kRingDistances,r._llvm_minnum_f64=q._llvm_minnum_f64,r._llvm_round_f64=q._llvm_round_f64,r._malloc=q._malloc,r._maxFaceCount=q._maxFaceCount,r._maxH3ToChildrenSize=q._maxH3ToChildrenSize,r._maxKringSize=q._maxKringSize,r._maxPolyfillSize=q._maxPolyfillSize,r._maxUncompactSize=q._maxUncompactSize,r._memcpy=q._memcpy,r._memset=q._memset,r._numHexagons=q._numHexagons,r._pentagonIndexCount=q._pentagonIndexCount,r._pointDistKm=q._pointDistKm,r._pointDistM=q._pointDistM,r._pointDistRads=q._pointDistRads,r._polyfill=q._polyfill,r._res0IndexCount=q._res0IndexCount,r._round=q._round,r._sbrk=q._sbrk,r._sizeOfCoordIJ=q._sizeOfCoordIJ,r._sizeOfGeoBoundary=q._sizeOfGeoBoundary,r._sizeOfGeoCoord=q._sizeOfGeoCoord,r._sizeOfGeoPolygon=q._sizeOfGeoPolygon,r._sizeOfGeofence=q._sizeOfGeofence,r._sizeOfH3Index=q._sizeOfH3Index,r._sizeOfLinkedGeoPolygon=q._sizeOfLinkedGeoPolygon,r._uncompact=q._uncompact,r.establishStackSpace=q.establishStackSpace,r.stackAlloc=q.stackAlloc),eA=r.stackRestore=q.stackRestore,rA=r.stackSave=q.stackSave;if(r.asm=q,r.cwrap=function(A,e,r,t){var i=(r=r||[]).every((function(A){return"number"===A}));return"string"!==e&&i&&!t?h(A):function(){return c(A,e,r,arguments)}},r.setValue=function(A,e,r,t){switch("*"===(r=r||"i8").charAt(r.length-1)&&(r="i32"),r){case"i1":case"i8":p[A>>0]=e;break;case"i16":b[A>>1]=e;break;case"i32":v[A>>2]=e;break;case"i64":H=[e>>>0,(V=e,+F(V)>=1?V>0?(0|U(+P(V/4294967296),4294967295))>>>0:~~+C((V-+(~~V>>>0))/4294967296)>>>0:0)],v[A>>2]=H[0],v[A+4>>2]=H[1];break;case"float":m[A>>2]=e;break;case"double":k[A>>3]=e;break;default:fA("invalid type for setValue: "+r)}},r.getValue=function(A,e,r){switch("*"===(e=e||"i8").charAt(e.length-1)&&(e="i32"),e){case"i1":case"i8":return p[A>>0];case"i16":return b[A>>1];case"i32":case"i64":return v[A>>2];case"float":return m[A>>2];case"double":return k[A>>3];default:fA("invalid type for getValue: "+e)}return null},r.getTempRet0=u,R){z(R)||(K=R,R=r.locateFile?r.locateFile(K,o):o+K),G++,r.monitorRunDependencies&&r.monitorRunDependencies(G);var tA=function(A){A.byteLength&&(A=new Uint8Array(A)),B.set(A,8),r.memoryInitializerRequest&&delete r.memoryInitializerRequest.response,function(A){if(G--,r.monitorRunDependencies&&r.monitorRunDependencies(G),0==G&&(null!==S&&(clearInterval(S),S=null),T)){var e=T;T=null,e()}}()},iA=function(){i(R,tA,(function(){throw"could not load memory initializer "+R}))},nA=J(R);if(nA)tA(nA.buffer);else if(r.memoryInitializerRequest){var oA=function(){var A=r.memoryInitializerRequest,e=A.response;if(200!==A.status&&0!==A.status){var t=J(r.memoryInitializerRequestURL);if(!t)return console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+A.status+", retrying "+R),void iA();e=t.buffer}tA(e)};r.memoryInitializerRequest.response?setTimeout(oA,0):r.memoryInitializerRequest.addEventListener("load",oA)}else iA()}function aA(A){function e(){X||(X=!0,l||(E(D),E(_),r.onRuntimeInitialized&&r.onRuntimeInitialized(),function(){if(r.postRun)for("function"==typeof r.postRun&&(r.postRun=[r.postRun]);r.postRun.length;)A=r.postRun.shift(),I.unshift(A);var A;E(I)}()))}A=A||n,G>0||(!function(){if(r.preRun)for("function"==typeof r.preRun&&(r.preRun=[r.preRun]);r.preRun.length;)A=r.preRun.shift(),x.unshift(A);var A;E(x)}(),G>0||(r.setStatus?(r.setStatus("Running..."),setTimeout((function(){setTimeout((function(){r.setStatus("")}),1),e()}),1)):e()))}function fA(A){throw r.onAbort&&r.onAbort(A),a(A+=""),f(A),l=!0,"abort("+A+"). Build with -s ASSERTIONS=1 for more info."}if(T=function A(){X||aA(),X||(T=A)},r.run=aA,r.abort=fA,r.preInit)for("function"==typeof r.preInit&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return aA(),A}("object"==typeof t?t:{}),i="number",n={};[["sizeOfH3Index",i],["sizeOfGeoCoord",i],["sizeOfGeoBoundary",i],["sizeOfGeoPolygon",i],["sizeOfGeofence",i],["sizeOfLinkedGeoPolygon",i],["sizeOfCoordIJ",i],["h3IsValid",i,[i,i]],["geoToH3",i,[i,i,i]],["h3ToGeo",null,[i,i,i]],["h3ToGeoBoundary",null,[i,i,i]],["maxKringSize",i,[i]],["kRing",null,[i,i,i,i]],["kRingDistances",null,[i,i,i,i,i]],["hexRing",null,[i,i,i,i]],["maxPolyfillSize",i,[i,i]],["polyfill",null,[i,i,i]],["h3SetToLinkedGeo",null,[i,i,i]],["destroyLinkedPolygon",null,[i]],["compact",i,[i,i,i]],["uncompact",i,[i,i,i,i,i]],["maxUncompactSize",i,[i,i,i]],["h3IsPentagon",i,[i,i]],["h3IsResClassIII",i,[i,i]],["h3GetBaseCell",i,[i,i]],["h3GetResolution",i,[i,i]],["maxFaceCount",i,[i,i]],["h3GetFaces",null,[i,i,i]],["h3ToParent",i,[i,i,i]],["h3ToChildren",null,[i,i,i,i]],["h3ToCenterChild",i,[i,i,i]],["maxH3ToChildrenSize",i,[i,i,i]],["h3IndexesAreNeighbors",i,[i,i,i,i]],["getH3UnidirectionalEdge",i,[i,i,i,i]],["getOriginH3IndexFromUnidirectionalEdge",i,[i,i]],["getDestinationH3IndexFromUnidirectionalEdge",i,[i,i]],["h3UnidirectionalEdgeIsValid",i,[i,i]],["getH3IndexesFromUnidirectionalEdge",null,[i,i,i]],["getH3UnidirectionalEdgesFromHexagon",null,[i,i,i]],["getH3UnidirectionalEdgeBoundary",null,[i,i,i]],["h3Distance",i,[i,i,i,i]],["h3Line",i,[i,i,i,i,i]],["h3LineSize",i,[i,i,i,i]],["experimentalH3ToLocalIj",i,[i,i,i,i,i]],["experimentalLocalIjToH3",i,[i,i,i,i]],["hexAreaM2",i,[i]],["hexAreaKm2",i,[i]],["edgeLengthM",i,[i]],["edgeLengthKm",i,[i]],["pointDistM",i,[i,i]],["pointDistKm",i,[i,i]],["pointDistRads",i,[i,i]],["cellAreaM2",i,[i,i]],["cellAreaKm2",i,[i,i]],["cellAreaRads2",i,[i,i]],["exactEdgeLengthM",i,[i,i]],["exactEdgeLengthKm",i,[i,i]],["exactEdgeLengthRads",i,[i,i]],["numHexagons",i,[i]],["getRes0Indexes",null,[i]],["res0IndexCount",i],["getPentagonIndexes",null,[i,i]],["pentagonIndexCount",i]].forEach((function(A){n[A[0]]=t.cwrap.apply(t,A)}));var o=16,a=n.sizeOfH3Index(),f=n.sizeOfGeoCoord(),s=n.sizeOfGeoBoundary(),u=n.sizeOfGeoPolygon(),l=n.sizeOfGeofence(),h=n.sizeOfLinkedGeoPolygon(),c=n.sizeOfCoordIJ(),d={m:"m",m2:"m2",km:"km",km2:"km2",rads:"rads",rads2:"rads2"};function g(A){if("number"!=typeof A||A<0||A>15||Math.floor(A)!==A)throw new Error("Invalid resolution: "+A)}var w=/[^0-9a-fA-F]/;function p(A){if(Array.isArray(A)&&2===A.length&&Number.isInteger(A[0])&&Number.isInteger(A[1]))return A;if("string"!=typeof A||w.test(A))return[0,0];var e=parseInt(A.substring(0,A.length-8),o);return[parseInt(A.substring(A.length-8),o),e]}function B(A){if(A>=0)return A.toString(o);var e=v(8,(A&=2147483647).toString(o));return e=(parseInt(e[0],o)+8).toString(o)+e.substring(1)}function b(A,e){return B(e)+v(8,B(A))}function v(A,e){for(var r=A-e.length,t="",i=0;i<r;i++)t+="0";return t+=e}function m(A,e,r){for(var i=A.length,n=t._calloc(i,f),o=r?1:0,a=r?0:1,s=0;s<2*i;s+=2)t.HEAPF64.set([A[s/2][o],A[s/2][a]].map(U),n/8+s);return t.HEAPU32.set([i,n],e/4),e}function k(A){return[A,t.getTempRet0()]}function M(A){var e=k(A),r=e[0],t=e[1];return t?b(r,t):null}function Q(A,e){void 0===e&&(e=0);var r=t.getValue(A+4*e*2,"i32"),i=t.getValue(A+4*(2*e+1),"i32");return i?b(r,i):null}function y(A,e,r){t.HEAPU32.set(p(A),e/4+2*r)}function E(A,e){for(var r=[],t=0;t<e;t++){var i=Q(A,t);null!==i&&r.push(i)}return r}function x(A,e){for(var r=e.length,t=0;t<r;t++)y(e[t],A,t)}function D(A,e){var r=t._calloc(1,f);return t.HEAPF64.set([A,e].map(U),r/8),r}function _(A){return G(t.getValue(A,"double"))}function I(A){return[_(A),_(A+8)]}function F(A){return[_(A+8),_(A)]}function C(A,e,r){for(var i=t.getValue(A,"i32"),n=A+8,o=[],a=e?F:I,f=0;f<2*i;f+=2)o.push(a(n+8*f));return r&&o.push(o[0]),o}function P(A){var e=p(A),r=e[0],t=e[1];return Boolean(n.h3IsValid(r,t))}function U(A){return A*Math.PI/180}function G(A){return 180*A/Math.PI}r.UNITS=d,r.h3IndexToSplitLong=p,r.splitLongToh3Index=b,r.h3IsValid=P,r.h3IsPentagon=function(A){var e=p(A),r=e[0],t=e[1];return Boolean(n.h3IsPentagon(r,t))},r.h3IsResClassIII=function(A){var e=p(A),r=e[0],t=e[1];return Boolean(n.h3IsResClassIII(r,t))},r.h3GetBaseCell=function(A){var e=p(A),r=e[0],t=e[1];return n.h3GetBaseCell(r,t)},r.h3GetFaces=function(A){var e=p(A),r=e[0],i=e[1],o=n.maxFaceCount(r,i),a=t._malloc(4*o);n.h3GetFaces(r,i,a);var f=function(A,e){for(var r=[],i=0;i<e;i++){var n=t.getValue(A+4*i,"i32");n>=0&&r.push(n)}return r}(a,o);return t._free(a),f},r.h3GetResolution=function(A){var e=p(A),r=e[0],t=e[1];return n.h3IsValid(r,t)?n.h3GetResolution(r,t):-1},r.geoToH3=function(A,e,r){var i=t._malloc(f);t.HEAPF64.set([A,e].map(U),i/8);var o=M(n.geoToH3(i,r));return t._free(i),o},r.h3ToGeo=function(A){var e=t._malloc(f),r=p(A),i=r[0],o=r[1];n.h3ToGeo(i,o,e);var a=I(e);return t._free(e),a},r.h3ToGeoBoundary=function(A,e){var r=t._malloc(s),i=p(A),o=i[0],a=i[1];n.h3ToGeoBoundary(o,a,r);var f=C(r,e,e);return t._free(r),f},r.h3ToParent=function(A,e){var r=p(A),t=r[0],i=r[1];return M(n.h3ToParent(t,i,e))},r.h3ToChildren=function(A,e){if(!P(A))return[];var r=p(A),i=r[0],o=r[1],f=n.maxH3ToChildrenSize(i,o,e),s=t._calloc(f,a);n.h3ToChildren(i,o,e,s);var u=E(s,f);return t._free(s),u},r.h3ToCenterChild=function(A,e){var r=p(A),t=r[0],i=r[1];return M(n.h3ToCenterChild(t,i,e))},r.kRing=function(A,e){var r=p(A),i=r[0],o=r[1],f=n.maxKringSize(e),s=t._calloc(f,a);n.kRing(i,o,e,s);var u=E(s,f);return t._free(s),u},r.kRingDistances=function(A,e){var r=p(A),i=r[0],o=r[1],f=n.maxKringSize(e),s=t._calloc(f,a),u=t._calloc(f,4);n.kRingDistances(i,o,e,s,u);for(var l=[],h=0;h<e+1;h++)l.push([]);for(var c=0;c<2*f;c+=2){var d=t.getValue(s+4*c,"i32"),g=t.getValue(s+4*(c+1),"i32"),w=t.getValue(u+c/2*4,"i32");0===d&&0===g||l[w].push(b(d,g))}return t._free(s),t._free(u),l},r.hexRing=function(A,e){var r=0===e?1:6*e,i=t._calloc(r,a);if(0!==n.hexRing.apply(n,p(A).concat([e],[i])))throw t._free(i),new Error("Failed to get hexRing (encountered a pentagon?)");var o=E(i,r);return t._free(i),o},r.polyfill=function(A,e,r){if(g(e),r=Boolean(r),0===A.length||0===A[0].length)return[];"number"==typeof A[0][0]&&(A=[A]);var i=function(A,e){var r,i=A.length-1,n=t._calloc(u),o=0+l,a=o+4;if(m(A[0],n+0,e),i>0){r=t._calloc(i,l);for(var f=0;f<i;f++)m(A[f+1],r+l*f,e)}return t.setValue(n+o,i,"i32"),t.setValue(n+a,r,"i32"),n}(A,r),o=n.maxPolyfillSize(i,e),f=t._calloc(o,a);n.polyfill(i,e,f);var s=E(f,o);return t._free(f),function(A){var e=0+l,r=e+4;t._free(t.getValue(A+0+4,"i8*"));var i=t.getValue(A+e,"i32");if(i>0){for(var n=t.getValue(A+r,"i32"),o=0;o<i;o++)t._free(t.getValue(n+l*o+4,"i8*"));t._free(n)}t._free(A)}(i),s},r.h3SetToMultiPolygon=function(A,e){if(!A||!A.length)return[];var r=A.length,i=t._calloc(r,a);x(i,A);var o=t._calloc(h),f=o;n.h3SetToLinkedGeo(i,r,o);var s=function(A,e){for(var r,i,n,o,a=[],f=e?F:I;A;){for(a.push(r=[]),i=t.getValue(A,"i8*");i;){for(r.push(n=[]),o=t.getValue(i,"i8*");o;)n.push(f(o)),o=t.getValue(o+16,"i8*");e&&n.push(n[0]),i=t.getValue(i+8,"i8*")}A=t.getValue(A+8,"i8*")}return a}(o,e);return n.destroyLinkedPolygon(f),t._free(f),t._free(i),s},r.compact=function(A){if(!A||!A.length)return[];var e=A.length,r=t._calloc(e,a);x(r,A);var i=t._calloc(e,a);if(0!==n.compact(r,i,e))throw t._free(r),t._free(i),new Error("Failed to compact, malformed input data (duplicate hexagons?)");var o=E(i,e);return t._free(r),t._free(i),o},r.uncompact=function(A,e){if(g(e),!A||!A.length)return[];var r=A.length,i=t._calloc(r,a);x(i,A);var o=n.maxUncompactSize(i,r,e),f=t._calloc(o,a);if(0!==n.uncompact(i,r,f,o,e))throw t._free(i),t._free(f),new Error("Failed to uncompact (bad resolution?)");var s=E(f,o);return t._free(i),t._free(f),s},r.h3IndexesAreNeighbors=function(A,e){var r=p(A),t=r[0],i=r[1],o=p(e),a=o[0],f=o[1];return Boolean(n.h3IndexesAreNeighbors(t,i,a,f))},r.getH3UnidirectionalEdge=function(A,e){var r=p(A),t=r[0],i=r[1],o=p(e),a=o[0],f=o[1];return M(n.getH3UnidirectionalEdge(t,i,a,f))},r.getOriginH3IndexFromUnidirectionalEdge=function(A){var e=p(A),r=e[0],t=e[1];return M(n.getOriginH3IndexFromUnidirectionalEdge(r,t))},r.getDestinationH3IndexFromUnidirectionalEdge=function(A){var e=p(A),r=e[0],t=e[1];return M(n.getDestinationH3IndexFromUnidirectionalEdge(r,t))},r.h3UnidirectionalEdgeIsValid=function(A){var e=p(A),r=e[0],t=e[1];return Boolean(n.h3UnidirectionalEdgeIsValid(r,t))},r.getH3IndexesFromUnidirectionalEdge=function(A){var e=p(A),r=e[0],i=e[1],o=t._calloc(2,a);n.getH3IndexesFromUnidirectionalEdge(r,i,o);var f=E(o,2);return t._free(o),f},r.getH3UnidirectionalEdgesFromHexagon=function(A){var e=p(A),r=e[0],i=e[1],o=t._calloc(6,a);n.getH3UnidirectionalEdgesFromHexagon(r,i,o);var f=E(o,6);return t._free(o),f},r.getH3UnidirectionalEdgeBoundary=function(A,e){var r=t._malloc(s),i=p(A),o=i[0],a=i[1];n.getH3UnidirectionalEdgeBoundary(o,a,r);var f=C(r,e);return t._free(r),f},r.h3Distance=function(A,e){var r=p(A),t=r[0],i=r[1],o=p(e),a=o[0],f=o[1];return n.h3Distance(t,i,a,f)},r.h3Line=function(A,e){var r=p(A),i=r[0],o=r[1],f=p(e),s=f[0],u=f[1],l=n.h3LineSize(i,o,s,u);if(l<0)throw new Error("Line cannot be calculated");var h=t._calloc(l,a);n.h3Line(i,o,s,u,h);var c=E(h,l);return t._free(h),c},r.experimentalH3ToLocalIj=function(A,e){var r,i=t._malloc(c),o=n.experimentalH3ToLocalIj.apply(n,p(A).concat(p(e),[i])),a=(r=i,{i:t.getValue(r,"i32"),j:t.getValue(r+4,"i32")});switch(t._free(i),o){case 0:return a;case 1:throw new Error("Incompatible origin and index.");case 2:default:throw new Error("Local IJ coordinates undefined for this origin and index pair. The index may be too far from the origin.");case 3:case 4:case 5:throw new Error("Encountered possible pentagon distortion")}},r.experimentalLocalIjToH3=function(A,e){if(!e||"number"!=typeof e.i||"number"!=typeof e.j)throw new Error("Coordinates must be provided as an {i, j} object");var r,i,o,f,s=t._malloc(c),u=t._malloc(a);r=s,o=(i=e).i,f=i.j,t.setValue(r,o,"i32"),t.setValue(r+4,f,"i32");var l=n.experimentalLocalIjToH3.apply(n,p(A).concat([s],[u])),h=Q(u);if(t._free(s),t._free(u),0!==l)throw new Error("Index not defined for this origin and IJ coordinates pair. IJ coordinates may be too far from origin, or a pentagon distortion was encountered.");return h},r.pointDist=function(A,e,r){var i,o=D(A[0],A[1]),a=D(e[0],e[1]);switch(r){case d.m:i=n.pointDistM(o,a);break;case d.km:i=n.pointDistKm(o,a);break;case d.rads:i=n.pointDistRads(o,a);break;default:i=null}if(t._free(o),t._free(a),null===i)throw new Error("Unknown unit: "+r);return i},r.cellArea=function(A,e){var r=p(A),t=r[0],i=r[1];switch(e){case d.m2:return n.cellAreaM2(t,i);case d.km2:return n.cellAreaKm2(t,i);case d.rads2:return n.cellAreaRads2(t,i);default:throw new Error("Unknown unit: "+e)}},r.exactEdgeLength=function(A,e){var r=p(A),t=r[0],i=r[1];switch(e){case d.m:return n.exactEdgeLengthM(t,i);case d.km:return n.exactEdgeLengthKm(t,i);case d.rads:return n.exactEdgeLengthRads(t,i);default:throw new Error("Unknown unit: "+e)}},r.hexArea=function(A,e){switch(g(A),e){case d.m2:return n.hexAreaM2(A);case d.km2:return n.hexAreaKm2(A);default:throw new Error("Unknown unit: "+e)}},r.edgeLength=function(A,e){switch(g(A),e){case d.m:return n.edgeLengthM(A);case d.km:return n.edgeLengthKm(A);default:throw new Error("Unknown unit: "+e)}},r.numHexagons=function(A){g(A);var e=k(n.numHexagons(A)),r=e[0],t=e[1];return t?t*Math.pow(2,32)+r:r},r.getRes0Indexes=function(){var A=n.res0IndexCount(),e=t._malloc(a*A);n.getRes0Indexes(e);var r=E(e,A);return t._free(e),r},r.getPentagonIndexes=function(A){g(A);var e=n.pentagonIndexCount(),r=t._malloc(a*e);n.getPentagonIndexes(A,r);var i=E(r,e);return t._free(r),i},r.degsToRads=U,r.radsToDegs=G},{}],8:[function(A,e,r){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
r.read=function(A,e,r,t,i){var n,o,a=8*i-t-1,f=(1<<a)-1,s=f>>1,u=-7,l=r?i-1:0,h=r?-1:1,c=A[e+l];for(l+=h,n=c&(1<<-u)-1,c>>=-u,u+=a;u>0;n=256*n+A[e+l],l+=h,u-=8);for(o=n&(1<<-u)-1,n>>=-u,u+=t;u>0;o=256*o+A[e+l],l+=h,u-=8);if(0===n)n=1-s;else{if(n===f)return o?NaN:1/0*(c?-1:1);o+=Math.pow(2,t),n-=s}return(c?-1:1)*o*Math.pow(2,n-t)},r.write=function(A,e,r,t,i,n){var o,a,f,s=8*n-i-1,u=(1<<s)-1,l=u>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,c=t?0:n-1,d=t?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-o))<1&&(o--,f*=2),(e+=o+l>=1?h/f:h*Math.pow(2,1-l))*f>=2&&(o++,f/=2),o+l>=u?(a=0,o=u):o+l>=1?(a=(e*f-1)*Math.pow(2,i),o+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,i),o=0));i>=8;A[r+c]=255&a,c+=d,a/=256,i-=8);for(o=o<<i|a,s+=i;s>0;A[r+c]=255&o,c+=d,o/=256,s-=8);A[r+c-d]|=128*g}},{}],9:[function(A,e,r){"use strict";e.exports=i;var t=A("ieee754");function i(A){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(A)?A:new Uint8Array(A||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var n=4294967296,o=1/n,a="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function f(A){return A.type===i.Bytes?A.readVarint()+A.pos:A.pos+1}function s(A,e,r){return r?4294967296*e+(A>>>0):4294967296*(e>>>0)+(A>>>0)}function u(A,e,r){var t=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(t);for(var i=r.pos-1;i>=A;i--)r.buf[i+t]=r.buf[i]}function l(A,e){for(var r=0;r<A.length;r++)e.writeVarint(A[r])}function h(A,e){for(var r=0;r<A.length;r++)e.writeSVarint(A[r])}function c(A,e){for(var r=0;r<A.length;r++)e.writeFloat(A[r])}function d(A,e){for(var r=0;r<A.length;r++)e.writeDouble(A[r])}function g(A,e){for(var r=0;r<A.length;r++)e.writeBoolean(A[r])}function w(A,e){for(var r=0;r<A.length;r++)e.writeFixed32(A[r])}function p(A,e){for(var r=0;r<A.length;r++)e.writeSFixed32(A[r])}function B(A,e){for(var r=0;r<A.length;r++)e.writeFixed64(A[r])}function b(A,e){for(var r=0;r<A.length;r++)e.writeSFixed64(A[r])}function v(A,e){return(A[e]|A[e+1]<<8|A[e+2]<<16)+16777216*A[e+3]}function m(A,e,r){A[r]=e,A[r+1]=e>>>8,A[r+2]=e>>>16,A[r+3]=e>>>24}function k(A,e){return(A[e]|A[e+1]<<8|A[e+2]<<16)+(A[e+3]<<24)}i.prototype={destroy:function(){this.buf=null},readFields:function(A,e,r){for(r=r||this.length;this.pos<r;){var t=this.readVarint(),i=t>>3,n=this.pos;this.type=7&t,A(i,e,this),this.pos===n&&this.skip(t)}return e},readMessage:function(A,e){return this.readFields(A,e,this.readVarint()+this.pos)},readFixed32:function(){var A=v(this.buf,this.pos);return this.pos+=4,A},readSFixed32:function(){var A=k(this.buf,this.pos);return this.pos+=4,A},readFixed64:function(){var A=v(this.buf,this.pos)+v(this.buf,this.pos+4)*n;return this.pos+=8,A},readSFixed64:function(){var A=v(this.buf,this.pos)+k(this.buf,this.pos+4)*n;return this.pos+=8,A},readFloat:function(){var A=t.read(this.buf,this.pos,!0,23,4);return this.pos+=4,A},readDouble:function(){var A=t.read(this.buf,this.pos,!0,52,8);return this.pos+=8,A},readVarint:function(A){var e,r,t=this.buf;return e=127&(r=t[this.pos++]),r<128?e:(e|=(127&(r=t[this.pos++]))<<7,r<128?e:(e|=(127&(r=t[this.pos++]))<<14,r<128?e:(e|=(127&(r=t[this.pos++]))<<21,r<128?e:function(A,e,r){var t,i,n=r.buf;if(i=n[r.pos++],t=(112&i)>>4,i<128)return s(A,t,e);if(i=n[r.pos++],t|=(127&i)<<3,i<128)return s(A,t,e);if(i=n[r.pos++],t|=(127&i)<<10,i<128)return s(A,t,e);if(i=n[r.pos++],t|=(127&i)<<17,i<128)return s(A,t,e);if(i=n[r.pos++],t|=(127&i)<<24,i<128)return s(A,t,e);if(i=n[r.pos++],t|=(1&i)<<31,i<128)return s(A,t,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=t[this.pos]))<<28,A,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var A=this.readVarint();return A%2==1?(A+1)/-2:A/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var A=this.readVarint()+this.pos,e=this.pos;return this.pos=A,A-e>=12&&a?function(A,e,r){return a.decode(A.subarray(e,r))}(this.buf,e,A):function(A,e,r){var t="",i=e;for(;i<r;){var n,o,a,f=A[i],s=null,u=f>239?4:f>223?3:f>191?2:1;if(i+u>r)break;1===u?f<128&&(s=f):2===u?128==(192&(n=A[i+1]))&&(s=(31&f)<<6|63&n)<=127&&(s=null):3===u?(n=A[i+1],o=A[i+2],128==(192&n)&&128==(192&o)&&((s=(15&f)<<12|(63&n)<<6|63&o)<=2047||s>=55296&&s<=57343)&&(s=null)):4===u&&(n=A[i+1],o=A[i+2],a=A[i+3],128==(192&n)&&128==(192&o)&&128==(192&a)&&((s=(15&f)<<18|(63&n)<<12|(63&o)<<6|63&a)<=65535||s>=1114112)&&(s=null)),null===s?(s=65533,u=1):s>65535&&(s-=65536,t+=String.fromCharCode(s>>>10&1023|55296),s=56320|1023&s),t+=String.fromCharCode(s),i+=u}return t}(this.buf,e,A)},readBytes:function(){var A=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,A);return this.pos=A,e},readPackedVarint:function(A,e){if(this.type!==i.Bytes)return A.push(this.readVarint(e));var r=f(this);for(A=A||[];this.pos<r;)A.push(this.readVarint(e));return A},readPackedSVarint:function(A){if(this.type!==i.Bytes)return A.push(this.readSVarint());var e=f(this);for(A=A||[];this.pos<e;)A.push(this.readSVarint());return A},readPackedBoolean:function(A){if(this.type!==i.Bytes)return A.push(this.readBoolean());var e=f(this);for(A=A||[];this.pos<e;)A.push(this.readBoolean());return A},readPackedFloat:function(A){if(this.type!==i.Bytes)return A.push(this.readFloat());var e=f(this);for(A=A||[];this.pos<e;)A.push(this.readFloat());return A},readPackedDouble:function(A){if(this.type!==i.Bytes)return A.push(this.readDouble());var e=f(this);for(A=A||[];this.pos<e;)A.push(this.readDouble());return A},readPackedFixed32:function(A){if(this.type!==i.Bytes)return A.push(this.readFixed32());var e=f(this);for(A=A||[];this.pos<e;)A.push(this.readFixed32());return A},readPackedSFixed32:function(A){if(this.type!==i.Bytes)return A.push(this.readSFixed32());var e=f(this);for(A=A||[];this.pos<e;)A.push(this.readSFixed32());return A},readPackedFixed64:function(A){if(this.type!==i.Bytes)return A.push(this.readFixed64());var e=f(this);for(A=A||[];this.pos<e;)A.push(this.readFixed64());return A},readPackedSFixed64:function(A){if(this.type!==i.Bytes)return A.push(this.readSFixed64());var e=f(this);for(A=A||[];this.pos<e;)A.push(this.readSFixed64());return A},skip:function(A){var e=7&A;if(e===i.Varint)for(;this.buf[this.pos++]>127;);else if(e===i.Bytes)this.pos=this.readVarint()+this.pos;else if(e===i.Fixed32)this.pos+=4;else{if(e!==i.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(A,e){this.writeVarint(A<<3|e)},realloc:function(A){for(var e=this.length||16;e<this.pos+A;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(A){this.realloc(4),m(this.buf,A,this.pos),this.pos+=4},writeSFixed32:function(A){this.realloc(4),m(this.buf,A,this.pos),this.pos+=4},writeFixed64:function(A){this.realloc(8),m(this.buf,-1&A,this.pos),m(this.buf,Math.floor(A*o),this.pos+4),this.pos+=8},writeSFixed64:function(A){this.realloc(8),m(this.buf,-1&A,this.pos),m(this.buf,Math.floor(A*o),this.pos+4),this.pos+=8},writeVarint:function(A){(A=+A||0)>268435455||A<0?function(A,e){var r,t;A>=0?(r=A%4294967296|0,t=A/4294967296|0):(t=~(-A/4294967296),4294967295^(r=~(-A%4294967296))?r=r+1|0:(r=0,t=t+1|0));if(A>=0x10000000000000000||A<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(A,e,r){r.buf[r.pos++]=127&A|128,A>>>=7,r.buf[r.pos++]=127&A|128,A>>>=7,r.buf[r.pos++]=127&A|128,A>>>=7,r.buf[r.pos++]=127&A|128,A>>>=7,r.buf[r.pos]=127&A}(r,0,e),function(A,e){var r=(7&A)<<4;if(e.buf[e.pos++]|=r|((A>>>=3)?128:0),!A)return;if(e.buf[e.pos++]=127&A|((A>>>=7)?128:0),!A)return;if(e.buf[e.pos++]=127&A|((A>>>=7)?128:0),!A)return;if(e.buf[e.pos++]=127&A|((A>>>=7)?128:0),!A)return;if(e.buf[e.pos++]=127&A|((A>>>=7)?128:0),!A)return;e.buf[e.pos++]=127&A}(t,e)}(A,this):(this.realloc(4),this.buf[this.pos++]=127&A|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=A>>>7&127))))},writeSVarint:function(A){this.writeVarint(A<0?2*-A-1:2*A)},writeBoolean:function(A){this.writeVarint(Boolean(A))},writeString:function(A){A=String(A),this.realloc(4*A.length),this.pos++;var e=this.pos;this.pos=function(A,e,r){for(var t,i,n=0;n<e.length;n++){if((t=e.charCodeAt(n))>55295&&t<57344){if(!i){t>56319||n+1===e.length?(A[r++]=239,A[r++]=191,A[r++]=189):i=t;continue}if(t<56320){A[r++]=239,A[r++]=191,A[r++]=189,i=t;continue}t=i-55296<<10|t-56320|65536,i=null}else i&&(A[r++]=239,A[r++]=191,A[r++]=189,i=null);t<128?A[r++]=t:(t<2048?A[r++]=t>>6|192:(t<65536?A[r++]=t>>12|224:(A[r++]=t>>18|240,A[r++]=t>>12&63|128),A[r++]=t>>6&63|128),A[r++]=63&t|128)}return r}(this.buf,A,this.pos);var r=this.pos-e;r>=128&&u(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(A){this.realloc(4),t.write(this.buf,A,this.pos,!0,23,4),this.pos+=4},writeDouble:function(A){this.realloc(8),t.write(this.buf,A,this.pos,!0,52,8),this.pos+=8},writeBytes:function(A){var e=A.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=A[r]},writeRawMessage:function(A,e){this.pos++;var r=this.pos;A(e,this);var t=this.pos-r;t>=128&&u(r,t,this),this.pos=r-1,this.writeVarint(t),this.pos+=t},writeMessage:function(A,e,r){this.writeTag(A,i.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(A,e){e.length&&this.writeMessage(A,l,e)},writePackedSVarint:function(A,e){e.length&&this.writeMessage(A,h,e)},writePackedBoolean:function(A,e){e.length&&this.writeMessage(A,g,e)},writePackedFloat:function(A,e){e.length&&this.writeMessage(A,c,e)},writePackedDouble:function(A,e){e.length&&this.writeMessage(A,d,e)},writePackedFixed32:function(A,e){e.length&&this.writeMessage(A,w,e)},writePackedSFixed32:function(A,e){e.length&&this.writeMessage(A,p,e)},writePackedFixed64:function(A,e){e.length&&this.writeMessage(A,B,e)},writePackedSFixed64:function(A,e){e.length&&this.writeMessage(A,b,e)},writeBytesField:function(A,e){this.writeTag(A,i.Bytes),this.writeBytes(e)},writeFixed32Field:function(A,e){this.writeTag(A,i.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(A,e){this.writeTag(A,i.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(A,e){this.writeTag(A,i.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(A,e){this.writeTag(A,i.Fixed64),this.writeSFixed64(e)},writeVarintField:function(A,e){this.writeTag(A,i.Varint),this.writeVarint(e)},writeSVarintField:function(A,e){this.writeTag(A,i.Varint),this.writeSVarint(e)},writeStringField:function(A,e){this.writeTag(A,i.Bytes),this.writeString(e)},writeFloatField:function(A,e){this.writeTag(A,i.Fixed32),this.writeFloat(e)},writeDoubleField:function(A,e){this.writeTag(A,i.Fixed64),this.writeDouble(e)},writeBooleanField:function(A,e){this.writeVarintField(A,Boolean(e))}}},{ieee754:8}],10:[function(A,e,r){var t=A("pbf"),i=A("./lib/geojson_wrapper");function n(A){var e=new t;return function(A,e){for(var r in A.layers)e.writeMessage(3,o,A.layers[r])}(A,e),e.finish()}function o(A,e){var r;e.writeVarintField(15,A.version||1),e.writeStringField(1,A.name||""),e.writeVarintField(5,A.extent||4096);var t={keys:[],values:[],keycache:{},valuecache:{}};for(r=0;r<A.length;r++)t.feature=A.feature(r),e.writeMessage(2,a,t);var i=t.keys;for(r=0;r<i.length;r++)e.writeStringField(3,i[r]);var n=t.values;for(r=0;r<n.length;r++)e.writeMessage(4,h,n[r])}function a(A,e){var r=A.feature;void 0!==r.id&&e.writeVarintField(1,r.id),e.writeMessage(2,f,A),e.writeVarintField(3,r.type),e.writeMessage(4,l,r)}function f(A,e){var r=A.feature,t=A.keys,i=A.values,n=A.keycache,o=A.valuecache;for(var a in r.properties){var f=r.properties[a],s=n[a];if(null!==f){void 0===s&&(t.push(a),s=t.length-1,n[a]=s),e.writeVarint(s);var u=typeof f;"string"!==u&&"boolean"!==u&&"number"!==u&&(f=JSON.stringify(f));var l=u+":"+f,h=o[l];void 0===h&&(i.push(f),h=i.length-1,o[l]=h),e.writeVarint(h)}}}function s(A,e){return(e<<3)+(7&A)}function u(A){return A<<1^A>>31}function l(A,e){for(var r=A.loadGeometry(),t=A.type,i=0,n=0,o=r.length,a=0;a<o;a++){var f=r[a],l=1;1===t&&(l=f.length),e.writeVarint(s(1,l));for(var h=3===t?f.length-1:f.length,c=0;c<h;c++){1===c&&1!==t&&e.writeVarint(s(2,h-1));var d=f[c].x-i,g=f[c].y-n;e.writeVarint(u(d)),e.writeVarint(u(g)),i+=d,n+=g}3===t&&e.writeVarint(s(7,1))}}function h(A,e){var r=typeof A;"string"===r?e.writeStringField(1,A):"boolean"===r?e.writeBooleanField(7,A):"number"===r&&(A%1!=0?e.writeDoubleField(3,A):A<0?e.writeSVarintField(6,A):e.writeVarintField(5,A))}e.exports=n,e.exports.fromVectorTileJs=n,e.exports.fromGeojsonVt=function(A,e){e=e||{};var r={};for(var t in A)r[t]=new i(A[t].features,e),r[t].name=t,r[t].version=e.version,r[t].extent=e.extent;return n({layers:r})},e.exports.GeoJSONWrapper=i},{"./lib/geojson_wrapper":11,pbf:9}],11:[function(A,e,r){"use strict";var t=A("@mapbox/point-geometry"),i=A("@mapbox/vector-tile").VectorTileFeature;function n(A,e){this.options=e||{},this.features=A,this.length=A.length}function o(A,e){this.id="number"==typeof A.id?A.id:void 0,this.type=A.type,this.rawGeometry=1===A.type?[A.geometry]:A.geometry,this.properties=A.tags,this.extent=e||4096}e.exports=n,n.prototype.feature=function(A){return new o(this.features[A],this.options.extent)},o.prototype.loadGeometry=function(){var A=this.rawGeometry;this.geometry=[];for(var e=0;e<A.length;e++){for(var r=A[e],i=[],n=0;n<r.length;n++)i.push(new t(r[n][0],r[n][1]));this.geometry.push(i)}return this.geometry},o.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var A=this.geometry,e=1/0,r=-1/0,t=1/0,i=-1/0,n=0;n<A.length;n++)for(var o=A[n],a=0;a<o.length;a++){var f=o[a];e=Math.min(e,f.x),r=Math.max(r,f.x),t=Math.min(t,f.y),i=Math.max(i,f.y)}return[e,t,r,i]},o.prototype.toGeoJSON=i.prototype.toGeoJSON},{"@mapbox/point-geometry":1,"@mapbox/vector-tile":2}],12:[function(A,e,r){const t=globalThis.maplibregl,i={tovt:A("geojson-vt"),topbf:A("vt-pbf"),h3:A("h3-js")},n={geometry_type:"Polygon",timeout:0,debug:!1,promoteId:!0,https:!0},o=(A,e)=>new Promise(((r,t)=>{var i;r((i=e,{type:"FeatureCollection",features:A.cells.map((A=>{const e={properties:A,geometry:{type:i.geometry_type,coordinates:i.generate(A.h3id)}};return i.promoteID||(e.id=parseInt(A.h3id,16)),e}))}))})),a=A=>{const e=["type","data","maxzoom","attribution","buffer","filter","tolerance","cluster","clusterRadius","clusterMaxZoom","clusterMinPoints","clusterProperties","lineMetrics","generateId","promoteId"];return f(A,((A,r)=>e.includes(A)))},f=(A,e)=>Object.fromEntries(Object.entries(A).filter((([A,r])=>e(A,r))));t.Map.prototype.addH3TSource=function(A,e){const r=Object.assign({},n,e,{type:"vector",format:"pbf"});r.generate=A=>"Polygon"===r.geometry_type?[i.h3.h3ToGeoBoundary(A,!0)]:i.h3.h3ToGeo(A).reverse(),r.promoteId&&(r.promoteId="h3id"),t.addProtocol("h3tiles",((A,e)=>{const t=`http${!1===r.https?"":"s"}://${A.url.split("://")[1]}`,n=A.url.split(/\/|\./i),a=n.length,f=n.slice(a-4,a-1).map((A=>1*A)),s=new AbortController,u=s.signal;let l;r.timeout>0&&setTimeout((()=>s.abort()),r.timeout),fetch(t,{signal:u}).then((A=>{if(A.ok)return l=performance.now(),A.json();throw new Error(A.statusText)})).then((A=>o(A,r))).then((A=>{const t=i.tovt(A).getTile(...f),n={};n[r.sourcelayer]=t;const o=i.topbf.fromGeojsonVt(n,{version:2});r.debug&&console.log(`${f}: ${A.features.length} features, ${(performance.now()-l).toFixed(0)} ms`),e(null,o,null,null)})).catch((A=>{"AbortError"===A.name&&(A.message=`Timeout: Tile .../${f.join("/")}.h3t is taking too long to fetch`),e(new Error(A))}))})),this.addSource(A,(A=>{const e=["type","url","tiles","bounds","scheme","minzoom","maxzoom","attribution","promoteId","volatile"];return f(A,((A,r)=>e.includes(A)))})(r))};t.Map.prototype.addH3JSource=function(A,e){const r=new AbortController,t=r.signal,f=Object.assign({},n,e,{type:"geojson"});let s;if(f.generate=A=>"Polygon"===f.geometry_type?[i.h3.h3ToGeoBoundary(A,!0)]:i.h3.h3ToGeo(A).reverse(),f.promoteId&&(f.promoteId="h3id"),f.timeout>0&&setTimeout((()=>r.abort()),f.timeout),"string"==typeof f.data)return f.timeout>0&&setTimeout((()=>r.abort()),f.timeout),new Promise(((e,r)=>{fetch(f.data,{signal:t}).then((A=>{if(A.ok)return s=performance.now(),A.json();throw new Error(A.statusText)})).then((A=>o(A,f))).then((r=>{f.data=r,this.addSource(A,a(f)),f.debug&&console.log(`${r.features.length} features, ${(performance.now()-s).toFixed(0)} ms`),e(this)})).catch((A=>{"AbortError"===A.name&&(A.message=`Timeout: Source file ${f.data} is taking too long to fetch`),console.error(A.message)}))}));o(f.data,f).then((e=>(f.data=e,this.addSource(A,a(f)),new Promise(((A,e)=>A(this))))))};t.Map.prototype.setH3JData=function(A,e,r){const t=Object.assign({},n,r);t.generate=A=>"Polygon"===t.geometry_type?[i.h3.h3ToGeoBoundary(A,!0)]:i.h3.h3ToGeo(A).reverse(),t.promoteId&&(t.promoteId="h3id");const a=new AbortController,f=a.signal,s=this.getSource(A);let u;"string"==typeof e?(t.timeout>0&&setTimeout((()=>a.abort()),t.timeout),fetch(e,{signal:f}).then((A=>{if(A.ok)return u=performance.now(),A.json();throw new Error(A.statusText)})).then((A=>o(A,t))).then((A=>{s.setData(A),t.debug&&console.log(`${A.features.length} features, ${(performance.now()-u).toFixed(0)} ms`)})).catch((A=>{"AbortError"===A.name&&(A.message=`Timeout: Data file ${e} is taking too long to fetch`),console.error(A.message)}))):o(e,t).then((A=>s.setData(A)))}},{"geojson-vt":6,"h3-js":7,"vt-pbf":10}]},{},[12])(12)}));</script>
<style type="text/css">svg.svelte-d2loi5{display:block;fill:#e15042}.sprite-icon.svelte-w9y5n9.svelte-w9y5n9{align-self:center;justify-self:center;opacity:.75;background-repeat:no-repeat}li.svelte-w9y5n9.svelte-w9y5n9{text-align:left;cursor:default;display:grid;grid-template-columns:40px 1fr;color:var(--color-text);padding:8px 0;font-size:14px;line-height:18px;min-width:fit-content;outline:0}li.svelte-w9y5n9.svelte-w9y5n9:first-child{padding-top:10px}li.svelte-w9y5n9.svelte-w9y5n9:last-child{padding-bottom:10px}li.picked.svelte-w9y5n9.svelte-w9y5n9{background-color:#e7edff}li.picked.svelte-w9y5n9 .secondary.svelte-w9y5n9{color:#96a4c7;padding-left:4px}li.picked.svelte-w9y5n9 .line2.svelte-w9y5n9{color:#96a4c7}li.selected.svelte-w9y5n9.svelte-w9y5n9{background-color:#f3f6ff}li.selected.svelte-w9y5n9.svelte-w9y5n9{animation:svelte-w9y5n9-backAndForth 5s linear infinite}li.selected.svelte-w9y5n9 .primary.svelte-w9y5n9{color:#2b8bfb}li.selected.svelte-w9y5n9 .secondary.svelte-w9y5n9{color:#a2adc7;padding-left:4px}li.selected.svelte-w9y5n9 .line2.svelte-w9y5n9{color:#a2adc7}li.svelte-w9y5n9>img.svelte-w9y5n9{align-self:center;justify-self:center;opacity:.75}.texts.svelte-w9y5n9.svelte-w9y5n9{padding:0 17px 0 0}.texts.svelte-w9y5n9>.svelte-w9y5n9{white-space:nowrap;display:block;min-width:fit-content}.primary.svelte-w9y5n9.svelte-w9y5n9{font-weight:600}.secondary.svelte-w9y5n9.svelte-w9y5n9{color:#aeb6c7;padding-left:4px}.line2.svelte-w9y5n9.svelte-w9y5n9{color:#aeb6c7}@keyframes svelte-w9y5n9-backAndForth{0%{transform:translate(0)}10%{transform:translate(0)}45%{transform:translate(calc(-100% + 270px))}55%{transform:translate(calc(-100% + 270px))}90%{transform:translate(0)}to{transform:translate(0)}}div.svelte-1ocfouu{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);pointer-events:none;display:flex;align-items:center}.loading-icon.svelte-1ocfouu{animation:svelte-1ocfouu-rotate .8s infinite cubic-bezier(.45,.05,.55,.95)}@keyframes svelte-1ocfouu-rotate{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}svg.svelte-gzo3ar.svelte-gzo3ar{display:block;fill:#6b7c93;stroke:#6b7c93}.list-icon.svelte-gzo3ar.svelte-gzo3ar{grid-row:1/3;align-self:center;margin:8px}.in-map.svelte-gzo3ar.svelte-gzo3ar{height:30px}.maplibregl-canvas-container .marker-selected{z-index:1}.maplibregl-canvas-container svg.svelte-gzo3ar path.svelte-gzo3ar,.leaflet-map-pane svg.svelte-gzo3ar path.svelte-gzo3ar{fill:#3170fe;stroke:#3170fe}.marker-selected svg.svelte-gzo3ar path.svelte-gzo3ar{fill:#98b7ff;stroke:#3170fe}.marker-reverse svg.svelte-gzo3ar path.svelte-gzo3ar{fill:silver;stroke:gray}.marker-interactive{cursor:pointer!important}.maptiler-gc-popup>.maplibregl-popup-content{padding:2px 8px}svg.svelte-en2qvf{display:block;fill:var(--color-icon-button)}circle.svelte-1aq105l{stroke-width:1.875;fill:none}path.svelte-1aq105l{stroke-width:1.875;stroke-linecap:round}svg.svelte-1aq105l{display:block;stroke:var(--color-icon-button)}form.svelte-bz0zu3.svelte-bz0zu3{font-family:Open Sans,Ubuntu,Helvetica Neue,Arial,Helvetica,sans-serif;position:relative;background-color:#fff;z-index:10;border-radius:4px;margin:0;transition:max-width .25s;box-shadow:0 2px 5px #33335926;--color-text:#444952;--color-icon-button:#444952}form.svelte-bz0zu3.svelte-bz0zu3,form.svelte-bz0zu3 .svelte-bz0zu3,form.svelte-bz0zu3 .svelte-bz0zu3:after,form.svelte-bz0zu3 .svelte-bz0zu3:before{box-sizing:border-box}form.can-collapse.svelte-bz0zu3.svelte-bz0zu3{max-width:29px}form.can-collapse.svelte-bz0zu3 input.svelte-bz0zu3::placeholder{transition:opacity .25s;opacity:0}form.svelte-bz0zu3.svelte-bz0zu3,form.svelte-bz0zu3.svelte-bz0zu3:focus-within,form.svelte-bz0zu3.svelte-bz0zu3:hover{width:270px;max-width:270px}form.svelte-bz0zu3 input.svelte-bz0zu3::placeholder,form.svelte-bz0zu3:focus-within input.svelte-bz0zu3::placeholder,form.svelte-bz0zu3:hover input.svelte-bz0zu3::placeholder{opacity:1}input.svelte-bz0zu3.svelte-bz0zu3{font:inherit;font-size:14px;flex-grow:1;min-height:29px;background-color:transparent;color:#444952;white-space:nowrap;overflow:hidden;border:0;margin:0;padding:0}input.svelte-bz0zu3.svelte-bz0zu3:focus{color:#444952;outline:0;outline:none;box-shadow:none}ul.svelte-bz0zu3.svelte-bz0zu3,div.error.svelte-bz0zu3.svelte-bz0zu3,div.no-results.svelte-bz0zu3.svelte-bz0zu3{background-color:#fff;border-radius:4px;left:0;list-style:none;margin:0;padding:0;position:absolute;width:100%;top:calc(100% + 6px);overflow:hidden}ul.svelte-bz0zu3.svelte-bz0zu3{font-size:14px;line-height:16px;box-shadow:0 5px 10px #33335926}div.error.svelte-bz0zu3.svelte-bz0zu3,div.no-results.svelte-bz0zu3.svelte-bz0zu3{font:inherit;line-height:18px;font-size:12px;display:flex;gap:16px}div.error.svelte-bz0zu3.svelte-bz0zu3{padding:16px;font-weight:600;color:#e25041;background-color:#fbeae8}div.error.svelte-bz0zu3 div.svelte-bz0zu3{flex-grow:1}div.error.svelte-bz0zu3 svg{flex-shrink:0;width:20px;height:20px}div.error.svelte-bz0zu3 button.svelte-bz0zu3{flex-shrink:0}div.error.svelte-bz0zu3 button.svelte-bz0zu3>svg{width:13px;fill:#e25041}div.error.svelte-bz0zu3 button.svelte-bz0zu3:hover svg,div.error.svelte-bz0zu3 button.svelte-bz0zu3:active svg{fill:#444952}div.no-results.svelte-bz0zu3.svelte-bz0zu3{padding:14px 24px 14px 16px;font-weight:400;color:#6b7c93;box-shadow:0 5px 10px #33335926}div.no-results.svelte-bz0zu3 svg{margin-top:4px;flex-shrink:0;width:20px;height:20px;width:30px;height:30px}.leaflet-bottom ul.options.svelte-bz0zu3.svelte-bz0zu3,.maplibregl-ctrl-bottom-left ul.options.svelte-bz0zu3.svelte-bz0zu3,.maplibregl-ctrl-bottom-right ul.options.svelte-bz0zu3.svelte-bz0zu3{top:auto;bottom:calc(100% + 6px)}button.svelte-bz0zu3.svelte-bz0zu3{padding:0;margin:0;border:0;background-color:transparent;height:auto;width:auto}button.svelte-bz0zu3.svelte-bz0zu3:hover{background-color:transparent}button.svelte-bz0zu3:hover svg,button.svelte-bz0zu3:active svg{fill:#2b8bfb}.input-group.svelte-bz0zu3.svelte-bz0zu3{display:flex;align-items:stretch;gap:7px;padding-inline:8px;border-radius:4px;overflow:hidden}.input-group.svelte-bz0zu3.svelte-bz0zu3:focus-within{outline:#2b8bfb solid 2px}.search-button.svelte-bz0zu3.svelte-bz0zu3{flex-shrink:0}.maplibregl-ctrl-geocoder:not(.maptiler-ctrl) .search-button svg{width:12px!important;transform:translate(.5px)}.clear-button-container.svelte-bz0zu3.svelte-bz0zu3{display:flex;display:none;position:relative;align-items:stretch}.clear-button-container.displayable.svelte-bz0zu3.svelte-bz0zu3{display:flex;flex-shrink:0}.maplibregl-ctrl-geocoder{position:relative;z-index:3}.maptiler-ctrl:not(:empty){box-shadow:none}.maptiler-ctrl .input-group.svelte-bz0zu3.svelte-bz0zu3{padding-inline:8px;border:white solid 2px}.maptiler-ctrl .input-group.svelte-bz0zu3.svelte-bz0zu3:focus-within{border:#2b8bfb solid 2px;outline:0;outline:none}.maptiler-ctrl form.can-collapse.svelte-bz0zu3.svelte-bz0zu3{max-width:33px}.maptiler-ctrl form.svelte-bz0zu3.svelte-bz0zu3,.maptiler-ctrl form.svelte-bz0zu3.svelte-bz0zu3:focus-within,.maptiler-ctrl form.svelte-bz0zu3.svelte-bz0zu3:hover{width:270px;max-width:270px}
</style>
<script>(function(j,ee){typeof exports=="object"&&typeof module<"u"?ee(exports,require("maplibre-gl")):typeof define=="function"&&define.amd?define(["exports","maplibre-gl"],ee):(j=typeof globalThis<"u"?globalThis:j||self,ee(j.maplibreglMaptilerGeocoder={},j.maplibregl))})(this,function(j,ee){"use strict";var Ws=Object.defineProperty;var bn=j=>{throw TypeError(j)};var Gs=(j,ee,me)=>ee in j?Ws(j,ee,{enumerable:!0,configurable:!0,writable:!0,value:me}):j[ee]=me;var A=(j,ee,me)=>Gs(j,typeof ee!="symbol"?ee+"":ee,me),wn=(j,ee,me)=>ee.has(j)||bn("Cannot "+me);var ue=(j,ee,me)=>(wn(j,ee,"read from private field"),me?me.call(j):ee.get(j)),Vt=(j,ee,me)=>ee.has(j)?bn("Cannot add the same private member more than once"):ee instanceof WeakSet?ee.add(j):ee.set(j,me),kt=(j,ee,me,dt)=>(wn(j,ee,"write to private field"),dt?dt.call(j,me):ee.set(j,me),me);var fn,cn;function me(i){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(i){for(const t in i)if(t!=="default"){const n=Object.getOwnPropertyDescriptor(i,t);Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:()=>i[t]})}}return e.default=i,Object.freeze(e)}const dt=me(ee);function ne(){}function Ln(i,e){for(const t in e)i[t]=e[t];return i}function yi(i){return i()}function vi(){return Object.create(null)}function Ue(i){i.forEach(yi)}function bi(i){return typeof i=="function"}function Ke(i,e){return i!=i?e==e:i!==e||i&&typeof i=="object"||typeof i=="function"}let Rt;function ye(i,e){return i===e?!0:(Rt||(Rt=document.createElement("a")),Rt.href=e,i===Rt.href)}function _n(i){return Object.keys(i).length===0}function Sn(i,e,t,n){if(i){const r=wi(i,e,t,n);return i[0](r)}}function wi(i,e,t,n){return i[1]&&n?Ln(t.ctx.slice(),i[1](n(e))):t.ctx}function xn(i,e,t,n){return i[2],e.dirty}function Tn(i,e,t,n,r,u){if(r){const a=wi(e,t,n,u);i.p(a,r)}}function Mn(i){if(i.ctx.length>32){const e=[],t=i.ctx.length/32;for(let n=0;n<t;n++)e[n]=-1;return e}return-1}function Pt(i){return i??""}function V(i,e){i.appendChild(e)}function te(i,e,t){i.insertBefore(e,t||null)}function $(i){i.parentNode&&i.parentNode.removeChild(i)}function Y(i){return document.createElement(i)}function ke(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Ye(i){return document.createTextNode(i)}function we(){return Ye(" ")}function Cn(){return Ye("")}function he(i,e,t,n){return i.addEventListener(e,t,n),()=>i.removeEventListener(e,t,n)}function Nn(i){return function(e){return e.preventDefault(),i.call(this,e)}}function S(i,e,t){t==null?i.removeAttribute(e):i.getAttribute(e)!==t&&i.setAttribute(e,t)}function kn(i){return Array.from(i.childNodes)}function gt(i,e){e=""+e,i.data!==e&&(i.data=e)}function Ei(i,e){i.value=e??""}function Ie(i,e,t){i.classList.toggle(e,!!t)}function On(i,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(i,{detail:e,bubbles:t,cancelable:n})}let mt;function pt(i){mt=i}function Li(){if(!mt)throw new Error("Function called outside component initialization");return mt}function Rn(i){Li().$$.on_destroy.push(i)}function _i(){const i=Li();return(e,t,{cancelable:n=!1}={})=>{const r=i.$$.callbacks[e];if(r){const u=On(e,t,{cancelable:n});return r.slice().forEach(a=>{a.call(i,u)}),!u.defaultPrevented}return!0}}function Pn(i,e){const t=i.$$.callbacks[e.type];t&&t.slice().forEach(n=>n.call(this,e))}const ut=[],Yt=[];let at=[];const Si=[],In=Promise.resolve();let Qt=!1;function An(){Qt||(Qt=!0,In.then(xi))}function Xt(i){at.push(i)}const Jt=new Set;let ft=0;function xi(){if(ft!==0)return;const i=mt;do{try{for(;ft<ut.length;){const e=ut[ft];ft++,pt(e),Bn(e.$$)}}catch(e){throw ut.length=0,ft=0,e}for(pt(null),ut.length=0,ft=0;Yt.length;)Yt.pop()();for(let e=0;e<at.length;e+=1){const t=at[e];Jt.has(t)||(Jt.add(t),t())}at.length=0}while(ut.length);for(;Si.length;)Si.pop()();Qt=!1,Jt.clear(),pt(i)}function Bn(i){if(i.fragment!==null){i.update(),Ue(i.before_update);const e=i.dirty;i.dirty=[-1],i.fragment&&i.fragment.p(i.ctx,e),i.after_update.forEach(Xt)}}function Wn(i){const e=[],t=[];at.forEach(n=>i.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),at=e}const It=new Set;let nt;function yt(){nt={r:0,c:[],p:nt}}function vt(){nt.r||Ue(nt.c),nt=nt.p}function re(i,e){i&&i.i&&(It.delete(i),i.i(e))}function fe(i,e,t,n){if(i&&i.o){if(It.has(i))return;It.add(i),nt.c.push(()=>{It.delete(i),n&&(t&&i.d(1),n())}),i.o(e)}else n&&n()}function Ti(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function Gn(i,e){fe(i,1,1,()=>{e.delete(i.key)})}function Dn(i,e,t,n,r,u,a,o,g,c,E,_){let M=i.length,R=u.length,k=M;const I={};for(;k--;)I[i[k].key]=k;const C=[],O=new Map,x=new Map,N=[];for(k=R;k--;){const W=_(r,u,k),s=t(W);let l=a.get(s);l?N.push(()=>l.p(W,e)):(l=c(s,W),l.c()),O.set(s,C[k]=l),s in I&&x.set(s,Math.abs(k-I[s]))}const P=new Set,B=new Set;function z(W){re(W,1),W.m(o,E),a.set(W.key,W),E=W.first,R--}for(;M&&R;){const W=C[R-1],s=i[M-1],l=W.key,f=s.key;W===s?(E=W.first,M--,R--):O.has(f)?!a.has(l)||P.has(l)?z(W):B.has(f)?M--:x.get(l)>x.get(f)?(B.add(l),z(W)):(P.add(f),M--):(g(s,a),M--)}for(;M--;){const W=i[M];O.has(W.key)||g(W,a)}for(;R;)z(C[R-1]);return Ue(N),C}function Qe(i){i&&i.c()}function qe(i,e,t){const{fragment:n,after_update:r}=i.$$;n&&n.m(e,t),Xt(()=>{const u=i.$$.on_mount.map(yi).filter(bi);i.$$.on_destroy?i.$$.on_destroy.push(...u):Ue(u),i.$$.on_mount=[]}),r.forEach(Xt)}function Fe(i,e){const t=i.$$;t.fragment!==null&&(Wn(t.after_update),Ue(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function zn(i,e){i.$$.dirty[0]===-1&&(ut.push(i),An(),i.$$.dirty.fill(0)),i.$$.dirty[e/31|0]|=1<<e%31}function Xe(i,e,t,n,r,u,a=null,o=[-1]){const g=mt;pt(i);const c=i.$$={fragment:null,ctx:[],props:u,update:ne,not_equal:r,bound:vi(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(g?g.$$.context:[])),callbacks:vi(),dirty:o,skip_bound:!1,root:e.target||g.$$.root};a&&a(c.root);let E=!1;if(c.ctx=t?t(i,e.props||{},(_,M,...R)=>{const k=R.length?R[0]:M;return c.ctx&&r(c.ctx[_],c.ctx[_]=k)&&(!c.skip_bound&&c.bound[_]&&c.bound[_](k),E&&zn(i,_)),M}):[],c.update(),E=!0,Ue(c.before_update),c.fragment=n?n(c.ctx):!1,e.target){if(e.hydrate){const _=kn(e.target);c.fragment&&c.fragment.l(_),_.forEach($)}else c.fragment&&c.fragment.c();e.intro&&re(i.$$.fragment),qe(i,e.target,e.anchor),xi()}pt(g)}class Je{constructor(){A(this,"$$");A(this,"$$set")}$destroy(){Fe(this,1),this.$destroy=ne}$on(e,t){if(!bi(t))return ne;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const r=n.indexOf(t);r!==-1&&n.splice(r,1)}}$set(e){this.$$set&&!_n(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Un="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Un);function qn(i){let e,t;return{c(){e=ke("svg"),t=ke("path"),S(t,"d","M13.12.706a.982.982 0 0 0-1.391 0L6.907 5.517 2.087.696a.982.982 0 1 0-1.391 1.39l4.821 4.821L.696 11.73a.982.982 0 1 0 1.39 1.39l4.821-4.821 4.822 4.821a.982.982 0 1 0 1.39-1.39L8.298 6.908l4.821-4.822a.988.988 0 0 0 0-1.38Z"),S(e,"viewBox","0 0 14 14"),S(e,"width","13"),S(e,"height","13"),S(e,"class","svelte-en2qvf")},m(n,r){te(n,e,r),V(e,t)},p:ne,i:ne,o:ne,d(n){n&&$(e)}}}class Mi extends Je{constructor(e){super(),Xe(this,e,null,qn,Ke,{})}}function Fn(i){let e,t;return{c(){e=ke("svg"),t=ke("path"),S(t,"d","M15 0C6.705 0 0 6.705 0 15C0 23.295 6.705 30 15 30C23.295 30 30 23.295 30 15C30 6.705 23.295 0 15 0ZM22.5 20.385L20.385 22.5L15 17.115L9.615 22.5L7.5 20.385L12.885 15L7.5 9.615L9.615 7.5L15 12.885L20.385 7.5L22.5 9.615L17.115 15L22.5 20.385Z"),S(e,"viewBox","0 0 30 30"),S(e,"fill","none"),S(e,"xmlns","http://www.w3.org/2000/svg"),S(e,"class","svelte-d2loi5")},m(n,r){te(n,e,r),V(e,t)},p:ne,i:ne,o:ne,d(n){n&&$(e)}}}class Ci extends Je{constructor(e){super(),Xe(this,e,null,Fn,Ke,{})}}function jn(i){let e,t;return{c(){e=Y("img"),ye(e.src,t=i[3]+"area.svg")||S(e,"src",t),S(e,"alt",i[7]),S(e,"title",i[7]),S(e,"class","svelte-w9y5n9")},m(n,r){te(n,e,r)},p(n,r){r&8&&!ye(e.src,t=n[3]+"area.svg")&&S(e,"src",t),r&128&&S(e,"alt",n[7]),r&128&&S(e,"title",n[7])},d(n){n&&$(e)}}}function Zn(i){let e,t;return{c(){e=Y("img"),ye(e.src,t=i[3]+"reverse.svg")||S(e,"src",t),S(e,"alt",i[7]),S(e,"title",i[7]),S(e,"class","svelte-w9y5n9")},m(n,r){te(n,e,r)},p(n,r){r&8&&!ye(e.src,t=n[3]+"reverse.svg")&&S(e,"src",t),r&128&&S(e,"alt",n[7]),r&128&&S(e,"title",n[7])},d(n){n&&$(e)}}}function Hn(i){let e,t;return{c(){e=Y("img"),ye(e.src,t=i[3]+"poi.svg")||S(e,"src",t),S(e,"alt",i[7]),S(e,"title",i[7]),S(e,"class","svelte-w9y5n9")},m(n,r){te(n,e,r)},p(n,r){r&8&&!ye(e.src,t=n[3]+"poi.svg")&&S(e,"src",t),r&128&&S(e,"alt",n[7]),r&128&&S(e,"title",n[7])},d(n){n&&$(e)}}}function Vn(i){let e,t;return{c(){e=Y("img"),ye(e.src,t=i[3]+"postal_code.svg")||S(e,"src",t),S(e,"alt",i[7]),S(e,"title",i[7]),S(e,"class","svelte-w9y5n9")},m(n,r){te(n,e,r)},p(n,r){r&8&&!ye(e.src,t=n[3]+"postal_code.svg")&&S(e,"src",t),r&128&&S(e,"alt",n[7]),r&128&&S(e,"title",n[7])},d(n){n&&$(e)}}}function Kn(i){let e,t;return{c(){e=Y("img"),ye(e.src,t=i[3]+"street.svg")||S(e,"src",t),S(e,"alt",i[7]),S(e,"title",i[7]),S(e,"class","svelte-w9y5n9")},m(n,r){te(n,e,r)},p(n,r){r&8&&!ye(e.src,t=n[3]+"street.svg")&&S(e,"src",t),r&128&&S(e,"alt",n[7]),r&128&&S(e,"title",n[7])},d(n){n&&$(e)}}}function Yn(i){let e,t;return{c(){e=Y("img"),ye(e.src,t=i[3]+"road.svg")||S(e,"src",t),S(e,"alt",i[7]),S(e,"title",i[7]),S(e,"class","svelte-w9y5n9")},m(n,r){te(n,e,r)},p(n,r){r&8&&!ye(e.src,t=n[3]+"road.svg")&&S(e,"src",t),r&128&&S(e,"alt",n[7]),r&128&&S(e,"title",n[7])},d(n){n&&$(e)}}}function Qn(i){let e,t;return{c(){e=Y("img"),ye(e.src,t=i[3]+"housenumber.svg")||S(e,"src",t),S(e,"alt",i[7]),S(e,"title",i[7]),S(e,"class","svelte-w9y5n9")},m(n,r){te(n,e,r)},p(n,r){r&8&&!ye(e.src,t=n[3]+"housenumber.svg")&&S(e,"src",t),r&128&&S(e,"alt",n[7]),r&128&&S(e,"title",n[7])},d(n){n&&$(e)}}}function Xn(i){let e,t,n,r;return{c(){e=Y("img"),ye(e.src,t=i[5])||S(e,"src",t),S(e,"alt",i[4]),S(e,"title",i[7]),S(e,"class","svelte-w9y5n9")},m(u,a){te(u,e,a),n||(r=he(e,"error",i[14]),n=!0)},p(u,a){a&32&&!ye(e.src,t=u[5])&&S(e,"src",t),a&16&&S(e,"alt",u[4]),a&128&&S(e,"title",u[7])},d(u){u&&$(e),n=!1,r()}}}function Jn(i){let e,t;return{c(){e=Y("div"),S(e,"class","sprite-icon svelte-w9y5n9"),S(e,"style",t=`
        width: ${i[6].width/xe}px;
        height: ${i[6].height/xe}px;
        background-image: url(${i[3]}sprite${$t}.png);
        background-position: -${i[6].x/xe}px -${i[6].y/xe}px;
        background-size: ${Oe.width/xe}px ${Oe.height/xe}px;
      `),S(e,"title",i[7])},m(n,r){te(n,e,r)},p(n,r){r&72&&t!==(t=`
        width: ${n[6].width/xe}px;
        height: ${n[6].height/xe}px;
        background-image: url(${n[3]}sprite${$t}.png);
        background-position: -${n[6].x/xe}px -${n[6].y/xe}px;
        background-size: ${Oe.width/xe}px ${Oe.height/xe}px;
      `)&&S(e,"style",t),r&128&&S(e,"title",n[7])},d(n){n&&$(e)}}}function Ni(i){let e,t;return{c(){e=Y("span"),t=Ye(i[7]),S(e,"class","secondary svelte-w9y5n9")},m(n,r){te(n,e,r),V(e,t)},p(n,r){r&128&&gt(t,n[7])},d(n){n&&$(e)}}}function $n(i){let e,t,n,r,u,a,o,g,c,E=(i[8]?i[0].place_name:i[0].place_name.replace(/,.*/,""))+"",_,M,R=i[2]==="always"||i[2]!=="never"&&!i[0].address&&!i[0].id.startsWith("road.")&&!i[0].id.startsWith("address.")&&!i[0].id.startsWith("postal_code.")&&(!i[0].id.startsWith("poi.")||!i[5])&&!i[8],k,I,C=(i[8]?"":i[0].place_name.replace(/[^,]*,?\s*/,""))+"",O,x,N,P,B,z;function W(m,h){return h&1&&(t=null),h&1&&(n=null),h&1&&(r=null),h&1&&(u=null),Oe&&m[6]?Jn:m[5]?Xn:m[0].address?Qn:(t==null&&(t=!!m[0].id.startsWith("road.")),t?Yn:(n==null&&(n=!!m[0].id.startsWith("address.")),n?Kn:(r==null&&(r=!!m[0].id.startsWith("postal_code.")),r?Vn:(u==null&&(u=!!m[0].id.startsWith("poi.")),u?Hn:m[8]?Zn:jn))))}let s=W(i,-1),l=s(i),f=R&&Ni(i);return{c(){e=Y("li"),l.c(),a=we(),o=Y("span"),g=Y("span"),c=Y("span"),_=Ye(E),M=we(),f&&f.c(),k=we(),I=Y("span"),O=Ye(C),S(c,"class","primary svelte-w9y5n9"),S(g,"class","svelte-w9y5n9"),S(I,"class","line2 svelte-w9y5n9"),S(o,"class","texts svelte-w9y5n9"),S(e,"tabindex","-1"),S(e,"role","option"),S(e,"aria-selected",x=i[1]==="selected"),S(e,"aria-checked",N=i[1]==="picked"),S(e,"class",P=Pt(i[1])+" svelte-w9y5n9")},m(m,h){te(m,e,h),l.m(e,null),V(e,a),V(e,o),V(o,g),V(g,c),V(c,_),V(g,M),f&&f.m(g,null),V(o,k),V(o,I),V(I,O),B||(z=[he(e,"mouseenter",i[13]),he(e,"focus",i[15]),he(e,"click",i[16])],B=!0)},p(m,[h]){s===(s=W(m,h))&&l?l.p(m,h):(l.d(1),l=s(m),l&&(l.c(),l.m(e,a))),h&257&&E!==(E=(m[8]?m[0].place_name:m[0].place_name.replace(/,.*/,""))+"")&&gt(_,E),h&293&&(R=m[2]==="always"||m[2]!=="never"&&!m[0].address&&!m[0].id.startsWith("road.")&&!m[0].id.startsWith("address.")&&!m[0].id.startsWith("postal_code.")&&(!m[0].id.startsWith("poi.")||!m[5])&&!m[8]),R?f?f.p(m,h):(f=Ni(m),f.c(),f.m(g,null)):f&&(f.d(1),f=null),h&257&&C!==(C=(m[8]?"":m[0].place_name.replace(/[^,]*,?\s*/,""))+"")&&gt(O,C),h&2&&x!==(x=m[1]==="selected")&&S(e,"aria-selected",x),h&2&&N!==(N=m[1]==="picked")&&S(e,"aria-checked",N),h&2&&P!==(P=Pt(m[1])+" svelte-w9y5n9")&&S(e,"class",P)},i:ne,o:ne,d(m){m&&$(e),l.d(),f&&f.d(),B=!1,Ue(z)}}}const ki=typeof devicePixelRatio>"u"?1:devicePixelRatio>1.25,$t=ki?"@2x":"",xe=ki?2:1;let Oe,At;function er(i,e,t){let n,r,u,{feature:a}=e,{style:o="default"}=e,{showPlaceType:g}=e,{missingIconsCache:c}=e,{iconsBaseUrl:E}=e;const _=_i();let M,R,k,I;function C(){At??(At=fetch(`${E}sprite${$t}.json`).then(s=>s.json()).then(s=>{Oe=s}).catch(()=>{Oe=null}))}function O(){R&&c.add(R),x()}function x(){Oe!==void 0?N():(C(),At==null||At.then(N))}function N(){do{if(I--,t(4,M=n==null?void 0:n[I]),t(6,k=M?Oe==null?void 0:Oe.icons[M]:void 0),k)break;t(5,R=M?E+M.replace(/ /g,"_")+".svg":void 0)}while(I>-1&&(!R||c.has(R)))}function P(s){Pn.call(this,i,s)}const B=()=>O(),z=()=>_("select",void 0),W=s=>{document.activeElement!==s.target&&_("select",void 0)};return i.$$set=s=>{"feature"in s&&t(0,a=s.feature),"style"in s&&t(1,o=s.style),"showPlaceType"in s&&t(2,g=s.showPlaceType),"missingIconsCache"in s&&t(11,c=s.missingIconsCache),"iconsBaseUrl"in s&&t(3,E=s.iconsBaseUrl)},i.$$.update=()=>{var s,l,f,m,h;i.$$.dirty&1&&t(12,n=(s=a.properties)==null?void 0:s.categories),i.$$.dirty&1&&t(8,r=a.place_type[0]==="reverse"),i.$$.dirty&1&&t(7,u=((f=(l=a.properties)==null?void 0:l.categories)==null?void 0:f.join(", "))??((h=(m=a.properties)==null?void 0:m.place_type_name)==null?void 0:h[0])??a.place_type[0]),i.$$.dirty&4096&&(I=(n==null?void 0:n.length)??0,x())},[a,o,g,E,M,R,k,u,r,_,O,c,n,P,B,z,W]}class tr extends Je{constructor(e){super(),Xe(this,e,er,$n,Ke,{feature:0,style:1,showPlaceType:2,missingIconsCache:11,iconsBaseUrl:3})}}function ir(i){let e;return{c(){e=Y("div"),e.innerHTML='<svg viewBox="0 0 18 18" width="24" height="24" class="loading-icon svelte-1ocfouu"><path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"></path><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"></path></svg>',S(e,"class","svelte-1ocfouu")},m(t,n){te(t,e,n)},p:ne,i:ne,o:ne,d(t){t&&$(e)}}}class nr extends Je{constructor(e){super(),Xe(this,e,null,ir,Ke,{})}}function rr(i){let e,t,n;return{c(){e=ke("svg"),t=ke("path"),S(t,"stroke-width","4"),S(t,"d","M 5,33.103579 C 5,17.607779 18.457,5 35,5 C 51.543,5 65,17.607779 65,33.103579 C 65,56.388679 40.4668,76.048179 36.6112,79.137779 C 36.3714,79.329879 36.2116,79.457979 36.1427,79.518879 C 35.8203,79.800879 35.4102,79.942779 35,79.942779 C 34.5899,79.942779 34.1797,79.800879 33.8575,79.518879 C 33.7886,79.457979 33.6289,79.330079 33.3893,79.138079 C 29.5346,76.049279 5,56.389379 5,33.103579 Z M 35.0001,49.386379 C 43.1917,49.386379 49.8323,42.646079 49.8323,34.331379 C 49.8323,26.016779 43.1917,19.276479 35.0001,19.276479 C 26.8085,19.276479 20.1679,26.016779 20.1679,34.331379 C 20.1679,42.646079 26.8085,49.386379 35.0001,49.386379 Z"),S(t,"class","svelte-gzo3ar"),S(e,"width",n=i[0]==="list"?20:void 0),S(e,"viewBox","0 0 70 85"),S(e,"fill","none"),S(e,"class","svelte-gzo3ar"),Ie(e,"in-map",i[0]!=="list"),Ie(e,"list-icon",i[0]==="list")},m(r,u){te(r,e,u),V(e,t)},p(r,[u]){u&1&&n!==(n=r[0]==="list"?20:void 0)&&S(e,"width",n),u&1&&Ie(e,"in-map",r[0]!=="list"),u&1&&Ie(e,"list-icon",r[0]==="list")},i:ne,o:ne,d(r){r&&$(e)}}}function sr(i,e,t){let{displayIn:n}=e;return i.$$set=r=>{"displayIn"in r&&t(0,n=r.displayIn)},[n]}class or extends Je{constructor(e){super(),Xe(this,e,sr,rr,Ke,{displayIn:0})}}function lr(i){let e,t;return{c(){e=ke("svg"),t=ke("path"),S(t,"d","M30.003-26.765C13.46-26.765 0-14.158 0 1.337c0 23.286 24.535 42.952 28.39 46.04.24.192.402.316.471.376.323.282.732.424 1.142.424.41 0 .82-.142 1.142-.424.068-.06.231-.183.471-.376 3.856-3.09 28.39-22.754 28.39-46.04 0-15.495-13.46-28.102-30.003-28.102Zm1.757 12.469c4.38 0 7.858 1.052 10.431 3.158 2.595 2.105 3.89 4.913 3.89 8.422 0 2.34-.53 4.362-1.593 6.063-1.063 1.702-3.086 3.616-6.063 5.742-2.042 1.51-3.337 2.659-3.89 3.446-.532.787-.8 1.82-.8 3.096v1.914h-8.449V15.18c0-2.041.434-3.815 1.306-5.325.872-1.51 2.467-3.118 4.785-4.82 2.233-1.594 3.7-2.89 4.402-3.889a5.582 5.582 0 0 0 1.087-3.35c0-1.382-.51-2.435-1.531-3.158-1.02-.723-2.45-1.087-4.28-1.087-3.19 0-6.826 1.047-10.91 3.131l-3.472-6.986c4.742-2.659 9.77-3.992 15.087-3.992Zm-1.88 37.324c1.765 0 3.124.472 4.08 1.408.98.936 1.47 2.276 1.47 4.02 0 1.68-.49 3.007-1.47 3.985-.977.957-2.336 1.435-4.08 1.435-1.787 0-3.171-.465-4.15-1.4-.978-.958-1.47-2.298-1.47-4.02 0-1.787.48-3.14 1.436-4.054.957-.915 2.355-1.374 4.184-1.374Z"),S(e,"viewBox","0 0 60.006 21.412"),S(e,"width","14"),S(e,"height","20"),S(e,"class","svelte-en2qvf")},m(n,r){te(n,e,r),V(e,t)},p:ne,i:ne,o:ne,d(n){n&&$(e)}}}class ur extends Je{constructor(e){super(),Xe(this,e,null,lr,Ke,{})}}function ar(i){let e,t,n;return{c(){e=ke("svg"),t=ke("circle"),n=ke("path"),S(t,"cx","4.789"),S(t,"cy","4.787"),S(t,"r","3.85"),S(t,"class","svelte-1aq105l"),S(n,"d","M12.063 12.063 7.635 7.635"),S(n,"class","svelte-1aq105l"),S(e,"xmlns","http://www.w3.org/2000/svg"),S(e,"width","13"),S(e,"height","13"),S(e,"viewBox","0 0 13 13"),S(e,"class","svelte-1aq105l")},m(r,u){te(r,e,u),V(e,t),V(e,n)},p:ne,i:ne,o:ne,d(r){r&&$(e)}}}class fr extends Je{constructor(e){super(),Xe(this,e,null,ar,Ke,{})}}function cr(i,e,t){const n=e[1],r=e[0],u=n-r;return i===n&&t?i:((i-r)%u+u)%u+r}function Bt(i){const e=[...i];return e[2]<e[0]&&(Math.abs((e[0]+e[2]+360)/2)>Math.abs((e[0]-360+e[2])/2)?e[0]-=360:e[2]+=360),e}let bt;async function hr(i,e,t){const n=i==null?void 0:i.getCenterAndZoom();for(const r of e??[])if(!(n&&(r.minZoom!=null&&r.minZoom>n[0]||r.maxZoom!=null&&r.maxZoom<n[0]))){if(r.type==="fixed")return r.coordinates.join(",");e:if(r.type==="client-geolocation"){if(bt&&r.cachedLocationExpiry&&bt.time+r.cachedLocationExpiry>Date.now()){if(!bt.coords)break e;return bt.coords}let u;try{return u=await new Promise((a,o)=>{t.signal.addEventListener("abort",()=>{o(Error("aborted"))}),navigator.geolocation.getCurrentPosition(g=>{a([g.coords.longitude,g.coords.latitude].map(c=>c.toFixed(6)).join(","))},g=>{o(g)},r)}),u}catch{}finally{r.cachedLocationExpiry&&(bt={time:Date.now(),coords:u})}if(t.signal.aborted)return}if(r.type==="server-geolocation")return"ip";if(n&&r.type==="map-center")return n[1].toFixed(6)+","+n[2].toFixed(6)}}const dr=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*([\.:]|D(?:EG)?(?:REES)?)?\s*,?([6-9][0-9])\s*(['\.:]|M(?:IN)?(?:UTES)?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*([\.:]|D(?:EG)?(?:REES)?)?\s*,?([6-9][0-9])\s*(['\.:]|M(?:IN)?(?:UTES)?)?\s*(EAST|WEST|[EW])?$/i,Oi=/^([+-]?[0-8]?[0-9])\s+([0-5]?[0-9]\.\d{3,})[\s,]{1,}([+-]?[0-1]?[0-9]?[0-9])\s+([0-5]?[0-9]\.\d{3,})$/,Ri=/^(NORTH|SOUTH|[NS])?[\s]*([+-]?[0-8]?[0-9](?:[\.,]\d{3,}))[\s]*([]?)[\s]*(NORTH|SOUTH|[NS])?[\s]*[,/;]?[\s]*(EAST|WEST|[EW])?[\s]*([+-]?[0-1]?[0-9]?[0-9](?:[\.,]\d{3,}))[\s]*([]?)[\s]*(EAST|WEST|[EW])?$/i,Pi=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*(\.)\s*([0-5]?[0-9])\s*(\.)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*(\.)\s*([0-5]?[0-9])\s*(\.)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(EAST|WEST|[EW])?$/i,Ii=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*(D(?:EG)?(?:REES)?)\s*([0-5]?[0-9])\s*(M(?:IN)?(?:UTES)?)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(S(?:EC)?(?:ONDS)?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*(D(?:EG)?(?:REES)?)\s*([0-5]?[0-9])\s*(M(?:IN)?(?:UTES)?)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(S(?:EC)?(?:ONDS)?)\s*(EAST|WEST|[EW])?$/i,Ai=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*([\.:]|D(?:EG)?(?:REES)?)?\s*,?([0-5]?[0-9](?:[\.,]\d{1,})?)?\s*(['\.:]|M(?:IN)?(?:UTES)?)?\s*,?((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(''||||["\.])?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*([\.:]|D(?:EG)?(?:REES)?)?\s*,?([0-5]?[0-9](?:[\.,]\d{1,})?)?\s*(['\.:]|M(?:IN)?(?:UTES)?)?\s*,?((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(''||||["\.])?\s*(EAST|WEST|[EW])?$/i;function gr(i){if(!["DMS","DM","DD"].includes(i))throw new Error("invalid format specified");if(this.decimalCoordinates&&this.decimalCoordinates.trim()){const e=this.decimalCoordinates.split(",").map(R=>Number(R.trim())),t=Number(e[0]),n=Number(e[1]),r=Math.abs(t),u=Math.abs(n),a=t>0?"N":"S",o=n>0?"E":"W";let g;i=="DD"&&(g=`${r} ${a}, ${u} ${o}`);const c=Math.floor(r),E=Math.floor(u),_=(r-c)*60,M=(u-E)*60;if(i=="DM"){let R=Bi(_,3).toFixed(3).padStart(6,"0"),k=Bi(M,3).toFixed(3).padStart(6,"0");R.endsWith(".000")&&k.endsWith(".000")&&(R=R.replace(/\.000$/,""),k=k.replace(/\.000$/,"")),g=`${c} ${R}' ${a}, ${E} ${k}' ${o}`}if(i=="DMS"){const R=Math.floor(_),k=Math.floor(M);let I=((_-R)*60).toFixed(1).padStart(4,"0"),C=((M-k)*60).toFixed(1).padStart(4,"0");const O=R.toString().padStart(2,"0"),x=k.toString().padStart(2,"0");I.endsWith(".0")&&C.endsWith(".0")&&(I=I.replace(/\.0$/,""),C=C.replace(/\.0$/,"")),g=`${c} ${O}' ${I}" ${a}, ${E} ${x}' ${C}" ${o}`}return g}else throw new Error("no decimal coordinates to convert")}function Bi(i,e){const t=Math.pow(10,e);return Math.round((i+Number.EPSILON)*t)/t}function ei(i,e){e||(e=5),i=i.replace(/\s+/g," ").trim();let t=null,n=null,r="",u="",a=null,o=[],g=!1;if(dr.test(i))throw new Error("invalid coordinate value");if(Oi.test(i))if(o=Oi.exec(i),g=wt(o),g)t=Math.abs(o[1])+o[2]/60,Number(o[1])<0&&(t*=-1),n=Math.abs(o[3])+o[4]/60,Number(o[3])<0&&(n*=-1),a="DM";else throw new Error("invalid coordinate format");else if(Ri.test(i))if(o=Ri.exec(i),g=wt(o),g){if(t=o[2],n=o[6],t.includes(",")&&(t=t.replace(",",".")),n.includes(",")&&(n=n.replace(",",".")),a="DD",Number(Math.round(t))==Number(t))throw new Error("integer only coordinate provided");if(Number(Math.round(n))==Number(n))throw new Error("integer only coordinate provided");o[1]?(r=o[1],u=o[5]):o[4]&&(r=o[4],u=o[8])}else throw new Error("invalid decimal coordinate format");else if(Pi.test(i))if(o=Pi.exec(i),g=wt(o),g)t=Math.abs(parseInt(o[2])),o[4]&&(t+=o[4]/60,a="DM"),o[6]&&(t+=o[6].replace(",",".")/3600,a="DMS"),parseInt(o[2])<0&&(t=-1*t),n=Math.abs(parseInt(o[9])),o[11]&&(n+=o[11]/60),o[13]&&(n+=o[13].replace(",",".")/3600),parseInt(o[9])<0&&(n=-1*n),o[1]?(r=o[1],u=o[8]):o[7]&&(r=o[7],u=o[14]);else throw new Error("invalid DMS coordinates format");else if(Ii.test(i))if(o=Ii.exec(i),g=wt(o),g)t=Math.abs(parseInt(o[2])),o[4]&&(t+=o[4]/60,a="DM"),o[6]&&(t+=o[6]/3600,a="DMS"),parseInt(o[2])<0&&(t=-1*t),n=Math.abs(parseInt(o[10])),o[12]&&(n+=o[12]/60),o[14]&&(n+=o[14]/3600),parseInt(o[10])<0&&(n=-1*n),o[1]?(r=o[1],u=o[9]):o[8]&&(r=o[8],u=o[16]);else throw new Error("invalid DMS coordinates format");else if(Ai.test(i)){if(o=Ai.exec(i),g=wt(o),o.filter(c=>c).length<=5)throw new Error("invalid coordinates format");if(g)t=Math.abs(parseInt(o[2])),o[4]&&(t+=o[4].replace(",",".")/60,a="DM"),o[6]&&(t+=o[6].replace(",",".")/3600,a="DMS"),parseInt(o[2])<0&&(t=-1*t),n=Math.abs(parseInt(o[10])),o[12]&&(n+=o[12].replace(",",".")/60),o[14]&&(n+=o[14].replace(",",".")/3600),parseInt(o[10])<0&&(n=-1*n),o[1]?(r=o[1],u=o[9]):o[8]&&(r=o[8],u=o[16]);else throw new Error("invalid coordinates format")}if(g){if(Math.abs(n)>=180)throw new Error("invalid longitude value");if(Math.abs(t)>=90)throw new Error("invalid latitude value");if(r&&!u||!r&&u)throw new Error("invalid coordinates value");if(r&&r==u)throw new Error("invalid coordinates format");t.toString().includes(",")&&(t=t.replace(",",".")),n.toString().includes(",")&&(n=n.replace(",","."));let c=/S|SOUTH/i;c.test(r)&&t>0&&(t=-1*t),c=/W|WEST/i,c.test(u)&&n>0&&(n=-1*n);const E=o[0].trim();let _,M;const R=/[,/;\u0020]/g,k=E.match(R);if(k==null){const O=Math.floor(i.length/2);_=E.substring(0,O).trim(),M=E.substring(O).trim()}else{let O;k.length%2==1?O=Math.floor(k.length/2):O=k.length/2-1;let x=0;if(O==0)x=E.indexOf(k[0]),_=E.substring(0,x).trim(),M=E.substring(x+1).trim();else{let N=0,P=0;for(;N<=O;)x=E.indexOf(k[N],P),P=x+1,N++;_=E.substring(0,x).trim(),M=E.substring(x+1).trim()}}const I=_.split(".");if(I.length==2&&I[1]==0&&I[1].length!=2)throw new Error("invalid coordinates format");const C=M.split(".");if(C.length==2&&C[1]==0&&C[1].length!=2)throw new Error("invalid coordinates format");if(/^\d+$/.test(_)||/^\d+$/.test(M))throw new Error("degree only coordinate/s provided");return t=Number(Number(t).toFixed(e)),n=Number(Number(n).toFixed(e)),Object.freeze({verbatimCoordinates:E,verbatimLatitude:_,verbatimLongitude:M,decimalLatitude:t,decimalLongitude:n,decimalCoordinates:`${t},${n}`,originalFormat:a,closeEnough:mr,toCoordinateFormat:gr})}else throw new Error("coordinates pattern match failed")}function wt(i){if(!isNaN(i[0]))return!1;const e=[...i];if(e.shift(),e.length%2>0)return!1;const t=/^[-+]?\d+([\.,]\d+)?$/,n=/[eastsouthnorthwest]+/i,r=e.length/2;for(let u=0;u<r;u++){const a=e[u],o=e[u+r],g=t.test(a)&&t.test(o),c=n.test(a)&&n.test(o),E=a==o;if(!(a==null&&o==null)){if(a==null||o==null)return!1;if(g||c||E)continue;return!1}}return!0}function Wi(i,e){const t=Math.abs(i-e);return Number(t.toFixed(6))<=1e-5}function mr(i){if(!i)throw new Error("coords must be provided");if(i.includes(",")){const e=i.split(",");if(Number(e[0])==NaN||Number(e[1])==NaN)throw new Error("coords are not valid decimals");return Wi(this.decimalLatitude,Number(e[0]))&&Wi(this.decimalLongitude,e[1])}else throw new Error("coords being tested must be separated by a comma")}const pr=Object.freeze({DMS:"DMS",DM:"DM",DD:"DD"});ei.to=pr;const yr=[{verbatimCoordinates:"40.123, -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123 N 74.123 W",verbatimLatitude:"40.123 N",verbatimLongitude:"74.123 W"},{verbatimCoordinates:"40.123 N 74.123 W",verbatimLatitude:"40.123 N",verbatimLongitude:"74.123 W"},{verbatimCoordinates:'40 7 22.8" N 74 7 22.8" W',verbatimLatitude:'40 7 22.8" N',verbatimLongitude:'74 7 22.8" W'},{verbatimCoordinates:"40 7.38 , -74 7.38",verbatimLatitude:"40 7.38",verbatimLongitude:"-74 7.38"},{verbatimCoordinates:"N40722.8, W74722.8",verbatimLatitude:"N40722.8",verbatimLongitude:"W74722.8"},{verbatimCoordinates:'40722.8"N, 74722.8"W',verbatimLatitude:'40722.8"N',verbatimLongitude:'74722.8"W'},{verbatimCoordinates:`407'22.8"N, 747'22.8"W`,verbatimLatitude:`407'22.8"N`,verbatimLongitude:`747'22.8"W`},{verbatimCoordinates:"40 7 22.8, -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"},{verbatimCoordinates:"40.123 -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123,-74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123N74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"4007.38N7407.38W",verbatimLatitude:"4007.38N",verbatimLongitude:"7407.38W"},{verbatimCoordinates:'40722.8"N, 74722.8"W',verbatimLatitude:'40722.8"N',verbatimLongitude:'74722.8"W'},{verbatimCoordinates:"400722.8N740722.8W",verbatimLatitude:"400722.8N",verbatimLongitude:"740722.8W"},{verbatimCoordinates:"N 40 7.38 W 74 7.38",verbatimLatitude:"N 40 7.38",verbatimLongitude:"W 74 7.38"},{verbatimCoordinates:"40:7:22.8N 74:7:22.8W",verbatimLatitude:"40:7:22.8N",verbatimLongitude:"74:7:22.8W"},{verbatimCoordinates:"40:7:23N,74:7:23W",verbatimLatitude:"40:7:23N",verbatimLongitude:"74:7:23W",decimalLatitude:40.1230555555,decimalLongitude:-74.1230555555},{verbatimCoordinates:'40723"N 74723"W',verbatimLatitude:'40723"N',verbatimLongitude:'74723"W',decimalLatitude:40.1230555555,decimalLongitude:-74.12305555555555},{verbatimCoordinates:'40723"S 74723"E',verbatimLatitude:'40723"S',verbatimLongitude:'74723"E',decimalLatitude:-40.1230555555,decimalLongitude:74.12305555555555},{verbatimCoordinates:'40723" -74723"',verbatimLatitude:'40723"',verbatimLongitude:'-74723"',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:'40d 7 23" N 74d 7 23" W',verbatimLatitude:'40d 7 23" N',verbatimLongitude:'74d 7 23" W',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:"40.123N 74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"40 7.38, -74 7.38",verbatimLatitude:"40 7.38",verbatimLongitude:"-74 7.38"},{verbatimCoordinates:"40 7.38, -74 7.38",verbatimLatitude:"40 7.38",verbatimLongitude:"-74 7.38"},{verbatimCoordinates:"40 7 22.8; -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"}],vr={decimalLatitude:40.123,decimalLongitude:-74.123},br=[{verbatimCoordinates:`504'17.698"south, 1424'2.826"east`,verbatimLatitude:`504'17.698"south`,verbatimLongitude:`1424'2.826"east`,decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"50d4m17.698S 14d24m2.826E",verbatimLatitude:"50d4m17.698S",verbatimLongitude:"14d24m2.826E",decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"40:26:46N,79:56:55W",verbatimLatitude:"40:26:46N",verbatimLongitude:"79:56:55W",decimalLatitude:40.44611111111111,decimalLongitude:-79.9486111111111},{verbatimCoordinates:"40:26:46.302N 79:56:55.903W",verbatimLatitude:"40:26:46.302N",verbatimLongitude:"79:56:55.903W",decimalLatitude:40.446195,decimalLongitude:-79.94886194444445},{verbatimCoordinates:"402647N 795836W",verbatimLatitude:"402647N",verbatimLongitude:"795836W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40d 26 47 N 79d 58 36 W",verbatimLatitude:"40d 26 47 N",verbatimLongitude:"79d 58 36 W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40.446195N 79.948862W",verbatimLatitude:"40.446195N",verbatimLongitude:"79.948862W",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40,446195 79,948862",verbatimLatitude:"40,446195",verbatimLongitude:"79,948862",decimalLatitude:40.446195,decimalLongitude:79.948862},{verbatimCoordinates:"40 26.7717, -79 56.93172",verbatimLatitude:"40 26.7717",verbatimLongitude:"-79 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.446195, -79.948862",verbatimLatitude:"40.446195",verbatimLongitude:"-79.948862",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.123256; -74.123256",verbatimLatitude:"40.123256",verbatimLongitude:"-74.123256",decimalLatitude:40.123256,decimalLongitude:-74.123256},{verbatimCoordinates:"1824S 2245E",verbatimLatitude:"1824S",verbatimLongitude:"2245E",decimalLatitude:-18.4,decimalLongitude:22.75}],wr=[{verbatimCoordinates:"10.432342S 10.6345345E",verbatimLatitude:"10.432342S",verbatimLongitude:"10.6345345E",decimalLatitude:-10.432342,decimalLongitude:10.6345345},{verbatimCoordinates:"10.00S 10.00E",verbatimLatitude:"10.00S",verbatimLongitude:"10.00E",decimalLatitude:-10,decimalLongitude:10},{verbatimCoordinates:"00.00S 01.00E",verbatimLatitude:"00.00S",verbatimLongitude:"01.00E",decimalLatitude:0,decimalLongitude:1},{verbatimCoordinates:"18.24S 22.45E",verbatimLatitude:"18.24S",verbatimLongitude:"22.45E",decimalLatitude:-18.4,decimalLongitude:22.75},{verbatimCoordinates:"27deg 15min 45.2sec S 18deg 32min 53.7sec E",verbatimLatitude:"27deg 15min 45.2sec S",verbatimLongitude:"18deg 32min 53.7sec E",decimalLatitude:-27.262555555555554,decimalLongitude:18.54825},{verbatimCoordinates:"-23.3245 S / 28.2344 E",verbatimLatitude:"-23.3245 S",verbatimLongitude:"28.2344 E",decimalLatitude:-23.3245,decimalLongitude:28.2344},{verbatimCoordinates:"40 26.7717 -79 56.93172",verbatimLatitude:"40 26.7717",verbatimLongitude:"-79 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"27.15.45S 18.32.53E",verbatimLatitude:"27.15.45S",verbatimLongitude:"18.32.53E",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"-27.15.45 18.32.53",verbatimLatitude:"-27.15.45",verbatimLongitude:"18.32.53",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"27.15.45.2S 18.32.53.4E",verbatimLatitude:"27.15.45.2S",verbatimLongitude:"18.32.53.4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"27.15.45,2S 18.32.53,4E",verbatimLatitude:"27.15.45,2S",verbatimLongitude:"18.32.53,4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"S23.43563   E22.45634 ",verbatimLatitude:"S23.43563 ",verbatimLongitude:"E22.45634 ",decimalLatitude:-23.43563,decimalLongitude:22.45634},{verbatimCoordinates:"27,71372 S 23,07771 E",verbatimLatitude:"27,71372 S",verbatimLongitude:"23,07771 E",decimalLatitude:-27.71372,decimalLongitude:23.07771},{verbatimCoordinates:"27.45.34 S 23.23.23 E",verbatimLatitude:"27.45.34 S",verbatimLongitude:"23.23.23 E",decimalLatitude:-27.759444,decimalLongitude:23.38972222},{verbatimCoordinates:"S 27.45.34 E 23.23.23",verbatimLatitude:"S 27.45.34",verbatimLongitude:"E 23.23.23",decimalLatitude:-27.759444,decimalLongitude:23.38972222},{verbatimCoordinates:"53 16.3863,4 52.8171",verbatimLatitude:"53 16.3863",verbatimLongitude:"4 52.8171",decimalLatitude:53.273105,decimalLongitude:4.88029},{verbatimCoordinates:"50 8.2914,-5 2.4447",verbatimLatitude:"50 8.2914",verbatimLongitude:"-5 2.4447",decimalLatitude:50.13819,decimalLongitude:-5.040745},{verbatimCoordinates:"N 48 30,6410', E 18 57,4583'",verbatimLatitude:"N 48 30,6410'",verbatimLongitude:"E 18 57,4583'",decimalLatitude:48.51068,decimalLongitude:18.95764},{verbatimCoordinates:"1.23456, 18.33453",verbatimLatitude:"1.23456",verbatimLongitude:"18.33453",decimalLatitude:1.23456,decimalLongitude:18.33453}];function Er(){const i=[];return yr.forEach(e=>{e.decimalLatitude?i.push(e):i.push({...e,...vr})}),[...i,...br,...wr]}const Lr=Er();ei.formats=Lr.map(i=>i.verbatimCoordinates);const _r=ei;function Gi(i,e,t){const n=i.slice();return n[97]=e[t],n[99]=t,n}function Di(i){let e,t,n,r,u;return t=new Mi({}),{c(){e=Y("button"),Qe(t.$$.fragment),S(e,"type","button"),S(e,"title",i[3]),S(e,"class","svelte-bz0zu3")},m(a,o){te(a,e,o),qe(t,e,null),n=!0,r||(u=he(e,"click",i[78]),r=!0)},p(a,o){(!n||o[0]&8)&&S(e,"title",a[3])},i(a){n||(re(t.$$.fragment,a),n=!0)},o(a){fe(t.$$.fragment,a),n=!1},d(a){a&&$(e),Fe(t),r=!1,u()}}}function zi(i){let e,t;return e=new nr({}),{c(){Qe(e.$$.fragment)},m(n,r){qe(e,n,r),t=!0},i(n){t||(re(e.$$.fragment,n),t=!0)},o(n){fe(e.$$.fragment,n),t=!1},d(n){Fe(e,n)}}}function Ui(i){let e,t,n,r,u;return t=new ur({}),{c(){e=Y("button"),Qe(t.$$.fragment),S(e,"type","button"),S(e,"title",i[10]),S(e,"class","svelte-bz0zu3"),Ie(e,"active",i[0])},m(a,o){te(a,e,o),qe(t,e,null),n=!0,r||(u=he(e,"click",i[79]),r=!0)},p(a,o){(!n||o[0]&1024)&&S(e,"title",a[10]),(!n||o[0]&1)&&Ie(e,"active",a[0])},i(a){n||(re(t.$$.fragment,a),n=!0)},o(a){fe(t.$$.fragment,a),n=!1},d(a){a&&$(e),Fe(t),r=!1,u()}}}function Sr(i){let e,t=[],n=new Map,r,u,a,o=Ti(i[13]);const g=c=>c[97].id+(c[97].address?","+c[97].address:"");for(let c=0;c<o.length;c+=1){let E=Gi(i,o,c),_=g(E);n.set(_,t[c]=qi(_,E))}return{c(){e=Y("ul");for(let c=0;c<t.length;c+=1)t[c].c();S(e,"class","options svelte-bz0zu3"),S(e,"role","listbox")},m(c,E){te(c,e,E);for(let _=0;_<t.length;_+=1)t[_]&&t[_].m(e,null);r=!0,u||(a=[he(e,"mouseleave",i[27]),he(e,"blur",i[83]),he(e,"keydown",i[23])],u=!0)},p(c,E){E[0]&102823936&&(o=Ti(c[13]),yt(),t=Dn(t,E,g,1,c,o,n,e,Gn,qi,null,Gi),vt())},i(c){if(!r){for(let E=0;E<o.length;E+=1)re(t[E]);r=!0}},o(c){for(let E=0;E<t.length;E+=1)fe(t[E]);r=!1},d(c){c&&$(e);for(let E=0;E<t.length;E+=1)t[E].d();u=!1,Ue(a)}}}function xr(i){let e,t,n,r,u,a;return t=new Ci({}),{c(){e=Y("div"),Qe(t.$$.fragment),n=we(),r=Y("div"),u=Ye(i[8]),S(r,"class","svelte-bz0zu3"),S(e,"class","no-results svelte-bz0zu3")},m(o,g){te(o,e,g),qe(t,e,null),V(e,n),V(e,r),V(r,u),a=!0},p(o,g){(!a||g[0]&256)&&gt(u,o[8])},i(o){a||(re(t.$$.fragment,o),a=!0)},o(o){fe(t.$$.fragment,o),a=!1},d(o){o&&$(e),Fe(t)}}}function Tr(i){let e="",t;return{c(){t=Ye(e)},m(n,r){te(n,t,r)},p:ne,i:ne,o:ne,d(n){n&&$(t)}}}function Mr(i){let e,t,n,r,u,a,o,g,c,E,_;return t=new Ci({}),g=new Mi({}),{c(){e=Y("div"),Qe(t.$$.fragment),n=we(),r=Y("div"),u=Ye(i[7]),a=we(),o=Y("button"),Qe(g.$$.fragment),S(r,"class","svelte-bz0zu3"),S(o,"class","svelte-bz0zu3"),S(e,"class","error svelte-bz0zu3")},m(M,R){te(M,e,R),qe(t,e,null),V(e,n),V(e,r),V(r,u),V(e,a),V(e,o),qe(g,o,null),c=!0,E||(_=he(o,"click",i[80]),E=!0)},p(M,R){(!c||R[0]&128)&&gt(u,M[7])},i(M){c||(re(t.$$.fragment,M),re(g.$$.fragment,M),c=!0)},o(M){fe(t.$$.fragment,M),fe(g.$$.fragment,M),c=!1},d(M){M&&$(e),Fe(t),Fe(g),E=!1,_()}}}function qi(i,e){var o;let t,n,r;function u(){return e[81](e[99])}function a(){return e[82](e[97])}return n=new tr({props:{feature:e[97],showPlaceType:e[11],style:e[15]===e[99]?"selected":((o=e[14])==null?void 0:o.id)===e[97].id?"picked":"default",missingIconsCache:e[21],iconsBaseUrl:e[12]}}),n.$on("mouseenter",u),n.$on("select",a),{key:i,first:null,c(){t=Cn(),Qe(n.$$.fragment),this.first=t},m(g,c){te(g,t,c),qe(n,g,c),r=!0},p(g,c){var _;e=g;const E={};c[0]&8192&&(E.feature=e[97]),c[0]&2048&&(E.showPlaceType=e[11]),c[0]&57344&&(E.style=e[15]===e[99]?"selected":((_=e[14])==null?void 0:_.id)===e[97].id?"picked":"default"),c[0]&4096&&(E.iconsBaseUrl=e[12]),n.$set(E)},i(g){r||(re(n.$$.fragment,g),r=!0)},o(g){fe(n.$$.fragment,g),r=!1},d(g){g&&$(t),Fe(n,g)}}}function Cr(i){let e,t,n,r,u,a,o,g,c,E,_,M,R,k,I,C,O,x,N,P=!1;u=new fr({});let B=!i[20]&&Di(i),z=i[20]&&zi(),W=i[6]==="button"&&Ui(i);const s=i[70].default,l=Sn(s,i,i[69],null),f=[Mr,Tr,xr,Sr],m=[];function h(d,v){var p,y;return d[19]?0:!d[16]&&!d[4]?1:((p=d[13])==null?void 0:p.length)===0?2:(y=d[13])!=null&&y.length&&(d[16]||d[4])?3:-1}return~(k=h(i))&&(I=m[k]=f[k](i)),{c(){e=we(),t=Y("form"),n=Y("div"),r=Y("button"),Qe(u.$$.fragment),a=we(),o=Y("input"),g=we(),c=Y("div"),B&&B.c(),E=we(),z&&z.c(),_=we(),W&&W.c(),M=we(),l&&l.c(),R=we(),I&&I.c(),S(r,"class","search-button svelte-bz0zu3"),S(r,"type","button"),S(o,"placeholder",i[9]),S(o,"aria-label",i[9]),S(o,"class","svelte-bz0zu3"),S(c,"class","clear-button-container svelte-bz0zu3"),Ie(c,"displayable",i[1]!==""),S(n,"class","input-group svelte-bz0zu3"),S(t,"class",C=Pt(i[2])+" svelte-bz0zu3"),Ie(t,"can-collapse",i[5]&&i[1]==="")},m(d,v){te(d,e,v),te(d,t,v),V(t,n),V(n,r),qe(u,r,null),V(n,a),V(n,o),i[72](o),Ei(o,i[1]),V(n,g),V(n,c),B&&B.m(c,null),V(c,E),z&&z.m(c,null),V(n,_),W&&W.m(n,null),V(n,M),l&&l.m(n,null),V(t,R),~k&&m[k].m(t,null),O=!0,x||(N=[he(r,"click",i[71]),he(o,"input",i[73]),he(o,"focus",i[74]),he(o,"blur",i[75]),he(o,"click",i[76]),he(o,"keydown",i[23]),he(o,"input",i[24]),he(o,"change",i[77]),he(t,"submit",Nn(i[22]))],x=!0)},p(d,v){(!O||v[0]&512)&&S(o,"placeholder",d[9]),(!O||v[0]&512)&&S(o,"aria-label",d[9]),v[0]&2&&o.value!==d[1]&&Ei(o,d[1]),d[20]?B&&(yt(),fe(B,1,1,()=>{B=null}),vt()):B?(B.p(d,v),v[0]&1048576&&re(B,1)):(B=Di(d),B.c(),re(B,1),B.m(c,E)),d[20]?z?v[0]&1048576&&re(z,1):(z=zi(),z.c(),re(z,1),z.m(c,null)):z&&(yt(),fe(z,1,1,()=>{z=null}),vt()),(!O||v[0]&2)&&Ie(c,"displayable",d[1]!==""),d[6]==="button"?W?(W.p(d,v),v[0]&64&&re(W,1)):(W=Ui(d),W.c(),re(W,1),W.m(n,M)):W&&(yt(),fe(W,1,1,()=>{W=null}),vt()),l&&l.p&&(!O||v[2]&128)&&Tn(l,s,d,d[69],O?xn(s,d[69],v,null):Mn(d[69]),null);let p=k;k=h(d),k===p?~k&&m[k].p(d,v):(I&&(yt(),fe(m[p],1,1,()=>{m[p]=null}),vt()),~k?(I=m[k],I?I.p(d,v):(I=m[k]=f[k](d),I.c()),re(I,1),I.m(t,null)):I=null),(!O||v[0]&4&&C!==(C=Pt(d[2])+" svelte-bz0zu3"))&&S(t,"class",C),(!O||v[0]&38)&&Ie(t,"can-collapse",d[5]&&d[1]==="")},i(d){O||(re(P),re(u.$$.fragment,d),re(B),re(z),re(W),re(l,d),re(I),O=!0)},o(d){fe(P),fe(u.$$.fragment,d),fe(B),fe(z),fe(W),fe(l,d),fe(I),O=!1},d(d){d&&($(e),$(t)),Fe(u),i[72](null),B&&B.d(),z&&z.d(),W&&W.d(),l&&l.d(d),~k&&m[k].d(),x=!1,Ue(N)}}}function Nr(i,e,t){let n,r,u,{$$slots:a={},$$scope:o}=e;const g={continental_marine:4,country:4,major_landform:8,region:5,subregion:6,county:7,joint_municipality:8,joint_submunicipality:9,municipality:10,municipal_district:11,locality:12,neighbourhood:13,place:14,postal_code:14,road:16,poi:17,address:18,"poi.peak":15,"poi.shop":18,"poi.cafe":18,"poi.restaurant":18,"poi.aerodrome":13};let{class:c=void 0}=e,{apiKey:E=void 0}=e,{bbox:_=void 0}=e,{clearButtonTitle:M="clear"}=e,{clearOnBlur:R=!1}=e,{clearListOnPick:k=!1}=e,{keepListOpen:I=!1}=e,{collapsed:C=!1}=e,{country:O=void 0}=e,{debounceSearch:x=200}=e,{enableReverse:N="never"}=e,{errorMessage:P="Something went wrong"}=e,{filter:B=()=>!0}=e,{flyTo:z=!0}=e,{fuzzyMatch:W=!0}=e,{language:s=void 0}=e,{limit:l=void 0}=e;const f=41415112612;let{reverseGeocodingLimit:m=f}=e,{mapController:h=void 0}=e,{minLength:d=2}=e,{noResultsMessage:v="Oops! Looks like you're trying to predict something that's not quite right. We can't seem to find what you're looking for. Maybe try double-checking your spelling or try a different search term. Keep on typing - we'll do our best to get you where you need to go!"}=e,{placeholder:p="Search"}=e,{proximity:y=[{type:"server-geolocation"}]}=e,{reverseActive:b=N==="always"}=e,{reverseButtonTitle:w="toggle reverse geocoding"}=e,{searchValue:T=""}=e,{pickedResultStyle:G="full-geometry"}=e,{showPlaceType:D="if-needed"}=e,{showResultsWhileTyping:H=!0}=e,{selectFirst:Q=!0}=e,{flyToSelected:se=!1}=e,{markerOnSelected:Z=!0}=e,{types:K=void 0}=e;const de=[];let{reverseGeocodingTypes:He=de}=e,{exhaustiveReverseGeocoding:st=!1}=e,{excludeTypes:ot=!1}=e;const Le=void 0;let{reverseGeocodingExcludeTypes:We=Le}=e,{zoom:pe=g}=e,{apiUrl:ge="https://api.maptiler.com/geocoding"}=e,{fetchParameters:ie={}}=e,{iconsBaseUrl:hn="https://cdn.maptiler.com/maptiler-geocoding-control/v2.1.7/icons/"}=e,{adjustUrlQuery:ui=()=>{}}=e,{adjustUrl:ai=()=>{}}=e;function gs(L){Pe.focus(L)}function ms(){Pe.blur()}function dn(L,le=!0,ae=!1){t(1,T=L),le?(t(15,X=-1),mn()):(pn(void 0,!ae,ae),setTimeout(()=>{Pe.focus(),Pe.select()}))}function ps(){t(13,F=void 0),t(14,U=void 0),t(15,X=-1)}function ys(){t(64,ce=[]),t(14,U=void 0)}let F,ce,U,gn="",Pe,X=-1,Ge,Zt=[],lt,ct,ht,fi,Ve=!1;const vs=new Set,tt=_i();Rn(()=>{h&&(h.setEventHandler(void 0),h.indicateReverse(!1),h.setSelectedMarker(-1),h.setFeatures(void 0,void 0,!1))});function mn(L){if(t(17,Ve=!1),ct&&(clearTimeout(ct),ct=void 0),X>-1&&F)t(14,U=F[X]),t(1,T=U.place_type[0]==="reverse"?U.place_name:U.place_name.replace(/,.*/,"")),t(19,Ge=void 0),t(64,ce=void 0),t(15,X=-1);else if(T){const le=L||!ci(T);hi(T,{exact:!0}).then(()=>{t(64,ce=F),t(14,U=void 0),le&&bs()}).catch(ae=>t(19,Ge=ae))}}function ci(L){try{return _r(L,6)}catch{return!1}}async function hi(L,{byId:le=!1,exact:ae=!1}={}){var Se,De,it;t(19,Ge=void 0),lt==null||lt.abort();const _e=new AbortController;t(20,lt=_e);try{const J=ci(L),Mt=new URL(ge+"/"+encodeURIComponent(J?J.decimalLongitude+","+J.decimalLatitude:L)+".json"),Ne=Mt.searchParams;s!==void 0&&Ne.set("language",Array.isArray(s)?s.join(","):s??"");const[mi]=(h==null?void 0:h.getCenterAndZoom())??[];let ze=(Se=!J||He===de?K:He)==null?void 0:Se.map(ve=>typeof ve=="string"?ve:mi===void 0||(ve[0]??0)<=mi&&mi<(ve[1]??1/0)?ve[2]:void 0).filter(ve=>ve!==void 0);ze&&(ze=[...new Set(ze)],Ne.set("types",ze.join(",")));const vn=!J||We===Le?ot:We;if(vn&&Ne.set("excludeTypes",String(vn)),_&&Ne.set("bbox",_.map(ve=>ve.toFixed(6)).join(",")),O&&Ne.set("country",Array.isArray(O)?O.join(","):O),!le&&!J){const ve=await hr(h,y,_e);ve&&Ne.set("proximity",ve),(ae||!H)&&Ne.set("autocomplete","false"),Ne.set("fuzzyMatch",String(W))}const Ct=m===f?l:m;Ct!==void 0&&Ct>1&&(ze==null?void 0:ze.length)!==1&&console.warn("For reverse geocoding when limit > 1 then types must contain single value."),J?(Ct===1||Ct!==void 0&&(st||(ze==null?void 0:ze.length)===1))&&Ne.set("limit",String(Ct)):l!==void 0&&Ne.set("limit",String(l)),E&&Ne.set("key",E),ui(Ne),ai(Mt);const Bs=Mt.searchParams.get("types")===""&&Mt.searchParams.get("excludeTypes")!=="true",Ht=Mt.toString();if(Ht===gn){le?(k&&t(13,F=void 0),t(14,U=Zt[0])):(t(13,F=Zt),((De=F[X])==null?void 0:De.id)!==(r==null?void 0:r.id)&&t(15,X=-1));return}gn=Ht;let Nt;if(Bs)Nt={type:"FeatureCollection",features:[]};else{const ve=await fetch(Ht,{signal:_e.signal,...ie});if(!ve.ok)throw new Error(await ve.text());Nt=await ve.json()}tt("response",{url:Ht,featureCollection:Nt}),le?(k&&t(13,F=void 0),t(14,U=Nt.features[0]),Zt=[U]):(t(13,F=Nt.features.filter(B)),J&&F.unshift({type:"Feature",properties:{},id:"reverse_"+J.decimalLongitude+"_"+J.decimalLatitude,text:J.decimalLatitude+", "+J.decimalLongitude,place_name:J.decimalLatitude+", "+J.decimalLongitude,place_type:["reverse"],center:[J.decimalLongitude,J.decimalLatitude],bbox:[J.decimalLongitude,J.decimalLatitude,J.decimalLongitude,J.decimalLatitude],geometry:{type:"Point",coordinates:[J.decimalLongitude,J.decimalLatitude]}}),Zt=F,((it=F[X])==null?void 0:it.id)!==(r==null?void 0:r.id)&&t(15,X=-1),J&&Pe.focus())}catch(J){if(J&&typeof J=="object"&&"name"in J&&J.name==="AbortError")return;throw J}finally{_e===lt&&t(20,lt=void 0)}}function bs(){var _e;if(!(ce!=null&&ce.length)||!z)return;const L=[180,90,-180,-90],le=!ce.some(Se=>!Se.matching_text);let ae;for(const Se of ce){const De=Tt(Se);if(ae=ae===void 0?De:De===void 0?ae:Math.max(ae,De),le||!Se.matching_text)for(const it of[0,1,2,3])L[it]=Math[it<2?"min":"max"](L[it],((_e=Se.bbox)==null?void 0:_e[it])??Se.center[it%2])}h&&ce.length>0&&(U&&L[0]===L[2]&&L[1]===L[3]?h.flyTo(U.center,Tt(U)):h.fitBounds(Bt(L),50,ae))}function di(){!U||!h||(!U.bbox||U.bbox[0]===U.bbox[2]&&U.bbox[1]===U.bbox[3]?h.flyTo(U.center,Tt(U)):h.fitBounds(Bt(U.bbox),50,Tt(U)))}function Tt(L){var ae;if(!L.bbox||L.bbox[0]!==L.bbox[2]&&L.bbox[1]!==L.bbox[3])return;const le=L.id.replace(/\..*/,"");return(Array.isArray((ae=L.properties)==null?void 0:ae.categories)?L.properties.categories.reduce((_e,Se)=>{const De=pe[le+"."+Se];return _e===void 0?De:De===void 0?_e:Math.max(_e,De)},void 0):void 0)??pe[le]}function ws(L){t(0,b=N==="always"),t(13,F=void 0),t(14,U=void 0),t(15,X=-1),dn(L[1].toFixed(6)+", "+cr(L[0],[-180,180],!0).toFixed(6),!1,!0)}function Es(L){if(!F)return;let le=L.key==="ArrowDown"?1:L.key==="ArrowUp"?-1:0;le&&(Pe.focus(),t(17,Ve=!0),L.preventDefault(),U&&X===-1&&t(15,X=F.findIndex(ae=>ae.id===(U==null?void 0:U.id))),X===(U||Q?0:-1)&&le===-1&&t(15,X=F.length),t(15,X+=le),X>=F.length&&t(15,X=-1),X<0&&(U||Q)&&t(15,X=0))}function pn(L,le=!0,ae=!1){if(t(19,Ge=void 0),t(14,U=void 0),t(17,Ve=!0),H||ae){if(ct&&clearTimeout(ct),T.length<d)return;const _e=T;ct=window.setTimeout(()=>{hi(_e).catch(Se=>t(19,Ge=Se))},le?x:0)}else t(13,F=void 0),t(19,Ge=void 0)}function gi(L){U&&(U==null?void 0:U.id)===(L==null?void 0:L.id)?di():(t(14,U=L),t(1,T=L.place_name))}function yn(L){t(15,X=L)}function Ls(){(!Q||U)&&t(15,X=-1),se&&di()}const _s=()=>Pe.focus();function Ss(L){Yt[L?"unshift":"push"](()=>{Pe=L,t(18,Pe)})}function xs(){T=this.value,t(1,T),t(17,Ve),t(31,R),t(16,ht)}const Ts=()=>t(17,Ve=!0),Ms=()=>t(17,Ve=!1),Cs=()=>t(17,Ve=!0),Ns=()=>t(14,U=void 0),ks=()=>{t(1,T=""),t(14,U=void 0),Pe.focus()},Os=()=>t(0,b=!b),Rs=()=>t(19,Ge=void 0),Ps=L=>yn(L),Is=L=>gi(L),As=()=>{};return i.$$set=L=>{"class"in L&&t(2,c=L.class),"apiKey"in L&&t(29,E=L.apiKey),"bbox"in L&&t(30,_=L.bbox),"clearButtonTitle"in L&&t(3,M=L.clearButtonTitle),"clearOnBlur"in L&&t(31,R=L.clearOnBlur),"clearListOnPick"in L&&t(32,k=L.clearListOnPick),"keepListOpen"in L&&t(4,I=L.keepListOpen),"collapsed"in L&&t(5,C=L.collapsed),"country"in L&&t(33,O=L.country),"debounceSearch"in L&&t(34,x=L.debounceSearch),"enableReverse"in L&&t(6,N=L.enableReverse),"errorMessage"in L&&t(7,P=L.errorMessage),"filter"in L&&t(35,B=L.filter),"flyTo"in L&&t(36,z=L.flyTo),"fuzzyMatch"in L&&t(37,W=L.fuzzyMatch),"language"in L&&t(38,s=L.language),"limit"in L&&t(39,l=L.limit),"reverseGeocodingLimit"in L&&t(40,m=L.reverseGeocodingLimit),"mapController"in L&&t(41,h=L.mapController),"minLength"in L&&t(42,d=L.minLength),"noResultsMessage"in L&&t(8,v=L.noResultsMessage),"placeholder"in L&&t(9,p=L.placeholder),"proximity"in L&&t(43,y=L.proximity),"reverseActive"in L&&t(0,b=L.reverseActive),"reverseButtonTitle"in L&&t(10,w=L.reverseButtonTitle),"searchValue"in L&&t(1,T=L.searchValue),"pickedResultStyle"in L&&t(44,G=L.pickedResultStyle),"showPlaceType"in L&&t(11,D=L.showPlaceType),"showResultsWhileTyping"in L&&t(45,H=L.showResultsWhileTyping),"selectFirst"in L&&t(46,Q=L.selectFirst),"flyToSelected"in L&&t(47,se=L.flyToSelected),"markerOnSelected"in L&&t(48,Z=L.markerOnSelected),"types"in L&&t(49,K=L.types),"reverseGeocodingTypes"in L&&t(50,He=L.reverseGeocodingTypes),"exhaustiveReverseGeocoding"in L&&t(51,st=L.exhaustiveReverseGeocoding),"excludeTypes"in L&&t(52,ot=L.excludeTypes),"reverseGeocodingExcludeTypes"in L&&t(53,We=L.reverseGeocodingExcludeTypes),"zoom"in L&&t(54,pe=L.zoom),"apiUrl"in L&&t(55,ge=L.apiUrl),"fetchParameters"in L&&t(56,ie=L.fetchParameters),"iconsBaseUrl"in L&&t(12,hn=L.iconsBaseUrl),"adjustUrlQuery"in L&&t(57,ui=L.adjustUrlQuery),"adjustUrl"in L&&t(58,ai=L.adjustUrl),"$$scope"in L&&t(69,o=L.$$scope)},i.$$.update=()=>{if(i.$$.dirty[0]&64&&t(0,b=N==="always"),i.$$.dirty[0]&16384|i.$$.dirty[1]&8192&&G!=="marker-only"&&U&&!U.address&&U.geometry.type==="Point"&&U.place_type[0]!=="reverse"&&hi(U.id,{byId:!0}).catch(L=>t(19,Ge=L)),i.$$.dirty[0]&16384|i.$$.dirty[1]&1058|i.$$.dirty[2]&8&&(h&&U&&U.id!==fi&&z&&(di(),k&&t(13,F=void 0),t(64,ce=void 0),t(15,X=-1)),t(65,fi=U==null?void 0:U.id)),i.$$.dirty[0]&196608|i.$$.dirty[1]&1&&setTimeout(()=>{t(16,ht=Ve),R&&!ht&&t(1,T="")}),i.$$.dirty[0]&8194|i.$$.dirty[1]&2048&&T.length<d&&(t(13,F=void 0),t(19,Ge=void 0),t(64,ce=F)),i.$$.dirty[0]&57344|i.$$.dirty[1]&32768&&Q&&F!=null&&F.length&&X==-1&&!U&&t(15,X=0),i.$$.dirty[0]&8192|i.$$.dirty[2]&4&&ce!==F&&t(64,ce=void 0),i.$$.dirty[0]&73729|i.$$.dirty[1]&1024|i.$$.dirty[2]&4&&h&&h.setEventHandler(L=>{switch(L.type){case"mapClick":b&&ws(L.coordinates);break;case"markerClick":{const le=F==null?void 0:F.find(ae=>ae.id===L.id);le&&gi(le)}break;case"markerMouseEnter":ce&&t(15,X=ht?(F==null?void 0:F.findIndex(le=>le.id===L.id))??-1:-1);break;case"markerMouseLeave":ce&&t(15,X=-1);break}}),i.$$.dirty[0]&40960&&t(66,r=F==null?void 0:F[X]),i.$$.dirty[1]&66592|i.$$.dirty[2]&16&&h&&r&&z&&se&&h.flyTo(r.center,Tt(r)),i.$$.dirty[1]&8192&&t(68,n=G==="full-geometry-including-polygon-center-marker"),i.$$.dirty[1]&132096|i.$$.dirty[2]&64&&(Z||h==null||h.setFeatures(void 0,void 0,n)),i.$$.dirty[0]&16384|i.$$.dirty[1]&132096|i.$$.dirty[2]&84&&h&&Z&&!ce&&(h.setFeatures(r?[r]:void 0,U,n),h.setSelectedMarker(r?0:-1)),i.$$.dirty[0]&16384|i.$$.dirty[1]&1024|i.$$.dirty[2]&68&&h&&h.setFeatures(ce,U,n),i.$$.dirty[0]&32768|i.$$.dirty[1]&1024|i.$$.dirty[2]&4&&ce&&h&&h.setSelectedMarker(X),i.$$.dirty[0]&2|i.$$.dirty[1]&1024&&h){const L=ci(T);h.setReverseMarker(L?[L.decimalLongitude,L.decimalLatitude]:void 0)}i.$$.dirty[2]&16&&tt("select",{feature:r}),i.$$.dirty[0]&16384&&tt("pick",{feature:U}),i.$$.dirty[0]&73744&&t(67,u=!!(F!=null&&F.length)&&(ht||I)),i.$$.dirty[2]&32&&tt("optionsvisibilitychange",{optionsVisible:u}),i.$$.dirty[0]&8192&&tt("featureslisted",{features:F}),i.$$.dirty[2]&4&&tt("featuresmarked",{features:ce}),i.$$.dirty[0]&1&&tt("reversetoggle",{reverse:b}),i.$$.dirty[0]&2&&tt("querychange",{query:T}),i.$$.dirty[0]&1|i.$$.dirty[1]&1024&&h&&h.indicateReverse(b)},[b,T,c,M,I,C,N,P,v,p,w,D,hn,F,U,X,ht,Ve,Pe,Ge,lt,vs,mn,Es,pn,gi,yn,Ls,g,E,_,R,k,O,x,B,z,W,s,l,m,h,d,y,G,H,Q,se,Z,K,He,st,ot,We,pe,ge,ie,ui,ai,gs,ms,dn,ps,ys,ce,fi,r,u,n,o,a,_s,Ss,xs,Ts,Ms,Cs,Ns,ks,Os,Rs,Ps,Is,As]}let kr=class extends Je{constructor(e){super(),Xe(this,e,Nr,Cr,Ke,{ZOOM_DEFAULTS:28,class:2,apiKey:29,bbox:30,clearButtonTitle:3,clearOnBlur:31,clearListOnPick:32,keepListOpen:4,collapsed:5,country:33,debounceSearch:34,enableReverse:6,errorMessage:7,filter:35,flyTo:36,fuzzyMatch:37,language:38,limit:39,reverseGeocodingLimit:40,mapController:41,minLength:42,noResultsMessage:8,placeholder:9,proximity:43,reverseActive:0,reverseButtonTitle:10,searchValue:1,pickedResultStyle:44,showPlaceType:11,showResultsWhileTyping:45,selectFirst:46,flyToSelected:47,markerOnSelected:48,types:49,reverseGeocodingTypes:50,exhaustiveReverseGeocoding:51,excludeTypes:52,reverseGeocodingExcludeTypes:53,zoom:54,apiUrl:55,fetchParameters:56,iconsBaseUrl:12,adjustUrlQuery:57,adjustUrl:58,focus:59,blur:60,setQuery:61,clearList:62,clearMap:63},null,[-1,-1,-1,-1])}get ZOOM_DEFAULTS(){return this.$$.ctx[28]}get focus(){return this.$$.ctx[59]}get blur(){return this.$$.ctx[60]}get setQuery(){return this.$$.ctx[61]}get clearList(){return this.$$.ctx[62]}get clearMap(){return this.$$.ctx[63]}};function Et(i,e,t={}){const n={type:"Feature"};return(t.id===0||t.id)&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.properties=e||{},n.geometry=i,n}function ti(i,e,t={}){for(const r of i){if(r.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(r[r.length-1].length!==r[0].length)throw new Error("First and last Position are not equivalent.");for(let u=0;u<r[r.length-1].length;u++)if(r[r.length-1][u]!==r[0][u])throw new Error("First and last Position are not equivalent.")}return Et({type:"Polygon",coordinates:i},e,t)}function Lt(i,e={}){const t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=i,t}function Fi(i,e,t={}){return Et({type:"MultiPolygon",coordinates:i},e,t)}var Or=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,ii=Math.ceil,Te=Math.floor,be="[BigNumber Error] ",ji=be+"Number primitive has more than 15 significant digits: ",Re=1e14,q=14,Zi=9007199254740991,ni=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],$e=1e7,Ee=1e9;function Hi(i){var e,t,n,r=x.prototype={constructor:x,toString:null,valueOf:null},u=new x(1),a=20,o=4,g=-7,c=21,E=-1e7,_=1e7,M=!1,R=1,k=0,I={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},C="0123456789abcdefghijklmnopqrstuvwxyz",O=!0;function x(s,l){var f,m,h,d,v,p,y,b,w=this;if(!(w instanceof x))return new x(s,l);if(l==null){if(s&&s._isBigNumber===!0){w.s=s.s,!s.c||s.e>_?w.c=w.e=null:s.e<E?w.c=[w.e=0]:(w.e=s.e,w.c=s.c.slice());return}if((p=typeof s=="number")&&s*0==0){if(w.s=1/s<0?(s=-s,-1):1,s===~~s){for(d=0,v=s;v>=10;v/=10,d++);d>_?w.c=w.e=null:(w.e=d,w.c=[s]);return}b=String(s)}else{if(!Or.test(b=String(s)))return n(w,b,p);w.s=b.charCodeAt(0)==45?(b=b.slice(1),-1):1}(d=b.indexOf("."))>-1&&(b=b.replace(".","")),(v=b.search(/e/i))>0?(d<0&&(d=v),d+=+b.slice(v+1),b=b.substring(0,v)):d<0&&(d=b.length)}else{if(oe(l,2,C.length,"Base"),l==10&&O)return w=new x(s),z(w,a+w.e+1,o);if(b=String(s),p=typeof s=="number"){if(s*0!=0)return n(w,b,p,l);if(w.s=1/s<0?(b=b.slice(1),-1):1,x.DEBUG&&b.replace(/^0\.0*|\./,"").length>15)throw Error(ji+s)}else w.s=b.charCodeAt(0)===45?(b=b.slice(1),-1):1;for(f=C.slice(0,l),d=v=0,y=b.length;v<y;v++)if(f.indexOf(m=b.charAt(v))<0){if(m=="."){if(v>d){d=y;continue}}else if(!h&&(b==b.toUpperCase()&&(b=b.toLowerCase())||b==b.toLowerCase()&&(b=b.toUpperCase()))){h=!0,v=-1,d=0;continue}return n(w,String(s),p,l)}p=!1,b=t(b,l,10,w.s),(d=b.indexOf("."))>-1?b=b.replace(".",""):d=b.length}for(v=0;b.charCodeAt(v)===48;v++);for(y=b.length;b.charCodeAt(--y)===48;);if(b=b.slice(v,++y)){if(y-=v,p&&x.DEBUG&&y>15&&(s>Zi||s!==Te(s)))throw Error(ji+w.s*s);if((d=d-v-1)>_)w.c=w.e=null;else if(d<E)w.c=[w.e=0];else{if(w.e=d,w.c=[],v=(d+1)%q,d<0&&(v+=q),v<y){for(v&&w.c.push(+b.slice(0,v)),y-=q;v<y;)w.c.push(+b.slice(v,v+=q));v=q-(b=b.slice(v)).length}else v-=y;for(;v--;b+="0");w.c.push(+b)}}else w.c=[w.e=0]}x.clone=Hi,x.ROUND_UP=0,x.ROUND_DOWN=1,x.ROUND_CEIL=2,x.ROUND_FLOOR=3,x.ROUND_HALF_UP=4,x.ROUND_HALF_DOWN=5,x.ROUND_HALF_EVEN=6,x.ROUND_HALF_CEIL=7,x.ROUND_HALF_FLOOR=8,x.EUCLID=9,x.config=x.set=function(s){var l,f;if(s!=null)if(typeof s=="object"){if(s.hasOwnProperty(l="DECIMAL_PLACES")&&(f=s[l],oe(f,0,Ee,l),a=f),s.hasOwnProperty(l="ROUNDING_MODE")&&(f=s[l],oe(f,0,8,l),o=f),s.hasOwnProperty(l="EXPONENTIAL_AT")&&(f=s[l],f&&f.pop?(oe(f[0],-1e9,0,l),oe(f[1],0,Ee,l),g=f[0],c=f[1]):(oe(f,-1e9,Ee,l),g=-(c=f<0?-f:f))),s.hasOwnProperty(l="RANGE"))if(f=s[l],f&&f.pop)oe(f[0],-1e9,-1,l),oe(f[1],1,Ee,l),E=f[0],_=f[1];else if(oe(f,-1e9,Ee,l),f)E=-(_=f<0?-f:f);else throw Error(be+l+" cannot be zero: "+f);if(s.hasOwnProperty(l="CRYPTO"))if(f=s[l],f===!!f)if(f)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))M=f;else throw M=!f,Error(be+"crypto unavailable");else M=f;else throw Error(be+l+" not true or false: "+f);if(s.hasOwnProperty(l="MODULO_MODE")&&(f=s[l],oe(f,0,9,l),R=f),s.hasOwnProperty(l="POW_PRECISION")&&(f=s[l],oe(f,0,Ee,l),k=f),s.hasOwnProperty(l="FORMAT"))if(f=s[l],typeof f=="object")I=f;else throw Error(be+l+" not an object: "+f);if(s.hasOwnProperty(l="ALPHABET"))if(f=s[l],typeof f=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(f))O=f.slice(0,10)=="0123456789",C=f;else throw Error(be+l+" invalid: "+f)}else throw Error(be+"Object expected: "+s);return{DECIMAL_PLACES:a,ROUNDING_MODE:o,EXPONENTIAL_AT:[g,c],RANGE:[E,_],CRYPTO:M,MODULO_MODE:R,POW_PRECISION:k,FORMAT:I,ALPHABET:C}},x.isBigNumber=function(s){if(!s||s._isBigNumber!==!0)return!1;if(!x.DEBUG)return!0;var l,f,m=s.c,h=s.e,d=s.s;e:if({}.toString.call(m)=="[object Array]"){if((d===1||d===-1)&&h>=-1e9&&h<=Ee&&h===Te(h)){if(m[0]===0){if(h===0&&m.length===1)return!0;break e}if(l=(h+1)%q,l<1&&(l+=q),String(m[0]).length==l){for(l=0;l<m.length;l++)if(f=m[l],f<0||f>=Re||f!==Te(f))break e;if(f!==0)return!0}}}else if(m===null&&h===null&&(d===null||d===1||d===-1))return!0;throw Error(be+"Invalid BigNumber: "+s)},x.maximum=x.max=function(){return P(arguments,-1)},x.minimum=x.min=function(){return P(arguments,1)},x.random=function(){var s=9007199254740992,l=Math.random()*s&2097151?function(){return Te(Math.random()*s)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(f){var m,h,d,v,p,y=0,b=[],w=new x(u);if(f==null?f=a:oe(f,0,Ee),v=ii(f/q),M)if(crypto.getRandomValues){for(m=crypto.getRandomValues(new Uint32Array(v*=2));y<v;)p=m[y]*131072+(m[y+1]>>>11),p>=9e15?(h=crypto.getRandomValues(new Uint32Array(2)),m[y]=h[0],m[y+1]=h[1]):(b.push(p%1e14),y+=2);y=v/2}else if(crypto.randomBytes){for(m=crypto.randomBytes(v*=7);y<v;)p=(m[y]&31)*281474976710656+m[y+1]*1099511627776+m[y+2]*4294967296+m[y+3]*16777216+(m[y+4]<<16)+(m[y+5]<<8)+m[y+6],p>=9e15?crypto.randomBytes(7).copy(m,y):(b.push(p%1e14),y+=7);y=v/7}else throw M=!1,Error(be+"crypto unavailable");if(!M)for(;y<v;)p=l(),p<9e15&&(b[y++]=p%1e14);for(v=b[--y],f%=q,v&&f&&(p=ni[q-f],b[y]=Te(v/p)*p);b[y]===0;b.pop(),y--);if(y<0)b=[d=0];else{for(d=-1;b[0]===0;b.splice(0,1),d-=q);for(y=1,p=b[0];p>=10;p/=10,y++);y<q&&(d-=q-y)}return w.e=d,w.c=b,w}}(),x.sum=function(){for(var s=1,l=arguments,f=new x(l[0]);s<l.length;)f=f.plus(l[s++]);return f},t=function(){var s="0123456789";function l(f,m,h,d){for(var v,p=[0],y,b=0,w=f.length;b<w;){for(y=p.length;y--;p[y]*=m);for(p[0]+=d.indexOf(f.charAt(b++)),v=0;v<p.length;v++)p[v]>h-1&&(p[v+1]==null&&(p[v+1]=0),p[v+1]+=p[v]/h|0,p[v]%=h)}return p.reverse()}return function(f,m,h,d,v){var p,y,b,w,T,G,D,H,Q=f.indexOf("."),se=a,Z=o;for(Q>=0&&(w=k,k=0,f=f.replace(".",""),H=new x(m),G=H.pow(f.length-Q),k=w,H.c=l(je(Ce(G.c),G.e,"0"),10,h,s),H.e=H.c.length),D=l(f,m,h,v?(p=C,s):(p=s,C)),b=w=D.length;D[--w]==0;D.pop());if(!D[0])return p.charAt(0);if(Q<0?--b:(G.c=D,G.e=b,G.s=d,G=e(G,H,se,Z,h),D=G.c,T=G.r,b=G.e),y=b+se+1,Q=D[y],w=h/2,T=T||y<0||D[y+1]!=null,T=Z<4?(Q!=null||T)&&(Z==0||Z==(G.s<0?3:2)):Q>w||Q==w&&(Z==4||T||Z==6&&D[y-1]&1||Z==(G.s<0?8:7)),y<1||!D[0])f=T?je(p.charAt(1),-se,p.charAt(0)):p.charAt(0);else{if(D.length=y,T)for(--h;++D[--y]>h;)D[y]=0,y||(++b,D=[1].concat(D));for(w=D.length;!D[--w];);for(Q=0,f="";Q<=w;f+=p.charAt(D[Q++]));f=je(f,b,p.charAt(0))}return f}}(),e=function(){function s(m,h,d){var v,p,y,b,w=0,T=m.length,G=h%$e,D=h/$e|0;for(m=m.slice();T--;)y=m[T]%$e,b=m[T]/$e|0,v=D*y+b*G,p=G*y+v%$e*$e+w,w=(p/d|0)+(v/$e|0)+D*b,m[T]=p%d;return w&&(m=[w].concat(m)),m}function l(m,h,d,v){var p,y;if(d!=v)y=d>v?1:-1;else for(p=y=0;p<d;p++)if(m[p]!=h[p]){y=m[p]>h[p]?1:-1;break}return y}function f(m,h,d,v){for(var p=0;d--;)m[d]-=p,p=m[d]<h[d]?1:0,m[d]=p*v+m[d]-h[d];for(;!m[0]&&m.length>1;m.splice(0,1));}return function(m,h,d,v,p){var y,b,w,T,G,D,H,Q,se,Z,K,de,He,st,ot,Le,We,pe=m.s==h.s?1:-1,ge=m.c,ie=h.c;if(!ge||!ge[0]||!ie||!ie[0])return new x(!m.s||!h.s||(ge?ie&&ge[0]==ie[0]:!ie)?NaN:ge&&ge[0]==0||!ie?pe*0:pe/0);for(Q=new x(pe),se=Q.c=[],b=m.e-h.e,pe=d+b+1,p||(p=Re,b=Me(m.e/q)-Me(h.e/q),pe=pe/q|0),w=0;ie[w]==(ge[w]||0);w++);if(ie[w]>(ge[w]||0)&&b--,pe<0)se.push(1),T=!0;else{for(st=ge.length,Le=ie.length,w=0,pe+=2,G=Te(p/(ie[0]+1)),G>1&&(ie=s(ie,G,p),ge=s(ge,G,p),Le=ie.length,st=ge.length),He=Le,Z=ge.slice(0,Le),K=Z.length;K<Le;Z[K++]=0);We=ie.slice(),We=[0].concat(We),ot=ie[0],ie[1]>=p/2&&ot++;do{if(G=0,y=l(ie,Z,Le,K),y<0){if(de=Z[0],Le!=K&&(de=de*p+(Z[1]||0)),G=Te(de/ot),G>1)for(G>=p&&(G=p-1),D=s(ie,G,p),H=D.length,K=Z.length;l(D,Z,H,K)==1;)G--,f(D,Le<H?We:ie,H,p),H=D.length,y=1;else G==0&&(y=G=1),D=ie.slice(),H=D.length;if(H<K&&(D=[0].concat(D)),f(Z,D,K,p),K=Z.length,y==-1)for(;l(ie,Z,Le,K)<1;)G++,f(Z,Le<K?We:ie,K,p),K=Z.length}else y===0&&(G++,Z=[0]);se[w++]=G,Z[0]?Z[K++]=ge[He]||0:(Z=[ge[He]],K=1)}while((He++<st||Z[0]!=null)&&pe--);T=Z[0]!=null,se[0]||se.splice(0,1)}if(p==Re){for(w=1,pe=se[0];pe>=10;pe/=10,w++);z(Q,d+(Q.e=w+b*q-1)+1,v,T)}else Q.e=b,Q.r=+T;return Q}}();function N(s,l,f,m){var h,d,v,p,y;if(f==null?f=o:oe(f,0,8),!s.c)return s.toString();if(h=s.c[0],v=s.e,l==null)y=Ce(s.c),y=m==1||m==2&&(v<=g||v>=c)?Gt(y,v):je(y,v,"0");else if(s=z(new x(s),l,f),d=s.e,y=Ce(s.c),p=y.length,m==1||m==2&&(l<=d||d<=g)){for(;p<l;y+="0",p++);y=Gt(y,d)}else if(l-=v,y=je(y,d,"0"),d+1>p){if(--l>0)for(y+=".";l--;y+="0");}else if(l+=d-p,l>0)for(d+1==p&&(y+=".");l--;y+="0");return s.s<0&&h?"-"+y:y}function P(s,l){for(var f,m,h=1,d=new x(s[0]);h<s.length;h++)m=new x(s[h]),(!m.s||(f=rt(d,m))===l||f===0&&d.s===l)&&(d=m);return d}function B(s,l,f){for(var m=1,h=l.length;!l[--h];l.pop());for(h=l[0];h>=10;h/=10,m++);return(f=m+f*q-1)>_?s.c=s.e=null:f<E?s.c=[s.e=0]:(s.e=f,s.c=l),s}n=function(){var s=/^(-?)0([xbo])(?=\w[\w.]*$)/i,l=/^([^.]+)\.$/,f=/^\.([^.]+)$/,m=/^-?(Infinity|NaN)$/,h=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(d,v,p,y){var b,w=p?v:v.replace(h,"");if(m.test(w))d.s=isNaN(w)?null:w<0?-1:1;else{if(!p&&(w=w.replace(s,function(T,G,D){return b=(D=D.toLowerCase())=="x"?16:D=="b"?2:8,!y||y==b?G:T}),y&&(b=y,w=w.replace(l,"$1").replace(f,"0.$1")),v!=w))return new x(w,b);if(x.DEBUG)throw Error(be+"Not a"+(y?" base "+y:"")+" number: "+v);d.s=null}d.c=d.e=null}}();function z(s,l,f,m){var h,d,v,p,y,b,w,T=s.c,G=ni;if(T){e:{for(h=1,p=T[0];p>=10;p/=10,h++);if(d=l-h,d<0)d+=q,v=l,y=T[b=0],w=Te(y/G[h-v-1]%10);else if(b=ii((d+1)/q),b>=T.length)if(m){for(;T.length<=b;T.push(0));y=w=0,h=1,d%=q,v=d-q+1}else break e;else{for(y=p=T[b],h=1;p>=10;p/=10,h++);d%=q,v=d-q+h,w=v<0?0:Te(y/G[h-v-1]%10)}if(m=m||l<0||T[b+1]!=null||(v<0?y:y%G[h-v-1]),m=f<4?(w||m)&&(f==0||f==(s.s<0?3:2)):w>5||w==5&&(f==4||m||f==6&&(d>0?v>0?y/G[h-v]:0:T[b-1])%10&1||f==(s.s<0?8:7)),l<1||!T[0])return T.length=0,m?(l-=s.e+1,T[0]=G[(q-l%q)%q],s.e=-l||0):T[0]=s.e=0,s;if(d==0?(T.length=b,p=1,b--):(T.length=b+1,p=G[q-d],T[b]=v>0?Te(y/G[h-v]%G[v])*p:0),m)for(;;)if(b==0){for(d=1,v=T[0];v>=10;v/=10,d++);for(v=T[0]+=p,p=1;v>=10;v/=10,p++);d!=p&&(s.e++,T[0]==Re&&(T[0]=1));break}else{if(T[b]+=p,T[b]!=Re)break;T[b--]=0,p=1}for(d=T.length;T[--d]===0;T.pop());}s.e>_?s.c=s.e=null:s.e<E&&(s.c=[s.e=0])}return s}function W(s){var l,f=s.e;return f===null?s.toString():(l=Ce(s.c),l=f<=g||f>=c?Gt(l,f):je(l,f,"0"),s.s<0?"-"+l:l)}return r.absoluteValue=r.abs=function(){var s=new x(this);return s.s<0&&(s.s=1),s},r.comparedTo=function(s,l){return rt(this,new x(s,l))},r.decimalPlaces=r.dp=function(s,l){var f,m,h,d=this;if(s!=null)return oe(s,0,Ee),l==null?l=o:oe(l,0,8),z(new x(d),s+d.e+1,l);if(!(f=d.c))return null;if(m=((h=f.length-1)-Me(this.e/q))*q,h=f[h])for(;h%10==0;h/=10,m--);return m<0&&(m=0),m},r.dividedBy=r.div=function(s,l){return e(this,new x(s,l),a,o)},r.dividedToIntegerBy=r.idiv=function(s,l){return e(this,new x(s,l),0,1)},r.exponentiatedBy=r.pow=function(s,l){var f,m,h,d,v,p,y,b,w,T=this;if(s=new x(s),s.c&&!s.isInteger())throw Error(be+"Exponent not an integer: "+W(s));if(l!=null&&(l=new x(l)),p=s.e>14,!T.c||!T.c[0]||T.c[0]==1&&!T.e&&T.c.length==1||!s.c||!s.c[0])return w=new x(Math.pow(+W(T),p?s.s*(2-Wt(s)):+W(s))),l?w.mod(l):w;if(y=s.s<0,l){if(l.c?!l.c[0]:!l.s)return new x(NaN);m=!y&&T.isInteger()&&l.isInteger(),m&&(T=T.mod(l))}else{if(s.e>9&&(T.e>0||T.e<-1||(T.e==0?T.c[0]>1||p&&T.c[1]>=24e7:T.c[0]<8e13||p&&T.c[0]<=9999975e7)))return d=T.s<0&&Wt(s)?-0:0,T.e>-1&&(d=1/d),new x(y?1/d:d);k&&(d=ii(k/q+2))}for(p?(f=new x(.5),y&&(s.s=1),b=Wt(s)):(h=Math.abs(+W(s)),b=h%2),w=new x(u);;){if(b){if(w=w.times(T),!w.c)break;d?w.c.length>d&&(w.c.length=d):m&&(w=w.mod(l))}if(h){if(h=Te(h/2),h===0)break;b=h%2}else if(s=s.times(f),z(s,s.e+1,1),s.e>14)b=Wt(s);else{if(h=+W(s),h===0)break;b=h%2}T=T.times(T),d?T.c&&T.c.length>d&&(T.c.length=d):m&&(T=T.mod(l))}return m?w:(y&&(w=u.div(w)),l?w.mod(l):d?z(w,k,o,v):w)},r.integerValue=function(s){var l=new x(this);return s==null?s=o:oe(s,0,8),z(l,l.e+1,s)},r.isEqualTo=r.eq=function(s,l){return rt(this,new x(s,l))===0},r.isFinite=function(){return!!this.c},r.isGreaterThan=r.gt=function(s,l){return rt(this,new x(s,l))>0},r.isGreaterThanOrEqualTo=r.gte=function(s,l){return(l=rt(this,new x(s,l)))===1||l===0},r.isInteger=function(){return!!this.c&&Me(this.e/q)>this.c.length-2},r.isLessThan=r.lt=function(s,l){return rt(this,new x(s,l))<0},r.isLessThanOrEqualTo=r.lte=function(s,l){return(l=rt(this,new x(s,l)))===-1||l===0},r.isNaN=function(){return!this.s},r.isNegative=function(){return this.s<0},r.isPositive=function(){return this.s>0},r.isZero=function(){return!!this.c&&this.c[0]==0},r.minus=function(s,l){var f,m,h,d,v=this,p=v.s;if(s=new x(s,l),l=s.s,!p||!l)return new x(NaN);if(p!=l)return s.s=-l,v.plus(s);var y=v.e/q,b=s.e/q,w=v.c,T=s.c;if(!y||!b){if(!w||!T)return w?(s.s=-l,s):new x(T?v:NaN);if(!w[0]||!T[0])return T[0]?(s.s=-l,s):new x(w[0]?v:o==3?-0:0)}if(y=Me(y),b=Me(b),w=w.slice(),p=y-b){for((d=p<0)?(p=-p,h=w):(b=y,h=T),h.reverse(),l=p;l--;h.push(0));h.reverse()}else for(m=(d=(p=w.length)<(l=T.length))?p:l,p=l=0;l<m;l++)if(w[l]!=T[l]){d=w[l]<T[l];break}if(d&&(h=w,w=T,T=h,s.s=-s.s),l=(m=T.length)-(f=w.length),l>0)for(;l--;w[f++]=0);for(l=Re-1;m>p;){if(w[--m]<T[m]){for(f=m;f&&!w[--f];w[f]=l);--w[f],w[m]+=Re}w[m]-=T[m]}for(;w[0]==0;w.splice(0,1),--b);return w[0]?B(s,w,b):(s.s=o==3?-1:1,s.c=[s.e=0],s)},r.modulo=r.mod=function(s,l){var f,m,h=this;return s=new x(s,l),!h.c||!s.s||s.c&&!s.c[0]?new x(NaN):!s.c||h.c&&!h.c[0]?new x(h):(R==9?(m=s.s,s.s=1,f=e(h,s,0,3),s.s=m,f.s*=m):f=e(h,s,0,R),s=h.minus(f.times(s)),!s.c[0]&&R==1&&(s.s=h.s),s)},r.multipliedBy=r.times=function(s,l){var f,m,h,d,v,p,y,b,w,T,G,D,H,Q,se,Z=this,K=Z.c,de=(s=new x(s,l)).c;if(!K||!de||!K[0]||!de[0])return!Z.s||!s.s||K&&!K[0]&&!de||de&&!de[0]&&!K?s.c=s.e=s.s=null:(s.s*=Z.s,!K||!de?s.c=s.e=null:(s.c=[0],s.e=0)),s;for(m=Me(Z.e/q)+Me(s.e/q),s.s*=Z.s,y=K.length,T=de.length,y<T&&(H=K,K=de,de=H,h=y,y=T,T=h),h=y+T,H=[];h--;H.push(0));for(Q=Re,se=$e,h=T;--h>=0;){for(f=0,G=de[h]%se,D=de[h]/se|0,v=y,d=h+v;d>h;)b=K[--v]%se,w=K[v]/se|0,p=D*b+w*G,b=G*b+p%se*se+H[d]+f,f=(b/Q|0)+(p/se|0)+D*w,H[d--]=b%Q;H[d]=f}return f?++m:H.splice(0,1),B(s,H,m)},r.negated=function(){var s=new x(this);return s.s=-s.s||null,s},r.plus=function(s,l){var f,m=this,h=m.s;if(s=new x(s,l),l=s.s,!h||!l)return new x(NaN);if(h!=l)return s.s=-l,m.minus(s);var d=m.e/q,v=s.e/q,p=m.c,y=s.c;if(!d||!v){if(!p||!y)return new x(h/0);if(!p[0]||!y[0])return y[0]?s:new x(p[0]?m:h*0)}if(d=Me(d),v=Me(v),p=p.slice(),h=d-v){for(h>0?(v=d,f=y):(h=-h,f=p),f.reverse();h--;f.push(0));f.reverse()}for(h=p.length,l=y.length,h-l<0&&(f=y,y=p,p=f,l=h),h=0;l;)h=(p[--l]=p[l]+y[l]+h)/Re|0,p[l]=Re===p[l]?0:p[l]%Re;return h&&(p=[h].concat(p),++v),B(s,p,v)},r.precision=r.sd=function(s,l){var f,m,h,d=this;if(s!=null&&s!==!!s)return oe(s,1,Ee),l==null?l=o:oe(l,0,8),z(new x(d),s,l);if(!(f=d.c))return null;if(h=f.length-1,m=h*q+1,h=f[h]){for(;h%10==0;h/=10,m--);for(h=f[0];h>=10;h/=10,m++);}return s&&d.e+1>m&&(m=d.e+1),m},r.shiftedBy=function(s){return oe(s,-9007199254740991,Zi),this.times("1e"+s)},r.squareRoot=r.sqrt=function(){var s,l,f,m,h,d=this,v=d.c,p=d.s,y=d.e,b=a+4,w=new x("0.5");if(p!==1||!v||!v[0])return new x(!p||p<0&&(!v||v[0])?NaN:v?d:1/0);if(p=Math.sqrt(+W(d)),p==0||p==1/0?(l=Ce(v),(l.length+y)%2==0&&(l+="0"),p=Math.sqrt(+l),y=Me((y+1)/2)-(y<0||y%2),p==1/0?l="5e"+y:(l=p.toExponential(),l=l.slice(0,l.indexOf("e")+1)+y),f=new x(l)):f=new x(p+""),f.c[0]){for(y=f.e,p=y+b,p<3&&(p=0);;)if(h=f,f=w.times(h.plus(e(d,h,b,1))),Ce(h.c).slice(0,p)===(l=Ce(f.c)).slice(0,p))if(f.e<y&&--p,l=l.slice(p-3,p+1),l=="9999"||!m&&l=="4999"){if(!m&&(z(h,h.e+a+2,0),h.times(h).eq(d))){f=h;break}b+=4,p+=4,m=1}else{(!+l||!+l.slice(1)&&l.charAt(0)=="5")&&(z(f,f.e+a+2,1),s=!f.times(f).eq(d));break}}return z(f,f.e+a+1,o,s)},r.toExponential=function(s,l){return s!=null&&(oe(s,0,Ee),s++),N(this,s,l,1)},r.toFixed=function(s,l){return s!=null&&(oe(s,0,Ee),s=s+this.e+1),N(this,s,l)},r.toFormat=function(s,l,f){var m,h=this;if(f==null)s!=null&&l&&typeof l=="object"?(f=l,l=null):s&&typeof s=="object"?(f=s,s=l=null):f=I;else if(typeof f!="object")throw Error(be+"Argument not an object: "+f);if(m=h.toFixed(s,l),h.c){var d,v=m.split("."),p=+f.groupSize,y=+f.secondaryGroupSize,b=f.groupSeparator||"",w=v[0],T=v[1],G=h.s<0,D=G?w.slice(1):w,H=D.length;if(y&&(d=p,p=y,y=d,H-=d),p>0&&H>0){for(d=H%p||p,w=D.substr(0,d);d<H;d+=p)w+=b+D.substr(d,p);y>0&&(w+=b+D.slice(d)),G&&(w="-"+w)}m=T?w+(f.decimalSeparator||"")+((y=+f.fractionGroupSize)?T.replace(new RegExp("\\d{"+y+"}\\B","g"),"$&"+(f.fractionGroupSeparator||"")):T):w}return(f.prefix||"")+m+(f.suffix||"")},r.toFraction=function(s){var l,f,m,h,d,v,p,y,b,w,T,G,D=this,H=D.c;if(s!=null&&(p=new x(s),!p.isInteger()&&(p.c||p.s!==1)||p.lt(u)))throw Error(be+"Argument "+(p.isInteger()?"out of range: ":"not an integer: ")+W(p));if(!H)return new x(D);for(l=new x(u),b=f=new x(u),m=y=new x(u),G=Ce(H),d=l.e=G.length-D.e-1,l.c[0]=ni[(v=d%q)<0?q+v:v],s=!s||p.comparedTo(l)>0?d>0?l:b:p,v=_,_=1/0,p=new x(G),y.c[0]=0;w=e(p,l,0,1),h=f.plus(w.times(m)),h.comparedTo(s)!=1;)f=m,m=h,b=y.plus(w.times(h=b)),y=h,l=p.minus(w.times(h=l)),p=h;return h=e(s.minus(f),m,0,1),y=y.plus(h.times(b)),f=f.plus(h.times(m)),y.s=b.s=D.s,d=d*2,T=e(b,m,d,o).minus(D).abs().comparedTo(e(y,f,d,o).minus(D).abs())<1?[b,m]:[y,f],_=v,T},r.toNumber=function(){return+W(this)},r.toPrecision=function(s,l){return s!=null&&oe(s,1,Ee),N(this,s,l,2)},r.toString=function(s){var l,f=this,m=f.s,h=f.e;return h===null?m?(l="Infinity",m<0&&(l="-"+l)):l="NaN":(s==null?l=h<=g||h>=c?Gt(Ce(f.c),h):je(Ce(f.c),h,"0"):s===10&&O?(f=z(new x(f),a+h+1,o),l=je(Ce(f.c),f.e,"0")):(oe(s,2,C.length,"Base"),l=t(je(Ce(f.c),h,"0"),10,s,m,!0)),m<0&&f.c[0]&&(l="-"+l)),l},r.valueOf=r.toJSON=function(){return W(this)},r._isBigNumber=!0,r[Symbol.toStringTag]="BigNumber",r[Symbol.for("nodejs.util.inspect.custom")]=r.valueOf,i!=null&&x.set(i),x}function Me(i){var e=i|0;return i>0||i===e?e:e-1}function Ce(i){for(var e,t,n=1,r=i.length,u=i[0]+"";n<r;){for(e=i[n++]+"",t=q-e.length;t--;e="0"+e);u+=e}for(r=u.length;u.charCodeAt(--r)===48;);return u.slice(0,r+1||1)}function rt(i,e){var t,n,r=i.c,u=e.c,a=i.s,o=e.s,g=i.e,c=e.e;if(!a||!o)return null;if(t=r&&!r[0],n=u&&!u[0],t||n)return t?n?0:-o:a;if(a!=o)return a;if(t=a<0,n=g==c,!r||!u)return n?0:!r^t?1:-1;if(!n)return g>c^t?1:-1;for(o=(g=r.length)<(c=u.length)?g:c,a=0;a<o;a++)if(r[a]!=u[a])return r[a]>u[a]^t?1:-1;return g==c?0:g>c^t?1:-1}function oe(i,e,t,n){if(i<e||i>t||i!==Te(i))throw Error(be+(n||"Argument")+(typeof i=="number"?i<e||i>t?" out of range: ":" not an integer: ":" not a primitive number: ")+String(i))}function Wt(i){var e=i.c.length-1;return Me(i.e/q)==e&&i.c[e]%2!=0}function Gt(i,e){return(i.length>1?i.charAt(0)+"."+i.slice(1):i)+(e<0?"e":"e+")+e}function je(i,e,t){var n,r;if(e<0){for(r=t+".";++e;r+=t);i=r+i}else if(n=i.length,++e>n){for(r=t,e-=n;--e;r+=t);i+=r}else e<n&&(i=i.slice(0,e)+"."+i.slice(e));return i}var Ae=Hi(),Rr=class{constructor(i){A(this,"key");A(this,"left",null);A(this,"right",null);this.key=i}},_t=class extends Rr{constructor(i){super(i)}},Pr=class{constructor(){A(this,"size",0);A(this,"modificationCount",0);A(this,"splayCount",0)}splay(i){const e=this.root;if(e==null)return this.compare(i,i),-1;let t=null,n=null,r=null,u=null,a=e;const o=this.compare;let g;for(;;)if(g=o(a.key,i),g>0){let c=a.left;if(c==null||(g=o(c.key,i),g>0&&(a.left=c.right,c.right=a,a=c,c=a.left,c==null)))break;t==null?n=a:t.left=a,t=a,a=c}else if(g<0){let c=a.right;if(c==null||(g=o(c.key,i),g<0&&(a.right=c.left,c.left=a,a=c,c=a.right,c==null)))break;r==null?u=a:r.right=a,r=a,a=c}else break;return r!=null&&(r.right=a.left,a.left=u),t!=null&&(t.left=a.right,a.right=n),this.root!==a&&(this.root=a,this.splayCount++),g}splayMin(i){let e=i,t=e.left;for(;t!=null;){const n=t;e.left=n.right,n.right=e,e=n,t=e.left}return e}splayMax(i){let e=i,t=e.right;for(;t!=null;){const n=t;e.right=n.left,n.left=e,e=n,t=e.right}return e}_delete(i){if(this.root==null||this.splay(i)!=0)return null;let t=this.root;const n=t,r=t.left;if(this.size--,r==null)this.root=t.right;else{const u=t.right;t=this.splayMax(r),t.right=u,this.root=t}return this.modificationCount++,n}addNewRoot(i,e){this.size++,this.modificationCount++;const t=this.root;if(t==null){this.root=i;return}e<0?(i.left=t,i.right=t.right,t.right=null):(i.right=t,i.left=t.left,t.left=null),this.root=i}_first(){const i=this.root;return i==null?null:(this.root=this.splayMin(i),this.root)}_last(){const i=this.root;return i==null?null:(this.root=this.splayMax(i),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(i){return this.validKey(i)&&this.splay(i)==0}defaultCompare(){return(i,e)=>i<e?-1:i>e?1:0}wrap(){return{getRoot:()=>this.root,setRoot:i=>{this.root=i},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:i=>{this.splayCount=i},splay:i=>this.splay(i),has:i=>this.has(i)}}},Dt=class Ot extends Pr{constructor(t,n){super();A(this,"root",null);A(this,"compare");A(this,"validKey");A(this,fn,"[object Set]");this.compare=t??this.defaultCompare(),this.validKey=n??(r=>r!=null&&r!=null)}delete(t){return this.validKey(t)?this._delete(t)!=null:!1}deleteAll(t){for(const n of t)this.delete(n)}forEach(t){const n=this[Symbol.iterator]();let r;for(;r=n.next(),!r.done;)t(r.value,r.value,this)}add(t){const n=this.splay(t);return n!=0&&this.addNewRoot(new _t(t),n),this}addAndReturn(t){const n=this.splay(t);return n!=0&&this.addNewRoot(new _t(t),n),this.root.key}addAll(t){for(const n of t)this.add(n)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(t){if(t==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(t)<0)return this.root.key;let r=this.root.left;if(r==null)return null;let u=r.right;for(;u!=null;)r=u,u=r.right;return r.key}firstAfter(t){if(t==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(t)>0)return this.root.key;let r=this.root.right;if(r==null)return null;let u=r.left;for(;u!=null;)r=u,u=r.left;return r.key}retainAll(t){const n=new Ot(this.compare,this.validKey),r=this.modificationCount;for(const u of t){if(r!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(u)&&this.splay(u)==0&&n.add(this.root.key)}n.size!=this.size&&(this.root=n.root,this.size=n.size,this.modificationCount++)}lookup(t){return!this.validKey(t)||this.splay(t)!=0?null:this.root.key}intersection(t){const n=new Ot(this.compare,this.validKey);for(const r of this)t.has(r)&&n.add(r);return n}difference(t){const n=new Ot(this.compare,this.validKey);for(const r of this)t.has(r)||n.add(r);return n}union(t){const n=this.clone();return n.addAll(t),n}clone(){const t=new Ot(this.compare,this.validKey);return t.size=this.size,t.root=this.copyNode(this.root),t}copyNode(t){if(t==null)return null;function n(u,a){let o,g;do{if(o=u.left,g=u.right,o!=null){const c=new _t(o.key);a.left=c,n(o,c)}if(g!=null){const c=new _t(g.key);a.right=c,u=g,a=c}}while(g!=null)}const r=new _t(t.key);return n(t,r),r}toSet(){return this.clone()}entries(){return new Ar(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(cn=Symbol.iterator,fn=Symbol.toStringTag,cn)](){return new Ir(this.wrap())}},Vi=class{constructor(i){A(this,"tree");A(this,"path",new Array);A(this,"modificationCount",null);A(this,"splayCount");this.tree=i,this.splayCount=i.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;const i=this.path[this.path.length-1];return this.getValue(i)}rebuildPath(i){this.path.splice(0,this.path.length),this.tree.splay(i),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(i){for(;i!=null;)this.path.push(i),i=i.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let t=this.tree.getRoot();for(;t!=null;)this.path.push(t),t=t.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let i=this.path[this.path.length-1],e=i.right;if(e!=null){for(;e!=null;)this.path.push(e),e=e.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===i;)i=this.path.pop();return this.path.length>0}},Ir=class extends Vi{getValue(i){return i.key}},Ar=class extends Vi{getValue(i){return[i.key,i.key]}},Ki=i=>()=>i,ri=i=>{const e=i?(t,n)=>n.minus(t).abs().isLessThanOrEqualTo(i):Ki(!1);return(t,n)=>e(t,n)?0:t.comparedTo(n)};function Br(i){const e=i?(t,n,r,u,a)=>t.exponentiatedBy(2).isLessThanOrEqualTo(u.minus(n).exponentiatedBy(2).plus(a.minus(r).exponentiatedBy(2)).times(i)):Ki(!1);return(t,n,r)=>{const u=t.x,a=t.y,o=r.x,g=r.y,c=a.minus(g).times(n.x.minus(o)).minus(u.minus(o).times(n.y.minus(g)));return e(c,u,a,o,g)?0:c.comparedTo(0)}}var Wr=i=>i,Gr=i=>{if(i){const e=new Dt(ri(i)),t=new Dt(ri(i)),n=(u,a)=>a.addAndReturn(u),r=u=>({x:n(u.x,e),y:n(u.y,t)});return r({x:new Ae(0),y:new Ae(0)}),r}return Wr},si=i=>({set:e=>{Ze=si(e)},reset:()=>si(i),compare:ri(i),snap:Gr(i),orient:Br(i)}),Ze=si(),St=(i,e)=>i.ll.x.isLessThanOrEqualTo(e.x)&&e.x.isLessThanOrEqualTo(i.ur.x)&&i.ll.y.isLessThanOrEqualTo(e.y)&&e.y.isLessThanOrEqualTo(i.ur.y),oi=(i,e)=>{if(e.ur.x.isLessThan(i.ll.x)||i.ur.x.isLessThan(e.ll.x)||e.ur.y.isLessThan(i.ll.y)||i.ur.y.isLessThan(e.ll.y))return null;const t=i.ll.x.isLessThan(e.ll.x)?e.ll.x:i.ll.x,n=i.ur.x.isLessThan(e.ur.x)?i.ur.x:e.ur.x,r=i.ll.y.isLessThan(e.ll.y)?e.ll.y:i.ll.y,u=i.ur.y.isLessThan(e.ur.y)?i.ur.y:e.ur.y;return{ll:{x:t,y:r},ur:{x:n,y:u}}},zt=(i,e)=>i.x.times(e.y).minus(i.y.times(e.x)),Yi=(i,e)=>i.x.times(e.x).plus(i.y.times(e.y)),Ut=i=>Yi(i,i).sqrt(),Dr=(i,e,t)=>{const n={x:e.x.minus(i.x),y:e.y.minus(i.y)},r={x:t.x.minus(i.x),y:t.y.minus(i.y)};return zt(r,n).div(Ut(r)).div(Ut(n))},zr=(i,e,t)=>{const n={x:e.x.minus(i.x),y:e.y.minus(i.y)},r={x:t.x.minus(i.x),y:t.y.minus(i.y)};return Yi(r,n).div(Ut(r)).div(Ut(n))},Qi=(i,e,t)=>e.y.isZero()?null:{x:i.x.plus(e.x.div(e.y).times(t.minus(i.y))),y:t},Xi=(i,e,t)=>e.x.isZero()?null:{x:t,y:i.y.plus(e.y.div(e.x).times(t.minus(i.x)))},Ur=(i,e,t,n)=>{if(e.x.isZero())return Xi(t,n,i.x);if(n.x.isZero())return Xi(i,e,t.x);if(e.y.isZero())return Qi(t,n,i.y);if(n.y.isZero())return Qi(i,e,t.y);const r=zt(e,n);if(r.isZero())return null;const u={x:t.x.minus(i.x),y:t.y.minus(i.y)},a=zt(u,e).div(r),o=zt(u,n).div(r),g=i.x.plus(o.times(e.x)),c=t.x.plus(a.times(n.x)),E=i.y.plus(o.times(e.y)),_=t.y.plus(a.times(n.y)),M=g.plus(c).div(2),R=E.plus(_).div(2);return{x:M,y:R}},Be=class En{constructor(e,t){A(this,"point");A(this,"isLeft");A(this,"segment");A(this,"otherSE");A(this,"consumedBy");e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=t}static compare(e,t){const n=En.comparePoints(e.point,t.point);return n!==0?n:(e.point!==t.point&&e.link(t),e.isLeft!==t.isLeft?e.isLeft?1:-1:Ft.compare(e.segment,t.segment))}static comparePoints(e,t){return e.x.isLessThan(t.x)?-1:e.x.isGreaterThan(t.x)?1:e.y.isLessThan(t.y)?-1:e.y.isGreaterThan(t.y)?1:0}link(e){if(e.point===this.point)throw new Error("Tried to link already linked events");const t=e.point.events;for(let n=0,r=t.length;n<r;n++){const u=t[n];this.point.events.push(u),u.point=this.point}this.checkForConsuming()}checkForConsuming(){const e=this.point.events.length;for(let t=0;t<e;t++){const n=this.point.events[t];if(n.segment.consumedBy===void 0)for(let r=t+1;r<e;r++){const u=this.point.events[r];u.consumedBy===void 0&&n.otherSE.point.events===u.otherSE.point.events&&n.segment.consume(u.segment)}}}getAvailableLinkedEvents(){const e=[];for(let t=0,n=this.point.events.length;t<n;t++){const r=this.point.events[t];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&e.push(r)}return e}getLeftmostComparator(e){const t=new Map,n=r=>{const u=r.otherSE;t.set(r,{sine:Dr(this.point,e.point,u.point),cosine:zr(this.point,e.point,u.point)})};return(r,u)=>{t.has(r)||n(r),t.has(u)||n(u);const{sine:a,cosine:o}=t.get(r),{sine:g,cosine:c}=t.get(u);return a.isGreaterThanOrEqualTo(0)&&g.isGreaterThanOrEqualTo(0)?o.isLessThan(c)?1:o.isGreaterThan(c)?-1:0:a.isLessThan(0)&&g.isLessThan(0)?o.isLessThan(c)?-1:o.isGreaterThan(c)?1:0:g.isLessThan(a)?-1:g.isGreaterThan(a)?1:0}}},qr=class pi{constructor(e){A(this,"events");A(this,"poly");A(this,"_isExteriorRing");A(this,"_enclosingRing");this.events=e;for(let t=0,n=e.length;t<n;t++)e[t].segment.ringOut=this;this.poly=null}static factory(e){const t=[];for(let n=0,r=e.length;n<r;n++){const u=e[n];if(!u.isInResult()||u.ringOut)continue;let a=null,o=u.leftSE,g=u.rightSE;const c=[o],E=o.point,_=[];for(;a=o,o=g,c.push(o),o.point!==E;)for(;;){const M=o.getAvailableLinkedEvents();if(M.length===0){const I=c[0].point,C=c[c.length-1].point;throw new Error(`Unable to complete output ring starting at [${I.x}, ${I.y}]. Last matching segment found ends at [${C.x}, ${C.y}].`)}if(M.length===1){g=M[0].otherSE;break}let R=null;for(let I=0,C=_.length;I<C;I++)if(_[I].point===o.point){R=I;break}if(R!==null){const I=_.splice(R)[0],C=c.splice(I.index);C.unshift(C[0].otherSE),t.push(new pi(C.reverse()));continue}_.push({index:c.length,point:o.point});const k=o.getLeftmostComparator(a);g=M.sort(k)[0].otherSE;break}t.push(new pi(c))}return t}getGeom(){let e=this.events[0].point;const t=[e];for(let c=1,E=this.events.length-1;c<E;c++){const _=this.events[c].point,M=this.events[c+1].point;Ze.orient(_,e,M)!==0&&(t.push(_),e=_)}if(t.length===1)return null;const n=t[0],r=t[1];Ze.orient(n,e,r)===0&&t.shift(),t.push(t[0]);const u=this.isExteriorRing()?1:-1,a=this.isExteriorRing()?0:t.length-1,o=this.isExteriorRing()?t.length:-1,g=[];for(let c=a;c!=o;c+=u)g.push([t[c].x.toNumber(),t[c].y.toNumber()]);return g}isExteriorRing(){if(this._isExteriorRing===void 0){const e=this.enclosingRing();this._isExteriorRing=e?!e.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var r,u;let e=this.events[0];for(let a=1,o=this.events.length;a<o;a++){const g=this.events[a];Be.compare(e,g)>0&&(e=g)}let t=e.segment.prevInResult(),n=t?t.prevInResult():null;for(;;){if(!t)return null;if(!n)return t.ringOut;if(n.ringOut!==t.ringOut)return((r=n.ringOut)==null?void 0:r.enclosingRing())!==t.ringOut?t.ringOut:(u=t.ringOut)==null?void 0:u.enclosingRing();t=n.prevInResult(),n=t?t.prevInResult():null}}},Ji=class{constructor(i){A(this,"exteriorRing");A(this,"interiorRings");this.exteriorRing=i,i.poly=this,this.interiorRings=[]}addInterior(i){this.interiorRings.push(i),i.poly=this}getGeom(){const i=this.exteriorRing.getGeom();if(i===null)return null;const e=[i];for(let t=0,n=this.interiorRings.length;t<n;t++){const r=this.interiorRings[t].getGeom();r!==null&&e.push(r)}return e}},Fr=class{constructor(i){A(this,"rings");A(this,"polys");this.rings=i,this.polys=this._composePolys(i)}getGeom(){const i=[];for(let e=0,t=this.polys.length;e<t;e++){const n=this.polys[e].getGeom();n!==null&&i.push(n)}return i}_composePolys(i){var t;const e=[];for(let n=0,r=i.length;n<r;n++){const u=i[n];if(!u.poly)if(u.isExteriorRing())e.push(new Ji(u));else{const a=u.enclosingRing();a!=null&&a.poly||e.push(new Ji(a)),(t=a==null?void 0:a.poly)==null||t.addInterior(u)}}return e}},jr=class{constructor(i,e=Ft.compare){A(this,"queue");A(this,"tree");A(this,"segments");this.queue=i,this.tree=new Dt(e),this.segments=[]}process(i){const e=i.segment,t=[];if(i.consumedBy)return i.isLeft?this.queue.delete(i.otherSE):this.tree.delete(e),t;i.isLeft&&this.tree.add(e);let n=e,r=e;do n=this.tree.lastBefore(n);while(n!=null&&n.consumedBy!=null);do r=this.tree.firstAfter(r);while(r!=null&&r.consumedBy!=null);if(i.isLeft){let u=null;if(n){const o=n.getIntersection(e);if(o!==null&&(e.isAnEndpoint(o)||(u=o),!n.isAnEndpoint(o))){const g=this._splitSafely(n,o);for(let c=0,E=g.length;c<E;c++)t.push(g[c])}}let a=null;if(r){const o=r.getIntersection(e);if(o!==null&&(e.isAnEndpoint(o)||(a=o),!r.isAnEndpoint(o))){const g=this._splitSafely(r,o);for(let c=0,E=g.length;c<E;c++)t.push(g[c])}}if(u!==null||a!==null){let o=null;u===null?o=a:a===null?o=u:o=Be.comparePoints(u,a)<=0?u:a,this.queue.delete(e.rightSE),t.push(e.rightSE);const g=e.split(o);for(let c=0,E=g.length;c<E;c++)t.push(g[c])}t.length>0?(this.tree.delete(e),t.push(i)):(this.segments.push(e),e.prev=n)}else{if(n&&r){const u=n.getIntersection(r);if(u!==null){if(!n.isAnEndpoint(u)){const a=this._splitSafely(n,u);for(let o=0,g=a.length;o<g;o++)t.push(a[o])}if(!r.isAnEndpoint(u)){const a=this._splitSafely(r,u);for(let o=0,g=a.length;o<g;o++)t.push(a[o])}}}this.tree.delete(e)}return t}_splitSafely(i,e){this.tree.delete(i);const t=i.rightSE;this.queue.delete(t);const n=i.split(e);return n.push(t),i.consumedBy===void 0&&this.tree.add(i),n}},Zr=class{constructor(){A(this,"type");A(this,"numMultiPolys")}run(i,e,t){xt.type=i;const n=[new en(e,!0)];for(let c=0,E=t.length;c<E;c++)n.push(new en(t[c],!1));if(xt.numMultiPolys=n.length,xt.type==="difference"){const c=n[0];let E=1;for(;E<n.length;)oi(n[E].bbox,c.bbox)!==null?E++:n.splice(E,1)}if(xt.type==="intersection")for(let c=0,E=n.length;c<E;c++){const _=n[c];for(let M=c+1,R=n.length;M<R;M++)if(oi(_.bbox,n[M].bbox)===null)return[]}const r=new Dt(Be.compare);for(let c=0,E=n.length;c<E;c++){const _=n[c].getSweepEvents();for(let M=0,R=_.length;M<R;M++)r.add(_[M])}const u=new jr(r);let a=null;for(r.size!=0&&(a=r.first(),r.delete(a));a;){const c=u.process(a);for(let E=0,_=c.length;E<_;E++){const M=c[E];M.consumedBy===void 0&&r.add(M)}r.size!=0?(a=r.first(),r.delete(a)):a=null}Ze.reset();const o=qr.factory(u.segments);return new Fr(o).getGeom()}},xt=new Zr,qt=xt,Hr=0,Ft=class Kt{constructor(e,t,n,r){A(this,"id");A(this,"leftSE");A(this,"rightSE");A(this,"rings");A(this,"windings");A(this,"ringOut");A(this,"consumedBy");A(this,"prev");A(this,"_prevInResult");A(this,"_beforeState");A(this,"_afterState");A(this,"_isInResult");this.id=++Hr,this.leftSE=e,e.segment=this,e.otherSE=t,this.rightSE=t,t.segment=this,t.otherSE=e,this.rings=n,this.windings=r}static compare(e,t){const n=e.leftSE.point.x,r=t.leftSE.point.x,u=e.rightSE.point.x,a=t.rightSE.point.x;if(a.isLessThan(n))return 1;if(u.isLessThan(r))return-1;const o=e.leftSE.point.y,g=t.leftSE.point.y,c=e.rightSE.point.y,E=t.rightSE.point.y;if(n.isLessThan(r)){if(g.isLessThan(o)&&g.isLessThan(c))return 1;if(g.isGreaterThan(o)&&g.isGreaterThan(c))return-1;const _=e.comparePoint(t.leftSE.point);if(_<0)return 1;if(_>0)return-1;const M=t.comparePoint(e.rightSE.point);return M!==0?M:-1}if(n.isGreaterThan(r)){if(o.isLessThan(g)&&o.isLessThan(E))return-1;if(o.isGreaterThan(g)&&o.isGreaterThan(E))return 1;const _=t.comparePoint(e.leftSE.point);if(_!==0)return _;const M=e.comparePoint(t.rightSE.point);return M<0?1:M>0?-1:1}if(o.isLessThan(g))return-1;if(o.isGreaterThan(g))return 1;if(u.isLessThan(a)){const _=t.comparePoint(e.rightSE.point);if(_!==0)return _}if(u.isGreaterThan(a)){const _=e.comparePoint(t.rightSE.point);if(_<0)return 1;if(_>0)return-1}if(!u.eq(a)){const _=c.minus(o),M=u.minus(n),R=E.minus(g),k=a.minus(r);if(_.isGreaterThan(M)&&R.isLessThan(k))return 1;if(_.isLessThan(M)&&R.isGreaterThan(k))return-1}return u.isGreaterThan(a)?1:u.isLessThan(a)||c.isLessThan(E)?-1:c.isGreaterThan(E)?1:e.id<t.id?-1:e.id>t.id?1:0}static fromRing(e,t,n){let r,u,a;const o=Be.comparePoints(e,t);if(o<0)r=e,u=t,a=1;else if(o>0)r=t,u=e,a=-1;else throw new Error(`Tried to create degenerate segment at [${e.x}, ${e.y}]`);const g=new Be(r,!0),c=new Be(u,!1);return new Kt(g,c,[n],[a])}replaceRightSE(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const e=this.leftSE.point.y,t=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e.isLessThan(t)?e:t},ur:{x:this.rightSE.point.x,y:e.isGreaterThan(t)?e:t}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(e){return e.x.eq(this.leftSE.point.x)&&e.y.eq(this.leftSE.point.y)||e.x.eq(this.rightSE.point.x)&&e.y.eq(this.rightSE.point.y)}comparePoint(e){return Ze.orient(this.leftSE.point,e,this.rightSE.point)}getIntersection(e){const t=this.bbox(),n=e.bbox(),r=oi(t,n);if(r===null)return null;const u=this.leftSE.point,a=this.rightSE.point,o=e.leftSE.point,g=e.rightSE.point,c=St(t,o)&&this.comparePoint(o)===0,E=St(n,u)&&e.comparePoint(u)===0,_=St(t,g)&&this.comparePoint(g)===0,M=St(n,a)&&e.comparePoint(a)===0;if(E&&c)return M&&!_?a:!M&&_?g:null;if(E)return _&&u.x.eq(g.x)&&u.y.eq(g.y)?null:u;if(c)return M&&a.x.eq(o.x)&&a.y.eq(o.y)?null:o;if(M&&_)return null;if(M)return a;if(_)return g;const R=Ur(u,this.vector(),o,e.vector());return R===null||!St(r,R)?null:Ze.snap(R)}split(e){const t=[],n=e.events!==void 0,r=new Be(e,!0),u=new Be(e,!1),a=this.rightSE;this.replaceRightSE(u),t.push(u),t.push(r);const o=new Kt(r,a,this.rings.slice(),this.windings.slice());return Be.comparePoints(o.leftSE.point,o.rightSE.point)>0&&o.swapEvents(),Be.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),n&&(r.checkForConsuming(),u.checkForConsuming()),t}swapEvents(){const e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let t=0,n=this.windings.length;t<n;t++)this.windings[t]*=-1}consume(e){let t=this,n=e;for(;t.consumedBy;)t=t.consumedBy;for(;n.consumedBy;)n=n.consumedBy;const r=Kt.compare(t,n);if(r!==0){if(r>0){const u=t;t=n,n=u}if(t.prev===n){const u=t;t=n,n=u}for(let u=0,a=n.rings.length;u<a;u++){const o=n.rings[u],g=n.windings[u],c=t.rings.indexOf(o);c===-1?(t.rings.push(o),t.windings.push(g)):t.windings[c]+=g}n.rings=null,n.windings=null,n.consumedBy=t,n.leftSE.consumedBy=t.leftSE,n.rightSE.consumedBy=t.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};const t=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys;for(let o=0,g=this.rings.length;o<g;o++){const c=this.rings[o],E=this.windings[o],_=t.indexOf(c);_===-1?(t.push(c),n.push(E)):n[_]+=E}const u=[],a=[];for(let o=0,g=t.length;o<g;o++){if(n[o]===0)continue;const c=t[o],E=c.poly;if(a.indexOf(E)===-1)if(c.isExterior)u.push(E);else{a.indexOf(E)===-1&&a.push(E);const _=u.indexOf(c.poly);_!==-1&&u.splice(_,1)}}for(let o=0,g=u.length;o<g;o++){const c=u[o].multiPoly;r.indexOf(c)===-1&&r.push(c)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const e=this.beforeState().multiPolys,t=this.afterState().multiPolys;switch(qt.type){case"union":{const n=e.length===0,r=t.length===0;this._isInResult=n!==r;break}case"intersection":{let n,r;e.length<t.length?(n=e.length,r=t.length):(n=t.length,r=e.length),this._isInResult=r===qt.numMultiPolys&&n<r;break}case"xor":{const n=Math.abs(e.length-t.length);this._isInResult=n%2===1;break}case"difference":{const n=r=>r.length===1&&r[0].isSubject;this._isInResult=n(e)!==n(t);break}}return this._isInResult}},$i=class{constructor(i,e,t){A(this,"poly");A(this,"isExterior");A(this,"segments");A(this,"bbox");if(!Array.isArray(i)||i.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=e,this.isExterior=t,this.segments=[],typeof i[0][0]!="number"||typeof i[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const n=Ze.snap({x:new Ae(i[0][0]),y:new Ae(i[0][1])});this.bbox={ll:{x:n.x,y:n.y},ur:{x:n.x,y:n.y}};let r=n;for(let u=1,a=i.length;u<a;u++){if(typeof i[u][0]!="number"||typeof i[u][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const o=Ze.snap({x:new Ae(i[u][0]),y:new Ae(i[u][1])});o.x.eq(r.x)&&o.y.eq(r.y)||(this.segments.push(Ft.fromRing(r,o,this)),o.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=o.x),o.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=o.y),o.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=o.x),o.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=o.y),r=o)}(!n.x.eq(r.x)||!n.y.eq(r.y))&&this.segments.push(Ft.fromRing(r,n,this))}getSweepEvents(){const i=[];for(let e=0,t=this.segments.length;e<t;e++){const n=this.segments[e];i.push(n.leftSE),i.push(n.rightSE)}return i}},Vr=class{constructor(i,e){A(this,"multiPoly");A(this,"exteriorRing");A(this,"interiorRings");A(this,"bbox");if(!Array.isArray(i))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new $i(i[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let t=1,n=i.length;t<n;t++){const r=new $i(i[t],this,!1);r.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=r.bbox.ll.x),r.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=r.bbox.ll.y),r.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=r.bbox.ur.x),r.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=r.bbox.ur.y),this.interiorRings.push(r)}this.multiPoly=e}getSweepEvents(){const i=this.exteriorRing.getSweepEvents();for(let e=0,t=this.interiorRings.length;e<t;e++){const n=this.interiorRings[e].getSweepEvents();for(let r=0,u=n.length;r<u;r++)i.push(n[r])}return i}},en=class{constructor(i,e){A(this,"isSubject");A(this,"polys");A(this,"bbox");if(!Array.isArray(i))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof i[0][0][0]=="number"&&(i=[i])}catch{}this.polys=[],this.bbox={ll:{x:new Ae(Number.POSITIVE_INFINITY),y:new Ae(Number.POSITIVE_INFINITY)},ur:{x:new Ae(Number.NEGATIVE_INFINITY),y:new Ae(Number.NEGATIVE_INFINITY)}};for(let t=0,n=i.length;t<n;t++){const r=new Vr(i[t],this);r.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=r.bbox.ll.x),r.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=r.bbox.ll.y),r.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=r.bbox.ur.x),r.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=r.bbox.ur.y),this.polys.push(r)}this.isSubject=e}getSweepEvents(){const i=[];for(let e=0,t=this.polys.length;e<t;e++){const n=this.polys[e].getSweepEvents();for(let r=0,u=n.length;r<u;r++)i.push(n[r])}return i}},Kr=(i,...e)=>qt.run("union",i,e),Yr=(i,...e)=>qt.run("difference",i,e);Ze.set;function tn(i,e,t){if(i!==null)for(var n,r,u,a,o,g,c,E=0,_=0,M,R=i.type,k=R==="FeatureCollection",I=R==="Feature",C=k?i.features.length:1,O=0;O<C;O++){c=k?i.features[O].geometry:I?i.geometry:i,M=c?c.type==="GeometryCollection":!1,o=M?c.geometries.length:1;for(var x=0;x<o;x++){var N=0,P=0;if(a=M?c.geometries[x]:c,a!==null){g=a.coordinates;var B=a.type;switch(E=0,B){case null:break;case"Point":if(e(g,_,O,N,P)===!1)return!1;_++,N++;break;case"LineString":case"MultiPoint":for(n=0;n<g.length;n++){if(e(g[n],_,O,N,P)===!1)return!1;_++,B==="MultiPoint"&&N++}B==="LineString"&&N++;break;case"Polygon":case"MultiLineString":for(n=0;n<g.length;n++){for(r=0;r<g[n].length-E;r++){if(e(g[n][r],_,O,N,P)===!1)return!1;_++}B==="MultiLineString"&&N++,B==="Polygon"&&P++}B==="Polygon"&&N++;break;case"MultiPolygon":for(n=0;n<g.length;n++){for(P=0,r=0;r<g[n].length;r++){for(u=0;u<g[n][r].length-E;u++){if(e(g[n][r][u],_,O,N,P)===!1)return!1;_++}P++}N++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(tn(a.geometries[n],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function li(i,e){var t,n,r,u,a,o,g,c,E,_,M=0,R=i.type==="FeatureCollection",k=i.type==="Feature",I=R?i.features.length:1;for(t=0;t<I;t++){for(o=R?i.features[t].geometry:k?i.geometry:i,c=R?i.features[t].properties:k?i.properties:{},E=R?i.features[t].bbox:k?i.bbox:void 0,_=R?i.features[t].id:k?i.id:void 0,g=o?o.type==="GeometryCollection":!1,a=g?o.geometries.length:1,r=0;r<a;r++){if(u=g?o.geometries[r]:o,u===null){if(e(null,M,c,E,_)===!1)return!1;continue}switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(u,M,c,E,_)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<u.geometries.length;n++)if(e(u.geometries[n],M,c,E,_)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}M++}}function Qr(i,e){li(i,function(t,n,r,u,a){var o=t===null?null:t.type;switch(o){case null:case"Point":case"LineString":case"Polygon":return e(Et(t,r,{bbox:u,id:a}),n,0)===!1?!1:void 0}var g;switch(o){case"MultiPoint":g="Point";break;case"MultiLineString":g="LineString";break;case"MultiPolygon":g="Polygon";break}for(var c=0;c<t.coordinates.length;c++){var E=t.coordinates[c],_={type:g,coordinates:E};if(e(Et(_,r),n,c)===!1)return!1}})}function Xr(i,e={}){const t=[];if(li(i,r=>{t.push(r.coordinates)}),t.length<2)throw new Error("Must have at least 2 geometries");const n=Kr(t[0],...t.slice(1));return n.length===0?null:n.length===1?ti(n[0],e.properties):Fi(n,e.properties)}var nn=Xr;function Jr(i,e={}){if(i.bbox!=null&&e.recompute!==!0)return i.bbox;const t=[1/0,1/0,-1/0,-1/0];return tn(i,n=>{t[0]>n[0]&&(t[0]=n[0]),t[1]>n[1]&&(t[1]=n[1]),t[2]<n[0]&&(t[2]=n[0]),t[3]<n[1]&&(t[3]=n[1])}),t}var rn=Jr;function $r(i){const e=[];if(li(i,r=>{e.push(r.coordinates)}),e.length<2)throw new Error("Must have at least two features");const t=i.features[0].properties||{},n=Yr(e[0],...e.slice(1));return n.length===0?null:n.length===1?ti(n[0],t):Fi(n,t)}var es=$r;function ts(i){if(!i)throw new Error("geojson is required");var e=[];return Qr(i,function(t){e.push(t)}),Lt(e)}var is=ts;function sn(i,e){const t=es(Lt([ti([[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]),i]));if(!t)return;t.properties={isMask:!0};const n=Bt(rn(i)),r=(n[2]-n[0])/360/1e3,u=n[0]<-180,a=n[2]>180,o=is(i);if(o.features.length>1&&(u||a))for(const g of o.features){const c=Bt(rn(g));if(a&&c[0]<-180+r)for(const E of g.geometry.coordinates)for(const _ of E)_[0]+=360-r;if(u&&c[2]>180-r)for(const E of g.geometry.coordinates)for(const _ of E)_[0]-=360-r}e(Lt([o.features.length<2?i:nn(o)??i,t]))}const on={fill:{paint:{"fill-color":"#000","fill-opacity":.1},filter:["all",["==",["geometry-type"],"Polygon"],["has","isMask"]]},line:{layout:{"line-cap":"square"},paint:{"line-width":["case",["==",["geometry-type"],"Polygon"],2,3],"line-dasharray":[1,1],"line-color":"#3170fe"},filter:["!",["has","isMask"]]}},jt="mtlr-gc-full-geom",ln="mtlr-gc-full-geom-fill",un="mtlr-gc-full-geom-line";function an(i,e,t=!0,n=!0,r={},u={},a=on){let o;const g=[];let c,E,_;function M(){if(!i.loaded){i.once("load",M);return}const C=a?a===!0?on:a:void 0;if(!(C!=null&&C.fill)&&!(C!=null&&C.line))return;const O=i.getSource(jt);if(O)O.setData(_??Lt([]));else if(_)i.addSource(jt,{type:"geojson",data:_});else return;!i.getLayer(ln)&&(C!=null&&C.fill)&&i.addLayer({...C==null?void 0:C.fill,id:ln,type:"fill",source:jt}),!i.getLayer(un)&&(C!=null&&C.line)&&i.addLayer({...C==null?void 0:C.line,id:un,type:"line",source:jt})}function R(C){_=C,M()}i.on("styledata",()=>{setTimeout(()=>{_&&M()})});const k=C=>{o==null||o({type:"mapClick",coordinates:[C.lngLat.lng,C.lngLat.lat]})};function I(C=!1){if(!e)throw new Error;const O=document.createElement("div");return C&&O.classList.add("marker-interactive"),new or({props:{displayIn:"maplibre"},target:O}),new e.Marker({element:O,offset:[1,-13]})}return{setEventHandler(C){C?(o=C,i.on("click",k)):(o=void 0,i.off("click",k))},flyTo(C,O){i.flyTo({center:C,...O?{zoom:O}:{},...r})},fitBounds(C,O,x){i.fitBounds([[C[0],C[1]],[C[2],C[3]]],{padding:O,...x?{maxZoom:x}:{},...u})},indicateReverse(C){i.getCanvasContainer().style.cursor=C?"crosshair":""},setReverseMarker(C){!e||!t||(E?C?E.setLngLat(C):(E.remove(),E=void 0):C&&(t instanceof Function?E=t(i)??void 0:(E=(typeof t=="object"?new e.Marker(t):I()).setLngLat(C).addTo(i),E.getElement().classList.add("marker-reverse"))))},setFeatures(C,O,x){for(const N of g)N.remove();if(g.length=0,R(void 0),!!e){e:if(O){let N=!1;if(O.geometry.type==="GeometryCollection"){const P=O.geometry.geometries.filter(B=>B.type==="Polygon"||B.type==="MultiPolygon");t:if(P.length>0){const B=nn(Lt(P.map(z=>Et(z))));if(!B)break t;sn({...O,geometry:B.geometry},R),N=!0}else{const B=O.geometry.geometries.filter(z=>z.type==="LineString"||z.type==="MultiLineString");B.length>0&&(R({...O,geometry:{type:"GeometryCollection",geometries:B}}),N=!0)}}if(!N){if(O.geometry.type==="Polygon"||O.geometry.type==="MultiPolygon")sn(O,R);else if(O.geometry.type==="LineString"||O.geometry.type==="MultiLineString"){R(O);break e}}if(!x&&!O.geometry.type.endsWith("Point"))break e;if(t instanceof Function){const P=t(i,O);P&&g.push(P)}else t&&g.push(typeof t=="object"?new e.Marker(t):I().setLngLat(O.center).addTo(i))}if(n)for(const N of C??[]){if(N===O)continue;let P;if(n instanceof Function){if(P=n(i,N),!P)continue}else P=(typeof n=="object"?new e.Marker(n):I(!0)).setLngLat(N.center).setPopup(new e.Popup({offset:[1,-27],closeButton:!1,closeOnMove:!0,className:"maptiler-gc-popup"}).setText(N.place_type[0]==="reverse"?N.place_name:N.place_name.replace(/,.*/,""))).addTo(i);const B=P.getElement();B.addEventListener("click",z=>{z.stopPropagation(),o==null||o({type:"markerClick",id:N.id})}),B.addEventListener("mouseenter",()=>{o==null||o({type:"markerMouseEnter",id:N.id}),P.togglePopup()}),B.addEventListener("mouseleave",()=>{o==null||o({type:"markerMouseLeave",id:N.id}),P.togglePopup()}),g.push(P)}}},setSelectedMarker(C){c&&c.getElement().classList.toggle("marker-selected",!1),c=C>-1?g[C]:void 0,c==null||c.getElement().classList.toggle("marker-selected",!0)},getCenterAndZoom(){const C=i.getCenter();return[i.getZoom(),C.lng,C.lat]}}}function ns(i,e,t){var k,I,C;class n{constructor(x,N){A(this,"type");A(this,"target");this.type=N,this.target=x}}class r extends n{constructor(N,P){super(N,"select");A(this,"feature");Object.assign(this,P)}}class u extends n{constructor(N,P){super(N,"featureslisted");A(this,"features");this.features=P}}class a extends n{constructor(N,P){super(N,"featuresmarked");A(this,"features");this.features=P}}class o extends n{constructor(N,P){super(N,"optionsvisibilitychange");A(this,"optionsVisible");this.optionsVisible=P}}class g extends n{constructor(N,P){super(N,"pick");A(this,"feature");this.feature=P}}class c extends n{constructor(N,P){super(N,"querychange");A(this,"query");this.query=P}}class E extends n{constructor(N,P,B){super(N,"response");A(this,"url");A(this,"featureCollection");this.url=P,this.featureCollection=B}}class _ extends n{constructor(N,P){super(N,"reversetoggle");A(this,"reverse");this.reverse=P}}class M extends i{constructor(N={}){super();Vt(this,k);Vt(this,I);Vt(this,C);kt(this,I,N)}onAddInt(N){const P=document.createElement("div");P.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl mapboxgl-ctrl-group";const{marker:B,showResultMarkers:z,flyTo:W,fullGeometryStyle:s,...l}=ue(this,I),f=typeof W=="boolean"?{}:W,h={mapController:an(N,e,B,z,f,f,s),flyTo:W===void 0?!0:!!W,apiKey:"",...t==null?void 0:t(N,P),...l};return h.apiKey||console.warn("No MapTiler Cloud API key was provided, some or all geocoding requests may fail"),kt(this,k,new kr({target:P,props:h})),ue(this,k).$on("select",d=>{this.fire(new r(this,d.detail))}),ue(this,k).$on("pick",d=>{this.fire(new g(this,d.detail.feature))}),ue(this,k).$on("featureslisted",d=>{this.fire(new u(this,d.detail.features))}),ue(this,k).$on("featuresmarked",d=>{this.fire(new a(this,d.detail.features))}),ue(this,k).$on("response",d=>{this.fire(new E(this,d.detail.url,d.detail.featureCollection))}),ue(this,k).$on("optionsvisibilitychange",d=>{this.fire(new o(this,d.detail.optionsVisible))}),ue(this,k).$on("reversetoggle",d=>{this.fire(new _(this,d.detail.reverse))}),ue(this,k).$on("querychange",d=>{this.fire(new c(this,d.detail.query))}),kt(this,C,P),P}on(N,P){return super.on(N,P)}once(N,P){return super.once(N,P)}off(N,P){return super.off(N,P)}listens(N){return super.listens(N)}setOptions(N){var l;Object.assign(ue(this,I),N);const{marker:P,showResultMarkers:B,flyTo:z,fullGeometryStyle:W,...s}=ue(this,I);(l=ue(this,k))==null||l.$set(s)}setQuery(N,P=!0){var B;(B=ue(this,k))==null||B.setQuery(N,P)}clearMap(){var N;(N=ue(this,k))==null||N.clearMap()}clearList(){var N;(N=ue(this,k))==null||N.clearList()}setReverseMode(N){var P;(P=ue(this,k))==null||P.$set({reverseActive:N})}focus(N){var P;(P=ue(this,k))==null||P.focus(N)}blur(){var N;(N=ue(this,k))==null||N.blur()}onRemove(){var N,P,B;(N=ue(this,k))==null||N.$destroy(),kt(this,k,void 0),(B=(P=ue(this,C))==null?void 0:P.parentNode)==null||B.removeChild(ue(this,C))}}return k=new WeakMap,I=new WeakMap,C=new WeakMap,{MapLibreBasedGeocodingControl:M,events:{SelectEvent:r,FeaturesListedEvent:u,FeaturesMarkedEvent:a,OptionsVisibilityChangeEvent:o,PickEvent:g,QueryChangeEvent:c,ResponseEvent:E,ReverseToggleEvent:_}}}const{MapLibreBasedGeocodingControl:rs,events:et}=ns(dt.Evented,dt);class ss extends rs{onAdd(e){return super.onAddInt(e)}}const os=et.SelectEvent,ls=et.FeaturesListedEvent,us=et.FeaturesMarkedEvent,as=et.OptionsVisibilityChangeEvent,fs=et.PickEvent,cs=et.QueryChangeEvent,hs=et.ResponseEvent,ds=et.ReverseToggleEvent;j.FeaturesListedEvent=ls,j.FeaturesMarkedEvent=us,j.GeocodingControl=ss,j.OptionsVisibilityChangeEvent=as,j.PickEvent=fs,j.QueryChangeEvent=cs,j.ResponseEvent=hs,j.ReverseToggleEvent=ds,j.SelectEvent=os,j.createMapLibreGlMapController=an,Object.defineProperty(j,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=maplibregl.umd.js.map
</script>
<script>!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).turf={})}(this,(function(t){"use strict";function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function n(t){if(Array.isArray(t))return t}function r(t,e,n){return e=l(e),function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,c()?Reflect.construct(e,n||[],l(t).constructor):e.apply(t,n))}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,y(r.key),r)}}function s(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=_(t))||e){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function u(t,e,n){return(e=y(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e)}function c(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(c=function(){return!!t})()}function f(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function g(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(t,e){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},v(t,e)}function d(t,e){return n(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,s,a=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return a}}(t,e)||_(t,e)||g()}function p(t){return function(t){if(Array.isArray(t))return e(t)}(t)||f(t)||_(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function _(t,n){if(t){if("string"==typeof t)return e(t,n);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}var x=6371008.8,E={centimeters:100*x,centimetres:100*x,degrees:360/(2*Math.PI),feet:3.28084*x,inches:39.37*x,kilometers:x/1e3,kilometres:x/1e3,meters:x,metres:x,miles:x/1609.344,millimeters:1e3*x,millimetres:1e3*x,nauticalmiles:x/1852,radians:1,yards:1.0936*x},k={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,nauticalmiles:2.9155334959812285e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046};function w(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function b(t,e){switch(t){case"Point":return I(e).geometry;case"LineString":return L(e).geometry;case"Polygon":return S(e).geometry;case"MultiPoint":return O(e).geometry;case"MultiLineString":return T(e).geometry;case"MultiPolygon":return R(e).geometry;default:throw new Error(t+" is invalid")}}function I(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!V(t[0])||!V(t[1]))throw new Error("coordinates must contain numbers");return w({type:"Point",coordinates:t},e,n)}function N(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return C(t.map((function(t){return I(t,e)})),n)}function S(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=a(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(o[o.length-1].length!==o[0].length)throw new Error("First and last Position are not equivalent.");for(var s=0;s<o[o.length-1].length;s++)if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}}catch(t){i.e(t)}finally{i.f()}return w({type:"Polygon",coordinates:t},e,r)}function M(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return C(t.map((function(t){return S(t,e)})),n)}function L(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t.length<2)throw new Error("coordinates must be an array of two or more positions");return w({type:"LineString",coordinates:t},e,n)}function P(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return C(t.map((function(t){return L(t,e)})),n)}function C(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function T(t,e){return w({type:"MultiLineString",coordinates:t},e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function O(t,e){return w({type:"MultiPoint",coordinates:t},e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function R(t,e){return w({type:"MultiPolygon",coordinates:t},e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function A(t,e){return w({type:"GeometryCollection",geometries:t},e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function D(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function F(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kilometers",n=E[e];if(!n)throw new Error(e+" units is invalid");return t*n}function q(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kilometers",n=E[e];if(!n)throw new Error(e+" units is invalid");return t/n}function G(t,e){return z(q(t,e))}function B(t){var e=t%360;return e<0&&(e+=360),e}function Y(t){return(t%=360)>180?t-360:t<-180?t+360:t}function z(t){return 180*(t%(2*Math.PI))/Math.PI}function j(t){return t%360*Math.PI/180}function X(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kilometers",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"kilometers";if(!(t>=0))throw new Error("length must be a positive number");return F(q(t,e),n)}function U(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"meters",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"kilometers";if(!(t>=0))throw new Error("area must be a positive number");var r=k[e];if(!r)throw new Error("invalid original units");var i=k[n];if(!i)throw new Error("invalid final units");return t/r*i}function V(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function Z(t){return null!==t&&"object"===m(t)&&!Array.isArray(t)}function H(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!V(t))throw new Error("bbox must only contain numbers")}))}function W(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(m(t)))throw new Error("id must be a number or a string")}var J=Object.freeze({__proto__:null,areaFactors:k,azimuthToBearing:Y,bearingToAzimuth:B,convertArea:U,convertLength:X,degreesToRadians:j,earthRadius:x,factors:E,feature:w,featureCollection:C,geometry:b,geometryCollection:A,isNumber:V,isObject:Z,lengthToDegrees:G,lengthToRadians:q,lineString:L,lineStrings:P,multiLineString:T,multiPoint:O,multiPolygon:R,point:I,points:N,polygon:S,polygons:M,radiansToDegrees:z,radiansToLength:F,round:D,validateBBox:H,validateId:W});function K(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return p(t.geometry.coordinates);if("Point"===t.type)return p(t.coordinates)}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return p(t);throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Q(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function $(t){if(t.length>1&&V(t[0])&&V(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return $(t[0]);throw new Error("coordinates must only contain numbers")}function tt(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function et(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function nt(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");var r,i=a(t.features);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+o.geometry.type)}}catch(t){i.e(t)}finally{i.f()}}function rt(t){return"Feature"===t.type?t.geometry:t}function it(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}var ot=Object.freeze({__proto__:null,collectionOf:nt,containsNumber:$,featureOf:et,geojsonType:tt,getCoord:K,getCoords:Q,getGeom:rt,getType:it});function st(t,e){if(!0===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).final)return function(t,e){var n=st(e,t);return n=(n+180)%360}(t,e);var n=K(t),r=K(e),i=j(n[0]),o=j(r[0]),s=j(n[1]),a=j(r[1]),u=Math.sin(o-i)*Math.cos(a),l=Math.cos(s)*Math.sin(a)-Math.sin(s)*Math.cos(a)*Math.cos(o-i);return z(Math.atan2(u,l))}function at(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=K(t),o=j(i[0]),s=j(i[1]),a=j(n),u=q(e,r.units),l=Math.asin(Math.sin(s)*Math.cos(u)+Math.cos(s)*Math.sin(u)*Math.cos(a)),h=z(o+Math.atan2(Math.sin(a)*Math.sin(u)*Math.cos(s),Math.cos(u)-Math.sin(s)*Math.sin(l))),c=z(l);return void 0!==i[2]?I([h,c,i[2]],r.properties):I([h,c],r.properties)}function ut(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=K(t),i=K(e),o=j(i[1]-r[1]),s=j(i[0]-r[0]),a=j(r[1]),u=j(i[1]),l=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(a)*Math.cos(u);return F(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),n.units)}function lt(t,e){var n;return(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).final?ht(K(e),K(t)):ht(K(t),K(e)))>180?-(360-n):n}function ht(t,e){var n=j(t[1]),r=j(e[1]),i=j(e[0]-t[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(z(Math.atan2(i,o))+360)%360}function ct(t,e,n){if(null!==t)for(var r,i,o,s,a,u,l,h,c=0,f=0,g=t.type,v="FeatureCollection"===g,d="Feature"===g,p=v?t.features.length:1,y=0;y<p;y++){a=(h=!!(l=v?t.features[y].geometry:d?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var m=0;m<a;m++){var _=0,x=0;if(null!==(s=h?l.geometries[m]:l)){u=s.coordinates;var E=s.type;switch(c=!n||"Polygon"!==E&&"MultiPolygon"!==E?0:1,E){case null:break;case"Point":if(!1===e(u,f,y,_,x))return!1;f++,_++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(!1===e(u[r],f,y,_,x))return!1;f++,"MultiPoint"===E&&_++}"LineString"===E&&_++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-c;i++){if(!1===e(u[r][i],f,y,_,x))return!1;f++}"MultiLineString"===E&&_++,"Polygon"===E&&x++}"Polygon"===E&&_++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(x=0,i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-c;o++){if(!1===e(u[r][i][o],f,y,_,x))return!1;f++}x++}_++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===ct(s.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function ft(t,e,n,r){var i=n;return ct(t,(function(t,r,o,s,a){i=0===r&&void 0===n?t:e(i,t,r,o,s,a)}),r),i}function gt(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function vt(t,e,n){var r=n;return gt(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r}function dt(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function pt(t,e,n){var r=n;return dt(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r}function yt(t){var e=[];return ct(t,(function(t){e.push(t)})),e}function mt(t,e){var n,r,i,o,s,a,u,l,h,c,f=0,g="FeatureCollection"===t.type,v="Feature"===t.type,d=g?t.features.length:1;for(n=0;n<d;n++){for(a=g?t.features[n].geometry:v?t.geometry:t,l=g?t.features[n].properties:v?t.properties:{},h=g?t.features[n].bbox:v?t.bbox:void 0,c=g?t.features[n].id:v?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=u?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,l,h,c))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],f,l,h,c))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,l,h,c))return!1;f++}}function _t(t,e,n){var r=n;return mt(t,(function(t,i,o,s,a){r=0===i&&void 0===n?t:e(r,t,i,o,s,a)})),r}function xt(t,e){mt(t,(function(t,n,r,i,o){var s,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==e(w(t,r,{bbox:i,id:o}),n,0)&&void 0}switch(a){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var u=0;u<t.coordinates.length;u++){var l=t.coordinates[u];if(!1===e(w({type:s,coordinates:l},r),n,u))return!1}}))}function Et(t,e,n){var r=n;return xt(t,(function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)})),r}function kt(t,e){xt(t,(function(t,n,r){var i=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var s,a=0,u=0,l=0;return!1!==ct(t,(function(o,h,c,f,g){if(void 0===s||n>a||f>u||g>l)return s=o,a=n,u=f,l=g,void(i=0);var v=L([s,o],t.properties);if(!1===e(v,n,r,g,i))return!1;i++,s=o}))&&void 0}}}))}function wt(t,e,n){var r=n,i=!1;return kt(t,(function(t,o,s,a,u){r=!1===i&&void 0===n?t:e(r,t,o,s,a,u),i=!0})),r}function bt(t,e){if(!t)throw new Error("geojson is required");xt(t,(function(t,n,r){if(null!==t.geometry){var i=t.geometry.type,o=t.geometry.coordinates;switch(i){case"LineString":if(!1===e(t,n,r,0,0))return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(!1===e(L(o[s],t.properties),n,r,s))return!1}}}))}function It(t,e,n){var r=n;return bt(t,(function(t,i,o,s){r=0===i&&void 0===n?t:e(r,t,i,o,s)})),r}function Nt(t,e){if(!Z(e=e||{}))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.segmentIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),a=a||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=u.length+s-1),L([u[s],u[s+1]],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s-1),L([u[o][s],u[o][s+1]],a,e);case"MultiLineString":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s-1),L([u[i][s],u[i][s+1]],a,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),s<0&&(s=u[i][o].length-s-1),L([u[i][o][s],u[i][o][s+1]],a,e)}throw new Error("geojson is invalid")}function St(t,e){if(!Z(e=e||{}))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.coordIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),a=a||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":return I(u,a,e);case"MultiPoint":return i<0&&(i=u.length+i),I(u[i],a,e);case"LineString":return s<0&&(s=u.length+s),I(u[s],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s),I(u[o][s],a,e);case"MultiLineString":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s),I(u[i][s],a,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),s<0&&(s=u[i][o].length-s),I(u[i][o][s],a,e)}throw new Error("geojson is invalid")}var Mt=Object.freeze({__proto__:null,coordAll:yt,coordEach:ct,coordReduce:ft,featureEach:dt,featureReduce:pt,findPoint:St,findSegment:Nt,flattenEach:xt,flattenReduce:Et,geomEach:mt,geomReduce:_t,lineEach:bt,lineReduce:It,propEach:gt,propReduce:vt,segmentEach:kt,segmentReduce:wt});function Lt(t){return _t(t,(function(t,e){return t+function(t){var e,n=0;switch(t.type){case"Polygon":return Pt(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=Pt(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)}),0)}function Pt(t){var e=0;if(t&&t.length>0){e+=Math.abs(Ot(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(Ot(t[n]))}return e}var Ct=x*x/2,Tt=Math.PI/180;function Ot(t){var e=t.length-1;if(e<=2)return 0;for(var n=0,r=0;r<e;){var i=t[r],o=t[r+1===e?0:r+1],s=t[r+2>=e?(r+2)%e:r+2],a=i[0]*Tt,u=o[1]*Tt;n+=(s[0]*Tt-a)*Math.sin(u),r++}return n*Ct}function Rt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!=t.bbox&&!0!==e.recompute)return t.bbox;var n=[1/0,1/0,-1/0,-1/0];return ct(t,(function(t){n[0]>t[0]&&(n[0]=t[0]),n[1]>t[1]&&(n[1]=t[1]),n[2]<t[0]&&(n[2]=t[0]),n[3]<t[1]&&(n[3]=t[1])})),n}function At(t,e){var n,r,i,o,s,a,u;for(r=1;r<=8;r*=2){for(n=[],o=!(Ft(i=t[t.length-1],e)&r),s=0;s<t.length;s++)(u=!(Ft(a=t[s],e)&r))!==o&&n.push(Dt(i,a,r,e)),u&&n.push(a),i=a,o=u;if(!(t=n).length)break}return n}function Dt(t,e,n,r){return 8&n?[t[0]+(e[0]-t[0])*(r[3]-t[1])/(e[1]-t[1]),r[3]]:4&n?[t[0]+(e[0]-t[0])*(r[1]-t[1])/(e[1]-t[1]),r[1]]:2&n?[r[2],t[1]+(e[1]-t[1])*(r[2]-t[0])/(e[0]-t[0])]:1&n?[r[0],t[1]+(e[1]-t[1])*(r[0]-t[0])/(e[0]-t[0])]:null}function Ft(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function qt(t,e){var n,r=[],i=a(t);try{for(i.s();!(n=i.n()).done;){var o=At(n.value,e);o.length>0&&(o[0][0]===o[o.length-1][0]&&o[0][1]===o[o.length-1][1]||o.push(o[0]),o.length>=4&&r.push(o))}}catch(t){i.e(t)}finally{i.f()}return r}function Gt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Number(t[0]),r=Number(t[1]),i=Number(t[2]),o=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[n,r];return S([[s,[i,r],[i,o],[n,o],s]],e.properties,{bbox:t,id:e.id})}var Bt=function(){return s((function t(e){i(this,t),this.points=e.points||[],this.duration=e.duration||1e4,this.sharpness=e.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=e.stepLength||60,this.length=this.points.length,this.delay=0;for(var n=0;n<this.length;n++)this.points[n].z=this.points[n].z||0;for(var r=0;r<this.length-1;r++){var o=this.points[r],s=this.points[r+1];this.centers.push({x:(o.x+s.x)/2,y:(o.y+s.y)/2,z:(o.z+s.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(var a=0;a<this.centers.length-1;a++){var u=this.points[a+1].x-(this.centers[a].x+this.centers[a+1].x)/2,l=this.points[a+1].y-(this.centers[a].y+this.centers[a+1].y)/2,h=this.points[a+1].z-(this.centers[a].y+this.centers[a+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[a+1].x+this.sharpness*(this.centers[a].x+u),y:(1-this.sharpness)*this.points[a+1].y+this.sharpness*(this.centers[a].y+l),z:(1-this.sharpness)*this.points[a+1].z+this.sharpness*(this.centers[a].z+h)},{x:(1-this.sharpness)*this.points[a+1].x+this.sharpness*(this.centers[a+1].x+u),y:(1-this.sharpness)*this.points[a+1].y+this.sharpness*(this.centers[a+1].y+l),z:(1-this.sharpness)*this.points[a+1].z+this.sharpness*(this.centers[a+1].z+h)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}),[{key:"cacheSteps",value:function(t){var e=[],n=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var i=this.pos(r);Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))>t&&(e.push(r),n=i)}return e}},{key:"vector",value:function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}}},{key:"pos",value:function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*n);return function(t,e,n,r,i){var o=function(t){var e=t*t,n=e*t;return[n,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t),s={x:i.x*o[0]+r.x*o[1]+n.x*o[2]+e.x*o[3],y:i.y*o[0]+r.y*o[1]+n.y*o[2]+e.y*o[3],z:i.z*o[0]+r.z*o[1]+n.z*o[2]+e.z*o[3]};return s}((this.length-1)*n-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])}}])}();function Yt(t){for(var e,n,r=Q(t),i=0,o=1;o<r.length;)e=n||r[0],i+=((n=r[o])[0]-e[0])*(n[1]+e[1]),o++;return i>0}function zt(t,e){for(var n=0,r=0,i=0,o=0,s=0,a=0,u=0,l=0,h=null,c=null,f=t[0],g=t[1],v=e.length;n<v;n++){r=0;var d=e[n].length-1,p=e[n];if((h=p[0])[0]!==p[d][0]&&h[1]!==p[d][1])throw new Error("First and last coordinates in a ring must be the same");for(s=h[0]-f,a=h[1]-g;r<d;r++)if(l=(c=p[r+1])[1]-g,a<0&&l<0||a>0&&l>0)a=l,s=(h=c)[0]-f;else{if(u=c[0]-t[0],l>0&&a<=0){if((o=s*l-u*a)>0)i+=1;else if(0===o)return 0}else if(a>0&&l<=0){if((o=s*l-u*a)<0)i+=1;else if(0===o)return 0}else if(0===l&&a<0){if(0===(o=s*l-u*a))return 0}else if(0===a&&l<0){if(0===(o=s*l-u*a))return 0}else if(0===a&&0===l){if(u<=0&&s>=0)return 0;if(s<=0&&u>=0)return 0}h=c,a=l,s=u}}return i%2!=0}function jt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var r=K(t),i=rt(e),o=i.type,s=e.bbox,a=i.coordinates;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(r,s))return!1;"Polygon"===o&&(a=[a]);for(var u=!1,l=0;l<a.length;++l){var h=zt(r,a[l]);if(0===h)return!n.ignoreBoundary;h&&(u=!0)}return u}function Xt(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=K(t),i=Q(e),o=0;o<i.length-1;o++){var s=!1;if(n.ignoreEndVertices&&(0===o&&(s="start"),o===i.length-2&&(s="end"),0===o&&o+1===i.length-1&&(s="both")),Ut(i[o],i[o+1],r,s,void 0===n.epsilon?null:n.epsilon))return!0}return!1}function Ut(t,e,n,r,i){var o=n[0],s=n[1],a=t[0],u=t[1],l=e[0],h=e[1],c=l-a,f=h-u,g=(n[0]-a)*f-(n[1]-u)*c;if(null!==i){if(Math.abs(g)>i)return!1}else if(0!==g)return!1;return Math.abs(c)===Math.abs(f)&&0===Math.abs(c)?!r&&(n[0]===t[0]&&n[1]===t[1]):r?"start"===r?Math.abs(c)>=Math.abs(f)?c>0?a<o&&o<=l:l<=o&&o<a:f>0?u<s&&s<=h:h<=s&&s<u:"end"===r?Math.abs(c)>=Math.abs(f)?c>0?a<=o&&o<l:l<o&&o<=a:f>0?u<=s&&s<h:h<s&&s<=u:"both"===r&&(Math.abs(c)>=Math.abs(f)?c>0?a<o&&o<l:l<o&&o<a:f>0?u<s&&s<h:h<s&&s<u):Math.abs(c)>=Math.abs(f)?c>0?a<=o&&o<=l:l<=o&&o<=a:f>0?u<=s&&s<=h:h<=s&&s<=u}function Vt(t,e){if("Feature"===t.type&&null===t.geometry)return!1;if("Feature"===e.type&&null===e.geometry)return!1;if(!Zt(Rt(t),Rt(e)))return!1;var n,r=a(rt(e).coordinates);try{for(r.s();!(n=r.n()).done;){var i,o=a(n.value);try{for(o.s();!(i=o.n()).done;){if(!jt(i.value,t))return!1}}catch(t){o.e(t)}finally{o.f()}}}catch(t){r.e(t)}finally{r.f()}return!0}function Zt(t,e){return!(t[0]>e[0])&&(!(t[2]<e[2])&&(!(t[1]>e[1])&&!(t[3]<e[3])))}function Ht(t,e){return t[0]===e[0]&&t[1]===e[1]}function Wt(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}var Jt=function(){return s((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Kt;if(i(this,t),this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)}),[{key:"push",value:function(t){this.data.push(t),this.length++,this._up(this.length-1)}},{key:"pop",value:function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}}},{key:"peek",value:function(){return this.data[0]}},{key:"_up",value:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r}},{key:"_down",value:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),s=e[o],a=o+1;if(a<this.length&&n(e[a],s)<0&&(o=a,s=e[a]),n(s,i)>=0)break;e[t]=s,t=o}e[t]=i}}])}();function Kt(t,e){return t<e?-1:t>e?1:0}function Qt(t,e){return t.p.x>e.p.x?1:t.p.x<e.p.x?-1:t.p.y!==e.p.y?t.p.y>e.p.y?1:-1:1}function $t(t,e){return t.rightSweepEvent.p.x>e.rightSweepEvent.p.x?1:t.rightSweepEvent.p.x<e.rightSweepEvent.p.x?-1:t.rightSweepEvent.p.y!==e.rightSweepEvent.p.y?t.rightSweepEvent.p.y<e.rightSweepEvent.p.y?1:-1:1}var te=function(){return s((function t(e,n,r,o){i(this,t),this.p={x:e[0],y:e[1]},this.featureId=n,this.ringId=r,this.eventId=o,this.otherEvent=null,this.isLeftEndpoint=null}),[{key:"isSamePoint",value:function(t){return this.p.x===t.p.x&&this.p.y===t.p.y}}])}();var ee=0,ne=0,re=0;function ie(t,e){var n="Feature"===t.type?t.geometry:t,r=n.coordinates;"Polygon"!==n.type&&"MultiLineString"!==n.type||(r=[r]),"LineString"===n.type&&(r=[[r]]);for(var i=0;i<r.length;i++)for(var o=0;o<r[i].length;o++){var s=r[i][o][0],a=null;ne+=1;for(var u=0;u<r[i][o].length-1;u++){a=r[i][o][u+1];var l=new te(s,ee,ne,re),h=new te(a,ee,ne,re+1);l.otherEvent=h,h.otherEvent=l,Qt(l,h)>0?(h.isLeftEndpoint=!0,l.isLeftEndpoint=!1):(l.isLeftEndpoint=!0,h.isLeftEndpoint=!1),e.push(l),e.push(h),s=a,re+=1}}ee+=1}var oe=s((function t(e){i(this,t),this.leftSweepEvent=e,this.rightSweepEvent=e.otherEvent}));function se(t,e){if(null===t||null===e)return!1;if(t.leftSweepEvent.ringId===e.leftSweepEvent.ringId&&(t.rightSweepEvent.isSamePoint(e.leftSweepEvent)||t.rightSweepEvent.isSamePoint(e.leftSweepEvent)||t.rightSweepEvent.isSamePoint(e.rightSweepEvent)||t.leftSweepEvent.isSamePoint(e.leftSweepEvent)||t.leftSweepEvent.isSamePoint(e.rightSweepEvent)))return!1;var n=t.leftSweepEvent.p.x,r=t.leftSweepEvent.p.y,i=t.rightSweepEvent.p.x,o=t.rightSweepEvent.p.y,s=e.leftSweepEvent.p.x,a=e.leftSweepEvent.p.y,u=e.rightSweepEvent.p.x,l=e.rightSweepEvent.p.y,h=(l-a)*(i-n)-(u-s)*(o-r),c=(u-s)*(r-a)-(l-a)*(n-s),f=(i-n)*(r-a)-(o-r)*(n-s);if(0===h)return!1;var g=c/h,v=f/h;return g>=0&&g<=1&&v>=0&&v<=1&&[n+g*(i-n),r+g*(o-r)]}var ae=function(t,e){var n=new Jt([],Qt);return function(t,e){if("FeatureCollection"===t.type)for(var n=t.features,r=0;r<n.length;r++)ie(n[r],e);else ie(t,e)}(t,n),function(t,e){e=e||!1;for(var n=[],r=new Jt([],$t);t.length;){var i=t.pop();if(i.isLeftEndpoint){for(var o=new oe(i),s=0;s<r.data.length;s++){var a=r.data[s];if(!e||a.leftSweepEvent.featureId!==i.featureId){var u=se(o,a);!1!==u&&n.push(u)}}r.push(o)}else!1===i.isLeftEndpoint&&r.pop()}return n}(n,e)};function ue(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.removeDuplicates,i=void 0===r||r,o=n.ignoreSelfIntersections,s=void 0===o||o,a=[];"FeatureCollection"===t.type?a=a.concat(t.features):"Feature"===t.type?a.push(t):"LineString"!==t.type&&"Polygon"!==t.type&&"MultiLineString"!==t.type&&"MultiPolygon"!==t.type||a.push(w(t)),"FeatureCollection"===e.type?a=a.concat(e.features):"Feature"===e.type?a.push(e):"LineString"!==e.type&&"Polygon"!==e.type&&"MultiLineString"!==e.type&&"MultiPolygon"!==e.type||a.push(w(e));var u=ae(C(a),s),l=[];if(i){var h={};u.forEach((function(t){var e=t.join(",");h[e]||(h[e]=!0,l.push(t))}))}else l=u;return C(l.map((function(t){return I(t)})))}function le(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=rt(t);switch(e.properties||"Feature"!==t.type||(e.properties=t.properties),n.type){case"Polygon":return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=rt(t),r=n.coordinates,i=e.properties?e.properties:"Feature"===t.type?t.properties:{};return he(r,i)}(n,e);case"MultiPolygon":return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=rt(t),r=n.coordinates,i=e.properties?e.properties:"Feature"===t.type?t.properties:{},o=[];return r.forEach((function(t){o.push(he(t,i))})),C(o)}(n,e);default:throw new Error("invalid poly")}}function he(t,e){return t.length>1?T(t,e):L(t[0],e)}function ce(t,e){var n=rt(t),r=rt(e),i=n.type,o=r.type;switch(i){case"MultiPoint":switch(o){case"LineString":return fe(n,r);case"Polygon":return ve(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"MultiPoint":return fe(r,n);case"LineString":return function(t,e){if(ue(t,e).features.length>0)for(var n=0;n<t.coordinates.length-1;n++)for(var r=0;r<e.coordinates.length-1;r++){var i=!0;if(0!==r&&r!==e.coordinates.length-2||(i=!1),de(t.coordinates[n],t.coordinates[n+1],e.coordinates[r],i))return!0}return!1}(n,r);case"Polygon":return ge(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"MultiPoint":return ve(r,n);case"LineString":return ge(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function fe(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&!n&&!r;){for(var s=0;s<e.coordinates.length-1;s++){var a=!0;0!==s&&s!==e.coordinates.length-2||(a=!1),de(e.coordinates[s],e.coordinates[s+1],t.coordinates[o],a)?n=!0:r=!0}o++}return n&&r}function ge(t,e){return ue(t,le(e)).features.length>0}function ve(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&(!n||!r);o++)jt(I(t.coordinates[o]),e)?n=!0:r=!0;return r&&n}function de(t,e,n,r){var i=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1];return 0==i*a-o*s&&(r?Math.abs(s)>=Math.abs(a)?s>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:a>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(s)>=Math.abs(a)?s>0?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:a>0?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}function pe(t,e){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{ignoreSelfIntersections:!0}).ignoreSelfIntersections,r=void 0===n||n,i=!0;return xt(t,(function(t){xt(e,(function(e){if(!1===i)return!1;i=function(t,e,n){switch(t.type){case"Point":switch(e.type){case"Point":return r=t.coordinates,i=e.coordinates,!(r[0]===i[0]&&r[1]===i[1]);case"LineString":return!ye(e,t);case"Polygon":return!jt(t,e)}break;case"LineString":switch(e.type){case"Point":return!ye(t,e);case"LineString":return!function(t,e,n){var r=ue(t,e,{ignoreSelfIntersections:n});if(r.features.length>0)return!0;return!1}(t,e,n);case"Polygon":return!me(e,t,n)}break;case"Polygon":switch(e.type){case"Point":return!jt(e,t);case"LineString":return!me(t,e,n);case"Polygon":return!function(t,e,n){var r,i=a(t.coordinates[0]);try{for(i.s();!(r=i.n()).done;){if(jt(r.value,e))return!0}}catch(t){i.e(t)}finally{i.f()}var o,s=a(e.coordinates[0]);try{for(s.s();!(o=s.n()).done;){if(jt(o.value,t))return!0}}catch(t){s.e(t)}finally{s.f()}var u=ue(le(t),le(e),{ignoreSelfIntersections:n});if(u.features.length>0)return!0;return!1}(e,t,n)}}var r,i;return!1}(t.geometry,e.geometry,r)}))})),i}function ye(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(_e(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function me(t,e,n){var r,i=a(e.coordinates);try{for(i.s();!(r=i.n()).done;){if(jt(r.value,t))return!0}}catch(t){i.e(t)}finally{i.f()}return ue(e,le(t),{ignoreSelfIntersections:n}).features.length>0}function _e(t,e,n){var r=n[0]-t[0],i=n[1]-t[1],o=e[0]-t[0],s=e[1]-t[1];return 0==r*s-i*o&&(Math.abs(o)>=Math.abs(s)?o>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:s>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}var xe=Object.defineProperty,Ee=function(t,e){return xe(t,"name",{value:e,configurable:!0})},ke=function(){return s((function t(e){var n,r,o;i(this,t),this.direction=!1,this.compareProperties=!0,this.precision=Math.pow(10,-(null!=(n=null==e?void 0:e.precision)?n:17)),this.direction=null!=(r=null==e?void 0:e.direction)&&r,this.compareProperties=null==(o=null==e?void 0:e.compareProperties)||o}),[{key:"compare",value:function(t,e){var n=this;if(t.type!==e.type)return!1;if(!be(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates);case"Polygon":return this.comparePolygon(t,e);case"GeometryCollection":return this.compareGeometryCollection(t,e);case"Feature":return this.compareFeature(t,e);case"FeatureCollection":return this.compareFeatureCollection(t,e);default:if(t.type.startsWith("Multi")){var r=Ie(t),i=Ie(e);return r.every((function(t){return i.some((function(e){return n.compare(t,e)}))}))}}return!1}},{key:"compareCoord",value:function(t,e){var n=this;return t.length===e.length&&t.every((function(t,r){return Math.abs(t-e[r])<n.precision}))}},{key:"compareLine",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!be(t,e))return!1;var i=t,o=e;if(r&&!this.compareCoord(i[0],o[0])){var s=this.fixStartIndex(o,i);if(!s)return!1;o=s}var a=this.compareCoord(i[n],o[n]);return this.direction||a?this.comparePath(i,o):!!this.compareCoord(i[n],o[o.length-(1+n)])&&this.comparePath(i.slice().reverse(),o)}},{key:"fixStartIndex",value:function(t,e){for(var n,r=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){r=i;break}return r>=0&&(n=[].concat(t.slice(r,t.length),t.slice(1,r+1))),n}},{key:"comparePath",value:function(t,e){var n=this;return t.every((function(t,r){return n.compareCoord(t,e[r])}))}},{key:"comparePolygon",value:function(t,e){var n=this;if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var r=t.coordinates.slice(1,t.coordinates.length),i=e.coordinates.slice(1,e.coordinates.length);return r.every((function(t){return i.some((function(e){return n.compareLine(t,e,1,!0)}))}))}return!1}},{key:"compareGeometryCollection",value:function(t,e){var n=this;return be(t.geometries,e.geometries)&&this.compareBBox(t,e)&&t.geometries.every((function(t,r){return n.compare(t,e.geometries[r])}))}},{key:"compareFeature",value:function(t,e){return t.id===e.id&&(!this.compareProperties||Se(t.properties,e.properties))&&this.compareBBox(t,e)&&this.compare(t.geometry,e.geometry)}},{key:"compareFeatureCollection",value:function(t,e){var n=this;return be(t.features,e.features)&&this.compareBBox(t,e)&&t.features.every((function(t,r){return n.compare(t,e.features[r])}))}},{key:"compareBBox",value:function(t,e){return Boolean(!t.bbox&&!e.bbox)||!(!t.bbox||!e.bbox)&&this.compareCoord(t.bbox,e.bbox)}}])}();Ee(ke,"GeojsonEquality");var we=ke;function be(t,e){return t.coordinates?t.coordinates.length===e.coordinates.length:t.length===e.length}function Ie(t){return t.coordinates.map((function(e){return{type:t.type.replace("Multi",""),coordinates:e}}))}function Ne(t,e,n){return new we(n).compare(t,e)}function Se(t,e){if(null===t&&null===e)return!0;if(null===t||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(var i=0,o=n;i<o.length;i++){var s=o[i],a=t[s],u=e[s],l=Me(a)&&Me(u);if(l&&!Se(a,u)||!l&&a!==u)return!1}return!0}Ee(be,"sameLength"),Ee(Ie,"explode"),Ee(Ne,"geojsonEquality"),Ee(Se,"equal");var Me=Ee((function(t){return null!=t&&"object"===m(t)}),"isObject");function Le(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="object"===m(e)?e.mutate:e;if(!t)throw new Error("geojson is required");var r=it(t),i=[];switch(r){case"LineString":i=Pe(t,r);break;case"MultiLineString":case"Polygon":Q(t).forEach((function(t){i.push(Pe(t,r))}));break;case"MultiPolygon":Q(t).forEach((function(t){var e=[];t.forEach((function(t){e.push(Pe(t,r))})),i.push(e)}));break;case"Point":return t;case"MultiPoint":var o={};Q(t).forEach((function(t){var e=t.join("-");Object.prototype.hasOwnProperty.call(o,e)||(i.push(t),o[e]=!0)}));break;default:throw new Error(r+" geometry not supported")}return t.coordinates?!0===n?(t.coordinates=i,t):{type:r,coordinates:i}:!0===n?(t.geometry.coordinates=i,t):w({type:r,coordinates:i},t.properties,{bbox:t.bbox,id:t.id})}function Pe(t,e){var n=Q(t);if(2===n.length&&!Ce(n[0],n[1]))return n;var r=[],i=0,o=1,s=2;for(r.push(n[i]);s<n.length;)Xt(n[o],L([n[i],n[s]]))?o=s:(r.push(n[o]),i=o,s=++o),s++;if(r.push(n[o]),"Polygon"===e||"MultiPolygon"===e){if(Xt(r[0],L([r[1],r[r.length-2]]))&&(r.shift(),r.pop(),r.push(r[0])),r.length<4)throw new Error("invalid polygon, fewer than 4 points");if(!Ce(r[0],r[r.length-1]))throw new Error("invalid polygon, first and last points not equal")}return r}function Ce(t,e){return t[0]===e[0]&&t[1]===e[1]}function Te(t,e){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).ignoreSelfIntersections,r=void 0===n||n,i=!1;return xt(t,(function(t){xt(e,(function(e){if(!0===i)return!0;i=!pe(t.geometry,e.geometry,{ignoreSelfIntersections:r})}))})),i}function Oe(t,e,n,r,i){Re(t,e,n||0,r||t.length-1,i||De)}function Re(t,e,n,r,i){for(;r>n;){if(r-n>600){var o=r-n+1,s=e-n+1,a=Math.log(o),u=.5*Math.exp(2*a/3),l=.5*Math.sqrt(a*u*(o-u)/o)*(s-o/2<0?-1:1);Re(t,e,Math.max(n,Math.floor(e-s*u/o+l)),Math.min(r,Math.floor(e+(o-s)*u/o+l)),i)}var h=t[e],c=n,f=r;for(Ae(t,n,e),i(t[r],h)>0&&Ae(t,n,r);c<f;){for(Ae(t,c,f),c++,f--;i(t[c],h)<0;)c++;for(;i(t[f],h)>0;)f--}0===i(t[n],h)?Ae(t,n,f):Ae(t,++f,r),f<=e&&(n=f+1),e<=f&&(r=f-1)}}function Ae(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function De(t,e){return t<e?-1:t>e?1:0}var Fe=function(){return s((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9;i(this,t),this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}),[{key:"all",value:function(){return this._all(this.data,[])}},{key:"search",value:function(t){var e=this.data,n=[];if(!Ze(t,e))return n;for(var r=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var s=e.children[o],a=e.leaf?r(s):s;Ze(t,a)&&(e.leaf?n.push(s):Ve(t,a)?this._all(s,n):i.push(s))}e=i.pop()}return n}},{key:"collides",value:function(t){var e=this.data;if(!Ze(t,e))return!1;for(var n=[];e;){for(var r=0;r<e.children.length;r++){var i=e.children[r],o=e.leaf?this.toBBox(i):i;if(Ze(t,o)){if(e.leaf||Ve(t,o))return!0;n.push(i)}}e=n.pop()}return!1}},{key:"load",value:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this}},{key:"insert",value:function(t){return t&&this._insert(t,this.data.height-1),this}},{key:"clear",value:function(){return this.data=He([]),this}},{key:"remove",value:function(t,e){if(!t)return this;for(var n,r,i,o=this.data,s=this.toBBox(t),a=[],u=[];o||a.length;){if(o||(o=a.pop(),r=a[a.length-1],n=u.pop(),i=!0),o.leaf){var l=qe(t,o.children,e);if(-1!==l)return o.children.splice(l,1),a.push(o),this._condense(a),this}i||o.leaf||!Ve(o,s)?r?(n++,o=r.children[n],i=!1):o=null:(a.push(o),u.push(n),n=0,r=o,o=o.children[0])}return this}},{key:"toBBox",value:function(t){return t}},{key:"compareMinX",value:function(t,e){return t.minX-e.minX}},{key:"compareMinY",value:function(t,e){return t.minY-e.minY}},{key:"toJSON",value:function(){return this.data}},{key:"fromJSON",value:function(t){return this.data=t,this}},{key:"_all",value:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,p(t.children)):n.push.apply(n,p(t.children)),t=n.pop();return e}},{key:"_build",value:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return Ge(i=He(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=He([])).leaf=!1,i.height=r;var a=Math.ceil(o/s),u=a*Math.ceil(Math.sqrt(s));We(t,e,n,u,this.compareMinX);for(var l=e;l<=n;l+=u){var h=Math.min(l+u-1,n);We(t,l,h,a,this.compareMinY);for(var c=l;c<=h;c+=a){var f=Math.min(c+a-1,h);i.children.push(this._build(t,c,f,r-1))}}return Ge(i,this.toBBox),i}},{key:"_chooseSubtree",value:function(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){for(var i=1/0,o=1/0,s=void 0,a=0;a<e.children.length;a++){var u=e.children[a],l=Xe(u),h=(c=t,f=u,(Math.max(f.maxX,c.maxX)-Math.min(f.minX,c.minX))*(Math.max(f.maxY,c.maxY)-Math.min(f.minY,c.minY))-l);h<o?(o=h,i=l<i?l:i,s=u):h===o&&l<i&&(i=l,s=u)}e=s||e.children[0]}var c,f;return e}},{key:"_insert",value:function(t,e,n){var r=n?t:this.toBBox(t),i=[],o=this._chooseSubtree(r,this.data,e,i);for(o.children.push(t),Ye(o,r);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)}},{key:"_split",value:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=He(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,Ge(n,this.toBBox),Ge(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)}},{key:"_splitRoot",value:function(t,e){this.data=He([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Ge(this.data,this.toBBox)}},{key:"_chooseSplitIndex",value:function(t,e,n){for(var r,i,o,s,a,u,l,h=1/0,c=1/0,f=e;f<=n-e;f++){var g=Be(t,0,f,this.toBBox),v=Be(t,f,n,this.toBBox),d=(i=g,o=v,s=void 0,a=void 0,u=void 0,l=void 0,s=Math.max(i.minX,o.minX),a=Math.max(i.minY,o.minY),u=Math.min(i.maxX,o.maxX),l=Math.min(i.maxY,o.maxY),Math.max(0,u-s)*Math.max(0,l-a)),p=Xe(g)+Xe(v);d<h?(h=d,r=f,c=p<c?p:c):d===h&&p<c&&(c=p,r=f)}return r||n-e}},{key:"_chooseSplitAxis",value:function(t,e,n){var r=t.leaf?this.compareMinX:ze,i=t.leaf?this.compareMinY:je;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)}},{key:"_allDistMargin",value:function(t,e,n,r){t.children.sort(r);for(var i=this.toBBox,o=Be(t,0,e,i),s=Be(t,n-e,n,i),a=Ue(o)+Ue(s),u=e;u<n-e;u++){var l=t.children[u];Ye(o,t.leaf?i(l):l),a+=Ue(o)}for(var h=n-e-1;h>=e;h--){var c=t.children[h];Ye(s,t.leaf?i(c):c),a+=Ue(s)}return a}},{key:"_adjustParentBBoxes",value:function(t,e,n){for(var r=n;r>=0;r--)Ye(e[r],t)}},{key:"_condense",value:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():Ge(t[n],this.toBBox)}}])}();function qe(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function Ge(t,e){Be(t,0,t.children.length,e,t)}function Be(t,e,n,r,i){i||(i=He(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<n;o++){var s=t.children[o];Ye(i,t.leaf?r(s):s)}return i}function Ye(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function ze(t,e){return t.minX-e.minX}function je(t,e){return t.minY-e.minY}function Xe(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Ue(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Ve(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Ze(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function He(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function We(t,e,n,r,i){for(var o=[e,n];o.length;)if(!((n=o.pop())-(e=o.pop())<=r)){var s=e+Math.ceil((n-e)/r/2)*r;Oe(t,s,e,n,i),o.push(e,s,s,n)}}var Je=Object.freeze({__proto__:null,default:Fe});function Ke(t){var e=new Fe(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:Rt(t),Fe.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:Rt(t),e.push(t)})):dt(t,(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:Rt(t),e.push(t)})),Fe.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:Rt(t),Fe.prototype.remove.call(this,t,e)},e.clear=function(){return Fe.prototype.clear.call(this)},e.search=function(t){return C(Fe.prototype.search.call(this,this.toBBox(t)))},e.collides=function(t){return Fe.prototype.collides.call(this,this.toBBox(t))},e.all=function(){return C(Fe.prototype.all.call(this))},e.toJSON=function(){return Fe.prototype.toJSON.call(this)},e.fromJSON=function(t){return Fe.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=Rt(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=Rt(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}function Qe(t){if(!t)throw new Error("geojson is required");var e=[];return xt(t,(function(t){!function(t,e){var n=[],r=t.geometry;if(null!==r){switch(r.type){case"Polygon":n=Q(r);break;case"LineString":n=[Q(r)]}n.forEach((function(n){var r=function(t,e){var n=[];return t.reduce((function(t,r){var i=L([t,r],e);return i.bbox=function(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=n<i?n:i,a=r<o?r:o,u=n>i?n:i,l=r>o?r:o;return[s,a,u,l]}(t,r),n.push(i),r})),n}(n,t.properties);r.forEach((function(t){t.id=e.length,e.push(t)}))}))}}(t,e)})),C(e)}var $e,tn,en=Object.defineProperty,nn=Object.defineProperties,rn=Object.getOwnPropertyDescriptors,on=Object.getOwnPropertySymbols,sn=Object.prototype.hasOwnProperty,an=Object.prototype.propertyIsEnumerable,un=function(t,e,n){return e in t?en(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},ln=function(t,e){for(var n in e||(e={}))sn.call(e,n)&&un(t,n,e[n]);if(on){var r,i=a(on(e));try{for(i.s();!(r=i.n()).done;){n=r.value;an.call(e,n)&&un(t,n,e[n])}}catch(t){i.e(t)}finally{i.f()}}return t},hn=function(t,e){return nn(t,rn(e))};function cn(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t||!e)throw new Error("lines and pt are required arguments");var r=K(e),i=I([1/0,1/0],{dist:1/0,index:-1,multiFeatureIndex:-1,location:-1}),o=0;return xt(t,(function(t,s,a){for(var u=Q(t),l=0;l<u.length-1;l++){var h=I(u[l]),c=K(h),f=I(u[l+1]),g=K(f),v=ut(h,f,n),p=void 0,y=void 0;if(g[0]===r[0]&&g[1]===r[1])p=g,y=!0;else if(c[0]===r[0]&&c[1]===r[1])p=c,y=!1;else{var m=d(yn(c,g,r),2);p=m[0],y=m[1]}var _=I(p,{dist:ut(e,p,n),multiFeatureIndex:a,location:o+ut(h,p,n)});_.properties.dist<i.properties.dist&&(i=hn(ln({},_),{properties:hn(ln({},_.properties),{index:y?l+1:l})})),o+=v}})),i}function fn(t,e){var n=d(t,3),r=n[0],i=n[1],o=n[2],s=d(e,3);return r*s[0]+i*s[1]+o*s[2]}function gn(t,e){var n=d(t,3),r=n[0],i=n[1],o=n[2],s=d(e,3),a=s[0],u=s[1],l=s[2];return[i*l-o*u,o*a-r*l,r*u-i*a]}function vn(t){var e=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2))}(t);return[t[0]/e,t[1]/e,t[2]/e]}function dn(t){var e=j(t[1]),n=j(t[0]);return[Math.cos(e)*Math.cos(n),Math.cos(e)*Math.sin(n),Math.sin(e)]}function pn(t){var e=d(t,3),n=e[0],r=e[1],i=e[2],o=Math.min(Math.max(i,-1),1),s=z(Math.asin(o));return[z(Math.atan2(r,n)),s]}function yn(t,e,n){var r=dn(t),i=dn(e),o=dn(n),s=gn(r,i);if(0===s[0]&&0===s[1]&&0===s[2])return fn(r,i)>0?[p(e),!0]:[p(n),!1];var a=gn(s,o);if(0===a[0]&&0===a[1]&&0===a[2])return[p(e),!0];var u=vn(gn(a,s)),l=[-u[0],-u[1],-u[2]],h=fn(o,u)>fn(o,l)?u:l,c=vn(s),f=fn(gn(r,h),c),g=fn(gn(h,i),c);return f>=0&&g>=0?[pn(h),!1]:fn(r,o)>fn(i,o)?[p(t),!1]:[p(e),!0]}function mn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function _n(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if("function"==typeof e){var n=function t(){return this instanceof t?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach((function(e){var r=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,r.get?r:{enumerable:!0,get:function(){return t[e]}})})),n}var xn=(tn||(tn=1,$e=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==m(e)&&"object"==m(n)){if(e.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(e)){if((r=e.length)!=n.length)return!1;for(i=r;0!=i--;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((r=(o=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){var s=o[i];if(!t(e[s],n[s]))return!1}return!0}return e!=e&&n!=n}),$e),En=mn(xn);function kn(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!Z(n=n||{}))throw new Error("options is invalid");var r,i=n.tolerance||0,o=[],s=Ke(),a=Qe(t);s.load(a);var u=[];return kt(e,(function(t){var e=!1;t&&(dt(s.search(t),(function(n){if(!1===e){var o=Q(t).sort(),s=Q(n).sort();if(En(o,s))e=!0,r=r?wn(r,t)||r:t;else if(0===i?Xt(o[0],n)&&Xt(o[1],n):cn(n,o[0]).properties.dist<=i&&cn(n,o[1]).properties.dist<=i)e=!0,r=r?wn(r,t)||r:t;else if(0===i?Xt(s[0],t)&&Xt(s[1],t):cn(t,s[0]).properties.dist<=i&&cn(t,s[1]).properties.dist<=i)if(r){var a=wn(r,n);a?r=a:u.push(n)}else r=n}})),!1===e&&r&&(o.push(r),u.length&&(o=o.concat(u),u=[]),r=void 0))})),r&&o.push(r),C(o)}function wn(t,e){var n=Q(e),r=Q(t),i=r[0],o=r[r.length-1],s=t.geometry.coordinates;if(En(n[0],i))s.unshift(n[1]);else if(En(n[0],o))s.push(n[1]);else if(En(n[1],i))s.unshift(n[0]);else{if(!En(n[1],o))return;s.push(n[0])}return t}function bn(t,e){var n=B(lt(t[0],t[1])),r=B(lt(e[0],e[1]));return n===r||(r-n)%180==0}function In(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function Nn(t,e){return!!Sn(e.coordinates[0],t.coordinates)||!!Sn(e.coordinates[e.coordinates.length-1],t.coordinates)}function Sn(t,e){return t[0]===e[0]&&t[1]===e[1]}function Mn(t){return t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]}function Ln(t){for(var e=0;e<t.length-1;e++)for(var n=t[e],r=e+1;r<t.length-2;r++){if(Xt(n,L([t[r],t[r+1]])))return!0}return!1}function Pn(t,e,n){for(var r=S(t),i=n+1;i<e.length;i++)if(!pe(r,S(e[i]))&&ce(r,L(e[i][0])))return!1;return!0}function Cn(t,e){var n=rt(t),r=rt(e),i=n.type,o=r.type;switch(i){case"Point":switch(o){case"MultiPoint":return function(t,e){var n,r=!1;for(n=0;n<e.coordinates.length;n++)if(On(e.coordinates[n],t.coordinates)){r=!0;break}return r}(n,r);case"LineString":return Xt(n,r,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return jt(n,r,{ignoreBoundary:!0});default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"MultiPoint":return function(t,e){for(var n=0;n<t.coordinates.length;n++){for(var r=!1,i=0;i<e.coordinates.length;i++)On(t.coordinates[n],e.coordinates[i])&&(r=!0);if(!r)return!1}return!0}(n,r);case"LineString":return function(t,e){for(var n=!1,r=0;r<t.coordinates.length;r++){if(!Xt(t.coordinates[r],e))return!1;n||(n=Xt(t.coordinates[r],e,{ignoreEndVertices:!0}))}return n}(n,r);case"Polygon":case"MultiPolygon":return function(t,e){for(var n=!0,r=!1,i=0;i<t.coordinates.length;i++){if(!(r=jt(t.coordinates[i],e))){n=!1;break}r=jt(t.coordinates[i],e,{ignoreBoundary:!0})}return n&&r}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"LineString":return function(t,e){for(var n=0;n<t.coordinates.length;n++)if(!Xt(t.coordinates[n],e))return!1;return!0}(n,r);case"Polygon":case"MultiPolygon":return function(t,e){var n=Rt(e),r=Rt(t);if(!Tn(n,r))return!1;for(var i=!1,o=0;o<t.coordinates.length;o++){if(!jt(t.coordinates[o],e))return!1;if(i||(i=jt(t.coordinates[o],e,{ignoreBoundary:!0})),!i&&o<t.coordinates.length-1)i=jt(Rn(t.coordinates[o],t.coordinates[o+1]),e,{ignoreBoundary:!0})}return i}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Polygon":case"MultiPolygon":return function(t,e){var n=Rt(t);if(!Tn(Rt(e),n))return!1;for(var r=0;r<t.coordinates[0].length;r++)if(!jt(t.coordinates[0][r],e))return!1;return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function Tn(t,e){return!(t[0]>e[0])&&(!(t[2]<e[2])&&(!(t[1]>e[1])&&!(t[3]<e[3])))}function On(t,e){return t[0]===e[0]&&t[1]===e[1]}function Rn(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function An(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Rt(t);return I([(n[0]+n[2])/2,(n[1]+n[3])/2],e.properties,e)}var Dn,Fn={exports:{}};var qn=(Dn||(Dn=1,function(t,e){t.exports=function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}function i(t){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},i(t)}function o(t,e){return o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},o(t,e)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function a(t,e,n){return a=s()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&o(i,n.prototype),i},a.apply(null,arguments)}function u(t){var e="function"==typeof Map?new Map:void 0;return u=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return a(t,arguments,i(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),o(r,t)},u(t)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t,e){if(e&&("object"==m(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}function c(t){var e=s();return function(){var n,r=i(t);if(e){var o=i(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function f(t,e,n){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=i(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}},f(t,e,n||t)}function g(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||v(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){if(t){if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=v(t))||e){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}var y=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getEndCapStyle",value:function(){return this._endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=e.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=e.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==e.JOIN_ROUND&&(this._quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this._joinStyle}},{key:"setJoinStyle",value:function(t){this._joinStyle=t}},{key:"setSimplifyFactor",value:function(t){this._simplifyFactor=t<0?0:t}},{key:"getSimplifyFactor",value:function(){return this._simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this._quadrantSegments}},{key:"setEndCapStyle",value:function(t){this._endCapStyle=t}},{key:"getMitreLimit",value:function(){return this._mitreLimit}},{key:"setMitreLimit",value:function(t){this._mitreLimit=t}},{key:"setSingleSided",value:function(t){this._isSingleSided=t}}],[{key:"constructor_",value:function(){if(this._quadrantSegments=e.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=e.CAP_ROUND,this._joinStyle=e.JOIN_ROUND,this._mitreLimit=e.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=e.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setQuadrantSegments(t)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}}},{key:"bufferDistanceError",value:function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)}}]),e}();y.CAP_ROUND=1,y.CAP_FLAT=2,y.CAP_SQUARE=3,y.JOIN_ROUND=1,y.JOIN_MITRE=2,y.JOIN_BEVEL=3,y.DEFAULT_QUADRANT_SEGMENTS=8,y.DEFAULT_MITRE_LIMIT=5,y.DEFAULT_SIMPLIFY_FACTOR=.01;var _=function(e){r(o,e);var i=c(o);function o(e){var n;return t(this,o),(n=i.call(this,e)).name=Object.keys({Exception:o})[0],n}return n(o,[{key:"toString",value:function(){return this.message}}]),o}(u(Error)),x=function(e){r(i,e);var n=c(i);function i(e){var r;return t(this,i),(r=n.call(this,e)).name=Object.keys({IllegalArgumentException:i})[0],r}return i}(_),E=function(){function e(){t(this,e)}return n(e,[{key:"filter",value:function(t){}}]),e}();function k(){}function w(){}function b(){}var I,N,S,M,L,P,C,T,O=function(){function e(){t(this,e)}return n(e,null,[{key:"equalsWithTolerance",value:function(t,e,n){return Math.abs(t-e)<=n}}]),e}(),R=function(){function e(n,r){t(this,e),this.low=r||0,this.high=n||0}return n(e,null,[{key:"toBinaryString",value:function(t){var e,n="";for(e=2147483648;e>0;e>>>=1)n+=(t.high&e)===e?"1":"0";for(e=2147483648;e>0;e>>>=1)n+=(t.low&e)===e?"1":"0";return n}}]),e}();function A(){}function D(){}A.NaN=NaN,A.isNaN=function(t){return Number.isNaN(t)},A.isInfinite=function(t){return!Number.isFinite(t)},A.MAX_VALUE=Number.MAX_VALUE,A.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,A.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,"function"==typeof Float64Array&&"function"==typeof Int32Array?(P=2146435072,C=new Float64Array(1),T=new Int32Array(C.buffer),A.doubleToLongBits=function(t){C[0]=t;var e=0|T[0],n=0|T[1];return(n&P)===P&&0!=(1048575&n)&&0!==e&&(e=0,n=2146959360),new R(n,e)},A.longBitsToDouble=function(t){return T[0]=t.low,T[1]=t.high,C[0]}):(I=1023,N=Math.log2,S=Math.floor,M=Math.pow,L=function(){for(var t=53;t>0;t--){var e=M(2,t)-1;if(S(N(e))+1===t)return e}return 0}(),A.doubleToLongBits=function(t){var e,n,r,i,o,s,a,u,l;if(t<0||1/t===Number.NEGATIVE_INFINITY?(s=1<<31,t=-t):s=0,0===t)return new R(u=s,l=0);if(t===1/0)return new R(u=2146435072|s,l=0);if(t!=t)return new R(u=2146959360,l=0);if(i=0,l=0,(e=S(t))>1)if(e<=L)(i=S(N(e)))<=20?(l=0,u=e<<20-i&1048575):(l=e%(n=M(2,r=i-20))<<32-r,u=e/n&1048575);else for(r=e,l=0;0!==(r=S(n=r/2));)i++,l>>>=1,l|=(1&u)<<31,u>>>=1,n!==r&&(u|=524288);if(a=i+I,o=0===e,e=t-e,i<52&&0!==e)for(r=0;;){if((n=2*e)>=1?(e=n-1,o?(a--,o=!1):(r<<=1,r|=1,i++)):(e=n,o?0==--a&&(i++,o=!1):(r<<=1,i++)),20===i)u|=r,r=0;else if(52===i){l|=r;break}if(1===n){i<20?u|=r<<20-i:i<52&&(l|=r<<52-i);break}}return u|=a<<20,new R(u|=s,l)},A.longBitsToDouble=function(t){var e,n,r,i,o=t.high,s=t.low,a=o&1<<31?-1:1;for(r=((2146435072&o)>>20)-I,i=0,n=1<<19,e=1;e<=20;e++)o&n&&(i+=M(2,-e)),n>>>=1;for(n=1<<31,e=21;e<=52;e++)s&n&&(i+=M(2,-e)),n>>>=1;if(-1023===r){if(0===i)return 0*a;r=-1022}else{if(1024===r)return 0===i?a/0:NaN;i+=1}return a*i*M(2,r)});var F=function(e){r(i,e);var n=c(i);function i(e){var r;return t(this,i),(r=n.call(this,e)).name=Object.keys({RuntimeException:i})[0],r}return i}(_),q=function(e){r(o,e);var i=c(o);function o(){var e;return t(this,o),e=i.call(this),o.constructor_.apply(l(e),arguments),e}return n(o,null,[{key:"constructor_",value:function(){if(0===arguments.length)F.constructor_.call(this);else if(1===arguments.length){var t=arguments[0];F.constructor_.call(this,t)}}}]),o}(F),G=function(){function e(){t(this,e)}return n(e,null,[{key:"shouldNeverReachHere",value:function(){if(0===arguments.length)e.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new q("Should never reach here"+(null!==t?": "+t:""))}}},{key:"isTrue",value:function(){if(1===arguments.length){var t=arguments[0];e.isTrue(t,null)}else if(2===arguments.length){var n=arguments[1];if(!arguments[0])throw null===n?new q:new q(n)}}},{key:"equals",value:function(){if(2===arguments.length){var t=arguments[0],n=arguments[1];e.equals(t,n,null)}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(!i.equals(r))throw new q("Expected "+r+" but encountered "+i+(null!==o?": "+o:""))}}}]),e}(),B=new ArrayBuffer(8),Y=new Float64Array(B),z=new Int32Array(B),j=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getM",value:function(){return A.NaN}},{key:"setOrdinate",value:function(t,n){switch(t){case e.X:this.x=n;break;case e.Y:this.y=n;break;case e.Z:this.setZ(n);break;default:throw new x("Invalid ordinate index: "+t)}}},{key:"equals2D",value:function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!O.equalsWithTolerance(this.x,e.x,n)&&!!O.equalsWithTolerance(this.y,e.y,n)}}},{key:"setM",value:function(t){throw new x("Invalid ordinate index: "+e.M)}},{key:"getZ",value:function(){return this.z}},{key:"getOrdinate",value:function(t){switch(t){case e.X:return this.x;case e.Y:return this.y;case e.Z:return this.getZ()}throw new x("Invalid ordinate index: "+t)}},{key:"equals3D",value:function(t){return this.x===t.x&&this.y===t.y&&(this.getZ()===t.getZ()||A.isNaN(this.getZ())&&A.isNaN(t.getZ()))}},{key:"equals",value:function(t){return t instanceof e&&this.equals2D(t)}},{key:"equalInZ",value:function(t,e){return O.equalsWithTolerance(this.getZ(),t.getZ(),e)}},{key:"setX",value:function(t){this.x=t}},{key:"compareTo",value:function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0}},{key:"getX",value:function(){return this.x}},{key:"setZ",value:function(t){this.z=t}},{key:"clone",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return G.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}}},{key:"copy",value:function(){return new e(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}},{key:"distance3D",value:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.getZ()-t.getZ();return Math.sqrt(e*e+n*n+r*r)}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(t){this.y=t}},{key:"distance",value:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)}},{key:"hashCode",value:function(){var t=17;return 37*(t=37*t+e.hashCode(this.x))+e.hashCode(this.y)}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}},{key:"interfaces_",get:function(){return[k,w,b]}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)e.constructor_.call(this,0,0);else if(1===arguments.length){var t=arguments[0];e.constructor_.call(this,t.x,t.y,t.getZ())}else if(2===arguments.length){var n=arguments[0],r=arguments[1];e.constructor_.call(this,n,r,e.NULL_ORDINATE)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];this.x=i,this.y=o,this.z=s}}},{key:"hashCode",value:function(t){return Y[0]=t,z[0]^z[1]}}]),e}(),X=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"compare",value:function(t,n){var r=e.compare(t.x,n.x);if(0!==r)return r;var i=e.compare(t.y,n.y);return 0!==i?i:this._dimensionsToTest<=2?0:e.compare(t.getZ(),n.getZ())}},{key:"interfaces_",get:function(){return[D]}}],[{key:"constructor_",value:function(){if(this._dimensionsToTest=2,0===arguments.length)e.constructor_.call(this,2);else if(1===arguments.length){var t=arguments[0];if(2!==t&&3!==t)throw new x("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}}},{key:"compare",value:function(t,e){return t<e?-1:t>e?1:A.isNaN(t)?A.isNaN(e)?0:-1:A.isNaN(e)?1:0}}]),e}();j.DimensionalComparator=X,j.NULL_ORDINATE=A.NaN,j.X=0,j.Y=1,j.Z=2,j.M=3;var U=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(t){if(!(t instanceof e))return!1;var n=t;return this.isNull()?n.isNull():this._maxx===n.getMaxX()&&this._maxy===n.getMaxY()&&this._minx===n.getMinX()&&this._miny===n.getMinY()}},{key:"intersection",value:function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new e;var n=this._minx>t._minx?this._minx:t._minx,r=this._miny>t._miny?this._miny:t._miny;return new e(n,this._maxx<t._maxx?this._maxx:t._maxx,r,this._maxy<t._maxy?this._maxy:t._maxy)}},{key:"isNull",value:function(){return this._maxx<this._minx}},{key:"getMaxX",value:function(){return this._maxx}},{key:"covers",value:function(){if(1===arguments.length){if(arguments[0]instanceof j){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof e){var n=arguments[0];return!this.isNull()&&!n.isNull()&&n.getMinX()>=this._minx&&n.getMaxX()<=this._maxx&&n.getMinY()>=this._miny&&n.getMaxY()<=this._maxy}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];return!this.isNull()&&r>=this._minx&&r<=this._maxx&&i>=this._miny&&i<=this._maxy}}},{key:"intersects",value:function(){if(1===arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof j){var n=arguments[0];return this.intersects(n.x,n.y)}}else if(2===arguments.length){if(arguments[0]instanceof j&&arguments[1]instanceof j){var r=arguments[0],i=arguments[1];return!(this.isNull()||(r.x<i.x?r.x:i.x)>this._maxx||(r.x>i.x?r.x:i.x)<this._minx||(r.y<i.y?r.y:i.y)>this._maxy||(r.y>i.y?r.y:i.y)<this._miny)}if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var o=arguments[0],s=arguments[1];return!this.isNull()&&!(o>this._maxx||o<this._minx||s>this._maxy||s<this._miny)}}}},{key:"getMinY",value:function(){return this._miny}},{key:"getDiameter",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return Math.sqrt(t*t+e*e)}},{key:"getMinX",value:function(){return this._minx}},{key:"expandToInclude",value:function(){if(1===arguments.length){if(arguments[0]instanceof j){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof e){var n=arguments[0];if(n.isNull())return null;this.isNull()?(this._minx=n.getMinX(),this._maxx=n.getMaxX(),this._miny=n.getMinY(),this._maxy=n.getMaxY()):(n._minx<this._minx&&(this._minx=n._minx),n._maxx>this._maxx&&(this._maxx=n._maxx),n._miny<this._miny&&(this._miny=n._miny),n._maxy>this._maxy&&(this._maxy=n._maxy))}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.isNull()?(this._minx=r,this._maxx=r,this._miny=i,this._maxy=i):(r<this._minx&&(this._minx=r),r>this._maxx&&(this._maxx=r),i<this._miny&&(this._miny=i),i>this._maxy&&(this._maxy=i))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e}},{key:"getWidth",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:"compareTo",value:function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0}},{key:"translate",value:function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)}},{key:"copy",value:function(){return new e(this)}},{key:"toString",value:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}},{key:"setToNull",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:"disjoint",value:function(t){return!(!this.isNull()&&!t.isNull())||t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny}},{key:"getHeight",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e}},{key:"expandBy",value:function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:"contains",value:function(){if(1===arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof j){var n=arguments[0];return this.covers(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];return this.covers(r,i)}}},{key:"centre",value:function(){return this.isNull()?null:new j((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof j){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof e){var n=arguments[0];this._minx=n._minx,this._maxx=n._maxx,this._miny=n._miny,this._maxy=n._maxy}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];o<s?(this._minx=o,this._maxx=s):(this._minx=s,this._maxx=o),a<u?(this._miny=a,this._maxy=u):(this._miny=u,this._maxy=a)}}},{key:"getMaxY",value:function(){return this._maxy}},{key:"distance",value:function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)}},{key:"hashCode",value:function(){var t=17;return 37*(t=37*(t=37*(t=37*t+j.hashCode(this._minx))+j.hashCode(this._maxx))+j.hashCode(this._miny))+j.hashCode(this._maxy)}},{key:"interfaces_",get:function(){return[k,b]}}],[{key:"constructor_",value:function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof j){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this.init(o,s,a,u)}}},{key:"intersects",value:function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),l=Math.min(r.x,i.x),h=Math.max(r.x,i.x);return!(l>u||h<a||(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),l=Math.min(r.y,i.y),h=Math.max(r.y,i.y),l>u||h<a))}}}]),e}(),V=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===e.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this._factory}},{key:"getGeometryN",value:function(t){return this}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equalsExact",value:function(t){return this===t||this.equalsExact(t,0)}},{key:"geometryChanged",value:function(){this.apply(e.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){this._envelope=null}},{key:"equalsNorm",value:function(t){return null!==t&&this.norm().equalsExact(t.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){var t;if(1===arguments.length){var e=arguments[0];return t=e,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return t=n,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(n,r)}}},{key:"getUserData",value:function(){return this._userData}},{key:"getSRID",value:function(){return this._SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(t){if(t.getTypeCode()===e.TYPECODE_GEOMETRYCOLLECTION)throw new x("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n}},{key:"norm",value:function(){var t=this.copy();return t.normalize(),t}},{key:"reverse",value:function(){var t=this.reverseInternal();return null!=this.envelope&&(t.envelope=this.envelope.copy()),t.setSRID(this.getSRID()),t}},{key:"copy",value:function(){var t=this.copyInternal();return t.envelope=null==this._envelope?null:this._envelope.copy(),t._SRID=this._SRID,t._userData=this._userData,t}},{key:"getPrecisionModel",value:function(){return this._factory.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new U(this._envelope)}},{key:"setSRID",value:function(t){this._SRID=t}},{key:"setUserData",value:function(t){this._userData=t}},{key:"compare",value:function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),s=i.compareTo(o);if(0!==s)return s}return n.hasNext()?1:r.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isEquivalentClass",value:function(t){return this.getClass()===t.getClass()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===e.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===e.TYPECODE_MULTIPOINT||this.getTypeCode()===e.TYPECODE_MULTILINESTRING||this.getTypeCode()===e.TYPECODE_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[w,k,b]}},{key:"getClass",value:function(){return e}}],[{key:"hasNonEmptyElements",value:function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1}}]),e}();V.constructor_=function(t){t&&(this._envelope=null,this._userData=null,this._factory=t,this._SRID=t.getSRID())},V.TYPECODE_POINT=0,V.TYPECODE_MULTIPOINT=1,V.TYPECODE_LINESTRING=2,V.TYPECODE_LINEARRING=3,V.TYPECODE_MULTILINESTRING=4,V.TYPECODE_POLYGON=5,V.TYPECODE_MULTIPOLYGON=6,V.TYPECODE_GEOMETRYCOLLECTION=7,V.TYPENAME_POINT="Point",V.TYPENAME_MULTIPOINT="MultiPoint",V.TYPENAME_LINESTRING="LineString",V.TYPENAME_LINEARRING="LinearRing",V.TYPENAME_MULTILINESTRING="MultiLineString",V.TYPENAME_POLYGON="Polygon",V.TYPENAME_MULTIPOLYGON="MultiPolygon",V.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",V.geometryChangedFilter={get interfaces_(){return[E]},filter:function(t){t.geometryChangedAction()}};var Z=function(){function e(){t(this,e)}return n(e,null,[{key:"toLocationSymbol",value:function(t){switch(t){case e.EXTERIOR:return"e";case e.BOUNDARY:return"b";case e.INTERIOR:return"i";case e.NONE:return"-"}throw new x("Unknown location value: "+t)}}]),e}();Z.INTERIOR=0,Z.BOUNDARY=1,Z.EXTERIOR=2,Z.NONE=-1;var H=function(){function e(){t(this,e)}return n(e,[{key:"add",value:function(){}},{key:"addAll",value:function(){}},{key:"isEmpty",value:function(){}},{key:"iterator",value:function(){}},{key:"size",value:function(){}},{key:"toArray",value:function(){}},{key:"remove",value:function(){}}]),e}(),W=function(e){r(i,e);var n=c(i);function i(e){var r;return t(this,i),(r=n.call(this,e)).name=Object.keys({NoSuchElementException:i})[0],r}return i}(_),J=function(e){r(i,e);var n=c(i);function i(e){var r;return t(this,i),(r=n.call(this,e)).name=Object.keys({UnsupportedOperationException:i})[0],r}return i}(_),K=function(e){r(o,e);var i=c(o);function o(){return t(this,o),i.apply(this,arguments)}return n(o,[{key:"contains",value:function(){}}]),o}(H),Q=function(e,i){r(s,e);var o=c(s);function s(e){var n;return t(this,s),(n=o.call(this)).map=new Map,e instanceof H&&n.addAll(e),n}return n(s,[{key:"contains",value:function(t){var e=t.hashCode?t.hashCode():t;return!!this.map.has(e)}},{key:"add",value:function(t){var e=t.hashCode?t.hashCode():t;return!this.map.has(e)&&!!this.map.set(e,t)}},{key:"addAll",value:function(t){var e,n=p(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.add(r)}}catch(t){n.e(t)}finally{n.f()}return!0}},{key:"remove",value:function(){throw new J}},{key:"size",value:function(){return this.map.size}},{key:"isEmpty",value:function(){return 0===this.map.size}},{key:"toArray",value:function(){return Array.from(this.map.values())}},{key:"iterator",value:function(){return new $(this.map)}},{key:i,value:function(){return this.map}}]),s}(K,Symbol.iterator),$=function(){function e(n){t(this,e),this.iterator=n.values();var r=this.iterator.next(),i=r.done,o=r.value;this.done=i,this.value=o}return n(e,[{key:"next",value:function(){if(this.done)throw new W;var t=this.value,e=this.iterator.next(),n=e.done,r=e.value;return this.done=n,this.value=r,t}},{key:"hasNext",value:function(){return!this.done}},{key:"remove",value:function(){throw new J}}]),e}(),tt=function(){function e(){t(this,e)}return n(e,null,[{key:"opposite",value:function(t){return t===e.LEFT?e.RIGHT:t===e.RIGHT?e.LEFT:t}}]),e}();tt.ON=0,tt.LEFT=1,tt.RIGHT=2;var et=function(e){r(i,e);var n=c(i);function i(e){var r;return t(this,i),(r=n.call(this,e)).name=Object.keys({EmptyStackException:i})[0],r}return i}(_),nt=function(e){r(i,e);var n=c(i);function i(e){var r;return t(this,i),(r=n.call(this,e)).name=Object.keys({IndexOutOfBoundsException:i})[0],r}return i}(_),rt=function(e){r(o,e);var i=c(o);function o(){return t(this,o),i.apply(this,arguments)}return n(o,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"isEmpty",value:function(){}}]),o}(H),it=function(e){r(o,e);var i=c(o);function o(){var e;return t(this,o),(e=i.call(this)).array=[],e}return n(o,[{key:"add",value:function(t){return this.array.push(t),!0}},{key:"get",value:function(t){if(t<0||t>=this.size())throw new nt;return this.array[t]}},{key:"push",value:function(t){return this.array.push(t),t}},{key:"pop",value:function(){if(0===this.array.length)throw new et;return this.array.pop()}},{key:"peek",value:function(){if(0===this.array.length)throw new et;return this.array[this.array.length-1]}},{key:"empty",value:function(){return 0===this.array.length}},{key:"isEmpty",value:function(){return this.empty()}},{key:"search",value:function(t){return this.array.indexOf(t)}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}}]),o}(rt);function ot(t,e){return t.interfaces_&&t.interfaces_.indexOf(e)>-1}var st=function(){function e(n){t(this,e),this.str=n}return n(e,[{key:"append",value:function(t){this.str+=t}},{key:"setCharAt",value:function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)}},{key:"toString",value:function(){return this.str}}]),e}(),at=function(){function e(n){t(this,e),this.value=n}return n(e,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(t){return this.value<t?-1:this.value>t?1:0}}],[{key:"compare",value:function(t,e){return t<e?-1:t>e?1:0}},{key:"isNan",value:function(t){return Number.isNaN(t)}},{key:"valueOf",value:function(t){return new e(t)}}]),e}(),ut=function(){function e(){t(this,e)}return n(e,null,[{key:"isWhitespace",value:function(t){return t<=32&&t>=0||127===t}},{key:"toUpperCase",value:function(t){return t.toUpperCase()}}]),e}(),lt=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"le",value:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<=t._lo}},{key:"extractSignificantDigits",value:function(t,n){var r=this.abs(),i=e.magnitude(r._hi),o=e.TEN.pow(i);(r=r.divide(o)).gt(e.TEN)?(r=r.divide(e.TEN),i+=1):r.lt(e.ONE)&&(r=r.multiply(e.TEN),i-=1);for(var s=i+1,a=new st,u=e.MAX_PRINT_DIGITS-1,l=0;l<=u;l++){t&&l===s&&a.append(".");var h=Math.trunc(r._hi);if(h<0)break;var c=!1,f=0;h>9?(c=!0,f="9"):f="0"+h,a.append(f),r=r.subtract(e.valueOf(h)).multiply(e.TEN),c&&r.selfAdd(e.TEN);var g=!0,v=e.magnitude(r._hi);if(v<0&&Math.abs(v)>=u-l&&(g=!1),!g)break}return n[0]=i,a.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this._hi+this._lo}},{key:"subtract",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var n=arguments[0];return this.add(-n)}}},{key:"equals",value:function(){if(1===arguments.length&&arguments[0]instanceof e){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}}},{key:"isZero",value:function(){return 0===this._hi&&0===this._lo}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var n=arguments[0];return this.isNaN()?this:this.selfAdd(-n,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(t){return this.le(t)?this:t}},{key:"selfDivide",value:function(){if(1===arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var n=arguments[0];return this.selfDivide(n,0)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1],o=null,s=null,a=null,u=null,l=null,h=null,c=null,f=null;return l=this._hi/r,f=(o=(h=e.SPLIT*l)-(o=h-l))*(a=(f=e.SPLIT*r)-(a=f-r))-(c=l*r)+o*(u=r-a)+(s=l-o)*a+s*u,f=l+(h=(this._hi-c-f+this._lo-l*i)/r),this._hi=f,this._lo=l-f+h,this}}},{key:"dump",value:function(){return"DD<"+this._hi+", "+this._lo+">"}},{key:"divide",value:function(){if(arguments[0]instanceof e){var t=arguments[0],n=null,r=null,i=null,o=null,s=null,a=null,u=null,l=null;return r=(s=this._hi/t._hi)-(n=(a=e.SPLIT*s)-(n=a-s)),l=n*(i=(l=e.SPLIT*t._hi)-(i=l-t._hi))-(u=s*t._hi)+n*(o=t._hi-i)+r*i+r*o,new e(l=s+(a=(this._hi-u-l+this._lo-s*t._lo)/t._hi),s-l+a)}if("number"==typeof arguments[0]){var h=arguments[0];return A.isNaN(h)?e.createNaN():e.copy(this).selfDivide(h,0)}}},{key:"ge",value:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>=t._lo}},{key:"pow",value:function(t){if(0===t)return e.valueOf(1);var n=new e(this),r=e.valueOf(1),i=Math.abs(t);if(i>1)for(;i>0;)i%2==1&&r.selfMultiply(n),(i/=2)>0&&(n=n.sqr());else r=n;return t<0?r.reciprocal():r}},{key:"ceil",value:function(){if(this.isNaN())return e.NaN;var t=Math.ceil(this._hi),n=0;return t===this._hi&&(n=Math.ceil(this._lo)),new e(t,n)}},{key:"compareTo",value:function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0}},{key:"rint",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:"setValue",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var n=arguments[0];return this.init(n),this}}},{key:"max",value:function(t){return this.ge(t)?this:t}},{key:"sqrt",value:function(){if(this.isZero())return e.valueOf(0);if(this.isNegative())return e.NaN;var t=1/Math.sqrt(this._hi),n=this._hi*t,r=e.valueOf(n),i=this.subtract(r.sqr())._hi*(.5*t);return r.add(i)}},{key:"selfAdd",value:function(){if(1===arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var n=arguments[0],r=null,i=null,o=null,s=null,a=null,u=null;return s=(o=this._hi+n)-(a=o-this._hi),i=(u=(s=n-a+(this._hi-s))+this._lo)+(o-(r=o+u)),this._hi=r+i,this._lo=i+(r-this._hi),this}}else if(2===arguments.length){var l=arguments[0],h=arguments[1],c=null,f=null,g=null,v=null,d=null,p=null,y=null;v=this._hi+l,f=this._lo+h,d=v-(p=v-this._hi),g=f-(y=f-this._lo);var m=(c=v+(p=(d=l-p+(this._hi-d))+f))+(p=(g=h-y+(this._lo-g))+(p+(v-c))),_=p+(c-m);return this._hi=m,this._lo=_,this}}},{key:"selfMultiply",value:function(){if(1===arguments.length){if(arguments[0]instanceof e){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var n=arguments[0];return this.selfMultiply(n,0)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1],o=null,s=null,a=null,u=null,l=null,h=null;o=(l=e.SPLIT*this._hi)-this._hi,h=e.SPLIT*r,o=l-o,s=this._hi-o,a=h-r;var c=(l=this._hi*r)+(h=o*(a=h-a)-l+o*(u=r-a)+s*a+s*u+(this._hi*i+this._lo*r)),f=h+(o=l-c);return this._hi=c,this._lo=f,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return e.NaN;var t=Math.floor(this._hi),n=0;return t===this._hi&&(n=Math.floor(this._lo)),new e(t,n)}},{key:"negate",value:function(){return this.isNaN()?this:new e(-this._hi,-this._lo)}},{key:"clone",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}}},{key:"multiply",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return t.isNaN()?e.createNaN():e.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var n=arguments[0];return A.isNaN(n)?e.createNaN():e.copy(this).selfMultiply(n,0)}}},{key:"isNaN",value:function(){return A.isNaN(this._hi)}},{key:"intValue",value:function(){return Math.trunc(this._hi)}},{key:"toString",value:function(){var t=e.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var t=this.getSpecialNumberString();if(null!==t)return t;var n=new Array(1).fill(null),r=this.extractSignificantDigits(!0,n),i=n[0]+1,o=r;if("."===r.charAt(0))o="0"+r;else if(i<0)o="0."+e.stringOfChar("0",-i)+r;else if(-1===r.indexOf(".")){var s=i-r.length;o=r+e.stringOfChar("0",s)+".0"}return this.isNegative()?"-"+o:o}},{key:"reciprocal",value:function(){var t,n,r,i,o=null,s=null,a=null,u=null;t=(r=1/this._hi)-(o=(a=e.SPLIT*r)-(o=a-r)),s=(u=e.SPLIT*this._hi)-this._hi;var l=r+(a=(1-(i=r*this._hi)-(u=o*(s=u-s)-i+o*(n=this._hi-s)+t*s+t*n)-r*this._lo)/this._hi);return new e(l,r-l+a)}},{key:"toSciNotation",value:function(){if(this.isZero())return e.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var n=new Array(1).fill(null),r=this.extractSignificantDigits(!1,n),i=e.SCI_NOT_EXPONENT_CHAR+n[0];if("0"===r.charAt(0))throw new IllegalStateException("Found leading zero: "+r);var o="";r.length>1&&(o=r.substring(1));var s=r.charAt(0)+"."+o;return this.isNegative()?"-"+s+i:s+i}},{key:"abs",value:function(){return this.isNaN()?e.NaN:this.isNegative()?this.negate():new e(this)}},{key:"isPositive",value:function(){return this._hi>0||0===this._hi&&this._lo>0}},{key:"lt",value:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<t._lo}},{key:"add",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return e.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var n=arguments[0];return e.copy(this).selfAdd(n)}}},{key:"init",value:function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof e){var n=arguments[0];this._hi=n._hi,this._lo=n._lo}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this._hi=r,this._lo=i}}},{key:"gt",value:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>t._lo}},{key:"isNegative",value:function(){return this._hi<0||0===this._hi&&this._lo<0}},{key:"trunc",value:function(){return this.isNaN()?e.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:"interfaces_",get:function(){return[b,k,w]}}],[{key:"constructor_",value:function(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.init(n)}else if("string"==typeof arguments[0]){var r=arguments[0];e.constructor_.call(this,e.parse(r))}}else if(2===arguments.length){var i=arguments[0],o=arguments[1];this.init(i,o)}}},{key:"determinant",value:function(){if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];return e.determinant(e.valueOf(t),e.valueOf(n),e.valueOf(r),e.valueOf(i))}if(arguments[3]instanceof e&&arguments[2]instanceof e&&arguments[0]instanceof e&&arguments[1]instanceof e){var o=arguments[1],s=arguments[2],a=arguments[3];return arguments[0].multiply(a).selfSubtract(o.multiply(s))}}},{key:"sqr",value:function(t){return e.valueOf(t).selfMultiply(t)}},{key:"valueOf",value:function(){if("string"==typeof arguments[0]){var t=arguments[0];return e.parse(t)}if("number"==typeof arguments[0])return new e(arguments[0])}},{key:"sqrt",value:function(t){return e.valueOf(t).sqrt()}},{key:"parse",value:function(t){for(var n=0,r=t.length;ut.isWhitespace(t.charAt(n));)n++;var i=!1;if(n<r){var o=t.charAt(n);"-"!==o&&"+"!==o||(n++,"-"===o&&(i=!0))}for(var s=new e,a=0,u=0,l=0,h=!1;!(n>=r);){var c=t.charAt(n);if(n++,ut.isDigit(c)){var f=c-"0";s.selfMultiply(e.TEN),s.selfAdd(f),a++}else{if("."!==c){if("e"===c||"E"===c){var g=t.substring(n);try{l=at.parseInt(g)}catch(e){throw e instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+g+" in string "+t):e}break}throw new NumberFormatException("Unexpected character '"+c+"' at position "+n+" in string "+t)}u=a,h=!0}}var v=s;h||(u=a);var d=a-u-l;if(0===d)v=s;else if(d>0){var p=e.TEN.pow(d);v=s.divide(p)}else if(d<0){var y=e.TEN.pow(-d);v=s.multiply(y)}return i?v.negate():v}},{key:"createNaN",value:function(){return new e(A.NaN,A.NaN)}},{key:"copy",value:function(t){return new e(t)}},{key:"magnitude",value:function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r}},{key:"stringOfChar",value:function(t,e){for(var n=new st,r=0;r<e;r++)n.append(t);return n.toString()}}]),e}();lt.PI=new lt(3.141592653589793,12246467991473532e-32),lt.TWO_PI=new lt(6.283185307179586,24492935982947064e-32),lt.PI_2=new lt(1.5707963267948966,6123233995736766e-32),lt.E=new lt(2.718281828459045,14456468917292502e-32),lt.NaN=new lt(A.NaN,A.NaN),lt.EPS=123259516440783e-46,lt.SPLIT=134217729,lt.MAX_PRINT_DIGITS=32,lt.TEN=lt.valueOf(10),lt.ONE=lt.valueOf(1),lt.SCI_NOT_EXPONENT_CHAR="E",lt.SCI_NOT_ZERO="0.0E0";var ht=function(){function e(){t(this,e)}return n(e,null,[{key:"orientationIndex",value:function(t,n,r){var i=e.orientationIndexFilter(t,n,r);if(i<=1)return i;var o=lt.valueOf(n.x).selfAdd(-t.x),s=lt.valueOf(n.y).selfAdd(-t.y),a=lt.valueOf(r.x).selfAdd(-n.x),u=lt.valueOf(r.y).selfAdd(-n.y);return o.selfMultiply(u).selfSubtract(s.selfMultiply(a)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[3]instanceof lt&&arguments[2]instanceof lt&&arguments[0]instanceof lt&&arguments[1]instanceof lt){var t=arguments[1],e=arguments[2],n=arguments[3];return arguments[0].multiply(n).selfSubtract(t.multiply(e)).signum()}if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=lt.valueOf(r),u=lt.valueOf(i),l=lt.valueOf(o),h=lt.valueOf(s);return a.multiply(h).selfSubtract(u.multiply(l)).signum()}}},{key:"intersection",value:function(t,e,n,r){var i=new lt(t.y).selfSubtract(e.y),o=new lt(e.x).selfSubtract(t.x),s=new lt(t.x).selfMultiply(e.y).selfSubtract(new lt(e.x).selfMultiply(t.y)),a=new lt(n.y).selfSubtract(r.y),u=new lt(r.x).selfSubtract(n.x),l=new lt(n.x).selfMultiply(r.y).selfSubtract(new lt(r.x).selfMultiply(n.y)),h=o.multiply(l).selfSubtract(u.multiply(s)),c=a.multiply(s).selfSubtract(i.multiply(l)),f=i.multiply(u).selfSubtract(a.multiply(o)),g=h.selfDivide(f).doubleValue(),v=c.selfDivide(f).doubleValue();return A.isNaN(g)||A.isInfinite(g)||A.isNaN(v)||A.isInfinite(v)?null:new j(g,v)}},{key:"orientationIndexFilter",value:function(t,n,r){var i=null,o=(t.x-r.x)*(n.y-r.y),s=(t.y-r.y)*(n.x-r.x),a=o-s;if(o>0){if(s<=0)return e.signum(a);i=o+s}else{if(!(o<0))return e.signum(a);if(s>=0)return e.signum(a);i=-o-s}var u=e.DP_SAFE_EPSILON*i;return a>=u||-a>=u?e.signum(a):2}},{key:"signum",value:function(t){return t>0?1:t<0?-1:0}}]),e}();ht.DP_SAFE_EPSILON=1e-15;var ct=function(){function e(){t(this,e)}return n(e,[{key:"getM",value:function(t){if(this.hasM()){var e=this.getDimension()-this.getMeasures();return this.getOrdinate(t,e)}return A.NaN}},{key:"setOrdinate",value:function(t,e,n){}},{key:"getZ",value:function(t){return this.hasZ()?this.getOrdinate(t,2):A.NaN}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(t,e){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(t){}},{key:"createCoordinate",value:function(){}},{key:"getDimension",value:function(){}},{key:"hasM",value:function(){return this.getMeasures()>0}},{key:"getX",value:function(t){}},{key:"hasZ",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:"getMeasures",value:function(){return 0}},{key:"expandEnvelope",value:function(t){}},{key:"copy",value:function(){}},{key:"getY",value:function(t){}},{key:"toCoordinateArray",value:function(){}},{key:"interfaces_",get:function(){return[w]}}]),e}();ct.X=0,ct.Y=1,ct.Z=2,ct.M=3;var ft=function(){function e(){t(this,e)}return n(e,null,[{key:"index",value:function(t,e,n){return ht.orientationIndex(t,e,n)}},{key:"isCCW",value:function(){if(arguments[0]instanceof Array){var t=arguments[0],n=t.length-1;if(n<3)throw new x("Ring has fewer than 4 points, so orientation cannot be determined");for(var r=t[0],i=0,o=1;o<=n;o++){var s=t[o];s.y>r.y&&(r=s,i=o)}var a=i;do{(a-=1)<0&&(a=n)}while(t[a].equals2D(r)&&a!==i);var u=i;do{u=(u+1)%n}while(t[u].equals2D(r)&&u!==i);var l=t[a],h=t[u];if(l.equals2D(r)||h.equals2D(r)||l.equals2D(h))return!1;var c=e.index(l,r,h);return 0===c?l.x>h.x:c>0}if(ot(arguments[0],ct)){var f=arguments[0],g=f.size()-1;if(g<3)throw new x("Ring has fewer than 4 points, so orientation cannot be determined");for(var v=f.getCoordinate(0),d=0,p=1;p<=g;p++){var y=f.getCoordinate(p);y.y>v.y&&(v=y,d=p)}var m=null,_=d;do{(_-=1)<0&&(_=g),m=f.getCoordinate(_)}while(m.equals2D(v)&&_!==d);var E=null,k=d;do{k=(k+1)%g,E=f.getCoordinate(k)}while(E.equals2D(v)&&k!==d);if(m.equals2D(v)||E.equals2D(v)||m.equals2D(E))return!1;var w=e.index(m,v,E);return 0===w?m.x>E.x:w>0}}}]),e}();ft.CLOCKWISE=-1,ft.RIGHT=ft.CLOCKWISE,ft.COUNTERCLOCKWISE=1,ft.LEFT=ft.COUNTERCLOCKWISE,ft.COLLINEAR=0,ft.STRAIGHT=ft.COLLINEAR;var gt=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getCoordinate",value:function(){return this._minCoord}},{key:"getRightmostSide",value:function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n}},{key:"findRightmostEdgeAtVertex",value:function(){var t=this._minDe.getEdge().getCoordinates();G.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=ft.index(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===ft.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===ft.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=tt.LEFT;return n[e].y<n[e+1].y&&(r=tt.RIGHT),r}},{key:"getEdge",value:function(){return this._orientedDe}},{key:"checkForRightmostCoordinate",value:function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])}},{key:"findRightmostEdgeAtNode",value:function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}G.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===tt.LEFT&&(this._orientedDe=this._minDe.getSym())}}],[{key:"constructor_",value:function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}}]),e}(),vt=function(e){r(o,e);var i=c(o);function o(e,n){var r;return t(this,o),(r=i.call(this,n?e+" [ "+n+" ]":e)).pt=n?new j(n):void 0,r.name=Object.keys({TopologyException:o})[0],r}return n(o,[{key:"getCoordinate",value:function(){return this.pt}}]),o}(F),dt=function(){function e(){t(this,e),this.array=[]}return n(e,[{key:"addLast",value:function(t){this.array.push(t)}},{key:"removeFirst",value:function(){return this.array.shift()}},{key:"isEmpty",value:function(){return 0===this.array.length}}]),e}(),pt=function(e,i){r(s,e);var o=c(s);function s(e){var n;return t(this,s),(n=o.call(this)).array=[],e instanceof H&&n.addAll(e),n}return n(s,[{key:"interfaces_",get:function(){return[rt,H]}},{key:"ensureCapacity",value:function(){}},{key:"add",value:function(t){return 1===arguments.length?this.array.push(t):this.array.splice(arguments[0],0,arguments[1]),!0}},{key:"clear",value:function(){this.array=[]}},{key:"addAll",value:function(t){var e,n=p(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.array.push(r)}}catch(t){n.e(t)}finally{n.f()}}},{key:"set",value:function(t,e){var n=this.array[t];return this.array[t]=e,n}},{key:"iterator",value:function(){return new yt(this)}},{key:"get",value:function(t){if(t<0||t>=this.size())throw new nt;return this.array[t]}},{key:"isEmpty",value:function(){return 0===this.array.length}},{key:"sort",value:function(t){t?this.array.sort((function(e,n){return t.compare(e,n)})):this.array.sort()}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"remove",value:function(t){for(var e=0,n=this.array.length;e<n;e++)if(this.array[e]===t)return!!this.array.splice(e,1);return!1}},{key:i,value:function(){return this.array.values()}}]),s}(rt,Symbol.iterator),yt=function(){function e(n){t(this,e),this.arrayList=n,this.position=0}return n(e,[{key:"next",value:function(){if(this.position===this.arrayList.size())throw new W;return this.arrayList.get(this.position++)}},{key:"hasNext",value:function(){return this.position<this.arrayList.size()}},{key:"set",value:function(t){return this.arrayList.set(this.position-1,t)}},{key:"remove",value:function(){this.arrayList.remove(this.arrayList.get(this.position))}}]),e}(),mt=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"clearVisitedEdges",value:function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)}},{key:"getRightmostCoordinate",value:function(){return this._rightMostCoord}},{key:"computeNodeDepth",value:function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new vt("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}}},{key:"computeDepth",value:function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.getNode(),e.getLabel(),e.setEdgeDepths(tt.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)}},{key:"create",value:function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(tt.RIGHT)>=1&&e.getDepth(tt.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}}},{key:"computeDepths",value:function(t){var e=new Q,n=new dt,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}}},{key:"compareTo",value:function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(null===this._env){for(var t=new U,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env}},{key:"addReachable",value:function(t){var e=new it;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}}},{key:"copySymDepths",value:function(t){var e=t.getSym();e.setDepth(tt.LEFT,t.getDepth(tt.RIGHT)),e.setDepth(tt.RIGHT,t.getDepth(tt.LEFT))}},{key:"add",value:function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}}},{key:"getNodes",value:function(){return this._nodes}},{key:"getDirectedEdges",value:function(){return this._dirEdgeList}},{key:"interfaces_",get:function(){return[k]}}],[{key:"constructor_",value:function(){this._finder=null,this._dirEdgeList=new pt,this._nodes=new pt,this._rightMostCoord=null,this._env=null,this._finder=new gt}}]),e}(),_t=function(){function e(){t(this,e)}return n(e,null,[{key:"intersection",value:function(t,e,n,r){var i=t.x<e.x?t.x:e.x,o=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,a=t.y>e.y?t.y:e.y,u=n.x<r.x?n.x:r.x,l=n.y<r.y?n.y:r.y,h=n.x>r.x?n.x:r.x,c=n.y>r.y?n.y:r.y,f=((i>u?i:u)+(s<h?s:h))/2,g=((o>l?o:l)+(a<c?a:c))/2,v=t.x-f,d=t.y-g,p=e.x-f,y=e.y-g,m=n.x-f,_=n.y-g,x=r.x-f,E=r.y-g,k=d-y,w=p-v,b=v*y-p*d,I=_-E,N=x-m,S=m*E-x*_,M=k*N-I*w,L=(w*S-N*b)/M,P=(I*b-k*S)/M;return A.isNaN(L)||A.isInfinite(L)||A.isNaN(P)||A.isInfinite(P)?null:new j(L+f,P+g)}}]),e}(),xt=function(){function e(){t(this,e)}return n(e,null,[{key:"arraycopy",value:function(t,e,n,r,i){for(var o=0,s=e;s<e+i;s++)n[r+o]=t[s],o++}},{key:"getProperty",value:function(t){return{"line.separator":"\n"}[t]}}]),e}(),Et=function(){function e(){t(this,e)}return n(e,null,[{key:"log10",value:function(t){var n=Math.log(t);return A.isInfinite(n)||A.isNaN(n)?n:n/e.LOG_10}},{key:"min",value:function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i}},{key:"clamp",value:function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}}},{key:"wrap",value:function(t,e){return t<0?e- -t%e:t%e}},{key:"max",value:function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var r=arguments[1],i=arguments[2],o=arguments[3],s=arguments[0];return r>s&&(s=r),i>s&&(s=i),o>s&&(s=o),s}}},{key:"average",value:function(t,e){return(t+e)/2}}]),e}();Et.LOG_10=Math.log(10);var kt=function(){function e(){t(this,e)}return n(e,null,[{key:"segmentToSegment",value:function(t,n,r,i){if(t.equals(n))return e.pointToSegment(t,r,i);if(r.equals(i))return e.pointToSegment(i,t,n);var o=!1;if(U.intersects(t,n,r,i)){var s=(n.x-t.x)*(i.y-r.y)-(n.y-t.y)*(i.x-r.x);if(0===s)o=!0;else{var a=(t.y-r.y)*(i.x-r.x)-(t.x-r.x)*(i.y-r.y),u=((t.y-r.y)*(n.x-t.x)-(t.x-r.x)*(n.y-t.y))/s,l=a/s;(l<0||l>1||u<0||u>1)&&(o=!0)}}else o=!0;return o?Et.min(e.pointToSegment(t,r,i),e.pointToSegment(n,r,i),e.pointToSegment(r,t,n),e.pointToSegment(i,t,n)):0}},{key:"pointToSegment",value:function(t,e,n){if(e.x===n.x&&e.y===n.y)return t.distance(e);var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;if(i<=0)return t.distance(e);if(i>=1)return t.distance(n);var o=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(o)*Math.sqrt(r)}},{key:"pointToLinePerpendicular",value:function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)}},{key:"pointToSegmentString",value:function(t,n){if(0===n.length)throw new x("Line array must contain at least one vertex");for(var r=t.distance(n[0]),i=0;i<n.length-1;i++){var o=e.pointToSegment(t,n[i],n[i+1]);o<r&&(r=o)}return r}}]),e}(),wt=function(){function e(){t(this,e)}return n(e,[{key:"create",value:function(){if(1===arguments.length)arguments[0]instanceof Array||ot(arguments[0],ct);else if(2===arguments.length);else if(3===arguments.length){var t=arguments[0],e=arguments[1];return this.create(t,e)}}}]),e}(),bt=function(){function e(){t(this,e)}return n(e,[{key:"filter",value:function(t){}}]),e}(),It=function(){function e(){t(this,e)}return n(e,null,[{key:"ofLine",value:function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new j;t.getCoordinate(0,r);for(var i=r.x,o=r.y,s=1;s<e;s++){t.getCoordinate(s,r);var a=r.x,u=r.y,l=a-i,h=u-o;n+=Math.sqrt(l*l+h*h),i=a,o=u}return n}}]),e}(),Nt=function e(){t(this,e)},St=function(){function e(){t(this,e)}return n(e,null,[{key:"copyCoord",value:function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))}},{key:"isRing",value:function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,ct.X)===t.getOrdinate(e-1,ct.X)&&t.getOrdinate(0,ct.Y)===t.getOrdinate(e-1,ct.Y)}},{key:"scroll",value:function(){if(2===arguments.length){if(ot(arguments[0],ct)&&Number.isInteger(arguments[1])){var t=arguments[0],n=arguments[1];e.scroll(t,n,e.isRing(t))}else if(ot(arguments[0],ct)&&arguments[1]instanceof j){var r=arguments[0],i=arguments[1],o=e.indexOf(i,r);if(o<=0)return null;e.scroll(r,o)}}else if(3===arguments.length){var s=arguments[0],a=arguments[1],u=arguments[2];if(a<=0)return null;for(var l=s.copy(),h=u?s.size()-1:s.size(),c=0;c<h;c++)for(var f=0;f<s.getDimension();f++)s.setOrdinate(c,f,l.getOrdinate((a+c)%h,f));if(u)for(var g=0;g<s.getDimension();g++)s.setOrdinate(h,g,s.getOrdinate(0,g))}}},{key:"isEqual",value:function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var s=t.getOrdinate(i,o),a=e.getOrdinate(i,o);if(!(t.getOrdinate(i,o)===e.getOrdinate(i,o)||A.isNaN(s)&&A.isNaN(a)))return!1}return!0}},{key:"minCoordinateIndex",value:function(){if(1===arguments.length){var t=arguments[0];return e.minCoordinateIndex(t,0,t.size()-1)}if(3===arguments.length){for(var n=arguments[0],r=arguments[2],i=-1,o=null,s=arguments[1];s<=r;s++){var a=n.getCoordinate(s);(null===o||o.compareTo(a)>0)&&(o=a,i=s)}return i}}},{key:"extend",value:function(t,n,r){var i=t.create(r,n.getDimension()),o=n.size();if(e.copy(n,0,i,0,o),o>0)for(var s=o;s<r;s++)e.copy(n,o-1,i,s,1);return i}},{key:"reverse",value:function(t){for(var n=t.size()-1,r=Math.trunc(n/2),i=0;i<=r;i++)e.swap(t,i,n-i)}},{key:"swap",value:function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}}},{key:"copy",value:function(t,n,r,i,o){for(var s=0;s<o;s++)e.copyCoord(t,n+s,r,i+s)}},{key:"ensureValidRing",value:function(t,n){var r=n.size();return 0===r?n:r<=3?e.createClosedRing(t,n,4):n.getOrdinate(0,ct.X)===n.getOrdinate(r-1,ct.X)&&n.getOrdinate(0,ct.Y)===n.getOrdinate(r-1,ct.Y)?n:e.createClosedRing(t,n,r+1)}},{key:"indexOf",value:function(t,e){for(var n=0;n<e.size();n++)if(t.x===e.getOrdinate(n,ct.X)&&t.y===e.getOrdinate(n,ct.Y))return n;return-1}},{key:"createClosedRing",value:function(t,n,r){var i=t.create(r,n.getDimension()),o=n.size();e.copy(n,0,i,0,o);for(var s=o;s<r;s++)e.copy(n,0,i,s,1);return i}},{key:"minCoordinate",value:function(t){for(var e=null,n=0;n<t.size();n++){var r=t.getCoordinate(n);(null===e||e.compareTo(r)>0)&&(e=r)}return e}}]),e}(),Mt=function(){function e(){t(this,e)}return n(e,null,[{key:"toDimensionSymbol",value:function(t){switch(t){case e.FALSE:return e.SYM_FALSE;case e.TRUE:return e.SYM_TRUE;case e.DONTCARE:return e.SYM_DONTCARE;case e.P:return e.SYM_P;case e.L:return e.SYM_L;case e.A:return e.SYM_A}throw new x("Unknown dimension value: "+t)}},{key:"toDimensionValue",value:function(t){switch(ut.toUpperCase(t)){case e.SYM_FALSE:return e.FALSE;case e.SYM_TRUE:return e.TRUE;case e.SYM_DONTCARE:return e.DONTCARE;case e.SYM_P:return e.P;case e.SYM_L:return e.L;case e.SYM_A:return e.A}throw new x("Unknown dimension symbol: "+t)}}]),e}();Mt.P=0,Mt.L=1,Mt.A=2,Mt.FALSE=-1,Mt.TRUE=-2,Mt.DONTCARE=-3,Mt.SYM_FALSE="F",Mt.SYM_TRUE="T",Mt.SYM_DONTCARE="*",Mt.SYM_P="0",Mt.SYM_L="1",Mt.SYM_A="2";var Lt=function(){function e(){t(this,e)}return n(e,[{key:"filter",value:function(t){}}]),e}(),Pt=function(){function e(){t(this,e)}return n(e,[{key:"filter",value:function(t,e){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}}]),e}(),Ct=function(e){r(s,e);var o=c(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new U:this._points.expandEnvelope(new U)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return this._points.toCoordinateArray()}},{key:"copyInternal",value:function(){return new s(this._points.copy(),this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof V){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this._points.size()!==n._points.size())return!1;for(var r=0;r<this._points.size();r++)if(!this.equal(this._points.getCoordinate(r),n._points.getCoordinate(r),e))return!1;return!0}return f(i(s.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e))){if(this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0){var n=this._points.copy();St.reverse(n),this._points=n}return null}}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?Mt.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"reverseInternal",value:function(){var t=this._points.copy();return St.reverse(t),this.getFactory().createLineString(t)}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return V.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return It.ofLine(this._points)}},{key:"getNumPoints",value:function(){return this._points.size()}},{key:"compareToSameClass",value:function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}}},{key:"apply",value:function(){if(ot(arguments[0],bt))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(ot(arguments[0],Pt)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else(ot(arguments[0],Lt)||ot(arguments[0],E))&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){throw new J}},{key:"isEquivalentClass",value:function(t){return t instanceof s}},{key:"getCoordinateN",value:function(t){return this._points.getCoordinate(t)}},{key:"getGeometryType",value:function(){return V.TYPENAME_LINESTRING}},{key:"getCoordinateSequence",value:function(){return this._points}},{key:"isEmpty",value:function(){return 0===this._points.size()}},{key:"init",value:function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new x("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t}},{key:"isCoordinate",value:function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))}},{key:"interfaces_",get:function(){return[Nt]}}],[{key:"constructor_",value:function(){if(this._points=null,0===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];V.constructor_.call(this,e),this.init(t)}}}]),s}(V),Tt=function e(){t(this,e)},Ot=function(e){r(s,e);var o=c(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new U;var t=new U;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"copyInternal",value:function(){return new s(this._coordinates.copy(),this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof V){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),e))}return f(i(s.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return Mt.FALSE}},{key:"reverseInternal",value:function(){return this.getFactory().createPoint(this._coordinates.copy())}},{key:"getTypeCode",value:function(){return V.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"getX",value:function(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}}},{key:"apply",value:function(){if(ot(arguments[0],bt)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(ot(arguments[0],Pt)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(ot(arguments[0],Lt)||ot(arguments[0],E))&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return V.TYPENAME_POINT}},{key:"getCoordinateSequence",value:function(){return this._coordinates}},{key:"getY",value:function(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return 0===this._coordinates.size()}},{key:"init",value:function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),G.isTrue(t.size()<=1),this._coordinates=t}},{key:"isSimple",value:function(){return!0}},{key:"interfaces_",get:function(){return[Tt]}}],[{key:"constructor_",value:function(){this._coordinates=null;var t=arguments[0],e=arguments[1];V.constructor_.call(this,e),this.init(t)}}]),s}(V),Rt=function(){function e(){t(this,e)}return n(e,null,[{key:"ofRing",value:function(){if(arguments[0]instanceof Array){var t=arguments[0];return Math.abs(e.ofRingSigned(t))}if(ot(arguments[0],ct)){var n=arguments[0];return Math.abs(e.ofRingSigned(n))}}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(ot(arguments[0],ct)){var s=arguments[0],a=s.size();if(a<3)return 0;var u=new j,l=new j,h=new j;s.getCoordinate(0,l),s.getCoordinate(1,h);var c=l.x;h.x-=c;for(var f=0,g=1;g<a-1;g++)u.y=l.y,l.x=h.x,l.y=h.y,s.getCoordinate(g+1,h),h.x-=c,f+=l.x*(u.y-h.y);return f/2}}}]),e}(),At=function(){function e(){t(this,e)}return n(e,null,[{key:"sort",value:function(){var t=arguments,e=arguments[0];if(1===arguments.length)e.sort((function(t,e){return t.compareTo(e)}));else if(2===arguments.length)e.sort((function(e,n){return t[1].compare(e,n)}));else if(3===arguments.length){var n=e.slice(arguments[1],arguments[2]);n.sort();var r=e.slice(0,arguments[1]).concat(n,e.slice(arguments[2],e.length));e.splice(0,e.length);var i,o=p(r);try{for(o.s();!(i=o.n()).done;){var s=i.value;e.push(s)}}catch(t){o.e(t)}finally{o.f()}}else if(4===arguments.length){var a=e.slice(arguments[1],arguments[2]);a.sort((function(e,n){return t[3].compare(e,n)}));var u=e.slice(0,arguments[1]).concat(a,e.slice(arguments[2],e.length));e.splice(0,e.length);var l,h=p(u);try{for(h.s();!(l=h.n()).done;){var c=l.value;e.push(c)}}catch(t){h.e(t)}finally{h.f()}}}},{key:"asList",value:function(t){var e,n=new pt,r=p(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;n.add(i)}}catch(t){r.e(t)}finally{r.f()}return n}},{key:"copyOf",value:function(t,e){return t.slice(0,e)}}]),e}(),Dt=function e(){t(this,e)},Ft=function(e){r(s,e);var o=c(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:"computeEnvelopeInternal",value:function(){return this._shell.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t}},{key:"getArea",value:function(){var t=0;t+=Rt.ofRing(this._shell.getCoordinateSequence());for(var e=0;e<this._holes.length;e++)t-=Rt.ofRing(this._holes[e].getCoordinateSequence());return t}},{key:"copyInternal",value:function(){for(var t=this._shell.copy(),e=new Array(this._holes.length).fill(null),n=0;n<this._holes.length;n++)e[n]=this._holes[n].copy();return new s(t,e,this._factory)}},{key:"isRectangle",value:function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var u=t.getX(a),l=t.getY(a);if(u!==o==(l!==s))return!1;o=u,s=l}return!0}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof V){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t,r=this._shell,o=n._shell;if(!r.equalsExact(o,e))return!1;if(this._holes.length!==n._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!this._holes[a].equalsExact(n._holes[a],e))return!1;return!0}return f(i(s.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){if(0===arguments.length){this._shell=this.normalized(this._shell,!0);for(var t=0;t<this._holes.length;t++)this._holes[t]=this.normalized(this._holes[t],!1);At.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=e.getCoordinateSequence(),i=St.minCoordinateIndex(r,0,r.size()-2);St.scroll(r,i,!0),ft.isCCW(r)===n&&St.reverse(r)}}},{key:"getCoordinate",value:function(){return this._shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this._holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"reverseInternal",value:function(){for(var t=this.getExteriorRing().reverse(),e=new Array(this.getNumInteriorRing()).fill(null),n=0;n<e.length;n++)e[n]=this.getInteriorRingN(n).reverse();return this.getFactory().createPolygon(t,e)}},{key:"getTypeCode",value:function(){return V.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t}},{key:"getNumPoints",value:function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"normalized",value:function(t,e){var n=t.copy();return this.normalize(n,e),n}},{key:"compareToSameClass",value:function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var r=arguments[1],i=arguments[0],o=this._shell,s=i._shell,a=o.compareToSameClass(s,r);if(0!==a)return a;for(var u=this.getNumInteriorRing(),l=i.getNumInteriorRing(),h=0;h<u&&h<l;){var c=this.getInteriorRingN(h),f=i.getInteriorRingN(h),g=c.compareToSameClass(f,r);if(0!==g)return g;h++}return h<u?1:h<l?-1:0}}},{key:"apply",value:function(){if(ot(arguments[0],bt)){var t=arguments[0];this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(ot(arguments[0],Pt)){var n=arguments[0];if(this._shell.apply(n),!n.isDone())for(var r=0;r<this._holes.length&&(this._holes[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(ot(arguments[0],Lt))arguments[0].filter(this);else if(ot(arguments[0],E)){var i=arguments[0];i.filter(this),this._shell.apply(i);for(var o=0;o<this._holes.length;o++)this._holes[o].apply(i)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)}},{key:"getGeometryType",value:function(){return V.TYPENAME_POLYGON}},{key:"getExteriorRing",value:function(){return this._shell}},{key:"isEmpty",value:function(){return this._shell.isEmpty()}},{key:"getInteriorRingN",value:function(t){return this._holes[t]}},{key:"interfaces_",get:function(){return[Dt]}}],[{key:"constructor_",value:function(){this._shell=null,this._holes=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(V.constructor_.call(this,n),null===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),V.hasNullElements(e))throw new x("holes must not contain null elements");if(t.isEmpty()&&V.hasNonEmptyElements(e))throw new x("shell is empty but holes are not");this._shell=t,this._holes=e}}]),s}(V),qt=function(e){r(i,e);var n=c(i);function i(){return t(this,i),n.apply(this,arguments)}return i}(K),Gt=function(e){r(o,e);var i=c(o);function o(e){var n;return t(this,o),(n=i.call(this)).array=[],e instanceof H&&n.addAll(e),n}return n(o,[{key:"contains",value:function(t){var e,n=p(this.array);try{for(n.s();!(e=n.n()).done;)if(0===e.value.compareTo(t))return!0}catch(t){n.e(t)}finally{n.f()}return!1}},{key:"add",value:function(t){if(this.contains(t))return!1;for(var e=0,n=this.array.length;e<n;e++)if(1===this.array[e].compareTo(t))return!!this.array.splice(e,0,t);return this.array.push(t),!0}},{key:"addAll",value:function(t){var e,n=p(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.add(r)}}catch(t){n.e(t)}finally{n.f()}return!0}},{key:"remove",value:function(){throw new J}},{key:"size",value:function(){return this.array.length}},{key:"isEmpty",value:function(){return 0===this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"iterator",value:function(){return new Bt(this.array)}}]),o}(qt),Bt=function(){function e(n){t(this,e),this.array=n,this.position=0}return n(e,[{key:"next",value:function(){if(this.position===this.array.length)throw new W;return this.array[this.position++]}},{key:"hasNext",value:function(){return this.position<this.array.length}},{key:"remove",value:function(){throw new J}}]),e}(),Yt=function(e){r(s,e);var o=c(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:"computeEnvelopeInternal",value:function(){for(var t=new U,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t}},{key:"getGeometryN",value:function(t){return this._geometries[t]}},{key:"getCoordinates",value:function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t}},{key:"getArea",value:function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t}},{key:"copyInternal",value:function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new s(t,this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof V){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this._geometries.length!==n._geometries.length)return!1;for(var r=0;r<this._geometries.length;r++)if(!this._geometries[r].equalsExact(n._geometries[r],e))return!1;return!0}return f(i(s.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();At.sort(this._geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var t=Mt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t}},{key:"reverseInternal",value:function(){for(var t=this._geometries.length,e=new pt(t),n=0;n<t;n++)e.add(this._geometries[n].reverse());return this.getFactory().buildGeometry(e)}},{key:"getTypeCode",value:function(){return V.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var t=Mt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t}},{key:"getLength",value:function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t}},{key:"getNumPoints",value:function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t}},{key:"getNumGeometries",value:function(){return this._geometries.length}},{key:"compareToSameClass",value:function(){if(1===arguments.length){var t=arguments[0],e=new Gt(At.asList(this._geometries)),n=new Gt(At.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var r=arguments[1],i=arguments[0],o=this.getNumGeometries(),s=i.getNumGeometries(),a=0;a<o&&a<s;){var u=this.getGeometryN(a),l=i.getGeometryN(a),h=u.compareToSameClass(l,r);if(0!==h)return h;a++}return a<o?1:a<s?-1:0}}},{key:"apply",value:function(){if(ot(arguments[0],bt))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(ot(arguments[0],Pt)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(ot(arguments[0],Lt)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(ot(arguments[0],E)){var s=arguments[0];s.filter(this);for(var a=0;a<this._geometries.length;a++)this._geometries[a].apply(s)}}},{key:"getBoundary",value:function(){return V.checkNotGeometryCollection(this),G.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return V.TYPENAME_GEOMETRYCOLLECTION}},{key:"isEmpty",value:function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0}}],[{key:"constructor_",value:function(){if(this._geometries=null,0===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];if(V.constructor_.call(this,e),null===t&&(t=[]),V.hasNullElements(t))throw new x("geometries must not contain null elements");this._geometries=t}}}]),s}(V),zt=function(e){r(s,e);var o=c(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:"copyInternal",value:function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new s(t,this._factory)}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof V){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&f(i(s.prototype),"equalsExact",this).call(this,t,e)}return f(i(s.prototype),"equalsExact",this).apply(this,arguments)}},{key:"getCoordinate",value:function(){if(1===arguments.length&&Number.isInteger(arguments[0])){var t=arguments[0];return this._geometries[t].getCoordinate()}return f(i(s.prototype),"getCoordinate",this).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return Mt.FALSE}},{key:"getTypeCode",value:function(){return V.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return V.TYPENAME_MULTIPOINT}},{key:"interfaces_",get:function(){return[Tt]}}],[{key:"constructor_",value:function(){var t=arguments[0],e=arguments[1];Yt.constructor_.call(this,t,e)}}]),s}(Yt),jt=function(e){r(s,e);var o=c(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:"copyInternal",value:function(){return new s(this._points.copy(),this._factory)}},{key:"getBoundaryDimension",value:function(){return Mt.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||f(i(s.prototype),"isClosed",this).call(this)}},{key:"reverseInternal",value:function(){var t=this._points.copy();return St.reverse(t),this.getFactory().createLinearRing(t)}},{key:"getTypeCode",value:function(){return V.TYPECODE_LINEARRING}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!f(i(s.prototype),"isClosed",this).call(this))throw new x("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<s.MINIMUM_VALID_SIZE)throw new x("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return V.TYPENAME_LINEARRING}}],[{key:"constructor_",value:function(){var t=arguments[0],e=arguments[1];Ct.constructor_.call(this,t,e),this.validateConstruction()}}]),s}(Ct);jt.MINIMUM_VALID_SIZE=4;var Xt=function(e){r(o,e);var i=c(o);function o(){var e;return t(this,o),e=i.call(this),o.constructor_.apply(l(e),arguments),e}return n(o,[{key:"setOrdinate",value:function(t,e){switch(t){case o.X:this.x=e;break;case o.Y:this.y=e;break;default:throw new x("Invalid ordinate index: "+t)}}},{key:"getZ",value:function(){return j.NULL_ORDINATE}},{key:"getOrdinate",value:function(t){switch(t){case o.X:return this.x;case o.Y:return this.y}throw new x("Invalid ordinate index: "+t)}},{key:"setZ",value:function(t){throw new x("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new o(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}}],[{key:"constructor_",value:function(){if(0===arguments.length)j.constructor_.call(this);else if(1===arguments.length){if(arguments[0]instanceof o){var t=arguments[0];j.constructor_.call(this,t.x,t.y)}else if(arguments[0]instanceof j){var e=arguments[0];j.constructor_.call(this,e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];j.constructor_.call(this,n,r,j.NULL_ORDINATE)}}}]),o}(j);Xt.X=0,Xt.Y=1,Xt.Z=-1,Xt.M=-1;var Ut=function(e){r(o,e);var i=c(o);function o(){var e;return t(this,o),e=i.call(this),o.constructor_.apply(l(e),arguments),e}return n(o,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(t,e){switch(t){case o.X:this.x=e;break;case o.Y:this.y=e;break;case o.M:this._m=e;break;default:throw new x("Invalid ordinate index: "+t)}}},{key:"setM",value:function(t){this._m=t}},{key:"getZ",value:function(){return j.NULL_ORDINATE}},{key:"getOrdinate",value:function(t){switch(t){case o.X:return this.x;case o.Y:return this.y;case o.M:return this._m}throw new x("Invalid ordinate index: "+t)}},{key:"setZ",value:function(t){throw new x("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new o(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ(),this._m=t.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,0===arguments.length)j.constructor_.call(this),this._m=0;else if(1===arguments.length){if(arguments[0]instanceof o){var t=arguments[0];j.constructor_.call(this,t.x,t.y),this._m=t._m}else if(arguments[0]instanceof j){var e=arguments[0];j.constructor_.call(this,e.x,e.y),this._m=this.getM()}}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];j.constructor_.call(this,n,r,j.NULL_ORDINATE),this._m=i}}}]),o}(j);Ut.X=0,Ut.Y=1,Ut.Z=-1,Ut.M=2;var Vt=function(e){r(o,e);var i=c(o);function o(){var e;return t(this,o),e=i.call(this),o.constructor_.apply(l(e),arguments),e}return n(o,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(t,e){switch(t){case j.X:this.x=e;break;case j.Y:this.y=e;break;case j.Z:this.z=e;break;case j.M:this._m=e;break;default:throw new x("Invalid ordinate index: "+t)}}},{key:"setM",value:function(t){this._m=t}},{key:"getOrdinate",value:function(t){switch(t){case j.X:return this.x;case j.Y:return this.y;case j.Z:return this.getZ();case j.M:return this.getM()}throw new x("Invalid ordinate index: "+t)}},{key:"copy",value:function(){return new o(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ(),this._m=t.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,0===arguments.length)j.constructor_.call(this),this._m=0;else if(1===arguments.length){if(arguments[0]instanceof o){var t=arguments[0];j.constructor_.call(this,t),this._m=t._m}else if(arguments[0]instanceof j){var e=arguments[0];j.constructor_.call(this,e),this._m=this.getM()}}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],s=arguments[3];j.constructor_.call(this,n,r,i),this._m=s}}}]),o}(j),Zt=function(){function e(){t(this,e)}return n(e,null,[{key:"measures",value:function(t){return t instanceof Xt?0:t instanceof Ut||t instanceof Vt?1:0}},{key:"dimension",value:function(t){return t instanceof Xt?2:t instanceof Ut?3:t instanceof Vt?4:3}},{key:"create",value:function(){if(1===arguments.length){var t=arguments[0];return e.create(t,0)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return 2===n?new Xt:3===n&&0===r?new j:3===n&&1===r?new Ut:4===n&&1===r?new Vt:new j}}}]),e}(),Ht=function(e){r(s,e);var o=c(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:"getCoordinate",value:function(t){return this.get(t)}},{key:"addAll",value:function(){if(2===arguments.length&&"boolean"==typeof arguments[1]&&ot(arguments[0],H)){for(var t=arguments[1],e=!1,n=arguments[0].iterator();n.hasNext();)this.add(n.next(),t),e=!0;return e}return f(i(s.prototype),"addAll",this).apply(this,arguments)}},{key:"clone",value:function(){for(var t=f(i(s.prototype),"clone",this).call(this),e=0;e<this.size();e++)t.add(e,this.get(e).clone());return t}},{key:"toCoordinateArray",value:function(){if(0===arguments.length)return this.toArray(s.coordArrayType);if(1===arguments.length){if(arguments[0])return this.toArray(s.coordArrayType);for(var t=this.size(),e=new Array(t).fill(null),n=0;n<t;n++)e[n]=this.get(t-n-1);return e}}},{key:"add",value:function(){if(1===arguments.length){var t=arguments[0];return f(i(s.prototype),"add",this).call(this,t)}if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var e=arguments[0],n=arguments[1];return this.add(e,n,!0),!0}if(arguments[0]instanceof j&&"boolean"==typeof arguments[1]){var r=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(r))return null;f(i(s.prototype),"add",this).call(this,r)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];return this.add(o,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var u=arguments[0],l=arguments[1];if(arguments[2])for(var h=0;h<u.length;h++)this.add(u[h],l);else for(var c=u.length-1;c>=0;c--)this.add(u[c],l);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof j){var g=arguments[0],v=arguments[1];if(!arguments[2]){var d=this.size();if(d>0){if(g>0&&this.get(g-1).equals2D(v))return null;if(g<d&&this.get(g).equals2D(v))return null}}f(i(s.prototype),"add",this).call(this,g,v)}}else if(4===arguments.length){var p=arguments[0],y=arguments[1],m=arguments[2],_=arguments[3],x=1;m>_&&(x=-1);for(var E=m;E!==_;E+=x)this.add(p[E],y);return!0}}},{key:"closeRing",value:function(){if(this.size()>0){var t=this.get(0).copy();this.add(t,!1)}}}],[{key:"constructor_",value:function(){if(0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.ensureCapacity(e.length),this.add(e,n)}}}]),s}(pt);Ht.coordArrayType=new Array(0).fill(null);var Wt=function(){function e(){t(this,e)}return n(e,null,[{key:"isRing",value:function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))}},{key:"ptNotInList",value:function(t,n){for(var r=0;r<t.length;r++){var i=t[r];if(e.indexOf(i,n)<0)return i}return null}},{key:"scroll",value:function(t,n){var r=e.indexOf(n,t);if(r<0)return null;var i=new Array(t.length).fill(null);xt.arraycopy(t,r,i,0,t.length-r),xt.arraycopy(t,0,i,t.length-r,r),xt.arraycopy(i,0,t,0,t.length)}},{key:"equals",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(0!==o.compare(r[s],i[s]))return!1;return!0}}},{key:"intersection",value:function(t,e){for(var n=new Ht,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()}},{key:"measures",value:function(t){if(null===t||0===t.length)return 0;var e,n=0,r=p(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;n=Math.max(n,Zt.measures(i))}}catch(t){r.e(t)}finally{r.f()}return n}},{key:"hasRepeatedPoints",value:function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(t){return e.hasRepeatedPoints(t)?new Ht(t,!1).toCoordinateArray():t}},{key:"reverse",value:function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}}},{key:"removeNull",value:function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r}},{key:"copyDeep",value:function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=t[n].copy();return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=0;u<a;u++)o[s+u]=r[i+u].copy()}},{key:"isEqualReversed",value:function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0}},{key:"envelope",value:function(t){for(var e=new U,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e}},{key:"toCoordinateArray",value:function(t){return t.toArray(e.coordArrayType)}},{key:"dimension",value:function(t){if(null===t||0===t.length)return 3;var e,n=0,r=p(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;n=Math.max(n,Zt.dimension(i))}}catch(t){r.e(t)}finally{r.f()}return n}},{key:"atLeastNCoordinatesOrNothing",value:function(t,e){return e.length>=t?e:[]}},{key:"indexOf",value:function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1}},{key:"increasingDirection",value:function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1}},{key:"compare",value:function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0}},{key:"minCoordinate",value:function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e}},{key:"extract",value:function(t,e,n){e=Et.clamp(e,0,t.length);var r=(n=Et.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,s=e;s<=n;s++)i[o++]=t[s];return i}}]),e}(),Jt=function(){function e(){t(this,e)}return n(e,[{key:"compare",value:function(t,e){var n=t,r=e;return Wt.compare(n,r)}},{key:"interfaces_",get:function(){return[D]}}]),e}(),Kt=function(){function e(){t(this,e)}return n(e,[{key:"compare",value:function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=Wt.compare(n,r);return Wt.isEqualReversed(n,r)?0:i}},{key:"OLDcompare",value:function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=Wt.increasingDirection(n),o=Wt.increasingDirection(r),s=i>0?0:n.length-1,a=o>0?0:n.length-1,u=0;u<n.length;u++){var l=n[s].compareTo(r[a]);if(0!==l)return l;s+=i,a+=o}return 0}},{key:"interfaces_",get:function(){return[D]}}]),e}();Wt.ForwardComparator=Jt,Wt.BidirectionalComparator=Kt,Wt.coordArrayType=new Array(0).fill(null);var Qt=function(){function e(n){t(this,e),this.str=n}return n(e,[{key:"append",value:function(t){this.str+=t}},{key:"setCharAt",value:function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)}},{key:"toString",value:function(){return this.str}}]),e}(),$t=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getM",value:function(t){return this.hasM()?this._coordinates[t].getM():A.NaN}},{key:"setOrdinate",value:function(t,e,n){switch(e){case ct.X:this._coordinates[t].x=n;break;case ct.Y:this._coordinates[t].y=n;break;default:this._coordinates[t].setOrdinate(e,n)}}},{key:"getZ",value:function(t){return this.hasZ()?this._coordinates[t].getZ():A.NaN}},{key:"size",value:function(){return this._coordinates.length}},{key:"getOrdinate",value:function(t,e){switch(e){case ct.X:return this._coordinates[t].x;case ct.Y:return this._coordinates[t].y;default:return this._coordinates[t].getOrdinate(e)}}},{key:"getCoordinate",value:function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0];arguments[1].setCoordinate(this._coordinates[e])}}},{key:"getCoordinateCopy",value:function(t){var e=this.createCoordinate();return e.setCoordinate(this._coordinates[t]),e}},{key:"createCoordinate",value:function(){return Zt.create(this.getDimension(),this.getMeasures())}},{key:"getDimension",value:function(){return this._dimension}},{key:"getX",value:function(t){return this._coordinates[t].x}},{key:"getMeasures",value:function(){return this._measures}},{key:"expandEnvelope",value:function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t}},{key:"copy",value:function(){for(var t=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++){var r=this.createCoordinate();r.setCoordinate(this._coordinates[n]),t[n]=r}return new e(t,this._dimension,this._measures)}},{key:"toString",value:function(){if(this._coordinates.length>0){var t=new Qt(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"}},{key:"getY",value:function(t){return this._coordinates[t].y}},{key:"toCoordinateArray",value:function(){return this._coordinates}},{key:"interfaces_",get:function(){return[ct,b]}}],[{key:"constructor_",value:function(){if(this._dimension=3,this._measures=0,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];e.constructor_.call(this,t,Wt.dimension(t),Wt.measures(t))}else if(Number.isInteger(arguments[0])){var n=arguments[0];this._coordinates=new Array(n).fill(null);for(var r=0;r<n;r++)this._coordinates[r]=new j}else if(ot(arguments[0],ct)){var i=arguments[0];if(null===i)return this._coordinates=new Array(0).fill(null),null;this._dimension=i.getDimension(),this._measures=i.getMeasures(),this._coordinates=new Array(i.size()).fill(null);for(var o=0;o<this._coordinates.length;o++)this._coordinates[o]=i.getCoordinateCopy(o)}}else if(2===arguments.length){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var s=arguments[0],a=arguments[1];e.constructor_.call(this,s,a,Wt.measures(s))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var u=arguments[0],l=arguments[1];this._coordinates=new Array(u).fill(null),this._dimension=l;for(var h=0;h<u;h++)this._coordinates[h]=Zt.create(l)}}else if(3===arguments.length)if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var c=arguments[0],f=arguments[1],g=arguments[2];this._dimension=f,this._measures=g,this._coordinates=null===c?new Array(0).fill(null):c}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var v=arguments[0],d=arguments[1],p=arguments[2];this._coordinates=new Array(v).fill(null),this._dimension=d,this._measures=p;for(var y=0;y<v;y++)this._coordinates[y]=this.createCoordinate()}}}]),e}(),te=function(){function e(){t(this,e)}return n(e,[{key:"readResolve",value:function(){return e.instance()}},{key:"create",value:function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new $t(arguments[0]);if(ot(arguments[0],ct))return new $t(arguments[0])}else{if(2===arguments.length){var t=arguments[1];return t>3&&(t=3),t<2&&(t=2),new $t(arguments[0],t)}if(3===arguments.length){var e=arguments[2],n=arguments[1]-e;return e>1&&(e=1),n>3&&(n=3),n<2&&(n=2),new $t(arguments[0],n+e,e)}}}},{key:"interfaces_",get:function(){return[wt,b]}}],[{key:"instance",value:function(){return e.instanceObject}}]),e}();te.instanceObject=new te;var ee=function(e){r(s,e);var o=c(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:"copyInternal",value:function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new s(t,this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof V){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&f(i(s.prototype),"equalsExact",this).call(this,t,e)}return f(i(s.prototype),"equalsExact",this).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return V.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new pt,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))}},{key:"getGeometryType",value:function(){return V.TYPENAME_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[Dt]}}],[{key:"constructor_",value:function(){var t=arguments[0],e=arguments[1];Yt.constructor_.call(this,t,e)}}]),s}(Yt),ne=function(){function e(){t(this,e)}return n(e,[{key:"get",value:function(){}},{key:"put",value:function(){}},{key:"size",value:function(){}},{key:"values",value:function(){}},{key:"entrySet",value:function(){}}]),e}(),re=function(e){r(o,e);var i=c(o);function o(){var e;return t(this,o),(e=i.call(this)).map=new Map,e}return n(o,[{key:"get",value:function(t){return this.map.get(t)||null}},{key:"put",value:function(t,e){return this.map.set(t,e),e}},{key:"values",value:function(){for(var t=new pt,e=this.map.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t}},{key:"entrySet",value:function(){var t=new Q;return this.map.entries().forEach((function(e){return t.add(e)})),t}},{key:"size",value:function(){return this.map.size()}}]),o}(ne),ie=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"equals",value:function(t){if(!(t instanceof e))return!1;var n=t;return this._modelType===n._modelType&&this._scale===n._scale}},{key:"compareTo",value:function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return at.compare(n,r)}},{key:"getScale",value:function(){return this._scale}},{key:"isFloating",value:function(){return this._modelType===e.FLOATING||this._modelType===e.FLOATING_SINGLE}},{key:"getType",value:function(){return this._modelType}},{key:"toString",value:function(){var t="UNKNOWN";return this._modelType===e.FLOATING?t="Floating":this._modelType===e.FLOATING_SINGLE?t="Floating-Single":this._modelType===e.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t}},{key:"makePrecise",value:function(){if("number"==typeof arguments[0]){var t=arguments[0];return A.isNaN(t)||this._modelType===e.FLOATING_SINGLE?t:this._modelType===e.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof j){var n=arguments[0];if(this._modelType===e.FLOATING)return null;n.x=this.makePrecise(n.x),n.y=this.makePrecise(n.y)}}},{key:"getMaximumSignificantDigits",value:function(){var t=16;return this._modelType===e.FLOATING?t=16:this._modelType===e.FLOATING_SINGLE?t=6:this._modelType===e.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t}},{key:"setScale",value:function(t){this._scale=Math.abs(t)}},{key:"interfaces_",get:function(){return[b,k]}}],[{key:"constructor_",value:function(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=e.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof oe){var t=arguments[0];this._modelType=t,t===e.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=e.FIXED,this.setScale(n)}else if(arguments[0]instanceof e){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}}},{key:"mostPrecise",value:function(t,e){return t.compareTo(e)>=0?t:e}}]),e}(),oe=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"readResolve",value:function(){return e.nameToTypeMap.get(this._name)}},{key:"toString",value:function(){return this._name}},{key:"interfaces_",get:function(){return[b]}}],[{key:"constructor_",value:function(){this._name=null;var t=arguments[0];this._name=t,e.nameToTypeMap.put(t,this)}}]),e}();oe.nameToTypeMap=new re,ie.Type=oe,ie.FIXED=new oe("FIXED"),ie.FLOATING=new oe("FLOATING"),ie.FLOATING_SINGLE=new oe("FLOATING SINGLE"),ie.maximumPreciseValue=9007199254740992;var se=function(e){r(s,e);var o=c(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:"copyInternal",value:function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new s(t,this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof V){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&f(i(s.prototype),"equalsExact",this).call(this,t,e)}return f(i(s.prototype),"equalsExact",this).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?Mt.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return V.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getBoundary",value:function(){throw new J}},{key:"getGeometryType",value:function(){return V.TYPENAME_MULTILINESTRING}},{key:"interfaces_",get:function(){return[Nt]}}],[{key:"constructor_",value:function(){var t=arguments[0],e=arguments[1];Yt.constructor_.call(this,t,e)}}]),s}(Yt),ae=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"createEmpty",value:function(t){switch(t){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new x("Invalid dimension: "+t)}}},{key:"toGeometry",value:function(t){return t.isNull()?this.createPoint():t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new j(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new j(t.getMinX(),t.getMinY()),new j(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new j(t.getMinX(),t.getMinY()),new j(t.getMinX(),t.getMaxY()),new j(t.getMaxX(),t.getMaxY()),new j(t.getMaxX(),t.getMinY()),new j(t.getMinX(),t.getMinY())]),null)}},{key:"createLineString",value:function(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(ot(arguments[0],ct))return new Ct(arguments[0],this)}}},{key:"createMultiLineString",value:function(){return 0===arguments.length?new se(null,this):1===arguments.length?new se(arguments[0],this):void 0}},{key:"buildGeometry",value:function(t){for(var n=null,r=!1,i=!1,o=t.iterator();o.hasNext();){var s=o.next(),a=s.getTypeCode();null===n&&(n=a),a!==n&&(r=!0),s instanceof Yt&&(i=!0)}if(null===n)return this.createGeometryCollection();if(r||i)return this.createGeometryCollection(e.toGeometryArray(t));var u=t.iterator().next();if(t.size()>1){if(u instanceof Ft)return this.createMultiPolygon(e.toPolygonArray(t));if(u instanceof Ct)return this.createMultiLineString(e.toLineStringArray(t));if(u instanceof Ot)return this.createMultiPoint(e.toPointArray(t));G.shouldNeverReachHere("Unhandled geometry type: "+u.getGeometryType())}return u}},{key:"createMultiPointFromCoords",value:function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}},{key:"createPoint",value:function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof j){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(ot(arguments[0],ct))return new Ot(arguments[0],this)}}},{key:"getCoordinateSequenceFactory",value:function(){return this._coordinateSequenceFactory}},{key:"createPolygon",value:function(){if(0===arguments.length)return this.createPolygon(null,null);if(1===arguments.length){if(ot(arguments[0],ct)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof jt){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length)return new Ft(arguments[0],arguments[1],this)}},{key:"getSRID",value:function(){return this._SRID}},{key:"createGeometryCollection",value:function(){return 0===arguments.length?new Yt(null,this):1===arguments.length?new Yt(arguments[0],this):void 0}},{key:"getPrecisionModel",value:function(){return this._precisionModel}},{key:"createLinearRing",value:function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(ot(arguments[0],ct))return new jt(arguments[0],this)}}},{key:"createMultiPolygon",value:function(){return 0===arguments.length?new ee(null,this):1===arguments.length?new ee(arguments[0],this):void 0}},{key:"createMultiPoint",value:function(){if(0===arguments.length)return new zt(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new zt(arguments[0],this);if(ot(arguments[0],ct)){var t=arguments[0];if(null===t)return this.createMultiPoint(new Array(0).fill(null));for(var e=new Array(t.size()).fill(null),n=0;n<t.size();n++){var r=this.getCoordinateSequenceFactory().create(1,t.getDimension(),t.getMeasures());St.copy(t,n,r,0,1),e[n]=this.createPoint(r)}return this.createMultiPoint(e)}}}},{key:"interfaces_",get:function(){return[b]}}],[{key:"constructor_",value:function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,0===arguments.length)e.constructor_.call(this,new ie,0);else if(1===arguments.length){if(ot(arguments[0],wt)){var t=arguments[0];e.constructor_.call(this,new ie,0,t)}else if(arguments[0]instanceof ie){var n=arguments[0];e.constructor_.call(this,n,0,e.getDefaultCoordinateSequenceFactory())}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];e.constructor_.call(this,r,i,e.getDefaultCoordinateSequenceFactory())}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this._precisionModel=o,this._coordinateSequenceFactory=a,this._SRID=s}}},{key:"toMultiPolygonArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toGeometryArray",value:function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return te.instance()}},{key:"toMultiLineStringArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toLineStringArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toMultiPointArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toLinearRingArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toPointArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toPolygonArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"createPointFromInternalCoord",value:function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)}}]),e}(),ue="XY",le="XYZ",he="XYM",ce="XYZM",fe={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},ge="EMPTY",ve=1,de=2,pe=3,ye=4,me=5,_e=6;for(var xe in fe)fe[xe].toUpperCase();var Ee=function(){function e(n){t(this,e),this.wkt=n,this.index_=-1}return n(e,[{key:"isAlpha_",value:function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"}},{key:"isNumeric_",value:function(t,e){return t>="0"&&t<="9"||"."==t&&!(void 0!==e&&e)}},{key:"isWhiteSpace_",value:function(t){return" "==t||"\t"==t||"\r"==t||"\n"==t}},{key:"nextChar_",value:function(){return this.wkt.charAt(++this.index_)}},{key:"nextToken",value:function(){var t,e=this.nextChar_(),n=this.index_,r=e;if("("==e)t=de;else if(","==e)t=me;else if(")"==e)t=pe;else if(this.isNumeric_(e)||"-"==e)t=ye,r=this.readNumber_();else if(this.isAlpha_(e))t=ve,r=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(""!==e)throw new Error("Unexpected character: "+e);t=_e}return{position:n,value:r,type:t}}},{key:"readNumber_",value:function(){var t,e=this.index_,n=!1,r=!1;do{"."==t?n=!0:"e"!=t&&"E"!=t||(r=!0),t=this.nextChar_()}while(this.isNumeric_(t,n)||!r&&("e"==t||"E"==t)||r&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(e,this.index_--))}},{key:"readText_",value:function(){var t,e=this.index_;do{t=this.nextChar_()}while(this.isAlpha_(t));return this.wkt.substring(e,this.index_--).toUpperCase()}}]),e}(),ke=function(){function e(n,r){t(this,e),this.lexer_=n,this.token_,this.layout_=ue,this.factory=r}return n(e,[{key:"consume_",value:function(){this.token_=this.lexer_.nextToken()}},{key:"isTokenType",value:function(t){return this.token_.type==t}},{key:"match",value:function(t){var e=this.isTokenType(t);return e&&this.consume_(),e}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var t=ue,e=this.token_;if(this.isTokenType(ve)){var n=e.value;"Z"===n?t=le:"M"===n?t=he:"ZM"===n&&(t=ce),t!==ue&&this.consume_()}return t}},{key:"parseGeometryCollectionText_",value:function(){if(this.match(de)){var t=[];do{t.push(this.parseGeometry_())}while(this.match(me));if(this.match(pe))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match(de)){var t=this.parsePoint_();if(this.match(pe))return t}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match(de)){var t=this.parsePointList_();if(this.match(pe))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match(de)){var t=this.parseLineStringTextList_();if(this.match(pe))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var t;if(this.match(de)){if(t=this.token_.type==de?this.parsePointTextList_():this.parsePointList_(),this.match(pe))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match(de)){var t=this.parseLineStringTextList_();if(this.match(pe))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match(de)){var t=this.parsePolygonTextList_();if(this.match(pe))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var t=[],e=this.layout_.length,n=0;n<e;++n){var r=this.token_;if(!this.match(ye))break;t.push(r.value)}if(t.length==e)return t;throw new Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var t=[this.parsePoint_()];this.match(me);)t.push(this.parsePoint_());return t}},{key:"parsePointTextList_",value:function(){for(var t=[this.parsePointText_()];this.match(me);)t.push(this.parsePointText_());return t}},{key:"parseLineStringTextList_",value:function(){for(var t=[this.parseLineStringText_()];this.match(me);)t.push(this.parseLineStringText_());return t}},{key:"parsePolygonTextList_",value:function(){for(var t=[this.parsePolygonText_()];this.match(me);)t.push(this.parsePolygonText_());return t}},{key:"isEmptyGeometry_",value:function(){var t=this.isTokenType(ve)&&this.token_.value==ge;return t&&this.consume_(),t}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var t=this.factory,e=function(t){return a(j,g(t))},n=function(n){var r=n.map((function(n){return t.createLinearRing(n.map(e))}));return r.length>1?t.createPolygon(r[0],r.slice(1)):t.createPolygon(r[0])},r=this.token_;if(this.match(ve)){var i=r.value;if(this.layout_=this.parseGeometryLayout_(),"GEOMETRYCOLLECTION"==i){var o=this.parseGeometryCollectionText_();return t.createGeometryCollection(o)}switch(i){case"POINT":var s=this.parsePointText_();return s?t.createPoint(a(j,g(s))):t.createPoint();case"LINESTRING":var u=this.parseLineStringText_().map(e);return t.createLineString(u);case"LINEARRING":var l=this.parseLineStringText_().map(e);return t.createLinearRing(l);case"POLYGON":var h=this.parsePolygonText_();return h&&0!==h.length?n(h):t.createPolygon();case"MULTIPOINT":var c=this.parseMultiPointText_();if(!c||0===c.length)return t.createMultiPoint();var f=c.map(e).map((function(e){return t.createPoint(e)}));return t.createMultiPoint(f);case"MULTILINESTRING":var v=this.parseMultiLineStringText_().map((function(n){return t.createLineString(n.map(e))}));return t.createMultiLineString(v);case"MULTIPOLYGON":var d=this.parseMultiPolygonText_();if(!d||0===d.length)return t.createMultiPolygon();var p=d.map(n);return t.createMultiPolygon(p);default:throw new Error("Invalid geometry type: "+i)}}throw new Error(this.formatErrorMessage_())}}]),e}();function we(t){if(t.isEmpty())return"";var e=t.getCoordinate(),n=[e.x,e.y];return void 0===e.z||Number.isNaN(e.z)||n.push(e.z),void 0===e.m||Number.isNaN(e.m)||n.push(e.m),n.join(" ")}function be(t){for(var e=t.getCoordinates().map((function(t){var e=[t.x,t.y];return void 0===t.z||Number.isNaN(t.z)||e.push(t.z),void 0===t.m||Number.isNaN(t.m)||e.push(t.m),e})),n=[],r=0,i=e.length;r<i;++r)n.push(e[r].join(" "));return n.join(", ")}function Ie(t){var e=[];e.push("("+be(t.getExteriorRing())+")");for(var n=0,r=t.getNumInteriorRing();n<r;++n)e.push("("+be(t.getInteriorRingN(n))+")");return e.join(", ")}var Ne={Point:we,LineString:be,LinearRing:be,Polygon:Ie,MultiPoint:function(t){for(var e=[],n=0,r=t.getNumGeometries();n<r;++n)e.push("("+we(t.getGeometryN(n))+")");return e.join(", ")},MultiLineString:function(t){for(var e=[],n=0,r=t.getNumGeometries();n<r;++n)e.push("("+be(t.getGeometryN(n))+")");return e.join(", ")},MultiPolygon:function(t){for(var e=[],n=0,r=t.getNumGeometries();n<r;++n)e.push("("+Ie(t.getGeometryN(n))+")");return e.join(", ")},GeometryCollection:function(t){for(var e=[],n=0,r=t.getNumGeometries();n<r;++n)e.push(Se(t.getGeometryN(n)));return e.join(", ")}};function Se(t){var e=t.getGeometryType(),n=Ne[e];e=e.toUpperCase();var r=function(t){var e="";if(t.isEmpty())return e;var n=t.getCoordinate();return void 0===n.z||Number.isNaN(n.z)||(e+="Z"),void 0===n.m||Number.isNaN(n.m)||(e+="M"),e}(t);return r.length>0&&(e+=" "+r),t.isEmpty()?e+" "+ge:e+" ("+n(t)+")"}var Me=function(){function e(n){t(this,e),this.geometryFactory=n||new ae,this.precisionModel=this.geometryFactory.getPrecisionModel()}return n(e,[{key:"read",value:function(t){var e=new Ee(t);return new ke(e,this.geometryFactory).parse()}},{key:"write",value:function(t){return Se(t)}}]),e}(),Le=function(){function e(n){t(this,e),this.parser=new Me(n)}return n(e,[{key:"write",value:function(t){return this.parser.write(t)}}],[{key:"toLineString",value:function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"}}]),e}(),Pe=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getIndexAlongSegment",value:function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]}},{key:"getTopologySummary",value:function(){var t=new Qt;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()}},{key:"computeIntersection",value:function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)}},{key:"getIntersectionNum",value:function(){return this._result}},{key:"computeIntLineIndex",value:function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(t){this._precisionModel=t}},{key:"isInteriorIntersection",value:function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}}},{key:"getIntersection",value:function(t){return this._intPt[t]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this._result!==e.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(t,n){return e.computeEdgeDistance(this._intPt[n],this._inputLines[t][0],this._inputLines[t][1])}},{key:"isCollinear",value:function(){return this._result===e.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return Le.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Le.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(t,e){return this._inputLines[t][e]}},{key:"isIntersection",value:function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]}}],[{key:"constructor_",value:function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new j,this._intPt[1]=new j,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}},{key:"computeEdgeDistance",value:function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=r>i?s:a)||t.equals(e)||(o=Math.max(s,a))}return G.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o}},{key:"nonRobustComputeEdgeDistance",value:function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return G.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o}}]),e}();Pe.DONT_INTERSECT=0,Pe.DO_INTERSECT=1,Pe.COLLINEAR=2,Pe.NO_INTERSECTION=0,Pe.POINT_INTERSECTION=1,Pe.COLLINEAR_INTERSECTION=2;var Ce=function(e){r(s,e);var o=c(s);function s(){return t(this,s),o.call(this)}return n(s,[{key:"isInSegmentEnvelopes",value:function(t){var e=new U(this._inputLines[0][0],this._inputLines[0][1]),n=new U(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)}},{key:"computeIntersection",value:function(){if(3!==arguments.length)return f(i(s.prototype),"computeIntersection",this).apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2];if(this._isProper=!1,U.intersects(e,n,t)&&0===ft.index(e,n,t)&&0===ft.index(n,e,t))return this._isProper=!0,(t.equals(e)||t.equals(n))&&(this._isProper=!1),this._result=Pe.POINT_INTERSECTION,null;this._result=Pe.NO_INTERSECTION}},{key:"intersection",value:function(t,e,n,r){var i=this.intersectionSafe(t,e,n,r);return this.isInSegmentEnvelopes(i)||(i=new j(s.nearestEndpoint(t,e,n,r))),null!==this._precisionModel&&this._precisionModel.makePrecise(i),i}},{key:"checkDD",value:function(t,e,n,r,i){var o=ht.intersection(t,e,n,r),s=this.isInSegmentEnvelopes(o);xt.out.println("DD in env = "+s+"  --------------------- "+o),i.distance(o)>1e-4&&xt.out.println("Distance = "+i.distance(o))}},{key:"intersectionSafe",value:function(t,e,n,r){var i=_t.intersection(t,e,n,r);return null===i&&(i=s.nearestEndpoint(t,e,n,r)),i}},{key:"computeCollinearIntersection",value:function(t,e,n,r){var i=U.intersects(t,e,n),o=U.intersects(t,e,r),s=U.intersects(n,r,t),a=U.intersects(n,r,e);return i&&o?(this._intPt[0]=n,this._intPt[1]=r,Pe.COLLINEAR_INTERSECTION):s&&a?(this._intPt[0]=t,this._intPt[1]=e,Pe.COLLINEAR_INTERSECTION):i&&s?(this._intPt[0]=n,this._intPt[1]=t,!n.equals(t)||o||a?Pe.COLLINEAR_INTERSECTION:Pe.POINT_INTERSECTION):i&&a?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||o||s?Pe.COLLINEAR_INTERSECTION:Pe.POINT_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=t,!r.equals(t)||i||a?Pe.COLLINEAR_INTERSECTION:Pe.POINT_INTERSECTION):o&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||i||s?Pe.COLLINEAR_INTERSECTION:Pe.POINT_INTERSECTION):Pe.NO_INTERSECTION}},{key:"computeIntersect",value:function(t,e,n,r){if(this._isProper=!1,!U.intersects(t,e,n,r))return Pe.NO_INTERSECTION;var i=ft.index(t,e,n),o=ft.index(t,e,r);if(i>0&&o>0||i<0&&o<0)return Pe.NO_INTERSECTION;var s=ft.index(n,r,t),a=ft.index(n,r,e);return s>0&&a>0||s<0&&a<0?Pe.NO_INTERSECTION:0===i&&0===o&&0===s&&0===a?this.computeCollinearIntersection(t,e,n,r):(0===i||0===o||0===s||0===a?(this._isProper=!1,t.equals2D(n)||t.equals2D(r)?this._intPt[0]=t:e.equals2D(n)||e.equals2D(r)?this._intPt[0]=e:0===i?this._intPt[0]=new j(n):0===o?this._intPt[0]=new j(r):0===s?this._intPt[0]=new j(t):0===a&&(this._intPt[0]=new j(e))):(this._isProper=!0,this._intPt[0]=this.intersection(t,e,n,r)),Pe.POINT_INTERSECTION)}}],[{key:"nearestEndpoint",value:function(t,e,n,r){var i=t,o=kt.pointToSegment(t,n,r),s=kt.pointToSegment(e,n,r);return s<o&&(o=s,i=e),(s=kt.pointToSegment(n,t,e))<o&&(o=s,i=n),(s=kt.pointToSegment(r,t,e))<o&&(o=s,i=r),i}}]),s}(Pe),Te=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"countSegment",value:function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=ft.index(t,e,this._p);if(i===ft.COLLINEAR)return this._isPointOnSegment=!0,null;e.y<t.y&&(i=-i),i===ft.LEFT&&this._crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==Z.EXTERIOR}},{key:"getLocation",value:function(){return this._isPointOnSegment?Z.BOUNDARY:this._crossingCount%2==1?Z.INTERIOR:Z.EXTERIOR}},{key:"isOnSegment",value:function(){return this._isPointOnSegment}}],[{key:"constructor_",value:function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t}},{key:"locatePointInRing",value:function(){if(arguments[0]instanceof j&&ot(arguments[1],ct)){for(var t=arguments[1],n=new e(arguments[0]),r=new j,i=new j,o=1;o<t.size();o++)if(t.getCoordinate(o,r),t.getCoordinate(o-1,i),n.countSegment(r,i),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof j&&arguments[1]instanceof Array){for(var s=arguments[1],a=new e(arguments[0]),u=1;u<s.length;u++){var l=s[u],h=s[u-1];if(a.countSegment(l,h),a.isOnSegment())return a.getLocation()}return a.getLocation()}}}]),e}(),Oe=function(){function e(){t(this,e)}return n(e,null,[{key:"isOnLine",value:function(){if(arguments[0]instanceof j&&ot(arguments[1],ct)){for(var t=arguments[0],e=arguments[1],n=new Ce,r=new j,i=new j,o=e.size(),s=1;s<o;s++)if(e.getCoordinate(s-1,r),e.getCoordinate(s,i),n.computeIntersection(t,r,i),n.hasIntersection())return!0;return!1}if(arguments[0]instanceof j&&arguments[1]instanceof Array){for(var a=arguments[0],u=arguments[1],l=new Ce,h=1;h<u.length;h++){var c=u[h-1],f=u[h];if(l.computeIntersection(a,c,f),l.hasIntersection())return!0}return!1}}},{key:"locateInRing",value:function(t,e){return Te.locatePointInRing(t,e)}},{key:"isInRing",value:function(t,n){return e.locateInRing(t,n)!==Z.EXTERIOR}}]),e}(),Re=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"setAllLocations",value:function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t}},{key:"isNull",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==Z.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(t){for(var e=0;e<this.location.length;e++)this.location[e]===Z.NONE&&(this.location[e]=t)}},{key:"isLine",value:function(){return 1===this.location.length}},{key:"merge",value:function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[tt.ON]=this.location[tt.ON],e[tt.LEFT]=Z.NONE,e[tt.RIGHT]=Z.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===Z.NONE&&n<t.location.length&&(this.location[n]=t.location[n])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var t=this.location[tt.LEFT];this.location[tt.LEFT]=this.location[tt.RIGHT],this.location[tt.RIGHT]=t}},{key:"toString",value:function(){var t=new st;return this.location.length>1&&t.append(Z.toLocationSymbol(this.location[tt.LEFT])),t.append(Z.toLocationSymbol(this.location[tt.ON])),this.location.length>1&&t.append(Z.toLocationSymbol(this.location[tt.RIGHT])),t.toString()}},{key:"setLocations",value:function(t,e,n){this.location[tt.ON]=t,this.location[tt.LEFT]=e,this.location[tt.RIGHT]=n}},{key:"get",value:function(t){return t<this.location.length?this.location[t]:Z.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===Z.NONE)return!0;return!1}},{key:"setLocation",value:function(){if(1===arguments.length){var t=arguments[0];this.setLocation(tt.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}}},{key:"init",value:function(t){this.location=new Array(t).fill(null),this.setAllLocations(Z.NONE)}},{key:"isEqualOnSide",value:function(t,e){return this.location[e]===t.location[e]}},{key:"allPositionsEqual",value:function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0}}],[{key:"constructor_",value:function(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[tt.ON]=n}else if(arguments[0]instanceof e){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)this.location[i]=r.location[i]}}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.init(3),this.location[tt.ON]=o,this.location[tt.LEFT]=s,this.location[tt.RIGHT]=a}}}]),e}(),Ae=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getGeometryCount",value:function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t}},{key:"setAllLocations",value:function(t,e){this.elt[t].setAllLocations(e)}},{key:"isNull",value:function(t){return this.elt[t].isNull()}},{key:"setAllLocationsIfNull",value:function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}}},{key:"isLine",value:function(t){return this.elt[t].isLine()}},{key:"merge",value:function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Re(t.elt[e]):this.elt[e].merge(t.elt[e])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(tt.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}}},{key:"toString",value:function(){var t=new st;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()}},{key:"isArea",value:function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}}},{key:"isAnyNull",value:function(t){return this.elt[t].isAnyNull()}},{key:"setLocation",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(tt.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}}},{key:"isEqualOnSide",value:function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)}},{key:"allPositionsEqual",value:function(t,e){return this.elt[t].allPositionsEqual(e)}},{key:"toLine",value:function(t){this.elt[t].isArea()&&(this.elt[t]=new Re(this.elt[t].location[0]))}}],[{key:"constructor_",value:function(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new Re(t),this.elt[1]=new Re(t)}else if(arguments[0]instanceof e){var n=arguments[0];this.elt[0]=new Re(n.elt[0]),this.elt[1]=new Re(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new Re(Z.NONE),this.elt[1]=new Re(Z.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new Re(o,s,a),this.elt[1]=new Re(o,s,a)}else if(4===arguments.length){var u=arguments[0],l=arguments[1],h=arguments[2],c=arguments[3];this.elt[0]=new Re(Z.NONE,Z.NONE,Z.NONE),this.elt[1]=new Re(Z.NONE,Z.NONE,Z.NONE),this.elt[u].setLocations(l,h,c)}}},{key:"toLineLabel",value:function(t){for(var n=new e(Z.NONE),r=0;r<2;r++)n.setLocation(r,t.getLocation(r));return n}}]),e}(),De=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"computeRing",value:function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=ft.isCCW(this._ring.getCoordinates())}},{key:"isIsolated",value:function(){return 1===this._label.getGeometryCount()}},{key:"computePoints",value:function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new vt("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new vt("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();G.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)}},{key:"getLinearRing",value:function(){return this._ring}},{key:"getCoordinate",value:function(t){return this._pts.get(t)}},{key:"computeMaxNodeDegree",value:function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2}},{key:"addPoints",value:function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var s=r.length-2;n&&(s=r.length-1);for(var a=s;a>=0;a--)this._pts.add(r[a])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)}},{key:"containsPoint",value:function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!Oe.isInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0}},{key:"addHole",value:function(t){this._holes.add(t)}},{key:"isShell",value:function(){return null===this._shell}},{key:"getLabel",value:function(){return this._label}},{key:"getEdges",value:function(){return this._edges}},{key:"getMaxNodeDegree",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:"getShell",value:function(){return this._shell}},{key:"mergeLabel",value:function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,tt.RIGHT);if(n===Z.NONE)return null;if(this._label.getLocation(e)===Z.NONE)return this._label.setLocation(e,n),null}}},{key:"setShell",value:function(t){this._shell=t,null!==t&&t.addHole(this)}},{key:"toPolygon",value:function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)}}],[{key:"constructor_",value:function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new pt,this._pts=new pt,this._label=new Ae(Z.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new pt,this._geometryFactory=null,0===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()}}}]),e}(),Fe=function(e){r(o,e);var i=c(o);function o(){var e;return t(this,o),e=i.call(this),o.constructor_.apply(l(e),arguments),e}return n(o,[{key:"setEdgeRing",value:function(t,e){t.setMinEdgeRing(e)}},{key:"getNext",value:function(t){return t.getNextMin()}}],[{key:"constructor_",value:function(){var t=arguments[0],e=arguments[1];De.constructor_.call(this,t,e)}}]),o}(De),qe=function(e){r(o,e);var i=c(o);function o(){var e;return t(this,o),e=i.call(this),o.constructor_.apply(l(e),arguments),e}return n(o,[{key:"buildMinimalRings",value:function(){var t=new pt,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new Fe(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t}},{key:"setEdgeRing",value:function(t,e){t.setEdgeRing(e)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)}},{key:"getNext",value:function(t){return t.getNext()}}],[{key:"constructor_",value:function(){var t=arguments[0],e=arguments[1];De.constructor_.call(this,t,e)}}]),o}(De),Ge=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"setVisited",value:function(t){this._isVisited=t}},{key:"setInResult",value:function(t){this._isInResult=t}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(t){this._label=t}},{key:"getLabel",value:function(){return this._label}},{key:"setCovered",value:function(t){this._isCovered=t,this._isCoveredSet=!0}},{key:"updateIM",value:function(t){G.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}}}]),e}(),Be=function(e){r(s,e);var o=c(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:"isIncidentEdgeInResult",value:function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return 1===this._label.getGeometryCount()}},{key:"getCoordinate",value:function(){return this._coord}},{key:"print",value:function(t){t.println("node "+this._coord+" lbl: "+this._label)}},{key:"computeIM",value:function(t){}},{key:"computeMergedLocation",value:function(t,e){var n=Z.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==Z.BOUNDARY&&(n=r)}return n}},{key:"setLabel",value:function(){if(2!==arguments.length||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return f(i(s.prototype),"setLabel",this).apply(this,arguments);var t=arguments[0],e=arguments[1];null===this._label?this._label=new Ae(t,e):this._label.setLocation(t,e)}},{key:"getEdges",value:function(){return this._edges}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof s){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Ae)for(var e=arguments[0],n=0;n<2;n++){var r=this.computeMergedLocation(e,n);this._label.getLocation(n)===Z.NONE&&this._label.setLocation(n,r)}}},{key:"add",value:function(t){this._edges.insert(t),t.setNode(this)}},{key:"setLabelBoundary",value:function(t){if(null===this._label)return null;var e=Z.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case Z.BOUNDARY:n=Z.INTERIOR;break;case Z.INTERIOR:default:n=Z.BOUNDARY}this._label.setLocation(t,n)}}],[{key:"constructor_",value:function(){this._coord=null,this._edges=null;var t=arguments[0],e=arguments[1];this._coord=t,this._edges=e,this._label=new Ae(0,Z.NONE)}}]),s}(Ge),Ye=function(e){r(i,e);var n=c(i);function i(){return t(this,i),n.apply(this,arguments)}return i}(ne);function ze(t){return null==t?0:t.color}function je(t){return null==t?null:t.parent}function Xe(t,e){null!==t&&(t.color=e)}function Ue(t){return null==t?null:t.left}function Ve(t){return null==t?null:t.right}var Ze=function(e){r(o,e);var i=c(o);function o(){var e;return t(this,o),(e=i.call(this)).root_=null,e.size_=0,e}return n(o,[{key:"get",value:function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null}},{key:"put",value:function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var s={key:t,left:null,right:null,value:e,parent:n,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null}},{key:"fixAfterInsertion",value:function(t){var e;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)je(t)===Ue(je(je(t)))?1===ze(e=Ve(je(je(t))))?(Xe(je(t),0),Xe(e,0),Xe(je(je(t)),1),t=je(je(t))):(t===Ve(je(t))&&(t=je(t),this.rotateLeft(t)),Xe(je(t),0),Xe(je(je(t)),1),this.rotateRight(je(je(t)))):1===ze(e=Ue(je(je(t))))?(Xe(je(t),0),Xe(e,0),Xe(je(je(t)),1),t=je(je(t))):(t===Ue(je(t))&&(t=je(t),this.rotateRight(t)),Xe(je(t),0),Xe(je(je(t)),1),this.rotateLeft(je(je(t))));this.root_.color=0}},{key:"values",value:function(){var t=new pt,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=o.successor(e));)t.add(e.value);return t}},{key:"entrySet",value:function(){var t=new Q,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=o.successor(e));)t.add(e);return t}},{key:"rotateLeft",value:function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}}},{key:"rotateRight",value:function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}}},{key:"getFirstEntry",value:function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t}},{key:"size",value:function(){return this.size_}},{key:"containsKey",value:function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return!0;e=e.right}}return!1}}],[{key:"successor",value:function(t){var e;if(null===t)return null;if(null!==t.right){for(e=t.right;null!==e.left;)e=e.left;return e}e=t.parent;for(var n=t;null!==e&&n===e.right;)n=e,e=e.parent;return e}}]),o}(Ye),He=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"find",value:function(t){return this.nodeMap.get(t)}},{key:"addNode",value:function(){if(arguments[0]instanceof j){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Be){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}}},{key:"print",value:function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(t){for(var e=new pt,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===Z.BOUNDARY&&e.add(r)}return e}},{key:"add",value:function(t){var e=t.getCoordinate();this.addNode(e).add(t)}}],[{key:"constructor_",value:function(){this.nodeMap=new Ze,this.nodeFact=null;var t=arguments[0];this.nodeFact=t}}]),e}(),We=function(){function e(){t(this,e)}return n(e,null,[{key:"isNorthern",value:function(t){return t===e.NE||t===e.NW}},{key:"isOpposite",value:function(t,e){return t!==e&&2==(t-e+4)%4}},{key:"commonHalfPlane",value:function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n}},{key:"isInHalfPlane",value:function(t,n){return n===e.SE?t===e.SE||t===e.SW:t===n||t===n+1}},{key:"quadrant",value:function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],n=arguments[1];if(0===t&&0===n)throw new x("Cannot compute the quadrant for point ( "+t+", "+n+" )");return t>=0?n>=0?e.NE:e.SE:n>=0?e.NW:e.SW}if(arguments[0]instanceof j&&arguments[1]instanceof j){var r=arguments[0],i=arguments[1];if(i.x===r.x&&i.y===r.y)throw new x("Cannot compute the quadrant for two identical points "+r);return i.x>=r.x?i.y>=r.y?e.NE:e.SE:i.y>=r.y?e.NW:e.SW}}}]),e}();We.NE=0,We.NW=1,We.SW=2,We.SE=3;var Je=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"compareDirection",value:function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:ft.index(t._p0,t._p1,this._p1)}},{key:"getDy",value:function(){return this._dy}},{key:"getCoordinate",value:function(){return this._p0}},{key:"setNode",value:function(t){this._node=t}},{key:"print",value:function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)}},{key:"compareTo",value:function(t){var e=t;return this.compareDirection(e)}},{key:"getDirectedCoordinate",value:function(){return this._p1}},{key:"getDx",value:function(){return this._dx}},{key:"getLabel",value:function(){return this._label}},{key:"getEdge",value:function(){return this._edge}},{key:"getQuadrant",value:function(){return this._quadrant}},{key:"getNode",value:function(){return this._node}},{key:"toString",value:function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label}},{key:"computeLabel",value:function(t){}},{key:"init",value:function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=We.quadrant(this._dx,this._dy),G.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")}},{key:"interfaces_",get:function(){return[k]}}],[{key:"constructor_",value:function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];e.constructor_.call(this,n,r,i,null)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];e.constructor_.call(this,o),this.init(s,a),this._label=u}}}]),e}(),Ke=function(e){r(s,e);var o=c(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:"getNextMin",value:function(){return this._nextMin}},{key:"getDepth",value:function(t){return this._depth[t]}},{key:"setVisited",value:function(t){this._isVisited=t}},{key:"computeDirectedLabel",value:function(){this._label=new Ae(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:"getNext",value:function(){return this._next}},{key:"setDepth",value:function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new vt("assigned depths do not match",this.getCoordinate());this._depth[t]=e}},{key:"isInteriorAreaEdge",value:function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,tt.LEFT)===Z.INTERIOR&&this._label.getLocation(e,tt.RIGHT)===Z.INTERIOR||(t=!1);return t}},{key:"setNextMin",value:function(t){this._nextMin=t}},{key:"print",value:function(t){f(i(s.prototype),"print",this).call(this,t),t.print(" "+this._depth[tt.LEFT]+"/"+this._depth[tt.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")}},{key:"setMinEdgeRing",value:function(t){this._minEdgeRing=t}},{key:"isLineEdge",value:function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,Z.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,Z.EXTERIOR);return t&&e&&n}},{key:"setEdgeRing",value:function(t){this._edgeRing=t}},{key:"getMinEdgeRing",value:function(){return this._minEdgeRing}},{key:"getDepthDelta",value:function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t}},{key:"setInResult",value:function(t){this._isInResult=t}},{key:"getSym",value:function(){return this._sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this._edge}},{key:"printEdge",value:function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)}},{key:"setSym",value:function(t){this._sym=t}},{key:"setVisitedEdge",value:function(t){this.setVisited(t),this._sym.setVisited(t)}},{key:"setEdgeDepths",value:function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===tt.LEFT&&(r=-1);var i=tt.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)}},{key:"getEdgeRing",value:function(){return this._edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(t){this._next=t}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var t=arguments[0],e=arguments[1];if(Je.constructor_.call(this,t),this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var n=t.getNumPoints()-1;this.init(t.getCoordinate(n),t.getCoordinate(n-1))}this.computeDirectedLabel()}},{key:"depthFactor",value:function(t,e){return t===Z.EXTERIOR&&e===Z.INTERIOR?1:t===Z.INTERIOR&&e===Z.EXTERIOR?-1:0}}]),s}(Je),Qe=function(){function e(){t(this,e)}return n(e,[{key:"createNode",value:function(t){return new Be(t,null)}}]),e}(),$e=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"printEdges",value:function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}}},{key:"find",value:function(t){return this._nodes.find(t)}},{key:"addNode",value:function(){if(arguments[0]instanceof Be){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof j){var e=arguments[0];return this._nodes.addNode(e)}}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(t){xt.out.println(t)}},{key:"isBoundaryNode",value:function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===Z.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(t,e,n,r){return!!t.equals(n)&&ft.index(t,e,r)===ft.COLLINEAR&&We.quadrant(t,e)===We.quadrant(n,r)}},{key:"getEdgeEnds",value:function(){return this._edgeEndList}},{key:"debugPrint",value:function(t){xt.out.print(t)}},{key:"getEdgeIterator",value:function(){return this._edges.iterator()}},{key:"findEdgeInSameDirection",value:function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null}},{key:"insertEdge",value:function(t){this._edges.add(t)}},{key:"findEdgeEnd",value:function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null}},{key:"addEdges",value:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new Ke(n,!0),i=new Ke(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}}},{key:"add",value:function(t){this._nodes.add(t),this._edgeEndList.add(t)}},{key:"getNodes",value:function(){return this._nodes.values()}},{key:"findEdge",value:function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null}}],[{key:"constructor_",value:function(){if(this._edges=new pt,this._nodes=null,this._edgeEndList=new pt,0===arguments.length)this._nodes=new He(new Qe);else if(1===arguments.length){var t=arguments[0];this._nodes=new He(t)}}},{key:"linkResultDirectedEdges",value:function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()}}]),e}(),tn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"sortShellsAndHoles",value:function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}}},{key:"computePolygons",value:function(t){for(var e=new pt,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e}},{key:"placeFreeHoles",value:function(t,n){for(var r=n.iterator();r.hasNext();){var i=r.next();if(null===i.getShell()){var o=e.findEdgeRingContaining(i,t);if(null===o)throw new vt("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(o)}}}},{key:"buildMinimalEdgeRings",value:function(t,e,n){for(var r=new pt,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else r.add(o)}return r}},{key:"buildMaximalEdgeRings",value:function(t){for(var e=new pt,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new qe(r,this._geometryFactory);e.add(i),i.setInResult()}}return e}},{key:"placePolygonHoles",value:function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}}},{key:"getPolygons",value:function(){return this.computePolygons(this._shellList)}},{key:"findShell",value:function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return G.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n}},{key:"add",value:function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];$e.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new pt,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}}}],[{key:"constructor_",value:function(){this._geometryFactory=null,this._shellList=new pt;var t=arguments[0];this._geometryFactory=t}},{key:"findEdgeRingContaining",value:function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),l=u.getLinearRing(),h=l.getEnvelopeInternal();if(!h.equals(r)&&h.contains(r)){i=Wt.ptNotInList(n.getCoordinates(),l.getCoordinates());var c=!1;Oe.isInRing(i,l.getCoordinates())&&(c=!0),c&&(null===o||s.contains(h))&&(s=(o=u).getLinearRing().getEnvelopeInternal())}}return o}}]),e}(),en=function(){function e(){t(this,e)}return n(e,[{key:"getBounds",value:function(){}}]),e}(),nn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getItem",value:function(){return this._item}},{key:"getBounds",value:function(){return this._bounds}},{key:"interfaces_",get:function(){return[en,b]}}],[{key:"constructor_",value:function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e}}]),e}(),rn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"poll",value:function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)}},{key:"clear",value:function(){this._size=0,this._items.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:"isEmpty",value:function(){return 0===this._size}},{key:"add",value:function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)}}],[{key:"constructor_",value:function(){this._size=null,this._items=null,this._size=0,this._items=new pt,this._items.add(null)}}]),e}(),on=function(){function e(){t(this,e)}return n(e,[{key:"insert",value:function(t,e){}},{key:"remove",value:function(t,e){}},{key:"query",value:function(){}}]),e}(),sn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getLevel",value:function(){return this._level}},{key:"size",value:function(){return this._childBoundables.size()}},{key:"getChildBoundables",value:function(){return this._childBoundables}},{key:"addChildBoundable",value:function(t){G.isTrue(null===this._bounds),this._childBoundables.add(t)}},{key:"isEmpty",value:function(){return this._childBoundables.isEmpty()}},{key:"getBounds",value:function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds}},{key:"interfaces_",get:function(){return[en,b]}}],[{key:"constructor_",value:function(){if(this._childBoundables=new pt,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}}}]),e}(),an={reverseOrder:function(){return{compare:function(t,e){return e.compareTo(t)}}},min:function(t){return an.sort(t),t.get(0)},sort:function(t,e){var n=t.toArray();e?At.sort(n,e):At.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},singletonList:function(t){var e=new pt;return e.add(t),e}},un=function(){function e(){t(this,e)}return n(e,null,[{key:"maxDistance",value:function(t,n,r,i,o,s,a,u){var l=e.distance(t,n,o,s);return l=Math.max(l,e.distance(t,n,a,u)),l=Math.max(l,e.distance(r,i,o,s)),Math.max(l,e.distance(r,i,a,u))}},{key:"distance",value:function(t,e,n,r){var i=n-t,o=r-e;return Math.sqrt(i*i+o*o)}},{key:"maximumDistance",value:function(t,n){var r=Math.min(t.getMinX(),n.getMinX()),i=Math.min(t.getMinY(),n.getMinY()),o=Math.max(t.getMaxX(),n.getMaxX()),s=Math.max(t.getMaxY(),n.getMaxY());return e.distance(r,i,o,s)}},{key:"minMaxDistance",value:function(t,n){var r=t.getMinX(),i=t.getMinY(),o=t.getMaxX(),s=t.getMaxY(),a=n.getMinX(),u=n.getMinY(),l=n.getMaxX(),h=n.getMaxY(),c=e.maxDistance(r,i,r,s,a,u,a,h);return c=Math.min(c,e.maxDistance(r,i,r,s,a,u,l,u)),c=Math.min(c,e.maxDistance(r,i,r,s,l,h,a,h)),c=Math.min(c,e.maxDistance(r,i,r,s,l,h,l,u)),c=Math.min(c,e.maxDistance(r,i,o,i,a,u,a,h)),c=Math.min(c,e.maxDistance(r,i,o,i,a,u,l,u)),c=Math.min(c,e.maxDistance(r,i,o,i,l,h,a,h)),c=Math.min(c,e.maxDistance(r,i,o,i,l,h,l,u)),c=Math.min(c,e.maxDistance(o,s,r,s,a,u,a,h)),c=Math.min(c,e.maxDistance(o,s,r,s,a,u,l,u)),c=Math.min(c,e.maxDistance(o,s,r,s,l,h,a,h)),c=Math.min(c,e.maxDistance(o,s,r,s,l,h,l,u)),c=Math.min(c,e.maxDistance(o,s,o,i,a,u,a,h)),c=Math.min(c,e.maxDistance(o,s,o,i,a,u,l,u)),c=Math.min(c,e.maxDistance(o,s,o,i,l,h,a,h)),Math.min(c,e.maxDistance(o,s,o,i,l,h,l,u))}}]),e}(),ln=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"maximumDistance",value:function(){return un.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}},{key:"expandToQueue",value:function(t,n){var r=e.isComposite(this._boundable1),i=e.isComposite(this._boundable2);if(r&&i)return e.area(this._boundable1)>e.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,t,n),null):(this.expand(this._boundable2,this._boundable1,!0,t,n),null);if(r)return this.expand(this._boundable1,this._boundable2,!1,t,n),null;if(i)return this.expand(this._boundable2,this._boundable1,!0,t,n),null;throw new x("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(e.isComposite(this._boundable1)||e.isComposite(this._boundable2))}},{key:"compareTo",value:function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0}},{key:"expand",value:function(t,n,r,i,o){for(var s=t.getChildBoundables().iterator();s.hasNext();){var a=s.next(),u=null;(u=r?new e(n,a,this._itemDistance):new e(a,n,this._itemDistance)).getDistance()<o&&i.add(u)}}},{key:"getBoundable",value:function(t){return 0===t?this._boundable1:this._boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:"interfaces_",get:function(){return[k]}}],[{key:"constructor_",value:function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()}},{key:"area",value:function(t){return t.getBounds().getArea()}},{key:"isComposite",value:function(t){return t instanceof sn}}]),e}(),hn=function(){function e(){t(this,e)}return n(e,[{key:"visitItem",value:function(t){}}]),e}(),cn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"queryInternal",value:function(){if(ot(arguments[2],hn)&&arguments[0]instanceof Object&&arguments[1]instanceof sn)for(var t=arguments[0],e=arguments[2],n=arguments[1].getChildBoundables(),r=0;r<n.size();r++){var i=n.get(r);this.getIntersectsOp().intersects(i.getBounds(),t)&&(i instanceof sn?this.queryInternal(t,i,e):i instanceof nn?e.visitItem(i.getItem()):G.shouldNeverReachHere())}else if(ot(arguments[2],rt)&&arguments[0]instanceof Object&&arguments[1]instanceof sn)for(var o=arguments[0],s=arguments[2],a=arguments[1].getChildBoundables(),u=0;u<a.size();u++){var l=a.get(u);this.getIntersectsOp().intersects(l.getBounds(),o)&&(l instanceof sn?this.queryInternal(o,l,s):l instanceof nn?s.add(l.getItem()):G.shouldNeverReachHere())}}},{key:"getNodeCapacity",value:function(){return this._nodeCapacity}},{key:"lastNode",value:function(t){return t.get(t.size()-1)}},{key:"size",value:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof sn?t+=this.size(n):n instanceof nn&&(t+=1)}return t}}},{key:"removeItem",value:function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof nn&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)}},{key:"itemsTree",value:function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new pt:t}if(1===arguments.length){for(var e=arguments[0],n=new pt,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof sn){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof nn?n.add(i.getItem()):G.shouldNeverReachHere()}return n.size()<=0?null:n}}},{key:"insert",value:function(t,e){G.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new nn(t,e))}},{key:"boundablesAtLevel",value:function(){if(1===arguments.length){var t=arguments[0],e=new pt;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(G.isTrue(n>-2),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var s=o.next();s instanceof sn?this.boundablesAtLevel(n,s,i):(G.isTrue(s instanceof nn),-1===n&&i.add(s))}return null}}},{key:"query",value:function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new pt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.queryInternal(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.queryInternal(n,this._root,r)}}},{key:"build",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:"getRoot",value:function(){return this.build(),this._root}},{key:"remove",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var s=null,a=r.getChildBoundables().iterator();a.hasNext();){var u=a.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof sn&&(o=this.remove(n,u,i))){s=u;break}}return null!==s&&s.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(s),o}}},{key:"createHigherLevels",value:function(t,e){G.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)}},{key:"depth",value:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof sn){var r=this.depth(n);r>t&&(t=r)}}return t+1}}},{key:"createParentBoundables",value:function(t,e){G.isTrue(!t.isEmpty());var n=new pt;n.add(this.createNode(e));var r=new pt(t);an.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n}},{key:"isEmpty",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:"interfaces_",get:function(){return[b]}}],[{key:"constructor_",value:function(){if(this._root=null,this._built=!1,this._itemBoundables=new pt,this._nodeCapacity=null,0===arguments.length)e.constructor_.call(this,e.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];G.isTrue(t>1,"Node capacity must be greater than 1"),this._nodeCapacity=t}}},{key:"compareDoubles",value:function(t,e){return t>e?1:t<e?-1:0}}]),e}();cn.IntersectsOp=function(){},cn.DEFAULT_NODE_CAPACITY=10;var fn=function(){function e(){t(this,e)}return n(e,[{key:"distance",value:function(t,e){}}]),e}(),gn=function(e){r(s,e);var o=c(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:"createParentBoundablesFromVerticalSlices",value:function(t,e){G.isTrue(t.length>0);for(var n=new pt,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n}},{key:"nearestNeighbourK",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.nearestNeighbourK(t,A.POSITIVE_INFINITY,e)}if(3===arguments.length){var n=arguments[0],r=arguments[2],i=arguments[1],o=new rn;o.add(n);for(var a=new rn;!o.isEmpty()&&i>=0;){var u=o.poll(),l=u.getDistance();if(l>=i)break;u.isLeaves()?a.size()<r?a.add(u):(a.peek().getDistance()>l&&(a.poll(),a.add(u)),i=a.peek().getDistance()):u.expandToQueue(o,i)}return s.getItems(a)}}},{key:"createNode",value:function(t){return new vn(t)}},{key:"size",value:function(){return 0===arguments.length?f(i(s.prototype),"size",this).call(this):f(i(s.prototype),"size",this).apply(this,arguments)}},{key:"insert",value:function(){if(!(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof U))return f(i(s.prototype),"insert",this).apply(this,arguments);var t=arguments[0],e=arguments[1];if(t.isNull())return null;f(i(s.prototype),"insert",this).call(this,t,e)}},{key:"getIntersectsOp",value:function(){return s.intersectsOp}},{key:"verticalSlices",value:function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new pt;for(var s=0;i.hasNext()&&s<n;){var a=i.next();r[o].add(a),s++}}return r}},{key:"query",value:function(){if(1===arguments.length){var t=arguments[0];return f(i(s.prototype),"query",this).call(this,t)}if(2===arguments.length){var e=arguments[0],n=arguments[1];f(i(s.prototype),"query",this).call(this,e,n)}}},{key:"getComparator",value:function(){return s.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(t,e){return f(i(s.prototype),"createParentBoundables",this).call(this,t,e)}},{key:"remove",value:function(){if(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof U){var t=arguments[0],e=arguments[1];return f(i(s.prototype),"remove",this).call(this,t,e)}return f(i(s.prototype),"remove",this).apply(this,arguments)}},{key:"depth",value:function(){return 0===arguments.length?f(i(s.prototype),"depth",this).call(this):f(i(s.prototype),"depth",this).apply(this,arguments)}},{key:"createParentBoundables",value:function(t,e){G.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),r=new pt(t);an.sort(r,s.xComparator);var i=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(i,e)}},{key:"nearestNeighbour",value:function(){if(1===arguments.length){if(ot(arguments[0],fn)){var t=arguments[0];if(this.isEmpty())return null;var e=new ln(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof ln){var n=arguments[0],r=A.POSITIVE_INFINITY,i=null,o=new rn;for(o.add(n);!o.isEmpty()&&r>0;){var s=o.poll(),a=s.getDistance();if(a>=r)break;s.isLeaves()?(r=a,i=s):s.expandToQueue(o,r)}return null===i?null:[i.getBoundable(0).getItem(),i.getBoundable(1).getItem()]}}else{if(2===arguments.length){var u=arguments[0],l=arguments[1];if(this.isEmpty()||u.isEmpty())return null;var h=new ln(this.getRoot(),u.getRoot(),l);return this.nearestNeighbour(h)}if(3===arguments.length){var c=arguments[2],f=new nn(arguments[0],arguments[1]),g=new ln(this.getRoot(),f,c);return this.nearestNeighbour(g)[0]}if(4===arguments.length){var v=arguments[2],d=arguments[3],p=new nn(arguments[0],arguments[1]),y=new ln(this.getRoot(),p,v);return this.nearestNeighbourK(y,d)}}}},{key:"isWithinDistance",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=A.POSITIVE_INFINITY,r=new rn;for(r.add(t);!r.isEmpty();){var i=r.poll(),o=i.getDistance();if(o>e)return!1;if(i.maximumDistance()<=e)return!0;if(i.isLeaves()){if((n=o)<=e)return!0}else i.expandToQueue(r,n)}return!1}if(3===arguments.length){var s=arguments[0],a=arguments[1],u=arguments[2],l=new ln(this.getRoot(),s.getRoot(),a);return this.isWithinDistance(l,u)}}},{key:"interfaces_",get:function(){return[on,b]}}],[{key:"constructor_",value:function(){if(0===arguments.length)s.constructor_.call(this,s.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];cn.constructor_.call(this,t)}}},{key:"centreX",value:function(t){return s.avg(t.getMinX(),t.getMaxX())}},{key:"avg",value:function(t,e){return(t+e)/2}},{key:"getItems",value:function(t){for(var e=new Array(t.size()).fill(null),n=0;!t.isEmpty();){var r=t.poll();e[n]=r.getBoundable(0).getItem(),n++}return e}},{key:"centreY",value:function(t){return s.avg(t.getMinY(),t.getMaxY())}}]),s}(cn),vn=function(e){r(o,e);var i=c(o);function o(){var e;return t(this,o),e=i.call(this),o.constructor_.apply(l(e),arguments),e}return n(o,[{key:"computeBounds",value:function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new U(n.getBounds()):t.expandToInclude(n.getBounds())}return t}}],[{key:"constructor_",value:function(){var t=arguments[0];sn.constructor_.call(this,t)}}]),o}(sn);gn.STRtreeNode=vn,gn.xComparator=new(function(){function e(){t(this,e)}return n(e,[{key:"interfaces_",get:function(){return[D]}},{key:"compare",value:function(t,e){return cn.compareDoubles(gn.centreX(t.getBounds()),gn.centreX(e.getBounds()))}}]),e}()),gn.yComparator=new(function(){function e(){t(this,e)}return n(e,[{key:"interfaces_",get:function(){return[D]}},{key:"compare",value:function(t,e){return cn.compareDoubles(gn.centreY(t.getBounds()),gn.centreY(e.getBounds()))}}]),e}()),gn.intersectsOp=new(function(){function e(){t(this,e)}return n(e,[{key:"interfaces_",get:function(){return[IntersectsOp]}},{key:"intersects",value:function(t,e){return t.intersects(e)}}]),e}()),gn.DEFAULT_NODE_CAPACITY=10;var dn=function(){function e(){t(this,e)}return n(e,null,[{key:"relativeSign",value:function(t,e){return t<e?-1:t>e?1:0}},{key:"compare",value:function(t,n,r){if(n.equals2D(r))return 0;var i=e.relativeSign(n.x,r.x),o=e.relativeSign(n.y,r.y);switch(t){case 0:return e.compareValue(i,o);case 1:return e.compareValue(o,i);case 2:return e.compareValue(o,-i);case 3:return e.compareValue(-i,o);case 4:return e.compareValue(-i,-o);case 5:return e.compareValue(-o,-i);case 6:return e.compareValue(-o,i);case 7:return e.compareValue(i,-o)}return G.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0}}]),e}(),pn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:this._isInterior?e._isInterior?dn.compare(this._segmentOctant,this.coord,e.coord):1:-1}},{key:"isEndPoint",value:function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t}},{key:"toString",value:function(){return this.segmentIndex+":"+this.coord.toString()}},{key:"isInterior",value:function(){return this._isInterior}},{key:"interfaces_",get:function(){return[k]}}],[{key:"constructor_",value:function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new j(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))}}]),e}(),yn=function(){function e(){t(this,e)}return n(e,[{key:"hasNext",value:function(){}},{key:"next",value:function(){}},{key:"remove",value:function(){}}]),e}(),mn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getSplitCoordinates",value:function(){var t=new Ht;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var t=new pt;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}}},{key:"createSplitEdgePts",value:function(t,e){var n=e.segmentIndex-t.segmentIndex+2;if(2===n)return[new j(t.coord),new j(e.coord)];var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new j(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return i&&(o[s]=new j(e.coord)),o}},{key:"print",value:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)}},{key:"findCollapsesFromExistingVertices",value:function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e);this._edge.getCoordinate(e+1);var r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(at.valueOf(e+1))}}},{key:"addEdgeCoordinates",value:function(t,e,n){var r=this.createSplitEdgePts(t,e);n.add(r,!1)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}}},{key:"findCollapseIndex",value:function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)}},{key:"findCollapsesFromInsertedNodes",value:function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(at.valueOf(e[0])),r=i}}},{key:"getEdge",value:function(){return this._edge}},{key:"addEndpoints",value:function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)}},{key:"createSplitEdge",value:function(t,e){var n=this.createSplitEdgePts(t,e);return new kn(n,this._edge.getData())}},{key:"add",value:function(t,e){var n=new pn(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(G.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)}},{key:"checkSplitEdgesCorrectness",value:function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new F("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new F("bad split edge end point at "+i)}}],[{key:"constructor_",value:function(){this._nodeMap=new Ze,this._edge=null;var t=arguments[0];this._edge=t}}]),e}(),_n=function(){function e(){t(this,e)}return n(e,null,[{key:"octant",value:function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],n=arguments[1];if(0===t&&0===n)throw new x("Cannot compute the octant for point ( "+t+", "+n+" )");var r=Math.abs(t),i=Math.abs(n);return t>=0?n>=0?r>=i?0:1:r>=i?7:6:n>=0?r>=i?3:2:r>=i?4:5}if(arguments[0]instanceof j&&arguments[1]instanceof j){var o=arguments[0],s=arguments[1],a=s.x-o.x,u=s.y-o.y;if(0===a&&0===u)throw new x("Cannot compute the octant for two identical points "+o);return e.octant(a,u)}}}]),e}(),xn=function(){function e(){t(this,e)}return n(e,[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(t){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(t){}},{key:"getData",value:function(){}}]),e}(),En=function(){function e(){t(this,e)}return n(e,[{key:"addIntersection",value:function(t,e){}},{key:"interfaces_",get:function(){return[xn]}}]),e}(),kn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getCoordinates",value:function(){return this._pts}},{key:"size",value:function(){return this._pts.length}},{key:"getCoordinate",value:function(t){return this._pts[t]}},{key:"isClosed",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:"getSegmentOctant",value:function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))}},{key:"setData",value:function(t){this._data=t}},{key:"safeOctant",value:function(t,e){return t.equals2D(e)?0:_n.octant(t,e)}},{key:"getData",value:function(){return this._data}},{key:"addIntersection",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[1],r=arguments[3],i=new j(arguments[0].getIntersection(r));this.addIntersection(i,n)}}},{key:"toString",value:function(){return Le.toLineString(new $t(this._pts))}},{key:"getNodeList",value:function(){return this._nodeList}},{key:"addIntersectionNode",value:function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)}},{key:"addIntersections",value:function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)}},{key:"interfaces_",get:function(){return[En]}}],[{key:"constructor_",value:function(){this._nodeList=new mn(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e}},{key:"getNodedSubstrings",value:function(){if(1===arguments.length){var t=arguments[0],n=new pt;return e.getNodedSubstrings(t,n),n}if(2===arguments.length)for(var r=arguments[1],i=arguments[0].iterator();i.hasNext();)i.next().getNodeList().addSplitEdges(r)}}]),e}(),wn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof e){var t=arguments[0],n=ft.index(this.p0,this.p1,t.p0),r=ft.index(this.p0,this.p1,t.p1);return n>=0&&r>=0||n<=0&&r<=0?Math.max(n,r):0}if(arguments[0]instanceof j){var i=arguments[0];return ft.index(this.p0,this.p1,i)}}},{key:"toGeometry",value:function(t){return t.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(t){if(!(t instanceof e))return!1;var n=t;return this.p0.equals(n.p0)&&this.p1.equals(n.p1)}},{key:"intersection",value:function(t){var e=new Ce;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof j){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new j(t);var n=this.projectionFactor(t),r=new j;return r.x=this.p0.x+n*(this.p1.x-this.p0.x),r.y=this.p0.y+n*(this.p1.y-this.p0.y),r}if(arguments[0]instanceof e){var i=arguments[0],o=this.projectionFactor(i.p0),s=this.projectionFactor(i.p1);if(o>=1&&s>=1)return null;if(o<=0&&s<=0)return null;var a=this.project(i.p0);o<0&&(a=this.p0),o>1&&(a=this.p1);var u=this.project(i.p1);return s<0&&(u=this.p0),s>1&&(u=this.p1),new e(a,u)}}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(t){return 0===t?this.p0:this.p1}},{key:"distancePerpendicular",value:function(t){return kt.pointToLinePerpendicular(t,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return e.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?A.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r}},{key:"closestPoints",value:function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=A.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var s=this.closestPoint(t.p1);(i=s.distance(t.p1))<r&&(r=i,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);(i=a.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=a);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=u),n}},{key:"closestPoint",value:function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)}},{key:"reverse",value:function(){var t=this.p0;this.p0=this.p1,this.p1=t}},{key:"equalsTopo",value:function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)}},{key:"lineIntersection",value:function(t){return _t.intersection(this.p0,this.p1,t.p0,t.p1)}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(i*i+o*o),a=0,u=0;if(0!==e){if(s<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");a=e*i/s,u=e*o/s}return new j(n-u,r+a)}},{key:"setCoordinates",value:function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}}},{key:"segmentFraction",value:function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||A.isNaN(e))&&(e=1),e}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"reflect",value:function(t){var e=this.p1.getY()-this.p0.getY(),n=this.p0.getX()-this.p1.getX(),r=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),i=e*e+n*n,o=e*e-n*n,s=t.getX(),a=t.getY();return new j((-o*s-2*e*n*a-2*e*r)/i,(o*a-2*e*n*s-2*n*r)/i)}},{key:"distance",value:function(){if(arguments[0]instanceof e){var t=arguments[0];return kt.segmentToSegment(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof j){var n=arguments[0];return kt.pointToSegment(n,this.p0,this.p1)}}},{key:"pointAlong",value:function(t){var e=new j;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e}},{key:"hashCode",value:function(){var t=A.doubleToLongBits(this.p0.x);t^=31*A.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=A.doubleToLongBits(this.p1.x);return n^=31*A.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)}},{key:"interfaces_",get:function(){return[k,b]}}],[{key:"constructor_",value:function(){if(this.p0=null,this.p1=null,0===arguments.length)e.constructor_.call(this,new j,new j);else if(1===arguments.length){var t=arguments[0];e.constructor_.call(this,t.p0,t.p1)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.p0=n,this.p1=r}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];e.constructor_.call(this,new j(i,o),new j(s,a))}}},{key:"midPoint",value:function(t,e){return new j((t.x+e.x)/2,(t.y+e.y)/2)}}]),e}(),bn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"overlap",value:function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}],[{key:"constructor_",value:function(){this._overlapSeg1=new wn,this._overlapSeg2=new wn}}]),e}(),In=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getLineSegment",value:function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]}},{key:"computeSelect",value:function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(n-e==1)return r.select(this,e),null;if(!t.intersects(i,o))return null;var s=Math.trunc((e+n)/2);e<s&&this.computeSelect(t,e,s,r),s<n&&this.computeSelect(t,s,n,r)}},{key:"getCoordinates",value:function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t}},{key:"computeOverlaps",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.computeOverlaps(this._start,this._end,t,t._start,t._end,e)}else if(6===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3],s=arguments[4],a=arguments[5];if(r-n==1&&s-o==1)return a.overlap(this,n,i,o),null;if(!this.overlaps(n,r,i,o,s))return null;var u=Math.trunc((n+r)/2),l=Math.trunc((o+s)/2);n<u&&(o<l&&this.computeOverlaps(n,u,i,o,l,a),l<s&&this.computeOverlaps(n,u,i,l,s,a)),u<r&&(o<l&&this.computeOverlaps(u,r,i,o,l,a),l<s&&this.computeOverlaps(u,r,i,l,s,a))}}},{key:"setId",value:function(t){this._id=t}},{key:"select",value:function(t,e){this.computeSelect(t,this._start,this._end,e)}},{key:"getEnvelope",value:function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new U(t,e)}return this._env}},{key:"overlaps",value:function(t,e,n,r,i){return U.intersects(this._pts[t],this._pts[e],n._pts[r],n._pts[i])}},{key:"getEndIndex",value:function(){return this._end}},{key:"getStartIndex",value:function(){return this._start}},{key:"getContext",value:function(){return this._context}},{key:"getId",value:function(){return this._id}}],[{key:"constructor_",value:function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r}}]),e}(),Nn=function(){function e(){t(this,e)}return n(e,null,[{key:"findChainEnd",value:function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=We.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||We.quadrant(t[i-1],t[i])===r);)i++;return i-1}},{key:"getChains",value:function(){if(1===arguments.length){var t=arguments[0];return e.getChains(t,null)}if(2===arguments.length){var n=arguments[0],r=arguments[1],i=new pt,o=0;do{var s=e.findChainEnd(n,o),a=new In(n,o,s,r);i.add(a),o=s}while(o<n.length-1);return i}}}]),e}(),Sn=function(){function e(){t(this,e)}return n(e,[{key:"computeNodes",value:function(t){}},{key:"getNodedSubstrings",value:function(){}}]),e}(),Mn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"setSegmentIntersector",value:function(t){this._segInt=t}},{key:"interfaces_",get:function(){return[Sn]}}],[{key:"constructor_",value:function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}}}]),e}(),Ln=function(e){r(o,e);var i=c(o);function o(){var e;return t(this,o),e=i.call(this),o.constructor_.apply(l(e),arguments),e}return n(o,[{key:"getMonotoneChains",value:function(){return this._monoChains}},{key:"getNodedSubstrings",value:function(){return kn.getNodedSubstrings(this._nodedSegStrings)}},{key:"getIndex",value:function(){return this._index}},{key:"add",value:function(t){for(var e=Nn.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}}},{key:"computeNodes",value:function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var t=new Pn(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}}}],[{key:"constructor_",value:function(){if(this._monoChains=new pt,this._index=new gn,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,0===arguments.length);else if(1===arguments.length){var t=arguments[0];Mn.constructor_.call(this,t)}}}]),o}(Mn),Pn=function(e){r(s,e);var o=c(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:"overlap",value:function(){if(4!==arguments.length)return f(i(s.prototype),"overlap",this).apply(this,arguments);var t=arguments[1],e=arguments[2],n=arguments[3],r=arguments[0].getContext(),o=e.getContext();this._si.processIntersections(r,t,o,n)}}],[{key:"constructor_",value:function(){this._si=null;var t=arguments[0];this._si=t}}]),s}(bn);Ln.SegmentOverlapAction=Pn;var Cn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"isDeletable",value:function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[n];return!!this.isConcave(i,o,s)&&!!this.isShallow(i,o,s,r)&&this.isShallowSampled(i,o,t,n,r)}},{key:"deleteShallowConcavities",value:function(){for(var t=1,n=this.findNextNonDeletedIndex(t),r=this.findNextNonDeletedIndex(n),i=!1;r<this._inputLine.length;){var o=!1;this.isDeletable(t,n,r,this._distanceTol)&&(this._isDeleted[n]=e.DELETE,o=!0,i=!0),t=o?r:n,n=this.findNextNonDeletedIndex(t),r=this.findNextNonDeletedIndex(n)}return i}},{key:"isShallowConcavity",value:function(t,e,n,r){return ft.index(t,e,n)===this._angleOrientation&&kt.pointToSegment(e,t,n)<r}},{key:"isShallowSampled",value:function(t,n,r,i,o){var s=Math.trunc((i-r)/e.NUM_PTS_TO_CHECK);s<=0&&(s=1);for(var a=r;a<i;a+=s)if(!this.isShallow(t,n,this._inputLine[a],o))return!1;return!0}},{key:"isConcave",value:function(t,e,n){return ft.index(t,e,n)===this._angleOrientation}},{key:"simplify",value:function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=ft.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(t){for(var n=t+1;n<this._inputLine.length&&this._isDeleted[n]===e.DELETE;)n++;return n}},{key:"isShallow",value:function(t,e,n,r){return kt.pointToSegment(e,t,n)<r}},{key:"collapseLine",value:function(){for(var t=new Ht,n=0;n<this._inputLine.length;n++)this._isDeleted[n]!==e.DELETE&&t.add(this._inputLine[n]);return t.toCoordinateArray()}}],[{key:"constructor_",value:function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=ft.COUNTERCLOCKWISE;var t=arguments[0];this._inputLine=t}},{key:"simplify",value:function(t,n){return new e(t).simplify(n)}}]),e}();Cn.INIT=0,Cn.DELETE=1,Cn.KEEP=1,Cn.NUM_PTS_TO_CHECK=10;var Tn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getCoordinates",value:function(){return this._ptList.toArray(e.COORDINATE_ARRAY_TYPE)}},{key:"setPrecisionModel",value:function(t){this._precisionModel=t}},{key:"addPt",value:function(t){var e=new j(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])}},{key:"isRedundant",value:function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance}},{key:"toString",value:function(){return(new ae).createLineString(this.getCoordinates()).toString()}},{key:"closeRing",value:function(){if(this._ptList.size()<1)return null;var t=new j(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)}},{key:"setMinimumVertexDistance",value:function(t){this._minimimVertexDistance=t}}],[{key:"constructor_",value:function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new pt}}]),e}();Tn.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);var On=function(){function e(){t(this,e)}return n(e,null,[{key:"toDegrees",value:function(t){return 180*t/Math.PI}},{key:"normalize",value:function(t){for(;t>Math.PI;)t-=e.PI_TIMES_2;for(;t<=-Math.PI;)t+=e.PI_TIMES_2;return t}},{key:"angle",value:function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}}},{key:"isAcute",value:function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0}},{key:"isObtuse",value:function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0}},{key:"interiorAngle",value:function(t,n,r){var i=e.angle(n,t),o=e.angle(n,r);return Math.abs(o-i)}},{key:"normalizePositive",value:function(t){if(t<0){for(;t<0;)t+=e.PI_TIMES_2;t>=e.PI_TIMES_2&&(t=0)}else{for(;t>=e.PI_TIMES_2;)t-=e.PI_TIMES_2;t<0&&(t=0)}return t}},{key:"angleBetween",value:function(t,n,r){var i=e.angle(n,t),o=e.angle(n,r);return e.diff(i,o)}},{key:"diff",value:function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n}},{key:"toRadians",value:function(t){return t*Math.PI/180}},{key:"getTurn",value:function(t,n){var r=Math.sin(n-t);return r>0?e.COUNTERCLOCKWISE:r<0?e.CLOCKWISE:e.NONE}},{key:"angleBetweenOriented",value:function(t,n,r){var i=e.angle(n,t),o=e.angle(n,r)-i;return o<=-Math.PI?o+e.PI_TIMES_2:o>Math.PI?o-e.PI_TIMES_2:o}}]),e}();On.PI_TIMES_2=2*Math.PI,On.PI_OVER_2=Math.PI/2,On.PI_OVER_4=Math.PI/4,On.COUNTERCLOCKWISE=ft.COUNTERCLOCKWISE,On.CLOCKWISE=ft.CLOCKWISE,On.NONE=ft.COLLINEAR;var Rn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"addNextSegment",value:function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=ft.index(this._s0,this._s1,this._s2),r=n===ft.CLOCKWISE&&this._side===tt.LEFT||n===ft.COUNTERCLOCKWISE&&this._side===tt.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)}},{key:"addLineEndCap",value:function(t,e){var n=new wn(t,e),r=new wn;this.computeOffsetSegment(n,tt.LEFT,this._distance,r);var i=new wn;this.computeOffsetSegment(n,tt.RIGHT,this._distance,i);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case y.CAP_ROUND:this._segList.addPt(r.p1),this.addDirectedFillet(e,a+Math.PI/2,a-Math.PI/2,ft.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case y.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case y.CAP_SQUARE:var u=new j;u.x=Math.abs(this._distance)*Math.cos(a),u.y=Math.abs(this._distance)*Math.sin(a);var l=new j(r.p1.x+u.x,r.p1.y+u.y),h=new j(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(l),this._segList.addPt(h)}}},{key:"getCoordinates",value:function(){return this._segList.getCoordinates()}},{key:"addMitreJoin",value:function(t,e,n,r){var i=_t.intersection(e.p0,e.p1,n.p0,n.p1);if(null!==i&&(r<=0?1:i.distance(t)/Math.abs(r))<=this._bufParams.getMitreLimit())return this._segList.addPt(i),null;this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())}},{key:"addOutsideTurn",value:function(t,n){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*e.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===y.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===y.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(n&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))}},{key:"createSquare",value:function(t){this._segList.addPt(new j(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new j(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new j(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new j(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()}},{key:"addSegments",value:function(t,e){this._segList.addPts(t,e)}},{key:"addFirstSegment",value:function(){this._segList.addPt(this._offset1.p0)}},{key:"addCornerFillet",value:function(t,e,n,r,i){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),u=n.x-t.x,l=n.y-t.y,h=Math.atan2(l,u);r===ft.CLOCKWISE?a<=h&&(a+=2*Math.PI):a>=h&&(a-=2*Math.PI),this._segList.addPt(e),this.addDirectedFillet(t,a,h,r,i),this._segList.addPt(n)}},{key:"addLastSegment",value:function(){this._segList.addPt(this._offset1.p1)}},{key:"initSideSegments",value:function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)}},{key:"addLimitedMitreJoin",value:function(t,e,n,r){var i=this._seg0.p1,o=On.angle(i,this._seg0.p0),s=On.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,a=On.normalize(o+s),u=On.normalize(a+Math.PI),l=r*n,h=n-l*Math.abs(Math.sin(s)),c=i.x+l*Math.cos(u),f=i.y+l*Math.sin(u),g=new j(c,f),v=new wn(i,g),d=v.pointAlongOffset(1,h),p=v.pointAlongOffset(1,-h);this._side===tt.LEFT?(this._segList.addPt(d),this._segList.addPt(p)):(this._segList.addPt(p),this._segList.addPt(d))}},{key:"addDirectedFillet",value:function(t,e,n,r,i){var o=r===ft.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var u=s/a,l=new j,h=0;h<a;h++){var c=e+o*h*u;l.x=t.x+i*Math.cos(c),l.y=t.y+i*Math.sin(c),this._segList.addPt(l)}}},{key:"computeOffsetSegment",value:function(t,e,n,r){var i=e===tt.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),u=i*n*o/a,l=i*n*s/a;r.p0.x=t.p0.x-l,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-l,r.p1.y=t.p1.y+u}},{key:"addInsideTurn",value:function(t,n){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*e.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var r=new j((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r);var i=new j((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}},{key:"createCircle",value:function(t){var e=new j(t.x+this._distance,t.y);this._segList.addPt(e),this.addDirectedFillet(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}},{key:"addBevelJoin",value:function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)}},{key:"init",value:function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Tn,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*e.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===y.JOIN_BEVEL||this._bufParams.getJoinStyle()===y.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,ft.CLOCKWISE,this._distance))}},{key:"closeRing",value:function(){this._segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}}],[{key:"constructor_",value:function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new wn,this._seg1=new wn,this._offset0=new wn,this._offset1=new wn,this._side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=t,this._bufParams=n,this._li=new Ce,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===y.JOIN_ROUND&&(this._closingSegLengthFactor=e.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)}}]),e}();Rn.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,Rn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,Rn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,Rn.MAX_CLOSING_SEG_LEN_FACTOR=80;var An=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getOffsetCurve",value:function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&Wt.reverse(o),o}},{key:"computeSingleSidedBufferCurve",value:function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=Cn.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],tt.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{n.addSegments(t,!1);var a=Cn.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],tt.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment(),n.closeRing()}},{key:"computeRingBufferCurve",value:function(t,e,n){var r=this.simplifyTolerance(this._distance);e===tt.RIGHT&&(r=-r);var i=Cn.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var s=1;s<=o;s++){var a=1!==s;n.addNextSegment(i[s],a)}n.closeRing()}},{key:"computeLineBufferCurve",value:function(t,e){var n=this.simplifyTolerance(this._distance),r=Cn.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],tt.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var s=Cn.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],tt.LEFT);for(var u=a-2;u>=0;u--)e.addNextSegment(s[u],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()}},{key:"computePointCurve",value:function(t,e){switch(this._bufParams.getEndCapStyle()){case y.CAP_ROUND:e.createCircle(t);break;case y.CAP_SQUARE:e.createSquare(t)}}},{key:"getLineCurve",value:function(t,e){if(this._distance=e,this.isLineOffsetEmpty(e))return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()}},{key:"getBufferParameters",value:function(){return this._bufParams}},{key:"simplifyTolerance",value:function(t){return t*this._bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(t,n,r){if(this._distance=r,t.length<=2)return this.getLineCurve(t,r);if(0===r)return e.copyCoordinates(t);var i=this.getSegGen(r);return this.computeRingBufferCurve(t,n,i),i.getCoordinates()}},{key:"computeOffsetCurve",value:function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=Cn.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],tt.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{var a=Cn.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],tt.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment()}},{key:"isLineOffsetEmpty",value:function(t){return 0===t||t<0&&!this._bufParams.isSingleSided()}},{key:"getSegGen",value:function(t){return new Rn(this._precisionModel,this._bufParams,t)}}],[{key:"constructor_",value:function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e}},{key:"copyCoordinates",value:function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new j(t[n]);return e}}]),e}(),Dn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"findStabbedSegments",value:function(){if(1===arguments.length){for(var t=arguments[0],e=new pt,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(ot(arguments[2],rt)&&arguments[0]instanceof j&&arguments[1]instanceof Ke){for(var o=arguments[0],s=arguments[1],a=arguments[2],u=s.getEdge().getCoordinates(),l=0;l<u.length-1;l++)if(this._seg.p0=u[l],this._seg.p1=u[l+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||ft.index(this._seg.p0,this._seg.p1,o)===ft.RIGHT)){var h=s.getDepth(tt.LEFT);this._seg.p0.equals(u[l])||(h=s.getDepth(tt.RIGHT));var c=new Fn(this._seg,h);a.add(c)}}else if(ot(arguments[2],rt)&&arguments[0]instanceof j&&ot(arguments[1],rt))for(var f=arguments[0],g=arguments[2],v=arguments[1].iterator();v.hasNext();){var d=v.next();d.isForward()&&this.findStabbedSegments(f,d,g)}}},{key:"getDepth",value:function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:an.min(e)._leftDepth}}],[{key:"constructor_",value:function(){this._subgraphs=null,this._seg=new wn;var t=arguments[0];this._subgraphs=t}}]),e}(),Fn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"compareTo",value:function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)}},{key:"compareX",value:function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)}},{key:"toString",value:function(){return this._upwardSeg.toString()}},{key:"interfaces_",get:function(){return[k]}}],[{key:"constructor_",value:function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new wn(t),this._leftDepth=e}}]),e}();Dn.DepthSegment=Fn;var qn=function(e){r(o,e);var i=c(o);function o(){var e;return t(this,o),e=i.call(this),o.constructor_.apply(l(e),arguments),e}return n(o,null,[{key:"constructor_",value:function(){_.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}]),o}(_),Gn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getY",value:function(){var t=this.y/this.w;if(A.isNaN(t)||A.isInfinite(t))throw new qn;return t}},{key:"getX",value:function(){var t=this.x/this.w;if(A.isNaN(t)||A.isInfinite(t))throw new qn;return t}},{key:"getCoordinate",value:function(){var t=new j;return t.x=this.getX(),t.y=this.getY(),t}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof e&&arguments[1]instanceof e){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof j&&arguments[1]instanceof j){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3===arguments.length){var u=arguments[0],l=arguments[1],h=arguments[2];this.x=u,this.y=l,this.w=h}else if(4===arguments.length){var c=arguments[0],f=arguments[1],g=arguments[2],v=arguments[3],d=c.y-f.y,p=f.x-c.x,y=c.x*f.y-f.x*c.y,m=g.y-v.y,_=v.x-g.x,x=g.x*v.y-v.x*g.y;this.x=p*x-_*y,this.y=m*y-d*x,this.w=d*_-m*p}}}]),e}(),Bn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"area",value:function(){return e.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return e.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(t){if(null===t)throw new x("Supplied point is null.");return e.interpolateZ(t,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return e.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return e.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return e.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return e.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return e.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return e.inCentre(this.p0,this.p1,this.p2)}}],[{key:"constructor_",value:function(){this.p0=null,this.p1=null,this.p2=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.p0=t,this.p1=e,this.p2=n}},{key:"area",value:function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)}},{key:"signedArea",value:function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2}},{key:"det",value:function(t,e,n,r){return t*r-e*n}},{key:"interpolateZ",value:function(t,e,n,r){var i=e.x,o=e.y,s=n.x-i,a=r.x-i,u=n.y-o,l=r.y-o,h=s*l-a*u,c=t.x-i,f=t.y-o,g=(l*c-a*f)/h,v=(-u*c+s*f)/h;return e.getZ()+g*(n.getZ()-e.getZ())+v*(r.getZ()-e.getZ())}},{key:"longestSideLength",value:function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),s=r;return i>s&&(s=i),o>s&&(s=o),s}},{key:"circumcentreDD",value:function(t,e,n){var r=lt.valueOf(t.x).subtract(n.x),i=lt.valueOf(t.y).subtract(n.y),o=lt.valueOf(e.x).subtract(n.x),s=lt.valueOf(e.y).subtract(n.y),a=lt.determinant(r,i,o,s).multiply(2),u=r.sqr().add(i.sqr()),l=o.sqr().add(s.sqr()),h=lt.determinant(i,u,s,l),c=lt.determinant(r,u,o,l),f=lt.valueOf(n.x).subtract(h.divide(a)).doubleValue(),g=lt.valueOf(n.y).add(c.divide(a)).doubleValue();return new j(f,g)}},{key:"isAcute",value:function(t,e,n){return!!On.isAcute(t,e,n)&&!!On.isAcute(e,n,t)&&!!On.isAcute(n,t,e)}},{key:"circumcentre",value:function(t,n,r){var i=r.x,o=r.y,s=t.x-i,a=t.y-o,u=n.x-i,l=n.y-o,h=2*e.det(s,a,u,l),c=e.det(a,s*s+a*a,l,u*u+l*l),f=e.det(s,s*s+a*a,u,u*u+l*l);return new j(i-c/h,o+f/h)}},{key:"perpendicularBisector",value:function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new Gn(t.x+n/2,t.y+r/2,1),o=new Gn(t.x-r+n/2,t.y+n+r/2,1);return new Gn(i,o)}},{key:"angleBisector",value:function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,s=n.y-t.y;return new j(t.x+i*o,t.y+i*s)}},{key:"area3D",value:function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.getZ()-t.getZ(),s=n.x-t.x,a=n.y-t.y,u=n.getZ()-t.getZ(),l=i*u-o*a,h=o*s-r*u,c=r*a-i*s,f=l*l+h*h+c*c;return Math.sqrt(f)/2}},{key:"centroid",value:function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new j(r,i)}},{key:"inCentre",value:function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),s=r+i+o,a=(r*t.x+i*e.x+o*n.x)/s,u=(r*t.y+i*e.y+o*n.y)/s;return new j(a,u)}}]),e}(),Yn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"addRingSide",value:function(t,e,n,r,i){if(0===e&&t.length<jt.MINIMUM_VALID_SIZE)return null;var o=r,s=i;t.length>=jt.MINIMUM_VALID_SIZE&&ft.isCCW(t)&&(o=i,s=r,n=tt.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)}},{key:"addRingBothSides",value:function(t,e){this.addRingSide(t,e,tt.LEFT,Z.EXTERIOR,Z.INTERIOR),this.addRingSide(t,e,tt.RIGHT,Z.INTERIOR,Z.EXTERIOR)}},{key:"addPoint",value:function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,Z.EXTERIOR,Z.INTERIOR)}},{key:"addPolygon",value:function(t){var e=this._distance,n=tt.LEFT;this._distance<0&&(e=-this._distance,n=tt.RIGHT);var r=t.getExteriorRing(),i=Wt.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addRingSide(i,e,n,Z.EXTERIOR,Z.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var s=t.getInteriorRingN(o),a=Wt.removeRepeatedPoints(s.getCoordinates());this._distance>0&&this.isErodedCompletely(s,-this._distance)||this.addRingSide(a,e,tt.opposite(n),Z.INTERIOR,Z.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(t,e){var n=new Bn(t[0],t[1],t[2]),r=n.inCentre();return kt.pointToSegment(r,n.p0,n.p1)<Math.abs(e)}},{key:"addLineString",value:function(t){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;var e=Wt.removeRepeatedPoints(t.getCoordinates());if(Wt.isRing(e)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(e,this._distance);else{var n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,Z.EXTERIOR,Z.INTERIOR)}}},{key:"addCurve",value:function(t,e,n){if(null===t||t.length<2)return null;var r=new kn(t,new Ae(0,Z.BOUNDARY,e,n));this._curveList.add(r)}},{key:"getCurves",value:function(){return this.add(this._inputGeom),this._curveList}},{key:"add",value:function(t){if(t.isEmpty())return null;if(t instanceof Ft)this.addPolygon(t);else if(t instanceof Ct)this.addLineString(t);else if(t instanceof Ot)this.addPoint(t);else if(t instanceof zt)this.addCollection(t);else if(t instanceof se)this.addCollection(t);else if(t instanceof ee)this.addCollection(t);else{if(!(t instanceof Yt))throw new J(t.getGeometryType());this.addCollection(t)}}},{key:"isErodedCompletely",value:function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i}},{key:"addCollection",value:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}}}],[{key:"constructor_",value:function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new pt;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n}}]),e}(),zn=function(){function e(){t(this,e)}return n(e,[{key:"locate",value:function(t){}}]),e}(),jn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"next",value:function(){if(this._atStart)return this._atStart=!1,e.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new W;var t=this._parent.getGeometryN(this._index++);return t instanceof Yt?(this._subcollectionIterator=new e(t),this._subcollectionIterator.next()):t}},{key:"remove",value:function(){throw new J(this.getClass().getName())}},{key:"hasNext",value:function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:"interfaces_",get:function(){return[yn]}}],[{key:"constructor_",value:function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()}},{key:"isAtomic",value:function(t){return!(t instanceof Yt)}}]),e}(),Xn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"locate",value:function(t){return e.locate(t,this._geom)}},{key:"interfaces_",get:function(){return[zn]}}],[{key:"constructor_",value:function(){this._geom=null;var t=arguments[0];this._geom=t}},{key:"locatePointInPolygon",value:function(t,n){if(n.isEmpty())return Z.EXTERIOR;var r=n.getExteriorRing(),i=e.locatePointInRing(t,r);if(i!==Z.INTERIOR)return i;for(var o=0;o<n.getNumInteriorRing();o++){var s=n.getInteriorRingN(o),a=e.locatePointInRing(t,s);if(a===Z.BOUNDARY)return Z.BOUNDARY;if(a===Z.INTERIOR)return Z.EXTERIOR}return Z.INTERIOR}},{key:"locatePointInRing",value:function(t,e){return e.getEnvelopeInternal().intersects(t)?Oe.locateInRing(t,e.getCoordinates()):Z.EXTERIOR}},{key:"containsPointInPolygon",value:function(t,n){return Z.EXTERIOR!==e.locatePointInPolygon(t,n)}},{key:"locateInGeometry",value:function(t,n){if(n instanceof Ft)return e.locatePointInPolygon(t,n);if(n instanceof Yt)for(var r=new jn(n);r.hasNext();){var i=r.next();if(i!==n){var o=e.locateInGeometry(t,i);if(o!==Z.EXTERIOR)return o}}return Z.EXTERIOR}},{key:"isContained",value:function(t,n){return Z.EXTERIOR!==e.locate(t,n)}},{key:"locate",value:function(t,n){return n.isEmpty()?Z.EXTERIOR:n.getEnvelopeInternal().intersects(t)?e.locateInGeometry(t,n):Z.EXTERIOR}}]),e}(),Un=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getNextCW",value:function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)}},{key:"propagateSideLabels",value:function(t){for(var e=Z.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,tt.LEFT)!==Z.NONE&&(e=r.getLocation(t,tt.LEFT))}if(e===Z.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,tt.ON)===Z.NONE&&a.setLocation(t,tt.ON,i),a.isArea(t)){var u=a.getLocation(t,tt.LEFT),l=a.getLocation(t,tt.RIGHT);if(l!==Z.NONE){if(l!==i)throw new vt("side location conflict",s.getCoordinate());u===Z.NONE&&G.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),i=u}else G.isTrue(a.getLocation(t,tt.LEFT)===Z.NONE,"found single null side"),a.setLocation(t,tt.RIGHT,i),a.setLocation(t,tt.LEFT,i)}}}},{key:"getCoordinate",value:function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null}},{key:"print",value:function(t){xt.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)}},{key:"isAreaLabelsConsistent",value:function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,tt.LEFT);G.isTrue(r!==Z.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var s=o.next().getLabel();G.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,tt.LEFT),u=s.getLocation(t,tt.RIGHT);if(a===u)return!1;if(u!==i)return!1;i=a}return!0}},{key:"findIndex",value:function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return null===this._edgeList&&(this._edgeList=new pt(this._edgeMap.values())),this._edgeList}},{key:"getLocation",value:function(t,e,n){return this._ptInAreaLocation[t]===Z.NONE&&(this._ptInAreaLocation[t]=Xn.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]}},{key:"toString",value:function(){var t=new st;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()}},{key:"computeEdgeEndLabels",value:function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)}},{key:"computeLabelling",value:function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===Z.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),u=0;u<2;u++)if(a.isAnyNull(u)){var l=Z.NONE;if(e[u])l=Z.EXTERIOR;else{var h=s.getCoordinate();l=this.getLocation(u,h,t)}a.setAllLocationsIfNull(u,l)}}},{key:"getDegree",value:function(){return this._edgeMap.size()}},{key:"insertEdgeEnd",value:function(t,e){this._edgeMap.put(t,e),this._edgeList=null}}],[{key:"constructor_",value:function(){this._edgeMap=new Ze,this._edgeList=null,this._ptInAreaLocation=[Z.NONE,Z.NONE]}}]),e}(),Vn=function(e){r(s,e);var o=c(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new vt("no outgoing dirEdge found",this.getCoordinate());G.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}}},{key:"insert",value:function(t){var e=t;this.insertEdgeEnd(e,e)}},{key:"getRightmostEdge",value:function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return We.isNorthern(i)&&We.isNorthern(o)?n:We.isNorthern(i)||We.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(G.shouldNeverReachHere("found two horizontal edges incident on node"),null):r}},{key:"print",value:function(t){xt.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}}},{key:"getResultAreaEdges",value:function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new pt;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList}},{key:"updateLabelling",value:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)}},{key:"computeDepths",value:function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(tt.LEFT),r=t.getDepth(tt.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new vt("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],s=arguments[2],a=arguments[0];a<o;a++){var u=this._edgeList.get(a);u.setEdgeDepths(tt.RIGHT,s),s=u.getDepth(tt.LEFT)}return s}}},{key:"mergeSymLabels",value:function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),s=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;n=s,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(G.isTrue(null!==e,"found null for first outgoing dirEdge"),G.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))}},{key:"getOutgoingDegree",value:function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}}},{key:"getLabel",value:function(){return this._label}},{key:"findCoveredLineEdges",value:function(){for(var t=Z.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=Z.INTERIOR;break}if(r.isInResult()){t=Z.EXTERIOR;break}}}if(t===Z.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(i===Z.INTERIOR):(s.isInResult()&&(i=Z.EXTERIOR),a.isInResult()&&(i=Z.INTERIOR))}}},{key:"computeLabelling",value:function(t){f(i(s.prototype),"computeLabelling",this).call(this,t),this._label=new Ae(Z.NONE);for(var e=this.iterator();e.hasNext();)for(var n=e.next().getEdge().getLabel(),r=0;r<2;r++){var o=n.getLocation(r);o!==Z.INTERIOR&&o!==Z.BOUNDARY||this._label.setLocation(r,Z.INTERIOR)}}}],[{key:"constructor_",value:function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}}]),s}(Un),Zn=function(e){r(o,e);var i=c(o);function o(){return t(this,o),i.call(this)}return n(o,[{key:"createNode",value:function(t){return new Be(t,new Vn)}}]),o}(Qe),Hn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"compareTo",value:function(t){var n=t;return e.compareOriented(this._pts,this._orientation,n._pts,n._orientation)}},{key:"interfaces_",get:function(){return[k]}}],[{key:"constructor_",value:function(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=e.orientation(t)}},{key:"orientation",value:function(t){return 1===Wt.increasingDirection(t)}},{key:"compareOriented",value:function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,s=e?t.length:-1,a=r?n.length:-1,u=e?0:t.length-1,l=r?0:n.length-1;;){var h=t[u].compareTo(n[l]);if(0!==h)return h;var c=(u+=i)===s,f=(l+=o)===a;if(c&&!f)return-1;if(!c&&f)return 1;if(c&&f)return 0}}}]),e}(),Wn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"print",value:function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")}},{key:"addAll",value:function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())}},{key:"findEdgeIndex",value:function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1}},{key:"iterator",value:function(){return this._edges.iterator()}},{key:"getEdges",value:function(){return this._edges}},{key:"get",value:function(t){return this._edges.get(t)}},{key:"findEqualEdge",value:function(t){var e=new Hn(t.getCoordinates());return this._ocaMap.get(e)}},{key:"add",value:function(t){this._edges.add(t);var e=new Hn(t.getCoordinates());this._ocaMap.put(e,t)}}],[{key:"constructor_",value:function(){this._edges=new pt,this._ocaMap=new Ze}}]),e}(),Jn=function(){function e(){t(this,e)}return n(e,[{key:"processIntersections",value:function(t,e,n,r){}},{key:"isDone",value:function(){}}]),e}(),Kn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"isTrivialIntersection",value:function(t,n,r,i){if(t===r&&1===this._li.getIntersectionNum()){if(e.isAdjacentSegments(n,i))return!0;if(t.isClosed()){var o=t.size()-1;if(0===n&&i===o||0===i&&n===o)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this._properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this._hasProperInterior}},{key:"getLineIntersector",value:function(){return this._li}},{key:"hasProperIntersection",value:function(){return this._hasProper}},{key:"processIntersections",value:function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this._hasInterior}},{key:"interfaces_",get:function(){return[Jn]}}],[{key:"constructor_",value:function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t}},{key:"isAdjacentSegments",value:function(t,e){return 1===Math.abs(t-e)}}]),e}(),Qn=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)}},{key:"compareTo",value:function(t){var e=t;return this.compare(e.segmentIndex,e.dist)}},{key:"isEndPoint",value:function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0}},{key:"interfaces_",get:function(){return[k]}}],[{key:"constructor_",value:function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new j(t),this.segmentIndex=e,this.dist=n}}]),e}(),$n=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"print",value:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}}},{key:"addEndpoints",value:function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)}},{key:"createSplitEdge",value:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new j(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return i&&(o[s]=e.coord),new or(o,new Ae(this.edge._label))}},{key:"add",value:function(t,e,n){var r=new Qn(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)}},{key:"isIntersection",value:function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1}}],[{key:"constructor_",value:function(){this._nodeMap=new Ze,this.edge=null;var t=arguments[0];this.edge=t}}]),e}(),tr=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(e.isTrue(this._matrix[Z.INTERIOR][Z.INTERIOR])||e.isTrue(this._matrix[Z.INTERIOR][Z.BOUNDARY])||e.isTrue(this._matrix[Z.BOUNDARY][Z.INTERIOR])||e.isTrue(this._matrix[Z.BOUNDARY][Z.BOUNDARY]))&&this._matrix[Z.EXTERIOR][Z.INTERIOR]===Mt.FALSE&&this._matrix[Z.EXTERIOR][Z.BOUNDARY]===Mt.FALSE}},{key:"isCoveredBy",value:function(){return(e.isTrue(this._matrix[Z.INTERIOR][Z.INTERIOR])||e.isTrue(this._matrix[Z.INTERIOR][Z.BOUNDARY])||e.isTrue(this._matrix[Z.BOUNDARY][Z.INTERIOR])||e.isTrue(this._matrix[Z.BOUNDARY][Z.BOUNDARY]))&&this._matrix[Z.INTERIOR][Z.EXTERIOR]===Mt.FALSE&&this._matrix[Z.BOUNDARY][Z.EXTERIOR]===Mt.FALSE}},{key:"set",value:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),r=e%3;this._matrix[n][r]=Mt.toDimensionValue(t.charAt(e))}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];this._matrix[i][o]=s}}},{key:"isContains",value:function(){return e.isTrue(this._matrix[Z.INTERIOR][Z.INTERIOR])&&this._matrix[Z.EXTERIOR][Z.INTERIOR]===Mt.FALSE&&this._matrix[Z.EXTERIOR][Z.BOUNDARY]===Mt.FALSE}},{key:"setAtLeast",value:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),r=e%3;this.setAtLeast(n,r,Mt.toDimensionValue(t.charAt(e)))}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];this._matrix[i][o]<s&&(this._matrix[i][o]=s)}}},{key:"setAtLeastIfValid",value:function(t,e,n){t>=0&&e>=0&&this.setAtLeast(t,e,n)}},{key:"isWithin",value:function(){return e.isTrue(this._matrix[Z.INTERIOR][Z.INTERIOR])&&this._matrix[Z.INTERIOR][Z.EXTERIOR]===Mt.FALSE&&this._matrix[Z.BOUNDARY][Z.EXTERIOR]===Mt.FALSE}},{key:"isTouches",value:function(t,n){return t>n?this.isTouches(n,t):(t===Mt.A&&n===Mt.A||t===Mt.L&&n===Mt.L||t===Mt.L&&n===Mt.A||t===Mt.P&&n===Mt.A||t===Mt.P&&n===Mt.L)&&this._matrix[Z.INTERIOR][Z.INTERIOR]===Mt.FALSE&&(e.isTrue(this._matrix[Z.INTERIOR][Z.BOUNDARY])||e.isTrue(this._matrix[Z.BOUNDARY][Z.INTERIOR])||e.isTrue(this._matrix[Z.BOUNDARY][Z.BOUNDARY]))}},{key:"isOverlaps",value:function(t,n){return t===Mt.P&&n===Mt.P||t===Mt.A&&n===Mt.A?e.isTrue(this._matrix[Z.INTERIOR][Z.INTERIOR])&&e.isTrue(this._matrix[Z.INTERIOR][Z.EXTERIOR])&&e.isTrue(this._matrix[Z.EXTERIOR][Z.INTERIOR]):t===Mt.L&&n===Mt.L&&1===this._matrix[Z.INTERIOR][Z.INTERIOR]&&e.isTrue(this._matrix[Z.INTERIOR][Z.EXTERIOR])&&e.isTrue(this._matrix[Z.EXTERIOR][Z.INTERIOR])}},{key:"isEquals",value:function(t,n){return t===n&&e.isTrue(this._matrix[Z.INTERIOR][Z.INTERIOR])&&this._matrix[Z.INTERIOR][Z.EXTERIOR]===Mt.FALSE&&this._matrix[Z.BOUNDARY][Z.EXTERIOR]===Mt.FALSE&&this._matrix[Z.EXTERIOR][Z.INTERIOR]===Mt.FALSE&&this._matrix[Z.EXTERIOR][Z.BOUNDARY]===Mt.FALSE}},{key:"toString",value:function(){for(var t=new Qt("123456789"),e=0;e<3;e++)for(var n=0;n<3;n++)t.setCharAt(3*e+n,Mt.toDimensionSymbol(this._matrix[e][n]));return t.toString()}},{key:"setAll",value:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this._matrix[e][n]=t}},{key:"get",value:function(t,e){return this._matrix[t][e]}},{key:"transpose",value:function(){var t=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=t,t=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=t,t=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=t,this}},{key:"matches",value:function(t){if(9!==t.length)throw new x("Should be length 9: "+t);for(var n=0;n<3;n++)for(var r=0;r<3;r++)if(!e.matches(this._matrix[n][r],t.charAt(3*n+r)))return!1;return!0}},{key:"add",value:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this.setAtLeast(e,n,t.get(e,n))}},{key:"isDisjoint",value:function(){return this._matrix[Z.INTERIOR][Z.INTERIOR]===Mt.FALSE&&this._matrix[Z.INTERIOR][Z.BOUNDARY]===Mt.FALSE&&this._matrix[Z.BOUNDARY][Z.INTERIOR]===Mt.FALSE&&this._matrix[Z.BOUNDARY][Z.BOUNDARY]===Mt.FALSE}},{key:"isCrosses",value:function(t,n){return t===Mt.P&&n===Mt.L||t===Mt.P&&n===Mt.A||t===Mt.L&&n===Mt.A?e.isTrue(this._matrix[Z.INTERIOR][Z.INTERIOR])&&e.isTrue(this._matrix[Z.INTERIOR][Z.EXTERIOR]):t===Mt.L&&n===Mt.P||t===Mt.A&&n===Mt.P||t===Mt.A&&n===Mt.L?e.isTrue(this._matrix[Z.INTERIOR][Z.INTERIOR])&&e.isTrue(this._matrix[Z.EXTERIOR][Z.INTERIOR]):t===Mt.L&&n===Mt.L&&0===this._matrix[Z.INTERIOR][Z.INTERIOR]}},{key:"interfaces_",get:function(){return[w]}}],[{key:"constructor_",value:function(){if(this._matrix=null,0===arguments.length)this._matrix=Array(3).fill().map((function(){return Array(3)})),this.setAll(Mt.FALSE);else if(1===arguments.length)if("string"==typeof arguments[0]){var t=arguments[0];e.constructor_.call(this),this.set(t)}else if(arguments[0]instanceof e){var n=arguments[0];e.constructor_.call(this),this._matrix[Z.INTERIOR][Z.INTERIOR]=n._matrix[Z.INTERIOR][Z.INTERIOR],this._matrix[Z.INTERIOR][Z.BOUNDARY]=n._matrix[Z.INTERIOR][Z.BOUNDARY],this._matrix[Z.INTERIOR][Z.EXTERIOR]=n._matrix[Z.INTERIOR][Z.EXTERIOR],this._matrix[Z.BOUNDARY][Z.INTERIOR]=n._matrix[Z.BOUNDARY][Z.INTERIOR],this._matrix[Z.BOUNDARY][Z.BOUNDARY]=n._matrix[Z.BOUNDARY][Z.BOUNDARY],this._matrix[Z.BOUNDARY][Z.EXTERIOR]=n._matrix[Z.BOUNDARY][Z.EXTERIOR],this._matrix[Z.EXTERIOR][Z.INTERIOR]=n._matrix[Z.EXTERIOR][Z.INTERIOR],this._matrix[Z.EXTERIOR][Z.BOUNDARY]=n._matrix[Z.EXTERIOR][Z.BOUNDARY],this._matrix[Z.EXTERIOR][Z.EXTERIOR]=n._matrix[Z.EXTERIOR][Z.EXTERIOR]}}},{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){var t=arguments[0],n=arguments[1];return n===Mt.SYM_DONTCARE||n===Mt.SYM_TRUE&&(t>=0||t===Mt.TRUE)||n===Mt.SYM_FALSE&&t===Mt.FALSE||n===Mt.SYM_P&&t===Mt.P||n===Mt.SYM_L&&t===Mt.L||n===Mt.SYM_A&&t===Mt.A}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){var r=arguments[1];return new e(arguments[0]).matches(r)}}},{key:"isTrue",value:function(t){return t>=0||t===Mt.TRUE}}]),e}(),er=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"size",value:function(){return this._size}},{key:"addAll",value:function(t){return null===t||0===t.length?null:(this.ensureCapacity(this._size+t.length),xt.arraycopy(t,0,this._data,this._size,t.length),void(this._size+=t.length))}},{key:"ensureCapacity",value:function(t){if(t<=this._data.length)return null;var e=Math.max(t,2*this._data.length);this._data=At.copyOf(this._data,e)}},{key:"toArray",value:function(){var t=new Array(this._size).fill(null);return xt.arraycopy(this._data,0,t,0,this._size),t}},{key:"add",value:function(t){this.ensureCapacity(this._size+1),this._data[this._size]=t,++this._size}}],[{key:"constructor_",value:function(){if(this._data=null,this._size=0,0===arguments.length)e.constructor_.call(this,10);else if(1===arguments.length){var t=arguments[0];this._data=new Array(t).fill(null)}}}]),e}(),nr=function(){function e(){t(this,e)}return n(e,[{key:"getChainStartIndices",value:function(t){var e=0,n=new er(Math.trunc(t.length/2));n.add(e);do{var r=this.findChainEnd(t,e);n.add(r),e=r}while(e<t.length-1);return n.toArray()}},{key:"findChainEnd",value:function(t,e){for(var n=We.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&We.quadrant(t[r-1],t[r])===n;)r++;return r-1}},{key:"OLDgetChainStartIndices",value:function(t){var n=0,r=new pt;r.add(n);do{var i=this.findChainEnd(t,n);r.add(i),n=i}while(n<t.length-1);return e.toIntArray(r)}}],[{key:"toIntArray",value:function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e}}]),e}(),rr=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n}},{key:"getMinX",value:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n}},{key:"computeIntersectsForChain",value:function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],l=arguments[5];if(o-i==1&&u-a==1)return l.addIntersections(this.e,i,s.e,a),null;if(!this.overlaps(i,o,s,a,u))return null;var h=Math.trunc((i+o)/2),c=Math.trunc((a+u)/2);i<h&&(a<c&&this.computeIntersectsForChain(i,h,s,a,c,l),c<u&&this.computeIntersectsForChain(i,h,s,c,u,l)),h<o&&(a<c&&this.computeIntersectsForChain(h,o,s,a,c,l),c<u&&this.computeIntersectsForChain(h,o,s,c,u,l))}}},{key:"overlaps",value:function(t,e,n,r,i){return U.intersects(this.pts[t],this.pts[e],n.pts[r],n.pts[i])}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)}}],[{key:"constructor_",value:function(){this.e=null,this.pts=null,this.startIndex=null;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new nr;this.startIndex=e.getChainStartIndices(this.pts)}}]),e}(),ir=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"getDepth",value:function(t,e){return this._depth[t][e]}},{key:"setDepth",value:function(t,e,n){this._depth[t][e]=n}},{key:"isNull",value:function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var n=0;n<3;n++)if(this._depth[t][n]!==e.NULL_VALUE)return!1;return!0}if(1===arguments.length){var r=arguments[0];return this._depth[r][1]===e.NULL_VALUE}if(2===arguments.length){var i=arguments[0],o=arguments[1];return this._depth[i][o]===e.NULL_VALUE}}},{key:"normalize",value:function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}}},{key:"getDelta",value:function(t){return this._depth[t][tt.RIGHT]-this._depth[t][tt.LEFT]}},{key:"getLocation",value:function(t,e){return this._depth[t][e]<=0?Z.EXTERIOR:Z.INTERIOR}},{key:"toString",value:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}},{key:"add",value:function(){if(1===arguments.length)for(var t=arguments[0],n=0;n<2;n++)for(var r=1;r<3;r++){var i=t.getLocation(n,r);i!==Z.EXTERIOR&&i!==Z.INTERIOR||(this.isNull(n,r)?this._depth[n][r]=e.depthAtLocation(i):this._depth[n][r]+=e.depthAtLocation(i))}else if(3===arguments.length){var o=arguments[0],s=arguments[1];arguments[2]===Z.INTERIOR&&this._depth[o][s]++}}}],[{key:"constructor_",value:function(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var t=0;t<2;t++)for(var n=0;n<3;n++)this._depth[t][n]=e.NULL_VALUE}},{key:"depthAtLocation",value:function(t){return t===Z.EXTERIOR?0:t===Z.INTERIOR?1:e.NULL_VALUE}}]),e}();ir.NULL_VALUE=-1;var or=function(e){r(s,e);var o=c(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:"getDepth",value:function(){return this._depth}},{key:"getCollapsedEdge",value:function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new s(t,Ae.toLineLabel(this._label))}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(t){this._isIsolated=t}},{key:"setName",value:function(t){this._name=t}},{key:"equals",value:function(t){if(!(t instanceof s))return!1;var e=t;if(this.pts.length!==e.pts.length)return!1;for(var n=!0,r=!0,i=this.pts.length,o=0;o<this.pts.length;o++)if(this.pts[o].equals2D(e.pts[o])||(n=!1),this.pts[o].equals2D(e.pts[--i])||(r=!1),!n&&!r)return!1;return!0}},{key:"getCoordinate",value:function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}}},{key:"print",value:function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)}},{key:"computeIM",value:function(t){s.updateIM(this._label,t)}},{key:"isCollapsed",value:function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this._depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")}},{key:"getMonotoneChainEdge",value:function(){return null===this._mce&&(this._mce=new rr(this)),this._mce}},{key:"getEnvelope",value:function(){if(null===this._env){this._env=new U;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env}},{key:"addIntersection",value:function(t,e,n,r){var i=new j(t.getIntersection(r)),o=e,s=t.getEdgeDistance(n,r),a=o+1;if(a<this.pts.length){var u=this.pts[a];i.equals2D(u)&&(o=a,s=0)}this.eiList.add(i,o,s)}},{key:"toString",value:function(){var t=new Qt;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()}},{key:"isPointwiseEqual",value:function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0}},{key:"setDepthDelta",value:function(t){this._depthDelta=t}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)}}],[{key:"constructor_",value:function(){if(this.pts=null,this._env=null,this.eiList=new $n(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new ir,this._depthDelta=0,1===arguments.length){var t=arguments[0];s.constructor_.call(this,t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.pts=e,this._label=n}}},{key:"updateIM",value:function(){if(!(2===arguments.length&&arguments[1]instanceof tr&&arguments[0]instanceof Ae))return f(i(s),"updateIM",this).apply(this,arguments);var t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,tt.ON),t.getLocation(1,tt.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,tt.LEFT),t.getLocation(1,tt.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,tt.RIGHT),t.getLocation(1,tt.RIGHT),2))}}]),s}(Ge),sr=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"setWorkingPrecisionModel",value:function(t){this._workingPrecisionModel=t}},{key:"insertUniqueEdge",value:function(t){var n=this._edgeList.findEqualEdge(t);if(null!==n){var r=n.getLabel(),i=t.getLabel();n.isPointwiseEqual(t)||(i=new Ae(t.getLabel())).flip(),r.merge(i);var o=e.depthDelta(i),s=n.getDepthDelta()+o;n.setDepthDelta(s)}else this._edgeList.add(t),t.setDepthDelta(e.depthDelta(t.getLabel()))}},{key:"buildSubgraphs",value:function(t,e){for(var n=new pt,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),s=new Dn(n).getDepth(o);i.computeDepth(s),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}}},{key:"createSubgraphs",value:function(t){for(var e=new pt,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new mt;i.create(r),e.add(i)}}return an.sort(e,an.reverseOrder()),e}},{key:"createEmptyResultGeometry",value:function(){return this._geomFact.createPolygon()}},{key:"getNoder",value:function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new Ln,n=new Ce;return n.setPrecisionModel(t),e.setSegmentIntersector(new Kn(n)),e}},{key:"buffer",value:function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new An(n,this._bufParams),i=new Yn(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new $e(new Zn),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new tn(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)}},{key:"computeNodedEdges",value:function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=i.getData(),a=new or(i.getCoordinates(),new Ae(s));this.insertUniqueEdge(a)}}}},{key:"setNoder",value:function(t){this._workingNoder=t}}],[{key:"constructor_",value:function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Wn;var t=arguments[0];this._bufParams=t}},{key:"depthDelta",value:function(t){var e=t.getLocation(0,tt.LEFT),n=t.getLocation(0,tt.RIGHT);return e===Z.INTERIOR&&n===Z.EXTERIOR?1:e===Z.EXTERIOR&&n===Z.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(t){for(var e=new ae,n=new pt;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)}}]),e}(),ar=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"rescale",value:function(){if(ot(arguments[0],H))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&xt.out.println(n)}}},{key:"scale",value:function(){if(ot(arguments[0],H)){for(var t=arguments[0],e=new pt(t.size()),n=t.iterator();n.hasNext();){var r=n.next();e.add(new kn(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),s=0;s<i.length;s++)o[s]=new j(Math.round((i[s].x-this._offsetX)*this._scaleFactor),Math.round((i[s].y-this._offsetY)*this._scaleFactor),i[s].getZ());return Wt.removeRepeatedPoints(o)}}},{key:"isIntegerPrecision",value:function(){return 1===this._scaleFactor}},{key:"getNodedSubstrings",value:function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t}},{key:"computeNodes",value:function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)}},{key:"interfaces_",get:function(){return[Sn]}}],[{key:"constructor_",value:function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],n=arguments[1];e.constructor_.call(this,t,n,0,0)}else if(4===arguments.length){var r=arguments[0],i=arguments[1];this._noder=r,this._scaleFactor=i,this._isScaled=!this.isIntegerPrecision()}}}]),e}(),ur=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"checkEndPtVertexIntersections",value:function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new F("found endpt/interior pt intersection at index "+o+" :pt "+n)}},{key:"checkInteriorIntersections",value:function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],s=i.getCoordinates(),a=o.getCoordinates(),u=0;u<s.length-1;u++)for(var l=0;l<a.length-1;l++)this.checkInteriorIntersections(i,u,o,l);else if(4===arguments.length){var h=arguments[0],c=arguments[1],f=arguments[2],g=arguments[3];if(h===f&&c===g)return null;var v=h.getCoordinates()[c],d=h.getCoordinates()[c+1],p=f.getCoordinates()[g],y=f.getCoordinates()[g+1];if(this._li.computeIntersection(v,d,p,y),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,v,d)||this.hasInteriorIntersection(this._li,p,y)))throw new F("found non-noded intersection at "+v+"-"+d+" and "+p+"-"+y)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])}},{key:"hasInteriorIntersection",value:function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1}},{key:"checkCollapse",value:function(t,n,r){if(t.equals(r))throw new F("found non-noded collapse at "+e.fact.createLineString([t,n,r]))}}],[{key:"constructor_",value:function(){this._li=new Ce,this._segStrings=null;var t=arguments[0];this._segStrings=t}}]),e}();ur.fact=new ae;var lr=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"intersectsScaled",value:function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return G.isTrue(!(s&&a),"Found bad envelope test"),a}},{key:"initCorners",value:function(t){var e=.5;this._minx=t.x-e,this._maxx=t.x+e,this._miny=t.y-e,this._maxy=t.y+e,this._corner[0]=new j(this._maxx,this._maxy),this._corner[1]=new j(this._minx,this._maxy),this._corner[2]=new j(this._minx,this._miny),this._corner[3]=new j(this._maxx,this._miny)}},{key:"intersects",value:function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}},{key:"scale",value:function(t){return Math.round(t*this._scaleFactor)}},{key:"getCoordinate",value:function(){return this._originalPt}},{key:"copyScaled",value:function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)}},{key:"getSafeEnvelope",value:function(){if(null===this._safeEnv){var t=e.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new U(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv}},{key:"intersectsPixelClosure",value:function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))}},{key:"intersectsToleranceSquare",value:function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&r||t.equals(this._pt)||e.equals(this._pt)))))}},{key:"addSnappedNode",value:function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)}}],[{key:"constructor_",value:function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new x("Scale factor must be non-zero");1!==e&&(this._pt=new j(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new j,this._p1Scaled=new j),this.initCorners(this._pt)}}]),e}();lr.SAFE_ENV_EXPANSION_FACTOR=.75;var hr=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"select",value:function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}}}],[{key:"constructor_",value:function(){this.selectedSegment=new wn}}]),e}(),cr=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"snap",value:function(){if(1===arguments.length){var e=arguments[0];return this.snap(e,null,-1)}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=r.getSafeEnvelope(),a=new fr(r,i,o);return this._index.query(s,new(function(){function e(){t(this,e)}return n(e,[{key:"interfaces_",get:function(){return[hn]}},{key:"visitItem",value:function(t){t.select(s,a)}}]),e}())),a.isNodeAdded()}}}],[{key:"constructor_",value:function(){this._index=null;var t=arguments[0];this._index=t}}]),e}(),fr=function(e){r(s,e);var o=c(s);function s(){var e;return t(this,s),e=o.call(this),s.constructor_.apply(l(e),arguments),e}return n(s,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){if(!(2===arguments.length&&Number.isInteger(arguments[1])&&arguments[0]instanceof In))return f(i(s.prototype),"select",this).apply(this,arguments);var t=arguments[1],e=arguments[0].getContext();if(this._parentEdge===e&&(t===this._hotPixelVertexIndex||t+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(e,t)}}],[{key:"constructor_",value:function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._hotPixel=t,this._parentEdge=e,this._hotPixelVertexIndex=n}}]),s}(hr);cr.HotPixelSnapAction=fr;var gr=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"processIntersections",value:function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this._interiorIntersections}},{key:"interfaces_",get:function(){return[Jn]}}],[{key:"constructor_",value:function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new pt}}]),e}(),vr=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"checkCorrectness",value:function(t){var e=kn.getNodedSubstrings(t),n=new ur(e);try{n.checkValid()}catch(t){if(!(t instanceof _))throw t;t.printStackTrace()}}},{key:"getNodedSubstrings",value:function(){return kn.getNodedSubstrings(this._nodedSegStrings)}},{key:"snapRound",value:function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)}},{key:"findInteriorIntersections",value:function(t,e){var n=new gr(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){if(ot(arguments[0],H))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof kn)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new lr(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}}},{key:"computeNodes",value:function(t){this._nodedSegStrings=t,this._noder=new Ln,this._pointSnapper=new cr(this._noder.getIndex()),this.snapRound(t,this._li)}},{key:"computeIntersectionSnaps",value:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new lr(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}}},{key:"interfaces_",get:function(){return[Sn]}}],[{key:"constructor_",value:function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new Ce,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()}}]),e}(),dr=function(){function e(){t(this,e),e.constructor_.apply(this,arguments)}return n(e,[{key:"bufferFixedPrecision",value:function(t){var e=new ar(new vr(new ie(1)),t.getScale()),n=new sr(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)}},{key:"bufferReducedPrecision",value:function(){if(0===arguments.length){for(var t=e.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision(t)}catch(t){if(!(t instanceof vt))throw t;this._saveException=t}if(null!==this._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=e.precisionScaleFactor(this._argGeom,this._distance,n),i=new ie(r);this.bufferFixedPrecision(i)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===ie.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(t){this._bufParams.setQuadrantSegments(t)}},{key:"bufferOriginalPrecision",value:function(){try{var t=new sr(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof F))throw t;this._saveException=t}}},{key:"getResultGeometry",value:function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry}},{key:"setEndCapStyle",value:function(t){this._bufParams.setEndCapStyle(t)}}],[{key:"constructor_",value:function(){if(this._argGeom=null,this._distance=null,this._bufParams=new y,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}}},{key:"bufferOp",value:function(){if(2===arguments.length){var t=arguments[1];return new e(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof V&&"number"==typeof arguments[1]){var n=arguments[1],r=arguments[2],i=new e(arguments[0]);return i.setQuadrantSegments(r),i.getResultGeometry(n)}if(arguments[2]instanceof y&&arguments[0]instanceof V&&"number"==typeof arguments[1]){var o=arguments[1];return new e(arguments[0],arguments[2]).getResultGeometry(o)}}else if(4===arguments.length){var s=arguments[1],a=arguments[2],u=arguments[3],l=new e(arguments[0]);return l.setQuadrantSegments(a),l.setEndCapStyle(u),l.getResultGeometry(s)}}},{key:"precisionScaleFactor",value:function(t,e,n){var r=t.getEnvelopeInternal(),i=Et.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)}}]),e}();dr.CAP_ROUND=y.CAP_ROUND,dr.CAP_BUTT=y.CAP_FLAT,dr.CAP_FLAT=y.CAP_FLAT,dr.CAP_SQUARE=y.CAP_SQUARE,dr.MAX_PRECISION_DIGITS=12;var pr=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],yr=function(){function e(n){t(this,e),this.geometryFactory=n||new ae}return n(e,[{key:"read",value:function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!mr[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==pr.indexOf(n)?mr[n].call(this,e.coordinates):"GeometryCollection"===n?mr[n].call(this,e.geometries):mr[n].call(this,e)}},{key:"write",value:function(t){var e=t.getGeometryType();if(!_r[e])throw new Error("Geometry is not supported");return _r[e].call(this,t)}}]),e}(),mr={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!mr[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=mr.bbox.call(this,t.bbox)),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.call(this,t.bbox)),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(a(j,g(r)))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new j(t[0],t[1]),new j(t[2],t[1]),new j(t[2],t[3]),new j(t[0],t[3]),new j(t[0],t[1])])},Point:function(t){var e=a(j,g(t));return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(mr.Point.call(this,t[n]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=mr.coordinates.call(this,t);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(mr.LineString.call(this,t[n]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=mr.coordinates.call(this,t[0]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],s=mr.coordinates.call(this,o),a=this.geometryFactory.createLinearRing(s);r.push(a)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(mr.Polygon.call(this,r))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},_r={coordinate:function(t){var e=[t.x,t.y];return t.z&&e.push(t.z),t.m&&e.push(t.m),e},Point:function(t){return{type:"Point",coordinates:_r.coordinate.call(this,t.getCoordinate())}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=_r.Point.call(this,r);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(_r.coordinate.call(this,i))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=_r.LineString.call(this,r);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=_r.LineString.call(this,t._shell);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=_r.LineString.call(this,i);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=_r.Polygon.call(this,r);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(_r[i].call(this,r))}return{type:"GeometryCollection",geometries:e}}};return{BufferOp:dr,GeoJSONReader:function(){function e(n){t(this,e),this.parser=new yr(n||new ae)}return n(e,[{key:"read",value:function(t){return this.parser.read(t)}}]),e}(),GeoJSONWriter:function(){function e(){t(this,e),this.parser=new yr(this.geometryFactory)}return n(e,[{key:"write",value:function(t){return this.parser.write(t)}}]),e}()}}()}(Fn)),Fn.exports),Gn=mn(qn);function Bn(){return new Yn}function Yn(){this.reset()}Yn.prototype={constructor:Yn,reset:function(){this.s=this.t=0},add:function(t){jn(zn,t,this.t),jn(this,zn.s,this.s),this.s?this.t+=zn.t:this.s=zn.t},valueOf:function(){return this.s}};var zn=new Yn;function jn(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var Xn=1e-6,Un=Math.PI,Vn=Un/2,Zn=Un/4,Hn=2*Un,Wn=180/Un,Jn=Un/180,Kn=Math.abs,Qn=Math.atan,$n=Math.atan2,tr=Math.cos,er=Math.sin,nr=Math.sqrt;function rr(t){return t>1?0:t<-1?Un:Math.acos(t)}function ir(t){return t>1?Vn:t<-1?-Vn:Math.asin(t)}function or(){}function sr(t,e){t&&ur.hasOwnProperty(t.type)&&ur[t.type](t,e)}var ar={Feature:function(t,e){sr(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)sr(n[r].geometry,e)}},ur={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){lr(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)lr(n[r],e,0)},Polygon:function(t,e){hr(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)hr(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)sr(n[r],e)}};function lr(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function hr(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)lr(t[n],e,1);e.polygonEnd()}function cr(t){return[$n(t[1],t[0]),ir(t[2])]}function fr(t){var e=t[0],n=t[1],r=tr(n);return[r*tr(e),r*er(e),er(n)]}function gr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function vr(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function dr(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function pr(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function yr(t){var e=nr(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function mr(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function _r(t,e){return[t>Un?t-Hn:t<-Un?t+Hn:t,e]}function xr(t){return function(e,n){return[(e+=t)>Un?e-Hn:e<-Un?e+Hn:e,n]}}function Er(t){var e=xr(t);return e.invert=xr(-t),e}function kr(t,e){var n=tr(t),r=er(t),i=tr(e),o=er(e);function s(t,e){var s=tr(e),a=tr(t)*s,u=er(t)*s,l=er(e),h=l*n+a*r;return[$n(u*i-h*o,a*n-l*r),ir(h*i+u*o)]}return s.invert=function(t,e){var s=tr(e),a=tr(t)*s,u=er(t)*s,l=er(e),h=l*i-u*o;return[$n(u*i+l*o,a*n+h*r),ir(h*n-a*r)]},s}function wr(t,e){(e=fr(e))[0]-=t,yr(e);var n=rr(-e[1]);return((-e[2]<0?-n:n)+Hn-Xn)%Hn}function br(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:or,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Ir(t,e){return Kn(t[0]-e[0])<Xn&&Kn(t[1]-e[1])<Xn}function Nr(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Sr(t,e,n,r,i){var o,s,a=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],s=t[e];if(Ir(r,s)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else a.push(n=new Nr(r,t,null,!0)),u.push(n.o=new Nr(r,null,n,!1)),a.push(n=new Nr(s,t,null,!1)),u.push(n.o=new Nr(s,null,n,!0))}})),a.length){for(u.sort(e),Mr(a),Mr(u),o=0,s=u.length;o<s;++o)u[o].e=n=!n;for(var l,h,c=a[0];;){for(var f=c,g=!0;f.v;)if((f=f.n)===c)return;l=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(g)for(o=0,s=l.length;o<s;++o)i.point((h=l[o])[0],h[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(g)for(l=f.p.z,o=l.length-1;o>=0;--o)i.point((h=l[o])[0],h[1]);else r(f.x,f.p.x,-1,i);f=f.p}l=(f=f.o).z,g=!g}while(!f.v);i.lineEnd()}}}function Mr(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Lr(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Pr(t){for(var e,n,r,i=t.length,o=-1,s=0;++o<i;)s+=t[o].length;for(n=new Array(s);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--s]=r[e];return n}Bn(),Bn(),Bn(),_r.invert=_r,function(t){var e;1===t.length&&(e=t,t=function(t,n){return Lr(e(t),n)})}(Lr);var Cr=1e9,Tr=-1e9;function Or(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,a,l){var h=0,c=0;if(null==i||(h=s(i,a))!==(c=s(o,a))||u(i,o)<0^a>0)do{l.point(0===h||3===h?t:n,h>1?r:e)}while((h=(h+a+4)%4)!==c);else l.point(o[0],o[1])}function s(r,i){return Kn(r[0]-t)<Xn?i>0?0:3:Kn(r[0]-n)<Xn?i>0?2:1:Kn(r[1]-e)<Xn?i>0?1:0:i>0?3:2}function a(t,e){return u(t.x,e.x)}function u(t,e){var n=s(t,1),r=s(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){var u,l,h,c,f,g,v,d,p,y,m,_=s,x=br(),E={point:k,lineStart:function(){E.point=w,l&&l.push(h=[]);y=!0,p=!1,v=d=NaN},lineEnd:function(){u&&(w(c,f),g&&p&&x.rejoin(),u.push(x.result()));E.point=k,p&&_.lineEnd()},polygonStart:function(){_=x,u=[],l=[],m=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=l.length;n<i;++n)for(var o,s,a=l[n],u=1,h=a.length,c=a[0],f=c[0],g=c[1];u<h;++u)o=f,s=g,f=(c=a[u])[0],g=c[1],s<=r?g>r&&(f-o)*(r-s)>(g-s)*(t-o)&&++e:g<=r&&(f-o)*(r-s)<(g-s)*(t-o)&&--e;return e}(),n=m&&e,i=(u=Pr(u)).length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),i&&Sr(u,a,e,o,s),s.polygonEnd());_=s,u=l=h=null}};function k(t,e){i(t,e)&&_.point(t,e)}function w(o,s){var a=i(o,s);if(l&&h.push([o,s]),y)c=o,f=s,g=a,y=!1,a&&(_.lineStart(),_.point(o,s));else if(a&&p)_.point(o,s);else{var u=[v=Math.max(Tr,Math.min(Cr,v)),d=Math.max(Tr,Math.min(Cr,d))],x=[o=Math.max(Tr,Math.min(Cr,o)),s=Math.max(Tr,Math.min(Cr,s))];!function(t,e,n,r,i,o){var s,a=t[0],u=t[1],l=0,h=1,c=e[0]-a,f=e[1]-u;if(s=n-a,c||!(s>0)){if(s/=c,c<0){if(s<l)return;s<h&&(h=s)}else if(c>0){if(s>h)return;s>l&&(l=s)}if(s=i-a,c||!(s<0)){if(s/=c,c<0){if(s>h)return;s>l&&(l=s)}else if(c>0){if(s<l)return;s<h&&(h=s)}if(s=r-u,f||!(s>0)){if(s/=f,f<0){if(s<l)return;s<h&&(h=s)}else if(f>0){if(s>h)return;s>l&&(l=s)}if(s=o-u,f||!(s<0)){if(s/=f,f<0){if(s>h)return;s>l&&(l=s)}else if(f>0){if(s<l)return;s<h&&(h=s)}return l>0&&(t[0]=a+l*c,t[1]=u+l*f),h<1&&(e[0]=a+h*c,e[1]=u+h*f),!0}}}}}(u,x,t,e,n,r)?a&&(_.lineStart(),_.point(o,s),m=!1):(p||(_.lineStart(),_.point(u[0],u[1])),_.point(x[0],x[1]),a||_.lineEnd(),m=!1)}v=o,d=s,p=a}return E}}var Rr=Bn();function Ar(t){return t}Bn(),Bn(),Bn();var Dr=1/0,Fr=Dr,qr=-Dr,Gr=qr,Br={point:function(t,e){t<Dr&&(Dr=t);t>qr&&(qr=t);e<Fr&&(Fr=e);e>Gr&&(Gr=e)},lineStart:or,lineEnd:or,polygonStart:or,polygonEnd:or,result:function(){var t=[[Dr,Fr],[qr,Gr]];return qr=Gr=-(Fr=Dr=1/0),t}};function Yr(t,e,n,r){return function(i,o){var s,a,u,l=e(o),h=i.invert(r[0],r[1]),c=br(),f=e(c),g=!1,v={point:d,lineStart:y,lineEnd:m,polygonStart:function(){v.point=_,v.lineStart=x,v.lineEnd=E,a=[],s=[]},polygonEnd:function(){v.point=d,v.lineStart=y,v.lineEnd=m,a=Pr(a);var t=function(t,e){var n=e[0],r=e[1],i=[er(n),-tr(n),0],o=0,s=0;Rr.reset();for(var a=0,u=t.length;a<u;++a)if(h=(l=t[a]).length)for(var l,h,c=l[h-1],f=c[0],g=c[1]/2+Zn,v=er(g),d=tr(g),p=0;p<h;++p,f=m,v=x,d=E,c=y){var y=l[p],m=y[0],_=y[1]/2+Zn,x=er(_),E=tr(_),k=m-f,w=k>=0?1:-1,b=w*k,I=b>Un,N=v*x;if(Rr.add($n(N*w*er(b),d*E+N*tr(b))),o+=I?k+w*Hn:k,I^f>=n^m>=n){var S=vr(fr(c),fr(y));yr(S);var M=vr(i,S);yr(M);var L=(I^k>=0?-1:1)*ir(M[2]);(r>L||r===L&&(S[0]||S[1]))&&(s+=I^k>=0?1:-1)}}return(o<-1e-6||o<Xn&&Rr<-1e-6)^1&s}(s,h);a.length?(g||(o.polygonStart(),g=!0),Sr(a,jr,t,n,o)):t&&(g||(o.polygonStart(),g=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),g&&(o.polygonEnd(),g=!1),a=s=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function d(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function p(t,e){var n=i(t,e);l.point(n[0],n[1])}function y(){v.point=p,l.lineStart()}function m(){v.point=d,l.lineEnd()}function _(t,e){u.push([t,e]);var n=i(t,e);f.point(n[0],n[1])}function x(){f.lineStart(),u=[]}function E(){_(u[0][0],u[0][1]),f.lineEnd();var t,e,n,r,i=f.clean(),l=c.result(),h=l.length;if(u.pop(),s.push(u),u=null,h)if(1&i){if((e=(n=l[0]).length-1)>0){for(g||(o.polygonStart(),g=!0),o.lineStart(),t=0;t<e;++t)o.point((r=n[t])[0],r[1]);o.lineEnd()}}else h>1&&2&i&&l.push(l.pop().concat(l.shift())),a.push(l.filter(zr))}return v}}function zr(t){return t.length>1}function jr(t,e){return((t=t.x)[0]<0?t[1]-Vn-Xn:Vn-t[1])-((e=e.x)[0]<0?e[1]-Vn-Xn:Vn-e[1])}Bn();var Xr=Yr((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?Un:-Un,u=Kn(o-n);Kn(u-Un)<Xn?(t.point(n,r=(r+s)/2>0?Vn:-Vn),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),t.point(o,r),e=0):i!==a&&u>=Un&&(Kn(n-i)<Xn&&(n-=i*Xn),Kn(o-a)<Xn&&(o-=a*Xn),r=function(t,e,n,r){var i,o,s=er(t-n);return Kn(s)>Xn?Qn((er(e)*(o=tr(r))*er(n)-er(r)*(i=tr(e))*er(t))/(i*o*s)):(e+r)/2}(n,r,o,s),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),e=0),t.point(n=o,r=s),i=a},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*Vn,r.point(-Un,i),r.point(0,i),r.point(Un,i),r.point(Un,0),r.point(Un,-i),r.point(0,-i),r.point(-Un,-i),r.point(-Un,0),r.point(-Un,i);else if(Kn(t[0]-e[0])>Xn){var o=t[0]<e[0]?Un:-Un;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-Un,-Vn]);function Ur(t,e){var n=tr(t),r=n>0,i=Kn(n)>Xn;function o(t,e){return tr(t)*tr(e)>n}function s(t,e,r){var i=[1,0,0],o=vr(fr(t),fr(e)),s=gr(o,o),a=o[0],u=s-a*a;if(!u)return!r&&t;var l=n*s/u,h=-n*a/u,c=vr(i,o),f=pr(i,l);dr(f,pr(o,h));var g=c,v=gr(f,g),d=gr(g,g),p=v*v-d*(gr(f,f)-1);if(!(p<0)){var y=nr(p),m=pr(g,(-v-y)/d);if(dr(m,f),m=cr(m),!r)return m;var _,x=t[0],E=e[0],k=t[1],w=e[1];E<x&&(_=x,x=E,E=_);var b=E-x,I=Kn(b-Un)<Xn;if(!I&&w<k&&(_=k,k=w,w=_),I||b<Xn?I?k+w>0^m[1]<(Kn(m[0]-x)<Xn?k:w):k<=m[1]&&m[1]<=w:b>Un^(x<=m[0]&&m[0]<=E)){var N=pr(g,(-v+y)/d);return dr(N,f),[m,cr(N)]}}}function a(e,n){var i=r?t:Un-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return Yr(o,(function(t){var e,n,u,l,h;return{lineStart:function(){l=u=!1,h=1},point:function(c,f){var g,v=[c,f],d=o(c,f),p=r?d?0:a(c,f):d?a(c+(c<0?Un:-Un),f):0;if(!e&&(l=u=d)&&t.lineStart(),d!==u&&(!(g=s(e,v))||Ir(e,g)||Ir(v,g))&&(v[0]+=Xn,v[1]+=Xn,d=o(v[0],v[1])),d!==u)h=0,d?(t.lineStart(),g=s(v,e),t.point(g[0],g[1])):(g=s(e,v),t.point(g[0],g[1]),t.lineEnd()),e=g;else if(i&&e&&r^d){var y;p&n||!(y=s(v,e,!0))||(h=0,r?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!d||e&&Ir(e,v)||t.point(v[0],v[1]),e=v,u=d,n=p},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return h|(l&&u)<<1}}}),(function(n,r,i,o){!function(t,e,n,r,i,o){if(n){var s=tr(e),a=er(e),u=r*n;null==i?(i=e+r*Hn,o=e-u/2):(i=wr(s,i),o=wr(s,o),(r>0?i<o:i>o)&&(i+=r*Hn));for(var l,h=i;r>0?h>o:h<o;h-=u)l=cr([s,-a*tr(h),-a*er(h)]),t.point(l[0],l[1])}}(o,t,e,i,n,r)}),r?[0,-t]:[-Un,t-Un])}function Vr(t){return function(e){var n=new Zr;for(var r in t)n[r]=t[r];return n.stream=e,n}}function Zr(){}function Hr(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),function(t,e){t&&ar.hasOwnProperty(t.type)?ar[t.type](t,e):sr(t,e)}(n,t.stream(Br));var s=Br.result(),a=Math.min(r/(s[1][0]-s[0][0]),i/(s[1][1]-s[0][1])),u=+e[0][0]+(r-a*(s[1][0]+s[0][0]))/2,l=+e[0][1]+(i-a*(s[1][1]+s[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*a).translate([u,l])}Zr.prototype={constructor:Zr,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Wr=16,Jr=tr(30*Jn);function Kr(t,e){return+e?function(t,e){function n(r,i,o,s,a,u,l,h,c,f,g,v,d,p){var y=l-r,m=h-i,_=y*y+m*m;if(_>4*e&&d--){var x=s+f,E=a+g,k=u+v,w=nr(x*x+E*E+k*k),b=ir(k/=w),I=Kn(Kn(k)-1)<Xn||Kn(o-c)<Xn?(o+c)/2:$n(E,x),N=t(I,b),S=N[0],M=N[1],L=S-r,P=M-i,C=m*L-y*P;(C*C/_>e||Kn((y*L+m*P)/_-.5)>.3||s*f+a*g+u*v<Jr)&&(n(r,i,o,s,a,u,S,M,I,x/=w,E/=w,k,d,p),p.point(S,M),n(S,M,I,x,E,k,l,h,c,f,g,v,d,p))}}return function(e){var r,i,o,s,a,u,l,h,c,f,g,v,d={point:p,lineStart:y,lineEnd:_,polygonStart:function(){e.polygonStart(),d.lineStart=x},polygonEnd:function(){e.polygonEnd(),d.lineStart=y}};function p(n,r){n=t(n,r),e.point(n[0],n[1])}function y(){h=NaN,d.point=m,e.lineStart()}function m(r,i){var o=fr([r,i]),s=t(r,i);n(h,c,l,f,g,v,h=s[0],c=s[1],l=r,f=o[0],g=o[1],v=o[2],Wr,e),e.point(h,c)}function _(){d.point=p,e.lineEnd()}function x(){y(),d.point=E,d.lineEnd=k}function E(t,e){m(r=t,e),i=h,o=c,s=f,a=g,u=v,d.point=m}function k(){n(h,c,l,f,g,v,i,o,r,s,a,u,Wr,e),d.lineEnd=_,_()}return d}}(t,e):function(t){return Vr({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var Qr=Vr({point:function(t,e){this.stream.point(t*Jn,e*Jn)}});function $r(t){return function(t){var e,n,r,i,o,s,a,u,l,h,c=150,f=480,g=250,v=0,d=0,p=0,y=0,m=0,_=null,x=Xr,E=null,k=Ar,w=.5,b=Kr(S,w);function I(t){return[(t=o(t[0]*Jn,t[1]*Jn))[0]*c+n,r-t[1]*c]}function N(t){return(t=o.invert((t[0]-n)/c,(r-t[1])/c))&&[t[0]*Wn,t[1]*Wn]}function S(t,i){return[(t=e(t,i))[0]*c+n,r-t[1]*c]}function M(){o=mr(i=function(t,e,n){return(t%=Hn)?e||n?mr(Er(t),kr(e,n)):Er(t):e||n?kr(e,n):_r}(p,y,m),e);var t=e(v,d);return n=f-t[0]*c,r=g+t[1]*c,L()}function L(){return l=h=null,I}return I.stream=function(t){return l&&h===t?l:l=Qr(x(i,b(k(h=t))))},I.clipAngle=function(t){return arguments.length?(x=+t?Ur(_=t*Jn,6*Jn):(_=null,Xr),L()):_*Wn},I.clipExtent=function(t){return arguments.length?(k=null==t?(E=s=a=u=null,Ar):Or(E=+t[0][0],s=+t[0][1],a=+t[1][0],u=+t[1][1]),L()):null==E?null:[[E,s],[a,u]]},I.scale=function(t){return arguments.length?(c=+t,M()):c},I.translate=function(t){return arguments.length?(f=+t[0],g=+t[1],M()):[f,g]},I.center=function(t){return arguments.length?(v=t[0]%360*Jn,d=t[1]%360*Jn,M()):[v*Wn,d*Wn]},I.rotate=function(t){return arguments.length?(p=t[0]%360*Jn,y=t[1]%360*Jn,m=t.length>2?t[2]%360*Jn:0,M()):[p*Wn,y*Wn,m*Wn]},I.precision=function(t){return arguments.length?(b=Kr(S,w=t*t),L()):nr(w)},I.fitExtent=function(t,e){return Hr(I,t,e)},I.fitSize=function(t,e){return function(t,e,n){return Hr(t,[[0,0],e],n)}(I,t,e)},function(){return e=t.apply(this,arguments),I.invert=e.invert&&N,M()}}((function(){return t}))()}function ti(t){return function(e,n){var r=tr(e),i=tr(n),o=t(r*i);return[o*i*er(e),o*er(n)]}}function ei(t){return function(e,n){var r=nr(e*e+n*n),i=t(r),o=er(i),s=tr(i);return[$n(e*o,r*s),ir(r&&n*o/r)]}}ti((function(t){return nr(2/(1+t))})).invert=ei((function(t){return 2*ir(t/2)}));var ni=ti((function(t){return(t=rr(t))&&t/er(t)}));function ri(){return $r(ni).scale(79.4188).clipAngle(179.999)}function ii(t,e){return[t,e]}ni.invert=ei((function(t){return t})),ii.invert=ii;var oi=Gn.BufferOp,si=Gn.GeoJSONReader,ai=Gn.GeoJSONWriter;function ui(t,e,n,r){var i=t.properties||{},o="Feature"===t.type?t.geometry:t;if("GeometryCollection"===o.type){var s=[];return mt(t,(function(t){var i=ui(t,e,n,r);i&&s.push(i)})),C(s)}var a=function(t){var e=An(t).geometry.coordinates,n=[-e[0],-e[1]];return ri().rotate(n).scale(x)}(o),u={type:o.type,coordinates:hi(o.coordinates,a)},l=(new si).read(u),h=F(q(e,n),"meters"),c=oi.bufferOp(l,h,r);if(!li((c=(new ai).write(c)).coordinates))return w({type:c.type,coordinates:ci(c.coordinates,a)},i)}function li(t){return Array.isArray(t[0])?li(t[0]):isNaN(t[0])}function hi(t,e){return"object"!==m(t[0])?e(t):t.map((function(t){return hi(t,e)}))}function ci(t,e){return"object"!==m(t[0])?e.invert(t):t.map((function(t){return ci(t,e)}))}function fi(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=0,r=0,i=0;return mt(t,(function(t,o,s){var a=e.weight?null==s?void 0:s[e.weight]:void 0;if(!V(a=null==a?1:a))throw new Error("weight value must be a number for feature index "+o);(a=Number(a))>0&&ct(t,(function(t){n+=t[0]*a,r+=t[1]*a,i+=a}))})),I([n/i,r/i],e.properties,e)}function gi(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=0,r=0,i=0;return ct(t,(function(t){n+=t[0],r+=t[1],i++}),!0),I([n/i,r/i],e.properties)}function vi(t,e,n,r,i){var o=r.tolerance||.001,s=0,a=0,u=0,l=0;if(dt(n,(function(e){var n,r=null==(n=e.properties)?void 0:n.weight,i=null==r?1:r;if(!V(i=Number(i)))throw new Error("weight value must be a number");if(i>0){l+=1;var o=i*ut(e,t);0===o&&(o=1);var h=i/o;s+=e.geometry.coordinates[0]*h,a+=e.geometry.coordinates[1]*h,u+=h}})),l<1)throw new Error("no features to measure");var h=s/u,c=a/u;return 1===l||0===i||Math.abs(h-e[0])<o&&Math.abs(c-e[1])<o?I([h,c],{medianCandidates:r.medianCandidates}):(r.medianCandidates.push([h,c]),vi([h,c],t,n,r,i-1))}var di={exports:{}},pi=_n(Je),yi=function(){return s((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mi;if(i(this,t),this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)}),[{key:"push",value:function(t){this.data.push(t),this.length++,this._up(this.length-1)}},{key:"pop",value:function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}}},{key:"peek",value:function(){return this.data[0]}},{key:"_up",value:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r}},{key:"_down",value:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),s=e[o],a=o+1;if(a<this.length&&n(e[a],s)<0&&(o=a,s=e[a]),n(s,i)>=0)break;e[t]=s,t=o}e[t]=i}}])}();function mi(t,e){return t<e?-1:t>e?1:0}var _i,xi,Ei,ki,wi,bi=_n(Object.freeze({__proto__:null,default:yi})),Ii={exports:{}};function Ni(){if(wi)return Ii.exports;wi=1;var t=(xi||(xi=1,_i=function(t,e,n,r){var i=t[0],o=t[1],s=!1;void 0===n&&(n=0),void 0===r&&(r=e.length);for(var a=(r-n)/2,u=0,l=a-1;u<a;l=u++){var h=e[n+2*u+0],c=e[n+2*u+1],f=e[n+2*l+0],g=e[n+2*l+1];c>o!=g>o&&i<(f-h)*(o-c)/(g-c)+h&&(s=!s)}return s}),_i),e=(ki||(ki=1,Ei=function(t,e,n,r){var i=t[0],o=t[1],s=!1;void 0===n&&(n=0),void 0===r&&(r=e.length);for(var a=r-n,u=0,l=a-1;u<a;l=u++){var h=e[u+n][0],c=e[u+n][1],f=e[l+n][0],g=e[l+n][1];c>o!=g>o&&i<(f-h)*(o-c)/(g-c)+h&&(s=!s)}return s}),Ei);return Ii.exports=function(n,r,i,o){return r.length>0&&Array.isArray(r[0])?e(n,r,i,o):t(n,r,i,o)},Ii.exports.nested=e,Ii.exports.flat=t,Ii.exports}var Si,Mi,Li={exports:{}};Li.exports;function Pi(){return Si||(Si=1,function(t,e){!function(t){var e=134217729,n=33306690738754706e-32;function r(t,e,n,r,i){var o,s,a,u,l=e[0],h=r[0],c=0,f=0;h>l==h>-l?(o=l,l=e[++c]):(o=h,h=r[++f]);var g=0;if(c<t&&f<n)for(h>l==h>-l?(a=o-((s=l+o)-l),l=e[++c]):(a=o-((s=h+o)-h),h=r[++f]),o=s,0!==a&&(i[g++]=a);c<t&&f<n;)h>l==h>-l?(a=o-((s=o+l)-(u=s-o))+(l-u),l=e[++c]):(a=o-((s=o+h)-(u=s-o))+(h-u),h=r[++f]),o=s,0!==a&&(i[g++]=a);for(;c<t;)a=o-((s=o+l)-(u=s-o))+(l-u),l=e[++c],o=s,0!==a&&(i[g++]=a);for(;f<n;)a=o-((s=o+h)-(u=s-o))+(h-u),h=r[++f],o=s,0!==a&&(i[g++]=a);return 0===o&&0!==g||(i[g++]=o),g}function i(t){return new Float64Array(t)}var o=33306690738754716e-32,s=22204460492503146e-32,a=11093356479670487e-47,u=i(4),l=i(8),h=i(12),c=i(16),f=i(4);t.orient2d=function(t,i,g,v,d,p){var y=(i-p)*(g-d),m=(t-d)*(v-p),_=y-m;if(0===y||0===m||y>0!=m>0)return _;var x=Math.abs(y+m);return Math.abs(_)>=o*x?_:-function(t,i,o,g,v,d,p){var y,m,_,x,E,k,w,b,I,N,S,M,L,P,C,T,O,R,A=t-v,D=o-v,F=i-d,q=g-d;E=(C=(b=A-(w=(k=e*A)-(k-A)))*(N=q-(I=(k=e*q)-(k-q)))-((P=A*q)-w*I-b*I-w*N))-(S=C-(O=(b=F-(w=(k=e*F)-(k-F)))*(N=D-(I=(k=e*D)-(k-D)))-((T=F*D)-w*I-b*I-w*N))),u[0]=C-(S+E)+(E-O),E=(L=P-((M=P+S)-(E=M-P))+(S-E))-(S=L-T),u[1]=L-(S+E)+(E-T),E=(R=M+S)-M,u[2]=M-(R-E)+(S-E),u[3]=R;var G=function(t,e){for(var n=e[0],r=1;r<t;r++)n+=e[r];return n}(4,u),B=s*p;if(G>=B||-G>=B)return G;if(y=t-(A+(E=t-A))+(E-v),_=o-(D+(E=o-D))+(E-v),m=i-(F+(E=i-F))+(E-d),x=g-(q+(E=g-q))+(E-d),0===y&&0===m&&0===_&&0===x)return G;if(B=a*p+n*Math.abs(G),(G+=A*x+q*y-(F*_+D*m))>=B||-G>=B)return G;E=(C=(b=y-(w=(k=e*y)-(k-y)))*(N=q-(I=(k=e*q)-(k-q)))-((P=y*q)-w*I-b*I-w*N))-(S=C-(O=(b=m-(w=(k=e*m)-(k-m)))*(N=D-(I=(k=e*D)-(k-D)))-((T=m*D)-w*I-b*I-w*N))),f[0]=C-(S+E)+(E-O),E=(L=P-((M=P+S)-(E=M-P))+(S-E))-(S=L-T),f[1]=L-(S+E)+(E-T),E=(R=M+S)-M,f[2]=M-(R-E)+(S-E),f[3]=R;var Y=r(4,u,4,f,l);E=(C=(b=A-(w=(k=e*A)-(k-A)))*(N=x-(I=(k=e*x)-(k-x)))-((P=A*x)-w*I-b*I-w*N))-(S=C-(O=(b=F-(w=(k=e*F)-(k-F)))*(N=_-(I=(k=e*_)-(k-_)))-((T=F*_)-w*I-b*I-w*N))),f[0]=C-(S+E)+(E-O),E=(L=P-((M=P+S)-(E=M-P))+(S-E))-(S=L-T),f[1]=L-(S+E)+(E-T),E=(R=M+S)-M,f[2]=M-(R-E)+(S-E),f[3]=R;var z=r(Y,l,4,f,h);E=(C=(b=y-(w=(k=e*y)-(k-y)))*(N=x-(I=(k=e*x)-(k-x)))-((P=y*x)-w*I-b*I-w*N))-(S=C-(O=(b=m-(w=(k=e*m)-(k-m)))*(N=_-(I=(k=e*_)-(k-_)))-((T=m*_)-w*I-b*I-w*N))),f[0]=C-(S+E)+(E-O),E=(L=P-((M=P+S)-(E=M-P))+(S-E))-(S=L-T),f[1]=L-(S+E)+(E-T),E=(R=M+S)-M,f[2]=M-(R-E)+(S-E),f[3]=R;var j=r(z,h,4,f,c);return c[j-1]}(t,i,g,v,d,p,x)},t.orient2dfast=function(t,e,n,r,i,o){return(e-o)*(n-i)-(t-i)*(r-o)},Object.defineProperty(t,"__esModule",{value:!0})}(e)}(0,Li.exports)),Li.exports}var Ci=function(){if(Mi)return di.exports;Mi=1;var t=pi,e=bi,n=Ni(),r=Pi().orient2d;function i(e,r,i){r=Math.max(0,void 0===r?2:r),i=i||0;var s=function(t){for(var e=t[0],r=t[0],i=t[0],o=t[0],s=0;s<t.length;s++){var a=t[s];a[0]<e[0]&&(e=a),a[0]>i[0]&&(i=a),a[1]<r[1]&&(r=a),a[1]>o[1]&&(o=a)}var u=[e,r,i,o],l=u.slice();for(s=0;s<t.length;s++)n(t[s],u)||l.push(t[s]);return function(t){t.sort(p);for(var e=[],n=0;n<t.length;n++){for(;e.length>=2&&h(e[e.length-2],e[e.length-1],t[n])<=0;)e.pop();e.push(t[n])}for(var r=[],i=t.length-1;i>=0;i--){for(;r.length>=2&&h(r[r.length-2],r[r.length-1],t[i])<=0;)r.pop();r.push(t[i])}return r.pop(),e.pop(),e.concat(r)}(l)}(e),a=new t(16);a.toBBox=function(t){return{minX:t[0],minY:t[1],maxX:t[0],maxY:t[1]}},a.compareMinX=function(t,e){return t[0]-e[0]},a.compareMinY=function(t,e){return t[1]-e[1]},a.load(e);for(var u,l=[],v=0;v<s.length;v++){var d=s[v];a.remove(d),u=f(d,u),l.push(u)}var y=new t(16);for(v=0;v<l.length;v++)y.insert(c(l[v]));for(var m=r*r,_=i*i;l.length;){var x=l.shift(),E=x.p,k=x.next.p,w=g(E,k);if(!(w<_)){var b=w/m;(d=o(a,x.prev.p,E,k,x.next.next.p,b,y))&&Math.min(g(d,E),g(d,k))<=b&&(l.push(x),l.push(f(d,x)),a.remove(d),y.remove(x),y.insert(c(x)),y.insert(c(x.next)))}}x=u;var I=[];do{I.push(x.p),x=x.next}while(x!==u);return I.push(x.p),I}function o(t,n,r,i,o,u,h){for(var c=new e([],s),f=t.data;f;){for(var g=0;g<f.children.length;g++){var d=f.children[g],p=f.leaf?v(d,r,i):a(r,i,d);p>u||c.push({node:d,dist:p})}for(;c.length&&!c.peek().node.children;){var y=c.pop(),m=y.node,_=v(m,n,r),x=v(m,i,o);if(y.dist<_&&y.dist<x&&l(r,m,h)&&l(i,m,h))return m}(f=c.pop())&&(f=f.node)}return null}function s(t,e){return t.dist-e.dist}function a(t,e,n){if(u(t,n)||u(e,n))return 0;var r=d(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=d(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=d(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var s=d(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===s?0:Math.min(r,i,o,s)}function u(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function l(t,e,n){for(var r,i,o,s,a=Math.min(t[0],e[0]),u=Math.min(t[1],e[1]),l=Math.max(t[0],e[0]),c=Math.max(t[1],e[1]),f=n.search({minX:a,minY:u,maxX:l,maxY:c}),g=0;g<f.length;g++)if(r=f[g].p,i=f[g].next.p,o=t,r!==(s=e)&&i!==o&&h(r,i,o)>0!=h(r,i,s)>0&&h(o,s,r)>0!=h(o,s,i)>0)return!1;return!0}function h(t,e,n){return r(t[0],t[1],e[0],e[1],n[0],n[1])}function c(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function f(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function g(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function v(t,e,n){var r=e[0],i=e[1],o=n[0]-r,s=n[1]-i;if(0!==o||0!==s){var a=((t[0]-r)*o+(t[1]-i)*s)/(o*o+s*s);a>1?(r=n[0],i=n[1]):a>0&&(r+=o*a,i+=s*a)}return(o=t[0]-r)*o+(s=t[1]-i)*s}function d(t,e,n,r,i,o,s,a){var u,l,h,c,f=n-t,g=r-e,v=s-i,d=a-o,p=t-i,y=e-o,m=f*f+g*g,_=f*v+g*d,x=v*v+d*d,E=f*p+g*y,k=v*p+d*y,w=m*x-_*_,b=w,I=w;0===w?(l=0,b=1,c=k,I=x):(c=m*k-_*E,(l=_*k-x*E)<0?(l=0,c=k,I=x):l>b&&(l=b,c=k+_,I=x)),c<0?(c=0,-E<0?l=0:-E>m?l=b:(l=-E,b=m)):c>I&&(c=I,-E+_<0?l=0:-E+_>m?l=b:(l=-E+_,b=m));var N=(1-(h=0===c?0:c/I))*i+h*s-((1-(u=0===l?0:l/b))*t+u*n),S=(1-h)*o+h*a-((1-u)*e+u*r);return N*N+S*S}function p(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}return e.default&&(e=e.default),di.exports=i,di.exports.default=i,di.exports}(),Ti=mn(Ci);function Oi(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.concavity=e.concavity||1/0;var n=[];if(ct(t,(function(t){n.push([t[0],t[1]])})),!n.length)return null;var r=Ti(n,e.concavity);return r.length>3?S([r]):null}function Ri(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.steps||64,i=n.properties?n.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},o=[],s=0;s<r;s++)o.push(at(t,e,-360*s/r,n).geometry.coordinates);return o.push(o[0]),S([o],i)}function Ai(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Di(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}})),e.features=t.features.map((function(t){return Di(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return qi(t);default:throw new Error("unknown GeoJSON type")}}function Di(t){var e={type:"Feature"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}})),e.properties=Fi(t.properties),null==t.geometry?e.geometry=null:e.geometry=qi(t.geometry),e}function Fi(t){var e={};return t?(Object.keys(t).forEach((function(n){var r=t[n];"object"===m(r)?null===r?e[n]=null:Array.isArray(r)?e[n]=r.map((function(t){return t})):e[n]=Fi(r):e[n]=r})),e):e}function qi(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return qi(t)})),e):(e.coordinates=Gi(t.coordinates),e)}function Gi(t){var e=t;return"object"!==m(e[0])?e.slice():e.map((function(t){return Gi(t)}))}function Bi(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("filter is required");var n=[];return dt(t,(function(t){Xi(t.properties,e)&&n.push(t)})),C(n)}function Yi(t,e,n){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("property is required");for(var r=ji(t,e),i=Object.keys(r),o=0;o<i.length;o++){for(var s=i[o],a=r[s],u=[],l=0;l<a.length;l++)u.push(t.features[a[l]]);n(C(u),s,o)}}function zi(t,e,n,r){var i=r;return Yi(t,e,(function(t,e,o){i=0===o&&void 0===r?t:n(i,t,e,o)})),i}function ji(t,e){var n={};return dt(t,(function(t,r){var i=t.properties||{};if(Object.prototype.hasOwnProperty.call(i,String(e))){var o=i[e];Object.prototype.hasOwnProperty.call(n,o)?n[o].push(r):n[o]=[r]}})),n}function Xi(t,e){if(void 0===t)return!1;var n=m(e);if("number"===n||"string"===n)return Object.prototype.hasOwnProperty.call(t,e);if(Array.isArray(e)){for(var r=0;r<e.length;r++)if(!Xi(t,e[r]))return!1;return!0}return Ui(t,e)}function Ui(t,e){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];if(t[i]!==e[i])return!1}return!0}function Vi(t,e){if(!e)return{};if(!e.length)return{};for(var n={},r=0;r<e.length;r++){var i=e[r];Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}var Zi,Hi,Wi,Ji,Ki,Qi,$i=Object.freeze({__proto__:null,applyFilter:Xi,clusterEach:Yi,clusterReduce:zi,createBins:ji,filterProperties:Vi,getCluster:Bi,propertiesContainsFilter:Ui});function to(){return Hi||(Hi=1,Zi={eudist:function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++){var s=(t[o]||0)-(e[o]||0);i+=s*s}return n?Math.sqrt(i):i},mandist:function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++)i+=Math.abs((t[o]||0)-(e[o]||0));return n?Math.sqrt(i):i},dist:function(t,e,n){var r=Math.abs(t-e);return n?r:r*r}}),Zi}var eo=function(){if(Qi)return Ki;Qi=1;var t=to(),e=function(){if(Ji)return Wi;Ji=1;var t=to(),e=t.eudist,n=t.dist;return Wi={kmrand:function(t,e){for(var n={},r=[],i=e<<2,o=t.length,s=t[0].length>0;r.length<e&&i-- >0;){var a=t[Math.floor(Math.random()*o)],u=s?a.join("_"):""+a;n[u]||(n[u]=!0,r.push(a))}if(r.length<e)throw new Error("Error initializating clusters");return r},kmpp:function(t,r){var i=t[0].length?e:n,o=[],s=t.length,a=t[0].length>0,u=t[Math.floor(Math.random()*s)];for(a&&u.join("_"),o.push(u);o.length<r;){for(var l=[],h=o.length,c=0,f=[],g=0;g<s;g++){for(var v=1/0,d=0;d<h;d++){var p=i(t[g],o[d]);p<=v&&(v=p)}l[g]=v}for(var y=0;y<s;y++)c+=l[y];for(var m=0;m<s;m++)f[m]={i:m,v:t[m],pr:l[m]/c,cs:0};f.sort((function(t,e){return t.pr-e.pr})),f[0].cs=f[0].pr;for(var _=1;_<s;_++)f[_].cs=f[_-1].cs+f[_].pr;for(var x=Math.random(),E=0;E<s-1&&f[E++].cs<x;);o.push(f[E-1].v)}return o}},Wi}(),n=t.eudist;t.mandist,t.dist;var r=e.kmrand,i=e.kmpp;function o(t,e,n){n=n||[];for(var r=0;r<t;r++)n[r]=e;return n}return Ki=function(t,e,s,a){var u=[],l=[],h=[],c=[],f=!1,g=a||1e4,v=t.length,d=t[0].length,p=d>0,y=[];if(s)u="kmrand"==s?r(t,e):"kmpp"==s?i(t,e):s;else for(var m={};u.length<e;){var _=Math.floor(Math.random()*v);m[_]||(m[_]=!0,u.push(t[_]))}do{o(e,0,y);for(var x=0;x<v;x++){for(var E=1/0,k=0,w=0;w<e;w++){(c=p?n(t[x],u[w]):Math.abs(t[x]-u[w]))<=E&&(E=c,k=w)}h[x]=k,y[k]++}for(var b=[],I=(l=[],0);I<e;I++)b[I]=p?o(d,0,b[I]):0,l[I]=u[I];if(p){for(var N=0;N<e;N++)u[N]=[];for(var S=0;S<v;S++)for(var M=b[h[S]],L=t[S],P=0;P<d;P++)M[P]+=L[P];f=!0;for(var C=0;C<e;C++){for(var T=u[C],O=b[C],R=l[C],A=y[C],D=0;D<d;D++)T[D]=O[D]/A||0;if(f)for(var F=0;F<d;F++)if(R[F]!=T[F]){f=!1;break}}}else{for(var q=0;q<v;q++){b[h[q]]+=t[q]}for(var G=0;G<e;G++)u[G]=b[G]/y[G]||0;f=!0;for(var B=0;B<e;B++)if(l[B]!=u[B]){f=!1;break}}f=f||--g<=0}while(!f);return{it:1e4-g,k:e,idxs:h,centroids:u}},Ki}(),no=mn(eo);function ro(t,e){var n=!1;return C(function(t){if(t.length<3)return[];t.sort(oo);var e,n,r,i,o,s,a=t.length-1,u=t[a].x,l=t[0].x,h=t[a].y,c=h,f=1e-12;for(;a--;)t[a].y<h&&(h=t[a].y),t[a].y>c&&(c=t[a].y);var g,v=l-u,d=c-h,p=v>d?v:d,y=.5*(l+u),m=.5*(c+h),_=[new io({__sentinel:!0,x:y-20*p,y:m-p},{__sentinel:!0,x:y,y:m+20*p},{__sentinel:!0,x:y+20*p,y:m-p})],x=[],E=[];a=t.length;for(;a--;){for(E.length=0,g=_.length;g--;)(v=t[a].x-_[g].x)>0&&v*v>_[g].r?(x.push(_[g]),_.splice(g,1)):v*v+(d=t[a].y-_[g].y)*d>_[g].r||(E.push(_[g].a,_[g].b,_[g].b,_[g].c,_[g].c,_[g].a),_.splice(g,1));for(so(E),g=E.length;g;)n=E[--g],e=E[--g],r=t[a],i=n.x-e.x,o=n.y-e.y,s=2*(i*(r.y-n.y)-o*(r.x-n.x)),Math.abs(s)>f&&_.push(new io(e,n,r))}Array.prototype.push.apply(x,_),a=x.length;for(;a--;)(x[a].a.__sentinel||x[a].b.__sentinel||x[a].c.__sentinel)&&x.splice(a,1);return x}(t.features.map((function(t){var r={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?r.z=t.properties[e]:3===t.geometry.coordinates.length&&(n=!0,r.z=t.geometry.coordinates[2]),r}))).map((function(t){var e=[t.a.x,t.a.y],r=[t.b.x,t.b.y],i=[t.c.x,t.c.y],o={};return n?(e.push(t.a.z),r.push(t.b.z),i.push(t.c.z)):o={a:t.a.z,b:t.b.z,c:t.c.z},S([[e,r,i,e]],o)})))}var io=s((function t(e,n,r){i(this,t),this.a=e,this.b=n,this.c=r;var o,s,a=n.x-e.x,u=n.y-e.y,l=r.x-e.x,h=r.y-e.y,c=a*(e.x+n.x)+u*(e.y+n.y),f=l*(e.x+r.x)+h*(e.y+r.y),g=2*(a*(r.y-n.y)-u*(r.x-n.x));this.x=(h*c-u*f)/g,this.y=(a*f-l*c)/g,o=this.x-e.x,s=this.y-e.y,this.r=o*o+s*s}));function oo(t,e){return e.x-t.x}function so(t){var e,n,r,i,o,s=t.length;t:for(;s;)for(n=t[--s],e=t[--s],r=s;r;)if(o=t[--r],e===(i=t[--r])&&n===o||e===o&&n===i){t.splice(s,2),t.splice(r,2),s-=2;continue t}}function ao(t){return t}function uo(t,e){var n=function(t){if(null==t)return ao;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],s=t.translate[1];return function(t,a){a||(e=n=0);var u=2,l=t.length,h=new Array(l);for(h[0]=(e+=t[0])*r+o,h[1]=(n+=t[1])*i+s;u<l;)h[u]=t[u],++u;return h}}(t.transform),r=t.arcs;function i(t,e){e.length&&e.pop();for(var i=r[t<0?~t:t],o=0,s=i.length;o<s;++o)e.push(n(i[o],o));t<0&&function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}(e,s)}function o(t){return n(t)}function s(t){for(var e=[],n=0,r=t.length;n<r;++n)i(t[n],e);return e.length<2&&e.push(e[0]),e}function a(t){for(var e=s(t);e.length<4;)e.push(e[0]);return e}function u(t){return t.map(a)}return function t(e){var n,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":n=o(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(o);break;case"LineString":n=s(e.arcs);break;case"MultiLineString":n=e.arcs.map(s);break;case"Polygon":n=u(e.arcs);break;case"MultiPolygon":n=e.arcs.map(u);break;default:return null}return{type:r,coordinates:n}}(e)}function lo(t,e){var n={},r={},i={},o=[],s=-1;function a(t,e){for(var r in t){var i=t[r];delete e[i.start],delete i.start,delete i.end,i.forEach((function(t){n[t<0?~t:t]=1})),o.push(i)}}return e.forEach((function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++s],e[s]=n,e[r]=i)})),e.forEach((function(e){var n,o,s=function(e){var n,r=t.arcs[e<0?~e:e],i=r[0];t.transform?(n=[0,0],r.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=r[r.length-1];return e<0?[n,i]:[i,n]}(e),a=s[0],u=s[1];if(n=i[a])if(delete i[n.end],n.push(e),n.end=u,o=r[u]){delete r[o.start];var l=o===n?n:n.concat(o);r[l.start=n.start]=i[l.end=o.end]=l}else r[n.start]=i[n.end]=n;else if(n=r[u])if(delete r[n.start],n.unshift(e),n.start=a,o=i[a]){delete i[o.end];var h=o===n?n:o.concat(n);r[h.start=o.start]=i[h.end=n.end]=h}else r[n.start]=i[n.end]=n;else r[(n=[e]).start=a]=i[n.end=u]=n})),a(i,r),a(r,i),e.forEach((function(t){n[t<0?~t:t]||o.push([t])})),o}function ho(t){return uo(t,co.apply(this,arguments))}function co(t,e){var n={},r=[],i=[];function o(t){t.forEach((function(e){e.forEach((function(e){(n[e=e<0?~e:e]||(n[e]=[])).push(t)}))})),r.push(t)}function s(e){return function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[0]*i[1]-e[1]*i[0];return Math.abs(o)}(uo(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach((function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":o(e.arcs);break;case"MultiPolygon":e.arcs.forEach(o)}})),r.forEach((function(t){if(!t._){var e=[],r=[t];for(t._=1,i.push(e);t=r.pop();)e.push(t),t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].forEach((function(t){t._||(t._=1,r.push(t))}))}))}))}})),r.forEach((function(t){delete t._})),{type:"MultiPolygon",arcs:i.map((function(e){var r,i=[];if(e.forEach((function(t){t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].length<2&&i.push(t)}))}))})),(r=(i=lo(t,i)).length)>1)for(var o,a,u=1,l=s(i[0]);u<r;++u)(o=s(i[u]))>l&&(a=i[0],i[0]=i[u],i[u]=a,l=o);return i})).filter((function(t){return t.length>0}))}}var fo=Object.prototype.hasOwnProperty;function go(t,e,n,r,i,o){3===arguments.length&&(r=o=Array,i=null);for(var s=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=new o(t),u=t-1,l=0;l<t;++l)s[l]=i;return{set:function(r,o){for(var l=e(r)&u,h=s[l],c=0;h!=i;){if(n(h,r))return a[l]=o;if(++c>=t)throw new Error("full hashmap");h=s[l=l+1&u]}return s[l]=r,a[l]=o,o},maybeSet:function(r,o){for(var l=e(r)&u,h=s[l],c=0;h!=i;){if(n(h,r))return a[l];if(++c>=t)throw new Error("full hashmap");h=s[l=l+1&u]}return s[l]=r,a[l]=o,o},get:function(r,o){for(var l=e(r)&u,h=s[l],c=0;h!=i;){if(n(h,r))return a[l];if(++c>=t)break;h=s[l=l+1&u]}return o},keys:function(){for(var t=[],e=0,n=s.length;e<n;++e){var r=s[e];r!=i&&t.push(r)}return t}}}function vo(t,e){return t[0]===e[0]&&t[1]===e[1]}var po=new ArrayBuffer(16),yo=new Float64Array(po),mo=new Uint32Array(po);function _o(t){yo[0]=t[0],yo[1]=t[1];var e=mo[0]^mo[1];return 2147483647&(e=e<<5^e>>7^mo[2]^mo[3])}function xo(t){var e,n,r,i,o=t.coordinates,s=t.lines,a=t.rings,u=function(){for(var t=go(1.4*o.length,E,k,Int32Array,-1,Int32Array),e=new Int32Array(o.length),n=0,r=o.length;n<r;++n)e[n]=t.maybeSet(n,n);return e}(),l=new Int32Array(o.length),h=new Int32Array(o.length),c=new Int32Array(o.length),f=new Int8Array(o.length),g=0;for(e=0,n=o.length;e<n;++e)l[e]=h[e]=c[e]=-1;for(e=0,n=s.length;e<n;++e){var v=s[e],d=v[0],p=v[1];for(r=u[d],i=u[++d],++g,f[r]=1;++d<=p;)x(e,r,r=i,i=u[d]);++g,f[i]=1}for(e=0,n=o.length;e<n;++e)l[e]=-1;for(e=0,n=a.length;e<n;++e){var y=a[e],m=y[0]+1,_=y[1];for(x(e,u[_-1],r=u[m-1],i=u[m]);++m<=_;)x(e,r,r=i,i=u[m])}function x(t,e,n,r){if(l[n]!==t){l[n]=t;var i=h[n];if(i>=0){var o=c[n];i===e&&o===r||i===r&&o===e||(++g,f[n]=1)}else h[n]=e,c[n]=r}}function E(t){return _o(o[t])}function k(t,e){return vo(o[t],o[e])}l=h=c=null;var w,b=function(t,e,n,r,i){3===arguments.length&&(r=Array,i=null);for(var o=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=t-1,a=0;a<t;++a)o[a]=i;return{add:function(r){for(var a=e(r)&s,u=o[a],l=0;u!=i;){if(n(u,r))return!0;if(++l>=t)throw new Error("full hashset");u=o[a=a+1&s]}return o[a]=r,!0},has:function(r){for(var a=e(r)&s,u=o[a],l=0;u!=i;){if(n(u,r))return!0;if(++l>=t)break;u=o[a=a+1&s]}return!1},values:function(){for(var t=[],e=0,n=o.length;e<n;++e){var r=o[e];r!=i&&t.push(r)}return t}}}(1.4*g,_o,vo);for(e=0,n=o.length;e<n;++e)f[w=u[e]]&&b.add(o[w]);return b}function Eo(t,e,n,r){ko(t,e,n),ko(t,e,e+r),ko(t,e+r,n)}function ko(t,e,n){for(var r,i=e+(n---e>>1);e<i;++e,--n)r=t[e],t[e]=t[n],t[n]=r}function wo(t){var e,n,r={};for(e in t)r[e]=null==(n=t[e])?{type:null}:("FeatureCollection"===n.type?bo:"Feature"===n.type?Io:No)(n);return r}function bo(t){var e={type:"GeometryCollection",geometries:t.features.map(Io)};return null!=t.bbox&&(e.bbox=t.bbox),e}function Io(t){var e,n=No(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function No(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(No)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function So(t,e){var n=function(t){var e=1/0,n=1/0,r=-1/0,i=-1/0;function o(t){null!=t&&fo.call(s,t.type)&&s[t.type](t)}var s={GeometryCollection:function(t){t.geometries.forEach(o)},Point:function(t){a(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(a)},LineString:function(t){u(t.arcs)},MultiLineString:function(t){t.arcs.forEach(u)},Polygon:function(t){t.arcs.forEach(u)},MultiPolygon:function(t){t.arcs.forEach(l)}};function a(t){var o=t[0],s=t[1];o<e&&(e=o),o>r&&(r=o),s<n&&(n=s),s>i&&(i=s)}function u(t){t.forEach(a)}function l(t){t.forEach(u)}for(var h in t)o(t[h]);return r>=e&&i>=n?[e,n,r,i]:void 0}(t=wo(t)),r=function(t){var e,n,r,i,o=t.coordinates,s=t.lines,a=t.rings,u=s.length+a.length;for(delete t.lines,delete t.rings,r=0,i=s.length;r<i;++r)for(e=s[r];e=e.next;)++u;for(r=0,i=a.length;r<i;++r)for(n=a[r];n=n.next;)++u;var l=go(2*u*1.4,_o,vo),h=t.arcs=[];for(r=0,i=s.length;r<i;++r){e=s[r];do{c(e)}while(e=e.next)}for(r=0,i=a.length;r<i;++r)if((n=a[r]).next)do{c(n)}while(n=n.next);else f(n);function c(t){var e,n,r,i,s,a,u,c;if(r=l.get(e=o[t[0]]))for(u=0,c=r.length;u<c;++u)if(g(i=r[u],t))return t[0]=i[0],void(t[1]=i[1]);if(s=l.get(n=o[t[1]]))for(u=0,c=s.length;u<c;++u)if(v(a=s[u],t))return t[1]=a[0],void(t[0]=a[1]);r?r.push(t):l.set(e,[t]),s?s.push(t):l.set(n,[t]),h.push(t)}function f(t){var e,n,r,i,s;if(n=l.get(o[t[0]]))for(i=0,s=n.length;i<s;++i){if(d(r=n[i],t))return t[0]=r[0],void(t[1]=r[1]);if(p(r,t))return t[0]=r[1],void(t[1]=r[0])}if(n=l.get(e=o[t[0]+y(t)]))for(i=0,s=n.length;i<s;++i){if(d(r=n[i],t))return t[0]=r[0],void(t[1]=r[1]);if(p(r,t))return t[0]=r[1],void(t[1]=r[0])}n?n.push(t):l.set(e,[t]),h.push(t)}function g(t,e){var n=t[0],r=e[0],i=t[1];if(n-i!=r-e[1])return!1;for(;n<=i;++n,++r)if(!vo(o[n],o[r]))return!1;return!0}function v(t,e){var n=t[0],r=e[0],i=t[1],s=e[1];if(n-i!=r-s)return!1;for(;n<=i;++n,--s)if(!vo(o[n],o[s]))return!1;return!0}function d(t,e){var n=t[0],r=e[0],i=t[1]-n;if(i!==e[1]-r)return!1;for(var s=y(t),a=y(e),u=0;u<i;++u)if(!vo(o[n+(u+s)%i],o[r+(u+a)%i]))return!1;return!0}function p(t,e){var n=t[0],r=e[0],i=t[1],s=e[1],a=i-n;if(a!==s-r)return!1;for(var u=y(t),l=a-y(e),h=0;h<a;++h)if(!vo(o[n+(h+u)%a],o[s-(h+l)%a]))return!1;return!0}function y(t){for(var e=t[0],n=t[1],r=e,i=r,s=o[r];++r<n;){var a=o[r];(a[0]<s[0]||a[0]===s[0]&&a[1]<s[1])&&(i=r,s=a)}return i-e}return t}(function(t){var e,n,r,i=xo(t),o=t.coordinates,s=t.lines,a=t.rings;for(n=0,r=s.length;n<r;++n)for(var u=s[n],l=u[0],h=u[1];++l<h;)i.has(o[l])&&(e={0:l,1:u[1]},u[1]=l,u=u.next=e);for(n=0,r=a.length;n<r;++n)for(var c=a[n],f=c[0],g=f,v=c[1],d=i.has(o[f]);++g<v;)i.has(o[g])&&(d?(e={0:g,1:c[1]},c[1]=g,c=c.next=e):(Eo(o,f,v,v-g),o[v]=o[f],d=!0,g=f));return t}(function(t){var e=-1,n=[],r=[],i=[];function o(t){t&&fo.call(s,t.type)&&s[t.type](t)}var s={GeometryCollection:function(t){t.geometries.forEach(o)},LineString:function(t){t.arcs=a(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(a)},Polygon:function(t){t.arcs=t.arcs.map(u)},MultiPolygon:function(t){t.arcs=t.arcs.map(l)}};function a(t){for(var r=0,o=t.length;r<o;++r)i[++e]=t[r];var s={0:e-o+1,1:e};return n.push(s),s}function u(t){for(var n=0,o=t.length;n<o;++n)i[++e]=t[n];var s={0:e-o+1,1:e};return r.push(s),s}function l(t){return t.map(u)}for(var h in t)o(t[h]);return{type:"Topology",coordinates:i,lines:n,rings:r,objects:t}}(t))),i=r.coordinates,o=go(1.4*r.arcs.length,Mo,Lo);function s(t){t&&fo.call(a,t.type)&&a[t.type](t)}t=r.objects,r.bbox=n,r.arcs=r.arcs.map((function(t,e){return o.set(t,e),i.slice(t[0],t[1]+1)})),delete r.coordinates,i=null;var a={GeometryCollection:function(t){t.geometries.forEach(s)},LineString:function(t){t.arcs=u(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(u)},Polygon:function(t){t.arcs=t.arcs.map(u)},MultiPolygon:function(t){t.arcs=t.arcs.map(l)}};function u(t){var e=[];do{var n=o.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function l(t){return t.map(u)}for(var h in t)s(t[h]);return r}function Mo(t){var e,n=t[0],r=t[1];return r<n&&(e=n,n=r,r=e),n+31*r}function Lo(t,e){var n,r=t[0],i=t[1],o=e[0],s=e[1];return i<r&&(n=r,r=i,i=n),s<o&&(n=o,o=s,s=n),r===o&&i===s}function Po(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Z(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==it(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Ai(t));var r=[],i=It(t,(function(t,e){var n=function(t,e){var n,r=t.geometry.coordinates,i=e.geometry.coordinates,o=Co(r[0]),s=Co(r[r.length-1]),a=Co(i[0]),u=Co(i[i.length-1]);if(o===u)n=i.concat(r.slice(1));else if(a===s)n=r.concat(i.slice(1));else if(o===a)n=r.slice(1).reverse().concat(i);else{if(s!==u)return null;n=r.concat(i.reverse().slice(1))}return L(n)}(t,e);return n||(r.push(t),e)}));return i&&r.push(i),r.length?1===r.length?r[0]:T(r.map((function(t){return t.coordinates}))):null}function Co(t){return t[0].toString()+","+t[1].toString()}function To(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Z(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==it(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Ai(t));var r=function(t){var e={};xt(t,(function(t){e[t.geometry.type]=!0}));var n=Object.keys(e);if(1===n.length)return n[0];return null}(t);if(!r)throw new Error("geojson must be homogenous");var i=t;switch(r){case"LineString":return Po(i,e);case"Polygon":return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("FeatureCollection"!==it(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==e.mutate&&void 0!==e.mutate||(t=Ai(t));var n=[];xt(t,(function(t){n.push(t.geometry)}));var r=So({geoms:A(n).geometry});return ho(r,r.objects.geoms.geometries)}(i,e);default:throw new Error(r+" is not supported")}}var Oo=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Ro=Math.ceil,Ao=Math.floor,Do="[BigNumber Error] ",Fo=Do+"Number primitive has more than 15 significant digits: ",qo=1e14,Go=14,Bo=9007199254740991,Yo=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],zo=1e7,jo=1e9;function Xo(t){var e=0|t;return t>0||t===e?e:e-1}function Uo(t){for(var e,n,r=1,i=t.length,o=t[0]+"";r<i;){for(e=t[r++]+"",n=Go-e.length;n--;e="0"+e);o+=e}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function Vo(t,e){var n,r,i=t.c,o=e.c,s=t.s,a=e.s,u=t.e,l=e.e;if(!s||!a)return null;if(n=i&&!i[0],r=o&&!o[0],n||r)return n?r?0:-a:s;if(s!=a)return s;if(n=s<0,r=u==l,!i||!o)return r?0:!i^n?1:-1;if(!r)return u>l^n?1:-1;for(a=(u=i.length)<(l=o.length)?u:l,s=0;s<a;s++)if(i[s]!=o[s])return i[s]>o[s]^n?1:-1;return u==l?0:u>l^n?1:-1}function Zo(t,e,n,r){if(t<e||t>n||t!==Ao(t))throw Error(Do+(r||"Argument")+("number"==typeof t?t<e||t>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function Ho(t){var e=t.c.length-1;return Xo(t.e/Go)==e&&t.c[e]%2!=0}function Wo(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function Jo(t,e,n){var r,i;if(e<0){for(i=n+".";++e;i+=n);t=i+t}else if(++e>(r=t.length)){for(i=n,e-=r;--e;i+=n);t+=i}else e<r&&(t=t.slice(0,e)+"."+t.slice(e));return t}var Ko=function t(e){var n,r,i,o,s,a,u,l,h,c,f=S.prototype={constructor:S,toString:null,valueOf:null},g=new S(1),v=20,d=4,p=-7,y=21,_=-1e7,x=1e7,E=!1,k=1,w=0,b={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},I="0123456789abcdefghijklmnopqrstuvwxyz",N=!0;function S(t,e){var n,o,s,a,u,l,h,c,f=this;if(!(f instanceof S))return new S(t,e);if(null==e){if(t&&!0===t._isBigNumber)return f.s=t.s,void(!t.c||t.e>x?f.c=f.e=null:t.e<_?f.c=[f.e=0]:(f.e=t.e,f.c=t.c.slice()));if((l="number"==typeof t)&&0*t==0){if(f.s=1/t<0?(t=-t,-1):1,t===~~t){for(a=0,u=t;u>=10;u/=10,a++);return void(a>x?f.c=f.e=null:(f.e=a,f.c=[t]))}c=String(t)}else{if(!Oo.test(c=String(t)))return i(f,c,l);f.s=45==c.charCodeAt(0)?(c=c.slice(1),-1):1}(a=c.indexOf("."))>-1&&(c=c.replace(".","")),(u=c.search(/e/i))>0?(a<0&&(a=u),a+=+c.slice(u+1),c=c.substring(0,u)):a<0&&(a=c.length)}else{if(Zo(e,2,I.length,"Base"),10==e&&N)return C(f=new S(t),v+f.e+1,d);if(c=String(t),l="number"==typeof t){if(0*t!=0)return i(f,c,l,e);if(f.s=1/t<0?(c=c.slice(1),-1):1,S.DEBUG&&c.replace(/^0\.0*|\./,"").length>15)throw Error(Fo+t)}else f.s=45===c.charCodeAt(0)?(c=c.slice(1),-1):1;for(n=I.slice(0,e),a=u=0,h=c.length;u<h;u++)if(n.indexOf(o=c.charAt(u))<0){if("."==o){if(u>a){a=h;continue}}else if(!s&&(c==c.toUpperCase()&&(c=c.toLowerCase())||c==c.toLowerCase()&&(c=c.toUpperCase()))){s=!0,u=-1,a=0;continue}return i(f,String(t),l,e)}l=!1,(a=(c=r(c,e,10,f.s)).indexOf("."))>-1?c=c.replace(".",""):a=c.length}for(u=0;48===c.charCodeAt(u);u++);for(h=c.length;48===c.charCodeAt(--h););if(c=c.slice(u,++h)){if(h-=u,l&&S.DEBUG&&h>15&&(t>Bo||t!==Ao(t)))throw Error(Fo+f.s*t);if((a=a-u-1)>x)f.c=f.e=null;else if(a<_)f.c=[f.e=0];else{if(f.e=a,f.c=[],u=(a+1)%Go,a<0&&(u+=Go),u<h){for(u&&f.c.push(+c.slice(0,u)),h-=Go;u<h;)f.c.push(+c.slice(u,u+=Go));u=Go-(c=c.slice(u)).length}else u-=h;for(;u--;c+="0");f.c.push(+c)}}else f.c=[f.e=0]}function M(t,e,n,r){var i,o,s,a,u;if(null==n?n=d:Zo(n,0,8),!t.c)return t.toString();if(i=t.c[0],s=t.e,null==e)u=Uo(t.c),u=1==r||2==r&&(s<=p||s>=y)?Wo(u,s):Jo(u,s,"0");else if(o=(t=C(new S(t),e,n)).e,a=(u=Uo(t.c)).length,1==r||2==r&&(e<=o||o<=p)){for(;a<e;u+="0",a++);u=Wo(u,o)}else if(e-=s,u=Jo(u,o,"0"),o+1>a){if(--e>0)for(u+=".";e--;u+="0");}else if((e+=o-a)>0)for(o+1==a&&(u+=".");e--;u+="0");return t.s<0&&i?"-"+u:u}function L(t,e){for(var n,r,i=1,o=new S(t[0]);i<t.length;i++)(!(r=new S(t[i])).s||(n=Vo(o,r))===e||0===n&&o.s===e)&&(o=r);return o}function P(t,e,n){for(var r=1,i=e.length;!e[--i];e.pop());for(i=e[0];i>=10;i/=10,r++);return(n=r+n*Go-1)>x?t.c=t.e=null:n<_?t.c=[t.e=0]:(t.e=n,t.c=e),t}function C(t,e,n,r){var i,o,s,a,u,l,h,c=t.c,f=Yo;if(c){t:{for(i=1,a=c[0];a>=10;a/=10,i++);if((o=e-i)<0)o+=Go,s=e,u=c[l=0],h=Ao(u/f[i-s-1]%10);else if((l=Ro((o+1)/Go))>=c.length){if(!r)break t;for(;c.length<=l;c.push(0));u=h=0,i=1,s=(o%=Go)-Go+1}else{for(u=a=c[l],i=1;a>=10;a/=10,i++);h=(s=(o%=Go)-Go+i)<0?0:Ao(u/f[i-s-1]%10)}if(r=r||e<0||null!=c[l+1]||(s<0?u:u%f[i-s-1]),r=n<4?(h||r)&&(0==n||n==(t.s<0?3:2)):h>5||5==h&&(4==n||r||6==n&&(o>0?s>0?u/f[i-s]:0:c[l-1])%10&1||n==(t.s<0?8:7)),e<1||!c[0])return c.length=0,r?(e-=t.e+1,c[0]=f[(Go-e%Go)%Go],t.e=-e||0):c[0]=t.e=0,t;if(0==o?(c.length=l,a=1,l--):(c.length=l+1,a=f[Go-o],c[l]=s>0?Ao(u/f[i-s]%f[s])*a:0),r)for(;;){if(0==l){for(o=1,s=c[0];s>=10;s/=10,o++);for(s=c[0]+=a,a=1;s>=10;s/=10,a++);o!=a&&(t.e++,c[0]==qo&&(c[0]=1));break}if(c[l]+=a,c[l]!=qo)break;c[l--]=0,a=1}for(o=c.length;0===c[--o];c.pop());}t.e>x?t.c=t.e=null:t.e<_&&(t.c=[t.e=0])}return t}function T(t){var e,n=t.e;return null===n?t.toString():(e=Uo(t.c),e=n<=p||n>=y?Wo(e,n):Jo(e,n,"0"),t.s<0?"-"+e:e)}return S.clone=t,S.ROUND_UP=0,S.ROUND_DOWN=1,S.ROUND_CEIL=2,S.ROUND_FLOOR=3,S.ROUND_HALF_UP=4,S.ROUND_HALF_DOWN=5,S.ROUND_HALF_EVEN=6,S.ROUND_HALF_CEIL=7,S.ROUND_HALF_FLOOR=8,S.EUCLID=9,S.config=S.set=function(t){var e,n;if(null!=t){if("object"!=m(t))throw Error(Do+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(Zo(n=t[e],0,jo,e),v=n),t.hasOwnProperty(e="ROUNDING_MODE")&&(Zo(n=t[e],0,8,e),d=n),t.hasOwnProperty(e="EXPONENTIAL_AT")&&((n=t[e])&&n.pop?(Zo(n[0],-1e9,0,e),Zo(n[1],0,jo,e),p=n[0],y=n[1]):(Zo(n,-1e9,jo,e),p=-(y=n<0?-n:n))),t.hasOwnProperty(e="RANGE"))if((n=t[e])&&n.pop)Zo(n[0],-1e9,-1,e),Zo(n[1],1,jo,e),_=n[0],x=n[1];else{if(Zo(n,-1e9,jo,e),!n)throw Error(Do+e+" cannot be zero: "+n);_=-(x=n<0?-n:n)}if(t.hasOwnProperty(e="CRYPTO")){if((n=t[e])!==!!n)throw Error(Do+e+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw E=!n,Error(Do+"crypto unavailable");E=n}else E=n}if(t.hasOwnProperty(e="MODULO_MODE")&&(Zo(n=t[e],0,9,e),k=n),t.hasOwnProperty(e="POW_PRECISION")&&(Zo(n=t[e],0,jo,e),w=n),t.hasOwnProperty(e="FORMAT")){if("object"!=m(n=t[e]))throw Error(Do+e+" not an object: "+n);b=n}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(n=t[e])||/^.?$|[+\-.\s]|(.).*\1/.test(n))throw Error(Do+e+" invalid: "+n);N="0123456789"==n.slice(0,10),I=n}}return{DECIMAL_PLACES:v,ROUNDING_MODE:d,EXPONENTIAL_AT:[p,y],RANGE:[_,x],CRYPTO:E,MODULO_MODE:k,POW_PRECISION:w,FORMAT:b,ALPHABET:I}},S.isBigNumber=function(t){if(!t||!0!==t._isBigNumber)return!1;if(!S.DEBUG)return!0;var e,n,r=t.c,i=t.e,o=t.s;t:if("[object Array]"=={}.toString.call(r)){if((1===o||-1===o)&&i>=-1e9&&i<=jo&&i===Ao(i)){if(0===r[0]){if(0===i&&1===r.length)return!0;break t}if((e=(i+1)%Go)<1&&(e+=Go),String(r[0]).length==e){for(e=0;e<r.length;e++)if((n=r[e])<0||n>=qo||n!==Ao(n))break t;if(0!==n)return!0}}}else if(null===r&&null===i&&(null===o||1===o||-1===o))return!0;throw Error(Do+"Invalid BigNumber: "+t)},S.maximum=S.max=function(){return L(arguments,-1)},S.minimum=S.min=function(){return L(arguments,1)},S.random=(o=9007199254740992,s=Math.random()*o&2097151?function(){return Ao(Math.random()*o)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(t){var e,n,r,i,o,a=0,u=[],l=new S(g);if(null==t?t=v:Zo(t,0,jo),i=Ro(t/Go),E)if(crypto.getRandomValues){for(e=crypto.getRandomValues(new Uint32Array(i*=2));a<i;)(o=131072*e[a]+(e[a+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),e[a]=n[0],e[a+1]=n[1]):(u.push(o%1e14),a+=2);a=i/2}else{if(!crypto.randomBytes)throw E=!1,Error(Do+"crypto unavailable");for(e=crypto.randomBytes(i*=7);a<i;)(o=281474976710656*(31&e[a])+1099511627776*e[a+1]+4294967296*e[a+2]+16777216*e[a+3]+(e[a+4]<<16)+(e[a+5]<<8)+e[a+6])>=9e15?crypto.randomBytes(7).copy(e,a):(u.push(o%1e14),a+=7);a=i/7}if(!E)for(;a<i;)(o=s())<9e15&&(u[a++]=o%1e14);for(i=u[--a],t%=Go,i&&t&&(o=Yo[Go-t],u[a]=Ao(i/o)*o);0===u[a];u.pop(),a--);if(a<0)u=[r=0];else{for(r=-1;0===u[0];u.splice(0,1),r-=Go);for(a=1,o=u[0];o>=10;o/=10,a++);a<Go&&(r-=Go-a)}return l.e=r,l.c=u,l}),S.sum=function(){for(var t=1,e=arguments,n=new S(e[0]);t<e.length;)n=n.plus(e[t++]);return n},r=function(){var t="0123456789";function e(t,e,n,r){for(var i,o,s=[0],a=0,u=t.length;a<u;){for(o=s.length;o--;s[o]*=e);for(s[0]+=r.indexOf(t.charAt(a++)),i=0;i<s.length;i++)s[i]>n-1&&(null==s[i+1]&&(s[i+1]=0),s[i+1]+=s[i]/n|0,s[i]%=n)}return s.reverse()}return function(r,i,o,s,a){var u,l,h,c,f,g,p,y,m=r.indexOf("."),_=v,x=d;for(m>=0&&(c=w,w=0,r=r.replace(".",""),g=(y=new S(i)).pow(r.length-m),w=c,y.c=e(Jo(Uo(g.c),g.e,"0"),10,o,t),y.e=y.c.length),h=c=(p=e(r,i,o,a?(u=I,t):(u=t,I))).length;0==p[--c];p.pop());if(!p[0])return u.charAt(0);if(m<0?--h:(g.c=p,g.e=h,g.s=s,p=(g=n(g,y,_,x,o)).c,f=g.r,h=g.e),m=p[l=h+_+1],c=o/2,f=f||l<0||null!=p[l+1],f=x<4?(null!=m||f)&&(0==x||x==(g.s<0?3:2)):m>c||m==c&&(4==x||f||6==x&&1&p[l-1]||x==(g.s<0?8:7)),l<1||!p[0])r=f?Jo(u.charAt(1),-_,u.charAt(0)):u.charAt(0);else{if(p.length=l,f)for(--o;++p[--l]>o;)p[l]=0,l||(++h,p=[1].concat(p));for(c=p.length;!p[--c];);for(m=0,r="";m<=c;r+=u.charAt(p[m++]));r=Jo(r,h,u.charAt(0))}return r}}(),n=function(){function t(t,e,n){var r,i,o,s,a=0,u=t.length,l=e%zo,h=e/zo|0;for(t=t.slice();u--;)a=((i=l*(o=t[u]%zo)+(r=h*o+(s=t[u]/zo|0)*l)%zo*zo+a)/n|0)+(r/zo|0)+h*s,t[u]=i%n;return a&&(t=[a].concat(t)),t}function e(t,e,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(t[i]!=e[i]){o=t[i]>e[i]?1:-1;break}return o}function n(t,e,n,r){for(var i=0;n--;)t[n]-=i,i=t[n]<e[n]?1:0,t[n]=i*r+t[n]-e[n];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(r,i,o,s,a){var u,l,h,c,f,g,v,d,p,y,m,_,x,E,k,w,b,I=r.s==i.s?1:-1,N=r.c,M=i.c;if(!(N&&N[0]&&M&&M[0]))return new S(r.s&&i.s&&(N?!M||N[0]!=M[0]:M)?N&&0==N[0]||!M?0*I:I/0:NaN);for(p=(d=new S(I)).c=[],I=o+(l=r.e-i.e)+1,a||(a=qo,l=Xo(r.e/Go)-Xo(i.e/Go),I=I/Go|0),h=0;M[h]==(N[h]||0);h++);if(M[h]>(N[h]||0)&&l--,I<0)p.push(1),c=!0;else{for(E=N.length,w=M.length,h=0,I+=2,(f=Ao(a/(M[0]+1)))>1&&(M=t(M,f,a),N=t(N,f,a),w=M.length,E=N.length),x=w,m=(y=N.slice(0,w)).length;m<w;y[m++]=0);b=M.slice(),b=[0].concat(b),k=M[0],M[1]>=a/2&&k++;do{if(f=0,(u=e(M,y,w,m))<0){if(_=y[0],w!=m&&(_=_*a+(y[1]||0)),(f=Ao(_/k))>1)for(f>=a&&(f=a-1),v=(g=t(M,f,a)).length,m=y.length;1==e(g,y,v,m);)f--,n(g,w<v?b:M,v,a),v=g.length,u=1;else 0==f&&(u=f=1),v=(g=M.slice()).length;if(v<m&&(g=[0].concat(g)),n(y,g,m,a),m=y.length,-1==u)for(;e(M,y,w,m)<1;)f++,n(y,w<m?b:M,m,a),m=y.length}else 0===u&&(f++,y=[0]);p[h++]=f,y[0]?y[m++]=N[x]||0:(y=[N[x]],m=1)}while((x++<E||null!=y[0])&&I--);c=null!=y[0],p[0]||p.splice(0,1)}if(a==qo){for(h=1,I=p[0];I>=10;I/=10,h++);C(d,o+(d.e=h+l*Go-1)+1,s,c)}else d.e=l,d.r=+c;return d}}(),a=/^(-?)0([xbo])(?=\w[\w.]*$)/i,u=/^([^.]+)\.$/,l=/^\.([^.]+)$/,h=/^-?(Infinity|NaN)$/,c=/^\s*\+(?=[\w.])|^\s+|\s+$/g,i=function(t,e,n,r){var i,o=n?e:e.replace(c,"");if(h.test(o))t.s=isNaN(o)?null:o<0?-1:1;else{if(!n&&(o=o.replace(a,(function(t,e,n){return i="x"==(n=n.toLowerCase())?16:"b"==n?2:8,r&&r!=i?t:e})),r&&(i=r,o=o.replace(u,"$1").replace(l,"0.$1")),e!=o))return new S(o,i);if(S.DEBUG)throw Error(Do+"Not a"+(r?" base "+r:"")+" number: "+e);t.s=null}t.c=t.e=null},f.absoluteValue=f.abs=function(){var t=new S(this);return t.s<0&&(t.s=1),t},f.comparedTo=function(t,e){return Vo(this,new S(t,e))},f.decimalPlaces=f.dp=function(t,e){var n,r,i,o=this;if(null!=t)return Zo(t,0,jo),null==e?e=d:Zo(e,0,8),C(new S(o),t+o.e+1,e);if(!(n=o.c))return null;if(r=((i=n.length-1)-Xo(this.e/Go))*Go,i=n[i])for(;i%10==0;i/=10,r--);return r<0&&(r=0),r},f.dividedBy=f.div=function(t,e){return n(this,new S(t,e),v,d)},f.dividedToIntegerBy=f.idiv=function(t,e){return n(this,new S(t,e),0,1)},f.exponentiatedBy=f.pow=function(t,e){var n,r,i,o,s,a,u,l,h=this;if((t=new S(t)).c&&!t.isInteger())throw Error(Do+"Exponent not an integer: "+T(t));if(null!=e&&(e=new S(e)),s=t.e>14,!h.c||!h.c[0]||1==h.c[0]&&!h.e&&1==h.c.length||!t.c||!t.c[0])return l=new S(Math.pow(+T(h),s?t.s*(2-Ho(t)):+T(t))),e?l.mod(e):l;if(a=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new S(NaN);(r=!a&&h.isInteger()&&e.isInteger())&&(h=h.mod(e))}else{if(t.e>9&&(h.e>0||h.e<-1||(0==h.e?h.c[0]>1||s&&h.c[1]>=24e7:h.c[0]<8e13||s&&h.c[0]<=9999975e7)))return o=h.s<0&&Ho(t)?-0:0,h.e>-1&&(o=1/o),new S(a?1/o:o);w&&(o=Ro(w/Go+2))}for(s?(n=new S(.5),a&&(t.s=1),u=Ho(t)):u=(i=Math.abs(+T(t)))%2,l=new S(g);;){if(u){if(!(l=l.times(h)).c)break;o?l.c.length>o&&(l.c.length=o):r&&(l=l.mod(e))}if(i){if(0===(i=Ao(i/2)))break;u=i%2}else if(C(t=t.times(n),t.e+1,1),t.e>14)u=Ho(t);else{if(0===(i=+T(t)))break;u=i%2}h=h.times(h),o?h.c&&h.c.length>o&&(h.c.length=o):r&&(h=h.mod(e))}return r?l:(a&&(l=g.div(l)),e?l.mod(e):o?C(l,w,d,undefined):l)},f.integerValue=function(t){var e=new S(this);return null==t?t=d:Zo(t,0,8),C(e,e.e+1,t)},f.isEqualTo=f.eq=function(t,e){return 0===Vo(this,new S(t,e))},f.isFinite=function(){return!!this.c},f.isGreaterThan=f.gt=function(t,e){return Vo(this,new S(t,e))>0},f.isGreaterThanOrEqualTo=f.gte=function(t,e){return 1===(e=Vo(this,new S(t,e)))||0===e},f.isInteger=function(){return!!this.c&&Xo(this.e/Go)>this.c.length-2},f.isLessThan=f.lt=function(t,e){return Vo(this,new S(t,e))<0},f.isLessThanOrEqualTo=f.lte=function(t,e){return-1===(e=Vo(this,new S(t,e)))||0===e},f.isNaN=function(){return!this.s},f.isNegative=function(){return this.s<0},f.isPositive=function(){return this.s>0},f.isZero=function(){return!!this.c&&0==this.c[0]},f.minus=function(t,e){var n,r,i,o,s=this,a=s.s;if(e=(t=new S(t,e)).s,!a||!e)return new S(NaN);if(a!=e)return t.s=-e,s.plus(t);var u=s.e/Go,l=t.e/Go,h=s.c,c=t.c;if(!u||!l){if(!h||!c)return h?(t.s=-e,t):new S(c?s:NaN);if(!h[0]||!c[0])return c[0]?(t.s=-e,t):new S(h[0]?s:3==d?-0:0)}if(u=Xo(u),l=Xo(l),h=h.slice(),a=u-l){for((o=a<0)?(a=-a,i=h):(l=u,i=c),i.reverse(),e=a;e--;i.push(0));i.reverse()}else for(r=(o=(a=h.length)<(e=c.length))?a:e,a=e=0;e<r;e++)if(h[e]!=c[e]){o=h[e]<c[e];break}if(o&&(i=h,h=c,c=i,t.s=-t.s),(e=(r=c.length)-(n=h.length))>0)for(;e--;h[n++]=0);for(e=qo-1;r>a;){if(h[--r]<c[r]){for(n=r;n&&!h[--n];h[n]=e);--h[n],h[r]+=qo}h[r]-=c[r]}for(;0==h[0];h.splice(0,1),--l);return h[0]?P(t,h,l):(t.s=3==d?-1:1,t.c=[t.e=0],t)},f.modulo=f.mod=function(t,e){var r,i,o=this;return t=new S(t,e),!o.c||!t.s||t.c&&!t.c[0]?new S(NaN):!t.c||o.c&&!o.c[0]?new S(o):(9==k?(i=t.s,t.s=1,r=n(o,t,0,3),t.s=i,r.s*=i):r=n(o,t,0,k),(t=o.minus(r.times(t))).c[0]||1!=k||(t.s=o.s),t)},f.multipliedBy=f.times=function(t,e){var n,r,i,o,s,a,u,l,h,c,f,g,v,d,p,y=this,m=y.c,_=(t=new S(t,e)).c;if(!(m&&_&&m[0]&&_[0]))return!y.s||!t.s||m&&!m[0]&&!_||_&&!_[0]&&!m?t.c=t.e=t.s=null:(t.s*=y.s,m&&_?(t.c=[0],t.e=0):t.c=t.e=null),t;for(r=Xo(y.e/Go)+Xo(t.e/Go),t.s*=y.s,(u=m.length)<(c=_.length)&&(v=m,m=_,_=v,i=u,u=c,c=i),i=u+c,v=[];i--;v.push(0));for(d=qo,p=zo,i=c;--i>=0;){for(n=0,f=_[i]%p,g=_[i]/p|0,o=i+(s=u);o>i;)n=((l=f*(l=m[--s]%p)+(a=g*l+(h=m[s]/p|0)*f)%p*p+v[o]+n)/d|0)+(a/p|0)+g*h,v[o--]=l%d;v[o]=n}return n?++r:v.splice(0,1),P(t,v,r)},f.negated=function(){var t=new S(this);return t.s=-t.s||null,t},f.plus=function(t,e){var n,r=this,i=r.s;if(e=(t=new S(t,e)).s,!i||!e)return new S(NaN);if(i!=e)return t.s=-e,r.minus(t);var o=r.e/Go,s=t.e/Go,a=r.c,u=t.c;if(!o||!s){if(!a||!u)return new S(i/0);if(!a[0]||!u[0])return u[0]?t:new S(a[0]?r:0*i)}if(o=Xo(o),s=Xo(s),a=a.slice(),i=o-s){for(i>0?(s=o,n=u):(i=-i,n=a),n.reverse();i--;n.push(0));n.reverse()}for((i=a.length)-(e=u.length)<0&&(n=u,u=a,a=n,e=i),i=0;e;)i=(a[--e]=a[e]+u[e]+i)/qo|0,a[e]=qo===a[e]?0:a[e]%qo;return i&&(a=[i].concat(a),++s),P(t,a,s)},f.precision=f.sd=function(t,e){var n,r,i,o=this;if(null!=t&&t!==!!t)return Zo(t,1,jo),null==e?e=d:Zo(e,0,8),C(new S(o),t,e);if(!(n=o.c))return null;if(r=(i=n.length-1)*Go+1,i=n[i]){for(;i%10==0;i/=10,r--);for(i=n[0];i>=10;i/=10,r++);}return t&&o.e+1>r&&(r=o.e+1),r},f.shiftedBy=function(t){return Zo(t,-9007199254740991,Bo),this.times("1e"+t)},f.squareRoot=f.sqrt=function(){var t,e,r,i,o,s=this,a=s.c,u=s.s,l=s.e,h=v+4,c=new S("0.5");if(1!==u||!a||!a[0])return new S(!u||u<0&&(!a||a[0])?NaN:a?s:1/0);if(0==(u=Math.sqrt(+T(s)))||u==1/0?(((e=Uo(a)).length+l)%2==0&&(e+="0"),u=Math.sqrt(+e),l=Xo((l+1)/2)-(l<0||l%2),r=new S(e=u==1/0?"5e"+l:(e=u.toExponential()).slice(0,e.indexOf("e")+1)+l)):r=new S(u+""),r.c[0])for((u=(l=r.e)+h)<3&&(u=0);;)if(o=r,r=c.times(o.plus(n(s,o,h,1))),Uo(o.c).slice(0,u)===(e=Uo(r.c)).slice(0,u)){if(r.e<l&&--u,"9999"!=(e=e.slice(u-3,u+1))&&(i||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(C(r,r.e+v+2,1),t=!r.times(r).eq(s));break}if(!i&&(C(o,o.e+v+2,0),o.times(o).eq(s))){r=o;break}h+=4,u+=4,i=1}return C(r,r.e+v+1,d,t)},f.toExponential=function(t,e){return null!=t&&(Zo(t,0,jo),t++),M(this,t,e,1)},f.toFixed=function(t,e){return null!=t&&(Zo(t,0,jo),t=t+this.e+1),M(this,t,e)},f.toFormat=function(t,e,n){var r,i=this;if(null==n)null!=t&&e&&"object"==m(e)?(n=e,e=null):t&&"object"==m(t)?(n=t,t=e=null):n=b;else if("object"!=m(n))throw Error(Do+"Argument not an object: "+n);if(r=i.toFixed(t,e),i.c){var o,s=r.split("."),a=+n.groupSize,u=+n.secondaryGroupSize,l=n.groupSeparator||"",h=s[0],c=s[1],f=i.s<0,g=f?h.slice(1):h,v=g.length;if(u&&(o=a,a=u,u=o,v-=o),a>0&&v>0){for(o=v%a||a,h=g.substr(0,o);o<v;o+=a)h+=l+g.substr(o,a);u>0&&(h+=l+g.slice(o)),f&&(h="-"+h)}r=c?h+(n.decimalSeparator||"")+((u=+n.fractionGroupSize)?c.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):c):h}return(n.prefix||"")+r+(n.suffix||"")},f.toFraction=function(t){var e,r,i,o,s,a,u,l,h,c,f,v,p=this,y=p.c;if(null!=t&&(!(u=new S(t)).isInteger()&&(u.c||1!==u.s)||u.lt(g)))throw Error(Do+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+T(u));if(!y)return new S(p);for(e=new S(g),h=r=new S(g),i=l=new S(g),v=Uo(y),s=e.e=v.length-p.e-1,e.c[0]=Yo[(a=s%Go)<0?Go+a:a],t=!t||u.comparedTo(e)>0?s>0?e:h:u,a=x,x=1/0,u=new S(v),l.c[0]=0;c=n(u,e,0,1),1!=(o=r.plus(c.times(i))).comparedTo(t);)r=i,i=o,h=l.plus(c.times(o=h)),l=o,e=u.minus(c.times(o=e)),u=o;return o=n(t.minus(r),i,0,1),l=l.plus(o.times(h)),r=r.plus(o.times(i)),l.s=h.s=p.s,f=n(h,i,s*=2,d).minus(p).abs().comparedTo(n(l,r,s,d).minus(p).abs())<1?[h,i]:[l,r],x=a,f},f.toNumber=function(){return+T(this)},f.toPrecision=function(t,e){return null!=t&&Zo(t,1,jo),M(this,t,e,2)},f.toString=function(t){var e,n=this,i=n.s,o=n.e;return null===o?i?(e="Infinity",i<0&&(e="-"+e)):e="NaN":(null==t?e=o<=p||o>=y?Wo(Uo(n.c),o):Jo(Uo(n.c),o,"0"):10===t&&N?e=Jo(Uo((n=C(new S(n),v+o+1,d)).c),n.e,"0"):(Zo(t,2,I.length,"Base"),e=r(Jo(Uo(n.c),o,"0"),10,t,i,!0)),i<0&&n.c[0]&&(e="-"+e)),e},f.valueOf=f.toJSON=function(){return T(this)},f._isBigNumber=!0,f[Symbol.toStringTag]="BigNumber",f[Symbol.for("nodejs.util.inspect.custom")]=f.valueOf,null!=e&&S.set(e),S}(),Qo=function(t){function e(t){return i(this,e),r(this,e,[t])}return h(e,t),s(e)}(s((function t(e){i(this,t),u(this,"key",void 0),u(this,"left",null),u(this,"right",null),this.key=e}))),$o=function(){return s((function t(){i(this,t),u(this,"size",0),u(this,"modificationCount",0),u(this,"splayCount",0)}),[{key:"splay",value:function(t){var e=this.root;if(null==e)return this.compare(t,t),-1;for(var n,r=null,i=null,o=null,s=null,a=e,u=this.compare;;)if((n=u(a.key,t))>0){var l=a.left;if(null==l)break;if((n=u(l.key,t))>0&&(a.left=l.right,l.right=a,null==(l=(a=l).left)))break;null==r?i=a:r.left=a,r=a,a=l}else{if(!(n<0))break;var h=a.right;if(null==h)break;if((n=u(h.key,t))<0&&(a.right=h.left,h.left=a,null==(h=(a=h).right)))break;null==o?s=a:o.right=a,o=a,a=h}return null!=o&&(o.right=a.left,a.left=s),null!=r&&(r.left=a.right,a.right=i),this.root!==a&&(this.root=a,this.splayCount++),n}},{key:"splayMin",value:function(t){for(var e=t,n=e.left;null!=n;){var r=n;e.left=r.right,r.right=e,n=(e=r).left}return e}},{key:"splayMax",value:function(t){for(var e=t,n=e.right;null!=n;){var r=n;e.right=r.left,r.left=e,n=(e=r).right}return e}},{key:"_delete",value:function(t){if(null==this.root)return null;if(0!=this.splay(t))return null;var e=this.root,n=e,r=e.left;if(this.size--,null==r)this.root=e.right;else{var i=e.right;(e=this.splayMax(r)).right=i,this.root=e}return this.modificationCount++,n}},{key:"addNewRoot",value:function(t,e){this.size++,this.modificationCount++;var n=this.root;null!=n?(e<0?(t.left=n,t.right=n.right,n.right=null):(t.right=n,t.left=n.left,n.left=null),this.root=t):this.root=t}},{key:"_first",value:function(){var t=this.root;return null==t?null:(this.root=this.splayMin(t),this.root)}},{key:"_last",value:function(){var t=this.root;return null==t?null:(this.root=this.splayMax(t),this.root)}},{key:"clear",value:function(){this.root=null,this.size=0,this.modificationCount++}},{key:"has",value:function(t){return this.validKey(t)&&0==this.splay(t)}},{key:"defaultCompare",value:function(){return function(t,e){return t<e?-1:t>e?1:0}}},{key:"wrap",value:function(){var t=this;return{getRoot:function(){return t.root},setRoot:function(e){t.root=e},getSize:function(){return t.size},getModificationCount:function(){return t.modificationCount},getSplayCount:function(){return t.splayCount},setSplayCount:function(e){t.splayCount=e},splay:function(e){return t.splay(e)},has:function(e){return t.has(e)}}}}])}(),ts=function(t){function e(t,n){var o;return i(this,e),u(o=r(this,e),"root",null),u(o,"compare",void 0),u(o,"validKey",void 0),u(o,Symbol.toStringTag,"[object Set]"),o.compare=null!=t?t:o.defaultCompare(),o.validKey=null!=n?n:function(t){return null!=t&&null!=t},o}return h(e,t),s(e,[{key:"delete",value:function(t){return!!this.validKey(t)&&null!=this._delete(t)}},{key:"deleteAll",value:function(t){var e,n=a(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.delete(r)}}catch(t){n.e(t)}finally{n.f()}}},{key:"forEach",value:function(t){for(var e,n=this[Symbol.iterator]();!(e=n.next()).done;)t(e.value,e.value,this)}},{key:"add",value:function(t){var e=this.splay(t);return 0!=e&&this.addNewRoot(new Qo(t),e),this}},{key:"addAndReturn",value:function(t){var e=this.splay(t);return 0!=e&&this.addNewRoot(new Qo(t),e),this.root.key}},{key:"addAll",value:function(t){var e,n=a(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.add(r)}}catch(t){n.e(t)}finally{n.f()}}},{key:"isEmpty",value:function(){return null==this.root}},{key:"isNotEmpty",value:function(){return null!=this.root}},{key:"single",value:function(){if(0==this.size)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}},{key:"first",value:function(){if(0==this.size)throw"Bad state: No element";return this._first().key}},{key:"last",value:function(){if(0==this.size)throw"Bad state: No element";return this._last().key}},{key:"lastBefore",value:function(t){if(null==t)throw"Invalid arguments(s)";if(null==this.root)return null;if(this.splay(t)<0)return this.root.key;var e=this.root.left;if(null==e)return null;for(var n=e.right;null!=n;)n=(e=n).right;return e.key}},{key:"firstAfter",value:function(t){if(null==t)throw"Invalid arguments(s)";if(null==this.root)return null;if(this.splay(t)>0)return this.root.key;var e=this.root.right;if(null==e)return null;for(var n=e.left;null!=n;)n=(e=n).left;return e.key}},{key:"retainAll",value:function(t){var n,r=new e(this.compare,this.validKey),i=this.modificationCount,o=a(t);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(i!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(s)&&0==this.splay(s)&&r.add(this.root.key)}}catch(t){o.e(t)}finally{o.f()}r.size!=this.size&&(this.root=r.root,this.size=r.size,this.modificationCount++)}},{key:"lookup",value:function(t){return this.validKey(t)?0!=this.splay(t)?null:this.root.key:null}},{key:"intersection",value:function(t){var n,r=new e(this.compare,this.validKey),i=a(this);try{for(i.s();!(n=i.n()).done;){var o=n.value;t.has(o)&&r.add(o)}}catch(t){i.e(t)}finally{i.f()}return r}},{key:"difference",value:function(t){var n,r=new e(this.compare,this.validKey),i=a(this);try{for(i.s();!(n=i.n()).done;){var o=n.value;t.has(o)||r.add(o)}}catch(t){i.e(t)}finally{i.f()}return r}},{key:"union",value:function(t){var e=this.clone();return e.addAll(t),e}},{key:"clone",value:function(){var t=new e(this.compare,this.validKey);return t.size=this.size,t.root=this.copyNode(this.root),t}},{key:"copyNode",value:function(t){if(null==t)return null;var e=new Qo(t.key);return function t(e,n){var r,i;do{if(r=e.left,i=e.right,null!=r){var o=new Qo(r.key);n.left=o,t(r,o)}if(null!=i){var s=new Qo(i.key);n.right=s,e=i,n=s}}while(null!=i)}(t,e),e}},{key:"toSet",value:function(){return this.clone()}},{key:"entries",value:function(){return new rs(this.wrap())}},{key:"keys",value:function(){return this[Symbol.iterator]()}},{key:"values",value:function(){return this[Symbol.iterator]()}},{key:Symbol.iterator,value:function(){return new ns(this.wrap())}}])}($o),es=function(){return s((function t(e){i(this,t),u(this,"tree",void 0),u(this,"path",new Array),u(this,"modificationCount",null),u(this,"splayCount",void 0),this.tree=e,this.splayCount=e.getSplayCount()}),[{key:Symbol.iterator,value:function(){return this}},{key:"next",value:function(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}},{key:"current",value:function(){if(!this.path.length)return null;var t=this.path[this.path.length-1];return this.getValue(t)}},{key:"rebuildPath",value:function(t){this.path.splice(0,this.path.length),this.tree.splay(t),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}},{key:"findLeftMostDescendent",value:function(t){for(;null!=t;)this.path.push(t),t=t.left}},{key:"moveNext",value:function(){if(this.modificationCount!=this.tree.getModificationCount()){if(null==this.modificationCount){this.modificationCount=this.tree.getModificationCount();for(var t=this.tree.getRoot();null!=t;)this.path.push(t),t=t.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);var e=this.path[this.path.length-1],n=e.right;if(null!=n){for(;null!=n;)this.path.push(n),n=n.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===e;)e=this.path.pop();return this.path.length>0}}])}(),ns=function(t){function e(){return i(this,e),r(this,e,arguments)}return h(e,t),s(e,[{key:"getValue",value:function(t){return t.key}}])}(es),rs=function(t){function e(){return i(this,e),r(this,e,arguments)}return h(e,t),s(e,[{key:"getValue",value:function(t){return[t.key,t.key]}}])}(es),is=function(t){return function(){return t}},os=function(t){var e=t?function(e,n){return n.minus(e).abs().isLessThanOrEqualTo(t)}:is(!1);return function(t,n){return e(t,n)?0:t.comparedTo(n)}};function ss(t){var e=t?function(e,n,r,i,o){return e.exponentiatedBy(2).isLessThanOrEqualTo(i.minus(n).exponentiatedBy(2).plus(o.minus(r).exponentiatedBy(2)).times(t))}:is(!1);return function(t,n,r){var i=t.x,o=t.y,s=r.x,a=r.y,u=o.minus(a).times(n.x.minus(s)).minus(i.minus(s).times(n.y.minus(a)));return e(u,i,o,s,a)?0:u.comparedTo(0)}}var as=function(t){return t},us=function(t){if(t){var e=new ts(os(t)),n=new ts(os(t)),r=function(t,e){return e.addAndReturn(t)},i=function(t){return{x:r(t.x,e),y:r(t.y,n)}};return i({x:new Ko(0),y:new Ko(0)}),i}return as},ls=function(t){return{set:function(t){hs=ls(t)},reset:function(){return ls(t)},compare:os(t),snap:us(t),orient:ss(t)}},hs=ls(),cs=function(t,e){return t.ll.x.isLessThanOrEqualTo(e.x)&&e.x.isLessThanOrEqualTo(t.ur.x)&&t.ll.y.isLessThanOrEqualTo(e.y)&&e.y.isLessThanOrEqualTo(t.ur.y)},fs=function(t,e){if(e.ur.x.isLessThan(t.ll.x)||t.ur.x.isLessThan(e.ll.x)||e.ur.y.isLessThan(t.ll.y)||t.ur.y.isLessThan(e.ll.y))return null;var n=t.ll.x.isLessThan(e.ll.x)?e.ll.x:t.ll.x,r=t.ur.x.isLessThan(e.ur.x)?t.ur.x:e.ur.x;return{ll:{x:n,y:t.ll.y.isLessThan(e.ll.y)?e.ll.y:t.ll.y},ur:{x:r,y:t.ur.y.isLessThan(e.ur.y)?t.ur.y:e.ur.y}}},gs=function(t,e){return t.x.times(e.y).minus(t.y.times(e.x))},vs=function(t,e){return t.x.times(e.x).plus(t.y.times(e.y))},ds=function(t){return vs(t,t).sqrt()},ps=function(t,e,n){var r={x:e.x.minus(t.x),y:e.y.minus(t.y)},i={x:n.x.minus(t.x),y:n.y.minus(t.y)};return vs(i,r).div(ds(i)).div(ds(r))},ys=function(t,e,n){return e.y.isZero()?null:{x:t.x.plus(e.x.div(e.y).times(n.minus(t.y))),y:n}},ms=function(t,e,n){return e.x.isZero()?null:{x:n,y:t.y.plus(e.y.div(e.x).times(n.minus(t.x)))}},_s=function(){function t(e,n){i(this,t),u(this,"point",void 0),u(this,"isLeft",void 0),u(this,"segment",void 0),u(this,"otherSE",void 0),u(this,"consumedBy",void 0),void 0===e.events?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=n}return s(t,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,n=0,r=e.length;n<r;n++){var i=e[n];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var n=this.point.events[e];if(void 0===n.segment.consumedBy)for(var r=e+1;r<t;r++){var i=this.point.events[r];void 0===i.consumedBy&&(n.otherSE.point.events===i.otherSE.point.events&&n.segment.consume(i.segment))}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,n=this.point.events.length;e<n;e++){var r=this.point.events[e];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&t.push(r)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,n=new Map,r=function(r){var i,o,s,a,u,l=r.otherSE;n.set(r,{sine:(i=e.point,o=t.point,s=l.point,a={x:o.x.minus(i.x),y:o.y.minus(i.y)},u={x:s.x.minus(i.x),y:s.y.minus(i.y)},gs(u,a).div(ds(u)).div(ds(a))),cosine:ps(e.point,t.point,l.point)})};return function(t,e){n.has(t)||r(t),n.has(e)||r(e);var i=n.get(t),o=i.sine,s=i.cosine,a=n.get(e),u=a.sine,l=a.cosine;return o.isGreaterThanOrEqualTo(0)&&u.isGreaterThanOrEqualTo(0)?s.isLessThan(l)?1:s.isGreaterThan(l)?-1:0:o.isLessThan(0)&&u.isLessThan(0)?s.isLessThan(l)?-1:s.isGreaterThan(l)?1:0:u.isLessThan(o)?-1:u.isGreaterThan(o)?1:0}}}],[{key:"compare",value:function(e,n){var r=t.comparePoints(e.point,n.point);return 0!==r?r:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:Ss.compare(e.segment,n.segment))}},{key:"comparePoints",value:function(t,e){return t.x.isLessThan(e.x)?-1:t.x.isGreaterThan(e.x)?1:t.y.isLessThan(e.y)?-1:t.y.isGreaterThan(e.y)?1:0}}])}(),xs=function(){function t(e){i(this,t),u(this,"events",void 0),u(this,"poly",void 0),u(this,"_isExteriorRing",void 0),u(this,"_enclosingRing",void 0),this.events=e;for(var n=0,r=e.length;n<r;n++)e[n].segment.ringOut=this;this.poly=null}return s(t,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],n=1,r=this.events.length-1;n<r;n++){var i=this.events[n].point,o=this.events[n+1].point;0!==hs.orient(i,t,o)&&(e.push(i),t=i)}if(1===e.length)return null;var s=e[0],a=e[1];0===hs.orient(s,t,a)&&e.shift(),e.push(e[0]);for(var u=this.isExteriorRing()?1:-1,l=this.isExteriorRing()?0:e.length-1,h=this.isExteriorRing()?e.length:-1,c=[],f=l;f!=h;f+=u)c.push([e[f].x.toNumber(),e[f].y.toNumber()]);return c}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,n=this.events.length;e<n;e++){var r=this.events[e];_s.compare(t,r)>0&&(t=r)}for(var i=t.segment.prevInResult(),o=i?i.prevInResult():null;;){if(!i)return null;if(!o)return i.ringOut;var s,a;if(o.ringOut!==i.ringOut)return(null===(s=o.ringOut)||void 0===s?void 0:s.enclosingRing())!==i.ringOut?i.ringOut:null===(a=i.ringOut)||void 0===a?void 0:a.enclosingRing();i=o.prevInResult(),o=i?i.prevInResult():null}}}],[{key:"factory",value:function(e){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];if(o.isInResult()&&!o.ringOut){for(var s=null,a=o.leftSE,u=o.rightSE,l=[a],h=a.point,c=[];s=a,a=u,l.push(a),a.point!==h;)for(;;){var f=a.getAvailableLinkedEvents();if(0===f.length){var g=l[0].point,v=l[l.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(g.x,", ").concat(g.y,"]. Last matching segment found ends at [").concat(v.x,", ").concat(v.y,"]."))}if(1===f.length){u=f[0].otherSE;break}for(var d=null,p=0,y=c.length;p<y;p++)if(c[p].point===a.point){d=p;break}if(null===d){c.push({index:l.length,point:a.point});var m=a.getLeftmostComparator(s);u=f.sort(m)[0].otherSE;break}var _=c.splice(d)[0],x=l.splice(_.index);x.unshift(x[0].otherSE),n.push(new t(x.reverse()))}n.push(new t(l))}}return n}}])}(),Es=function(){return s((function t(e){i(this,t),u(this,"exteriorRing",void 0),u(this,"interiorRings",void 0),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}),[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=this.exteriorRing.getGeom();if(null===t)return null;for(var e=[t],n=0,r=this.interiorRings.length;n<r;n++){var i=this.interiorRings[n].getGeom();null!==i&&e.push(i)}return e}}])}(),ks=function(){return s((function t(e){i(this,t),u(this,"rings",void 0),u(this,"polys",void 0),this.rings=e,this.polys=this._composePolys(e)}),[{key:"getGeom",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++){var r=this.polys[e].getGeom();null!==r&&t.push(r)}return t}},{key:"_composePolys",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];if(!i.poly)if(i.isExteriorRing())e.push(new Es(i));else{var o,s=i.enclosingRing();null!=s&&s.poly||e.push(new Es(s)),null==s||null===(o=s.poly)||void 0===o||o.addInterior(i)}}return e}}])}(),ws=function(){return s((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ss.compare;i(this,t),u(this,"queue",void 0),u(this,"tree",void 0),u(this,"segments",void 0),this.queue=e,this.tree=new ts(n),this.segments=[]}),[{key:"process",value:function(t){var e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.delete(t.otherSE):this.tree.delete(e),n;t.isLeft&&this.tree.add(e);var r=e,i=e;do{r=this.tree.lastBefore(r)}while(null!=r&&null!=r.consumedBy);do{i=this.tree.firstAfter(i)}while(null!=i&&null!=i.consumedBy);if(t.isLeft){var o=null;if(r){var s=r.getIntersection(e);if(null!==s&&(e.isAnEndpoint(s)||(o=s),!r.isAnEndpoint(s)))for(var a=this._splitSafely(r,s),u=0,l=a.length;u<l;u++)n.push(a[u])}var h=null;if(i){var c=i.getIntersection(e);if(null!==c&&(e.isAnEndpoint(c)||(h=c),!i.isAnEndpoint(c)))for(var f=this._splitSafely(i,c),g=0,v=f.length;g<v;g++)n.push(f[g])}if(null!==o||null!==h){var d=null;if(null===o)d=h;else if(null===h)d=o;else{d=_s.comparePoints(o,h)<=0?o:h}this.queue.delete(e.rightSE),n.push(e.rightSE);for(var p=e.split(d),y=0,m=p.length;y<m;y++)n.push(p[y])}n.length>0?(this.tree.delete(e),n.push(t)):(this.segments.push(e),e.prev=r)}else{if(r&&i){var _=r.getIntersection(i);if(null!==_){if(!r.isAnEndpoint(_))for(var x=this._splitSafely(r,_),E=0,k=x.length;E<k;E++)n.push(x[E]);if(!i.isAnEndpoint(_))for(var w=this._splitSafely(i,_),b=0,I=w.length;b<I;b++)n.push(w[b])}}this.tree.delete(e)}return n}},{key:"_splitSafely",value:function(t,e){this.tree.delete(t);var n=t.rightSE;this.queue.delete(n);var r=t.split(e);return r.push(n),void 0===t.consumedBy&&this.tree.add(t),r}}])}(),bs=new(function(){return s((function t(){i(this,t),u(this,"type",void 0),u(this,"numMultiPolys",void 0)}),[{key:"run",value:function(t,e,n){bs.type=t;for(var r=[new Ps(e,!0)],i=0,o=n.length;i<o;i++)r.push(new Ps(n[i],!1));if(bs.numMultiPolys=r.length,"difference"===bs.type)for(var s=r[0],a=1;a<r.length;)null!==fs(r[a].bbox,s.bbox)?a++:r.splice(a,1);if("intersection"===bs.type)for(var u=0,l=r.length;u<l;u++)for(var h=r[u],c=u+1,f=r.length;c<f;c++)if(null===fs(h.bbox,r[c].bbox))return[];for(var g=new ts(_s.compare),v=0,d=r.length;v<d;v++)for(var p=r[v].getSweepEvents(),y=0,m=p.length;y<m;y++)g.add(p[y]);var _=new ws(g),x=null;for(0!=g.size&&(x=g.first(),g.delete(x));x;){for(var E=_.process(x),k=0,w=E.length;k<w;k++){var b=E[k];void 0===b.consumedBy&&g.add(b)}0!=g.size?(x=g.first(),g.delete(x)):x=null}hs.reset();var I=xs.factory(_.segments);return new ks(I).getGeom()}}])}()),Is=bs,Ns=0,Ss=function(){function t(e,n,r,o){i(this,t),u(this,"id",void 0),u(this,"leftSE",void 0),u(this,"rightSE",void 0),u(this,"rings",void 0),u(this,"windings",void 0),u(this,"ringOut",void 0),u(this,"consumedBy",void 0),u(this,"prev",void 0),u(this,"_prevInResult",void 0),u(this,"_beforeState",void 0),u(this,"_afterState",void 0),u(this,"_isInResult",void 0),this.id=++Ns,this.leftSE=e,e.segment=this,e.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=e,this.rings=r,this.windings=o}return s(t,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t.isLessThan(e)?t:e},ur:{x:this.rightSE.point.x,y:t.isGreaterThan(e)?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}},{key:"isAnEndpoint",value:function(t){return t.x.eq(this.leftSE.point.x)&&t.y.eq(this.leftSE.point.y)||t.x.eq(this.rightSE.point.x)&&t.y.eq(this.rightSE.point.y)}},{key:"comparePoint",value:function(t){return hs.orient(this.leftSE.point,t,this.rightSE.point)}},{key:"getIntersection",value:function(t){var e=this.bbox(),n=t.bbox(),r=fs(e,n);if(null===r)return null;var i=this.leftSE.point,o=this.rightSE.point,s=t.leftSE.point,a=t.rightSE.point,u=cs(e,s)&&0===this.comparePoint(s),l=cs(n,i)&&0===t.comparePoint(i),h=cs(e,a)&&0===this.comparePoint(a),c=cs(n,o)&&0===t.comparePoint(o);if(l&&u)return c&&!h?o:!c&&h?a:null;if(l)return h&&i.x.eq(a.x)&&i.y.eq(a.y)?null:i;if(u)return c&&o.x.eq(s.x)&&o.y.eq(s.y)?null:s;if(c&&h)return null;if(c)return o;if(h)return a;var f=function(t,e,n,r){if(e.x.isZero())return ms(n,r,t.x);if(r.x.isZero())return ms(t,e,n.x);if(e.y.isZero())return ys(n,r,t.y);if(r.y.isZero())return ys(t,e,n.y);var i=gs(e,r);if(i.isZero())return null;var o={x:n.x.minus(t.x),y:n.y.minus(t.y)},s=gs(o,e).div(i),a=gs(o,r).div(i),u=t.x.plus(a.times(e.x)),l=n.x.plus(s.times(r.x)),h=t.y.plus(a.times(e.y)),c=n.y.plus(s.times(r.y));return{x:u.plus(l).div(2),y:h.plus(c).div(2)}}(i,this.vector(),s,t.vector());return null===f?null:cs(r,f)?hs.snap(f):null}},{key:"split",value:function(e){var n=[],r=void 0!==e.events,i=new _s(e,!0),o=new _s(e,!1),s=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);var a=new t(i,s,this.rings.slice(),this.windings.slice());return _s.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),_s.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}},{key:"consume",value:function(e){for(var n=this,r=e;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var i=t.compare(n,r);if(0!==i){if(i>0){var o=n;n=r,r=o}if(n.prev===r){var s=n;n=r,r=s}for(var a=0,u=r.rings.length;a<u;a++){var l=r.rings[a],h=r.windings[a],c=n.rings.indexOf(l);-1===c?(n.rings.push(l),n.windings.push(h)):n.windings[c]+=h}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys,i=0,o=this.rings.length;i<o;i++){var s=this.rings[i],a=this.windings[i],u=e.indexOf(s);-1===u?(e.push(s),n.push(a)):n[u]+=a}for(var l=[],h=[],c=0,f=e.length;c<f;c++)if(0!==n[c]){var g=e[c],v=g.poly;if(-1===h.indexOf(v))if(g.isExterior)l.push(v);else{-1===h.indexOf(v)&&h.push(v);var d=l.indexOf(g.poly);-1!==d&&l.splice(d,1)}}for(var p=0,y=l.length;p<y;p++){var m=l[p].multiPoly;-1===r.indexOf(m)&&r.push(m)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(Is.type){case"union":var n=0===t.length,r=0===e.length;this._isInResult=n!==r;break;case"intersection":var i,o;t.length<e.length?(i=t.length,o=e.length):(i=e.length,o=t.length),this._isInResult=o===Is.numMultiPolys&&i<o;break;case"xor":var s=Math.abs(t.length-e.length);this._isInResult=s%2==1;break;case"difference":var a=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=a(t)!==a(e)}return this._isInResult}}],[{key:"compare",value:function(t,e){var n=t.leftSE.point.x,r=e.leftSE.point.x,i=t.rightSE.point.x,o=e.rightSE.point.x;if(o.isLessThan(n))return 1;if(i.isLessThan(r))return-1;var s=t.leftSE.point.y,a=e.leftSE.point.y,u=t.rightSE.point.y,l=e.rightSE.point.y;if(n.isLessThan(r)){if(a.isLessThan(s)&&a.isLessThan(u))return 1;if(a.isGreaterThan(s)&&a.isGreaterThan(u))return-1;var h=t.comparePoint(e.leftSE.point);if(h<0)return 1;if(h>0)return-1;var c=e.comparePoint(t.rightSE.point);return 0!==c?c:-1}if(n.isGreaterThan(r)){if(s.isLessThan(a)&&s.isLessThan(l))return-1;if(s.isGreaterThan(a)&&s.isGreaterThan(l))return 1;var f=e.comparePoint(t.leftSE.point);if(0!==f)return f;var g=t.comparePoint(e.rightSE.point);return g<0?1:g>0?-1:1}if(s.isLessThan(a))return-1;if(s.isGreaterThan(a))return 1;if(i.isLessThan(o)){var v=e.comparePoint(t.rightSE.point);if(0!==v)return v}if(i.isGreaterThan(o)){var d=t.comparePoint(e.rightSE.point);if(d<0)return 1;if(d>0)return-1}if(!i.eq(o)){var p=u.minus(s),y=i.minus(n),m=l.minus(a),_=o.minus(r);if(p.isGreaterThan(y)&&m.isLessThan(_))return 1;if(p.isLessThan(y)&&m.isGreaterThan(_))return-1}return i.isGreaterThan(o)?1:i.isLessThan(o)||u.isLessThan(l)?-1:u.isGreaterThan(l)?1:t.id<e.id?-1:t.id>e.id?1:0}},{key:"fromRing",value:function(e,n,r){var i,o,s,a=_s.comparePoints(e,n);if(a<0)i=e,o=n,s=1;else{if(!(a>0))throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));i=n,o=e,s=-1}return new t(new _s(i,!0),new _s(o,!1),[r],[s])}}])}(),Ms=function(){return s((function t(e,n,r){if(i(this,t),u(this,"poly",void 0),u(this,"isExterior",void 0),u(this,"segments",void 0),u(this,"bbox",void 0),!Array.isArray(e)||0===e.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=r,this.segments=[],"number"!=typeof e[0][0]||"number"!=typeof e[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var o=hs.snap({x:new Ko(e[0][0]),y:new Ko(e[0][1])});this.bbox={ll:{x:o.x,y:o.y},ur:{x:o.x,y:o.y}};for(var s=o,a=1,l=e.length;a<l;a++){if("number"!=typeof e[a][0]||"number"!=typeof e[a][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var h=hs.snap({x:new Ko(e[a][0]),y:new Ko(e[a][1])});h.x.eq(s.x)&&h.y.eq(s.y)||(this.segments.push(Ss.fromRing(s,h,this)),h.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=h.x),h.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=h.y),h.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=h.x),h.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=h.y),s=h)}o.x.eq(s.x)&&o.y.eq(s.y)||this.segments.push(Ss.fromRing(s,o,this))}),[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.segments.length;e<n;e++){var r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}}])}(),Ls=function(){return s((function t(e,n){if(i(this,t),u(this,"multiPoly",void 0),u(this,"exteriorRing",void 0),u(this,"interiorRings",void 0),u(this,"bbox",void 0),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Ms(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,o=e.length;r<o;r++){var s=new Ms(e[r],this,!1);s.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=s.bbox.ur.y),this.interiorRings.push(s)}this.multiPoly=n}),[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,n=this.interiorRings.length;e<n;e++)for(var r=this.interiorRings[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}])}(),Ps=function(){return s((function t(e,n){if(i(this,t),u(this,"isSubject",void 0),u(this,"polys",void 0),u(this,"bbox",void 0),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof e[0][0][0]&&(e=[e])}catch(t){}this.polys=[],this.bbox={ll:{x:new Ko(Number.POSITIVE_INFINITY),y:new Ko(Number.POSITIVE_INFINITY)},ur:{x:new Ko(Number.NEGATIVE_INFINITY),y:new Ko(Number.NEGATIVE_INFINITY)}};for(var r=0,o=e.length;r<o;r++){var s=new Ls(e[r],this);s.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=s.bbox.ur.y),this.polys.push(s)}this.isSubject=n}),[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++)for(var r=this.polys[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}])}(),Cs=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Is.run("union",t,n)},Ts=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Is.run("intersection",t,n)},Os=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Is.run("difference",t,n)},Rs=hs.set,As=Object.freeze({__proto__:null,difference:Os,intersection:Ts,setPrecision:Rs,union:Cs,xor:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Is.run("xor",t,n)}});function Ds(t){if(!t)throw new Error("geojson is required");var e=[];return xt(t,(function(t){e.push(t)})),C(e)}function Fs(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=K(t),i=K(e),o=r[0]-i[0],s=r[1]-i[1];return 1===n?Math.abs(o)+Math.abs(s):Math.pow(Math.pow(o,n)+Math.pow(s,n),1/n)}function qs(t,e){var n,r,i=(e=e||{}).threshold||1e4,o=e.p||2,s=null!=(n=e.binary)&&n,a=e.alpha||-1,u=null!=(r=e.standardization)&&r,l=[];dt(t,(function(t){l.push(gi(t))}));for(var h=[],c=0;c<l.length;c++)h[c]=[];for(var f=0;f<l.length;f++)for(var g=f;g<l.length;g++){f===g&&(h[f][g]=0);var v=Fs(l[f],l[g],o);h[f][g]=v,h[g][f]=v}for(var d=0;d<l.length;d++)for(var p=0;p<l.length;p++){var y=h[d][p];0!==y&&(h[d][p]=s?y<=i?1:0:y<=i?Math.pow(y,a):0)}if(u)for(var m=0;m<l.length;m++)for(var _=h[m].reduce((function(t,e){return t+e}),0),x=0;x<l.length;x++)h[m][x]=h[m][x]/_;return h}function Gs(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=K(t),i=K(e);i[0]+=i[0]-r[0]>180?-360:r[0]-i[0]>180?360:0;var o=function(t,e,n){var r=n=void 0===n?x:Number(n),i=t[1]*Math.PI/180,o=e[1]*Math.PI/180,s=o-i,a=Math.abs(e[0]-t[0])*Math.PI/180;a>Math.PI&&(a-=2*Math.PI);var u=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(i/2+Math.PI/4)),l=Math.abs(u)>1e-11?s/u:Math.cos(i);return Math.sqrt(s*s+l*l*a*a)*r}(r,i);return X(o,"meters",n.units)}function Bs(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=e<0,o=X(Math.abs(e),r.units,"meters");i&&(o=-Math.abs(o));var s=K(t),a=function(t,e,n,r){r=void 0===r?x:Number(r);var i=e/r,o=t[0]*Math.PI/180,s=j(t[1]),a=j(n),u=i*Math.cos(a),l=s+u;Math.abs(l)>Math.PI/2&&(l=l>0?Math.PI-l:-Math.PI-l);var h=Math.log(Math.tan(l/2+Math.PI/4)/Math.tan(s/2+Math.PI/4)),c=Math.abs(h)>1e-11?u/h:Math.cos(s),f=i*Math.sin(a)/c;return[(180*(o+f)/Math.PI+540)%360-180,180*l/Math.PI]}(s,o,n);return a[0]+=a[0]-s[0]>180?-360:s[0]-a[0]>180?360:0,I(a,r.properties)}function Ys(t,e,n){if(!Z(n=n||{}))throw new Error("options is invalid");var r=n.pivot,i=n.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("angle is required");if(0===e)return t;var o=null!=r?r:gi(t);return!1!==i&&void 0!==i||(t=Ai(t)),ct(t,(function(t){var n=lt(o,t)+e,r=Gs(o,t),i=Q(Bs(o,r,n));t[0]=i[0],t[1]=i[1]})),t}function zs(t,e,n,r){var i=(r=r||{}).steps||64,o=r.units||"kilometers",s=r.angle||0,a=r.pivot||t,u=r.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!Z(r))throw new Error("options must be an object");if(!V(i))throw new Error("steps must be a number");if(!V(s))throw new Error("angle must be a number");var l=K(Ys(I(K(t)),s,{pivot:a}));s=-90+s,i=Math.ceil(i/4);for(var h=[],c=[],f=e,g=n,v=g,d=(f-g)/(Math.PI/2),p=(f+g)*Math.PI/4,y=i,m=0,_=0,x=0;x<i;x++)_+=m,m=0===d?p/y/v:(-(d*_+v)+Math.sqrt(Math.pow(d*_+v,2)-.5*d*4*(-p/y)))/(.5*d*2),0!=_&&h.push(_);c.push(0);for(var E=0;E<h.length;E++)c.push(h[E]);c.push(Math.PI/2);for(var k=0;k<h.length;k++)c.push(Math.PI-h[h.length-k-1]);c.push(Math.PI);for(var w=0;w<h.length;w++)c.push(Math.PI+h[w]);c.push(3*Math.PI/2);for(var b=0;b<h.length;b++)c.push(2*Math.PI-h[h.length-b-1]);c.push(0);for(var N=[],M=0,L=c;M<L.length;M++){var P=L[M],C=Math.atan2(g*Math.sin(P),f*Math.cos(P)),T=Math.sqrt(Math.pow(f,2)*Math.pow(g,2)/(Math.pow(f*Math.sin(C),2)+Math.pow(g*Math.cos(C),2)));N.push(at(l,T,s+z(C),{units:o}).geometry.coordinates)}return S([N],u)}function js(t){return Gt(Rt(t))}function Xs(t){var e=[];return"FeatureCollection"===t.type?dt(t,(function(t){ct(t,(function(n){e.push(I(n,t.properties))}))})):"Feature"===t.type?ct(t,(function(n){e.push(I(n,t.properties))})):ct(t,(function(t){e.push(I(t))})),C(e)}var Us=Math.PI/180,Vs=180/Math.PI,Zs=function(t,e){this.lon=t,this.lat=e,this.x=Us*t,this.y=Us*e};Zs.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},Zs.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new Zs(e,t)};var Hs=function(){this.coords=[],this.length=0};Hs.prototype.move_to=function(t){this.length++,this.coords.push(t)};var Ws=function(t){this.properties=t||{},this.geometries=[]};Ws.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},Ws.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var Js=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new Zs(t.x,t.y),this.end=new Zs(e.x,e.y),this.properties=n||{};var r=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+this.start.view()+" and "+this.end.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};
/*!
   * Copyright (c) 2019, Dane Springmeyer
   *
   * Redistribution and use in source and binary forms, with or without
   * modification, are permitted provided that the following conditions are
   * met:
   *
   *     * Redistributions of source code must retain the above copyright
   *       notice, this list of conditions and the following disclaimer.
   *     * Redistributions in binary form must reproduce the above copyright
   *       notice, this list of conditions and the following disclaimer in
   *       the documentation and/or other materials provided with the
   *       distribution.
   *
   * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
   * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
   * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
   * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
   * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
   * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
   * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
   * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
   * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
   * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
   * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
   */
function Ks(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];if(mt(t,(function(t){n.push(t.coordinates)})),n.length<2)throw new Error("Must specify at least 2 geometries");var r=Ts.apply(As,[n[0]].concat(p(n.slice(1))));return 0===r.length?null:1===r.length?S(r[0],e.properties):R(r,e.properties)}function Qs(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=JSON.stringify(n.properties||{}),i=d(t,4),o=i[0],s=i[1],a=i[2],u=i[3],l=(s+u)/2,h=(o+a)/2,c=2*e/ut([o,l],[a,l],n)*(a-o),f=2*e/ut([h,s],[h,u],n)*(u-s),g=c/2,v=2*g,p=Math.sqrt(3)/2*f,y=a-o,m=u-s,_=3/4*v,x=p,E=(y-v)/(v-g/2),k=Math.floor(E),w=(k*_-g/2-y)/2-g/2+_/2,b=Math.floor((m-p)/p),I=(m-b*p)/2,N=b*p-m>p/2;N&&(I-=p/4);for(var S=[],M=[],L=0;L<6;L++){var P=2*Math.PI/6*L;S.push(Math.cos(P)),M.push(Math.sin(P))}for(var T=[],O=0;O<=k;O++)for(var R=0;R<=b;R++){var A=O%2==1;if((0!==R||!A)&&(0!==R||!N)){var D=O*_+o-w,F=R*x+s+I;if(A&&(F-=p/2),!0===n.triangles)ta([D,F],c/2,f/2,JSON.parse(r),S,M).forEach((function(t){n.mask?Ks(C([n.mask,t]))&&T.push(t):T.push(t)}));else{var q=$s([D,F],c/2,f/2,JSON.parse(r),S,M);n.mask?Ks(C([n.mask,q]))&&T.push(q):T.push(q)}}}return C(T)}function $s(t,e,n,r,i,o){for(var s=[],a=0;a<6;a++){var u=t[0]+e*i[a],l=t[1]+n*o[a];s.push([u,l])}return s.push(s[0].slice()),S([s],r)}function ta(t,e,n,r,i,o){for(var s=[],a=0;a<6;a++){var u=[];u.push(t),u.push([t[0]+e*i[a],t[1]+n*o[a]]),u.push([t[0]+e*i[(a+1)%6],t[1]+n*o[(a+1)%6]]),u.push(t),s.push(S([u],r))}return s}function ea(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.mask&&!n.units&&(n.units="kilometers");for(var r=[],i=t[0],o=t[1],s=t[2],a=t[3],u=e/ut([i,o],[s,o],n)*(s-i),l=e/ut([i,o],[i,a],n)*(a-o),h=s-i,c=a-o,f=Math.floor(h/u),g=(c-Math.floor(c/l)*l)/2,v=i+(h-f*u)/2;v<=s;){for(var d=o+g;d<=a;){var p=I([v,d],n.properties);n.mask?Cn(p,n.mask)&&r.push(p):r.push(p),d+=l}v+=u}return C(r)}function na(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=[],o=t[0],s=t[1],a=t[2],u=t[3],l=a-o,h=X(e,r.units,"degrees"),c=u-s,f=X(n,r.units,"degrees"),g=Math.floor(Math.abs(l)/h),v=Math.floor(Math.abs(c)/f),d=(c-v*f)/2,p=o+(l-g*h)/2,y=0;y<g;y++){for(var m=s+d,_=0;_<v;_++){var x=S([[[p,m],[p,m+f],[p+h,m+f],[p+h,m],[p,m]]],r.properties);r.mask?Te(r.mask,x)&&i.push(x):i.push(x),m+=f}p+=h}return C(i)}function ra(t,e){return na(t,e,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function ia(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=[],i=e/ut([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),o=e/ut([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),s=0,a=t[0];a<=t[2];){for(var u=0,l=t[1];l<=t[3];){var h=null,c=null;s%2==0&&u%2==0?(h=S([[[a,l],[a,l+o],[a+i,l],[a,l]]],n.properties),c=S([[[a,l+o],[a+i,l+o],[a+i,l],[a,l+o]]],n.properties)):s%2==0&&u%2==1?(h=S([[[a,l],[a+i,l+o],[a+i,l],[a,l]]],n.properties),c=S([[[a,l],[a,l+o],[a+i,l+o],[a,l]]],n.properties)):u%2==0&&s%2==1?(h=S([[[a,l],[a,l+o],[a+i,l+o],[a,l]]],n.properties),c=S([[[a,l],[a+i,l+o],[a+i,l],[a,l]]],n.properties)):u%2==1&&s%2==1&&(h=S([[[a,l],[a,l+o],[a+i,l],[a,l]]],n.properties),c=S([[[a,l+o],[a+i,l+o],[a+i,l],[a,l+o]]],n.properties)),n.mask?(Ks(C([n.mask,h]))&&r.push(h),Ks(C([n.mask,c]))&&r.push(c)):(r.push(h),r.push(c)),l+=o,u++}s++,a+=i}return C(r)}Js.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),s=Vs*Math.atan2(o,Math.sqrt(Math.pow(r,2)+Math.pow(i,2)));return[Vs*Math.atan2(i,r),s]},Js.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),i=0;i<t;++i){var o=r*i,s=this.interpolate(o);n.push(s)}for(var a=!1,u=0,l=e&&e.offset?e.offset:10,h=180-l,c=-180+l,f=360-l,g=1;g<n.length;++g){var v=n[g-1][0],d=n[g][0],p=Math.abs(d-v);p>f&&(d>h&&v<c||v>h&&d<c)?a=!0:p>u&&(u=p)}var y=[];if(a&&u<l){var m=[];y.push(m);for(var _=0;_<n.length;++_){var x=parseFloat(n[_][0]);if(_>0&&Math.abs(x-n[_-1][0])>f){var E=parseFloat(n[_-1][0]),k=parseFloat(n[_-1][1]),w=parseFloat(n[_][0]),b=parseFloat(n[_][1]);if(E>-180&&E<c&&180===w&&_+1<n.length&&n[_-1][0]>-180&&n[_-1][0]<c){m.push([-180,n[_][1]]),_++,m.push([n[_][0],n[_][1]]);continue}if(E>h&&E<180&&-180===w&&_+1<n.length&&n[_-1][0]>h&&n[_-1][0]<180){m.push([180,n[_][1]]),_++,m.push([n[_][0],n[_][1]]);continue}if(E<c&&w>h){var I=E;E=w,w=I;var N=k;k=b,b=N}if(E>h&&w<c&&(w+=360),E<=180&&w>=180&&E<w){var S=(180-E)/(w-E),M=S*b+(1-S)*k;m.push([n[_-1][0]>h?180:-180,M]),(m=[]).push([n[_-1][0]>h?-180:180,M]),y.push(m)}else m=[],y.push(m);m.push([x,n[_][1]])}else m.push([n[_][0],n[_][1]])}}else{var L=[];y.push(L);for(var P=0;P<n.length;++P)L.push([n[P][0],n[P][1]])}for(var C=new Ws(this.properties),T=0;T<y.length;++T){var O=new Hs;C.geometries.push(O);for(var R=y[T],A=0;A<R.length;++A)O.move_to(R[A])}return C};var oa=Object.defineProperty,sa=Object.getOwnPropertySymbols,aa=Object.prototype.hasOwnProperty,ua=Object.prototype.propertyIsEnumerable,la=function(t,e,n){return e in t?oa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},ha=function(t,e){for(var n in e||(e={}))aa.call(e,n)&&la(t,n,e[n]);if(sa){var r,i=a(sa(e));try{for(i.s();!(r=i.n()).done;){n=r.value;ua.call(e,n)&&la(t,n,e[n])}}catch(t){i.e(t)}finally{i.f()}}return t};function ca(t,e){if(!Z(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;nt(t,"Point","input must contain Points");for(var o=function(t,e){var n={};dt(t,(function(t){var e=Q(t)[1];n[e]||(n[e]=[]),n[e].push(t)}));var r=Object.keys(n).map((function(t){return n[t].sort((function(t,e){return Q(t)[0]-Q(e)[0]}))})),i=r.sort((function(t,n){return e?Q(t[0])[1]-Q(n[0])[1]:Q(n[0])[1]-Q(t[0])[1]}));return i}(t,r),s=[],a=0;a<o.length;a++){for(var u=o[a],l=[],h=0;h<u.length;h++){var c=u[h];c.properties[n]?l.push(c.properties[n]):l.push(0),!0===i&&(c.properties.matrixPosition=[a,h])}s.push(l)}return s}function fa(t,e){for(var n=[],r=t[0].length,i=t.length,o=0;o<i-1;o++)for(var s=0;s<r-1;s++){var a=t[o+1][s+1],u=t[o][s+1],l=t[o][s],h=t[o+1][s];switch((h>=e?8:0)|(a>=e?4:0)|(u>=e?2:0)|(l>=e?1:0)){case 0:case 15:continue;case 1:n.push([[s+c(l,u),o],[s,o+c(l,h)]]);break;case 2:n.push([[s+1,o+c(u,a)],[s+c(l,u),o]]);break;case 3:n.push([[s+1,o+c(u,a)],[s,o+c(l,h)]]);break;case 4:n.push([[s+c(h,a),o+1],[s+1,o+c(u,a)]]);break;case 5:(h+a+u+l)/4>=e?n.push([[s+c(h,a),o+1],[s,o+c(l,h)]],[[s+c(l,u),o],[s+1,o+c(u,a)]]):n.push([[s+c(h,a),o+1],[s+1,o+c(u,a)]],[[s+c(l,u),o],[s,o+c(l,h)]]);break;case 6:n.push([[s+c(h,a),o+1],[s+c(l,u),o]]);break;case 7:n.push([[s+c(h,a),o+1],[s,o+c(l,h)]]);break;case 8:n.push([[s,o+c(l,h)],[s+c(h,a),o+1]]);break;case 9:n.push([[s+c(l,u),o],[s+c(h,a),o+1]]);break;case 10:(h+a+u+l)/4>=e?n.push([[s,o+c(l,h)],[s+c(l,u),o]],[[s+1,o+c(u,a)],[s+c(h,a),o+1]]):n.push([[s,o+c(l,h)],[s+c(h,a),o+1]],[[s+1,o+c(u,a)],[s+c(l,u),o]]);break;case 11:n.push([[s+1,o+c(u,a)],[s+c(h,a),o+1]]);break;case 12:n.push([[s,o+c(l,h)],[s+1,o+c(u,a)]]);break;case 13:n.push([[s+c(l,u),o],[s+1,o+c(u,a)]]);break;case 14:n.push([[s,o+c(l,h)],[s+c(l,u),o]])}}return n;function c(t,n){if(t===n)return.5;var r=(e-t)/(n-t);return r>1?1:r<0?0:r}}function ga(t,e){for(var n=e.length,r=e[0].length,i=[],o=[];t.length>0;){var s=p(t.shift());i.push(s);var u=void 0;do{u=!1;for(var l=0;l<t.length;l++){var h=t[l];if(h[0][0]===s[s.length-1][0]&&h[0][1]===s[s.length-1][1]){u=!0,s.push(h[1]),t.splice(l,1);break}if(h[1][0]===s[0][0]&&h[1][1]===s[0][1]){u=!0,s.unshift(h[0]),t.splice(l,1);break}}}while(u)}for(var c=function(){var t=i[0];if(t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1])return o.push(t),i.shift(),1;var e,s,u=t[t.length-1];if(0===u[0]&&0!==u[1])e=ma(i,(function(t){return 0===t[0][0]&&t[0][1]<u[1]}),(function(t,e){return e[0][1]-t[0][1]})),s=[0,0];else if(0===u[1]&&u[0]!==r-1)e=ma(i,(function(t){return 0===t[0][1]&&t[0][0]>u[0]}),(function(t,e){return t[0][0]-e[0][0]})),s=[r-1,0];else if(u[0]===r-1&&u[1]!==n-1)e=ma(i,(function(t){return t[0][0]===r-1&&t[0][1]>u[1]}),(function(t,e){return t[0][1]-e[0][1]})),s=[r-1,n-1];else{if(u[1]!==n-1||0===u[0])throw new Error("Contour not closed but is not along an edge");e=ma(i,(function(t){return t[0][1]===n-1&&t[0][0]<u[0]}),(function(t,e){return e[0][0]-t[0][0]})),s=[0,n-1]}if(-1===e)t.push(s);else if(0===e)t.push([t[0][0],t[0][1]]),o.push(t),i.shift();else{var l=i[e];i.splice(e,1);var h,c=a(l);try{for(c.s();!(h=c.n()).done;){var f=h.value;t.push(f)}}catch(t){c.e(t)}finally{c.f()}}};i.length>0;)c();for(var f=0;f<o.length;f++)o[f].length<4&&(o.splice(f,1),f--);return o}function va(t){var e=t.map((function(t){return{ring:t,area:Lt(S([t]))}}));return e.sort((function(t,e){return e.area-t.area})),e.map((function(t){return t.ring}))}function da(t){for(var e=t.map((function(t){return{lrCoordinates:t,grouped:!1}})),n=[];!ya(e);)for(var r=0;r<e.length;r++)if(!e[r].grouped){var i=[];i.push(e[r].lrCoordinates),e[r].grouped=!0;var o=S([e[r].lrCoordinates]);t:for(var s=r+1;s<e.length;s++)if(!e[s].grouped){var a=S([e[s].lrCoordinates]);if(pa(a,o)){for(var u=1;u<i.length;u++)if(pa(a,S([i[u]])))continue t;i.push(e[s].lrCoordinates),e[s].grouped=!0}}n.push(i)}return n}function pa(t,e){for(var n=Xs(t),r=0;r<n.features.length;r++)if(!jt(n.features[r],e))return!1;return!0}function ya(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}function ma(t,e,n){for(var r=-1,i=0;i<t.length;i++)e(t[i])&&(-1===r||n(t[r],t[i])>0)&&(r=i);return r}var _a=Object.defineProperty,xa=Object.getOwnPropertySymbols,Ea=Object.prototype.hasOwnProperty,ka=Object.prototype.propertyIsEnumerable,wa=function(t,e,n){return e in t?_a(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},ba=function(t,e){for(var n in e||(e={}))Ea.call(e,n)&&wa(t,n,e[n]);if(xa){var r,i=a(xa(e));try{for(i.s();!(r=i.n()).done;){n=r.value;ka.call(e,n)&&wa(t,n,e[n])}}catch(t){i.e(t)}finally{i.f()}}return t};function Ia(t,e){if(!Z(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;nt(t,"Point","input must contain Points");for(var o=function(t,e){var n={};dt(t,(function(t){var e=Q(t)[1];n[e]||(n[e]=[]),n[e].push(t)}));var r=Object.keys(n).map((function(t){return n[t].sort((function(t,e){return Q(t)[0]-Q(e)[0]}))})),i=r.sort((function(t,n){return e?Q(t[0])[1]-Q(n[0])[1]:Q(n[0])[1]-Q(t[0])[1]}));return i}(t,r),s=[],a=0;a<o.length;a++){for(var u=o[a],l=[],h=0;h<u.length;h++){var c=u[h];c.properties[n]?l.push(c.properties[n]):l.push(0),!0===i&&(c.properties.matrixPosition=[a,h])}s.push(l)}return s}function Na(t,e){for(var n=[],r=t.length,i=t[0].length,o=0;o<r-1;o++)for(var s=0;s<i-1;s++){var a=t[o+1][s+1],u=t[o][s+1],l=t[o][s],h=t[o+1][s];switch((h>=e?8:0)|(a>=e?4:0)|(u>=e?2:0)|(l>=e?1:0)){case 0:case 15:continue;case 1:n.push([[s+y(l,u),o],[s,o+y(l,h)]]);break;case 2:n.push([[s+1,o+y(u,a)],[s+y(l,u),o]]);break;case 3:n.push([[s+1,o+y(u,a)],[s,o+y(l,h)]]);break;case 4:n.push([[s+y(h,a),o+1],[s+1,o+y(u,a)]]);break;case 5:(h+a+u+l)/4>=e?n.push([[s+y(h,a),o+1],[s,o+y(l,h)]],[[s+y(l,u),o],[s+1,o+y(u,a)]]):n.push([[s+y(h,a),o+1],[s+1,o+y(u,a)]],[[s+y(l,u),o],[s,o+y(l,h)]]);break;case 6:n.push([[s+y(h,a),o+1],[s+y(l,u),o]]);break;case 7:n.push([[s+y(h,a),o+1],[s,o+y(l,h)]]);break;case 8:n.push([[s,o+y(l,h)],[s+y(h,a),o+1]]);break;case 9:n.push([[s+y(l,u),o],[s+y(h,a),o+1]]);break;case 10:(h+a+u+l)/4>=e?n.push([[s,o+y(l,h)],[s+y(l,u),o]],[[s+1,o+y(u,a)],[s+y(h,a),o+1]]):n.push([[s,o+y(l,h)],[s+y(h,a),o+1]],[[s+1,o+y(u,a)],[s+y(l,u),o]]);break;case 11:n.push([[s+1,o+y(u,a)],[s+y(h,a),o+1]]);break;case 12:n.push([[s,o+y(l,h)],[s+1,o+y(u,a)]]);break;case 13:n.push([[s+y(l,u),o],[s+1,o+y(u,a)]]);break;case 14:n.push([[s,o+y(l,h)],[s+y(l,u),o]])}}for(var c=[];n.length>0;){var f=p(n.shift());c.push(f);var g=void 0;do{g=!1;for(var v=0;v<n.length;v++){var d=n[v];if(d[0][0]===f[f.length-1][0]&&d[0][1]===f[f.length-1][1]){g=!0,f.push(d[1]),n.splice(v,1);break}if(d[1][0]===f[0][0]&&d[1][1]===f[0][1]){g=!0,f.unshift(d[0]),n.splice(v,1);break}}}while(g)}return c;function y(t,n){if(t===n)return.5;var r=(e-t)/(n-t);return r>1?1:r<0?0:r}}function Sa(t,e,n,r,i,o,s,a){var u,l,h,c,f={x:null,y:null,onLine1:!1,onLine2:!1};return 0===(u=(a-o)*(n-t)-(s-i)*(r-e))?null!==f.x&&null!==f.y&&f:(c=(n-t)*(l=e-o)-(r-e)*(h=t-i),l=((s-i)*l-(a-o)*h)/u,h=c/u,f.x=t+l*(n-t),f.y=e+l*(r-e),l>=0&&l<=1&&(f.onLine1=!0),h>=0&&h<=1&&(f.onLine2=!0),!(!f.onLine1||!f.onLine2)&&[f.x,f.y])}function Ma(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return wt(t,(function(t,n){var r=n.geometry.coordinates;return t+ut(r[0],r[1],e)}),0)}function La(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=i.steps||64,s=Pa(n),a=Pa(r),u=Array.isArray(t)||"Feature"!==t.type?{}:t.properties;if(s===a)return L(Ri(t,e,i).geometry.coordinates[0],u);for(var l=s,h=s<a?a:a+360,c=l,f=[],g=0,v=(h-l)/o;c<=h;)f.push(at(t,e,c,i).geometry.coordinates),c=l+ ++g*v;return L(f,u)}function Pa(t){var e=t%360;return e<0&&(e+=360),e}function Ca(t,e,n,r){if(!Z(r=r||{}))throw new Error("options is invalid");var i,o=[];if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}for(var s,a,u,l=i.length,h=0,c=0;c<i.length&&!(e>=h&&c===i.length-1);c++){if(h>e&&0===o.length){if(!(s=e-h))return o.push(i[c]),L(o);a=st(i[c],i[c-1])-180,u=at(i[c],s,a,r),o.push(u.geometry.coordinates)}if(h>=n)return(s=n-h)?(a=st(i[c],i[c-1])-180,u=at(i[c],s,a,r),o.push(u.geometry.coordinates),L(o)):(o.push(i[c]),L(o));if(h>=e&&o.push(i[c]),c===i.length-1)return L(o);h+=ut(i[c],i[c+1],r)}if(h<e&&i.length===l)throw new Error("Start position is beyond line");var f=i[i.length-1];return L([f,f])}function Ta(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function Oa(t,e){return t[0]*e[1]-e[0]*t[1]}function Ra(t,e){return!function(t,e){return 0===Oa(Ta(t),Ta(e))}(t,e)&&function(t,e){var n,r,i=t[0],o=Ta(t),s=e[0],a=Ta(e),u=Oa(o,a),l=function(t,e){return[t[0]+e[0],t[1]+e[1]]}(i,function(t,e){return[t*e[0],t*e[1]]}(Oa((r=i,[(n=s)[0]-r[0],n[1]-r[1]]),a)/u,o));return l}(t,e)}function Aa(t,e,n){var r=[],i=G(e,n),o=Q(t),s=[];return o.forEach((function(t,e){if(e!==o.length-1){var n=(l=t,h=o[e+1],c=i,f=Math.sqrt((l[0]-h[0])*(l[0]-h[0])+(l[1]-h[1])*(l[1]-h[1])),g=l[0]+c*(h[1]-l[1])/f,v=h[0]+c*(h[1]-l[1])/f,d=l[1]+c*(l[0]-h[0])/f,p=h[1]+c*(l[0]-h[0])/f,[[g,d],[v,p]]);if(r.push(n),e>0){var a=r[e-1],u=Ra(n,a);!1!==u&&(a[1]=u,n[0]=u),s.push(a[0]),e===o.length-2&&(s.push(n[0]),s.push(n[1]))}2===o.length&&(s.push(n[0]),s.push(n[1]))}var l,h,c,f,g,v,d,p})),L(s,t.properties)}function Da(t,e){if(!Z(e=null!=e?e:{}))throw new Error("options is invalid");var n=e.precision,r=e.coordinates,i=e.mutate;if(n=null==n||isNaN(n)?6:n,r=null==r||isNaN(r)?3:r,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");!1!==i&&void 0!==i||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return ct(t,(function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var r=0;r<t.length;r++)t[r]=Math.round(t[r]*e)/e}(t,o,r)})),t}function Fa(t,e){var n=[],r=Ke();return xt(e,(function(e){if(n.forEach((function(t,e){t.id=e})),n.length){var i=r.search(e);if(i.features.length){var o=Ga(e,i);n=n.filter((function(t){return t.id!==o.id})),r.remove(o),dt(qa(o,e),(function(t){n.push(t),r.insert(t)}))}}else n=qa(t,e).features,r.load(C(n))})),C(n)}function qa(t,e){var n=[],r=Q(t)[0],i=Q(t)[t.geometry.coordinates.length-1];if(Ba(r,K(e))||Ba(i,K(e)))return C([t]);var o=Ke(),s=Qe(t);o.load(s);var a=o.search(e);if(!a.features.length)return C([t]);var u=Ga(e,a),l=pt(s,(function(t,r,i){var o=Q(r)[1],s=K(e);return i===u.id?(t.push(s),n.push(L(t)),Ba(s,o)?[s]:[s,o]):(t.push(o),t)}),[r]);return l.length>1&&n.push(L(l)),C(n)}function Ga(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var n,r=1/0;return dt(e,(function(e){var i=cn(e,t).properties.dist;i<r&&(n=e,r=i)})),n}function Ba(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ya(t,e,n,r){e=e||("Feature"===t.type?t.properties:{});var i=rt(t),o=i.coordinates,s=i.type;if(!o.length)throw new Error("line must contain coordinates");switch(s){case"LineString":return n&&(o=za(o)),S([o],e);case"MultiLineString":var a=[],u=0;return o.forEach((function(t){if(n&&(t=za(t)),r){var e=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.abs(e-r)*Math.abs(n-i)}(Rt(L(t)));e>u?(a.unshift(t),u=e):a.push(t)}else a.push(t)})),S(a,e);default:throw new Error("geometry type "+s+" is not supported")}}function za(t){var e=t[0],n=e[0],r=e[1],i=t[t.length-1],o=i[0],s=i[1];return n===o&&r===s||t.push(e),t}function ja(t){return R(t)}function Xa(t){var e=[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]];return t&&(e="Feature"===t.type?t.geometry.coordinates:t.coordinates),S(e)}function Ua(t){var e,n=0,r=a(t);try{for(r.s();!(e=r.n()).done;){n+=e.value}}catch(t){r.e(t)}finally{r.f()}return n/t.length}var Va=Object.defineProperty,Za=Object.defineProperties,Ha=Object.getOwnPropertyDescriptors,Wa=Object.getOwnPropertySymbols,Ja=Object.prototype.hasOwnProperty,Ka=Object.prototype.propertyIsEnumerable,Qa=function(t,e,n){return e in t?Va(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},$a=function(t,e){for(var n in e||(e={}))Ja.call(e,n)&&Qa(t,n,e[n]);if(Wa){var r,i=a(Wa(e));try{for(i.s();!(r=i.n()).done;){n=r.value;Ka.call(e,n)&&Qa(t,n,e[n])}}catch(t){i.e(t)}finally{i.f()}}return t},tu=function(t,e){return Za(t,Ha(e))};function eu(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var r=1/0,i=0;dt(e,(function(e,o){var s=ut(t,e,n);s<r&&(i=o,r=s)}));var o=Ai(e.features[i]);return tu($a({},o),{properties:tu($a({},o.properties),{featureIndex:i,distanceToPoint:r})})}function nu(t,e){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=null!=(n=i.method)?n:"geodesic",s=null!=(r=i.units)?r:"kilometers";if(!t)throw new Error("pt is required");if(Array.isArray(t)?t=I(t):"Point"===t.type?t=w(t):et(t,"Point","point"),!e)throw new Error("line is required");Array.isArray(e)?e=L(e):"LineString"===e.type?e=w(e):et(e,"LineString","line");var a=1/0,u=t.geometry.coordinates;return kt(e,(function(t){if(t){var e=t.geometry.coordinates[0],n=t.geometry.coordinates[1],r=function(t,e,n,r){if("geodesic"===r.method){return cn(L([e,n]).geometry,t,{units:"degrees"}).properties.dist}var i=[n[0]-e[0],n[1]-e[1]],o=[t[0]-e[0],t[1]-e[1]],s=ru(o,i);if(s<=0)return Gs(t,e,{units:"degrees"});var a=ru(i,i);if(a<=s)return Gs(t,n,{units:"degrees"});var u=s/a,l=[e[0]+u*i[0],e[1]+u*i[1]];return Gs(t,l,{units:"degrees"})}(u,e,n,{method:o});r<a&&(a=r)}})),X(a,"degrees",s)}function ru(t,e){return t[0]*e[0]+t[1]*e[1]}var iu=Object.defineProperty,ou=Object.getOwnPropertySymbols,su=Object.prototype.hasOwnProperty,au=Object.prototype.propertyIsEnumerable,uu=function(t,e,n){return e in t?iu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},lu=function(t,e){for(var n in e||(e={}))su.call(e,n)&&uu(t,n,e[n]);if(ou){var r,i=a(ou(e));try{for(i.s();!(r=i.n()).done;){n=r.value;au.call(e,n)&&uu(t,n,e[n])}}catch(t){i.e(t)}finally{i.f()}}return t};function hu(t,e,n,r,i,o){return Math.sqrt((i-n)*(i-n)+(o-r)*(o-r))===Math.sqrt((t-n)*(t-n)+(e-r)*(e-r))+Math.sqrt((i-t)*(i-t)+(o-e)*(o-e))}function cu(t,e){var n=[];return dt(t,(function(t){var r=!1;if("Point"===t.geometry.type)mt(e,(function(e){jt(t,e)&&(r=!0)})),r&&n.push(t);else{if("MultiPoint"!==t.geometry.type)throw new Error("Input geometry must be a Point or MultiPoint");var i=[];mt(e,(function(e){ct(t,(function(t){jt(t,e)&&(r=!0,i.push(t))}))})),r&&n.push(O(i,t.properties))}})),C(n)}function fu(t,e,n){var r=e[0]-t[0],i=e[1]-t[1],o=n[0]-e[0];return function(t){return(t>0)-(t<0)||+t}(r*(n[1]-e[1])-o*i)}function gu(t,e){return e.geometry.coordinates[0].every((function(e){return jt(I(e),t)}))}var vu=function(){return s((function t(e){i(this,t),this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}),[{key:"removeInnerEdge",value:function(t){this.innerEdges=this.innerEdges.filter((function(e){return e.from.id!==t.from.id}))}},{key:"removeOuterEdge",value:function(t){this.outerEdges=this.outerEdges.filter((function(e){return e.to.id!==t.to.id}))}},{key:"addOuterEdge",value:function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1}},{key:"sortOuterEdges",value:function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort((function(e,n){var r=e.to,i=n.to;if(r.coordinates[0]-t.coordinates[0]>=0&&i.coordinates[0]-t.coordinates[0]<0)return 1;if(r.coordinates[0]-t.coordinates[0]<0&&i.coordinates[0]-t.coordinates[0]>=0)return-1;if(r.coordinates[0]-t.coordinates[0]==0&&i.coordinates[0]-t.coordinates[0]==0)return r.coordinates[1]-t.coordinates[1]>=0||i.coordinates[1]-t.coordinates[1]>=0?r.coordinates[1]-i.coordinates[1]:i.coordinates[1]-r.coordinates[1];var o=fu(t.coordinates,r.coordinates,i.coordinates);return o<0?1:o>0?-1:Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2)-(Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2))})),this.outerEdgesSorted=!0)}},{key:"getOuterEdges",value:function(){return this.sortOuterEdges(),this.outerEdges}},{key:"getOuterEdge",value:function(t){return this.sortOuterEdges(),this.outerEdges[t]}},{key:"addInnerEdge",value:function(t){this.innerEdges.push(t)}}],[{key:"buildId",value:function(t){return t.join(",")}}])}(),du=function(){function t(e,n){i(this,t),this.from=e,this.to=n,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return s(t,[{key:"getSymetric",value:function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric}},{key:"deleteEdge",value:function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)}},{key:"isEqual",value:function(t){return this.from.id===t.from.id&&this.to.id===t.to.id}},{key:"toString",value:function(){return"Edge { ".concat(this.from.id," -> ").concat(this.to.id," }")}},{key:"toLineString",value:function(){return L([this.from.coordinates,this.to.coordinates])}},{key:"compareTo",value:function(t){return fu(t.from.coordinates,t.to.coordinates,this.to.coordinates)}}])}(),pu=function(){return s((function t(){i(this,t),this.edges=[],this.polygon=void 0,this.envelope=void 0}),[{key:"push",value:function(t){this.edges.push(t),this.polygon=this.envelope=void 0}},{key:"get",value:function(t){return this.edges[t]}},{key:"length",get:function(){return this.edges.length}},{key:"forEach",value:function(t){this.edges.forEach(t)}},{key:"map",value:function(t){return this.edges.map(t)}},{key:"some",value:function(t){return this.edges.some(t)}},{key:"isValid",value:function(){return!0}},{key:"isHole",value:function(){var t=this,e=this.edges.reduce((function(e,n,r){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=r),e}),0),n=(0===e?this.length:e)-1,r=(e+1)%this.length,i=fu(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[r].from.coordinates);return 0===i?this.edges[n].from.coordinates[0]>this.edges[r].from.coordinates[0]:i>0}},{key:"toMultiPoint",value:function(){return O(this.edges.map((function(t){return t.from.coordinates})))}},{key:"toPolygon",value:function(){if(this.polygon)return this.polygon;var t=this.edges.map((function(t){return t.from.coordinates}));return t.push(this.edges[0].from.coordinates),this.polygon=S([t])}},{key:"getEnvelope",value:function(){return this.envelope?this.envelope:this.envelope=js(this.toPolygon())}},{key:"inside",value:function(t){return jt(t,this.toPolygon())}}],[{key:"findEdgeRingContaining",value:function(t,e){var n,r,i=t.getEnvelope();return e.forEach((function(e){var o,s,u,l,h,c,f=e.getEnvelope();if((r&&(n=r.getEnvelope()),s=i,u=(o=f).geometry.coordinates[0].map((function(t){return t[0]})),l=o.geometry.coordinates[0].map((function(t){return t[1]})),h=s.geometry.coordinates[0].map((function(t){return t[0]})),c=s.geometry.coordinates[0].map((function(t){return t[1]})),Math.max.apply(null,u)!==Math.max.apply(null,h)||Math.max.apply(null,l)!==Math.max.apply(null,c)||Math.min.apply(null,u)!==Math.min.apply(null,h)||Math.min.apply(null,l)!==Math.min.apply(null,c))&&gu(f,i)){var g,v,d=a(t.map((function(t){return t.from.coordinates})));try{var p=function(){var t=v.value;e.some((function(e){return n=t,r=e.from.coordinates,n[0]===r[0]&&n[1]===r[1];var n,r}))||(g=t)};for(d.s();!(v=d.n()).done;)p()}catch(t){d.e(t)}finally{d.f()}g&&e.inside(I(g))&&(r&&!gu(n,f)||(r=e))}})),r}}])}();var yu=function(){function t(){i(this,t),this.edges=[],this.nodes={}}return s(t,[{key:"getNode",value:function(t){var e=vu.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new vu(t)),n}},{key:"addEdge",value:function(t,e){var n=new du(t,e),r=n.getSymetric();this.edges.push(n),this.edges.push(r)}},{key:"deleteDangles",value:function(){var t=this;Object.keys(this.nodes).map((function(e){return t.nodes[e]})).forEach((function(e){return t._removeIfDangle(e)}))}},{key:"_removeIfDangle",value:function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map((function(t){return t.to}));this.removeNode(t),n.forEach((function(t){return e._removeIfDangle(t)}))}}},{key:"deleteCutEdges",value:function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach((function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))}))}},{key:"_computeNextCWEdges",value:function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach((function(t){return e._computeNextCWEdges(e.nodes[t])})):t.getOuterEdges().forEach((function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e}))}},{key:"_computeNextCCWEdges",value:function(t,e){for(var n,r,i=t.getOuterEdges(),o=i.length-1;o>=0;--o){var s=i[o],a=s.symetric,u=void 0,l=void 0;s.label===e&&(u=s),a.label===e&&(l=a),u&&l&&(l&&(r=l),u&&(r&&(r.next=u,r=void 0),n||(n=u)))}r&&(r.next=n)}},{key:"_findLabeledEdgeRings",value:function(){var t=[],e=0;return this.edges.forEach((function(n){if(!(n.label>=0)){t.push(n);var r=n;do{r.label=e,r=r.next}while(!n.isEqual(r));e++}})),t}},{key:"getEdgeRings",value:function(){var t=this;this._computeNextCWEdges(),this.edges.forEach((function(t){t.label=void 0})),this._findLabeledEdgeRings().forEach((function(e){t._findIntersectionNodes(e).forEach((function(n){t._computeNextCCWEdges(n,e.label)}))}));var e=[];return this.edges.forEach((function(n){n.ring||e.push(t._findEdgeRing(n))})),e}},{key:"_findIntersectionNodes",value:function(t){var e=[],n=t,r=function(){var r=0;n.from.getOuterEdges().forEach((function(e){e.label===t.label&&++r})),r>1&&e.push(n.from),n=n.next};do{r()}while(!t.isEqual(n));return e}},{key:"_findEdgeRing",value:function(t){var e=t,n=new pu;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n}},{key:"removeNode",value:function(t){var e=this;t.getOuterEdges().forEach((function(t){return e.removeEdge(t)})),t.innerEdges.forEach((function(t){return e.removeEdge(t)})),delete this.nodes[t.id]}},{key:"removeEdge",value:function(t){this.edges=this.edges.filter((function(e){return!e.isEqual(t)})),t.deleteEdge()}}],[{key:"fromGeoJson",value:function(e){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '".concat(t.type,"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature"))}(e);var n=new t;return xt(e,(function(t){et(t,"LineString","Graph::fromGeoJson"),ft(t,(function(t,e){if(t){var r=n.getNode(t),i=n.getNode(e);n.addEdge(r,i)}return e}))})),n}}])}();function mu(t,e){var n,r;ct(t,(function(t,i,o,s,a){if(r!==a)e.push([]);else{var u=n[0],l=n[1],h=t[0],c=t[1];e[a].push([.75*u+.25*h,.75*l+.25*c]),e[a].push([.25*u+.75*h,.25*l+.75*c])}n=t,r=a}),!1),e.forEach((function(t){t.push(t[0])}))}function _u(t,e){var n,r,i;ct(t,(function(t,o,s,a,u){if(r!==a)e.push([[]]);else if(i!==u)e[a].push([]);else{var l=n[0],h=n[1],c=t[0],f=t[1];e[a][u].push([.75*l+.25*c,.75*h+.25*f]),e[a][u].push([.25*l+.75*c,.25*h+.75*f])}n=t,r=a,i=u}),!1),e.forEach((function(t){t.forEach((function(t){t.push(t[0])}))}))}function xu(t,e,n,r,i){for(var o=0;o<t.length;o++){var s=t[o],a=t[o+1];o===t.length-1&&(a=t[0]);var u=ku(s,a,e);n<=0&&u>0?ku(e,s,r)<0||(r=s):n>0&&u<=0&&(Eu(e,s,i)||(i=s)),n=u}return[r,i]}function Eu(t,e,n){return ku(t,e,n)>0}function ku(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function wu(t){return Iu(t,"mercator",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}function bu(t){return Iu(t,"wgs84",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}function Iu(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(n=n||{}).mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&V(t[0])?t="mercator"===e?Nu(t):Su(t):(!0!==r&&(t=Ai(t)),ct(t,(function(t){var n="mercator"===e?Nu(t):Su(t);t[0]=n[0],t[1]=n[1]}))),t}function Nu(t){var e=Math.PI/180,n=6378137,r=20037508.342789244,i=Math.abs(t[0])<=180?t[0]:t[0]-360*function(t){return t<0?-1:t>0?1:0}(t[0]),o=[n*i*e,n*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return o[0]>r&&(o[0]=r),o[0]<-20037508.342789244&&(o[0]=-20037508.342789244),o[1]>r&&(o[1]=r),o[1]<-20037508.342789244&&(o[1]=-20037508.342789244),o}function Su(t){var e=180/Math.PI,n=6378137;return[t[0]*e/n,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/n)))*e]}var Mu=Object.freeze({__proto__:null,toMercator:wu,toWgs84:bu});var Lu={20:1.07275,15:1.13795,10:1.22385,5:1.3581,2:1.51743,1:1.62762};function Pu(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}function Cu(t){var e=[];return function t(n){return 0===n||1===n?1:e[n]>0?e[n]:e[n]=t(n-1)*n}(t)}function Tu(t){return Ru(t),Ou(t)}function Ou(t){return Array.isArray(t)?Gu(t):t&&t.bbox?Gu(t.bbox):[360*qu(),180*qu()]}function Ru(t){null!=t&&(Array.isArray(t)?H(t):null!=t.bbox&&H(t.bbox))}function Au(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ru(e.bbox),null==t&&(t=1);for(var n=[],r=0;r<t;r++)n.push(I(Ou(e.bbox)));return C(n)}function Du(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ru(e.bbox),null==t&&(t=1),void 0!==e.bbox&&null!==e.bbox||(e.bbox=[-180,-90,180,90]),V(e.num_vertices)&&void 0!==e.num_vertices||(e.num_vertices=10),V(e.max_radial_length)&&void 0!==e.max_radial_length||(e.max_radial_length=10);var n=Math.abs(e.bbox[0]-e.bbox[2]),r=Math.abs(e.bbox[1]-e.bbox[3]),i=Math.min(n/2,r/2);if(e.max_radial_length>i)throw new Error("max_radial_length is greater than the radius of the bbox");for(var o=[e.bbox[0]+e.max_radial_length,e.bbox[1]+e.max_radial_length,e.bbox[2]-e.max_radial_length,e.bbox[3]-e.max_radial_length],s=[],a=function(){var t,n=[],r=p(Array(e.num_vertices+1)).map(Math.random);r.forEach((function(t,e,n){n[e]=e>0?t+n[e-1]:t})),r.forEach((function(t){t=2*t*Math.PI/r[r.length-1];var i=Math.random();n.push([i*(e.max_radial_length||10)*Math.sin(t),i*(e.max_radial_length||10)*Math.cos(t)])})),n[n.length-1]=n[0],n=n.reverse().map((t=Ou(o),function(e){return[e[0]+t[0],e[1]+t[1]]})),s.push(S([n]))},u=0;u<t;u++)a();return C(s)}function Fu(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Z(e=e||{}))throw new Error("options is invalid");var n=e.bbox;Ru(n);var r=e.num_vertices,i=e.max_length,o=e.max_rotation;null==t&&(t=1),(!V(r)||void 0===r||r<2)&&(r=10),V(i)&&void 0!==i||(i=1e-4),V(o)&&void 0!==o||(o=Math.PI/8);for(var s=[],a=0;a<t;a++){for(var u=[Ou(n)],l=0;l<r-1;l++){var h=(0===l?2*Math.random()*Math.PI:Math.tan((u[l][1]-u[l-1][1])/(u[l][0]-u[l-1][0])))+(Math.random()-.5)*o*2,c=Math.random()*i;u.push([u[l][0]+c*Math.cos(h),u[l][1]+c*Math.sin(h)])}s.push(L(u))}return C(s)}function qu(){return Math.random()-.5}function Gu(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}var Bu=Object.freeze({__proto__:null,randomLineString:Fu,randomPoint:Au,randomPolygon:Du,randomPosition:Tu});function Yu(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return mt(t,(function(t){Yu(t,e)})),t;case"LineString":return zu(Q(t),e),t;case"Polygon":return ju(Q(t),e),t;case"MultiLineString":return Q(t).forEach((function(t){zu(t,e)})),t;case"MultiPolygon":return Q(t).forEach((function(t){ju(t,e)})),t;case"Point":case"MultiPoint":return t}}function zu(t,e){Yt(t)===e&&t.reverse()}function ju(t,e){Yt(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)Yt(t[n])===e&&t[n].reverse()}function Xu(t){var e=t%360;return e<0&&(e+=360),e}function Uu(t,e,n){if(!Z(n=n||{}))throw new Error("options is invalid");var r=n.origin||"centroid",i=n.mutate||!1;if(!t)throw new Error("geojson required");if("number"!=typeof e||e<=0)throw new Error("invalid factor");var o=Array.isArray(r)||"object"===m(r);return!0!==i&&(t=Ai(t)),"FeatureCollection"!==t.type||o?Vu(t,e,r):(dt(t,(function(n,i){t.features[i]=Vu(n,e,r)})),t)}function Vu(t,e,n){var r="Point"===it(t),i=function(t,e){null==e&&(e="centroid");if(Array.isArray(e)||"object"===m(e))return K(e);var n=t.bbox?t.bbox:Rt(t,{recompute:!0}),r=n[0],i=n[1],o=n[2],s=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return I([r,i]);case"se":case"southeast":case"eastsouth":case"bottomright":return I([o,i]);case"nw":case"northwest":case"westnorth":case"topleft":return I([r,s]);case"ne":case"northeast":case"eastnorth":case"topright":return I([o,s]);case"center":return An(t);case void 0:case null:case"centroid":return gi(t);default:throw new Error("invalid origin")}}(t,n);return 1===e||r||(ct(t,(function(t){var n=Gs(i,t),r=lt(i,t),o=Q(Bs(i,n*e,r));t[0]=o[0],t[1]=o[1],3===t.length&&(t[2]*=e)})),delete t.bbox),t}function Zu(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}var Hu={search:function(t,e,n,r){var i;t.cleanDirty();var o=(r=r||{}).heuristic||Hu.heuristics.manhattan,s=null!=(i=r.closest)&&i,a=new Ku((function(t){return t.f})),u=e;for(e.h=o(e,n),a.push(e);a.size()>0;){var l=a.pop();if(l===n)return Zu(l);l.closed=!0;for(var h=t.neighbors(l),c=0,f=h.length;c<f;++c){var g=h[c];if(!g.closed&&!g.isWall()){var v=l.g+g.getCost(l),d=g.visited;(!d||v<g.g)&&(g.visited=!0,g.parent=l,g.h=g.h||o(g,n),g.g=v,g.f=g.g+g.h,t.markDirty(g),s&&(g.h<u.h||g.h===u.h&&g.g<u.g)&&(u=g),d?a.rescoreElement(g):a.push(g))}}}return s?Zu(u):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),r=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return 1*(r+i)+(n-2)*Math.min(r,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function Wu(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var r=0,i=t[n];r<i.length;r++){var o=new Ju(n,r,i[r]);this.grid[n][r]=o,this.nodes.push(o)}}this.init()}function Ju(t,e,n){this.x=t,this.y=e,this.weight=n}function Ku(t){this.content=[],this.scoreFunction=t}function Qu(t,e){for(var n=0;n<e.features.length;n++)if(jt(t,e.features[n]))return!0;return!1}function $u(t,e,n){var r=e[0],i=e[1],o=n[0]-r,s=n[1]-i;if(0!==o||0!==s){var a=((t[0]-r)*o+(t[1]-i)*s)/(o*o+s*s);a>1?(r=n[0],i=n[1]):a>0&&(r+=o*a,i+=s*a)}return(o=t[0]-r)*o+(s=t[1]-i)*s}function tl(t,e,n,r,i){for(var o,s=r,a=e+1;a<n;a++){var u=$u(t[a],t[e],t[n]);u>s&&(o=a,s=u)}s>r&&(o-e>1&&tl(t,e,o,r,i),i.push(t[o]),n-o>1&&tl(t,o,n,r,i))}function el(t,e){var n=t.length-1,r=[t[0]];return tl(t,0,n,e,r),r.push(t[n]),r}function nl(t,e,n){if(t.length<=2)return t;var r=void 0!==e?e*e:1;return t=n?t:function(t,e){for(var n,r,i,o,s,a=t[0],u=[a],l=1,h=t.length;l<h;l++)n=t[l],i=a,o=void 0,s=void 0,o=(r=n)[0]-i[0],s=r[1]-i[1],o*o+s*s>e&&(u.push(n),a=n);return a!==n&&u.push(n),u}(t,r),t=el(t,r)}function rl(t,e,n){return t.map((function(t){if(t.length<4)throw new Error("invalid polygon");for(var r=e,i=nl(t,r,n);!il(i)&&r>=Number.EPSILON;)i=nl(t,r-=.01*r,n);return il(i)?(i[i.length-1][0]===i[0][0]&&i[i.length-1][1]===i[0][1]||i.push(i[0]),i):t}))}function il(t){return!(t.length<3)&&!(3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}function ol(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}Wu.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)Hu.cleanNode(this.nodes[t])},Wu.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)Hu.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},Wu.prototype.markDirty=function(t){this.dirtyNodes.push(t)},Wu.prototype.neighbors=function(t){var e=[],n=t.x,r=t.y,i=this.grid;return i[n-1]&&i[n-1][r]&&e.push(i[n-1][r]),i[n+1]&&i[n+1][r]&&e.push(i[n+1][r]),i[n]&&i[n][r-1]&&e.push(i[n][r-1]),i[n]&&i[n][r+1]&&e.push(i[n][r+1]),this.diagonal&&(i[n-1]&&i[n-1][r-1]&&e.push(i[n-1][r-1]),i[n+1]&&i[n+1][r-1]&&e.push(i[n+1][r-1]),i[n-1]&&i[n-1][r+1]&&e.push(i[n-1][r+1]),i[n+1]&&i[n+1][r+1]&&e.push(i[n+1][r+1])),e},Wu.prototype.toString=function(){for(var t,e,n,r,i=[],o=this.grid,s=0,a=o.length;s<a;s++){for(t=[],n=0,r=(e=o[s]).length;n<r;n++)t.push(e[n].weight);i.push(t.join(" "))}return i.join("\n")},Ju.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Ju.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},Ju.prototype.isWall=function(){return 0===this.weight},Ku.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var i,o=t+1<<1,s=o-1,a=null;if(s<e){var u=this.content[s];(i=this.scoreFunction(u))<r&&(a=s)}if(o<e){var l=this.content[o];this.scoreFunction(l)<(null===a?r:i)&&(a=o)}if(null===a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}}};var sl,al={exports:{}};var ul=function(){if(sl)return al.exports;function t(t,n,i){i=i||2;var o,s,a,h,c,g,v,d=n&&n.length,p=d?n[0]*i:t.length,y=e(t,0,p,i,!0),m=[];if(!y||y.next===y.prev)return m;if(d&&(y=function(t,n,r,i){var o,s,a,h=[];for(o=0,s=n.length;o<s;o++)(a=e(t,n[o]*i,o<s-1?n[o+1]*i:t.length,i,!1))===a.next&&(a.steiner=!0),h.push(f(a));for(h.sort(u),o=0;o<h.length;o++)r=l(h[o],r);return r}(t,n,y,i)),t.length>80*i){o=a=t[0],s=h=t[1];for(var _=i;_<p;_+=i)(c=t[_])<o&&(o=c),(g=t[_+1])<s&&(s=g),c>a&&(a=c),g>h&&(h=g);v=0!==(v=Math.max(a-o,h-s))?32767/v:0}return r(y,m,i,o,s,v,0),m}function e(t,e,n,r,i){var o,s;if(i===I(t,e,n,r)>0)for(o=e;o<n;o+=r)s=k(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=k(o,t[o],t[o+1],s);return s&&p(s,s.next)&&(w(s),s=s.next),s}function n(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!p(r,r.next)&&0!==d(r.prev,r,r.next))r=r.next;else{if(w(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function r(t,e,u,l,h,f,g){if(t){!g&&f&&function(t,e,n,r){var i=t;do{0===i.z&&(i.z=c(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,s,a,u,l=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,r=n,a=0,e=0;e<l&&(a++,r=r.nextZ);e++);for(u=l;a>0||u>0&&r;)0!==a&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(s>1)}(i)}(t,l,h,f);for(var v,d,p=t;t.prev!==t.next;)if(v=t.prev,d=t.next,f?o(t,l,h,f):i(t))e.push(v.i/u|0),e.push(t.i/u|0),e.push(d.i/u|0),w(t),t=d.next,p=d.next;else if((t=d)===p){g?1===g?r(t=s(n(t),e,u),e,u,l,h,f,2):2===g&&a(t,e,u,l,h,f):r(n(t),e,u,l,h,f,1);break}}}function i(t){var e=t.prev,n=t,r=t.next;if(d(e,n,r)>=0)return!1;for(var i=e.x,o=n.x,s=r.x,a=e.y,u=n.y,l=r.y,h=i<o?i<s?i:s:o<s?o:s,c=a<u?a<l?a:l:u<l?u:l,f=i>o?i>s?i:s:o>s?o:s,v=a>u?a>l?a:l:u>l?u:l,p=r.next;p!==e;){if(p.x>=h&&p.x<=f&&p.y>=c&&p.y<=v&&g(i,a,o,u,s,l,p.x,p.y)&&d(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function o(t,e,n,r){var i=t.prev,o=t,s=t.next;if(d(i,o,s)>=0)return!1;for(var a=i.x,u=o.x,l=s.x,h=i.y,f=o.y,v=s.y,p=a<u?a<l?a:l:u<l?u:l,y=h<f?h<v?h:v:f<v?f:v,m=a>u?a>l?a:l:u>l?u:l,_=h>f?h>v?h:v:f>v?f:v,x=c(p,y,e,n,r),E=c(m,_,e,n,r),k=t.prevZ,w=t.nextZ;k&&k.z>=x&&w&&w.z<=E;){if(k.x>=p&&k.x<=m&&k.y>=y&&k.y<=_&&k!==i&&k!==s&&g(a,h,u,f,l,v,k.x,k.y)&&d(k.prev,k,k.next)>=0)return!1;if(k=k.prevZ,w.x>=p&&w.x<=m&&w.y>=y&&w.y<=_&&w!==i&&w!==s&&g(a,h,u,f,l,v,w.x,w.y)&&d(w.prev,w,w.next)>=0)return!1;w=w.nextZ}for(;k&&k.z>=x;){if(k.x>=p&&k.x<=m&&k.y>=y&&k.y<=_&&k!==i&&k!==s&&g(a,h,u,f,l,v,k.x,k.y)&&d(k.prev,k,k.next)>=0)return!1;k=k.prevZ}for(;w&&w.z<=E;){if(w.x>=p&&w.x<=m&&w.y>=y&&w.y<=_&&w!==i&&w!==s&&g(a,h,u,f,l,v,w.x,w.y)&&d(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function s(t,e,r){var i=t;do{var o=i.prev,s=i.next.next;!p(o,s)&&y(o,i,i.next,s)&&x(o,s)&&x(s,o)&&(e.push(o.i/r|0),e.push(i.i/r|0),e.push(s.i/r|0),w(i),w(i.next),i=t=s),i=i.next}while(i!==t);return n(i)}function a(t,e,i,o,s,a){var u=t;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&v(u,l)){var h=E(u,l);return u=n(u,u.next),h=n(h,h.next),r(u,e,i,o,s,a,0),void r(h,e,i,o,s,a,0)}l=l.next}u=u.next}while(u!==t)}function u(t,e){return t.x-e.x}function l(t,e){var r=function(t,e){var n,r=e,i=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>s&&(s=a,n=r.x<r.next.x?r:r.next,a===i))return n}r=r.next}while(r!==e);if(!n)return null;var u,l=n,c=n.x,f=n.y,v=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&g(o<f?i:s,o,c,f,o<f?s:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),x(r,t)&&(u<v||u===v&&(r.x>n.x||r.x===n.x&&h(n,r)))&&(n=r,v=u)),r=r.next}while(r!==l);return n}(t,e);if(!r)return e;var i=E(r,t);return n(i,i.next),n(r,r.next)}function h(t,e){return d(t.prev,t,e.prev)<0&&d(e.next,t,t.next)<0}function c(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function f(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function g(t,e,n,r,i,o,s,a){return(i-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(r-a)>=(n-s)*(e-a)&&(n-s)*(o-a)>=(i-s)*(r-a)}function v(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&y(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(x(t,e)&&x(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(d(t.prev,t,e.prev)||d(t,e.prev,e))||p(t,e)&&d(t.prev,t,t.next)>0&&d(e.prev,e,e.next)>0)}function d(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function p(t,e){return t.x===e.x&&t.y===e.y}function y(t,e,n,r){var i=_(d(t,e,n)),o=_(d(t,e,r)),s=_(d(n,r,t)),a=_(d(n,r,e));return i!==o&&s!==a||(!(0!==i||!m(t,n,e))||(!(0!==o||!m(t,r,e))||(!(0!==s||!m(n,t,r))||!(0!==a||!m(n,e,r)))))}function m(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function _(t){return t>0?1:t<0?-1:0}function x(t,e){return d(t.prev,t,t.next)<0?d(t,e,t.next)>=0&&d(t,t.prev,e)>=0:d(t,e,t.prev)<0||d(t,t.next,e)<0}function E(t,e){var n=new b(t.i,t.x,t.y),r=new b(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function k(t,e,n,r){var i=new b(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function w(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function b(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function I(t,e,n,r){for(var i=0,o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}return sl=1,al.exports=t,al.exports.default=t,t.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,s=Math.abs(I(t,0,o,n));if(i)for(var a=0,u=e.length;a<u;a++){var l=e[a]*n,h=a<u-1?e[a+1]*n:t.length;s-=Math.abs(I(t,l,h,n))}var c=0;for(a=0;a<r.length;a+=3){var f=r[a]*n,g=r[a+1]*n,v=r[a+2]*n;c+=Math.abs((t[f]-t[v])*(t[g+1]-t[f+1])-(t[f]-t[g])*(t[v+1]-t[f+1]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},t.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n},al.exports}(),ll=mn(ul);function hl(t){var e=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}(t),n=ll(e.vertices,e.holes,2),r=[],i=[];n.forEach((function(t,r){var o=n[r];i.push([e.vertices[2*o],e.vertices[2*o+1]])}));for(var o=0;o<i.length;o+=3){var s=i.slice(o,o+3);s.push(i[o]),r.push(S([s]))}return r}function cl(t,e,n){if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===n&&(n=1);var r=t.geometry.coordinates,i=[],o={};if(n){for(var s=[],a=0;a<r.length;a++)for(var u=0;u<r[a].length-1;u++)s.push(d(a,u));var l=new Fe;l.load(s)}for(var h=0;h<r.length;h++)for(var c=0;c<r[h].length-1;c++){if(n)l.search(d(h,c)).forEach((function(t){var e=t.ring,n=t.edge;v(h,c,e,n)}));else for(var f=0;f<r.length;f++)for(var g=0;g<r[f].length-1;g++)v(h,c,f,g)}return e||(i={type:"Feature",geometry:{type:"MultiPoint",coordinates:i}}),i;function v(t,n,s,a){var u,l,h=r[t][n],c=r[t][n+1],f=r[s][a],g=r[s][a+1],v=function(t,e,n,r){if(fl(t,n)||fl(t,r)||fl(e,n)||fl(r,n))return null;var i=t[0],o=t[1],s=e[0],a=e[1],u=n[0],l=n[1],h=r[0],c=r[1],f=(i-s)*(l-c)-(o-a)*(u-h);if(0===f)return null;var g=((i*a-o*s)*(u-h)-(i-s)*(u*c-l*h))/f,v=((i*a-o*s)*(l-c)-(o-a)*(u*c-l*h))/f;return[g,v]}(h,c,f,g);if(null!==v&&(u=c[0]!==h[0]?(v[0]-h[0])/(c[0]-h[0]):(v[1]-h[1])/(c[1]-h[1]),l=g[0]!==f[0]?(v[0]-f[0])/(g[0]-f[0]):(v[1]-f[1])/(g[1]-f[1]),!(u>=1||u<=0||l>=1||l<=0))){var d=v,p=!o[d];p&&(o[d]=!0),e?i.push(e(v,t,n,h,c,u,s,a,f,g,l,p)):i.push(v)}}function d(t,e){var n,i,o,s,a=r[t][e],u=r[t][e+1];return a[0]<u[0]?(n=a[0],i=u[0]):(n=u[0],i=a[0]),a[1]<u[1]?(o=a[1],s=u[1]):(o=u[1],s=a[1]),{minX:n,minY:o,maxX:i,maxY:s,ring:t,edge:e}}}function fl(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!fl(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}function gl(t){if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var e=t.geometry.coordinates.length,n=[],r=0;r<e;r++){var i=t.geometry.coordinates[r];ml(i[0],i[i.length-1])||i.push(i[0]);for(var o=0;o<i.length-1;o++)n.push(i[o])}if(!function(t){for(var e={},n=1,r=0,i=t.length;r<i;++r){if(Object.prototype.hasOwnProperty.call(e,t[r])){n=0;break}e[t[r]]=1}return n}(n))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var s=n.length,a=cl(t,(function(t,e,n,r,i,o,s,a,u,l,h,c){return[t,e,n,r,i,o,s,a,u,l,h,c]})),u=a.length;if(0==u){var l=[];for(r=0;r<e;r++)l.push(S([t.geometry.coordinates[r]],{parent:-1,winding:yl(t.geometry.coordinates[r])}));var h=C(l);return q(),G(),h}var c=[],f=[];for(r=0;r<e;r++){c.push([]);for(o=0;o<t.geometry.coordinates[r].length-1;o++)c[r].push([new vl(t.geometry.coordinates[r][_l(o+1,t.geometry.coordinates[r].length-1)],1,[r,o],[r,_l(o+1,t.geometry.coordinates[r].length-1)],void 0)]),f.push(new dl(t.geometry.coordinates[r][o],[r,_l(o-1,t.geometry.coordinates[r].length-1)],[r,o],void 0,void 0,!1,!0))}for(r=0;r<u;r++)c[a[r][1]][a[r][2]].push(new vl(a[r][0],a[r][5],[a[r][1],a[r][2]],[a[r][6],a[r][7]],void 0)),a[r][11]&&f.push(new dl(a[r][0],[a[r][1],a[r][2]],[a[r][6],a[r][7]],void 0,void 0,!0,!0));var g=f.length;for(r=0;r<c.length;r++)for(o=0;o<c[r].length;o++)c[r][o].sort((function(t,e){return t.param<e.param?-1:1}));var v=[];for(r=0;r<g;r++)v.push({minX:f[r].coord[0],minY:f[r].coord[1],maxX:f[r].coord[0],maxY:f[r].coord[1],index:r});var d=new Fe;d.load(v);for(r=0;r<c.length;r++)for(o=0;o<c[r].length;o++)for(var p=0;p<c[r][o].length;p++){m=p==c[r][o].length-1?c[r][_l(o+1,t.geometry.coordinates[r].length-1)][0].coord:c[r][o][p+1].coord;var y=d.search({minX:m[0],minY:m[1],maxX:m[0],maxY:m[1]})[0];c[r][o][p].nxtIsectAlongEdgeIn=y.index}for(r=0;r<c.length;r++)for(o=0;o<c[r].length;o++)for(p=0;p<c[r][o].length;p++){var m=c[r][o][p].coord,_=(y=d.search({minX:m[0],minY:m[1],maxX:m[0],maxY:m[1]})[0]).index;_<s?f[_].nxtIsectAlongRingAndEdge2=c[r][o][p].nxtIsectAlongEdgeIn:ml(f[_].ringAndEdge1,c[r][o][p].ringAndEdgeIn)?f[_].nxtIsectAlongRingAndEdge1=c[r][o][p].nxtIsectAlongEdgeIn:f[_].nxtIsectAlongRingAndEdge2=c[r][o][p].nxtIsectAlongEdgeIn}var x=[];for(r=0,o=0;o<e;o++){var E=r;for(p=0;p<t.geometry.coordinates[o].length-1;p++)f[r].coord[0]<f[E].coord[0]&&(E=r),r++;var k=f[E].nxtIsectAlongRingAndEdge2;for(p=0;p<f.length;p++)if(f[p].nxtIsectAlongRingAndEdge1==E||f[p].nxtIsectAlongRingAndEdge2==E){var w=p;break}var b=pl([f[w].coord,f[E].coord,f[k].coord],!0)?1:-1;x.push({isect:E,parent:-1,winding:b})}x.sort((function(t,e){return f[t.isect].coord>f[e.isect].coord?-1:1}));for(l=[];x.length>0;){var I=x.pop(),N=I.isect,M=I.parent,L=I.winding,P=l.length,T=[f[N].coord],O=N;if(f[N].ringAndEdge1Walkable)var R=f[N].ringAndEdge1,A=f[N].nxtIsectAlongRingAndEdge1;else R=f[N].ringAndEdge2,A=f[N].nxtIsectAlongRingAndEdge2;for(;!ml(f[N].coord,f[A].coord);){T.push(f[A].coord);var D=void 0;for(r=0;r<x.length;r++)if(x[r].isect==A){D=r;break}if(null!=D&&x.splice(D,1),ml(R,f[A].ringAndEdge1)){if(R=f[A].ringAndEdge2,f[A].ringAndEdge2Walkable=!1,f[A].ringAndEdge1Walkable){var F={isect:A};pl([f[O].coord,f[A].coord,f[f[A].nxtIsectAlongRingAndEdge2].coord],1==L)?(F.parent=M,F.winding=-L):(F.parent=P,F.winding=L),x.push(F)}O=A,A=f[A].nxtIsectAlongRingAndEdge2}else{if(R=f[A].ringAndEdge1,f[A].ringAndEdge1Walkable=!1,f[A].ringAndEdge2Walkable){F={isect:A};pl([f[O].coord,f[A].coord,f[f[A].nxtIsectAlongRingAndEdge1].coord],1==L)?(F.parent=M,F.winding=-L):(F.parent=P,F.winding=L),x.push(F)}O=A,A=f[A].nxtIsectAlongRingAndEdge1}}T.push(f[A].coord),l.push(S([T],{index:P,parent:M,winding:L,netWinding:void 0}))}h=C(l);function q(){for(var t=[],e=0;e<h.features.length;e++)-1==h.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var n=-1,r=0;r<h.features.length;r++)t[e]!=r&&jt(h.features[t[e]].geometry.coordinates[0][0],h.features[r],{ignoreBoundary:!0})&&Lt(h.features[r])<Infinity&&(n=r);h.features[t[e]].properties.parent=n}}function G(){for(var t=0;t<h.features.length;t++)if(-1==h.features[t].properties.parent){var e=h.features[t].properties.winding;h.features[t].properties.netWinding=e,B(t,e)}}function B(t,e){for(var n=0;n<h.features.length;n++)if(h.features[n].properties.parent==t){var r=e+h.features[n].properties.winding;h.features[n].properties.netWinding=r,B(n,r)}}return q(),G(),h}var vl=function(t,e,n,r,i){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=r,this.nxtIsectAlongEdgeIn=i},dl=function(t,e,n,r,i,o,s){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=r,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=s};function pl(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function yl(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n);if(pl([t[_l(e-1,t.length-1)],t[e],t[_l(e+1,t.length-1)]],!0))var r=1;else r=-1;return r}function ml(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!ml(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}function _l(t,e){return(t%e+e)%e}function xl(t){return function(){return t}}function El(t){return t[0]}function kl(t){return t[1]}function wl(){this._=null}function bl(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Il(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Nl(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Sl(t){for(;t.L;)t=t.L;return t}function Ml(t,e,n,r){var i=[null,null],o=Ql.push(i)-1;return i.left=t,i.right=e,n&&Pl(i,t,e,n),r&&Pl(i,e,t,r),Jl[t.index].halfedges.push(o),Jl[e.index].halfedges.push(o),i}function Ll(t,e,n){var r=[e,n];return r.left=t,r}function Pl(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function Cl(t,e,n,r,i){var o,s=t[0],a=t[1],u=s[0],l=s[1],h=0,c=1,f=a[0]-u,g=a[1]-l;if(o=e-u,f||!(o>0)){if(o/=f,f<0){if(o<h)return;o<c&&(c=o)}else if(f>0){if(o>c)return;o>h&&(h=o)}if(o=r-u,f||!(o<0)){if(o/=f,f<0){if(o>c)return;o>h&&(h=o)}else if(f>0){if(o<h)return;o<c&&(c=o)}if(o=n-l,g||!(o>0)){if(o/=g,g<0){if(o<h)return;o<c&&(c=o)}else if(g>0){if(o>c)return;o>h&&(h=o)}if(o=i-l,g||!(o<0)){if(o/=g,g<0){if(o>c)return;o>h&&(h=o)}else if(g>0){if(o<h)return;o<c&&(c=o)}return!(h>0||c<1)||(h>0&&(t[0]=[u+h*f,l+h*g]),c<1&&(t[1]=[u+c*f,l+c*g]),!0)}}}}}function Tl(t,e,n,r,i){var o=t[1];if(o)return!0;var s,a,u=t[0],l=t.left,h=t.right,c=l[0],f=l[1],g=h[0],v=h[1],d=(c+g)/2,p=(f+v)/2;if(v===f){if(d<e||d>=r)return;if(c>g){if(u){if(u[1]>=i)return}else u=[d,n];o=[d,i]}else{if(u){if(u[1]<n)return}else u=[d,i];o=[d,n]}}else if(a=p-(s=(c-g)/(v-f))*d,s<-1||s>1)if(c>g){if(u){if(u[1]>=i)return}else u=[(n-a)/s,n];o=[(i-a)/s,i]}else{if(u){if(u[1]<n)return}else u=[(i-a)/s,i];o=[(n-a)/s,n]}else if(f<v){if(u){if(u[0]>=r)return}else u=[e,s*e+a];o=[r,s*r+a]}else{if(u){if(u[0]<e)return}else u=[r,s*r+a];o=[e,s*e+a]}return t[0]=u,t[1]=o,!0}function Ol(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function Rl(t,e){return e[+(e.left!==t.site)]}function Al(t,e){return e[+(e.left===t.site)]}wl.prototype={constructor:wl,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Sl(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Il(this,n),n=(t=n).U),n.C=!1,r.C=!0,Nl(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Nl(this,n),n=(t=n).U),n.C=!1,r.C=!0,Il(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,s=t.R;if(n=o?s?Sl(s):o:s,i?i.L===t?i.L=n:i.R=n:this._=n,o&&s?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==s?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=s,s.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,Il(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Nl(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Il(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Nl(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Il(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Nl(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var Dl,Fl=[];function ql(){bl(this),this.x=this.y=this.arc=this.site=this.cy=null}function Gl(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var s=i[0],a=i[1],u=r[0]-s,l=r[1]-a,h=o[0]-s,c=o[1]-a,f=2*(u*c-l*h);if(!(f>=-1e-12)){var g=u*u+l*l,v=h*h+c*c,d=(c*g-l*v)/f,p=(u*v-h*g)/f,y=Fl.pop()||new ql;y.arc=t,y.site=i,y.x=d+s,y.y=(y.cy=p+a)+Math.sqrt(d*d+p*p),t.circle=y;for(var m=null,_=Kl._;_;)if(y.y<_.y||y.y===_.y&&y.x<=_.x){if(!_.L){m=_.P;break}_=_.L}else{if(!_.R){m=_;break}_=_.R}Kl.insert(m,y),m||(Dl=y)}}}}function Bl(t){var e=t.circle;e&&(e.P||(Dl=e.N),Kl.remove(e),Fl.push(e),bl(e),t.circle=null)}var Yl=[];function zl(){bl(this),this.edge=this.site=this.circle=null}function jl(t){var e=Yl.pop()||new zl;return e.site=t,e}function Xl(t){Bl(t),Wl.remove(t),Yl.push(t),bl(t)}function Ul(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,s=t.N,a=[t];Xl(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<$l&&Math.abs(r-u.circle.cy)<$l;)o=u.P,a.unshift(u),Xl(u),u=o;a.unshift(u),Bl(u);for(var l=s;l.circle&&Math.abs(n-l.circle.x)<$l&&Math.abs(r-l.circle.cy)<$l;)s=l.N,a.push(l),Xl(l),l=s;a.push(l),Bl(l);var h,c=a.length;for(h=1;h<c;++h)l=a[h],u=a[h-1],Pl(l.edge,u.site,l.site,i);u=a[0],(l=a[c-1]).edge=Ml(u.site,l.site,null,i),Gl(u),Gl(l)}function Vl(t){for(var e,n,r,i,o=t[0],s=t[1],a=Wl._;a;)if((r=Zl(a,s)-o)>$l)a=a.L;else{if(!((i=o-Hl(a,s))>$l)){r>-1e-6?(e=a.P,n=a):i>-1e-6?(e=a,n=a.N):e=n=a;break}if(!a.R){e=a;break}a=a.R}!function(t){Jl[t.index]={site:t,halfedges:[]}}(t);var u=jl(t);if(Wl.insert(e,u),e||n){if(e===n)return Bl(e),n=jl(e.site),Wl.insert(u,n),u.edge=n.edge=Ml(e.site,u.site),Gl(e),void Gl(n);if(n){Bl(e),Bl(n);var l=e.site,h=l[0],c=l[1],f=t[0]-h,g=t[1]-c,v=n.site,d=v[0]-h,p=v[1]-c,y=2*(f*p-g*d),m=f*f+g*g,_=d*d+p*p,x=[(p*m-g*_)/y+h,(f*_-d*m)/y+c];Pl(n.edge,l,v,x),u.edge=Ml(l,t,null,x),n.edge=Ml(t,v,null,x),Gl(e),Gl(n)}else u.edge=Ml(e.site,u.site)}}function Zl(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var s=t.P;if(!s)return-1/0;var a=(n=s.site)[0],u=n[1],l=u-e;if(!l)return a;var h=a-r,c=1/o-1/l,f=h/l;return c?(-f+Math.sqrt(f*f-2*c*(h*h/(-2*l)-u+l/2+i-o/2)))/c+r:(r+a)/2}function Hl(t,e){var n=t.N;if(n)return Zl(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var Wl,Jl,Kl,Ql,$l=1e-6;function th(t,e){return e[1]-t[1]||e[0]-t[0]}function eh(t,e){var n,r,i,o=t.sort(th).pop();for(Ql=[],Jl=new Array(t.length),Wl=new wl,Kl=new wl;;)if(i=Dl,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(Vl(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;Ul(i.arc)}if(function(){for(var t,e,n,r,i=0,o=Jl.length;i<o;++i)if((t=Jl[i])&&(r=(e=t.halfedges).length)){var s=new Array(r),a=new Array(r);for(n=0;n<r;++n)s[n]=n,a[n]=Ol(t,Ql[e[n]]);for(s.sort((function(t,e){return a[e]-a[t]})),n=0;n<r;++n)a[n]=e[s[n]];for(n=0;n<r;++n)e[n]=a[n]}}(),e){var s=+e[0][0],a=+e[0][1],u=+e[1][0],l=+e[1][1];!function(t,e,n,r){for(var i,o=Ql.length;o--;)Tl(i=Ql[o],t,e,n,r)&&Cl(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>$l||Math.abs(i[0][1]-i[1][1])>$l)||delete Ql[o]}(s,a,u,l),function(t,e,n,r){var i,o,s,a,u,l,h,c,f,g,v,d,p=Jl.length,y=!0;for(i=0;i<p;++i)if(o=Jl[i]){for(s=o.site,a=(u=o.halfedges).length;a--;)Ql[u[a]]||u.splice(a,1);for(a=0,l=u.length;a<l;)v=(g=Al(o,Ql[u[a]]))[0],d=g[1],c=(h=Rl(o,Ql[u[++a%l]]))[0],f=h[1],(Math.abs(v-c)>$l||Math.abs(d-f)>$l)&&(u.splice(a,0,Ql.push(Ll(s,g,Math.abs(v-t)<$l&&r-d>$l?[t,Math.abs(c-t)<$l?f:r]:Math.abs(d-r)<$l&&n-v>$l?[Math.abs(f-r)<$l?c:n,r]:Math.abs(v-n)<$l&&d-e>$l?[n,Math.abs(c-n)<$l?f:e]:Math.abs(d-e)<$l&&v-t>$l?[Math.abs(f-e)<$l?c:t,e]:null))-1),++l);l&&(y=!1)}if(y){var m,_,x,E=1/0;for(i=0,y=null;i<p;++i)(o=Jl[i])&&(x=(m=(s=o.site)[0]-t)*m+(_=s[1]-e)*_)<E&&(E=x,y=o);if(y){var k=[t,e],w=[t,r],b=[n,r],I=[n,e];y.halfedges.push(Ql.push(Ll(s=y.site,k,w))-1,Ql.push(Ll(s,w,b))-1,Ql.push(Ll(s,b,I))-1,Ql.push(Ll(s,I,k))-1)}}for(i=0;i<p;++i)(o=Jl[i])&&(o.halfedges.length||delete Jl[i])}(s,a,u,l)}this.edges=Ql,this.cells=Jl,Wl=Kl=Ql=Jl=null}eh.prototype={constructor:eh,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return Rl(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,r){if(o=(i=n.halfedges).length)for(var i,o,s,a,u,l,h=n.site,c=-1,f=e[i[o-1]],g=f.left===h?f.right:f.left;++c<o;)s=g,g=(f=e[i[c]]).left===h?f.right:f.left,s&&g&&r<s.index&&r<g.index&&(u=s,l=g,((a=h)[0]-l[0])*(u[1]-a[1])-(a[0]-u[0])*(l[1]-a[1])<0)&&t.push([h.data,s.data,g.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var r,i,o=this,s=o._found||0,a=o.cells.length;!(i=o.cells[s]);)if(++s>=a)return null;var u=t-i.site[0],l=e-i.site[1],h=u*u+l*l;do{i=o.cells[r=s],s=null,i.halfedges.forEach((function(n){var r=o.edges[n],a=r.left;if(a!==i.site&&a||(a=r.right)){var u=t-a[0],l=e-a[1],c=u*u+l*l;c<h&&(h=c,s=a.index)}}))}while(null!==s);return o._found=r,null==n||h<=n*n?i.site:null}},t.along=function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=rt(t).coordinates,i=0,o=0;o<r.length&&!(e>=i&&o===r.length-1);o++){if(i>=e){var s=e-i;if(s){var a=st(r[o],r[o-1])-180;return at(r[o],s,a,n)}return I(r[o])}i+=ut(r[o],r[o+1],n)}return I(r[r.length-1])},t.angle=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!Z(r))throw new Error("options is invalid");if(!t)throw new Error("startPoint is required");if(!e)throw new Error("midPoint is required");if(!n)throw new Error("endPoint is required");var i=t,o=e,s=n,a=B(!0!==r.mercator?st(o,i):lt(o,i)),u=B(!0!==r.mercator?st(o,s):lt(o,s));u<a&&(u+=360);var l=u-a;return!0===r.explementary?360-l:l},t.applyFilter=Xi,t.area=Lt,t.areaFactors=k,t.azimuthToBearing=Y,t.bbox=Rt,t.bboxClip=function(t,e){var n=rt(t),r=n.type,i="Feature"===t.type?t.properties:{},o=n.coordinates;switch(r){case"LineString":case"MultiLineString":var s=[];return"LineString"===r&&(o=[o]),o.forEach((function(t){!function(t,e,n){var r,i,o,s,a,u=t.length,l=Ft(t[0],e),h=[];for(n||(n=[]),r=1;r<u;r++){for(s=t[r-1],i=o=Ft(a=t[r],e);;){if(!(l|i)){h.push(s),i!==o?(h.push(a),r<u-1&&(n.push(h),h=[])):r===u-1&&h.push(a);break}if(l&i)break;l?l=Ft(s=Dt(s,a,l,e),e):i=Ft(a=Dt(s,a,i,e),e)}l=o}h.length&&n.push(h)}(t,e,s)})),1===s.length?L(s[0],i):T(s,i);case"Polygon":return S(qt(o,e),i);case"MultiPolygon":return R(o.map((function(t){return qt(t,e)})),i);default:throw new Error("geometry "+r+" not supported")}},t.bboxPolygon=Gt,t.bearing=st,t.bearingToAzimuth=B,t.bezierSpline=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.resolution||1e4,r=e.sharpness||.85,i=[],o=rt(t).coordinates.map((function(t){return{x:t[0],y:t[1]}})),s=new Bt({duration:n,points:o,sharpness:r}),a=function(t){var e=s.pos(t);Math.floor(t/100)%2==0&&i.push([e.x,e.y])},u=0;u<s.duration;u+=10)a(u);return a(s.duration),L(i,e.properties)},t.booleanClockwise=Yt,t.booleanConcave=function(t){var e=rt(t).coordinates;if(e[0].length<=4)return!1;for(var n=!1,r=e[0].length-1,i=0;i<r;i++){var o=e[0][(i+2)%r][0]-e[0][(i+1)%r][0],s=e[0][(i+2)%r][1]-e[0][(i+1)%r][1],a=e[0][i][0]-e[0][(i+1)%r][0],u=o*(e[0][i][1]-e[0][(i+1)%r][1])-s*a;if(0===i)n=u>0;else if(n!==u>0)return!0}return!1},t.booleanContains=function(t,e){var n=rt(t),r=rt(e),i=n.type,o=r.type,s=n.coordinates,u=r.coordinates;switch(i){case"Point":if("Point"===o)return Ht(s,u);throw new Error("feature2 "+o+" geometry not supported");case"MultiPoint":switch(o){case"Point":return function(t,e){var n,r=!1;for(n=0;n<t.coordinates.length;n++)if(Ht(t.coordinates[n],e.coordinates)){r=!0;break}return r}(n,r);case"MultiPoint":return function(t,e){var n,r=a(e.coordinates);try{for(r.s();!(n=r.n()).done;){var i,o=n.value,s=!1,u=a(t.coordinates);try{for(u.s();!(i=u.n()).done;){if(Ht(o,i.value)){s=!0;break}}}catch(t){u.e(t)}finally{u.f()}if(!s)return!1}}catch(t){r.e(t)}finally{r.f()}return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return Xt(r,n,{ignoreEndVertices:!0});case"LineString":return function(t,e){var n,r=!1,i=a(e.coordinates);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(Xt({type:"Point",coordinates:o},t,{ignoreEndVertices:!0})&&(r=!0),!Xt({type:"Point",coordinates:o},t,{ignoreEndVertices:!1}))return!1}}catch(t){i.e(t)}finally{i.f()}return r}(n,r);case"MultiPoint":return function(t,e){var n,r=!1,i=a(e.coordinates);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(Xt(o,t,{ignoreEndVertices:!0})&&(r=!0),!Xt(o,t))return!1}}catch(t){i.e(t)}finally{i.f()}if(r)return!0;return!1}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return jt(r,n,{ignoreBoundary:!0});case"LineString":return function(t,e){var n=!1,r=0,i=Rt(t),o=Rt(e);if(!Zt(i,o))return!1;for(;r<e.coordinates.length-1;r++){if(jt({type:"Point",coordinates:Wt(e.coordinates[r],e.coordinates[r+1])},t,{ignoreBoundary:!0})){n=!0;break}}return n}(n,r);case"Polygon":return Vt(n,r);case"MultiPoint":return function(t,e){var n,r=a(e.coordinates);try{for(r.s();!(n=r.n()).done;){if(!jt(n.value,t,{ignoreBoundary:!0}))return!1}}catch(t){r.e(t)}finally{r.f()}return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPolygon":if("Polygon"===o)return function(t,e){return t.coordinates.some((function(t){return Vt({type:"Polygon",coordinates:t},e)}))}(n,r);throw new Error("feature2 "+o+" geometry not supported");default:throw new Error("feature1 "+i+" geometry not supported")}},t.booleanCrosses=ce,t.booleanDisjoint=pe,t.booleanEqual=function(t,e){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).precision;if("number"!=typeof(n=null==n||isNaN(n)?6:n)||!(n>=0))throw new Error("precision must be a positive number");return rt(t).type===rt(e).type&&Ne(Le(t),Le(e),{precision:n})},t.booleanIntersects=Te,t.booleanOverlap=function(t,e){var n=rt(t),r=rt(e),i=n.type,o=r.type;if("MultiPoint"===i&&"MultiPoint"!==o||("LineString"===i||"MultiLineString"===i)&&"LineString"!==o&&"MultiLineString"!==o||("Polygon"===i||"MultiPolygon"===i)&&"Polygon"!==o&&"MultiPolygon"!==o)throw new Error("features must be of the same type");if("Point"===i)throw new Error("Point geometry not supported");if(Ne(t,e,{precision:6}))return!1;var s=0;switch(i){case"MultiPoint":for(var a=0;a<n.coordinates.length;a++)for(var u=0;u<r.coordinates.length;u++){var l=n.coordinates[a],h=r.coordinates[u];if(l[0]===h[0]&&l[1]===h[1])return!0}return!1;case"LineString":case"MultiLineString":kt(t,(function(t){kt(e,(function(e){kn(t,e).features.length&&s++}))}));break;case"Polygon":case"MultiPolygon":kt(t,(function(t){kt(e,(function(e){ue(t,e).features.length&&s++}))}))}return s>0},t.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==In(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==In(e,"line2"))throw new Error("line2 must be a LineString");for(var n=Qe(Le(t)).features,r=Qe(Le(e)).features,i=0;i<n.length;i++){var o=n[i].geometry.coordinates;if(!r[i])break;if(!bn(o,r[i].geometry.coordinates))return!1}return!0},t.booleanPointInPolygon=jt,t.booleanPointOnLine=Xt,t.booleanTouches=function(t,e){var n=rt(t),r=rt(e),i=n.type,o=r.type;switch(i){case"Point":switch(o){case"LineString":return Nn(n,r);case"MultiLineString":for(var s=!1,a=0;a<r.coordinates.length;a++)Nn(n,{coordinates:r.coordinates[a]})&&(s=!0);return s;case"Polygon":for(var u=0;u<r.coordinates.length;u++)if(Xt(n,{type:"LineString",coordinates:r.coordinates[u]}))return!0;return!1;case"MultiPolygon":for(u=0;u<r.coordinates.length;u++)for(a=0;a<r.coordinates[u].length;a++)if(Xt(n,{type:"LineString",coordinates:r.coordinates[u][a]}))return!0;return!1;default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"LineString":for(s=!1,u=0;u<n.coordinates.length;u++)if(s||Nn({coordinates:n.coordinates[u]},r)&&(s=!0),Xt({type:"Point",coordinates:n.coordinates[u]},r,{ignoreEndVertices:!0}))return!1;return s;case"MultiLineString":for(s=!1,u=0;u<n.coordinates.length;u++)for(a=0;a<r.coordinates.length;a++)if(s||Nn({coordinates:n.coordinates[u]},{coordinates:r.coordinates[a]})&&(s=!0),Xt({type:"Point",coordinates:n.coordinates[u]},{type:"LineString",coordinates:r.coordinates[a]},{ignoreEndVertices:!0}))return!1;return s;case"Polygon":for(s=!1,u=0;u<n.coordinates.length;u++)if(s||Xt({type:"Point",coordinates:n.coordinates[u]},{type:"LineString",coordinates:r.coordinates[0]})&&(s=!0),jt({type:"Point",coordinates:n.coordinates[u]},r,{ignoreBoundary:!0}))return!1;return s;case"MultiPolygon":for(s=!1,u=0;u<n.coordinates.length;u++)for(a=0;a<r.coordinates.length;a++)if(s||Xt({type:"Point",coordinates:n.coordinates[u]},{type:"LineString",coordinates:r.coordinates[a][0]})&&(s=!0),jt({type:"Point",coordinates:n.coordinates[u]},{type:"Polygon",coordinates:r.coordinates[a]},{ignoreBoundary:!0}))return!1;return s;default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return Nn(r,n);case"MultiPoint":for(s=!1,u=0;u<r.coordinates.length;u++)if(s||Nn({coordinates:r.coordinates[u]},n)&&(s=!0),Xt({type:"Point",coordinates:r.coordinates[u]},n,{ignoreEndVertices:!0}))return!1;return s;case"LineString":var l=!1;if(Nn({coordinates:n.coordinates[0]},r)&&(l=!0),Nn({coordinates:n.coordinates[n.coordinates.length-1]},r)&&(l=!0),!1===l)return!1;for(u=0;u<n.coordinates.length;u++)if(Xt({type:"Point",coordinates:n.coordinates[u]},r,{ignoreEndVertices:!0}))return!1;return l;case"MultiLineString":for(l=!1,u=0;u<r.coordinates.length;u++){Nn({coordinates:n.coordinates[0]},{coordinates:r.coordinates[u]})&&(l=!0),Nn({coordinates:n.coordinates[n.coordinates.length-1]},{coordinates:r.coordinates[u]})&&(l=!0);for(a=0;a<n.coordinates[u].length;a++)if(Xt({type:"Point",coordinates:n.coordinates[a]},{type:"LineString",coordinates:r.coordinates[u]},{ignoreEndVertices:!0}))return!1}return l;case"Polygon":for(s=!1,u=0;u<n.coordinates.length;u++)if(s||Xt({type:"Point",coordinates:n.coordinates[u]},{type:"LineString",coordinates:r.coordinates[0]})&&(s=!0),jt({type:"Point",coordinates:n.coordinates[u]},r,{ignoreBoundary:!0}))return!1;return s;case"MultiPolygon":for(s=!1,u=0;u<n.coordinates.length;u++){for(a=0;a<r.coordinates.length;a++)s||Xt({type:"Point",coordinates:n.coordinates[u]},{type:"LineString",coordinates:r.coordinates[a][0]})&&(s=!0);if(jt({type:"Point",coordinates:n.coordinates[u]},r,{ignoreBoundary:!0}))return!1}return s;default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiLineString":switch(o){case"Point":for(u=0;u<n.coordinates.length;u++)if(Nn(r,{coordinates:n.coordinates[u]}))return!0;return!1;case"MultiPoint":for(s=!1,u=0;u<n.coordinates.length;u++)for(a=0;a<r.coordinates.length;a++)if(s||Nn({coordinates:r.coordinates[a]},{coordinates:n.coordinates[a]})&&(s=!0),Xt({type:"Point",coordinates:r.coordinates[a]},{type:"LineString",coordinates:n.coordinates[a]},{ignoreEndVertices:!0}))return!1;return s;case"LineString":for(l=!1,u=0;u<n.coordinates.length;u++){Nn({coordinates:n.coordinates[u][0]},r)&&(l=!0),Nn({coordinates:n.coordinates[u][n.coordinates[u].length-1]},r)&&(l=!0);for(a=0;a<r.coordinates.length;a++)if(Xt({type:"Point",coordinates:r.coordinates[a]},{type:"LineString",coordinates:n.coordinates[u]},{ignoreEndVertices:!0}))return!1}return l;case"MultiLineString":for(l=!1,u=0;u<n.coordinates.length;u++)for(a=0;a<r.coordinates.length;a++){Nn({coordinates:n.coordinates[u][0]},{coordinates:r.coordinates[a]})&&(l=!0),Nn({coordinates:n.coordinates[u][n.coordinates[u].length-1]},{coordinates:r.coordinates[a]})&&(l=!0);for(var h=0;h<n.coordinates[u].length;h++)if(Xt({type:"Point",coordinates:n.coordinates[u][h]},{type:"LineString",coordinates:r.coordinates[a]},{ignoreEndVertices:!0}))return!1}return l;case"Polygon":for(s=!1,u=0;u<n.coordinates.length;u++)for(a=0;a<n.coordinates.length;a++)if(s||Xt({type:"Point",coordinates:n.coordinates[u][a]},{type:"LineString",coordinates:r.coordinates[0]})&&(s=!0),jt({type:"Point",coordinates:n.coordinates[u][a]},r,{ignoreBoundary:!0}))return!1;return s;case"MultiPolygon":for(s=!1,u=0;u<r.coordinates[0].length;u++)for(a=0;a<n.coordinates.length;a++)for(h=0;h<n.coordinates[a].length;h++)if(s||Xt({type:"Point",coordinates:n.coordinates[a][h]},{type:"LineString",coordinates:r.coordinates[0][u]})&&(s=!0),jt({type:"Point",coordinates:n.coordinates[a][h]},{type:"Polygon",coordinates:[r.coordinates[0][u]]},{ignoreBoundary:!0}))return!1;return s;default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":for(u=0;u<n.coordinates.length;u++)if(Xt(r,{type:"LineString",coordinates:n.coordinates[u]}))return!0;return!1;case"MultiPoint":for(s=!1,u=0;u<r.coordinates.length;u++)if(s||Xt({type:"Point",coordinates:r.coordinates[u]},{type:"LineString",coordinates:n.coordinates[0]})&&(s=!0),jt({type:"Point",coordinates:r.coordinates[u]},n,{ignoreBoundary:!0}))return!1;return s;case"LineString":for(s=!1,u=0;u<r.coordinates.length;u++)if(s||Xt({type:"Point",coordinates:r.coordinates[u]},{type:"LineString",coordinates:n.coordinates[0]})&&(s=!0),jt({type:"Point",coordinates:r.coordinates[u]},n,{ignoreBoundary:!0}))return!1;return s;case"MultiLineString":for(s=!1,u=0;u<r.coordinates.length;u++)for(a=0;a<r.coordinates[u].length;a++)if(s||Xt({type:"Point",coordinates:r.coordinates[u][a]},{type:"LineString",coordinates:n.coordinates[0]})&&(s=!0),jt({type:"Point",coordinates:r.coordinates[u][a]},n,{ignoreBoundary:!0}))return!1;return s;case"Polygon":for(s=!1,u=0;u<n.coordinates[0].length;u++)if(s||Xt({type:"Point",coordinates:n.coordinates[0][u]},{type:"LineString",coordinates:r.coordinates[0]})&&(s=!0),jt({type:"Point",coordinates:n.coordinates[0][u]},r,{ignoreBoundary:!0}))return!1;return s;case"MultiPolygon":for(s=!1,u=0;u<r.coordinates[0].length;u++)for(a=0;a<n.coordinates[0].length;a++)if(s||Xt({type:"Point",coordinates:n.coordinates[0][a]},{type:"LineString",coordinates:r.coordinates[0][u]})&&(s=!0),jt({type:"Point",coordinates:n.coordinates[0][a]},{type:"Polygon",coordinates:r.coordinates[0][u]},{ignoreBoundary:!0}))return!1;return s;default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPolygon":switch(o){case"Point":for(u=0;u<n.coordinates[0].length;u++)if(Xt(r,{type:"LineString",coordinates:n.coordinates[0][u]}))return!0;return!1;case"MultiPoint":for(s=!1,u=0;u<n.coordinates[0].length;u++)for(a=0;a<r.coordinates.length;a++)if(s||Xt({type:"Point",coordinates:r.coordinates[a]},{type:"LineString",coordinates:n.coordinates[0][u]})&&(s=!0),jt({type:"Point",coordinates:r.coordinates[a]},{type:"Polygon",coordinates:n.coordinates[0][u]},{ignoreBoundary:!0}))return!1;return s;case"LineString":for(s=!1,u=0;u<n.coordinates[0].length;u++)for(a=0;a<r.coordinates.length;a++)if(s||Xt({type:"Point",coordinates:r.coordinates[a]},{type:"LineString",coordinates:n.coordinates[0][u]})&&(s=!0),jt({type:"Point",coordinates:r.coordinates[a]},{type:"Polygon",coordinates:n.coordinates[0][u]},{ignoreBoundary:!0}))return!1;return s;case"MultiLineString":for(s=!1,u=0;u<n.coordinates.length;u++)for(a=0;a<r.coordinates.length;a++)for(h=0;h<r.coordinates[a].length;h++)if(s||Xt({type:"Point",coordinates:r.coordinates[a][h]},{type:"LineString",coordinates:n.coordinates[u][0]})&&(s=!0),jt({type:"Point",coordinates:r.coordinates[a][h]},{type:"Polygon",coordinates:[n.coordinates[u][0]]},{ignoreBoundary:!0}))return!1;return s;case"Polygon":for(s=!1,u=0;u<n.coordinates[0].length;u++)for(a=0;a<n.coordinates[0][u].length;a++)if(s||Xt({type:"Point",coordinates:n.coordinates[0][u][a]},{type:"LineString",coordinates:r.coordinates[0]})&&(s=!0),jt({type:"Point",coordinates:n.coordinates[0][u][a]},r,{ignoreBoundary:!0}))return!1;return s;case"MultiPolygon":for(s=!1,u=0;u<n.coordinates[0].length;u++)for(a=0;a<r.coordinates[0].length;a++)for(h=0;h<n.coordinates[0].length;h++)if(s||Xt({type:"Point",coordinates:n.coordinates[0][u][h]},{type:"LineString",coordinates:r.coordinates[0][a]})&&(s=!0),jt({type:"Point",coordinates:n.coordinates[0][u][h]},{type:"Polygon",coordinates:r.coordinates[0][a]},{ignoreBoundary:!0}))return!1;return s;default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}},t.booleanValid=function(t){if(!t.type)return!1;var e=rt(t),n=e.type,r=e.coordinates;switch(n){case"Point":return r.length>1;case"MultiPoint":for(var i=0;i<r.length;i++)if(r[i].length<2)return!1;return!0;case"LineString":if(r.length<2)return!1;for(i=0;i<r.length;i++)if(r[i].length<2)return!1;return!0;case"MultiLineString":if(r.length<2)return!1;for(i=0;i<r.length;i++)if(r[i].length<2)return!1;return!0;case"Polygon":for(i=0;i<e.coordinates.length;i++){if(r[i].length<4)return!1;if(!Mn(r[i]))return!1;if(Ln(r[i]))return!1;if(i>0&&ue(S([r[0]]),S([r[i]])).features.length>1)return!1}return!0;case"MultiPolygon":for(i=0;i<e.coordinates.length;i++)for(var o=e.coordinates[i],s=0;s<o.length;s++){if(o[s].length<4)return!1;if(!Mn(o[s]))return!1;if(Ln(o[s]))return!1;if(0===s&&!Pn(o,e.coordinates,i))return!1;if(s>0&&ue(S([o[0]]),S([o[s]])).features.length>1)return!1}return!0;default:return!1}},t.booleanWithin=Cn,t.buffer=function(t,e,n){var r=(n=n||{}).units||"kilometers",i=n.steps||8;if(!t)throw new Error("geojson is required");if("object"!==m(n))throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(t.type){case"GeometryCollection":return mt(t,(function(t){var n=ui(t,e,r,i);n&&o.push(n)})),C(o);case"FeatureCollection":return dt(t,(function(t){var n=ui(t,e,r,i);n&&dt(n,(function(t){t&&o.push(t)}))})),C(o)}return ui(t,e,r,i)},t.center=An,t.centerMean=fi,t.centerMedian=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Z(e=e||{}))throw new Error("options is invalid");var n=e.counter||10;if(!V(n))throw new Error("counter must be a number");var r=e.weight,i=fi(t,{weight:e.weight}),o=C([]);dt(t,(function(t){var e;o.features.push(gi(t,{properties:{weight:null==(e=t.properties)?void 0:e[r]}}))}));var s={tolerance:e.tolerance,medianCandidates:[]};return vi(i.geometry.coordinates,[0,0],o,s,n)},t.centerOfMass=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(it(e)){case"Point":return I(K(e),n.properties);case"Polygon":var r=[];ct(e,(function(t){r.push(t)}));var i,o,s,a,u,l,h,c,f=gi(e,{properties:n.properties}),g=f.geometry.coordinates,v=0,d=0,p=0,y=r.map((function(t){return[t[0]-g[0],t[1]-g[1]]}));for(i=0;i<r.length-1;i++)a=(o=y[i])[0],l=o[1],u=(s=y[i+1])[0],p+=c=a*(h=s[1])-u*l,v+=(a+u)*c,d+=(l+h)*c;if(0===p)return f;var m=1/(6*(.5*p));return I([g[0]+m*v,g[1]+m*d],n.properties);default:var _=Oi(e);return _?t(_,{properties:n.properties}):gi(e,{properties:n.properties})}},t.centroid=gi,t.circle=Ri,t.cleanCoords=Le,t.clone=Ai,t.cloneProperties=Fi,t.clusterEach=Yi,t.clusterReduce=zi,t.clusters=$i,t.clustersDbscan=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!0!==n.mutate&&(t=Ai(t));var r=n.minPoints||3,i=G(e,n.units),o=new Fe(t.features.length),s=t.features.map((function(t){return!1})),a=t.features.map((function(t){return!1})),u=t.features.map((function(t){return!1})),l=t.features.map((function(t){return-1}));o.load(t.features.map((function(t,e){var n=d(t.geometry.coordinates,2),r=n[0],i=n[1];return{minX:r,minY:i,maxX:r,maxY:i,index:e}})));var h=function(n){var r=t.features[n],s=d(r.geometry.coordinates,2),a=s[0],u=s[1],l=Math.max(u-i,-90),h=Math.min(u+i,90),c=l<0&&h>0?i:Math.abs(l)<Math.abs(h)?i/Math.cos(j(h)):i/Math.cos(j(l)),f=Math.max(a-c,-360),g=Math.min(a+c,360),v={minX:f,minY:l,maxX:g,maxY:h};return o.search(v).filter((function(n){var i=n.index,o=t.features[i];return ut(r,o,{units:"kilometers"})<=e}))},c=0;return t.features.forEach((function(t,e){if(!s[e]){var n=h(e);if(n.length>=r){var i=c;c++,s[e]=!0,function(t,e){for(var n=0;n<e.length;n++){var i=e[n].index;if(!s[i]){s[i]=!0;var o=h(i);o.length>=r&&e.push.apply(e,p(o))}a[i]||(a[i]=!0,l[i]=t)}}(i,n)}else u[e]=!0}})),t.features.forEach((function(e,n){var r=t.features[n];r.properties||(r.properties={}),l[n]>=0?(r.properties.dbscan=u[n]?"edge":"core",r.properties.cluster=l[n]):r.properties.dbscan="noise"})),t},t.clustersKmeans=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.features.length;e.numberOfClusters=e.numberOfClusters||Math.round(Math.sqrt(n/2)),e.numberOfClusters>n&&(e.numberOfClusters=n),!0!==e.mutate&&(t=Ai(t));var r=yt(t),i=r.slice(0,e.numberOfClusters),o=no(r,e.numberOfClusters,i),s={};return o.centroids.forEach((function(t,e){s[e]=t})),dt(t,(function(t,e){var n=o.idxs[e];t.properties.cluster=n,t.properties.centroid=s[n]})),t},t.collect=function(t,e,n,r){var i=new Fe(6),o=e.features.map((function(t){var e;return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:null==(e=t.properties)?void 0:e[n]}}));return i.load(o),t.features.forEach((function(t){t.properties||(t.properties={});var e=Rt(t),n=i.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}),o=[];n.forEach((function(e){jt([e.minX,e.minY],t)&&o.push(e.property)})),t.properties[r]=o})),t},t.collectionOf=nt,t.combine=function(t){var e={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return dt(t,(function(t){var n,r,i,o;switch(null==(o=t.geometry)?void 0:o.type){case"Point":e.MultiPoint.coordinates.push(t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"MultiPoint":(n=e.MultiPoint.coordinates).push.apply(n,p(t.geometry.coordinates)),e.MultiPoint.properties.push(t.properties);break;case"LineString":e.MultiLineString.coordinates.push(t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"MultiLineString":(r=e.MultiLineString.coordinates).push.apply(r,p(t.geometry.coordinates)),e.MultiLineString.properties.push(t.properties);break;case"Polygon":e.MultiPolygon.coordinates.push(t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties);break;case"MultiPolygon":(i=e.MultiPolygon.coordinates).push.apply(i,p(t.geometry.coordinates)),e.MultiPolygon.properties.push(t.properties)}})),C(Object.keys(e).filter((function(t){return e[t].coordinates.length})).sort().map((function(t){return w({type:t,coordinates:e[t].coordinates},{collectedProperties:e[t].properties})})))},t.concave=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.maxEdge||1/0,r=function(t){var e=[],n={};return dt(t,(function(t){if(t.geometry){var r=t.geometry.coordinates.join("-");Object.prototype.hasOwnProperty.call(n,r)||(e.push(t),n[r]=!0)}})),C(e)}(t),i=ro(r);if(i.features=i.features.filter((function(t){var r=t.geometry.coordinates[0][0],i=t.geometry.coordinates[0][1],o=t.geometry.coordinates[0][2],s=ut(r,i,e),a=ut(i,o,e),u=ut(r,o,e);return s<=n&&a<=n&&u<=n})),i.features.length<1)return null;var o=To(i);return 1===o.coordinates.length&&(o.coordinates=o.coordinates[0],o.type="Polygon"),w(o)},t.containsNumber=$,t.convertArea=U,t.convertLength=X,t.convex=Oi,t.coordAll=yt,t.coordEach=ct,t.coordReduce=ft,t.createBins=ji,t.degreesToRadians=j,t.destination=at,t.difference=function(t){var e=[];if(mt(t,(function(t){e.push(t.coordinates)})),e.length<2)throw new Error("Must have at least two features");var n=t.features[0].properties||{},r=Os.apply(As,[e[0]].concat(p(e.slice(1))));return 0===r.length?null:1===r.length?S(r[0],n):R(r,n)},t.dissolve=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Z(e=e||{}))throw new Error("options is invalid");var n=e.propertyName;nt(t,"Polygon","dissolve");var r=[];if(!n)return Ds(R(Cs.apply(null,t.features.map((function(t){return t.geometry.coordinates})))));var i={};dt(t,(function(t){t.properties&&(Object.prototype.hasOwnProperty.call(i,t.properties[n])||(i[t.properties[n]]=[]),i[t.properties[n]].push(t))}));for(var o=Object.keys(i),s=0;s<o.length;s++){var a=R(Cs.apply(null,i[o[s]].map((function(t){return t.geometry.coordinates}))));a&&a.properties&&(a.properties[n]=o[s],r.push(a))}return Ds(C(r))},t.distance=ut,t.distanceWeight=qs,t.earthRadius=x,t.ellipse=zs,t.envelope=js,t.explode=Xs,t.factors=E,t.feature=w,t.featureCollection=C,t.featureEach=dt,t.featureOf=et,t.featureReduce=pt,t.filterProperties=Vi,t.findPoint=St,t.findSegment=Nt,t.flatten=Ds,t.flattenEach=xt,t.flattenReduce=Et,t.flip=function(t,e){var n;if(!Z(e=e||{}))throw new Error("options is invalid");var r=null!=(n=e.mutate)&&n;if(!t)throw new Error("geojson is required");return!1!==r&&void 0!==r||(t=Ai(t)),ct(t,(function(t){var e=t[0],n=t[1];t[0]=n,t[1]=e})),t},t.geojsonRbush=Ke,t.geojsonType=tt,t.geomEach=mt,t.geomReduce=_t,t.geometry=b,t.geometryCollection=A,t.getCluster=Bi,t.getCoord=K,t.getCoords=Q,t.getGeom=rt,t.getType=it,t.greatCircle=function(t,e,n){if("object"!==m(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.npoints,o=n.offset;if(t=K(t),e=K(e),r=r||{},i=i||100,t[0]===e[0]&&t[1]===e[1]){var s=Array(i);return s.fill([t[0],t[1]]),L(s,r)}return o=o||10,new Js({x:t[0],y:t[1]},{x:e[0],y:e[1]},r).Arc(i,{offset:o}).json()},t.helpers=J,t.hexGrid=Qs,t.interpolate=function(t,e,n){if("object"!==m(n=n||{}))throw new Error("options is invalid");var r,i=n.gridType,o=n.property,s=n.weight,a=n.bbox;if(!t)throw new Error("points is required");if(nt(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==s&&"number"!=typeof s)throw new Error("weight must be a number");switch(o=o||"elevation",i=i||"square",s=s||1,H(a=null!=a?a:Rt(t)),i){case"point":case"points":r=ea(a,e,n);break;case"square":case"squares":r=ra(a,e,n);break;case"hex":case"hexes":r=Qs(a,e,n);break;case"triangle":case"triangles":r=ia(a,e,n);break;default:throw new Error("invalid gridType")}var u=[];return dt(r,(function(e){var r=0,a=0;dt(t,(function(t){var u,l=ut("point"===i?e:gi(e),t,n);if(void 0!==o&&(u=t.properties[o]),void 0===u&&(u=t.geometry.coordinates[2]),void 0===u)throw new Error("zValue is missing");0===l&&(r=u);var h=1/Math.pow(l,s);a+=h,r+=h*u}));var l=Ai(e);l.properties[o]=r/a,u.push(l)})),C(u)},t.intersect=Ks,t.invariant=ot,t.isNumber=V,t.isObject=Z,t.isobands=function(t,e,n){if(!Z(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(nt(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!Z(i))throw new Error("commonProperties is not an Object");if(!Array.isArray(o))throw new Error("breaksProperties is not an Array");var s=ca(t,{zProperty:r,flip:!0}),a=s[0].length;if(s.length<2||a<2)throw new Error("Matrix of points must be at least 2x2");for(var l=1;l<s.length;l++)if(s[l].length!==a)throw new Error("Matrix of points is not uniform in the x dimension");var h=function(t,e,n){for(var r,i=[],o=1;o<e.length;o++){1===o&&(r=fa(t,+e[0]));var s=+e[o],a=+e[o-1],l=fa(t,s),h=l.map((function(t){return t.map((function(t){return[t[0],t[1]]})).reverse()})),c=da(va(ga(r.concat(h),t)));if(0===c.length&&t[0][0]<s){var f=t[0].length,g=t.length;c.push([[[0,0],[f-1,0],[f-1,g-1],[0,g-1],[0,0]]])}i.push(u({groupedRings:c},n,a+"-"+s)),r=l}return i}(s,e,r);h=function(t,e,n){var r=Rt(n),i=r[2]-r[0],o=r[3]-r[1],s=r[0],a=r[1],u=e[0].length-1,l=e.length-1,h=i/u,c=o/l;return t.map((function(t){return t.groupedRings=t.groupedRings.map((function(t){return t.map((function(t){return t.map((function(t){return[t[0]*h+s,t[1]*c+a]}))}))})),t}))}(h,s,t);var c=h.map((function(t,e){if(o[e]&&!Z(o[e]))throw new Error("Each mappedProperty is required to be an Object");var n=ha(ha({},i),o[e]);return n[r]=t[r],R(t.groupedRings,n)}));return C(c)},t.isolines=function(t,e,n){if(!Z(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(nt(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!Z(i))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var s=Ia(t,{zProperty:r,flip:!0}),a=s[0].length;if(s.length<2||a<2)throw new Error("Matrix of points must be at least 2x2");for(var u=1;u<s.length;u++)if(s[u].length!==a)throw new Error("Matrix of points is not uniform in the x dimension");var l=function(t,e,n){var r=Rt(n),i=r[2]-r[0],o=r[3]-r[1],s=r[0],a=r[1],u=e[0].length-1,l=e.length-1,h=i/u,c=o/l,f=function(t){t[0]=t[0]*h+s,t[1]=t[1]*c+a};return t.forEach((function(t){ct(t,f)})),t}(function(t,e,n,r,i){for(var o=[],s=0;s<e.length;s++){var a=+e[s],u=ba(ba({},r),i[s]);u[n]=a;var l=T(Na(t,a),u);o.push(l)}return o}(s,e,r,i,o),s,t);return C(l)},t.kinks=function(t){var e,n,r={type:"FeatureCollection",features:[]};if("LineString"===(n="Feature"===t.type?t.geometry:t).type)e=[n.coordinates];else if("MultiLineString"===n.type)e=n.coordinates;else if("MultiPolygon"===n.type){var i;e=(i=[]).concat.apply(i,p(n.coordinates))}else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach((function(t){e.forEach((function(e){for(var n=0;n<t.length-1;n++)for(var i=n;i<e.length-1;i++){if(t===e){if(1===Math.abs(n-i))continue;if(0===n&&i===t.length-2&&t[n][0]===t[t.length-1][0]&&t[n][1]===t[t.length-1][1])continue}var o=Sa(t[n][0],t[n][1],t[n+1][0],t[n+1][1],e[i][0],e[i][1],e[i+1][0],e[i+1][1]);o&&r.features.push(I([o[0],o[1]]))}}))})),r},t.length=Ma,t.lengthToDegrees=G,t.lengthToRadians=q,t.lineArc=La,t.lineChunk=function(t,e,n){if(!Z(n=n||{}))throw new Error("options is invalid");var r=n.units,i=n.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return xt(t,(function(t){i&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,n,r){var i=Ma(t,{units:n});if(i<=e)return r(t);var o=i/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var s=0;s<o;s++){r(Ca(t,e*s,e*(s+1),{units:n}),s)}}(t,e,r,(function(t){o.push(t)}))})),C(o)},t.lineEach=bt,t.lineIntersect=ue,t.lineOffset=function(t,e,n){if(!Z(n=n||{}))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");var i=it(t),o=t.properties;switch(i){case"LineString":return Aa(t,e,r);case"MultiLineString":var s=[];return xt(t,(function(t){s.push(Aa(t,e,r).geometry.coordinates)})),T(s,o);default:throw new Error("geometry "+i+" is not supported")}},t.lineOverlap=kn,t.lineReduce=It,t.lineSegment=Qe,t.lineSlice=function(t,e,n){var r=Q(n);if("LineString"!==it(n))throw new Error("line must be a LineString");for(var i,o=cn(n,t),s=cn(n,e),a=[(i=o.properties.index<=s.properties.index?[o,s]:[s,o])[0].geometry.coordinates],u=i[0].properties.index+1;u<i[1].properties.index+1;u++)a.push(r[u]);return a.push(i[1].geometry.coordinates),L(a,n.properties)},t.lineSliceAlong=Ca,t.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=it(t),r=it(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===r)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===r)throw new Error("splitter cannot be a GeometryCollection");var i=Da(e,{precision:7});switch(r){case"Point":return qa(t,i);case"MultiPoint":return Fa(t,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Fa(t,ue(t,i,{ignoreSelfIntersections:!0}))}},t.lineString=L,t.lineStrings=P,t.lineToPolygon=function(t){var e,n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.properties,s=null==(e=i.autoComplete)||e,a=null==(n=i.orderCoords)||n;if(null!=(r=i.mutate)&&r||(t=Ai(t)),"FeatureCollection"===t.type){var u=[];return t.features.forEach((function(t){u.push(Q(Ya(t,{},s,a)))})),R(u,o)}return Ya(t,o,s,a)},t.mask=function(t,e,n){var r,i=null!=(r=null==n?void 0:n.mutate)&&r,o=e;e&&!1===i&&(o=Ai(e));var s,a=Xa(o);return("FeatureCollection"===t.type?ja(2===(s=t).features.length?Cs(s.features[0].geometry.coordinates,s.features[1].geometry.coordinates):Cs.apply(As,s.features.map((function(t){return t.geometry.coordinates})))):"Feature"===t.type?ja(Cs(t.geometry.coordinates)):ja(Cs(t.coordinates))).geometry.coordinates.forEach((function(t){a.geometry.coordinates.push(t[0])})),a},t.meta=Mt,t.midpoint=function(t,e){return at(t,ut(t,e)/2,st(t,e))},t.moranIndex=function(t,e){var n,r,i=e.inputField,o=e.threshold||1e5,s=e.p||2,u=null!=(n=e.binary)&&n,l=qs(t,{alpha:e.alpha||-1,binary:u,p:s,standardization:null==(r=e.standardization)||r,threshold:o}),h=[];dt(t,(function(t){var e=t.properties||{};h.push(e[i])}));for(var c=Ua(h),f=function(t){var e,n=Ua(t),r=0,i=a(t);try{for(i.s();!(e=i.n()).done;){var o=e.value;r+=Math.pow(o-n,2)}}catch(t){i.e(t)}finally{i.f()}return r/t.length}(h),g=0,v=0,d=0,p=0,y=l.length,m=0;m<y;m++){for(var _=0,x=0;x<y;x++)g+=l[m][x]*(h[m]-c)*(h[x]-c),v+=l[m][x],d+=Math.pow(l[m][x]+l[x][m],2),_+=l[m][x]+l[x][m];p+=Math.pow(_,2)}var E=g/v/f,k=-1/(y-1),w=(y*y*(d*=.5)-y*p+v*v*3)/((y-1)*(y+1)*(v*v))-k*k,b=Math.sqrt(w);return{expectedMoranIndex:k,moranIndex:E,stdNorm:b,zNorm:(E-k)/b}},t.multiLineString=T,t.multiPoint=O,t.multiPolygon=R,t.nearestNeighborAnalysis=function(t,e){var n=(e=e||{}).studyArea||Gt(Rt(t)),r=e.properties||{},i=e.units||"kilometers",o=[];dt(t,(function(t){o.push(gi(t))}));var s=o.length,a=o.map((function(t,e){return ut(t,eu(t,C(o.filter((function(t,n){return n!==e})))).geometry.coordinates,{units:i})})).reduce((function(t,e){return t+e}),0)/s,u=s/U(Lt(n),"meters",i),l=1/(2*Math.sqrt(u)),h=.26136/Math.sqrt(s*u);return r.nearestNeighborAnalysis={units:i,arealUnits:i+"",observedMeanDistance:a,expectedMeanDistance:l,nearestNeighborIndex:a/l,numberOfPoints:s,zScore:(a-l)/h},n.properties=r,n},t.nearestPoint=eu,t.nearestPointOnLine=cn,t.nearestPointToLine=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.units,i=n.properties||{},o=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return mt(t,(function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})})),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter((function(t){return"Point"===t.geometry.type})),t;default:throw new Error("points must be a Point Collection")}}(t);if(!o.features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==it(e))throw new Error("line must be a LineString");var s=1/0,a=null;return dt(o,(function(t){var n=nu(t,e,{units:r});n<s&&(s=n,a=t)})),a&&(a.properties=lu(lu(lu({},{dist:s}),a.properties),i)),a},t.planepoint=function(t,e){var n=K(t),r=rt(e).coordinates[0];if(r.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var i="Feature"===e.type&&e.properties||{},o=i.a,s=i.b,a=i.c,u=n[0],l=n[1],h=r[0][0],c=r[0][1],f=void 0!==o?o:r[0][2],g=r[1][0],v=r[1][1],d=void 0!==s?s:r[1][2],p=r[2][0],y=r[2][1],m=void 0!==a?a:r[2][2];return(m*(u-h)*(l-v)+f*(u-g)*(l-y)+d*(u-p)*(l-c)-d*(u-h)*(l-y)-m*(u-g)*(l-c)-f*(u-p)*(l-v))/((u-h)*(l-v)+(u-g)*(l-y)+(u-p)*(l-c)-(u-h)*(l-y)-(u-g)*(l-c)-(u-p)*(l-v))},t.point=I,t.pointGrid=ea,t.pointOnFeature=function(t){for(var e=function(t){if("FeatureCollection"!==t.type)return"Feature"!==t.type?C([w(t)]):C([t]);return t}(t),n=An(e),r=!1,i=0;!r&&i<e.features.length;){var o=e.features[i].geometry,s=!1;if("Point"===o.type)n.geometry.coordinates[0]===o.coordinates[0]&&n.geometry.coordinates[1]===o.coordinates[1]&&(r=!0);else if("MultiPoint"===o.type)for(var a=!1,u=0;!a&&u<o.coordinates.length;)n.geometry.coordinates[0]===o.coordinates[u][0]&&n.geometry.coordinates[1]===o.coordinates[u][1]&&(r=!0,a=!0),u++;else if("LineString"===o.type)for(var l=0;!s&&l<o.coordinates.length-1;)hu(n.geometry.coordinates[0],n.geometry.coordinates[1],o.coordinates[l][0],o.coordinates[l][1],o.coordinates[l+1][0],o.coordinates[l+1][1])&&(s=!0,r=!0),l++;else if("MultiLineString"===o.type)for(var h=0;h<o.coordinates.length;){s=!1;for(var c=0,f=o.coordinates[h];!s&&c<f.length-1;)hu(n.geometry.coordinates[0],n.geometry.coordinates[1],f[c][0],f[c][1],f[c+1][0],f[c+1][1])&&(s=!0,r=!0),c++;h++}else"Polygon"!==o.type&&"MultiPolygon"!==o.type||jt(n,o)&&(r=!0);i++}if(r)return n;for(var g=C([]),v=0;v<e.features.length;v++)g.features=g.features.concat(Xs(e.features[v]).features);return I(eu(n,g).geometry.coordinates)},t.pointToLineDistance=nu,t.pointToPolygonDistance=function t(e,r){var i,o,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=null!=(i=s.method)?i:"geodesic",u=null!=(o=s.units)?o:"kilometers";if(!e)throw new Error("point is required");if(!r)throw new Error("polygon or multi-polygon is required");var l,h=rt(r);if("MultiPolygon"===h.type){var c=h.coordinates.map((function(n){return t(e,S(n),{method:a,units:u})}));return Math.min.apply(Math,p(c.map(Math.abs)))*(jt(e,r)?-1:1)}if(h.coordinates.length>1){var v=h.coordinates.map((function(n){return t(e,S([n]),{method:a,units:u})})),d=n(l=v)||f(l)||_(l)||g(),y=d[0],m=d.slice(1);if(y>=0)return y;var x=Math.min.apply(Math,p(m));return x<0?Math.abs(x):Math.max(-1*x,y)}var E=le(h),k=1/0;return xt(E,(function(t){k=Math.min(k,nu(e,t,{method:a,units:u}))})),jt(e,h)?-k:k},t.points=N,t.pointsWithinPolygon=cu,t.polygon=S,t.polygonSmooth=function(t,e){(e=e||{}).iterations=e.iterations||1;var n=e.iterations,r=[];if(!t)throw new Error("inputPolys is required");return mt(t,(function(t,e,i){if("Polygon"===t.type){for(var o=[[]],s=0;s<n;s++){var a=[],u=t;s>0&&(u=S(o).geometry),mu(u,a),o=a.slice(0)}r.push(S(o,i))}else{if("MultiPolygon"!==t.type)throw new Error("geometry is invalid, must be Polygon or MultiPolygon");for(var l=[[[]]],h=0;h<n;h++){var c=[],f=t;h>0&&(f=R(l).geometry),_u(f,c),l=c.slice(0)}r.push(R(l,i))}})),C(r)},t.polygonTangents=function(t,e){var n,r=Q(t),i=Q(e),o=[],s=[],a=Rt(e),u=0,l=null;switch(r[0]>a[0]&&r[0]<a[2]&&r[1]>a[1]&&r[1]<a[3]&&(u=(l=eu(t,Xs(e))).properties.featureIndex),it(e)){case"Polygon":o=i[0][u],s=i[0][0],null!==l&&l.geometry.coordinates[1]<r[1]&&(s=i[0][u]),n=ku(i[0][0],i[0][i[0].length-1],r);var h=d(xu(i[0],r,n,o,s),2);o=h[0],s=h[1];break;case"MultiPolygon":for(var c=0,f=0,g=0,v=0;v<i[0].length;v++){c=v;for(var p=!1,y=0;y<i[0][v].length;y++){if(f=y,g===u){p=!0;break}g++}if(p)break}o=i[0][c][f],s=i[0][c][f],n=ku(i[0][0][0],i[0][0][i[0][0].length-1],r),i.forEach((function(t){var e=d(xu(t[0],r,n,o,s),2);o=e[0],s=e[1]}))}return C([I(o),I(s)])},t.polygonToLine=le,t.polygonize=function(t){var e=yu.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],r=[];return e.getEdgeRings().filter((function(t){return t.isValid()})).forEach((function(t){t.isHole()?n.push(t):r.push(t)})),n.forEach((function(t){pu.findEdgeRingContaining(t,r)&&r.push(t)})),C(r.map((function(t){return t.toPolygon()})))},t.polygons=M,t.projection=Mu,t.propEach=gt,t.propReduce=vt,t.propertiesContainsFilter=Ui,t.quadratAnalysis=function(t,e){for(var n=(e=e||{}).studyBbox||Rt(t),r=e.confidenceLevel||20,i=t.features,o=i.length,s=Lt(Gt(n)),u=ra(n,Math.sqrt(s/o*2),{units:"meters"}).features,l={},h=0;h<u.length;h++)l[h]={box:Rt(u[h]),cnt:0};var c,f=0,g=a(i);try{for(g.s();!(c=g.n()).done;)for(var v=c.value,d=0,p=Object.keys(l);d<p.length;d++){var y=p[d],m=l[y].box;if(Pu(K(v),m)){l[y].cnt+=1,f+=1;break}}}catch(t){g.e(t)}finally{g.f()}for(var _=0,x=0,E=Object.keys(l);x<E.length;x++){var k=l[E[x]].cnt;k>_&&(_=k)}for(var w=[],b=Object.keys(l).length,I=f/b,N=0,S=0;S<_+1;S++)N+=Math.exp(-I)*Math.pow(I,S)/Cu(S),w.push(N);for(var M=[],L=0,P=0;P<_+1;P++){for(var C=0,T=Object.keys(l);C<T.length;C++){l[T[C]].cnt===P&&(L+=1)}var O=L/b;M.push(O)}for(var R=0,A=0;A<_+1;A++){var D=Math.abs(w[A]-M[A]);D>R&&(R=D)}var F=Lu[r]/Math.sqrt(b),q={criticalValue:F,isRandom:!0,maxAbsoluteDifference:R,observedDistribution:M};return R>F&&(q.isRandom=!1),q},t.radiansToDegrees=z,t.radiansToLength=F,t.random=Bu,t.randomLineString=Fu,t.randomPoint=Au,t.randomPolygon=Du,t.randomPosition=Tu,t.rectangleGrid=na,t.rewind=function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Z(r=r||{}))throw new Error("options is invalid");var i=null!=(e=r.mutate)&&e,o=null!=(n=r.reverse)&&n;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof o)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof i)throw new Error("<mutate> must be a boolean");i||"Point"===t.type||"MultiPoint"===t.type||(t=Ai(t));var s=[];switch(t.type){case"GeometryCollection":return mt(t,(function(t){Yu(t,o)})),t;case"FeatureCollection":return dt(t,(function(t){dt(Yu(t,o),(function(t){s.push(t)}))})),C(s)}return Yu(t,o)},t.rhumbBearing=lt,t.rhumbDestination=Bs,t.rhumbDistance=Gs,t.round=D,t.sample=function(t,e){if(!t)throw new Error("fc is required");if(null==e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");var n=C(function(t,e){var n,r,i=t.slice(0),o=t.length,s=o-e;for(;o-- >s;)n=i[r=Math.floor((o+1)*Math.random())],i[r]=i[o],i[o]=n;return i.slice(s)}(t.features,e));return n},t.sector=function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!Z(i=i||{}))throw new Error("options is invalid");var o=i.properties;if(!t)throw new Error("center is required");if(null==n)throw new Error("bearing1 is required");if(null==r)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!==m(i))throw new Error("options must be an object");if(Xu(n)===Xu(r))return Ri(t,e,i);var s=Q(t),a=La(t,e,n,r,i),u=[[s]];return ct(a,(function(t){u[0].push(t)})),u[0].push(s),S(u,o)},t.segmentEach=kt,t.segmentReduce=wt,t.shortestPath=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!Z(n=n||{}))throw new Error("options is invalid");var r=n.obstacles||C([]),i=n.resolution||100;if(!t)throw new Error("start is required");if(!e)throw new Error("end is required");if(!V(i)||i<=0)throw new Error("options.resolution must be a number, greater than 0");var o=K(t),s=K(e);if(t=I(o),e=I(s),"FeatureCollection"===r.type){if(0===r.features.length)return L([o,s])}else if("Feature"===r.type&&"Polygon"===r.geometry.type)r=C([r]);else{if("Polygon"!==r.type)throw new Error("invalid obstacles");r=C([w(rt(r))])}var a=r;a.features.push(t),a.features.push(e);var u=d(Rt(Uu(Gt(Rt(a)),1.15)),4),l=u[0],h=u[1],c=u[2],f=u[3];a.features.pop(),a.features.pop();for(var g,v,p=ut([l,h],[c,h],n)/i,y=(c-l)/p,m=ut([l,h],[l,f],n)/i,_=(f-h)/m,x=p%1*y/2,E=[],k=[],b=1/0,N=1/0,S=f-m%1*_/2,M=0;S>=h;){for(var P=[],T=[],O=l+x,R=0;O<=c;){var A=I([O,S]),D=Qu(A,r);P.push(D?0:1),T.push(O+"|"+S);var F=ut(A,t);!D&&F<b&&(b=F,g={x:R,y:M});var q=ut(A,e);!D&&q<N&&(N=q,v={x:R,y:M}),O+=y,R++}k.push(P),E.push(T),S-=_,M++}var G=new Wu(k,{diagonal:!0}),B=G.grid[g.y][g.x],Y=G.grid[v.y][v.x],z=Hu.search(G,B,Y),j=[o];return z.forEach((function(t){var e=E[t.x][t.y].split("|");j.push([+e[0],+e[1]])})),j.push(s),Le(L(j))},t.simplify=function(t){var e,n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Z(i=null!=i?i:{}))throw new Error("options is invalid");var o=null!=(e=i.tolerance)?e:1,s=null!=(n=i.highQuality)&&n,a=null!=(r=i.mutate)&&r;if(!t)throw new Error("geojson is required");if(o&&o<0)throw new Error("invalid tolerance");return!0!==a&&(t=Ai(t)),mt(t,(function(t){!function(t,e,n){var r=t.type;if("Point"===r||"MultiPoint"===r)return t;if(Le(t,{mutate:!0}),"GeometryCollection"!==r)switch(r){case"LineString":t.coordinates=nl(t.coordinates,e,n);break;case"MultiLineString":t.coordinates=t.coordinates.map((function(t){return nl(t,e,n)}));break;case"Polygon":t.coordinates=rl(t.coordinates,e,n);break;case"MultiPolygon":t.coordinates=t.coordinates.map((function(t){return rl(t,e,n)}))}}(t,o,s)})),t},t.square=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];if(ut(t.slice(0,2),[r,n])>=ut(t.slice(0,2),[e,i])){var o=(n+i)/2;return[e,o-(r-e)/2,r,o+(r-e)/2]}var s=(e+r)/2;return[s-(i-n)/2,n,s+(i-n)/2,i]},t.squareGrid=ra,t.standardDeviationalEllipse=function(t,e){var n;if(!Z(e=e||{}))throw new Error("options is invalid");var r=e.steps||64,i=e.weight,o=e.properties||{};if(!V(r))throw new Error("steps must be a number");if(!Z(o))throw new Error("properties must be a number");var s=yt(t).length,a=fi(t,{weight:i}),u=0,l=0,h=0;dt(t,(function(t){var e,n=i&&(null==(e=t.properties)?void 0:e[i])||1,r=ol(Q(t),Q(a));u+=Math.pow(r.x,2)*n,l+=Math.pow(r.y,2)*n,h+=r.x*r.y*n}));var c=u-l,f=Math.sqrt(Math.pow(c,2)+4*Math.pow(h,2)),g=2*h,v=Math.atan((c+f)/g),d=180*v/Math.PI,p=0,y=0,m=0;dt(t,(function(t){var e,n=i&&(null==(e=t.properties)?void 0:e[i])||1,r=ol(Q(t),Q(a));p+=Math.pow(r.x*Math.cos(v)-r.y*Math.sin(v),2)*n,y+=Math.pow(r.x*Math.sin(v)+r.y*Math.cos(v),2)*n,m+=n}));var _=Math.sqrt(2*p/m),x=Math.sqrt(2*y/m),E=zs(a,_,x,{units:"degrees",angle:d,steps:r,properties:o}),k=cu(t,C([E])),w={meanCenterCoordinates:Q(a),semiMajorAxis:_,semiMinorAxis:x,numberOfFeatures:s,angle:d,percentageWithinEllipse:100*yt(k).length/s};return E.properties=null!=(n=E.properties)?n:{},E.properties.standardDeviationalEllipse=w,E},t.tag=function(t,e,n,r){return t=Ai(t),e=Ai(e),dt(t,(function(t){t.properties||(t.properties={}),dt(e,(function(e){t.properties&&e.properties&&void 0===t.properties[r]&&jt(t,e)&&(t.properties[r]=e.properties[n])}))})),t},t.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=hl(t.geometry.coordinates):t.geometry.coordinates.forEach((function(t){e.features=e.features.concat(hl(t))})),e},t.tin=ro,t.toMercator=wu,t.toWgs84=bu,t.transformRotate=Ys,t.transformScale=Uu,t.transformTranslate=function(t,e,n,r){if(!Z(r=r||{}))throw new Error("options is invalid");var i=r.units,o=r.zTranslation,s=r.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(null==n||isNaN(n))throw new Error("direction is required");return e<0&&(e=-e,n+=180),!1!==s&&void 0!==s||(t=Ai(t)),ct(t,(function(t){var r=Q(Bs(t,e,n,{units:i}));t[0]=r[0],t[1]=r[1],o&&3===t.length&&(t[2]+=o)})),t},t.triangleGrid=ia,t.truncate=Da,t.union=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];if(mt(t,(function(t){n.push(t.coordinates)})),n.length<2)throw new Error("Must have at least 2 geometries");var r=Cs.apply(As,[n[0]].concat(p(n.slice(1))));return 0===r.length?null:1===r.length?S(r[0],e.properties):R(r,e.properties)},t.unkinkPolygon=function(t){var e=[];return xt(t,(function(t){"Polygon"===t.geometry.type&&dt(gl(t),(function(n){e.push(S(n.geometry.coordinates,t.properties))}))})),C(e)},t.validateBBox=H,t.validateId=W,t.voronoi=function(t,e){if(!Z(e=e||{}))throw new Error("options is invalid");var n=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(n))throw new Error("bbox is invalid");return nt(t,"Point","points"),C(function(){var t=El,e=kl,n=null;function r(r){return new eh(r.map((function(n,i){var o=[Math.round(t(n,i,r)/$l)*$l,Math.round(e(n,i,r)/$l)*$l];return o.index=i,o.data=n,o})),n)}return r.polygons=function(t){return r(t).polygons()},r.links=function(t){return r(t).links()},r.triangles=function(t){return r(t).triangles()},r.x=function(e){return arguments.length?(t="function"==typeof e?e:xl(+e),r):t},r.y=function(t){return arguments.length?(e="function"==typeof t?t:xl(+t),r):e},r.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r}().x((function(t){return t.geometry.coordinates[0]})).y((function(t){return t.geometry.coordinates[1]})).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(t.features).map((function(e,n){return Object.assign(function(t){return(t=t.slice()).push(t[0]),S([t])}(e),{properties:Fi(t.features[n].properties)})})))}}));
</script>
<script>// Turf.js operations module for mapgl
// Shared operations that work with both mapboxgl and maplibre maps

// Process turf operations on map initialization (for static maps)
function processTurfOperationsOnLoad(map, turfOperations, widgetId) {
  if (!turfOperations || turfOperations.length === 0) return;
  
  // Wait for map to be fully loaded, then execute operations
  map.on('load', function() {
    // Add a small delay to ensure all layers are loaded
    setTimeout(function() {
      turfOperations.forEach(function(operation) {
        try {
          handleTurfOperation(map, operation, widgetId);
        } catch (error) {
          console.error(`Error processing turf operation ${operation.type}:`, error);
        }
      });
    }, 100);
  });
}

// Main handler for all turf operations
function handleTurfOperation(map, message, widgetId) {
  try {
    switch (message.type) {
      case "turf_buffer":
        executeTurfBuffer(map, message, widgetId);
        break;
      case "turf_union":
        executeTurfUnion(map, message, widgetId);
        break;
      case "turf_intersect":
        executeTurfIntersect(map, message, widgetId);
        break;
      case "turf_difference":
        executeTurfDifference(map, message, widgetId);
        break;
      case "turf_convex_hull":
        executeTurfConvexHull(map, message, widgetId);
        break;
      case "turf_concave_hull":
        executeTurfConcaveHull(map, message, widgetId);
        break;
      case "turf_voronoi":
        executeTurfVoronoi(map, message, widgetId);
        break;
      case "turf_distance":
        executeTurfDistance(map, message, widgetId);
        break;
      case "turf_area":
        executeTurfArea(map, message, widgetId);
        break;
      case "turf_centroid":
        executeTurfCentroid(map, message, widgetId);
        break;
      case "turf_center_of_mass":
        executeTurfCenterOfMass(map, message, widgetId);
        break;
      case "turf_filter":
        executeTurfFilter(map, message, widgetId);
        break;
      default:
        console.warn(`Unknown turf operation: ${message.type}`);
    }
  } catch (error) {
    console.error(`Error executing turf operation ${message.type}:`, error);
    if (HTMLWidgets.shinyMode && message.send_to_r) {
      Shiny.setInputValue(widgetId + "_turf_error", {
        operation: message.type,
        error: error.message,
        timestamp: Date.now()
      });
    }
  }
}

// Helper function to get input data for turf operations
function getInputData(map, message) {
  // If coordinates provided, create point or points client-side
  if (message.coordinates) {
    // Handle single coordinate pair
    if (typeof message.coordinates[0] === 'number') {
      return turf.point(message.coordinates);
    }
    // Handle multiple coordinate pairs
    if (Array.isArray(message.coordinates[0])) {
      const points = message.coordinates.map(coord => turf.point(coord));
      return {
        type: "FeatureCollection",
        features: points
      };
    }
  }
  
  // If GeoJSON data provided directly
  if (message.data) {
    // Check if data is already an object (shouldn't happen) or string
    if (typeof message.data === 'string') {
      return JSON.parse(message.data);
    } else {
      // If it's already an object, return as-is
      return message.data;
    }
  }
  
  // If layer_id provided, get from existing layer
  if (message.layer_id) {
    return getSourceData(map, message.layer_id);
  }
  
  throw new Error("No valid input data provided (coordinates, data, or layer_id)");
}

// Helper function to get source data from a layer
function getSourceData(map, layerId) {
  // First try to get from existing source
  const source = map.getSource(layerId);
  if (source) {
    // Try serialize() method first (proper API for getting source data)
    if (typeof source.serialize === 'function') {
      const serialized = source.serialize();
      if (serialized && serialized.data) {
        return serialized.data;
      }
    }
    // Check for _data property (GeoJSON sources - may be deprecated)
    if (source._data) {
      return source._data;
    }
    // Check for data property
    if (source.data) {
      return source.data;
    }
  }

  // Try with _source suffix (common pattern in mapgl)
  const sourceWithSuffix = map.getSource(layerId + "_source");
  if (sourceWithSuffix) {
    if (typeof sourceWithSuffix.serialize === 'function') {
      const serialized = sourceWithSuffix.serialize();
      if (serialized && serialized.data) {
        return serialized.data;
      }
    }
    if (sourceWithSuffix._data) {
      return sourceWithSuffix._data;
    }
    if (sourceWithSuffix.data) {
      return sourceWithSuffix.data;
    }
  }

  // Query rendered features as fallback
  try {
    const features = map.queryRenderedFeatures({ layers: [layerId] });
    if (features.length > 0) {
      // Clean features to ensure proper GeoJSON format
      const cleanFeatures = features.map(f => ({
        type: "Feature",
        geometry: f.geometry,
        properties: f.properties || {}
      }));
      return {
        type: "FeatureCollection",
        features: cleanFeatures
      };
    }
  } catch (e) {
    // Layer might not exist, continue to error
  }

  throw new Error(`Could not find source data for layer: ${layerId}`);
}

// Helper function to add result source to map
function addResultSource(map, result, sourceId) {
  if (!sourceId) return;
  
  // Ensure result is valid GeoJSON
  if (!result) {
    result = {
      type: "FeatureCollection",
      features: []
    };
  }
  
  // Check if source exists, update data or create new
  const existingSource = map.getSource(sourceId);
  if (existingSource) {
    // Update existing source data
    existingSource.setData(result);
  } else {
    // Add new source with result data
    map.addSource(sourceId, {
      type: "geojson",
      data: result,
      generateId: true
    });
  }
}

// Helper function to send result to R via Shiny input
function sendResultToR(widgetId, operation, result, metadata = {}, inputId = null) {
  if (HTMLWidgets.shinyMode && inputId) {
    Shiny.setInputValue(widgetId + "_turf_" + inputId, {
      operation: operation,
      result: result,
      metadata: metadata,
      timestamp: Date.now()
    });
  }
}

// Buffer operation
function executeTurfBuffer(map, message, widgetId) {
  const inputData = getInputData(map, message);
  
  const buffered = turf.buffer(inputData, message.radius, {
    units: message.units || "meters"
  });
  
  if (message.source_id) {
    addResultSource(map, buffered, message.source_id);
  }
  
  if (message.input_id) {
    sendResultToR(widgetId, "buffer", buffered, {
      radius: message.radius,
      units: message.units || "meters"
    }, message.input_id);
  }
}

// Union operation
function executeTurfUnion(map, message, widgetId) {
  const inputData = getInputData(map, message);
  
  let result;
  if (inputData.type === "FeatureCollection" && inputData.features.length > 1) {
    // Use turf.union with properly formatted FeatureCollection
    const union = turf.union(turf.featureCollection(inputData.features));
    
    result = union ? {
      type: "FeatureCollection",
      features: [union]
    } : {
      type: "FeatureCollection",
      features: []
    };
  } else if (inputData.type === "FeatureCollection" && inputData.features.length === 1) {
    // Single feature, return as-is
    result = {
      type: "FeatureCollection",
      features: [inputData.features[0]]
    };
  } else {
    // Single feature, return as-is in FeatureCollection
    result = {
      type: "FeatureCollection",
      features: [inputData]
    };
  }
  
  if (message.source_id) {
    addResultSource(map, result, message.source_id);
  }
  
  if (message.input_id) {
    sendResultToR(widgetId, "union", result, {}, message.input_id);
  }
}

// Intersect operation
function executeTurfIntersect(map, message, widgetId) {
  const sourceData1 = getInputData(map, message);
  
  // Get second geometry data
  let sourceData2;
  if (message.data_2) {
    // Handle data_2 directly
    if (typeof message.data_2 === 'string') {
      sourceData2 = JSON.parse(message.data_2);
    } else {
      sourceData2 = message.data_2;
    }
  } else if (message.layer_id_2) {
    // Handle layer_id_2 as before
    sourceData2 = getSourceData(map, message.layer_id_2);
  } else {
    throw new Error("Either data_2 or layer_id_2 must be provided for intersect operation");
  }
  
  // Extract features arrays
  const features1 = sourceData1.type === "FeatureCollection" ? 
    sourceData1.features : [sourceData1];
  const features2 = sourceData2.type === "FeatureCollection" ? 
    sourceData2.features : [sourceData2];
  
  // Collect all intersection results
  const resultFeatures = [];
  
  features1.forEach((feature1, index1) => {
    if (!feature1 || !feature1.geometry) {
      console.warn(`Skipping invalid feature at index ${index1}`);
      return;
    }
    
    features2.forEach((feature2, index2) => {
      if (!feature2 || !feature2.geometry) {
        return;
      }
      
      // Use booleanIntersects for efficient filtering
      if (turf.booleanIntersects(feature1, feature2)) {
        try {
          // Use turf.intersect with options to preserve properties
          const intersection = turf.intersect(
            turf.featureCollection([feature1, feature2]),
            { properties: feature1.properties }
          );
          
          if (intersection) {
            // Ensure properties are preserved (fallback if options didn't work)
            if (!intersection.properties || Object.keys(intersection.properties).length === 0) {
              intersection.properties = { ...feature1.properties };
            }
            resultFeatures.push(intersection);
          }
        } catch (error) {
          console.error(`Error intersecting features ${index1} and ${index2}:`, error);
        }
      }
    });
  });
  
  const result = {
    type: "FeatureCollection",
    features: resultFeatures
  };
  
  if (message.source_id) {
    addResultSource(map, result, message.source_id);
  }
  
  if (message.input_id) {
    sendResultToR(widgetId, "intersect", result, {}, message.input_id);
  }
}

// Difference operation
function executeTurfDifference(map, message, widgetId) {
  const sourceData1 = getInputData(map, message);
  
  // Get second geometry data
  let sourceData2;
  if (message.data_2) {
    // Handle data_2 directly
    if (typeof message.data_2 === 'string') {
      sourceData2 = JSON.parse(message.data_2);
    } else {
      sourceData2 = message.data_2;
    }
  } else if (message.layer_id_2) {
    // Handle layer_id_2 as before
    sourceData2 = getSourceData(map, message.layer_id_2);
  } else {
    throw new Error("Either data_2 or layer_id_2 must be provided for difference operation");
  }
  
  // Extract features arrays
  const features1 = sourceData1.type === "FeatureCollection" ? 
    sourceData1.features : [sourceData1];
  const features2 = sourceData2.type === "FeatureCollection" ? 
    sourceData2.features : [sourceData2];
  
  // Process each feature in features1
  const resultFeatures = [];
  
  features1.forEach((feature1, index) => {
    if (!feature1 || !feature1.geometry) {
      console.warn(`Skipping invalid feature at index ${index}`);
      return;
    }
    
    // Start with the original feature
    let currentFeature = feature1;
    
    // Apply difference with each feature from features2
    for (const feature2 of features2) {
      if (!feature2 || !feature2.geometry || !currentFeature) {
        continue;
      }
      
      // Use booleanIntersects for efficient filtering
      if (turf.booleanIntersects(currentFeature, feature2)) {
        try {
          const diff = turf.difference(turf.featureCollection([currentFeature, feature2]));
          
          if (diff) {
            // Preserve properties from the original feature
            diff.properties = { ...feature1.properties };
            currentFeature = diff;
          } else {
            // Feature was completely erased
            currentFeature = null;
            break;
          }
        } catch (error) {
          console.error("Error in difference operation:", error);
          // Keep the current feature unchanged on error
        }
      }
      // If no intersection, currentFeature remains unchanged
    }
    
    // Add the result if it still exists
    if (currentFeature) {
      resultFeatures.push(currentFeature);
    }
  });
  
  const result = {
    type: "FeatureCollection",
    features: resultFeatures
  };
  
  if (message.source_id) {
    addResultSource(map, result, message.source_id);
  }
  
  if (message.input_id) {
    sendResultToR(widgetId, "difference", result, {}, message.input_id);
  }
}

// Convex hull operation
function executeTurfConvexHull(map, message, widgetId) {
  const inputData = getInputData(map, message);
  
  // Ensure we have valid input data
  if (!inputData) {
    console.warn("No input data for convex hull");
    const result = {
      type: "FeatureCollection",
      features: []
    };
    if (message.source_id) {
      addResultSource(map, result, message.source_id);
    }
    return;
  }
  
  // Check for minimum points if it's a FeatureCollection
  if (inputData.type === "FeatureCollection" && inputData.features.length < 3) {
    console.warn("Convex hull requires at least 3 points, got:", inputData.features.length);
    const result = {
      type: "FeatureCollection",
      features: []
    };
    if (message.source_id) {
      addResultSource(map, result, message.source_id);
    }
    return;
  }
  
  const hull = turf.convex(inputData);
  
  const result = hull ? {
    type: "FeatureCollection",
    features: [hull]
  } : {
    type: "FeatureCollection",
    features: []
  };
  
  if (message.source_id) {
    addResultSource(map, result, message.source_id);
  }
  
  if (message.input_id) {
    sendResultToR(widgetId, "convex_hull", result, {}, message.input_id);
  }
}

// Concave hull operation
function executeTurfConcaveHull(map, message, widgetId) {
  const inputData = getInputData(map, message);
  
  // Ensure we have a FeatureCollection of Points for turf.concave
  let pointCollection;
  if (inputData.type === "FeatureCollection") {
    // Filter to only Point geometries and ensure it's a proper FeatureCollection
    const pointFeatures = inputData.features.filter(feature => 
      feature.geometry && feature.geometry.type === "Point"
    );
    pointCollection = turf.featureCollection(pointFeatures);
  } else if (inputData.type === "Feature" && inputData.geometry.type === "Point") {
    // Single point - wrap in FeatureCollection
    pointCollection = turf.featureCollection([inputData]);
  } else {
    console.warn("Concave hull requires Point geometries, received:", inputData);
    const result = {
      type: "FeatureCollection",
      features: []
    };
    if (message.source_id) {
      addResultSource(map, result, message.source_id);
    }
    return;
  }
  
  // Check if we have enough points (need at least 3 for a hull)
  if (!pointCollection.features || pointCollection.features.length < 3) {
    console.warn("Concave hull requires at least 3 points, got:", pointCollection.features?.length || 0);
    const result = {
      type: "FeatureCollection",
      features: []
    };
    if (message.source_id) {
      addResultSource(map, result, message.source_id);
    }
    return;
  }
  
  // Smart max_edge calculation with fallback
  let hull = null;
  let actualMaxEdge = message.max_edge;
  
  if (message.max_edge) {
    // User specified max_edge, try it first
    hull = turf.concave(pointCollection, {
      maxEdge: message.max_edge,
      units: message.units || "kilometers"
    });
  }
  
  // If no hull or user didn't specify max_edge, try to find optimal value
  if (!hull) {
    // Calculate distances between all points to find reasonable max_edge
    const distances = [];
    const features = pointCollection.features;
    
    for (let i = 0; i < features.length; i++) {
      for (let j = i + 1; j < features.length; j++) {
        const dist = turf.distance(features[i], features[j], {
          units: message.units || "kilometers"
        });
        distances.push(dist);
      }
    }
    
    // Sort distances and try different percentiles as max_edge
    distances.sort((a, b) => a - b);
    const percentiles = [0.6, 0.7, 0.8, 0.9]; // Try 60th, 70th, 80th, 90th percentiles
    
    for (const percentile of percentiles) {
      const index = Math.floor(distances.length * percentile);
      const testMaxEdge = distances[index];
      
      hull = turf.concave(pointCollection, {
        maxEdge: testMaxEdge,
        units: message.units || "kilometers"
      });
      
      if (hull) {
        actualMaxEdge = testMaxEdge;
        console.log(`Auto-calculated max_edge: ${testMaxEdge.toFixed(2)} ${message.units || "kilometers"}`);
        break;
      }
    }
    
    // Final fallback - use convex hull if concave fails
    if (!hull) {
      console.warn("Concave hull failed, falling back to convex hull");
      hull = turf.convex(pointCollection);
      actualMaxEdge = "convex_fallback";
    }
  }
  
  const result = hull ? {
    type: "FeatureCollection",
    features: [hull]
  } : {
    type: "FeatureCollection",
    features: []
  };
  
  if (message.source_id) {
    addResultSource(map, result, message.source_id);
  }
  
  if (message.input_id) {
    sendResultToR(widgetId, "concave_hull", result, {
      max_edge: message.max_edge,
      units: message.units || "kilometers"
    }, message.input_id);
  }
}

// Voronoi operation
function executeTurfVoronoi(map, message, widgetId) {
  const inputData = getInputData(map, message);
  
  const options = {};
  let finalBbox = null;
  let clippingData = null;
  
  // Handle bbox parameter
  if (message.bbox) {
    // Direct bbox array [minX, minY, maxX, maxY]
    options.bbox = message.bbox;
    finalBbox = message.bbox;
  } else if (message.bbox_layer_id) {
    // Extract bbox from layer
    try {
      const bboxSourceData = getSourceData(map, message.bbox_layer_id);
      if (bboxSourceData) {
        // Calculate bbox from layer data
        const bbox = turf.bbox(bboxSourceData);
        options.bbox = bbox;
        finalBbox = bbox;
        // Keep the layer data for potential intersection clipping
        clippingData = bboxSourceData;
      }
    } catch (error) {
      console.warn(`Could not extract bbox from layer ${message.bbox_layer_id}:`, error);
    }
  }
  
  let voronoi = turf.voronoi(inputData, options);
  
  // If we have clipping data (from bbox_layer_id), intersect each Voronoi polygon
  if (voronoi && clippingData && clippingData.type === "FeatureCollection") {
    const clippedFeatures = [];
    
    for (const voronoiFeature of voronoi.features) {
      try {
        // Try to intersect with each feature in the clipping layer
        for (const clipFeature of clippingData.features) {
          const intersection = turf.intersect(turf.featureCollection([voronoiFeature, clipFeature]));
          if (intersection) {
            clippedFeatures.push(intersection);
          }
        }
      } catch (error) {
        // If intersection fails, keep original feature
        clippedFeatures.push(voronoiFeature);
      }
    }
    
    voronoi = {
      type: "FeatureCollection",
      features: clippedFeatures
    };
  }
  
  // If property parameter is provided, use turf.collect to transfer attributes from points to polygons
  if (voronoi && message.property && inputData.type === "FeatureCollection") {
    try {
      // Use turf.collect to gather point properties within each Voronoi polygon
      const collected = turf.collect(voronoi, inputData, message.property, `${message.property}_collected`);
      
      // Since each Voronoi polygon should contain exactly one point, extract the single value from the array
      for (const feature of collected.features) {
        const collectedValues = feature.properties[`${message.property}_collected`];
        if (collectedValues && collectedValues.length > 0) {
          // Take the first (and should be only) value and assign it directly to the property name
          feature.properties[message.property] = collectedValues[0];
          // Remove the temporary array property
          delete feature.properties[`${message.property}_collected`];
        }
      }
      
      voronoi = collected;
    } catch (error) {
      console.warn(`Failed to collect property '${message.property}' from points to Voronoi polygons:`, error);
      // Continue with uncollected voronoi if collection fails
    }
  }
  
  if (message.source_id && voronoi) {
    addResultSource(map, voronoi, message.source_id);
  }
  
  if (message.input_id) {
    sendResultToR(widgetId, "voronoi", voronoi, {
      bbox: finalBbox,
      bbox_layer_id: message.bbox_layer_id
    }, message.input_id);
  }
}

// Distance operation
function executeTurfDistance(map, message, widgetId) {
  let feature1, feature2;
  
  // Get first feature
  if (message.coordinates) {
    feature1 = turf.point(message.coordinates);
  } else if (message.data) {
    const sourceData1 = JSON.parse(message.data);
    feature1 = sourceData1.type === "FeatureCollection" ? 
      sourceData1.features[0] : sourceData1;
  } else if (message.layer_id) {
    const sourceData1 = getSourceData(map, message.layer_id);
    feature1 = sourceData1.type === "FeatureCollection" ? 
      sourceData1.features[0] : sourceData1;
  }
  
  // Get second feature
  if (message.coordinates_2) {
    feature2 = turf.point(message.coordinates_2);
  } else if (message.layer_id_2) {
    const sourceData2 = getSourceData(map, message.layer_id_2);
    feature2 = sourceData2.type === "FeatureCollection" ? 
      sourceData2.features[0] : sourceData2;
  }
  
  const distance = turf.distance(feature1, feature2, {
    units: message.units || "kilometers"
  });
  
  if (message.input_id) {
    sendResultToR(widgetId, "distance", distance, {
      units: message.units || "kilometers"
    }, message.input_id);
  }
}

// Area operation
function executeTurfArea(map, message, widgetId) {
  const inputData = getInputData(map, message);
  
  const area = turf.area(inputData);
  
  if (message.input_id) {
    sendResultToR(widgetId, "area", area, {
      units: "square_meters"
    }, message.input_id);
  }
}

// Centroid operation (using turf.centroid - vertex average method)
function executeTurfCentroid(map, message, widgetId) {
  const inputData = getInputData(map, message);
  
  const centroids = [];
  
  // Handle both single features and FeatureCollections
  const features = inputData.type === "FeatureCollection" ? inputData.features : [inputData];
  
  // Calculate centroid for each individual feature using turf.centroid
  for (const feature of features) {
    const centroid = turf.centroid(feature);
    
    // Preserve all properties from the source feature
    if (feature.properties) {
      centroid.properties = { ...feature.properties };
    }
    
    centroids.push(centroid);
  }
  
  const result = {
    type: "FeatureCollection",
    features: centroids
  };
  
  if (message.source_id) {
    addResultSource(map, result, message.source_id);
  }
  
  if (message.input_id) {
    sendResultToR(widgetId, "centroid", result, {}, message.input_id);
  }
}

// Center of Mass operation (replaces centroid for better accuracy)
function executeTurfCenterOfMass(map, message, widgetId) {
  const inputData = getInputData(map, message);
  
  const centers = [];
  
  // Handle both single features and FeatureCollections
  const features = inputData.type === "FeatureCollection" ? inputData.features : [inputData];
  
  // Calculate center of mass for each individual feature
  for (const feature of features) {
    const centerOfMass = turf.centerOfMass(feature, {});
    
    // Preserve all properties from the source feature
    if (feature.properties) {
      centerOfMass.properties = { ...feature.properties };
    }
    
    centers.push(centerOfMass);
  }
  
  const result = {
    type: "FeatureCollection",
    features: centers
  };
  
  if (message.source_id) {
    addResultSource(map, result, message.source_id);
  }
  
  if (message.input_id) {
    sendResultToR(widgetId, "center_of_mass", result, {}, message.input_id);
  }
}

// Filter operation
function executeTurfFilter(map, message, widgetId) {
  const sourceData = getInputData(map, message);
  
  // Get filter geometry data
  let filterData;
  if (message.filter_data) {
    // Handle filter_data directly
    if (typeof message.filter_data === 'string') {
      filterData = JSON.parse(message.filter_data);
    } else {
      filterData = message.filter_data;
    }
  } else if (message.filter_layer_id) {
    // Handle filter_layer_id as before
    filterData = getSourceData(map, message.filter_layer_id);
  } else {
    throw new Error("Either filter_data or filter_layer_id must be provided for filter operation");
  }
  
  // Extract features arrays
  const features = sourceData.type === "FeatureCollection" ? 
    sourceData.features : [sourceData];
  const filterFeatures = filterData.type === "FeatureCollection" ? 
    filterData.features : [filterData];
  
  // Collect filtered results
  const resultFeatures = [];
  
  features.forEach((feature, index) => {
    if (!feature || !feature.geometry) {
      console.warn(`Skipping invalid feature at index ${index}`);
      return;
    }
    
    // Check if this feature matches the predicate against any filter feature
    let matches = false;
    
    for (const filterFeature of filterFeatures) {
      if (!filterFeature || !filterFeature.geometry) {
        continue;
      }
      
      try {
        // Handle MultiPolygon geometries for within/contains predicates
        if ((feature.geometry.type === 'MultiPolygon' || filterFeature.geometry.type === 'MultiPolygon') &&
            (message.predicate === 'within' || message.predicate === 'contains')) {
          
          // MultiPolygon handling for 'within'
          if (message.predicate === 'within') {
            if (feature.geometry.type === 'MultiPolygon') {
              // All parts of the MultiPolygon must be within the filter
              const polygons = feature.geometry.coordinates.map(coords => ({
                type: 'Feature',
                geometry: { type: 'Polygon', coordinates: coords },
                properties: feature.properties
              }));
              matches = polygons.every(poly => {
                try {
                  return turf.booleanWithin(poly, filterFeature);
                } catch (e) {
                  return false;
                }
              });
            } else if (filterFeature.geometry.type === 'MultiPolygon') {
              // Feature must be within at least one part of the MultiPolygon
              const polygons = filterFeature.geometry.coordinates.map(coords => ({
                type: 'Feature',
                geometry: { type: 'Polygon', coordinates: coords },
                properties: filterFeature.properties
              }));
              matches = polygons.some(poly => {
                try {
                  return turf.booleanWithin(feature, poly);
                } catch (e) {
                  return false;
                }
              });
            }
          }
          // MultiPolygon handling for 'contains'
          else if (message.predicate === 'contains') {
            if (feature.geometry.type === 'MultiPolygon') {
              // At least one part of the MultiPolygon must contain the filter
              const polygons = feature.geometry.coordinates.map(coords => ({
                type: 'Feature',
                geometry: { type: 'Polygon', coordinates: coords },
                properties: feature.properties
              }));
              matches = polygons.some(poly => {
                try {
                  return turf.booleanContains(poly, filterFeature);
                } catch (e) {
                  return false;
                }
              });
            } else if (filterFeature.geometry.type === 'MultiPolygon') {
              // Feature must be contained by at least one part of the MultiPolygon
              const polygons = filterFeature.geometry.coordinates.map(coords => ({
                type: 'Feature',
                geometry: { type: 'Polygon', coordinates: coords },
                properties: filterFeature.properties
              }));
              matches = polygons.some(poly => {
                try {
                  return turf.booleanContains(poly, feature);
                } catch (e) {
                  return false;
                }
              });
            }
          }
        } else {
          // Use the appropriate boolean function based on predicate
          switch (message.predicate) {
            case "intersects":
              matches = turf.booleanIntersects(feature, filterFeature);
              break;
            case "within":
              matches = turf.booleanWithin(feature, filterFeature);
              break;
            case "contains":
              matches = turf.booleanContains(feature, filterFeature);
              break;
            case "crosses":
              matches = turf.booleanCrosses(feature, filterFeature);
              break;
            case "disjoint":
              matches = turf.booleanDisjoint(feature, filterFeature);
              break;
            default:
              console.warn(`Unknown predicate: ${message.predicate}`);
              continue;
          }
        }
        
        if (matches) {
          break; // Found a match, no need to check other filter features
        }
      } catch (error) {
        console.error(`Error testing predicate ${message.predicate}:`, error);
        continue;
      }
    }
    
    // If this feature matches the predicate, add it to results
    if (matches) {
      // Preserve all properties from the original feature
      const resultFeature = {
        ...feature,
        properties: { ...feature.properties }
      };
      resultFeatures.push(resultFeature);
    }
  });
  
  const result = {
    type: "FeatureCollection",
    features: resultFeatures
  };
  
  if (message.source_id) {
    addResultSource(map, result, message.source_id);
  }
  
  if (message.input_id) {
    sendResultToR(widgetId, "filter", result, { 
      predicate: message.predicate,
      filtered_count: resultFeatures.length,
      total_count: features.length 
    }, message.input_id);
  }
}</script>
<script>/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 */
!function(A,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(A="undefined"!=typeof globalThis?globalThis:A||self).html2canvas=e()}(this,function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var r=function(A,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,e){A.__proto__=e}||function(A,e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(A[t]=e[t])})(A,e)};function A(A,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=A}r(A,e),A.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}var h=function(){return(h=Object.assign||function(A){for(var e,t=1,r=arguments.length;t<r;t++)for(var B in e=arguments[t])Object.prototype.hasOwnProperty.call(e,B)&&(A[B]=e[B]);return A}).apply(this,arguments)};function a(A,s,o,i){return new(o=o||Promise)(function(t,e){function r(A){try{n(i.next(A))}catch(A){e(A)}}function B(A){try{n(i.throw(A))}catch(A){e(A)}}function n(A){var e;A.done?t(A.value):((e=A.value)instanceof o?e:new o(function(A){A(e)})).then(r,B)}n((i=i.apply(A,s||[])).next())})}function H(t,r){var B,n,s,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},A={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(A[Symbol.iterator]=function(){return this}),A;function e(e){return function(A){return function(e){if(B)throw new TypeError("Generator is already executing.");for(;o;)try{if(B=1,n&&(s=2&e[0]?n.return:e[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,e[1])).done)return s;switch(n=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return o.label++,{value:e[1],done:!1};case 5:o.label++,n=e[1],e=[0];continue;case 7:e=o.ops.pop(),o.trys.pop();continue;default:if(!(s=0<(s=o.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){o=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){o.label=e[1];break}if(6===e[0]&&o.label<s[1]){o.label=s[1],s=e;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(e);break}s[2]&&o.ops.pop(),o.trys.pop();continue}e=r.call(t,o)}catch(A){e=[6,A],n=0}finally{B=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,A])}}}function t(A,e,t){if(t||2===arguments.length)for(var r,B=0,n=e.length;B<n;B++)!r&&B in e||((r=r||Array.prototype.slice.call(e,0,B))[B]=e[B]);return A.concat(r||e)}var d=(B.prototype.add=function(A,e,t,r){return new B(this.left+A,this.top+e,this.width+t,this.height+r)},B.fromClientRect=function(A,e){return new B(e.left+A.windowBounds.left,e.top+A.windowBounds.top,e.width,e.height)},B.fromDOMRectList=function(A,e){e=Array.from(e).find(function(A){return 0!==A.width});return e?new B(e.left+A.windowBounds.left,e.top+A.windowBounds.top,e.width,e.height):B.EMPTY},B.EMPTY=new B(0,0,0,0),B);function B(A,e,t,r){this.left=A,this.top=e,this.width=t,this.height=r}for(var f=function(A,e){return d.fromClientRect(A,e.getBoundingClientRect())},Q=function(A){for(var e=[],t=0,r=A.length;t<r;){var B,n=A.charCodeAt(t++);55296<=n&&n<=56319&&t<r?56320==(64512&(B=A.charCodeAt(t++)))?e.push(((1023&n)<<10)+(1023&B)+65536):(e.push(n),t--):e.push(n)}return e},g=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,A);var t=A.length;if(!t)return"";for(var r=[],B=-1,n="";++B<t;){var s=A[B];s<=65535?r.push(s):(s-=65536,r.push(55296+(s>>10),s%1024+56320)),(B+1===t||16384<r.length)&&(n+=String.fromCharCode.apply(String,r),r.length=0)}return n},e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="undefined"==typeof Uint8Array?[]:new Uint8Array(256),s=0;s<e.length;s++)n[e.charCodeAt(s)]=s;for(var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c="undefined"==typeof Uint8Array?[]:new Uint8Array(256),i=0;i<o.length;i++)c[o.charCodeAt(i)]=i;function w(A,e,t){return A.slice?A.slice(e,t):new Uint16Array(Array.prototype.slice.call(A,e,t))}var U=(l.prototype.get=function(A){var e;if(0<=A){if(A<55296||56319<A&&A<=65535)return e=this.index[A>>5],this.data[e=(e<<2)+(31&A)];if(A<=65535)return e=this.index[2048+(A-55296>>5)],this.data[e=(e<<2)+(31&A)];if(A<this.highStart)return e=this.index[e=2080+(A>>11)],e=this.index[e+=A>>5&63],this.data[e=(e<<2)+(31&A)];if(A<=1114111)return this.data[this.highValueIndex]}return this.errorValue},l);function l(A,e,t,r,B,n){this.initialValue=A,this.errorValue=e,this.highStart=t,this.highValueIndex=r,this.index=B,this.data=n}for(var C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u="undefined"==typeof Uint8Array?[]:new Uint8Array(256),F=0;F<C.length;F++)u[C.charCodeAt(F)]=F;function p(A,e,t,r){var B=r[t];if(Array.isArray(A)?-1!==A.indexOf(B):A===B)for(var n=t;n<=r.length;){if((o=r[++n])===e)return 1;if(o!==D)break}if(B===D)for(n=t;0<n;){var s=r[--n];if(Array.isArray(A)?-1!==A.indexOf(s):A===s)for(var o,i=t;i<=r.length;){if((o=r[++i])===e)return 1;if(o!==D)break}if(s!==D)break}}function E(A,e){for(var t=A;0<=t;){var r=e[t];if(r!==D)return r;t--}return 0}function I(t,A){var e=(B=function(A,r){void 0===r&&(r="strict");var B=[],n=[],s=[];return A.forEach(function(A,e){var t=rA.get(A);if(50<t?(s.push(!0),t-=50):s.push(!1),-1!==["normal","auto","loose"].indexOf(r)&&-1!==[8208,8211,12316,12448].indexOf(A))return n.push(e),B.push(16);if(4!==t&&11!==t)return n.push(e),31===t?B.push("strict"===r?O:q):t===AA||29===t?B.push(J):43===t?131072<=A&&A<=196605||196608<=A&&A<=262141?B.push(q):B.push(J):void B.push(t);if(0===e)return n.push(e),B.push(J);t=B[e-1];return-1===iA.indexOf(t)?(n.push(n[e-1]),B.push(t)):(n.push(e),B.push(J))}),[n,B,s]}(t,(A=A||{lineBreak:"normal",wordBreak:"normal"}).lineBreak))[0],r=B[1],B=B[2];return[e,r="break-all"===A.wordBreak||"break-word"===A.wordBreak?r.map(function(A){return-1!==[R,J,AA].indexOf(A)?q:A}):r,"keep-all"===A.wordBreak?B.map(function(A,e){return A&&19968<=t[e]&&t[e]<=40959}):void 0]}var y,K,m,L,b,D=10,v=13,x=15,M=17,S=18,T=19,G=20,O=21,V=22,k=24,R=25,N=26,P=27,X=28,J=30,Y=32,W=33,Z=34,_=35,q=37,j=38,z=39,$=40,AA=42,eA=[9001,65288],tA="",rA=(m=function(A){var e,t,r,B,n=.75*A.length,s=A.length,o=0;"="===A[A.length-1]&&(n--,"="===A[A.length-2]&&n--);for(var n=new("undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?ArrayBuffer:Array)(n),i=Array.isArray(n)?n:new Uint8Array(n),Q=0;Q<s;Q+=4)e=c[A.charCodeAt(Q)],t=c[A.charCodeAt(Q+1)],r=c[A.charCodeAt(Q+2)],B=c[A.charCodeAt(Q+3)],i[o++]=e<<2|t>>4,i[o++]=(15&t)<<4|r>>2,i[o++]=(3&r)<<6|63&B;return n}(y="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),L=Array.isArray(m)?function(A){for(var e=A.length,t=[],r=0;r<e;r+=4)t.push(A[r+3]<<24|A[r+2]<<16|A[r+1]<<8|A[r]);return t}(m):new Uint32Array(m),b=Array.isArray(m)?function(A){for(var e=A.length,t=[],r=0;r<e;r+=2)t.push(A[r+1]<<8|A[r]);return t}(m):new Uint16Array(m),y=w(b,12,L[4]/2),K=2===L[5]?w(b,(24+L[4])/2):(m=L,b=Math.ceil((24+L[4])/4),m.slice?m.slice(b,K):new Uint32Array(Array.prototype.slice.call(m,b,K))),new U(L[0],L[1],L[2],L[3],y,K)),BA=[J,36],nA=[1,2,3,5],sA=[D,8],oA=[P,N],iA=nA.concat(sA),QA=[j,z,$,Z,_],cA=[x,v],aA=(gA.prototype.slice=function(){return g.apply(void 0,this.codePoints.slice(this.start,this.end))},gA);function gA(A,e,t,r){this.codePoints=A,this.required="!"===e,this.start=t,this.end=r}function wA(A,e){var t=Q(A),r=(e=I(t,e))[0],B=e[1],n=e[2],s=t.length,o=0,i=0;return{next:function(){if(s<=i)return{done:!0,value:null};for(var A=tA;i<s&&(A=function(A,e,t,r,B){if(0===t[r])return tA;var n=r-1;if(Array.isArray(B)&&!0===B[n])return tA;var s=n-1,o=1+n,i=e[n],r=0<=s?e[s]:0,B=e[o];if(2===i&&3===B)return tA;if(-1!==nA.indexOf(i))return"!";if(-1!==nA.indexOf(B))return tA;if(-1!==sA.indexOf(B))return tA;if(8===E(n,e))return"";if(11===rA.get(A[n]))return tA;if((i===Y||i===W)&&11===rA.get(A[o]))return tA;if(7===i||7===B)return tA;if(9===i)return tA;if(-1===[D,v,x].indexOf(i)&&9===B)return tA;if(-1!==[M,S,T,k,X].indexOf(B))return tA;if(E(n,e)===V)return tA;if(p(23,V,n,e))return tA;if(p([M,S],O,n,e))return tA;if(p(12,12,n,e))return tA;if(i===D)return"";if(23===i||23===B)return tA;if(16===B||16===i)return"";if(-1!==[v,x,O].indexOf(B)||14===i)return tA;if(36===r&&-1!==cA.indexOf(i))return tA;if(i===X&&36===B)return tA;if(B===G)return tA;if(-1!==BA.indexOf(B)&&i===R||-1!==BA.indexOf(i)&&B===R)return tA;if(i===P&&-1!==[q,Y,W].indexOf(B)||-1!==[q,Y,W].indexOf(i)&&B===N)return tA;if(-1!==BA.indexOf(i)&&-1!==oA.indexOf(B)||-1!==oA.indexOf(i)&&-1!==BA.indexOf(B))return tA;if(-1!==[P,N].indexOf(i)&&(B===R||-1!==[V,x].indexOf(B)&&e[1+o]===R)||-1!==[V,x].indexOf(i)&&B===R||i===R&&-1!==[R,X,k].indexOf(B))return tA;if(-1!==[R,X,k,M,S].indexOf(B))for(var Q=n;0<=Q;){if((c=e[Q])===R)return tA;if(-1===[X,k].indexOf(c))break;Q--}if(-1!==[P,N].indexOf(B))for(var c,Q=-1!==[M,S].indexOf(i)?s:n;0<=Q;){if((c=e[Q])===R)return tA;if(-1===[X,k].indexOf(c))break;Q--}if(j===i&&-1!==[j,z,Z,_].indexOf(B)||-1!==[z,Z].indexOf(i)&&-1!==[z,$].indexOf(B)||-1!==[$,_].indexOf(i)&&B===$)return tA;if(-1!==QA.indexOf(i)&&-1!==[G,N].indexOf(B)||-1!==QA.indexOf(B)&&i===P)return tA;if(-1!==BA.indexOf(i)&&-1!==BA.indexOf(B))return tA;if(i===k&&-1!==BA.indexOf(B))return tA;if(-1!==BA.concat(R).indexOf(i)&&B===V&&-1===eA.indexOf(A[o])||-1!==BA.concat(R).indexOf(B)&&i===S)return tA;if(41===i&&41===B){for(var a=t[n],g=1;0<a&&41===e[--a];)g++;if(g%2!=0)return tA}return i===Y&&B===W?tA:""}(t,B,r,++i,n))===tA;);if(A===tA&&i!==s)return{done:!0,value:null};var e=new aA(t,A,o,i);return o=i,{value:e,done:!1}}}}function UA(A){return 48<=A&&A<=57}function lA(A){return UA(A)||65<=A&&A<=70||97<=A&&A<=102}function CA(A){return 10===A||9===A||32===A}function uA(A){return 97<=(t=e=A)&&t<=122||65<=(e=e)&&e<=90||128<=A||95===A;var e,t}function FA(A){return uA(A)||UA(A)||45===A}function hA(A,e){return 92===A&&10!==e}function dA(A,e,t){return 45===A?uA(e)||hA(e,t):!!uA(A)||92===A&&10!==e}function fA(A,e,t){return 43===A||45===A?!!UA(e)||46===e&&UA(t):UA(46===A?e:A)}var HA={type:2},pA={type:3},EA={type:4},IA={type:13},yA={type:8},KA={type:21},mA={type:9},LA={type:10},bA={type:11},DA={type:12},vA={type:14},xA={type:23},MA={type:1},SA={type:25},TA={type:24},GA={type:26},OA={type:27},VA={type:28},kA={type:29},RA={type:31},NA={type:32},PA=(XA.prototype.write=function(A){this._value=this._value.concat(Q(A))},XA.prototype.read=function(){for(var A=[],e=this.consumeToken();e!==NA;)A.push(e),e=this.consumeToken();return A},XA.prototype.consumeToken=function(){var A=this.consumeCodePoint();switch(A){case 34:return this.consumeStringToken(34);case 35:var e=this.peekCodePoint(0),t=this.peekCodePoint(1),r=this.peekCodePoint(2);if(FA(e)||hA(t,r)){var B=dA(e,t,r)?2:1;return{type:5,value:this.consumeName(),flags:B}}break;case 36:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),IA;break;case 39:return this.consumeStringToken(39);case 40:return HA;case 41:return pA;case 42:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),vA;break;case 43:if(fA(A,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(A),this.consumeNumericToken();break;case 44:return EA;case 45:var r=A,B=this.peekCodePoint(0),n=this.peekCodePoint(1);if(fA(r,B,n))return this.reconsumeCodePoint(A),this.consumeNumericToken();if(dA(r,B,n))return this.reconsumeCodePoint(A),this.consumeIdentLikeToken();if(45===B&&62===n)return this.consumeCodePoint(),this.consumeCodePoint(),TA;break;case 46:if(fA(A,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(A),this.consumeNumericToken();break;case 47:if(42===this.peekCodePoint(0))for(this.consumeCodePoint();;){var s=this.consumeCodePoint();if(42===s&&47===(s=this.consumeCodePoint()))return this.consumeToken();if(-1===s)return this.consumeToken()}break;case 58:return GA;case 59:return OA;case 60:if(33===this.peekCodePoint(0)&&45===this.peekCodePoint(1)&&45===this.peekCodePoint(2))return this.consumeCodePoint(),this.consumeCodePoint(),SA;break;case 64:var n=this.peekCodePoint(0),o=this.peekCodePoint(1),i=this.peekCodePoint(2);if(dA(n,o,i))return{type:7,value:this.consumeName()};break;case 91:return VA;case 92:if(hA(A,this.peekCodePoint(0)))return this.reconsumeCodePoint(A),this.consumeIdentLikeToken();break;case 93:return kA;case 61:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),yA;break;case 123:return bA;case 125:return DA;case 117:case 85:o=this.peekCodePoint(0),i=this.peekCodePoint(1);return 43!==o||!lA(i)&&63!==i||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(A),this.consumeIdentLikeToken();case 124:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),mA;if(124===this.peekCodePoint(0))return this.consumeCodePoint(),KA;break;case 126:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),LA;break;case-1:return NA}return CA(A)?(this.consumeWhiteSpace(),RA):UA(A)?(this.reconsumeCodePoint(A),this.consumeNumericToken()):uA(A)?(this.reconsumeCodePoint(A),this.consumeIdentLikeToken()):{type:6,value:g(A)}},XA.prototype.consumeCodePoint=function(){var A=this._value.shift();return void 0===A?-1:A},XA.prototype.reconsumeCodePoint=function(A){this._value.unshift(A)},XA.prototype.peekCodePoint=function(A){return A>=this._value.length?-1:this._value[A]},XA.prototype.consumeUnicodeRangeToken=function(){for(var A=[],e=this.consumeCodePoint();lA(e)&&A.length<6;)A.push(e),e=this.consumeCodePoint();for(var t=!1;63===e&&A.length<6;)A.push(e),e=this.consumeCodePoint(),t=!0;if(t)return{type:30,start:parseInt(g.apply(void 0,A.map(function(A){return 63===A?48:A})),16),end:parseInt(g.apply(void 0,A.map(function(A){return 63===A?70:A})),16)};var r=parseInt(g.apply(void 0,A),16);if(45===this.peekCodePoint(0)&&lA(this.peekCodePoint(1))){this.consumeCodePoint();for(var e=this.consumeCodePoint(),B=[];lA(e)&&B.length<6;)B.push(e),e=this.consumeCodePoint();return{type:30,start:r,end:parseInt(g.apply(void 0,B),16)}}return{type:30,start:r,end:r}},XA.prototype.consumeIdentLikeToken=function(){var A=this.consumeName();return"url"===A.toLowerCase()&&40===this.peekCodePoint(0)?(this.consumeCodePoint(),this.consumeUrlToken()):40===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:19,value:A}):{type:20,value:A}},XA.prototype.consumeUrlToken=function(){var A=[];if(this.consumeWhiteSpace(),-1===this.peekCodePoint(0))return{type:22,value:""};var e,t=this.peekCodePoint(0);if(39===t||34===t){t=this.consumeStringToken(this.consumeCodePoint());return 0===t.type&&(this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0))?(this.consumeCodePoint(),{type:22,value:t.value}):(this.consumeBadUrlRemnants(),xA)}for(;;){var r=this.consumeCodePoint();if(-1===r||41===r)return{type:22,value:g.apply(void 0,A)};if(CA(r))return this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:22,value:g.apply(void 0,A)}):(this.consumeBadUrlRemnants(),xA);if(34===r||39===r||40===r||(0<=(e=r)&&e<=8||11===e||14<=e&&e<=31||127===e))return this.consumeBadUrlRemnants(),xA;if(92===r){if(!hA(r,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),xA;A.push(this.consumeEscapedCodePoint())}else A.push(r)}},XA.prototype.consumeWhiteSpace=function(){for(;CA(this.peekCodePoint(0));)this.consumeCodePoint()},XA.prototype.consumeBadUrlRemnants=function(){for(;;){var A=this.consumeCodePoint();if(41===A||-1===A)return;hA(A,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},XA.prototype.consumeStringSlice=function(A){for(var e="";0<A;){var t=Math.min(5e4,A);e+=g.apply(void 0,this._value.splice(0,t)),A-=t}return this._value.shift(),e},XA.prototype.consumeStringToken=function(A){for(var e="",t=0;;){var r,B=this._value[t];if(-1===B||void 0===B||B===A)return{type:0,value:e+=this.consumeStringSlice(t)};if(10===B)return this._value.splice(0,t),MA;92!==B||-1!==(r=this._value[t+1])&&void 0!==r&&(10===r?(e+=this.consumeStringSlice(t),t=-1,this._value.shift()):hA(B,r)&&(e+=this.consumeStringSlice(t),e+=g(this.consumeEscapedCodePoint()),t=-1)),t++}},XA.prototype.consumeNumber=function(){var A=[],e=4;for(43!==(t=this.peekCodePoint(0))&&45!==t||A.push(this.consumeCodePoint());UA(this.peekCodePoint(0));)A.push(this.consumeCodePoint());var t=this.peekCodePoint(0),r=this.peekCodePoint(1);if(46===t&&UA(r))for(A.push(this.consumeCodePoint(),this.consumeCodePoint()),e=8;UA(this.peekCodePoint(0));)A.push(this.consumeCodePoint());t=this.peekCodePoint(0);var r=this.peekCodePoint(1),B=this.peekCodePoint(2);if((69===t||101===t)&&((43===r||45===r)&&UA(B)||UA(r)))for(A.push(this.consumeCodePoint(),this.consumeCodePoint()),e=8;UA(this.peekCodePoint(0));)A.push(this.consumeCodePoint());return[function(A){var e=0,t=1;43!==A[e]&&45!==A[e]||(45===A[e]&&(t=-1),e++);for(var r=[];UA(A[e]);)r.push(A[e++]);var B=r.length?parseInt(g.apply(void 0,r),10):0;46===A[e]&&e++;for(var n=[];UA(A[e]);)n.push(A[e++]);var s=n.length,o=s?parseInt(g.apply(void 0,n),10):0;69!==A[e]&&101!==A[e]||e++;var i=1;43!==A[e]&&45!==A[e]||(45===A[e]&&(i=-1),e++);for(var Q=[];UA(A[e]);)Q.push(A[e++]);var c=Q.length?parseInt(g.apply(void 0,Q),10):0;return t*(B+o*Math.pow(10,-s))*Math.pow(10,i*c)}(A),e]},XA.prototype.consumeNumericToken=function(){var A=this.consumeNumber(),e=A[0],t=A[1],r=this.peekCodePoint(0),B=this.peekCodePoint(1),A=this.peekCodePoint(2);return dA(r,B,A)?{type:15,number:e,flags:t,unit:this.consumeName()}:37===r?(this.consumeCodePoint(),{type:16,number:e,flags:t}):{type:17,number:e,flags:t}},XA.prototype.consumeEscapedCodePoint=function(){var A,e=this.consumeCodePoint();if(lA(e)){for(var t=g(e);lA(this.peekCodePoint(0))&&t.length<6;)t+=g(this.consumeCodePoint());CA(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(t,16);return 0===r||55296<=(A=r)&&A<=57343||1114111<r?65533:r}return-1===e?65533:e},XA.prototype.consumeName=function(){for(var A="";;){var e=this.consumeCodePoint();if(FA(e))A+=g(e);else{if(!hA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),A;A+=g(this.consumeEscapedCodePoint())}}},XA);function XA(){this._value=[]}var JA=(YA.create=function(A){var e=new PA;return e.write(A),new YA(e.read())},YA.parseValue=function(A){return YA.create(A).parseComponentValue()},YA.parseValues=function(A){return YA.create(A).parseComponentValues()},YA.prototype.parseComponentValue=function(){for(var A=this.consumeToken();31===A.type;)A=this.consumeToken();if(32===A.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(A);for(var e=this.consumeComponentValue();31===(A=this.consumeToken()).type;);if(32===A.type)return e;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},YA.prototype.parseComponentValues=function(){for(var A=[];;){var e=this.consumeComponentValue();if(32===e.type)return A;A.push(e),A.push()}},YA.prototype.consumeComponentValue=function(){var A=this.consumeToken();switch(A.type){case 11:case 28:case 2:return this.consumeSimpleBlock(A.type);case 19:return this.consumeFunction(A)}return A},YA.prototype.consumeSimpleBlock=function(A){for(var e={type:A,values:[]},t=this.consumeToken();;){if(32===t.type||ce(t,A))return e;this.reconsumeToken(t),e.values.push(this.consumeComponentValue()),t=this.consumeToken()}},YA.prototype.consumeFunction=function(A){for(var e={name:A.value,values:[],type:18};;){var t=this.consumeToken();if(32===t.type||3===t.type)return e;this.reconsumeToken(t),e.values.push(this.consumeComponentValue())}},YA.prototype.consumeToken=function(){var A=this._tokens.shift();return void 0===A?NA:A},YA.prototype.reconsumeToken=function(A){this._tokens.unshift(A)},YA);function YA(A){this._tokens=A}function WA(A){return 15===A.type}function ZA(A){return 17===A.type}function _A(A){return 20===A.type}function qA(A){return 0===A.type}function jA(A,e){return _A(A)&&A.value===e}function zA(A){return 31!==A.type}function $A(A){return 31!==A.type&&4!==A.type}function Ae(A){var e=[],t=[];return A.forEach(function(A){if(4===A.type){if(0===t.length)throw new Error("Error parsing function args, zero tokens for arg");return e.push(t),void(t=[])}31!==A.type&&t.push(A)}),t.length&&e.push(t),e}function ee(A){return 17===A.type||15===A.type}function te(A){return 16===A.type||ee(A)}function re(A){return 1<A.length?[A[0],A[1]]:[A[0]]}function Be(A,e,t){var r=A[0],A=A[1];return[Ue(r,e),Ue(void 0!==A?A:r,t)]}function ne(A){return 15===A.type&&("deg"===A.unit||"grad"===A.unit||"rad"===A.unit||"turn"===A.unit)}function se(A){switch(A.filter(_A).map(function(A){return A.value}).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ae,ae];case"to top":case"bottom":return Ce(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ae,we];case"to right":case"left":return Ce(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[we,we];case"to bottom":case"top":return Ce(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[we,ae];case"to left":case"right":return Ce(270)}return 0}function oe(A){return 0==(255&A)}function ie(A){var e=255&A,t=255&A>>8,r=255&A>>16,A=255&A>>24;return e<255?"rgba("+A+","+r+","+t+","+e/255+")":"rgb("+A+","+r+","+t+")"}function Qe(A,e){if(17===A.type)return A.number;if(16!==A.type)return 0;var t=3===e?1:255;return 3===e?A.number/100*t:Math.round(A.number/100*t)}var ce=function(A,e){return 11===e&&12===A.type||(28===e&&29===A.type||2===e&&3===A.type)},ae={type:17,number:0,flags:4},ge={type:16,number:50,flags:4},we={type:16,number:100,flags:4},Ue=function(A,e){if(16===A.type)return A.number/100*e;if(WA(A))switch(A.unit){case"rem":case"em":return 16*A.number;default:return A.number}return A.number},le=function(A,e){if(15===e.type)switch(e.unit){case"deg":return Math.PI*e.number/180;case"grad":return Math.PI/200*e.number;case"rad":return e.number;case"turn":return 2*Math.PI*e.number}throw new Error("Unsupported angle type")},Ce=function(A){return Math.PI*A/180},ue=function(A,e){if(18===e.type){var t=me[e.name];if(void 0===t)throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return t(A,e.values)}if(5===e.type){if(3===e.value.length){var r=e.value.substring(0,1),B=e.value.substring(1,2),n=e.value.substring(2,3);return Fe(parseInt(r+r,16),parseInt(B+B,16),parseInt(n+n,16),1)}if(4===e.value.length){var r=e.value.substring(0,1),B=e.value.substring(1,2),n=e.value.substring(2,3),s=e.value.substring(3,4);return Fe(parseInt(r+r,16),parseInt(B+B,16),parseInt(n+n,16),parseInt(s+s,16)/255)}if(6===e.value.length){r=e.value.substring(0,2),B=e.value.substring(2,4),n=e.value.substring(4,6);return Fe(parseInt(r,16),parseInt(B,16),parseInt(n,16),1)}if(8===e.value.length){r=e.value.substring(0,2),B=e.value.substring(2,4),n=e.value.substring(4,6),s=e.value.substring(6,8);return Fe(parseInt(r,16),parseInt(B,16),parseInt(n,16),parseInt(s,16)/255)}}if(20===e.type){e=Le[e.value.toUpperCase()];if(void 0!==e)return e}return Le.TRANSPARENT},Fe=function(A,e,t,r){return(A<<24|e<<16|t<<8|Math.round(255*r)<<0)>>>0},he=function(A,e){e=e.filter($A);if(3===e.length){var t=e.map(Qe),r=t[0],B=t[1],t=t[2];return Fe(r,B,t,1)}if(4!==e.length)return 0;e=e.map(Qe),r=e[0],B=e[1],t=e[2],e=e[3];return Fe(r,B,t,e)};function de(A,e,t){return t<0&&(t+=1),1<=t&&--t,t<1/6?(e-A)*t*6+A:t<.5?e:t<2/3?6*(e-A)*(2/3-t)+A:A}function fe(A,e){return ue(A,JA.create(e).parseComponentValue())}function He(A,e){return A=ue(A,e[0]),(e=e[1])&&te(e)?{color:A,stop:e}:{color:A,stop:null}}function pe(A,t){var e=A[0],r=A[A.length-1];null===e.stop&&(e.stop=ae),null===r.stop&&(r.stop=we);for(var B=[],n=0,s=0;s<A.length;s++){var o=A[s].stop;null!==o?(n<(o=Ue(o,t))?B.push(o):B.push(n),n=o):B.push(null)}for(var i=null,s=0;s<B.length;s++){var Q=B[s];if(null===Q)null===i&&(i=s);else if(null!==i){for(var c=s-i,a=(Q-B[i-1])/(1+c),g=1;g<=c;g++)B[i+g-1]=a*g;i=null}}return A.map(function(A,e){return{color:A.color,stop:Math.max(Math.min(1,B[e]/t),0)}})}function Ee(A,e,t){var r="number"==typeof A?A:(s=e/2,r=(n=t)/2,s=Ue((B=A)[0],e)-s,n=r-Ue(B[1],n),(Math.atan2(n,s)+2*Math.PI)%(2*Math.PI)),B=Math.abs(e*Math.sin(r))+Math.abs(t*Math.cos(r)),n=e/2,s=t/2,e=B/2,t=Math.sin(r-Math.PI/2)*e,e=Math.cos(r-Math.PI/2)*e;return[B,n-e,n+e,s-t,s+t]}function Ie(A,e){return Math.sqrt(A*A+e*e)}function ye(A,e,B,n,s){return[[0,0],[0,e],[A,0],[A,e]].reduce(function(A,e){var t=e[0],r=e[1],r=Ie(B-t,n-r);return(s?r<A.optimumDistance:r>A.optimumDistance)?{optimumCorner:e,optimumDistance:r}:A},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner}var Ke=function(A,e){var t=e.filter($A),r=t[0],B=t[1],n=t[2],e=t[3],t=(17===r.type?Ce(r.number):le(A,r))/(2*Math.PI),A=te(B)?B.number/100:0,r=te(n)?n.number/100:0,B=void 0!==e&&te(e)?Ue(e,1):1;if(0==A)return Fe(255*r,255*r,255*r,1);n=r<=.5?r*(1+A):r+A-r*A,e=2*r-n,A=de(e,n,t+1/3),r=de(e,n,t),t=de(e,n,t-1/3);return Fe(255*A,255*r,255*t,B)},me={hsl:Ke,hsla:Ke,rgb:he,rgba:he},Le={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},be={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(A,e){return e.map(function(A){if(_A(A))switch(A.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},De={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ke=function(t,A){var r=Ce(180),B=[];return Ae(A).forEach(function(A,e){if(0===e){e=A[0];if(20===e.type&&-1!==["top","left","right","bottom"].indexOf(e.value))return void(r=se(A));if(ne(e))return void(r=(le(t,e)+Ce(270))%Ce(360))}A=He(t,A);B.push(A)}),{angle:r,stops:B,type:1}},ve="closest-side",xe="farthest-side",Me="closest-corner",Se="farthest-corner",Te="ellipse",Ge="contain",he=function(r,A){var B=0,n=3,s=[],o=[];return Ae(A).forEach(function(A,e){var t=!0;0===e?t=A.reduce(function(A,e){if(_A(e))switch(e.value){case"center":return o.push(ge),!1;case"top":case"left":return o.push(ae),!1;case"right":case"bottom":return o.push(we),!1}else if(te(e)||ee(e))return o.push(e),!1;return A},t):1===e&&(t=A.reduce(function(A,e){if(_A(e))switch(e.value){case"circle":return B=0,!1;case Te:return!(B=1);case Ge:case ve:return n=0,!1;case xe:return!(n=1);case Me:return!(n=2);case"cover":case Se:return!(n=3)}else if(ee(e)||te(e))return(n=!Array.isArray(n)?[]:n).push(e),!1;return A},t)),t&&(A=He(r,A),s.push(A))}),{size:n,shape:B,stops:s,position:o,type:2}},Oe=function(A,e){if(22===e.type){var t={url:e.value,type:0};return A.cache.addImage(e.value),t}if(18!==e.type)throw new Error("Unsupported image type "+e.type);t=ke[e.name];if(void 0===t)throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return t(A,e.values)};var Ve,ke={"linear-gradient":function(t,A){var r=Ce(180),B=[];return Ae(A).forEach(function(A,e){if(0===e){e=A[0];if(20===e.type&&"to"===e.value)return void(r=se(A));if(ne(e))return void(r=le(t,e))}A=He(t,A);B.push(A)}),{angle:r,stops:B,type:1}},"-moz-linear-gradient":Ke,"-ms-linear-gradient":Ke,"-o-linear-gradient":Ke,"-webkit-linear-gradient":Ke,"radial-gradient":function(B,A){var n=0,s=3,o=[],i=[];return Ae(A).forEach(function(A,e){var t,r=!0;0===e&&(t=!1,r=A.reduce(function(A,e){if(t)if(_A(e))switch(e.value){case"center":return i.push(ge),A;case"top":case"left":return i.push(ae),A;case"right":case"bottom":return i.push(we),A}else(te(e)||ee(e))&&i.push(e);else if(_A(e))switch(e.value){case"circle":return n=0,!1;case Te:return!(n=1);case"at":return!(t=!0);case ve:return s=0,!1;case"cover":case xe:return!(s=1);case Ge:case Me:return!(s=2);case Se:return!(s=3)}else if(ee(e)||te(e))return(s=!Array.isArray(s)?[]:s).push(e),!1;return A},r)),r&&(A=He(B,A),o.push(A))}),{size:s,shape:n,stops:o,position:i,type:2}},"-moz-radial-gradient":he,"-ms-radial-gradient":he,"-o-radial-gradient":he,"-webkit-radial-gradient":he,"-webkit-gradient":function(r,A){var e=Ce(180),B=[],n=1;return Ae(A).forEach(function(A,e){var t,A=A[0];if(0===e){if(_A(A)&&"linear"===A.value)return void(n=1);if(_A(A)&&"radial"===A.value)return void(n=2)}18===A.type&&("from"===A.name?(t=ue(r,A.values[0]),B.push({stop:ae,color:t})):"to"===A.name?(t=ue(r,A.values[0]),B.push({stop:we,color:t})):"color-stop"!==A.name||2===(A=A.values.filter($A)).length&&(t=ue(r,A[1]),A=A[0],ZA(A)&&B.push({stop:{type:16,number:100*A.number,flags:A.flags},color:t})))}),1===n?{angle:(e+Ce(180))%Ce(360),stops:B,type:n}:{size:3,shape:0,stops:B,position:[],type:n}}},Re={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,A){if(0===A.length)return[];var t=A[0];return 20===t.type&&"none"===t.value?[]:A.filter(function(A){return $A(A)&&!(20===(A=A).type&&"none"===A.value||18===A.type&&!ke[A.name])}).map(function(A){return Oe(e,A)})}},Ne={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(A,e){return e.map(function(A){if(_A(A))switch(A.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Pe={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(A,e){return Ae(e).map(function(A){return A.filter(te)}).map(re)}},Xe={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(A,e){return Ae(e).map(function(A){return A.filter(_A).map(function(A){return A.value}).join(" ")}).map(Je)}},Je=function(A){switch(A){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}};(he=Ve=Ve||{}).AUTO="auto",he.CONTAIN="contain";function Ye(A,e){return _A(A)&&"normal"===A.value?1.2*e:17===A.type?e*A.number:te(A)?Ue(A,e):e}var We,Ze,_e={name:"background-size",initialValue:"0",prefix:!(he.COVER="cover"),type:1,parse:function(A,e){return Ae(e).map(function(A){return A.filter(qe)})}},qe=function(A){return _A(A)||te(A)},he=function(A){return{name:"border-"+A+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},je=he("top"),ze=he("right"),$e=he("bottom"),At=he("left"),he=function(A){return{name:"border-radius-"+A,initialValue:"0 0",prefix:!1,type:1,parse:function(A,e){return re(e.filter(te))}}},et=he("top-left"),tt=he("top-right"),rt=he("bottom-right"),Bt=he("bottom-left"),he=function(A){return{name:"border-"+A+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(A,e){switch(e){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},nt=he("top"),st=he("right"),ot=he("bottom"),it=he("left"),he=function(A){return{name:"border-"+A+"-width",initialValue:"0",type:0,prefix:!1,parse:function(A,e){return WA(e)?e.number:0}}},Qt=he("top"),ct=he("right"),at=he("bottom"),gt=he("left"),wt={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ut={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(A,e){return"rtl"!==e?0:1}},lt={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(A,e){return e.filter(_A).reduce(function(A,e){return A|Ct(e.value)},0)}},Ct=function(A){switch(A){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},ut={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(A,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Ft={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(A,e){return!(20===e.type&&"normal"===e.value||17!==e.type&&15!==e.type)?e.number:0}},ht={name:"line-break",initialValue:(he=We=We||{}).NORMAL="normal",prefix:!(he.STRICT="strict"),type:2,parse:function(A,e){return"strict"!==e?We.NORMAL:We.STRICT}},dt={name:"line-height",initialValue:"normal",prefix:!1,type:4},ft={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(A,e){return 20===e.type&&"none"===e.value?null:Oe(A,e)}},Ht={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(A,e){return"inside"!==e?1:0}},pt={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(A,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},he=function(A){return{name:"margin-"+A,initialValue:"0",prefix:!1,type:4}},Et=he("top"),It=he("right"),yt=he("bottom"),Kt=he("left"),mt={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(A,e){return e.filter(_A).map(function(A){switch(A.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}})}},Lt={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(A,e){return"break-word"!==e?"normal":"break-word"}},he=function(A){return{name:"padding-"+A,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},bt=he("top"),Dt=he("right"),vt=he("bottom"),xt=he("left"),Mt={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(A,e){switch(e){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},St={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(A,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Tt={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,A){return 1===A.length&&jA(A[0],"none")?[]:Ae(A).map(function(A){for(var e={color:Le.TRANSPARENT,offsetX:ae,offsetY:ae,blur:ae},t=0,r=0;r<A.length;r++){var B=A[r];ee(B)?(0===t?e.offsetX=B:1===t?e.offsetY=B:e.blur=B,t++):e.color=ue(n,B)}return e})}},Gt={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(A,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Ot={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(A,e){if(20===e.type&&"none"===e.value)return null;if(18!==e.type)return null;var t=Vt[e.name];if(void 0===t)throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return t(e.values)}},Vt={matrix:function(A){A=A.filter(function(A){return 17===A.type}).map(function(A){return A.number});return 6===A.length?A:null},matrix3d:function(A){var e=A.filter(function(A){return 17===A.type}).map(function(A){return A.number}),t=e[0],r=e[1];e[2],e[3];var B=e[4],n=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var s=e[12],A=e[13];return e[14],e[15],16===e.length?[t,r,B,n,s,A]:null}},he={type:16,number:50,flags:4},kt=[he,he],Rt={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(A,e){e=e.filter(te);return 2!==e.length?kt:[e[0],e[1]]}},Nt={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(A,e){switch(e){case"hidden":return 1;case"collapse":return 2;default:return 0}}};(he=Ze=Ze||{}).NORMAL="normal",he.BREAK_ALL="break-all";function Pt(A,e){return 0!=(A&e)}function Xt(A,e,t){return(A=A&&A[Math.min(e,A.length-1)])?t?A.open:A.close:""}var Jt={name:"word-break",initialValue:"normal",prefix:!(he.KEEP_ALL="keep-all"),type:2,parse:function(A,e){switch(e){case"break-all":return Ze.BREAK_ALL;case"keep-all":return Ze.KEEP_ALL;default:return Ze.NORMAL}}},Yt={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(A,e){if(20===e.type)return{auto:!0,order:0};if(ZA(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},Wt=function(A,e){if(15===e.type)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")},Zt={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(A,e){return ZA(e)?e.number:1}},_t={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},qt={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(A,e){return e.filter(_A).map(function(A){switch(A.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(A){return 0!==A})}},jt={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(A,e){var t=[],r=[];return e.forEach(function(A){switch(A.type){case 20:case 0:t.push(A.value);break;case 17:t.push(A.number.toString());break;case 4:r.push(t.join(" ")),t.length=0}}),t.length&&r.push(t.join(" ")),r.map(function(A){return-1===A.indexOf(" ")?A:"'"+A+"'"})}},zt={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},$t={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(A,e){return ZA(e)?e.number:!_A(e)||"bold"!==e.value?400:700}},Ar={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(A,e){return e.filter(_A).map(function(A){return A.value})}},er={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(A,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},tr={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(A,e){if(0===e.length)return[];var t=e[0];return 20===t.type&&"none"===t.value?[]:e}},rr={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(A,e){if(0===e.length)return null;var t=e[0];if(20===t.type&&"none"===t.value)return null;for(var r=[],B=e.filter(zA),n=0;n<B.length;n++){var s=B[n],o=B[n+1];20===s.type&&(o=o&&ZA(o)?o.number:1,r.push({counter:s.value,increment:o}))}return r}},Br={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(A,e){if(0===e.length)return[];for(var t=[],r=e.filter(zA),B=0;B<r.length;B++){var n=r[B],s=r[B+1];_A(n)&&"none"!==n.value&&(s=s&&ZA(s)?s.number:0,t.push({counter:n.value,reset:s}))}return t}},nr={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,A){return A.filter(WA).map(function(A){return Wt(e,A)})}},sr={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(A,e){if(0===e.length)return null;var t=e[0];if(20===t.type&&"none"===t.value)return null;var r=[],B=e.filter(qA);if(B.length%2!=0)return null;for(var n=0;n<B.length;n+=2){var s=B[n].value,o=B[n+1].value;r.push({open:s,close:o})}return r}},or={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,A){return 1===A.length&&jA(A[0],"none")?[]:Ae(A).map(function(A){for(var e={color:255,offsetX:ae,offsetY:ae,blur:ae,spread:ae,inset:!1},t=0,r=0;r<A.length;r++){var B=A[r];jA(B,"inset")?e.inset=!0:ee(B)?(0===t?e.offsetX=B:1===t?e.offsetY=B:2===t?e.blur=B:e.spread=B,t++):e.color=ue(n,B)}return e})}},ir={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(A,e){var t=[];return e.filter(_A).forEach(function(A){switch(A.value){case"stroke":t.push(1);break;case"fill":t.push(0);break;case"markers":t.push(2)}}),[0,1,2].forEach(function(A){-1===t.indexOf(A)&&t.push(A)}),t}},Qr={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},cr={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(A,e){return WA(e)?e.number:0}},ar=(gr.prototype.isVisible=function(){return 0<this.display&&0<this.opacity&&0===this.visibility},gr.prototype.isTransparent=function(){return oe(this.backgroundColor)},gr.prototype.isTransformed=function(){return null!==this.transform},gr.prototype.isPositioned=function(){return 0!==this.position},gr.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},gr.prototype.isFloating=function(){return 0!==this.float},gr.prototype.isInlineLevel=function(){return Pt(this.display,4)||Pt(this.display,33554432)||Pt(this.display,268435456)||Pt(this.display,536870912)||Pt(this.display,67108864)||Pt(this.display,134217728)},gr);function gr(A,e){this.animationDuration=lr(A,nr,e.animationDuration),this.backgroundClip=lr(A,be,e.backgroundClip),this.backgroundColor=lr(A,De,e.backgroundColor),this.backgroundImage=lr(A,Re,e.backgroundImage),this.backgroundOrigin=lr(A,Ne,e.backgroundOrigin),this.backgroundPosition=lr(A,Pe,e.backgroundPosition),this.backgroundRepeat=lr(A,Xe,e.backgroundRepeat),this.backgroundSize=lr(A,_e,e.backgroundSize),this.borderTopColor=lr(A,je,e.borderTopColor),this.borderRightColor=lr(A,ze,e.borderRightColor),this.borderBottomColor=lr(A,$e,e.borderBottomColor),this.borderLeftColor=lr(A,At,e.borderLeftColor),this.borderTopLeftRadius=lr(A,et,e.borderTopLeftRadius),this.borderTopRightRadius=lr(A,tt,e.borderTopRightRadius),this.borderBottomRightRadius=lr(A,rt,e.borderBottomRightRadius),this.borderBottomLeftRadius=lr(A,Bt,e.borderBottomLeftRadius),this.borderTopStyle=lr(A,nt,e.borderTopStyle),this.borderRightStyle=lr(A,st,e.borderRightStyle),this.borderBottomStyle=lr(A,ot,e.borderBottomStyle),this.borderLeftStyle=lr(A,it,e.borderLeftStyle),this.borderTopWidth=lr(A,Qt,e.borderTopWidth),this.borderRightWidth=lr(A,ct,e.borderRightWidth),this.borderBottomWidth=lr(A,at,e.borderBottomWidth),this.borderLeftWidth=lr(A,gt,e.borderLeftWidth),this.boxShadow=lr(A,or,e.boxShadow),this.color=lr(A,wt,e.color),this.direction=lr(A,Ut,e.direction),this.display=lr(A,lt,e.display),this.float=lr(A,ut,e.cssFloat),this.fontFamily=lr(A,jt,e.fontFamily),this.fontSize=lr(A,zt,e.fontSize),this.fontStyle=lr(A,er,e.fontStyle),this.fontVariant=lr(A,Ar,e.fontVariant),this.fontWeight=lr(A,$t,e.fontWeight),this.letterSpacing=lr(A,Ft,e.letterSpacing),this.lineBreak=lr(A,ht,e.lineBreak),this.lineHeight=lr(A,dt,e.lineHeight),this.listStyleImage=lr(A,ft,e.listStyleImage),this.listStylePosition=lr(A,Ht,e.listStylePosition),this.listStyleType=lr(A,pt,e.listStyleType),this.marginTop=lr(A,Et,e.marginTop),this.marginRight=lr(A,It,e.marginRight),this.marginBottom=lr(A,yt,e.marginBottom),this.marginLeft=lr(A,Kt,e.marginLeft),this.opacity=lr(A,Zt,e.opacity);var t=lr(A,mt,e.overflow);this.overflowX=t[0],this.overflowY=t[1<t.length?1:0],this.overflowWrap=lr(A,Lt,e.overflowWrap),this.paddingTop=lr(A,bt,e.paddingTop),this.paddingRight=lr(A,Dt,e.paddingRight),this.paddingBottom=lr(A,vt,e.paddingBottom),this.paddingLeft=lr(A,xt,e.paddingLeft),this.paintOrder=lr(A,ir,e.paintOrder),this.position=lr(A,St,e.position),this.textAlign=lr(A,Mt,e.textAlign),this.textDecorationColor=lr(A,_t,null!==(t=e.textDecorationColor)&&void 0!==t?t:e.color),this.textDecorationLine=lr(A,qt,null!==(t=e.textDecorationLine)&&void 0!==t?t:e.textDecoration),this.textShadow=lr(A,Tt,e.textShadow),this.textTransform=lr(A,Gt,e.textTransform),this.transform=lr(A,Ot,e.transform),this.transformOrigin=lr(A,Rt,e.transformOrigin),this.visibility=lr(A,Nt,e.visibility),this.webkitTextStrokeColor=lr(A,Qr,e.webkitTextStrokeColor),this.webkitTextStrokeWidth=lr(A,cr,e.webkitTextStrokeWidth),this.wordBreak=lr(A,Jt,e.wordBreak),this.zIndex=lr(A,Yt,e.zIndex)}for(var wr=function(A,e){this.content=lr(A,tr,e.content),this.quotes=lr(A,sr,e.quotes)},Ur=function(A,e){this.counterIncrement=lr(A,rr,e.counterIncrement),this.counterReset=lr(A,Br,e.counterReset)},lr=function(A,e,t){var r=new PA,t=null!=t?t.toString():e.initialValue;r.write(t);var B=new JA(r.read());switch(e.type){case 2:var n=B.parseComponentValue();return e.parse(A,_A(n)?n.value:e.initialValue);case 0:return e.parse(A,B.parseComponentValue());case 1:return e.parse(A,B.parseComponentValues());case 4:return B.parseComponentValue();case 3:switch(e.format){case"angle":return le(A,B.parseComponentValue());case"color":return ue(A,B.parseComponentValue());case"image":return Oe(A,B.parseComponentValue());case"length":var s=B.parseComponentValue();return ee(s)?s:ae;case"length-percentage":s=B.parseComponentValue();return te(s)?s:ae;case"time":return Wt(A,B.parseComponentValue())}}},Cr=function(A,e){A=function(A){switch(A.getAttribute("data-html2canvas-debug")){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}}(A);return 1===A||e===A},ur=function(A,e){this.context=A,this.textNodes=[],this.elements=[],this.flags=0,Cr(e,3),this.styles=new ar(A,window.getComputedStyle(e,null)),JB(e)&&(this.styles.animationDuration.some(function(A){return 0<A})&&(e.style.animationDuration="0s"),null!==this.styles.transform&&(e.style.transform="none")),this.bounds=f(this.context,e),Cr(e,4)&&(this.flags|=16)},Fr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",hr="undefined"==typeof Uint8Array?[]:new Uint8Array(256),dr=0;dr<Fr.length;dr++)hr[Fr.charCodeAt(dr)]=dr;function fr(A,e,t){return A.slice?A.slice(e,t):new Uint16Array(Array.prototype.slice.call(A,e,t))}var Hr=(pr.prototype.get=function(A){var e;if(0<=A){if(A<55296||56319<A&&A<=65535)return e=this.index[A>>5],this.data[e=(e<<2)+(31&A)];if(A<=65535)return e=this.index[2048+(A-55296>>5)],this.data[e=(e<<2)+(31&A)];if(A<this.highStart)return e=this.index[e=2080+(A>>11)],e=this.index[e+=A>>5&63],this.data[e=(e<<2)+(31&A)];if(A<=1114111)return this.data[this.highValueIndex]}return this.errorValue},pr);function pr(A,e,t,r,B,n){this.initialValue=A,this.errorValue=e,this.highStart=t,this.highValueIndex=r,this.index=B,this.data=n}for(var Er="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ir="undefined"==typeof Uint8Array?[]:new Uint8Array(256),yr=0;yr<Er.length;yr++)Ir[Er.charCodeAt(yr)]=yr;function Kr(A){return kr.get(A)}function mr(A){var t=function(A){for(var e=[],t=0,r=A.length;t<r;){var B,n=A.charCodeAt(t++);55296<=n&&n<=56319&&t<r?56320==(64512&(B=A.charCodeAt(t++)))?e.push(((1023&n)<<10)+(1023&B)+65536):(e.push(n),t--):e.push(n)}return e}(A),r=t.length,B=0,n=0,s=t.map(Kr);return{next:function(){if(r<=B)return{done:!0,value:null};for(var A=Rr;B<r&&(A=function(A,e){var t=e-2,r=A[t],B=A[e-1],e=A[e];if(2===B&&3===e)return Rr;if(2===B||3===B||4===B)return"";if(2===e||3===e||4===e)return"";if(B===Tr&&-1!==[Tr,Gr,Or,Vr].indexOf(e))return Rr;if(!(B!==Or&&B!==Gr||e!==Gr&&10!==e))return Rr;if((B===Vr||10===B)&&10===e)return Rr;if(13===e||5===e)return Rr;if(7===e)return Rr;if(1===B)return Rr;if(13===B&&14===e){for(;5===r;)r=A[--t];if(14===r)return Rr}if(15===B&&15===e){for(var n=0;15===r;)n++,r=A[--t];if(n%2==0)return Rr}return""}(s,++B))===Rr;);if(A===Rr&&B!==r)return{done:!0,value:null};var e=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,A);var t=A.length;if(!t)return"";for(var r=[],B=-1,n="";++B<t;){var s=A[B];s<=65535?r.push(s):(s-=65536,r.push(55296+(s>>10),s%1024+56320)),(B+1===t||16384<r.length)&&(n+=String.fromCharCode.apply(String,r),r.length=0)}return n}.apply(null,t.slice(n,B));return n=B,{value:e,done:!1}}}}function Lr(A){return 0===A[0]&&255===A[1]&&0===A[2]&&255===A[3]}var br,Dr,vr,xr,Mr,Sr,Tr=8,Gr=9,Or=11,Vr=12,kr=(vr=function(A){var e,t,r,B,n=.75*A.length,s=A.length,o=0;"="===A[A.length-1]&&(n--,"="===A[A.length-2]&&n--);for(var n=new("undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?ArrayBuffer:Array)(n),i=Array.isArray(n)?n:new Uint8Array(n),Q=0;Q<s;Q+=4)e=hr[A.charCodeAt(Q)],t=hr[A.charCodeAt(Q+1)],r=hr[A.charCodeAt(Q+2)],B=hr[A.charCodeAt(Q+3)],i[o++]=e<<2|t>>4,i[o++]=(15&t)<<4|r>>2,i[o++]=(3&r)<<6|63&B;return n}(br="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA="),xr=Array.isArray(vr)?function(A){for(var e=A.length,t=[],r=0;r<e;r+=4)t.push(A[r+3]<<24|A[r+2]<<16|A[r+1]<<8|A[r]);return t}(vr):new Uint32Array(vr),Mr=Array.isArray(vr)?function(A){for(var e=A.length,t=[],r=0;r<e;r+=2)t.push(A[r+1]<<8|A[r]);return t}(vr):new Uint16Array(vr),br=fr(Mr,12,xr[4]/2),Dr=2===xr[5]?fr(Mr,(24+xr[4])/2):(vr=xr,Mr=Math.ceil((24+xr[4])/4),vr.slice?vr.slice(Mr,Dr):new Uint32Array(Array.prototype.slice.call(vr,Mr,Dr))),new Hr(xr[0],xr[1],xr[2],xr[3],br,Dr)),Rr="",Nr=function(A,e,t,r,B){var n="http://www.w3.org/2000/svg",s=document.createElementNS(n,"svg"),n=document.createElementNS(n,"foreignObject");return s.setAttributeNS(null,"width",A.toString()),s.setAttributeNS(null,"height",e.toString()),n.setAttributeNS(null,"width","100%"),n.setAttributeNS(null,"height","100%"),n.setAttributeNS(null,"x",t.toString()),n.setAttributeNS(null,"y",r.toString()),n.setAttributeNS(null,"externalResourcesRequired","true"),s.appendChild(n),n.appendChild(B),s},Pr=function(r){return new Promise(function(A,e){var t=new Image;t.onload=function(){return A(t)},t.onerror=e,t.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(r))})},Xr={get SUPPORT_RANGE_BOUNDS(){var A=function(A){if(A.createRange){var e=A.createRange();if(e.getBoundingClientRect){var t=A.createElement("boundtest");t.style.height="123px",t.style.display="block",A.body.appendChild(t),e.selectNode(t);e=e.getBoundingClientRect(),e=Math.round(e.height);if(A.body.removeChild(t),123===e)return!0}}return!1}(document);return Object.defineProperty(Xr,"SUPPORT_RANGE_BOUNDS",{value:A}),A},get SUPPORT_WORD_BREAKING(){var A=Xr.SUPPORT_RANGE_BOUNDS&&function(A){var e=A.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",A.body.appendChild(e);var r=A.createRange();e.innerHTML="function"==typeof"".repeat?"&#128104;".repeat(10):"";var B=e.firstChild,t=Q(B.data).map(function(A){return g(A)}),n=0,s={},t=t.every(function(A,e){r.setStart(B,n),r.setEnd(B,n+A.length);var t=r.getBoundingClientRect();n+=A.length;A=t.x>s.x||t.y>s.y;return s=t,0===e||A});return A.body.removeChild(e),t}(document);return Object.defineProperty(Xr,"SUPPORT_WORD_BREAKING",{value:A}),A},get SUPPORT_SVG_DRAWING(){var A=function(A){var e=new Image,t=A.createElement("canvas"),A=t.getContext("2d");if(!A)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{A.drawImage(e,0,0),t.toDataURL()}catch(A){return!1}return!0}(document);return Object.defineProperty(Xr,"SUPPORT_SVG_DRAWING",{value:A}),A},get SUPPORT_FOREIGNOBJECT_DRAWING(){var A="function"==typeof Array.from&&"function"==typeof window.fetch?function(t){var A=t.createElement("canvas"),r=100;A.width=r,A.height=r;var B=A.getContext("2d");if(!B)return Promise.reject(!1);B.fillStyle="rgb(0, 255, 0)",B.fillRect(0,0,r,r);var e=new Image,n=A.toDataURL();e.src=n;e=Nr(r,r,0,0,e);return B.fillStyle="red",B.fillRect(0,0,r,r),Pr(e).then(function(A){B.drawImage(A,0,0);var e=B.getImageData(0,0,r,r).data;B.fillStyle="red",B.fillRect(0,0,r,r);A=t.createElement("div");return A.style.backgroundImage="url("+n+")",A.style.height="100px",Lr(e)?Pr(Nr(r,r,0,0,A)):Promise.reject(!1)}).then(function(A){return B.drawImage(A,0,0),Lr(B.getImageData(0,0,r,r).data)}).catch(function(){return!1})}(document):Promise.resolve(!1);return Object.defineProperty(Xr,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:A}),A},get SUPPORT_CORS_IMAGES(){var A=void 0!==(new Image).crossOrigin;return Object.defineProperty(Xr,"SUPPORT_CORS_IMAGES",{value:A}),A},get SUPPORT_RESPONSE_TYPE(){var A="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(Xr,"SUPPORT_RESPONSE_TYPE",{value:A}),A},get SUPPORT_CORS_XHR(){var A="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Xr,"SUPPORT_CORS_XHR",{value:A}),A},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var A=!("undefined"==typeof Intl||!Intl.Segmenter);return Object.defineProperty(Xr,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:A}),A}},Jr=function(A,e){this.text=A,this.bounds=e},Yr=function(A,e){var t=e.ownerDocument;if(t){var r=t.createElement("html2canvaswrapper");r.appendChild(e.cloneNode(!0));t=e.parentNode;if(t){t.replaceChild(r,e);A=f(A,r);return r.firstChild&&t.replaceChild(r.firstChild,r),A}}return d.EMPTY},Wr=function(A,e,t){var r=A.ownerDocument;if(!r)throw new Error("Node has no owner document");r=r.createRange();return r.setStart(A,e),r.setEnd(A,e+t),r},Zr=function(A){if(Xr.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(A)).map(function(A){return A.segment})}return function(A){for(var e,t=mr(A),r=[];!(e=t.next()).done;)e.value&&r.push(e.value.slice());return r}(A)},_r=function(A,e){return 0!==e.letterSpacing?Zr(A):function(A,e){if(Xr.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(t.segment(A)).map(function(A){return A.segment})}return jr(A,e)}(A,e)},qr=[32,160,4961,65792,65793,4153,4241],jr=function(A,e){for(var t,r=wA(A,{lineBreak:e.lineBreak,wordBreak:"break-word"===e.overflowWrap?"break-word":e.wordBreak}),B=[];!(t=r.next()).done;)!function(){var A,e;t.value&&(A=t.value.slice(),A=Q(A),e="",A.forEach(function(A){-1===qr.indexOf(A)?e+=g(A):(e.length&&B.push(e),B.push(g(A)),e="")}),e.length&&B.push(e))}();return B},zr=function(A,e,t){var B,n,s,o,i;this.text=$r(e.data,t.textTransform),this.textBounds=(B=A,A=this.text,s=e,A=_r(A,n=t),o=[],i=0,A.forEach(function(A){var e,t,r;n.textDecorationLine.length||0<A.trim().length?Xr.SUPPORT_RANGE_BOUNDS?1<(r=Wr(s,i,A.length).getClientRects()).length?(e=Zr(A),t=0,e.forEach(function(A){o.push(new Jr(A,d.fromDOMRectList(B,Wr(s,t+i,A.length).getClientRects()))),t+=A.length})):o.push(new Jr(A,d.fromDOMRectList(B,r))):(r=s.splitText(A.length),o.push(new Jr(A,Yr(B,s))),s=r):Xr.SUPPORT_RANGE_BOUNDS||(s=s.splitText(A.length)),i+=A.length}),o)},$r=function(A,e){switch(e){case 1:return A.toLowerCase();case 3:return A.replace(AB,eB);case 2:return A.toUpperCase();default:return A}},AB=/(^|\s|:|-|\(|\))([a-z])/g,eB=function(A,e,t){return 0<A.length?e+t.toUpperCase():A},tB=(A(rB,Sr=ur),rB);function rB(A,e){A=Sr.call(this,A,e)||this;return A.src=e.currentSrc||e.src,A.intrinsicWidth=e.naturalWidth,A.intrinsicHeight=e.naturalHeight,A.context.cache.addImage(A.src),A}var BB,nB=(A(sB,BB=ur),sB);function sB(A,e){A=BB.call(this,A,e)||this;return A.canvas=e,A.intrinsicWidth=e.width,A.intrinsicHeight=e.height,A}var oB,iB=(A(QB,oB=ur),QB);function QB(A,e){var t=oB.call(this,A,e)||this,r=new XMLSerializer,A=f(A,e);return e.setAttribute("width",A.width+"px"),e.setAttribute("height",A.height+"px"),t.svg="data:image/svg+xml,"+encodeURIComponent(r.serializeToString(e)),t.intrinsicWidth=e.width.baseVal.value,t.intrinsicHeight=e.height.baseVal.value,t.context.cache.addImage(t.svg),t}var cB,aB=(A(gB,cB=ur),gB);function gB(A,e){A=cB.call(this,A,e)||this;return A.value=e.value,A}var wB,UB=(A(lB,wB=ur),lB);function lB(A,e){A=wB.call(this,A,e)||this;return A.start=e.start,A.reversed="boolean"==typeof e.reversed&&!0===e.reversed,A}var CB,uB=[{type:15,flags:0,unit:"px",number:3}],FB=[{type:16,flags:0,number:50}],hB="checkbox",dB="radio",fB="password",HB=707406591,pB=(A(EB,CB=ur),EB);function EB(A,e){var t=CB.call(this,A,e)||this;switch(t.type=e.type.toLowerCase(),t.checked=e.checked,t.value=0===(e=(A=e).type===fB?new Array(A.value.length+1).join(""):A.value).length?A.placeholder||"":e,t.type!==hB&&t.type!==dB||(t.styles.backgroundColor=3739148031,t.styles.borderTopColor=t.styles.borderRightColor=t.styles.borderBottomColor=t.styles.borderLeftColor=2779096575,t.styles.borderTopWidth=t.styles.borderRightWidth=t.styles.borderBottomWidth=t.styles.borderLeftWidth=1,t.styles.borderTopStyle=t.styles.borderRightStyle=t.styles.borderBottomStyle=t.styles.borderLeftStyle=1,t.styles.backgroundClip=[0],t.styles.backgroundOrigin=[0],t.bounds=(e=t.bounds).width>e.height?new d(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new d(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e),t.type){case hB:t.styles.borderTopRightRadius=t.styles.borderTopLeftRadius=t.styles.borderBottomRightRadius=t.styles.borderBottomLeftRadius=uB;break;case dB:t.styles.borderTopRightRadius=t.styles.borderTopLeftRadius=t.styles.borderBottomRightRadius=t.styles.borderBottomLeftRadius=FB}return t}var IB,yB=(A(KB,IB=ur),KB);function KB(A,e){A=IB.call(this,A,e)||this,e=e.options[e.selectedIndex||0];return A.value=e&&e.text||"",A}var mB,LB=(A(bB,mB=ur),bB);function bB(A,e){A=mB.call(this,A,e)||this;return A.value=e.value,A}var DB,vB=(A(xB,DB=ur),xB);function xB(A,e){var t,r,B=DB.call(this,A,e)||this;B.src=e.src,B.width=parseInt(e.width,10)||0,B.height=parseInt(e.height,10)||0,B.backgroundColor=B.styles.backgroundColor;try{e.contentWindow&&e.contentWindow.document&&e.contentWindow.document.documentElement&&(B.tree=kB(A,e.contentWindow.document.documentElement),t=e.contentWindow.document.documentElement?fe(A,getComputedStyle(e.contentWindow.document.documentElement).backgroundColor):Le.TRANSPARENT,r=e.contentWindow.document.body?fe(A,getComputedStyle(e.contentWindow.document.body).backgroundColor):Le.TRANSPARENT,B.backgroundColor=oe(t)?oe(r)?B.styles.backgroundColor:r:t)}catch(A){}return B}function MB(A){return"VIDEO"===A.tagName}function SB(A){return"STYLE"===A.tagName}function TB(A){return 0<A.tagName.indexOf("-")}var GB=["OL","UL","MENU"],OB=function(e,A,t,r){for(var B=A.firstChild;B;B=s){var n,s=B.nextSibling;PB(B)&&0<B.data.trim().length?t.textNodes.push(new zr(e,B,t.styles)):XB(B)&&(rn(B)&&B.assignedNodes?B.assignedNodes().forEach(function(A){return OB(e,A,t,r)}):(n=VB(e,B)).styles.isVisible()&&(RB(B,n,r)?n.flags|=4:NB(n.styles)&&(n.flags|=2),-1!==GB.indexOf(B.tagName)&&(n.flags|=8),t.elements.push(n),B.slot,B.shadowRoot?OB(e,B.shadowRoot,n,r):en(B)||qB(B)||tn(B)||OB(e,B,n,r)))}},VB=function(A,e){return new($B(e)?tB:zB(e)?nB:qB(e)?iB:WB(e)?aB:ZB(e)?UB:_B(e)?pB:tn(e)?yB:en(e)?LB:An(e)?vB:ur)(A,e)},kB=function(A,e){var t=VB(A,e);return t.flags|=4,OB(A,e,t,t),t},RB=function(A,e,t){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||jB(A)&&t.styles.isTransparent()},NB=function(A){return A.isPositioned()||A.isFloating()},PB=function(A){return A.nodeType===Node.TEXT_NODE},XB=function(A){return A.nodeType===Node.ELEMENT_NODE},JB=function(A){return XB(A)&&void 0!==A.style&&!YB(A)},YB=function(A){return"object"==typeof A.className},WB=function(A){return"LI"===A.tagName},ZB=function(A){return"OL"===A.tagName},_B=function(A){return"INPUT"===A.tagName},qB=function(A){return"svg"===A.tagName},jB=function(A){return"BODY"===A.tagName},zB=function(A){return"CANVAS"===A.tagName},$B=function(A){return"IMG"===A.tagName},An=function(A){return"IFRAME"===A.tagName},en=function(A){return"TEXTAREA"===A.tagName},tn=function(A){return"SELECT"===A.tagName},rn=function(A){return"SLOT"===A.tagName},Bn=(nn.prototype.getCounterValue=function(A){A=this.counters[A];return A&&A.length?A[A.length-1]:1},nn.prototype.getCounterValues=function(A){A=this.counters[A];return A||[]},nn.prototype.pop=function(A){var e=this;A.forEach(function(A){return e.counters[A].pop()})},nn.prototype.parse=function(A){var t=this,e=A.counterIncrement,A=A.counterReset,r=!0;null!==e&&e.forEach(function(A){var e=t.counters[A.counter];e&&0!==A.increment&&(r=!1,e.length||e.push(1),e[Math.max(0,e.length-1)]+=A.increment)});var B=[];return r&&A.forEach(function(A){var e=t.counters[A.counter];B.push(A.counter),(e=e||(t.counters[A.counter]=[])).push(A.reset)}),B},nn);function nn(){this.counters={}}function sn(r,A,e,B,t,n){return r<A||e<r?Fn(r,t,0<n.length):B.integers.reduce(function(A,e,t){for(;e<=r;)r-=e,A+=B.values[t];return A},"")+n}function on(A,e,t,r){for(var B="";t||A--,B=r(A)+B,e<=(A/=e)*e;);return B}function Qn(A,e,t,r,B){var n=t-e+1;return(A<0?"-":"")+(on(Math.abs(A),n,r,function(A){return g(Math.floor(A%n)+e)})+B)}function cn(A,e,t){void 0===t&&(t=". ");var r=e.length;return on(Math.abs(A),r,!1,function(A){return e[Math.floor(A%r)]})+t}function an(A,e,t,r,B,n){if(A<-9999||9999<A)return Fn(A,4,0<B.length);var s=Math.abs(A),o=B;if(0===s)return e[0]+o;for(var i=0;0<s&&i<=4;i++){var Q=s%10;0==Q&&Pt(n,1)&&""!==o?o=e[Q]+o:1<Q||1==Q&&0===i||1==Q&&1===i&&Pt(n,2)||1==Q&&1===i&&Pt(n,4)&&100<A||1==Q&&1<i&&Pt(n,8)?o=e[Q]+(0<i?t[i-1]:"")+o:1==Q&&0<i&&(o=t[i-1]+o),s=Math.floor(s/10)}return(A<0?r:"")+o}var gn,wn={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Un={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},ln={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Cn={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},un="",Fn=function(A,e,t){var r=t?". ":"",B=t?"":"",n=t?", ":"",s=t?" ":"";switch(e){case 0:return""+s;case 1:return""+s;case 2:return""+s;case 5:var o=Qn(A,48,57,!0,r);return o.length<4?"0"+o:o;case 4:return cn(A,"",B);case 6:return sn(A,1,3999,wn,3,r).toLowerCase();case 7:return sn(A,1,3999,wn,3,r);case 8:return Qn(A,945,969,!1,r);case 9:return Qn(A,97,122,!1,r);case 10:return Qn(A,65,90,!1,r);case 11:return Qn(A,1632,1641,!0,r);case 12:case 49:return sn(A,1,9999,Un,3,r);case 35:return sn(A,1,9999,Un,3,r).toLowerCase();case 13:return Qn(A,2534,2543,!0,r);case 14:case 30:return Qn(A,6112,6121,!0,r);case 15:return cn(A,"",B);case 16:return cn(A,"",B);case 17:case 48:return an(A,"","","",B,14);case 47:return an(A,"","","",B,15);case 42:return an(A,"","","",B,14);case 41:return an(A,"","","",B,15);case 26:return an(A,"","","",B,0);case 25:return an(A,"","","",B,7);case 31:return an(A,"","",un,n,7);case 33:return an(A,"","",un,n,0);case 32:return an(A,"","",un,n,7);case 18:return Qn(A,2406,2415,!0,r);case 20:return sn(A,1,19999,Cn,3,r);case 21:return Qn(A,2790,2799,!0,r);case 22:return Qn(A,2662,2671,!0,r);case 22:return sn(A,1,10999,ln,3,r);case 23:return cn(A,"");case 24:return cn(A,"");case 27:return Qn(A,3302,3311,!0,r);case 28:return cn(A,"",B);case 29:return cn(A,"",B);case 34:return Qn(A,3792,3801,!0,r);case 37:return Qn(A,6160,6169,!0,r);case 38:return Qn(A,4160,4169,!0,r);case 39:return Qn(A,2918,2927,!0,r);case 40:return Qn(A,1776,1785,!0,r);case 43:return Qn(A,3046,3055,!0,r);case 44:return Qn(A,3174,3183,!0,r);case 45:return Qn(A,3664,3673,!0,r);case 46:return Qn(A,3872,3881,!0,r);default:return Qn(A,48,57,!0,r)}},hn="data-html2canvas-ignore",dn=(fn.prototype.toIFrame=function(A,r){var e=this,B=pn(A,r);if(!B.contentWindow)return Promise.reject("Unable to find iframe window");var t=A.defaultView.pageXOffset,n=A.defaultView.pageYOffset,s=B.contentWindow,o=s.document,A=In(B).then(function(){return a(e,void 0,void 0,function(){var e,t;return H(this,function(A){switch(A.label){case 0:return this.scrolledElements.forEach(bn),s&&(s.scrollTo(r.left,r.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||s.scrollY===r.top&&s.scrollX===r.left||(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(s.scrollX-r.left,s.scrollY-r.top,0,0))),e=this.options.onclone,void 0===(t=this.clonedReferenceElement)?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:o.fonts&&o.fonts.ready?[4,o.fonts.ready]:[3,2];case 1:A.sent(),A.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,En(o)]:[3,4];case 3:A.sent(),A.label=4;case 4:return"function"==typeof e?[2,Promise.resolve().then(function(){return e(o,t)}).then(function(){return B})]:[2,B]}})})});return o.open(),o.write(mn(document.doctype)+"<html></html>"),Ln(this.referenceElement.ownerDocument,t,n),o.replaceChild(o.adoptNode(this.documentElement),o.documentElement),o.close(),A},fn.prototype.createElementClone=function(A){if(Cr(A,2),zB(A))return this.createCanvasClone(A);if(MB(A))return this.createVideoClone(A);if(SB(A))return this.createStyleClone(A);var e=A.cloneNode(!1);return $B(e)&&($B(A)&&A.currentSrc&&A.currentSrc!==A.src&&(e.src=A.currentSrc,e.srcset=""),"lazy"===e.loading&&(e.loading="eager")),TB(e)?this.createCustomElementClone(e):e},fn.prototype.createCustomElementClone=function(A){var e=document.createElement("html2canvascustomelement");return Kn(A.style,e),e},fn.prototype.createStyleClone=function(A){try{var e=A.sheet;if(e&&e.cssRules){var t=[].slice.call(e.cssRules,0).reduce(function(A,e){return e&&"string"==typeof e.cssText?A+e.cssText:A},""),r=A.cloneNode(!1);return r.textContent=t,r}}catch(A){if(this.context.logger.error("Unable to access cssRules property",A),"SecurityError"!==A.name)throw A}return A.cloneNode(!1)},fn.prototype.createCanvasClone=function(e){var A;if(this.options.inlineImages&&e.ownerDocument){var t=e.ownerDocument.createElement("img");try{return t.src=e.toDataURL(),t}catch(A){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}t=e.cloneNode(!1);try{t.width=e.width,t.height=e.height;var r,B,n=e.getContext("2d"),s=t.getContext("2d");return s&&(!this.options.allowTaint&&n?s.putImageData(n.getImageData(0,0,e.width,e.height),0,0):(!(r=null!==(A=e.getContext("webgl2"))&&void 0!==A?A:e.getContext("webgl"))||!1===(null==(B=r.getContextAttributes())?void 0:B.preserveDrawingBuffer)&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e),s.drawImage(e,0,0))),t}catch(A){this.context.logger.info("Unable to clone canvas as it is tainted",e)}return t},fn.prototype.createVideoClone=function(e){var A=e.ownerDocument.createElement("canvas");A.width=e.offsetWidth,A.height=e.offsetHeight;var t=A.getContext("2d");try{return t&&(t.drawImage(e,0,0,A.width,A.height),this.options.allowTaint||t.getImageData(0,0,A.width,A.height)),A}catch(A){this.context.logger.info("Unable to clone video as it is tainted",e)}A=e.ownerDocument.createElement("canvas");return A.width=e.offsetWidth,A.height=e.offsetHeight,A},fn.prototype.appendChildNode=function(A,e,t){XB(e)&&("SCRIPT"===e.tagName||e.hasAttribute(hn)||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(e))||this.options.copyStyles&&XB(e)&&SB(e)||A.appendChild(this.cloneNode(e,t))},fn.prototype.cloneChildNodes=function(A,e,t){for(var r,B=this,n=(A.shadowRoot||A).firstChild;n;n=n.nextSibling)XB(n)&&rn(n)&&"function"==typeof n.assignedNodes?(r=n.assignedNodes()).length&&r.forEach(function(A){return B.appendChildNode(e,A,t)}):this.appendChildNode(e,n,t)},fn.prototype.cloneNode=function(A,e){if(PB(A))return document.createTextNode(A.data);if(!A.ownerDocument)return A.cloneNode(!1);var t=A.ownerDocument.defaultView;if(t&&XB(A)&&(JB(A)||YB(A))){var r=this.createElementClone(A);r.style.transitionProperty="none";var B=t.getComputedStyle(A),n=t.getComputedStyle(A,":before"),s=t.getComputedStyle(A,":after");this.referenceElement===A&&JB(r)&&(this.clonedReferenceElement=r),jB(r)&&Mn(r);t=this.counters.parse(new Ur(this.context,B)),n=this.resolvePseudoContent(A,r,n,gn.BEFORE);TB(A)&&(e=!0),MB(A)||this.cloneChildNodes(A,r,e),n&&r.insertBefore(n,r.firstChild);s=this.resolvePseudoContent(A,r,s,gn.AFTER);return s&&r.appendChild(s),this.counters.pop(t),(B&&(this.options.copyStyles||YB(A))&&!An(A)||e)&&Kn(B,r),0===A.scrollTop&&0===A.scrollLeft||this.scrolledElements.push([r,A.scrollLeft,A.scrollTop]),(en(A)||tn(A))&&(en(r)||tn(r))&&(r.value=A.value),r}return A.cloneNode(!1)},fn.prototype.resolvePseudoContent=function(o,A,e,t){var i=this;if(e){var r=e.content,Q=A.ownerDocument;if(Q&&r&&"none"!==r&&"-moz-alt-content"!==r&&"none"!==e.display){this.counters.parse(new Ur(this.context,e));var c=new wr(this.context,e),a=Q.createElement("html2canvaspseudoelement");Kn(e,a),c.content.forEach(function(A){if(0===A.type)a.appendChild(Q.createTextNode(A.value));else if(22===A.type){var e=Q.createElement("img");e.src=A.value,e.style.opacity="1",a.appendChild(e)}else if(18===A.type){var t,r,B,n,s;"attr"===A.name?(e=A.values.filter(_A)).length&&a.appendChild(Q.createTextNode(o.getAttribute(e[0].value)||"")):"counter"===A.name?(B=(r=A.values.filter($A))[0],r=r[1],B&&_A(B)&&(t=i.counters.getCounterValue(B.value),s=r&&_A(r)?pt.parse(i.context,r.value):3,a.appendChild(Q.createTextNode(Fn(t,s,!1))))):"counters"===A.name&&(B=(t=A.values.filter($A))[0],s=t[1],r=t[2],B&&_A(B)&&(B=i.counters.getCounterValues(B.value),n=r&&_A(r)?pt.parse(i.context,r.value):3,s=s&&0===s.type?s.value:"",s=B.map(function(A){return Fn(A,n,!1)}).join(s),a.appendChild(Q.createTextNode(s))))}else if(20===A.type)switch(A.value){case"open-quote":a.appendChild(Q.createTextNode(Xt(c.quotes,i.quoteDepth++,!0)));break;case"close-quote":a.appendChild(Q.createTextNode(Xt(c.quotes,--i.quoteDepth,!1)));break;default:a.appendChild(Q.createTextNode(A.value))}}),a.className=Dn+" "+vn;t=t===gn.BEFORE?" "+Dn:" "+vn;return YB(A)?A.className.baseValue+=t:A.className+=t,a}}},fn.destroy=function(A){return!!A.parentNode&&(A.parentNode.removeChild(A),!0)},fn);function fn(A,e,t){if(this.context=A,this.options=t,this.scrolledElements=[],this.referenceElement=e,this.counters=new Bn,this.quoteDepth=0,!e.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(e.ownerDocument.documentElement,!1)}(he=gn=gn||{})[he.BEFORE=0]="BEFORE",he[he.AFTER=1]="AFTER";function Hn(e){return new Promise(function(A){!e.complete&&e.src?(e.onload=A,e.onerror=A):A()})}var pn=function(A,e){var t=A.createElement("iframe");return t.className="html2canvas-container",t.style.visibility="hidden",t.style.position="fixed",t.style.left="-10000px",t.style.top="0px",t.style.border="0",t.width=e.width.toString(),t.height=e.height.toString(),t.scrolling="no",t.setAttribute(hn,"true"),A.body.appendChild(t),t},En=function(A){return Promise.all([].slice.call(A.images,0).map(Hn))},In=function(B){return new Promise(function(e,A){var t=B.contentWindow;if(!t)return A("No window assigned for iframe");var r=t.document;t.onload=B.onload=function(){t.onload=B.onload=null;var A=setInterval(function(){0<r.body.childNodes.length&&"complete"===r.readyState&&(clearInterval(A),e(B))},50)}})},yn=["all","d","content"],Kn=function(A,e){for(var t=A.length-1;0<=t;t--){var r=A.item(t);-1===yn.indexOf(r)&&e.style.setProperty(r,A.getPropertyValue(r))}return e},mn=function(A){var e="";return A&&(e+="<!DOCTYPE ",A.name&&(e+=A.name),A.internalSubset&&(e+=A.internalSubset),A.publicId&&(e+='"'+A.publicId+'"'),A.systemId&&(e+='"'+A.systemId+'"'),e+=">"),e},Ln=function(A,e,t){A&&A.defaultView&&(e!==A.defaultView.pageXOffset||t!==A.defaultView.pageYOffset)&&A.defaultView.scrollTo(e,t)},bn=function(A){var e=A[0],t=A[1],A=A[2];e.scrollLeft=t,e.scrollTop=A},Dn="___html2canvas___pseudoelement_before",vn="___html2canvas___pseudoelement_after",xn='{\n    content: "" !important;\n    display: none !important;\n}',Mn=function(A){Sn(A,"."+Dn+":before"+xn+"\n         ."+vn+":after"+xn)},Sn=function(A,e){var t=A.ownerDocument;t&&((t=t.createElement("style")).textContent=e,A.appendChild(t))},Tn=(Gn.getOrigin=function(A){var e=Gn._link;return e?(e.href=A,e.href=e.href,e.protocol+e.hostname+e.port):"about:blank"},Gn.isSameOrigin=function(A){return Gn.getOrigin(A)===Gn._origin},Gn.setContext=function(A){Gn._link=A.document.createElement("a"),Gn._origin=Gn.getOrigin(A.location.href)},Gn._origin="about:blank",Gn);function Gn(){}var On=(Vn.prototype.addImage=function(A){var e=Promise.resolve();return this.has(A)||(Yn(A)||Pn(A))&&(this._cache[A]=this.loadImage(A)).catch(function(){}),e},Vn.prototype.match=function(A){return this._cache[A]},Vn.prototype.loadImage=function(s){return a(this,void 0,void 0,function(){var e,r,t,B,n=this;return H(this,function(A){switch(A.label){case 0:return(e=Tn.isSameOrigin(s),r=!Xn(s)&&!0===this._options.useCORS&&Xr.SUPPORT_CORS_IMAGES&&!e,t=!Xn(s)&&!e&&!Yn(s)&&"string"==typeof this._options.proxy&&Xr.SUPPORT_CORS_XHR&&!r,e||!1!==this._options.allowTaint||Xn(s)||Yn(s)||t||r)?(B=s,t?[4,this.proxy(B)]:[3,2]):[2];case 1:B=A.sent(),A.label=2;case 2:return this.context.logger.debug("Added image "+s.substring(0,256)),[4,new Promise(function(A,e){var t=new Image;t.onload=function(){return A(t)},t.onerror=e,(Jn(B)||r)&&(t.crossOrigin="anonymous"),t.src=B,!0===t.complete&&setTimeout(function(){return A(t)},500),0<n._options.imageTimeout&&setTimeout(function(){return e("Timed out ("+n._options.imageTimeout+"ms) loading image")},n._options.imageTimeout)})];case 3:return[2,A.sent()]}})})},Vn.prototype.has=function(A){return void 0!==this._cache[A]},Vn.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},Vn.prototype.proxy=function(s){var o=this,i=this._options.proxy;if(!i)throw new Error("No proxy defined");var Q=s.substring(0,256);return new Promise(function(e,t){var r=Xr.SUPPORT_RESPONSE_TYPE?"blob":"text",B=new XMLHttpRequest;B.onload=function(){var A;200===B.status?"text"==r?e(B.response):((A=new FileReader).addEventListener("load",function(){return e(A.result)},!1),A.addEventListener("error",function(A){return t(A)},!1),A.readAsDataURL(B.response)):t("Failed to proxy resource "+Q+" with status code "+B.status)},B.onerror=t;var A,n=-1<i.indexOf("?")?"&":"?";B.open("GET",i+n+"url="+encodeURIComponent(s)+"&responseType="+r),"text"!=r&&B instanceof XMLHttpRequest&&(B.responseType=r),o._options.imageTimeout&&(A=o._options.imageTimeout,B.timeout=A,B.ontimeout=function(){return t("Timed out ("+A+"ms) proxying "+Q)}),B.send()})},Vn);function Vn(A,e){this.context=A,this._options=e,this._cache={}}var kn=/^data:image\/svg\+xml/i,Rn=/^data:image\/.*;base64,/i,Nn=/^data:image\/.*/i,Pn=function(A){return Xr.SUPPORT_SVG_DRAWING||!Wn(A)},Xn=function(A){return Nn.test(A)},Jn=function(A){return Rn.test(A)},Yn=function(A){return"blob"===A.substr(0,4)},Wn=function(A){return"svg"===A.substr(-3).toLowerCase()||kn.test(A)},Zn=(_n.prototype.add=function(A,e){return new _n(this.x+A,this.y+e)},_n);function _n(A,e){this.type=0,this.x=A,this.y=e}function qn(A,e,t){return new Zn(A.x+(e.x-A.x)*t,A.y+(e.y-A.y)*t)}var jn=(zn.prototype.subdivide=function(A,e){var t=qn(this.start,this.startControl,A),r=qn(this.startControl,this.endControl,A),B=qn(this.endControl,this.end,A),n=qn(t,r,A),r=qn(r,B,A),A=qn(n,r,A);return e?new zn(this.start,t,n,A):new zn(A,r,B,this.end)},zn.prototype.add=function(A,e){return new zn(this.start.add(A,e),this.startControl.add(A,e),this.endControl.add(A,e),this.end.add(A,e))},zn.prototype.reverse=function(){return new zn(this.end,this.endControl,this.startControl,this.start)},zn);function zn(A,e,t,r){this.type=1,this.start=A,this.startControl=e,this.endControl=t,this.end=r}function $n(A){return 1===A.type}var As,es=function(A){var e=A.styles,t=A.bounds,r=(C=Be(e.borderTopLeftRadius,t.width,t.height))[0],B=C[1],n=(u=Be(e.borderTopRightRadius,t.width,t.height))[0],s=u[1],o=(F=Be(e.borderBottomRightRadius,t.width,t.height))[0],i=F[1],Q=(h=Be(e.borderBottomLeftRadius,t.width,t.height))[0],c=h[1];(d=[]).push((r+n)/t.width),d.push((Q+o)/t.width),d.push((B+c)/t.height),d.push((s+i)/t.height),1<(f=Math.max.apply(Math,d))&&(r/=f,B/=f,n/=f,s/=f,o/=f,i/=f,Q/=f,c/=f);var a=t.width-n,g=t.height-i,w=t.width-o,U=t.height-c,l=e.borderTopWidth,C=e.borderRightWidth,u=e.borderBottomWidth,F=e.borderLeftWidth,h=Ue(e.paddingTop,A.bounds.width),d=Ue(e.paddingRight,A.bounds.width),f=Ue(e.paddingBottom,A.bounds.width),A=Ue(e.paddingLeft,A.bounds.width);this.topLeftBorderDoubleOuterBox=0<r||0<B?ss(t.left+F/3,t.top+l/3,r-F/3,B-l/3,As.TOP_LEFT):new Zn(t.left+F/3,t.top+l/3),this.topRightBorderDoubleOuterBox=0<r||0<B?ss(t.left+a,t.top+l/3,n-C/3,s-l/3,As.TOP_RIGHT):new Zn(t.left+t.width-C/3,t.top+l/3),this.bottomRightBorderDoubleOuterBox=0<o||0<i?ss(t.left+w,t.top+g,o-C/3,i-u/3,As.BOTTOM_RIGHT):new Zn(t.left+t.width-C/3,t.top+t.height-u/3),this.bottomLeftBorderDoubleOuterBox=0<Q||0<c?ss(t.left+F/3,t.top+U,Q-F/3,c-u/3,As.BOTTOM_LEFT):new Zn(t.left+F/3,t.top+t.height-u/3),this.topLeftBorderDoubleInnerBox=0<r||0<B?ss(t.left+2*F/3,t.top+2*l/3,r-2*F/3,B-2*l/3,As.TOP_LEFT):new Zn(t.left+2*F/3,t.top+2*l/3),this.topRightBorderDoubleInnerBox=0<r||0<B?ss(t.left+a,t.top+2*l/3,n-2*C/3,s-2*l/3,As.TOP_RIGHT):new Zn(t.left+t.width-2*C/3,t.top+2*l/3),this.bottomRightBorderDoubleInnerBox=0<o||0<i?ss(t.left+w,t.top+g,o-2*C/3,i-2*u/3,As.BOTTOM_RIGHT):new Zn(t.left+t.width-2*C/3,t.top+t.height-2*u/3),this.bottomLeftBorderDoubleInnerBox=0<Q||0<c?ss(t.left+2*F/3,t.top+U,Q-2*F/3,c-2*u/3,As.BOTTOM_LEFT):new Zn(t.left+2*F/3,t.top+t.height-2*u/3),this.topLeftBorderStroke=0<r||0<B?ss(t.left+F/2,t.top+l/2,r-F/2,B-l/2,As.TOP_LEFT):new Zn(t.left+F/2,t.top+l/2),this.topRightBorderStroke=0<r||0<B?ss(t.left+a,t.top+l/2,n-C/2,s-l/2,As.TOP_RIGHT):new Zn(t.left+t.width-C/2,t.top+l/2),this.bottomRightBorderStroke=0<o||0<i?ss(t.left+w,t.top+g,o-C/2,i-u/2,As.BOTTOM_RIGHT):new Zn(t.left+t.width-C/2,t.top+t.height-u/2),this.bottomLeftBorderStroke=0<Q||0<c?ss(t.left+F/2,t.top+U,Q-F/2,c-u/2,As.BOTTOM_LEFT):new Zn(t.left+F/2,t.top+t.height-u/2),this.topLeftBorderBox=0<r||0<B?ss(t.left,t.top,r,B,As.TOP_LEFT):new Zn(t.left,t.top),this.topRightBorderBox=0<n||0<s?ss(t.left+a,t.top,n,s,As.TOP_RIGHT):new Zn(t.left+t.width,t.top),this.bottomRightBorderBox=0<o||0<i?ss(t.left+w,t.top+g,o,i,As.BOTTOM_RIGHT):new Zn(t.left+t.width,t.top+t.height),this.bottomLeftBorderBox=0<Q||0<c?ss(t.left,t.top+U,Q,c,As.BOTTOM_LEFT):new Zn(t.left,t.top+t.height),this.topLeftPaddingBox=0<r||0<B?ss(t.left+F,t.top+l,Math.max(0,r-F),Math.max(0,B-l),As.TOP_LEFT):new Zn(t.left+F,t.top+l),this.topRightPaddingBox=0<n||0<s?ss(t.left+Math.min(a,t.width-C),t.top+l,a>t.width+C?0:Math.max(0,n-C),Math.max(0,s-l),As.TOP_RIGHT):new Zn(t.left+t.width-C,t.top+l),this.bottomRightPaddingBox=0<o||0<i?ss(t.left+Math.min(w,t.width-F),t.top+Math.min(g,t.height-u),Math.max(0,o-C),Math.max(0,i-u),As.BOTTOM_RIGHT):new Zn(t.left+t.width-C,t.top+t.height-u),this.bottomLeftPaddingBox=0<Q||0<c?ss(t.left+F,t.top+Math.min(U,t.height-u),Math.max(0,Q-F),Math.max(0,c-u),As.BOTTOM_LEFT):new Zn(t.left+F,t.top+t.height-u),this.topLeftContentBox=0<r||0<B?ss(t.left+F+A,t.top+l+h,Math.max(0,r-(F+A)),Math.max(0,B-(l+h)),As.TOP_LEFT):new Zn(t.left+F+A,t.top+l+h),this.topRightContentBox=0<n||0<s?ss(t.left+Math.min(a,t.width+F+A),t.top+l+h,a>t.width+F+A?0:n-F+A,s-(l+h),As.TOP_RIGHT):new Zn(t.left+t.width-(C+d),t.top+l+h),this.bottomRightContentBox=0<o||0<i?ss(t.left+Math.min(w,t.width-(F+A)),t.top+Math.min(g,t.height+l+h),Math.max(0,o-(C+d)),i-(u+f),As.BOTTOM_RIGHT):new Zn(t.left+t.width-(C+d),t.top+t.height-(u+f)),this.bottomLeftContentBox=0<Q||0<c?ss(t.left+F+A,t.top+U,Math.max(0,Q-(F+A)),c-(u+f),As.BOTTOM_LEFT):new Zn(t.left+F+A,t.top+t.height-(u+f))};(he=As=As||{})[he.TOP_LEFT=0]="TOP_LEFT",he[he.TOP_RIGHT=1]="TOP_RIGHT",he[he.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",he[he.BOTTOM_LEFT=3]="BOTTOM_LEFT";function ts(A){return[A.topLeftBorderBox,A.topRightBorderBox,A.bottomRightBorderBox,A.bottomLeftBorderBox]}function rs(A){return[A.topLeftPaddingBox,A.topRightPaddingBox,A.bottomRightPaddingBox,A.bottomLeftPaddingBox]}function Bs(A){return 1===A.type}function ns(A,t){return A.length===t.length&&A.some(function(A,e){return A===t[e]})}var ss=function(A,e,t,r,B){var n=(Math.sqrt(2)-1)/3*4,s=t*n,o=r*n,i=A+t,Q=e+r;switch(B){case As.TOP_LEFT:return new jn(new Zn(A,Q),new Zn(A,Q-o),new Zn(i-s,e),new Zn(i,e));case As.TOP_RIGHT:return new jn(new Zn(A,e),new Zn(A+s,e),new Zn(i,Q-o),new Zn(i,Q));case As.BOTTOM_RIGHT:return new jn(new Zn(i,e),new Zn(i,e+o),new Zn(A+s,Q),new Zn(A,Q));default:As.BOTTOM_LEFT;return new jn(new Zn(i,Q),new Zn(i-s,Q),new Zn(A,e+o),new Zn(A,e))}},os=function(A,e,t){this.offsetX=A,this.offsetY=e,this.matrix=t,this.type=0,this.target=6},is=function(A,e){this.path=A,this.target=e,this.type=1},Qs=function(A){this.opacity=A,this.type=2,this.target=6},cs=function(A){this.element=A,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]},as=(gs.prototype.getEffects=function(e){for(var A=-1===[2,3].indexOf(this.container.styles.position),t=this.parent,r=this.effects.slice(0);t;){var B,n,s=t.effects.filter(function(A){return!Bs(A)});A||0!==t.container.styles.position||!t.parent?(r.unshift.apply(r,s),A=-1===[2,3].indexOf(t.container.styles.position),0!==t.container.styles.overflowX&&(B=ts(t.curves),n=rs(t.curves),ns(B,n)||r.unshift(new is(n,6)))):r.unshift.apply(r,s),t=t.parent}return r.filter(function(A){return Pt(A.target,e)})},gs);function gs(A,e){var t,r;this.container=A,this.parent=e,this.effects=[],this.curves=new es(this.container),this.container.styles.opacity<1&&this.effects.push(new Qs(this.container.styles.opacity)),null!==this.container.styles.transform&&(e=this.container.bounds.left+this.container.styles.transformOrigin[0].number,t=this.container.bounds.top+this.container.styles.transformOrigin[1].number,r=this.container.styles.transform,this.effects.push(new os(e,t,r))),0!==this.container.styles.overflowX&&(t=ts(this.curves),r=rs(this.curves),ns(t,r)?this.effects.push(new is(t,6)):(this.effects.push(new is(t,2)),this.effects.push(new is(r,4))))}function ws(A,e){switch(e){case 0:return Hs(A.topLeftBorderBox,A.topLeftPaddingBox,A.topRightBorderBox,A.topRightPaddingBox);case 1:return Hs(A.topRightBorderBox,A.topRightPaddingBox,A.bottomRightBorderBox,A.bottomRightPaddingBox);case 2:return Hs(A.bottomRightBorderBox,A.bottomRightPaddingBox,A.bottomLeftBorderBox,A.bottomLeftPaddingBox);default:return Hs(A.bottomLeftBorderBox,A.bottomLeftPaddingBox,A.topLeftBorderBox,A.topLeftPaddingBox)}}function Us(A){var e=A.bounds,A=A.styles;return e.add(A.borderLeftWidth,A.borderTopWidth,-(A.borderRightWidth+A.borderLeftWidth),-(A.borderTopWidth+A.borderBottomWidth))}function ls(A){var e=A.styles,t=A.bounds,r=Ue(e.paddingLeft,t.width),B=Ue(e.paddingRight,t.width),n=Ue(e.paddingTop,t.width),A=Ue(e.paddingBottom,t.width);return t.add(r+e.borderLeftWidth,n+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+B),-(e.borderTopWidth+e.borderBottomWidth+n+A))}function Cs(A,e,t){var r=(B=Es(A.styles.backgroundOrigin,e),n=A,0===B?n.bounds:(2===B?ls:Us)(n)),B=(s=Es(A.styles.backgroundClip,e),o=A,0===s?o.bounds:(2===s?ls:Us)(o)),n=ps(Es(A.styles.backgroundSize,e),t,r),s=n[0],o=n[1],t=Be(Es(A.styles.backgroundPosition,e),r.width-s,r.height-o);return[Is(Es(A.styles.backgroundRepeat,e),t,n,r,B),Math.round(r.left+t[0]),Math.round(r.top+t[1]),s,o]}function us(A){return _A(A)&&A.value===Ve.AUTO}function Fs(A){return"number"==typeof A}var hs=function(Q,c,a,g){Q.container.elements.forEach(function(A){var e=Pt(A.flags,4),t=Pt(A.flags,2),r=new as(A,Q);Pt(A.styles.display,2048)&&g.push(r);var B,n,s,o,i=Pt(A.flags,8)?[]:g;e||t?(B=e||A.styles.isPositioned()?a:c,t=new cs(r),A.styles.isPositioned()||A.styles.opacity<1||A.styles.isTransformed()?(n=A.styles.zIndex.order)<0?(s=0,B.negativeZIndex.some(function(A,e){return n>A.element.container.styles.zIndex.order?(s=e,!1):0<s}),B.negativeZIndex.splice(s,0,t)):0<n?(o=0,B.positiveZIndex.some(function(A,e){return n>=A.element.container.styles.zIndex.order?(o=e+1,!1):0<o}),B.positiveZIndex.splice(o,0,t)):B.zeroOrAutoZIndexOrTransformedOrOpacity.push(t):(A.styles.isFloating()?B.nonPositionedFloats:B.nonPositionedInlineLevel).push(t),hs(r,t,e?t:a,i)):((A.styles.isInlineLevel()?c.inlineLevel:c.nonInlineLevel).push(r),hs(r,c,a,i)),Pt(A.flags,8)&&ds(A,i)})},ds=function(A,e){for(var t=A instanceof UB?A.start:1,r=A instanceof UB&&A.reversed,B=0;B<e.length;B++){var n=e[B];n.container instanceof aB&&"number"==typeof n.container.value&&0!==n.container.value&&(t=n.container.value),n.listValue=Fn(t,n.container.styles.listStyleType,!0),t+=r?-1:1}},fs=function(A,e){var t=[];return $n(A)?t.push(A.subdivide(.5,!1)):t.push(A),$n(e)?t.push(e.subdivide(.5,!0)):t.push(e),t},Hs=function(A,e,t,r){var B=[];return $n(A)?B.push(A.subdivide(.5,!1)):B.push(A),$n(t)?B.push(t.subdivide(.5,!0)):B.push(t),$n(r)?B.push(r.subdivide(.5,!0).reverse()):B.push(r),$n(e)?B.push(e.subdivide(.5,!1).reverse()):B.push(e),B},ps=function(A,e,t){var r=e[0],B=e[1],n=e[2],s=A[0],o=A[1];if(!s)return[0,0];if(te(s)&&o&&te(o))return[Ue(s,t.width),Ue(o,t.height)];var i=Fs(n);if(_A(s)&&(s.value===Ve.CONTAIN||s.value===Ve.COVER))return Fs(n)?t.width/t.height<n!=(s.value===Ve.COVER)?[t.width,t.width/n]:[t.height*n,t.height]:[t.width,t.height];var Q=Fs(r),e=Fs(B),A=Q||e;if(us(s)&&(!o||us(o)))return Q&&e?[r,B]:i||A?A&&i?[Q?r:B*n,e?B:r/n]:[Q?r:t.width,e?B:t.height]:[t.width,t.height];if(i){var c=0,a=0;return te(s)?c=Ue(s,t.width):te(o)&&(a=Ue(o,t.height)),us(s)?c=a*n:o&&!us(o)||(a=c/n),[c,a]}c=null,a=null;if(te(s)?c=Ue(s,t.width):o&&te(o)&&(a=Ue(o,t.height)),null!==(c=null!==(a=null!==c&&(!o||us(o))?Q&&e?c/r*B:t.height:a)&&us(s)?Q&&e?a/B*r:t.width:c)&&null!==a)return[c,a];throw new Error("Unable to calculate background-size for element")},Es=function(A,e){e=A[e];return void 0===e?A[0]:e},Is=function(A,e,t,r,B){var n=e[0],s=e[1],o=t[0],i=t[1];switch(A){case 2:return[new Zn(Math.round(r.left),Math.round(r.top+s)),new Zn(Math.round(r.left+r.width),Math.round(r.top+s)),new Zn(Math.round(r.left+r.width),Math.round(i+r.top+s)),new Zn(Math.round(r.left),Math.round(i+r.top+s))];case 3:return[new Zn(Math.round(r.left+n),Math.round(r.top)),new Zn(Math.round(r.left+n+o),Math.round(r.top)),new Zn(Math.round(r.left+n+o),Math.round(r.height+r.top)),new Zn(Math.round(r.left+n),Math.round(r.height+r.top))];case 1:return[new Zn(Math.round(r.left+n),Math.round(r.top+s)),new Zn(Math.round(r.left+n+o),Math.round(r.top+s)),new Zn(Math.round(r.left+n+o),Math.round(r.top+s+i)),new Zn(Math.round(r.left+n),Math.round(r.top+s+i))];default:return[new Zn(Math.round(B.left),Math.round(B.top)),new Zn(Math.round(B.left+B.width),Math.round(B.top)),new Zn(Math.round(B.left+B.width),Math.round(B.height+B.top)),new Zn(Math.round(B.left),Math.round(B.height+B.top))]}},ys="Hidden Text",Ks=(ms.prototype.parseMetrics=function(A,e){var t=this._document.createElement("div"),r=this._document.createElement("img"),B=this._document.createElement("span"),n=this._document.body;t.style.visibility="hidden",t.style.fontFamily=A,t.style.fontSize=e,t.style.margin="0",t.style.padding="0",t.style.whiteSpace="nowrap",n.appendChild(t),r.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",r.width=1,r.height=1,r.style.margin="0",r.style.padding="0",r.style.verticalAlign="baseline",B.style.fontFamily=A,B.style.fontSize=e,B.style.margin="0",B.style.padding="0",B.appendChild(this._document.createTextNode(ys)),t.appendChild(B),t.appendChild(r);e=r.offsetTop-B.offsetTop+2;t.removeChild(B),t.appendChild(this._document.createTextNode(ys)),t.style.lineHeight="normal",r.style.verticalAlign="super";r=r.offsetTop-t.offsetTop+2;return n.removeChild(t),{baseline:e,middle:r}},ms.prototype.getMetrics=function(A,e){var t=A+" "+e;return void 0===this._data[t]&&(this._data[t]=this.parseMetrics(A,e)),this._data[t]},ms);function ms(A){this._data={},this._document=A}var Ls,he=function(A,e){this.context=A,this.options=e},bs=(A(Ds,Ls=he),Ds.prototype.applyEffects=function(A){for(var e=this;this._activeEffects.length;)this.popEffect();A.forEach(function(A){return e.applyEffect(A)})},Ds.prototype.applyEffect=function(A){this.ctx.save(),2===A.type&&(this.ctx.globalAlpha=A.opacity),0===A.type&&(this.ctx.translate(A.offsetX,A.offsetY),this.ctx.transform(A.matrix[0],A.matrix[1],A.matrix[2],A.matrix[3],A.matrix[4],A.matrix[5]),this.ctx.translate(-A.offsetX,-A.offsetY)),Bs(A)&&(this.path(A.path),this.ctx.clip()),this._activeEffects.push(A)},Ds.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},Ds.prototype.renderStack=function(e){return a(this,void 0,void 0,function(){return H(this,function(A){switch(A.label){case 0:return e.element.container.styles.isVisible()?[4,this.renderStackContent(e)]:[3,2];case 1:A.sent(),A.label=2;case 2:return[2]}})})},Ds.prototype.renderNode=function(e){return a(this,void 0,void 0,function(){return H(this,function(A){switch(A.label){case 0:return Pt(e.container.flags,16),e.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(e)]:[3,3];case 1:return A.sent(),[4,this.renderNodeContent(e)];case 2:A.sent(),A.label=3;case 3:return[2]}})})},Ds.prototype.renderTextWithLetterSpacing=function(t,A,r){var B=this;0===A?this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+r):Zr(t.text).reduce(function(A,e){return B.ctx.fillText(e,A,t.bounds.top+r),A+B.ctx.measureText(e).width},t.bounds.left)},Ds.prototype.createFontStyle=function(A){var e=A.fontVariant.filter(function(A){return"normal"===A||"small-caps"===A}).join(""),t=Gs(A.fontFamily).join(", "),r=WA(A.fontSize)?""+A.fontSize.number+A.fontSize.unit:A.fontSize.number+"px";return[[A.fontStyle,e,A.fontWeight,r,t].join(" "),t,r]},Ds.prototype.renderTextNode=function(i,Q){return a(this,void 0,void 0,function(){var e,t,r,B,n,s,o=this;return H(this,function(A){return r=this.createFontStyle(Q),e=r[0],t=r[1],r=r[2],this.ctx.font=e,this.ctx.direction=1===Q.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",r=this.fontMetrics.getMetrics(t,r),B=r.baseline,n=r.middle,s=Q.paintOrder,i.textBounds.forEach(function(t){s.forEach(function(A){switch(A){case 0:o.ctx.fillStyle=ie(Q.color),o.renderTextWithLetterSpacing(t,Q.letterSpacing,B);var e=Q.textShadow;e.length&&t.text.trim().length&&(e.slice(0).reverse().forEach(function(A){o.ctx.shadowColor=ie(A.color),o.ctx.shadowOffsetX=A.offsetX.number*o.options.scale,o.ctx.shadowOffsetY=A.offsetY.number*o.options.scale,o.ctx.shadowBlur=A.blur.number,o.renderTextWithLetterSpacing(t,Q.letterSpacing,B)}),o.ctx.shadowColor="",o.ctx.shadowOffsetX=0,o.ctx.shadowOffsetY=0,o.ctx.shadowBlur=0),Q.textDecorationLine.length&&(o.ctx.fillStyle=ie(Q.textDecorationColor||Q.color),Q.textDecorationLine.forEach(function(A){switch(A){case 1:o.ctx.fillRect(t.bounds.left,Math.round(t.bounds.top+B),t.bounds.width,1);break;case 2:o.ctx.fillRect(t.bounds.left,Math.round(t.bounds.top),t.bounds.width,1);break;case 3:o.ctx.fillRect(t.bounds.left,Math.ceil(t.bounds.top+n),t.bounds.width,1)}}));break;case 1:Q.webkitTextStrokeWidth&&t.text.trim().length&&(o.ctx.strokeStyle=ie(Q.webkitTextStrokeColor),o.ctx.lineWidth=Q.webkitTextStrokeWidth,o.ctx.lineJoin=window.chrome?"miter":"round",o.ctx.strokeText(t.text,t.bounds.left,t.bounds.top+B)),o.ctx.strokeStyle="",o.ctx.lineWidth=0,o.ctx.lineJoin="miter"}})}),[2]})})},Ds.prototype.renderReplacedElement=function(A,e,t){var r;t&&0<A.intrinsicWidth&&0<A.intrinsicHeight&&(r=ls(A),e=rs(e),this.path(e),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(t,0,0,A.intrinsicWidth,A.intrinsicHeight,r.left,r.top,r.width,r.height),this.ctx.restore())},Ds.prototype.renderNodeContent=function(w){return a(this,void 0,void 0,function(){var e,t,r,B,n,s,o,i,Q,c,a,g;return H(this,function(A){switch(A.label){case 0:this.applyEffects(w.getEffects(4)),e=w.container,t=w.curves,r=e.styles,B=0,n=e.textNodes,A.label=1;case 1:return B<n.length?(s=n[B],[4,this.renderTextNode(s,r)]):[3,4];case 2:A.sent(),A.label=3;case 3:return B++,[3,1];case 4:if(!(e instanceof tB))return[3,8];A.label=5;case 5:return A.trys.push([5,7,,8]),[4,this.context.cache.match(e.src)];case 6:return Q=A.sent(),this.renderReplacedElement(e,t,Q),[3,8];case 7:return A.sent(),this.context.logger.error("Error loading image "+e.src),[3,8];case 8:if(e instanceof nB&&this.renderReplacedElement(e,t,e.canvas),!(e instanceof iB))return[3,12];A.label=9;case 9:return A.trys.push([9,11,,12]),[4,this.context.cache.match(e.svg)];case 10:return Q=A.sent(),this.renderReplacedElement(e,t,Q),[3,12];case 11:return A.sent(),this.context.logger.error("Error loading svg "+e.svg.substring(0,255)),[3,12];case 12:return e instanceof vB&&e.tree?[4,new Ds(this.context,{scale:this.options.scale,backgroundColor:e.backgroundColor,x:0,y:0,width:e.width,height:e.height}).render(e.tree)]:[3,14];case 13:s=A.sent(),e.width&&e.height&&this.ctx.drawImage(s,0,0,e.width,e.height,e.bounds.left,e.bounds.top,e.bounds.width,e.bounds.height),A.label=14;case 14:if(e instanceof pB&&(i=Math.min(e.bounds.width,e.bounds.height),e.type===hB?e.checked&&(this.ctx.save(),this.path([new Zn(e.bounds.left+.39363*i,e.bounds.top+.79*i),new Zn(e.bounds.left+.16*i,e.bounds.top+.5549*i),new Zn(e.bounds.left+.27347*i,e.bounds.top+.44071*i),new Zn(e.bounds.left+.39694*i,e.bounds.top+.5649*i),new Zn(e.bounds.left+.72983*i,e.bounds.top+.23*i),new Zn(e.bounds.left+.84*i,e.bounds.top+.34085*i),new Zn(e.bounds.left+.39363*i,e.bounds.top+.79*i)]),this.ctx.fillStyle=ie(HB),this.ctx.fill(),this.ctx.restore()):e.type===dB&&e.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(e.bounds.left+i/2,e.bounds.top+i/2,i/4,0,2*Math.PI,!0),this.ctx.fillStyle=ie(HB),this.ctx.fill(),this.ctx.restore())),xs(e)&&e.value.length){switch(c=this.createFontStyle(r),a=c[0],i=c[1],c=this.fontMetrics.getMetrics(a,i).baseline,this.ctx.font=a,this.ctx.fillStyle=ie(r.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=Ss(e.styles.textAlign),g=ls(e),o=0,e.styles.textAlign){case 1:o+=g.width/2;break;case 2:o+=g.width}i=g.add(o,0,0,-g.height/2+1),this.ctx.save(),this.path([new Zn(g.left,g.top),new Zn(g.left+g.width,g.top),new Zn(g.left+g.width,g.top+g.height),new Zn(g.left,g.top+g.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Jr(e.value,i),r.letterSpacing,c),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Pt(e.styles.display,2048))return[3,20];if(null===e.styles.listStyleImage)return[3,19];if(0!==(c=e.styles.listStyleImage).type)return[3,18];Q=void 0,c=c.url,A.label=15;case 15:return A.trys.push([15,17,,18]),[4,this.context.cache.match(c)];case 16:return Q=A.sent(),this.ctx.drawImage(Q,e.bounds.left-(Q.width+10),e.bounds.top),[3,18];case 17:return A.sent(),this.context.logger.error("Error loading list-style-image "+c),[3,18];case 18:return[3,20];case 19:w.listValue&&-1!==e.styles.listStyleType&&(a=this.createFontStyle(r)[0],this.ctx.font=a,this.ctx.fillStyle=ie(r.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",g=new d(e.bounds.left,e.bounds.top+Ue(e.styles.paddingTop,e.bounds.width),e.bounds.width,Ye(r.lineHeight,r.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Jr(w.listValue,g),r.letterSpacing,Ye(r.lineHeight,r.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),A.label=20;case 20:return[2]}})})},Ds.prototype.renderStackContent=function(C){return a(this,void 0,void 0,function(){var e,t,r,B,n,s,o,i,Q,c,a,g,w,U,l;return H(this,function(A){switch(A.label){case 0:return Pt(C.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(C.element)];case 1:A.sent(),e=0,t=C.negativeZIndex,A.label=2;case 2:return e<t.length?(l=t[e],[4,this.renderStack(l)]):[3,5];case 3:A.sent(),A.label=4;case 4:return e++,[3,2];case 5:return[4,this.renderNodeContent(C.element)];case 6:A.sent(),r=0,B=C.nonInlineLevel,A.label=7;case 7:return r<B.length?(l=B[r],[4,this.renderNode(l)]):[3,10];case 8:A.sent(),A.label=9;case 9:return r++,[3,7];case 10:n=0,s=C.nonPositionedFloats,A.label=11;case 11:return n<s.length?(l=s[n],[4,this.renderStack(l)]):[3,14];case 12:A.sent(),A.label=13;case 13:return n++,[3,11];case 14:o=0,i=C.nonPositionedInlineLevel,A.label=15;case 15:return o<i.length?(l=i[o],[4,this.renderStack(l)]):[3,18];case 16:A.sent(),A.label=17;case 17:return o++,[3,15];case 18:Q=0,c=C.inlineLevel,A.label=19;case 19:return Q<c.length?(l=c[Q],[4,this.renderNode(l)]):[3,22];case 20:A.sent(),A.label=21;case 21:return Q++,[3,19];case 22:a=0,g=C.zeroOrAutoZIndexOrTransformedOrOpacity,A.label=23;case 23:return a<g.length?(l=g[a],[4,this.renderStack(l)]):[3,26];case 24:A.sent(),A.label=25;case 25:return a++,[3,23];case 26:w=0,U=C.positiveZIndex,A.label=27;case 27:return w<U.length?(l=U[w],[4,this.renderStack(l)]):[3,30];case 28:A.sent(),A.label=29;case 29:return w++,[3,27];case 30:return[2]}})})},Ds.prototype.mask=function(A){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(A.slice(0).reverse()),this.ctx.closePath()},Ds.prototype.path=function(A){this.ctx.beginPath(),this.formatPath(A),this.ctx.closePath()},Ds.prototype.formatPath=function(A){var r=this;A.forEach(function(A,e){var t=$n(A)?A.start:A;0===e?r.ctx.moveTo(t.x,t.y):r.ctx.lineTo(t.x,t.y),$n(A)&&r.ctx.bezierCurveTo(A.startControl.x,A.startControl.y,A.endControl.x,A.endControl.y,A.end.x,A.end.y)})},Ds.prototype.renderRepeat=function(A,e,t,r){this.path(A),this.ctx.fillStyle=e,this.ctx.translate(t,r),this.ctx.fill(),this.ctx.translate(-t,-r)},Ds.prototype.resizeImage=function(A,e,t){if(A.width===e&&A.height===t)return A;var r=(null!==(r=this.canvas.ownerDocument)&&void 0!==r?r:document).createElement("canvas");return r.width=Math.max(1,e),r.height=Math.max(1,t),r.getContext("2d").drawImage(A,0,0,A.width,A.height,0,0,e,t),r},Ds.prototype.renderBackgroundImage=function(f){return a(this,void 0,void 0,function(){var h,e,d,t,r,B;return H(this,function(A){switch(A.label){case 0:h=f.styles.backgroundImage.length-1,e=function(e){var t,r,B,n,s,o,i,Q,c,a,g,w,U,l,C,u,F;return H(this,function(A){switch(A.label){case 0:if(0!==e.type)return[3,5];t=void 0,r=e.url,A.label=1;case 1:return A.trys.push([1,3,,4]),[4,d.context.cache.match(r)];case 2:return t=A.sent(),[3,4];case 3:return A.sent(),d.context.logger.error("Error loading background-image "+r),[3,4];case 4:return t&&(B=Cs(f,h,[t.width,t.height,t.width/t.height]),o=B[0],g=B[1],w=B[2],c=B[3],a=B[4],s=d.ctx.createPattern(d.resizeImage(t,c,a),"repeat"),d.renderRepeat(o,s,g,w)),[3,6];case 5:1===e.type?(F=Cs(f,h,[null,null,null]),o=F[0],g=F[1],w=F[2],c=F[3],a=F[4],C=Ee(e.angle,c,a),l=C[0],B=C[1],i=C[2],u=C[3],Q=C[4],(F=document.createElement("canvas")).width=c,F.height=a,C=F.getContext("2d"),n=C.createLinearGradient(B,u,i,Q),pe(e.stops,l).forEach(function(A){return n.addColorStop(A.stop,ie(A.color))}),C.fillStyle=n,C.fillRect(0,0,c,a),0<c&&0<a&&(s=d.ctx.createPattern(F,"repeat"),d.renderRepeat(o,s,g,w))):2===e.type&&(u=Cs(f,h,[null,null,null]),o=u[0],i=u[1],Q=u[2],c=u[3],a=u[4],l=0===e.position.length?[ge]:e.position,g=Ue(l[0],c),w=Ue(l[l.length-1],a),C=function(A,e,t,r,B){var n,s,o,i,Q=0,c=0;switch(A.size){case 0:0===A.shape?Q=c=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(t),Math.abs(t-B)):1===A.shape&&(Q=Math.min(Math.abs(e),Math.abs(e-r)),c=Math.min(Math.abs(t),Math.abs(t-B)));break;case 2:0===A.shape?Q=c=Math.min(Ie(e,t),Ie(e,t-B),Ie(e-r,t),Ie(e-r,t-B)):1===A.shape&&(n=Math.min(Math.abs(t),Math.abs(t-B))/Math.min(Math.abs(e),Math.abs(e-r)),o=(s=ye(r,B,e,t,!0))[0],i=s[1],c=n*(Q=Ie(o-e,(i-t)/n)));break;case 1:0===A.shape?Q=c=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(t),Math.abs(t-B)):1===A.shape&&(Q=Math.max(Math.abs(e),Math.abs(e-r)),c=Math.max(Math.abs(t),Math.abs(t-B)));break;case 3:0===A.shape?Q=c=Math.max(Ie(e,t),Ie(e,t-B),Ie(e-r,t),Ie(e-r,t-B)):1===A.shape&&(n=Math.max(Math.abs(t),Math.abs(t-B))/Math.max(Math.abs(e),Math.abs(e-r)),o=(s=ye(r,B,e,t,!1))[0],i=s[1],c=n*(Q=Ie(o-e,(i-t)/n)))}return Array.isArray(A.size)&&(Q=Ue(A.size[0],r),c=2===A.size.length?Ue(A.size[1],B):Q),[Q,c]}(e,g,w,c,a),F=C[0],u=C[1],0<F&&0<u&&(U=d.ctx.createRadialGradient(i+g,Q+w,0,i+g,Q+w,F),pe(e.stops,2*F).forEach(function(A){return U.addColorStop(A.stop,ie(A.color))}),d.path(o),d.ctx.fillStyle=U,F!==u?(l=f.bounds.left+.5*f.bounds.width,C=f.bounds.top+.5*f.bounds.height,F=1/(u=u/F),d.ctx.save(),d.ctx.translate(l,C),d.ctx.transform(1,0,0,u,0,0),d.ctx.translate(-l,-C),d.ctx.fillRect(i,F*(Q-C)+C,c,a*F),d.ctx.restore()):d.ctx.fill())),A.label=6;case 6:return h--,[2]}})},d=this,t=0,r=f.styles.backgroundImage.slice(0).reverse(),A.label=1;case 1:return t<r.length?(B=r[t],[5,e(B)]):[3,4];case 2:A.sent(),A.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},Ds.prototype.renderSolidBorder=function(e,t,r){return a(this,void 0,void 0,function(){return H(this,function(A){return this.path(ws(r,t)),this.ctx.fillStyle=ie(e),this.ctx.fill(),[2]})})},Ds.prototype.renderDoubleBorder=function(t,r,B,n){return a(this,void 0,void 0,function(){var e;return H(this,function(A){switch(A.label){case 0:return r<3?[4,this.renderSolidBorder(t,B,n)]:[3,2];case 1:return A.sent(),[2];case 2:return e=function(A,e){switch(e){case 0:return Hs(A.topLeftBorderBox,A.topLeftBorderDoubleOuterBox,A.topRightBorderBox,A.topRightBorderDoubleOuterBox);case 1:return Hs(A.topRightBorderBox,A.topRightBorderDoubleOuterBox,A.bottomRightBorderBox,A.bottomRightBorderDoubleOuterBox);case 2:return Hs(A.bottomRightBorderBox,A.bottomRightBorderDoubleOuterBox,A.bottomLeftBorderBox,A.bottomLeftBorderDoubleOuterBox);default:return Hs(A.bottomLeftBorderBox,A.bottomLeftBorderDoubleOuterBox,A.topLeftBorderBox,A.topLeftBorderDoubleOuterBox)}}(n,B),this.path(e),this.ctx.fillStyle=ie(t),this.ctx.fill(),e=function(A,e){switch(e){case 0:return Hs(A.topLeftBorderDoubleInnerBox,A.topLeftPaddingBox,A.topRightBorderDoubleInnerBox,A.topRightPaddingBox);case 1:return Hs(A.topRightBorderDoubleInnerBox,A.topRightPaddingBox,A.bottomRightBorderDoubleInnerBox,A.bottomRightPaddingBox);case 2:return Hs(A.bottomRightBorderDoubleInnerBox,A.bottomRightPaddingBox,A.bottomLeftBorderDoubleInnerBox,A.bottomLeftPaddingBox);default:return Hs(A.bottomLeftBorderDoubleInnerBox,A.bottomLeftPaddingBox,A.topLeftBorderDoubleInnerBox,A.topLeftPaddingBox)}}(n,B),this.path(e),this.ctx.fill(),[2]}})})},Ds.prototype.renderNodeBackgroundAndBorders=function(c){return a(this,void 0,void 0,function(){var e,t,r,B,n,s,o,i,Q=this;return H(this,function(A){switch(A.label){case 0:return(this.applyEffects(c.getEffects(2)),e=c.container.styles,t=!oe(e.backgroundColor)||e.backgroundImage.length,r=[{style:e.borderTopStyle,color:e.borderTopColor,width:e.borderTopWidth},{style:e.borderRightStyle,color:e.borderRightColor,width:e.borderRightWidth},{style:e.borderBottomStyle,color:e.borderBottomColor,width:e.borderBottomWidth},{style:e.borderLeftStyle,color:e.borderLeftColor,width:e.borderLeftWidth}],B=Ms(Es(e.backgroundClip,0),c.curves),t||e.boxShadow.length)?(this.ctx.save(),this.path(B),this.ctx.clip(),oe(e.backgroundColor)||(this.ctx.fillStyle=ie(e.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(c.container)]):[3,2];case 1:A.sent(),this.ctx.restore(),e.boxShadow.slice(0).reverse().forEach(function(A){Q.ctx.save();var t,r,B,n,e=ts(c.curves),s=A.inset?0:1e4,o=(t=-s+(A.inset?1:-1)*A.spread.number,r=(A.inset?1:-1)*A.spread.number,B=A.spread.number*(A.inset?-2:2),n=A.spread.number*(A.inset?-2:2),e.map(function(A,e){switch(e){case 0:return A.add(t,r);case 1:return A.add(t+B,r);case 2:return A.add(t+B,r+n);case 3:return A.add(t,r+n)}return A}));A.inset?(Q.path(e),Q.ctx.clip(),Q.mask(o)):(Q.mask(e),Q.ctx.clip(),Q.path(o)),Q.ctx.shadowOffsetX=A.offsetX.number+s,Q.ctx.shadowOffsetY=A.offsetY.number,Q.ctx.shadowColor=ie(A.color),Q.ctx.shadowBlur=A.blur.number,Q.ctx.fillStyle=A.inset?ie(A.color):"rgba(0,0,0,1)",Q.ctx.fill(),Q.ctx.restore()}),A.label=2;case 2:s=n=0,o=r,A.label=3;case 3:return s<o.length?0!==(i=o[s]).style&&!oe(i.color)&&0<i.width?2!==i.style?[3,5]:[4,this.renderDashedDottedBorder(i.color,i.width,n,c.curves,2)]:[3,11]:[3,13];case 4:return A.sent(),[3,11];case 5:return 3!==i.style?[3,7]:[4,this.renderDashedDottedBorder(i.color,i.width,n,c.curves,3)];case 6:return A.sent(),[3,11];case 7:return 4!==i.style?[3,9]:[4,this.renderDoubleBorder(i.color,i.width,n,c.curves)];case 8:return A.sent(),[3,11];case 9:return[4,this.renderSolidBorder(i.color,n,c.curves)];case 10:A.sent(),A.label=11;case 11:n++,A.label=12;case 12:return s++,[3,3];case 13:return[2]}})})},Ds.prototype.renderDashedDottedBorder=function(g,w,U,l,C){return a(this,void 0,void 0,function(){var e,t,r,B,n,s,o,i,Q,c,a;return H(this,function(A){return this.ctx.save(),Q=function(A,e){switch(e){case 0:return fs(A.topLeftBorderStroke,A.topRightBorderStroke);case 1:return fs(A.topRightBorderStroke,A.bottomRightBorderStroke);case 2:return fs(A.bottomRightBorderStroke,A.bottomLeftBorderStroke);default:return fs(A.bottomLeftBorderStroke,A.topLeftBorderStroke)}}(l,U),e=ws(l,U),2===C&&(this.path(e),this.ctx.clip()),s=$n(e[0])?(t=e[0].start.x,e[0].start.y):(t=e[0].x,e[0].y),o=$n(e[1])?(r=e[1].end.x,e[1].end.y):(r=e[1].x,e[1].y),B=0===U||2===U?Math.abs(t-r):Math.abs(s-o),this.ctx.beginPath(),3===C?this.formatPath(Q):this.formatPath(e.slice(0,2)),n=w<3?3*w:2*w,s=w<3?2*w:w,3===C&&(s=n=w),o=!0,B<=2*n?o=!1:B<=2*n+s?(n*=i=B/(2*n+s),s*=i):(Q=Math.floor((B+s)/(n+s)),i=(B-Q*n)/(Q-1),s=(Q=(B-(Q+1)*n)/Q)<=0||Math.abs(s-i)<Math.abs(s-Q)?i:Q),o&&(3===C?this.ctx.setLineDash([0,n+s]):this.ctx.setLineDash([n,s])),3===C?(this.ctx.lineCap="round",this.ctx.lineWidth=w):this.ctx.lineWidth=2*w+1.1,this.ctx.strokeStyle=ie(g),this.ctx.stroke(),this.ctx.setLineDash([]),2===C&&($n(e[0])&&(c=e[3],a=e[0],this.ctx.beginPath(),this.formatPath([new Zn(c.end.x,c.end.y),new Zn(a.start.x,a.start.y)]),this.ctx.stroke()),$n(e[1])&&(c=e[1],a=e[2],this.ctx.beginPath(),this.formatPath([new Zn(c.end.x,c.end.y),new Zn(a.start.x,a.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},Ds.prototype.render=function(B){return a(this,void 0,void 0,function(){return H(this,function(A){switch(A.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=ie(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),t=new as(e=B,null),r=new cs(t),hs(t,r,r,e=[]),ds(t.container,e),[4,this.renderStack(r)];case 1:return A.sent(),this.applyEffects([]),[2,this.canvas]}var e,t,r})})},Ds);function Ds(A,e){A=Ls.call(this,A,e)||this;return A._activeEffects=[],A.canvas=e.canvas||document.createElement("canvas"),A.ctx=A.canvas.getContext("2d"),e.canvas||(A.canvas.width=Math.floor(e.width*e.scale),A.canvas.height=Math.floor(e.height*e.scale),A.canvas.style.width=e.width+"px",A.canvas.style.height=e.height+"px"),A.fontMetrics=new Ks(document),A.ctx.scale(A.options.scale,A.options.scale),A.ctx.translate(-e.x,-e.y),A.ctx.textBaseline="bottom",A._activeEffects=[],A.context.logger.debug("Canvas renderer initialized ("+e.width+"x"+e.height+") with scale "+e.scale),A}var vs,xs=function(A){return A instanceof LB||(A instanceof yB||A instanceof pB&&A.type!==dB&&A.type!==hB)},Ms=function(A,e){switch(A){case 0:return ts(e);case 2:return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox];default:return rs(e)}},Ss=function(A){switch(A){case 1:return"center";case 2:return"right";default:return"left"}},Ts=["-apple-system","system-ui"],Gs=function(A){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?A.filter(function(A){return-1===Ts.indexOf(A)}):A},Os=(A(Vs,vs=he),Vs.prototype.render=function(t){return a(this,void 0,void 0,function(){var e;return H(this,function(A){switch(A.label){case 0:return e=Nr(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,ks(e)];case 1:return e=A.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=ie(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(e,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},Vs);function Vs(A,e){A=vs.call(this,A,e)||this;return A.canvas=e.canvas||document.createElement("canvas"),A.ctx=A.canvas.getContext("2d"),A.options=e,A.canvas.width=Math.floor(e.width*e.scale),A.canvas.height=Math.floor(e.height*e.scale),A.canvas.style.width=e.width+"px",A.canvas.style.height=e.height+"px",A.ctx.scale(A.options.scale,A.options.scale),A.ctx.translate(-e.x,-e.y),A.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+e.width+"x"+e.height+" at "+e.x+","+e.y+") with scale "+e.scale),A}var ks=function(r){return new Promise(function(A,e){var t=new Image;t.onload=function(){A(t)},t.onerror=e,t.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(r))})},Rs=(Ns.prototype.debug=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.debug?console.debug.apply(console,t([this.id,this.getTime()+"ms"],A)):this.info.apply(this,A))},Ns.prototype.getTime=function(){return Date.now()-this.start},Ns.prototype.info=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];this.enabled&&"undefined"!=typeof window&&window.console&&"function"==typeof console.info&&console.info.apply(console,t([this.id,this.getTime()+"ms"],A))},Ns.prototype.warn=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.warn?console.warn.apply(console,t([this.id,this.getTime()+"ms"],A)):this.info.apply(this,A))},Ns.prototype.error=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.error?console.error.apply(console,t([this.id,this.getTime()+"ms"],A)):this.info.apply(this,A))},Ns.instances={},Ns);function Ns(A){var e=A.id,A=A.enabled;this.id=e,this.enabled=A,this.start=Date.now()}var Ps=(Xs.instanceCount=1,Xs);function Xs(A,e){this.windowBounds=e,this.instanceName="#"+Xs.instanceCount++,this.logger=new Rs({id:this.instanceName,enabled:A.logging}),this.cache=null!==(e=A.cache)&&void 0!==e?e:new On(this,A)}"undefined"!=typeof window&&Tn.setContext(window);var Js=function(u,F){return a(void 0,void 0,void 0,function(){var e,t,r,B,n,s,o,i,Q,c,a,g,w,U,l,C;return H(this,function(A){switch(A.label){case 0:if(!u||"object"!=typeof u)return[2,Promise.reject("Invalid element provided as first argument")];if(!(e=u.ownerDocument))throw new Error("Element is not attached to a Document");if(!(t=e.defaultView))throw new Error("Document is not attached to a Window");return w={allowTaint:null!==(U=F.allowTaint)&&void 0!==U&&U,imageTimeout:null!==(c=F.imageTimeout)&&void 0!==c?c:15e3,proxy:F.proxy,useCORS:null!==(a=F.useCORS)&&void 0!==a&&a},U=h({logging:null===(g=F.logging)||void 0===g||g,cache:F.cache},w),c={windowWidth:null!==(c=F.windowWidth)&&void 0!==c?c:t.innerWidth,windowHeight:null!==(a=F.windowHeight)&&void 0!==a?a:t.innerHeight,scrollX:null!==(g=F.scrollX)&&void 0!==g?g:t.pageXOffset,scrollY:null!==(w=F.scrollY)&&void 0!==w?w:t.pageYOffset},a=new d(c.scrollX,c.scrollY,c.windowWidth,c.windowHeight),g=new Ps(U,a),c=null!==(w=F.foreignObjectRendering)&&void 0!==w&&w,w={allowTaint:null!==(U=F.allowTaint)&&void 0!==U&&U,onclone:F.onclone,ignoreElements:F.ignoreElements,inlineImages:c,copyStyles:c},g.logger.debug("Starting document clone with size "+a.width+"x"+a.height+" scrolled to "+-a.left+","+-a.top),U=new dn(g,u,w),(w=U.clonedReferenceElement)?[4,U.toIFrame(e,a)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return(r=A.sent(),l=jB(w)||"HTML"===w.tagName?function(A){var e=A.body,t=A.documentElement;if(!e||!t)throw new Error("Unable to get document size");A=Math.max(Math.max(e.scrollWidth,t.scrollWidth),Math.max(e.offsetWidth,t.offsetWidth),Math.max(e.clientWidth,t.clientWidth)),t=Math.max(Math.max(e.scrollHeight,t.scrollHeight),Math.max(e.offsetHeight,t.offsetHeight),Math.max(e.clientHeight,t.clientHeight));return new d(0,0,A,t)}(w.ownerDocument):f(g,w),B=l.width,n=l.height,s=l.left,o=l.top,i=Ys(g,w,F.backgroundColor),l={canvas:F.canvas,backgroundColor:i,scale:null!==(l=null!==(l=F.scale)&&void 0!==l?l:t.devicePixelRatio)&&void 0!==l?l:1,x:(null!==(l=F.x)&&void 0!==l?l:0)+s,y:(null!==(l=F.y)&&void 0!==l?l:0)+o,width:null!==(l=F.width)&&void 0!==l?l:Math.ceil(B),height:null!==(l=F.height)&&void 0!==l?l:Math.ceil(n)},c)?(g.logger.debug("Document cloned, using foreign object rendering"),[4,new Os(g,l).render(w)]):[3,3];case 2:return Q=A.sent(),[3,5];case 3:return g.logger.debug("Document cloned, element located at "+s+","+o+" with size "+B+"x"+n+" using computed rendering"),g.logger.debug("Starting DOM parsing"),C=kB(g,w),i===C.styles.backgroundColor&&(C.styles.backgroundColor=Le.TRANSPARENT),g.logger.debug("Starting renderer for element at "+l.x+","+l.y+" with size "+l.width+"x"+l.height),[4,new bs(g,l).render(C)];case 4:Q=A.sent(),A.label=5;case 5:return null!==(C=F.removeContainer)&&void 0!==C&&!C||dn.destroy(r)||g.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore"),g.logger.debug("Finished rendering"),[2,Q]}})})},Ys=function(A,e,t){var r=e.ownerDocument,B=r.documentElement?fe(A,getComputedStyle(r.documentElement).backgroundColor):Le.TRANSPARENT,n=r.body?fe(A,getComputedStyle(r.body).backgroundColor):Le.TRANSPARENT,t="string"==typeof t?fe(A,t):null===t?Le.TRANSPARENT:4294967295;return e===r.documentElement?oe(B)?oe(n)?t:n:B:t};return function(A,e){return Js(A,e=void 0===e?{}:e)}});</script>
<style type="text/css">

.mapboxgl-legend[data-interactive="true"][data-legend-type="categorical"] .legend-item {
cursor: pointer;
transition: opacity 0.2s ease, background-color 0.15s ease;
user-select: none;
padding: 2px 4px;
margin: -2px -4px;
border-radius: 4px;
}
.mapboxgl-legend[data-interactive="true"][data-legend-type="categorical"] .legend-item:hover {
background-color: rgba(0, 0, 0, 0.08);
}

.mapboxgl-legend[data-interactive="true"] .legend-item[data-enabled="false"] {
opacity: 0.5;
}
.mapboxgl-legend[data-interactive="true"] .legend-item[data-enabled="false"] .legend-color {
filter: grayscale(100%);
}
.mapboxgl-legend[data-interactive="true"] .legend-item[data-enabled="false"] .legend-text {
text-decoration: line-through;
color: #888;
}


.legend-gradient-overlay-container {
position: absolute;
top: 0;
left: 0;
right: 0;
bottom: 0;
pointer-events: none;
}

.legend-gradient-ghost {
position: absolute;
top: 0;
bottom: 0;
background: rgba(255, 255, 255, 0.7);
pointer-events: none;
}
.legend-gradient-ghost-left {
left: 0;
width: 0;
}
.legend-gradient-ghost-right {
right: 0;
width: 0;
}

.legend-gradient-handle {
position: absolute;
top: -2px;
bottom: -2px;
width: 3px;
background: #333;
cursor: ew-resize;
pointer-events: auto;
transform: translateX(-50%);
border-radius: 1px;
box-shadow: 0 0 2px rgba(0, 0, 0, 0.3);
transition: background-color 0.15s ease, width 0.1s ease;
z-index: 10;
}
.legend-gradient-handle:hover {
background: #000;
width: 4px;
}
.legend-gradient-handle:active,
.legend-gradient-overlay-container.dragging .legend-gradient-handle {
background: #000;
width: 4px;
}

.legend-gradient-handle-left {
left: 0;
}
.legend-gradient-handle-right {
left: 100%;
}

.legend-gradient-middle {
position: absolute;
top: 0;
bottom: 0;
cursor: grab;
pointer-events: auto;
z-index: 5;
}
.legend-gradient-middle:active,
.legend-gradient-overlay-container.dragging .legend-gradient-middle {
cursor: grabbing;
}

.legend-range-display {
text-align: center;
font-size: 11px;
font-weight: 500;
margin-top: 4px;
margin-bottom: 2px;
color: #555;
font-family: inherit;
}

.legend-reset-btn {
display: none;
margin-top: 10px;
padding: 5px 10px;
font-size: 11px;
background: #f5f5f5;
border: 1px solid #ccc;
border-radius: 4px;
cursor: pointer;
width: 100%;
font-family: inherit;
color: #333;
transition: background-color 0.15s ease, border-color 0.15s ease;
}
.legend-reset-btn:hover {
background: #e8e8e8;
border-color: #bbb;
}
.legend-reset-btn:active {
background: #ddd;
}
.legend-reset-btn.visible {
display: block;
}

.mapboxgl-legend[style*="background-color: rgb(0, 0, 0)"] .legend-range-display,
.mapboxgl-legend[style*="background-color: #000"] .legend-range-display,
.mapboxgl-legend[style*="background-color: rgb(33, 33, 33)"] .legend-range-display,
.mapboxgl-legend[style*="background-color: #212121"] .legend-range-display {
color: #ccc;
}

.mapboxgl-legend[style*="background-color: rgb(0, 0, 0)"] .legend-gradient-ghost,
.mapboxgl-legend[style*="background-color: #000"] .legend-gradient-ghost,
.mapboxgl-legend[style*="background-color: rgb(33, 33, 33)"] .legend-gradient-ghost,
.mapboxgl-legend[style*="background-color: #212121"] .legend-gradient-ghost {
background: rgba(0, 0, 0, 0.6);
}

.mapboxgl-legend[style*="background-color: rgb(0, 0, 0)"] .legend-gradient-handle,
.mapboxgl-legend[style*="background-color: #000"] .legend-gradient-handle,
.mapboxgl-legend[style*="background-color: rgb(33, 33, 33)"] .legend-gradient-handle,
.mapboxgl-legend[style*="background-color: #212121"] .legend-gradient-handle {
background: #eee;
box-shadow: 0 0 2px rgba(255, 255, 255, 0.3);
}
.mapboxgl-legend[style*="background-color: rgb(0, 0, 0)"] .legend-gradient-handle:hover,
.mapboxgl-legend[style*="background-color: #000"] .legend-gradient-handle:hover,
.mapboxgl-legend[style*="background-color: rgb(33, 33, 33)"] .legend-gradient-handle:hover,
.mapboxgl-legend[style*="background-color: #212121"] .legend-gradient-handle:hover {
background: #fff;
}
.mapboxgl-legend[style*="background-color: rgb(0, 0, 0)"] .legend-reset-btn,
.mapboxgl-legend[style*="background-color: #000"] .legend-reset-btn,
.mapboxgl-legend[style*="background-color: rgb(33, 33, 33)"] .legend-reset-btn,
.mapboxgl-legend[style*="background-color: #212121"] .legend-reset-btn {
background: #333;
border-color: #555;
color: #eee;
}
.mapboxgl-legend[style*="background-color: rgb(0, 0, 0)"] .legend-reset-btn:hover,
.mapboxgl-legend[style*="background-color: #000"] .legend-reset-btn:hover,
.mapboxgl-legend[style*="background-color: rgb(33, 33, 33)"] .legend-reset-btn:hover,
.mapboxgl-legend[style*="background-color: #212121"] .legend-reset-btn:hover {
background: #444;
border-color: #666;
}


.mapboxgl-legend.legend-draggable {
cursor: grab;
}
.mapboxgl-legend.legend-draggable h2 {
cursor: grab;
}

.mapboxgl-legend.legend-dragging {
cursor: grabbing;
opacity: 0.9;
box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
z-index: 2000 !important;
}
.mapboxgl-legend.legend-dragging h2 {
cursor: grabbing;
}

.mapboxgl-legend.legend-draggable .legend-item {
cursor: pointer;
}
.mapboxgl-legend.legend-draggable .legend-gradient-handle {
cursor: ew-resize;
}
.mapboxgl-legend.legend-draggable .legend-gradient-middle {
cursor: grab;
}
.mapboxgl-legend.legend-dragging .legend-gradient-middle {
cursor: grabbing;
}
</style>
<script>/**
 * Legend Interactivity Module for mapgl
 * Shared functionality for both Mapbox GL and MapLibre GL
 *
 * Provides interactive legend capabilities:
 * - Categorical legends: Click to toggle category visibility
 * - Continuous legends: Dual-handle range slider for filtering
 */

/**
 * Main initialization function - called from widget code
 * @param {Object} map - The map instance (mapboxgl or maplibre)
 * @param {string} mapId - The container ID for the map
 * @param {Object} config - Configuration from R side
 */
function initializeLegendInteractivity(map, mapId, config) {
    var legendElement = document.getElementById(config.legendId);
    if (!legendElement) {
        console.warn("Legend element not found:", config.legendId);
        return;
    }

    // Ensure layer state tracking exists
    if (!window._mapglLayerState) {
        window._mapglLayerState = {};
    }
    if (!window._mapglLayerState[mapId]) {
        window._mapglLayerState[mapId] = {
            filters: {},
            paintProperties: {},
            layoutProperties: {},
            tooltips: {},
            popups: {},
            legends: {},
            interactiveFilters: {}
        };
    }

    var layerState = window._mapglLayerState[mapId];

    // Initialize interactive filter state for this layer
    if (config.layerId && !layerState.interactiveFilters[config.layerId]) {
        var originalFilter = null;
        try {
            originalFilter = map.getFilter(config.layerId);
        } catch (e) {
            // Layer may not exist yet
        }
        layerState.interactiveFilters[config.layerId] = {
            originalFilter: originalFilter,
            legendFilters: {}
        };
    }

    // Determine filter column - use provided or auto-detect
    var filterColumn = config.filterColumn;
    if (!filterColumn && config.layerId) {
        filterColumn = detectFilterColumn(map, config.layerId);
    }

    if (!filterColumn) {
        console.warn(
            "Could not determine filter column for interactive legend. " +
                "Please provide filter_column parameter."
        );
        return;
    }

    // Store config for later reference
    legendElement._interactivityConfig = {
        legendId: config.legendId,
        layerId: config.layerId,
        type: config.type,
        values: config.values,
        colors: config.colors,
        filterColumn: filterColumn,
        mapId: mapId
    };

    if (config.type === "categorical") {
        initCategoricalLegend(map, mapId, legendElement, filterColumn, config);
    } else if (config.type === "continuous") {
        initContinuousLegend(map, mapId, legendElement, filterColumn, config);
    }
}

/**
 * Detect filter column from layer's paint expression
 * @param {Object} map - The map instance
 * @param {string} layerId - The layer ID
 * @returns {string|null} The detected column name or null
 */
function detectFilterColumn(map, layerId) {
    var layer = null;
    try {
        layer = map.getLayer(layerId);
    } catch (e) {
        return null;
    }
    if (!layer) return null;

    // Check common paint properties for expressions
    var paintProps = [
        "fill-color",
        "circle-color",
        "line-color",
        "fill-opacity",
        "circle-radius",
        "line-width",
        "fill-extrusion-color"
    ];

    for (var i = 0; i < paintProps.length; i++) {
        var prop = paintProps[i];
        try {
            var paintValue = map.getPaintProperty(layerId, prop);
            if (paintValue && Array.isArray(paintValue)) {
                var column = parseExpressionForColumn(paintValue);
                if (column) return column;
            }
        } catch (e) {
            // Property may not exist for this layer type
        }
    }

    return null;
}

/**
 * Parse expression to extract column name
 * Handles: match, interpolate, step, case expressions
 * @param {Array} expr - The expression array
 * @returns {string|null} The column name or null
 */
function parseExpressionForColumn(expr) {
    if (!Array.isArray(expr) || expr.length < 2) return null;

    var type = expr[0];

    // match: ["match", ["get", "column"], ...]
    if (type === "match" && Array.isArray(expr[1])) {
        if (expr[1][0] === "get" && typeof expr[1][1] === "string") {
            return expr[1][1];
        }
    }

    // interpolate: ["interpolate", ["linear"], ["get", "column"], ...]
    if (type === "interpolate" && expr.length >= 3) {
        var getExpr = expr[2];
        if (Array.isArray(getExpr) && getExpr[0] === "get") {
            return getExpr[1];
        }
    }

    // step: ["step", ["get", "column"], base, ...]
    if (type === "step" && Array.isArray(expr[1])) {
        if (expr[1][0] === "get" && typeof expr[1][1] === "string") {
            return expr[1][1];
        }
    }

    // case with na_color wrapper: ["case", ["==", ["get", "column"], null], na_color, inner_expr]
    if (type === "case" && expr.length >= 4) {
        // Check inner expression (last non-default element)
        for (var i = 3; i < expr.length; i++) {
            if (Array.isArray(expr[i])) {
                var result = parseExpressionForColumn(expr[i]);
                if (result) return result;
            }
        }
    }

    return null;
}

/**
 * Initialize categorical legend interactivity
 */
function initCategoricalLegend(map, mapId, legendElement, filterColumn, config) {
    var items = legendElement.querySelectorAll(".legend-item");

    // Use filterValues for actual filtering, values for display
    var filterValues = config.filterValues || config.values;
    var displayValues = config.values;
    var breaks = config.breaks; // For range-based filtering (from classifications)

    // Track enabled state by index (to map display values to filter values)
    var numCategories = displayValues.length;
    var enabledIndices = new Set();
    for (var i = 0; i < numCategories; i++) {
        enabledIndices.add(i);
    }

    var layerState = window._mapglLayerState[mapId];
    var interactiveState = layerState.interactiveFilters[config.layerId];

    // Store category state
    interactiveState.enabledIndices = enabledIndices;
    interactiveState.filterValues = filterValues;
    interactiveState.breaks = breaks;
    interactiveState.filterColumn = filterColumn;

    // Store original colors for each item
    var originalColors = {};

    // Add click handlers to each item
    items.forEach(function (item, idx) {
        var displayValue = item.getAttribute("data-value") || String(displayValues[idx]);
        item.setAttribute("data-value", displayValue);
        item.setAttribute("data-index", idx);
        item.setAttribute("data-enabled", "true");

        // Store original color - try multiple selectors for different patch types
        var colorSpan = item.querySelector(".legend-color") ||
                        item.querySelector(".legend-shape-svg") ||
                        item.querySelector(".legend-shape-custom");
        if (colorSpan) {
            originalColors[idx] = colorSpan.style.backgroundColor ||
                                  colorSpan.getAttribute("fill") ||
                                  config.colors[idx];
        } else {
            // Fallback to config colors
            originalColors[idx] = config.colors[idx];
        }

        item.addEventListener("click", function (e) {
            e.preventDefault();
            e.stopPropagation();

            var currentlyEnabled = item.getAttribute("data-enabled") === "true";
            var newState = !currentlyEnabled;

            item.setAttribute("data-enabled", String(newState));

            if (newState) {
                enabledIndices.add(idx);
                // Restore original color
                if (colorSpan) {
                    colorSpan.style.backgroundColor = originalColors[idx];
                }
            } else {
                enabledIndices.delete(idx);
                // Grey out
                if (colorSpan) {
                    colorSpan.style.backgroundColor = "#cccccc";
                }
            }

            // Apply filter - use breaks for range-based, filterValues for categorical
            if (breaks && breaks.length > 0) {
                applyRangeBasedCategoricalFilter(
                    map,
                    mapId,
                    config.layerId,
                    filterColumn,
                    enabledIndices,
                    breaks,
                    interactiveState.originalFilter
                );
            } else {
                applyCategoricalFilter(
                    map,
                    mapId,
                    config.layerId,
                    filterColumn,
                    enabledIndices,
                    filterValues,
                    interactiveState.originalFilter
                );
            }

            // Update reset button visibility
            updateResetButton(legendElement, enabledIndices.size < numCategories);

            // Send to Shiny if applicable
            if (typeof HTMLWidgets !== "undefined" && HTMLWidgets.shinyMode) {
                // Get enabled filter values for Shiny
                var enabledFilterValues = [];
                enabledIndices.forEach(function(i) {
                    enabledFilterValues.push(filterValues[i]);
                });
                Shiny.setInputValue(mapId + "_legend_filter", {
                    legendId: config.legendId,
                    layerId: config.layerId,
                    type: "categorical",
                    column: filterColumn,
                    enabledValues: enabledFilterValues,
                    timestamp: Date.now()
                });
            }
        });
    });

    // Add reset button
    addResetButton(legendElement, function () {
        items.forEach(function (item, i) {
            item.setAttribute("data-enabled", "true");
            var colorSpan = item.querySelector(".legend-color") ||
                            item.querySelector(".legend-shape-svg") ||
                            item.querySelector(".legend-shape-custom");
            if (colorSpan && originalColors[i] !== undefined) {
                colorSpan.style.backgroundColor = originalColors[i];
            }
        });
        enabledIndices.clear();
        for (var i = 0; i < numCategories; i++) {
            enabledIndices.add(i);
        }

        // Reset filter to original
        if (interactiveState.originalFilter) {
            map.setFilter(config.layerId, interactiveState.originalFilter);
        } else {
            map.setFilter(config.layerId, null);
        }
        layerState.filters[config.layerId] = interactiveState.originalFilter;

        updateResetButton(legendElement, false);

        // Send to Shiny
        if (typeof HTMLWidgets !== "undefined" && HTMLWidgets.shinyMode) {
            Shiny.setInputValue(mapId + "_legend_filter", {
                legendId: config.legendId,
                layerId: config.layerId,
                type: "categorical",
                column: filterColumn,
                enabledValues: filterValues.slice(),
                timestamp: Date.now()
            });
        }
    });
}

/**
 * Initialize continuous legend interactivity with gradient-overlay handles
 * Features:
 * - Vertical line handles positioned on the gradient bar
 * - Semi-transparent overlays on unselected regions
 * - Draggable middle region to pan the selection
 * - Piecewise linear interpolation for non-linear color ramps
 */
function initContinuousLegend(map, mapId, legendElement, filterColumn, config) {
    var values = config.values.map(Number);
    var minValue = Math.min.apply(null, values);
    var maxValue = Math.max.apply(null, values);

    var layerState = window._mapglLayerState[mapId];
    var interactiveState = layerState.interactiveFilters[config.layerId];

    // Store range state
    interactiveState.rangeMin = minValue;
    interactiveState.rangeMax = maxValue;
    interactiveState.originalMin = minValue;
    interactiveState.originalMax = maxValue;
    interactiveState.filterColumn = filterColumn;
    interactiveState.values = values; // Store all values for piecewise interpolation

    // Find the gradient bar
    var gradientBar = legendElement.querySelector(".legend-gradient");
    if (!gradientBar) {
        console.warn("No gradient bar found in legend for interactive continuous legend");
        return;
    }

    // Create the interactive overlay container
    var overlayContainer = document.createElement("div");
    overlayContainer.className = "legend-gradient-overlay-container";

    // Create left ghost overlay (unselected region)
    var leftOverlay = document.createElement("div");
    leftOverlay.className = "legend-gradient-ghost legend-gradient-ghost-left";

    // Create right ghost overlay (unselected region)
    var rightOverlay = document.createElement("div");
    rightOverlay.className = "legend-gradient-ghost legend-gradient-ghost-right";

    // Create left handle (min)
    var leftHandle = document.createElement("div");
    leftHandle.className = "legend-gradient-handle legend-gradient-handle-left";
    leftHandle.title = "Drag to set minimum value";

    // Create right handle (max)
    var rightHandle = document.createElement("div");
    rightHandle.className = "legend-gradient-handle legend-gradient-handle-right";
    rightHandle.title = "Drag to set maximum value";

    // Create middle draggable region
    var middleRegion = document.createElement("div");
    middleRegion.className = "legend-gradient-middle";
    middleRegion.title = "Drag to pan the selected range";

    overlayContainer.appendChild(leftOverlay);
    overlayContainer.appendChild(rightOverlay);
    overlayContainer.appendChild(leftHandle);
    overlayContainer.appendChild(rightHandle);
    overlayContainer.appendChild(middleRegion);

    // Insert overlay container into gradient bar's parent (positioned over gradient)
    gradientBar.style.position = "relative";
    gradientBar.appendChild(overlayContainer);

    // Create current range display below gradient
    var rangeDisplay = document.createElement("div");
    rangeDisplay.className = "legend-range-display";
    rangeDisplay.textContent = formatValue(minValue) + "  " + formatValue(maxValue);

    // Insert range display after gradient, before labels
    var labelsEl = legendElement.querySelector(".legend-labels");
    if (labelsEl) {
        labelsEl.parentNode.insertBefore(rangeDisplay, labelsEl);
    } else {
        gradientBar.parentNode.insertBefore(rangeDisplay, gradientBar.nextSibling);
    }

    // Current selection state (as percentages 0-100)
    var selectionState = {
        leftPercent: 0,
        rightPercent: 100
    };

    /**
     * Convert position percentage (0-100) to data value
     * Uses piecewise linear interpolation for non-linear color ramps
     */
    function positionToValue(percent) {
        if (values.length < 2) return values[0] || 0;

        // Clamp percent
        percent = Math.max(0, Math.min(100, percent));

        var segmentCount = values.length - 1;
        var segmentWidth = 100 / segmentCount;
        var segmentIndex = Math.min(
            Math.floor(percent / segmentWidth),
            segmentCount - 1
        );
        var localPercent = percent - segmentIndex * segmentWidth;
        var localFraction = localPercent / segmentWidth;

        var startVal = values[segmentIndex];
        var endVal = values[segmentIndex + 1];

        return startVal + localFraction * (endVal - startVal);
    }

    /**
     * Convert data value to position percentage (0-100)
     * Inverse of positionToValue
     */
    function valueToPosition(value) {
        if (values.length < 2) return 0;

        // Find which segment this value falls in
        for (var i = 0; i < values.length - 1; i++) {
            var startVal = values[i];
            var endVal = values[i + 1];
            var minSegVal = Math.min(startVal, endVal);
            var maxSegVal = Math.max(startVal, endVal);

            if (value >= minSegVal && value <= maxSegVal) {
                var segmentCount = values.length - 1;
                var segmentWidth = 100 / segmentCount;
                var localFraction = (value - startVal) / (endVal - startVal);
                return i * segmentWidth + localFraction * segmentWidth;
            }
        }

        // Fallback: linear interpolation across full range
        return ((value - minValue) / (maxValue - minValue)) * 100;
    }

    /**
     * Update visual elements based on current selection
     */
    function updateVisuals() {
        var left = selectionState.leftPercent;
        var right = selectionState.rightPercent;

        // Update ghost overlays
        leftOverlay.style.width = left + "%";
        rightOverlay.style.left = right + "%";
        rightOverlay.style.width = (100 - right) + "%";

        // Update handles
        leftHandle.style.left = left + "%";
        rightHandle.style.left = right + "%";

        // Update middle region
        middleRegion.style.left = left + "%";
        middleRegion.style.width = (right - left) + "%";

        // Update range display with actual values
        var minVal = positionToValue(left);
        var maxVal = positionToValue(right);
        rangeDisplay.textContent = formatValue(minVal) + "  " + formatValue(maxVal);
    }

    /**
     * Apply filter based on current selection
     */
    var filterTimeout;
    function applyFilterDebounced() {
        clearTimeout(filterTimeout);
        filterTimeout = setTimeout(function () {
            var minVal = positionToValue(selectionState.leftPercent);
            var maxVal = positionToValue(selectionState.rightPercent);

            interactiveState.rangeMin = minVal;
            interactiveState.rangeMax = maxVal;

            // Check if at full range (within tolerance) - if so, clear filter instead
            // This handles cases where legend breaks are rounded but data has more precision
            var isAtFullRange =
                selectionState.leftPercent <= 0.5 &&
                selectionState.rightPercent >= 99.5;

            if (isAtFullRange) {
                // Restore original filter (no range constraint)
                map.setFilter(config.layerId, interactiveState.originalFilter);
                var layerState = window._mapglLayerState[mapId];
                layerState.filters[config.layerId] = interactiveState.originalFilter;
            } else {
                applyRangeFilter(
                    map,
                    mapId,
                    config.layerId,
                    filterColumn,
                    minVal,
                    maxVal,
                    interactiveState.originalFilter
                );
            }

            // Update reset button visibility
            var hasFilter = !isAtFullRange;
            updateResetButton(legendElement, hasFilter);

            // Send to Shiny if applicable
            if (typeof HTMLWidgets !== "undefined" && HTMLWidgets.shinyMode) {
                Shiny.setInputValue(mapId + "_legend_filter", {
                    legendId: config.legendId,
                    layerId: config.layerId,
                    type: "continuous",
                    column: filterColumn,
                    range: [minVal, maxVal],
                    timestamp: Date.now()
                });
            }
        }, 50);
    }

    /**
     * Get mouse/touch position as percentage of gradient width
     */
    function getPositionPercent(e) {
        var rect = gradientBar.getBoundingClientRect();
        var clientX = e.touches ? e.touches[0].clientX : e.clientX;
        var x = clientX - rect.left;
        var percent = (x / rect.width) * 100;
        return Math.max(0, Math.min(100, percent));
    }

    // Drag state
    var dragState = {
        active: false,
        target: null, // 'left', 'right', or 'middle'
        startX: 0,
        startLeftPercent: 0,
        startRightPercent: 0
    };

    /**
     * Handle drag start
     */
    function onDragStart(e, target) {
        e.preventDefault();
        dragState.active = true;
        dragState.target = target;
        dragState.startX = e.touches ? e.touches[0].clientX : e.clientX;
        dragState.startLeftPercent = selectionState.leftPercent;
        dragState.startRightPercent = selectionState.rightPercent;

        document.addEventListener("mousemove", onDragMove);
        document.addEventListener("mouseup", onDragEnd);
        document.addEventListener("touchmove", onDragMove);
        document.addEventListener("touchend", onDragEnd);

        // Add dragging class for visual feedback
        overlayContainer.classList.add("dragging");
    }

    /**
     * Handle drag movement
     */
    function onDragMove(e) {
        if (!dragState.active) return;

        var percent = getPositionPercent(e);

        if (dragState.target === "left") {
            // Move left handle
            var newLeft = Math.max(
                0,
                Math.min(selectionState.rightPercent - 2, percent)
            );
            selectionState.leftPercent = newLeft;
        } else if (dragState.target === "right") {
            // Move right handle
            var newRight = Math.min(
                100,
                Math.max(selectionState.leftPercent + 2, percent)
            );
            selectionState.rightPercent = newRight;
        } else if (dragState.target === "middle") {
            // Pan both handles together
            var rangeWidth =
                dragState.startRightPercent - dragState.startLeftPercent;
            var currentX = e.touches ? e.touches[0].clientX : e.clientX;
            var rect = gradientBar.getBoundingClientRect();
            var deltaX = currentX - dragState.startX;
            var deltaPct = (deltaX / rect.width) * 100;

            var newLeft = dragState.startLeftPercent + deltaPct;
            var newRight = dragState.startRightPercent + deltaPct;

            // Clamp to bounds
            if (newLeft < 0) {
                newLeft = 0;
                newRight = rangeWidth;
            }
            if (newRight > 100) {
                newRight = 100;
                newLeft = 100 - rangeWidth;
            }

            selectionState.leftPercent = newLeft;
            selectionState.rightPercent = newRight;
        }

        updateVisuals();
        // Visual preview only during drag - filter applied on drag end
    }

    /**
     * Handle drag end - apply filter on release
     */
    function onDragEnd() {
        if (!dragState.active) return;

        dragState.active = false;
        dragState.target = null;

        document.removeEventListener("mousemove", onDragMove);
        document.removeEventListener("mouseup", onDragEnd);
        document.removeEventListener("touchmove", onDragMove);
        document.removeEventListener("touchend", onDragEnd);

        overlayContainer.classList.remove("dragging");

        // Apply filter now that drag is complete
        applyFilterDebounced();
    }

    // Attach event listeners
    leftHandle.addEventListener("mousedown", function (e) {
        onDragStart(e, "left");
    });
    leftHandle.addEventListener("touchstart", function (e) {
        onDragStart(e, "left");
    });

    rightHandle.addEventListener("mousedown", function (e) {
        onDragStart(e, "right");
    });
    rightHandle.addEventListener("touchstart", function (e) {
        onDragStart(e, "right");
    });

    middleRegion.addEventListener("mousedown", function (e) {
        onDragStart(e, "middle");
    });
    middleRegion.addEventListener("touchstart", function (e) {
        onDragStart(e, "middle");
    });

    // Initial visual update
    updateVisuals();

    // Add reset button
    addResetButton(legendElement, function () {
        selectionState.leftPercent = 0;
        selectionState.rightPercent = 100;
        updateVisuals();

        interactiveState.rangeMin = minValue;
        interactiveState.rangeMax = maxValue;

        // Reset filter to original
        if (interactiveState.originalFilter) {
            map.setFilter(config.layerId, interactiveState.originalFilter);
        } else {
            map.setFilter(config.layerId, null);
        }
        layerState.filters[config.layerId] = interactiveState.originalFilter;

        updateResetButton(legendElement, false);

        // Send to Shiny
        if (typeof HTMLWidgets !== "undefined" && HTMLWidgets.shinyMode) {
            Shiny.setInputValue(mapId + "_legend_filter", {
                legendId: config.legendId,
                layerId: config.layerId,
                type: "continuous",
                column: filterColumn,
                range: [minValue, maxValue],
                timestamp: Date.now()
            });
        }
    });
}

/**
 * Apply categorical filter to layer
 * @param enabledIndices - Set of enabled indices
 * @param filterValues - Array of actual data values to filter on
 */
function applyCategoricalFilter(
    map,
    mapId,
    layerId,
    column,
    enabledIndices,
    filterValues,
    originalFilter
) {
    var layerState = window._mapglLayerState[mapId];

    var interactiveFilter;
    if (enabledIndices.size === 0) {
        // No categories enabled - hide all features
        interactiveFilter = ["==", ["get", column], "__IMPOSSIBLE_VALUE__"];
    } else {
        // Build array of enabled filter values - preserve original types
        var enabledValues = [];
        enabledIndices.forEach(function(i) {
            if (filterValues[i] !== undefined) {
                // Don't convert to String - preserve numeric types for proper matching
                enabledValues.push(filterValues[i]);
            }
        });

        // Create "match" filter for enabled categories
        // Format: ["match", ["get", column], [values], true, false]
        interactiveFilter = [
            "match",
            ["get", column],
            enabledValues,
            true,
            false
        ];
    }

    // Combine with original filter if exists
    var finalFilter = combineFilters(originalFilter, interactiveFilter);

    map.setFilter(layerId, finalFilter);
    layerState.filters[layerId] = finalFilter;
}

/**
 * Apply range-based categorical filter (for binned/quantile classifications)
 * @param enabledIndices - Set of enabled bin indices
 * @param breaks - Array of break values [min, break1, break2, ..., max]
 */
function applyRangeBasedCategoricalFilter(
    map,
    mapId,
    layerId,
    column,
    enabledIndices,
    breaks,
    originalFilter
) {
    var layerState = window._mapglLayerState[mapId];

    // Calculate epsilon for floating-point precision and rounding issues
    // Use a larger epsilon (0.1% of range) to account for rounded legend breaks
    var overallMin = breaks[0];
    var overallMax = breaks[breaks.length - 1];
    var range = Math.abs(overallMax - overallMin);
    var epsilon = range > 0 ? range * 0.001 : 0.001;

    var interactiveFilter;
    if (enabledIndices.size === 0) {
        // No categories enabled - hide all features
        interactiveFilter = ["==", ["get", column], "__IMPOSSIBLE_VALUE__"];
    } else {
        // Build "any" filter with range conditions for each enabled bin
        var rangeConditions = [];
        enabledIndices.forEach(function(i) {
            if (i < breaks.length - 1) {
                var minVal = breaks[i];
                var maxVal = breaks[i + 1];
                // Each bin: value >= min AND value < max (except last bin uses <=)
                var isLastBin = (i === breaks.length - 2);
                // Apply epsilon adjustment for edge values to handle floating-point precision
                var filterMin = (i === 0) ? minVal - epsilon : minVal;
                var filterMax = isLastBin ? maxVal + epsilon : maxVal;
                var binCondition = [
                    "all",
                    [">=", ["get", column], filterMin],
                    isLastBin ? ["<=", ["get", column], filterMax] : ["<", ["get", column], filterMax]
                ];
                rangeConditions.push(binCondition);
            }
        });

        if (rangeConditions.length === 1) {
            interactiveFilter = rangeConditions[0];
        } else {
            interactiveFilter = ["any"].concat(rangeConditions);
        }
    }

    // Combine with original filter if exists
    var finalFilter = combineFilters(originalFilter, interactiveFilter);

    map.setFilter(layerId, finalFilter);
    layerState.filters[layerId] = finalFilter;
}

/**
 * Apply range filter to layer
 */
function applyRangeFilter(
    map,
    mapId,
    layerId,
    column,
    min,
    max,
    originalFilter
) {
    var layerState = window._mapglLayerState[mapId];

    // Add epsilon to handle floating-point precision and rounding issues
    // Use a larger epsilon (0.1% of range) to account for rounded legend breaks
    // that may not exactly match data values
    var range = Math.abs(max - min);
    var epsilon = range > 0 ? range * 0.001 : 0.001;
    var filterMin = min - epsilon;
    var filterMax = max + epsilon;

    var interactiveFilter = [
        "all",
        [">=", ["get", column], filterMin],
        ["<=", ["get", column], filterMax]
    ];

    // Combine with original filter if exists
    var finalFilter = combineFilters(originalFilter, interactiveFilter);

    map.setFilter(layerId, finalFilter);
    layerState.filters[layerId] = finalFilter;
}

/**
 * Combine existing filter with interactive filter
 */
function combineFilters(existingFilter, interactiveFilter) {
    if (!existingFilter) {
        return interactiveFilter;
    }
    // Wrap both in "all"
    return ["all", existingFilter, interactiveFilter];
}

/**
 * Add reset button to legend
 */
function addResetButton(legendElement, resetCallback) {
    if (legendElement.querySelector(".legend-reset-btn")) return;

    var resetBtn = document.createElement("button");
    resetBtn.className = "legend-reset-btn";
    resetBtn.textContent = "Reset Filter";
    resetBtn.addEventListener("click", function (e) {
        e.preventDefault();
        e.stopPropagation();
        resetCallback();
    });
    legendElement.appendChild(resetBtn);
}

/**
 * Update reset button visibility
 */
function updateResetButton(legendElement, show) {
    var resetBtn = legendElement.querySelector(".legend-reset-btn");
    if (resetBtn) {
        resetBtn.classList.toggle("visible", show);
    }
}

/**
 * Format numeric value for display
 */
function formatValue(value) {
    if (value === null || value === undefined || isNaN(value)) {
        return String(value);
    }
    var absValue = Math.abs(value);
    if (absValue >= 1000000) {
        return (value / 1000000).toFixed(1) + "M";
    } else if (absValue >= 1000) {
        return (value / 1000).toFixed(1) + "K";
    } else if (Number.isInteger(value)) {
        return value.toString();
    } else {
        return value.toFixed(2);
    }
}

/**
 * Initialize draggable functionality for legends
 * Called automatically when legends are rendered
 * @param {HTMLElement} container - The map container element
 */
function initializeDraggableLegends(container) {
    var legends = container.querySelectorAll('.mapboxgl-legend[data-draggable="true"]');
    legends.forEach(function(legend) {
        // Skip if already initialized
        if (legend._draggableInitialized) return;
        legend._draggableInitialized = true;

        makeLegendDraggable(legend);
    });
}

/**
 * Make a single legend element draggable
 * @param {HTMLElement} legend - The legend element
 */
function makeLegendDraggable(legend) {
    var isDragging = false;
    var startX, startY;
    var startLeft, startTop;

    // Add draggable class for styling
    legend.classList.add('legend-draggable');

    // Get the map container (parent of legend)
    var mapContainer = legend.closest('.mapboxgl-map, .maplibregl-map') || legend.parentElement;

    function onMouseDown(e) {
        // Don't start drag if clicking on interactive elements (including slider handles)
        if (e.target.closest('.legend-item, .legend-reset-btn, .continuous-slider-container, .legend-gradient-handle, .legend-gradient-middle, .legend-gradient-overlay-container, input, button')) {
            return;
        }

        isDragging = true;
        legend.classList.add('legend-dragging');

        startX = e.clientX;
        startY = e.clientY;

        // Get current position
        var rect = legend.getBoundingClientRect();
        var containerRect = mapContainer.getBoundingClientRect();

        // Calculate position relative to container
        startLeft = rect.left - containerRect.left;
        startTop = rect.top - containerRect.top;

        // Switch to absolute positioning with explicit coordinates
        legend.style.position = 'absolute';
        legend.style.left = startLeft + 'px';
        legend.style.top = startTop + 'px';
        legend.style.right = 'auto';
        legend.style.bottom = 'auto';

        e.preventDefault();
        e.stopPropagation();

        document.addEventListener('mousemove', onMouseMove);
        document.addEventListener('mouseup', onMouseUp);
    }

    function onMouseMove(e) {
        if (!isDragging) return;

        var deltaX = e.clientX - startX;
        var deltaY = e.clientY - startY;

        var newLeft = startLeft + deltaX;
        var newTop = startTop + deltaY;

        // Constrain to container bounds
        var containerRect = mapContainer.getBoundingClientRect();
        var legendRect = legend.getBoundingClientRect();

        var maxLeft = containerRect.width - legendRect.width;
        var maxTop = containerRect.height - legendRect.height;

        newLeft = Math.max(0, Math.min(newLeft, maxLeft));
        newTop = Math.max(0, Math.min(newTop, maxTop));

        legend.style.left = newLeft + 'px';
        legend.style.top = newTop + 'px';

        e.preventDefault();
    }

    function onMouseUp(e) {
        if (!isDragging) return;

        isDragging = false;
        legend.classList.remove('legend-dragging');

        document.removeEventListener('mousemove', onMouseMove);
        document.removeEventListener('mouseup', onMouseUp);
    }

    // Add touch support
    function onTouchStart(e) {
        if (e.touches.length !== 1) return;

        var touch = e.touches[0];
        // Don't start drag if touching interactive elements (including slider handles)
        if (e.target.closest('.legend-item, .legend-reset-btn, .continuous-slider-container, .legend-gradient-handle, .legend-gradient-middle, .legend-gradient-overlay-container, input, button')) {
            return;
        }

        isDragging = true;
        legend.classList.add('legend-dragging');

        startX = touch.clientX;
        startY = touch.clientY;

        var rect = legend.getBoundingClientRect();
        var containerRect = mapContainer.getBoundingClientRect();

        startLeft = rect.left - containerRect.left;
        startTop = rect.top - containerRect.top;

        legend.style.position = 'absolute';
        legend.style.left = startLeft + 'px';
        legend.style.top = startTop + 'px';
        legend.style.right = 'auto';
        legend.style.bottom = 'auto';

        e.preventDefault();
    }

    function onTouchMove(e) {
        if (!isDragging || e.touches.length !== 1) return;

        var touch = e.touches[0];
        var deltaX = touch.clientX - startX;
        var deltaY = touch.clientY - startY;

        var newLeft = startLeft + deltaX;
        var newTop = startTop + deltaY;

        var containerRect = mapContainer.getBoundingClientRect();
        var legendRect = legend.getBoundingClientRect();

        var maxLeft = containerRect.width - legendRect.width;
        var maxTop = containerRect.height - legendRect.height;

        newLeft = Math.max(0, Math.min(newLeft, maxLeft));
        newTop = Math.max(0, Math.min(newTop, maxTop));

        legend.style.left = newLeft + 'px';
        legend.style.top = newTop + 'px';

        e.preventDefault();
    }

    function onTouchEnd(e) {
        if (!isDragging) return;

        isDragging = false;
        legend.classList.remove('legend-dragging');
    }

    legend.addEventListener('mousedown', onMouseDown);
    legend.addEventListener('touchstart', onTouchStart, { passive: false });
    legend.addEventListener('touchmove', onTouchMove, { passive: false });
    legend.addEventListener('touchend', onTouchEnd);
}
</script>
<script>// Measurement functionality
function createMeasurementBox(map) {
  const box = document.createElement("div");
  box.id = `measurement-box-${map._container.id}`;
  box.className = "mapgl-measurement-box";
  box.style.cssText = `
    position: absolute;
    bottom: 45px;
    left: 10px;
    background: white;
    padding: 10px 15px;
    border-radius: 4px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    font-size: 12px;
    line-height: 1.4;
    z-index: 1;
    display: none;
    min-width: 120px;
    max-width: 200px;
    border: 1px solid rgba(0,0,0,0.1);
  `;

  box.innerHTML = `
    <div style="font-weight: 600; margin-bottom: 5px; color: #333; font-size: 11px; text-transform: uppercase;">
      Measurement
    </div>
    <div class="measurement-content">
      <div id="measurement-primary" style="font-size: 14px; font-weight: 500; color: #000; margin-bottom: 2px;"></div>
      <div id="measurement-secondary" style="font-size: 11px; color: #666;"></div>
    </div>
  `;

  map.getContainer().appendChild(box);
  return box;
}

function calculateDrawingMeasurements(mode, state, coords) {
  try {
    if (mode === "draw_line_string" && coords && coords.length >= 2) {
      const line = turf.lineString(coords);
      const distance = turf.length(line, { units: "kilometers" });
      return { type: "distance", value: distance };
    } else if (
      (mode === "draw_polygon" || mode === "draw_freehand") &&
      coords &&
      coords.length >= 3
    ) {
      // Ensure polygon is closed by adding first point at end if needed
      const closedCoords = [...coords];
      if (
        closedCoords[0][0] !== closedCoords[closedCoords.length - 1][0] ||
        closedCoords[0][1] !== closedCoords[closedCoords.length - 1][1]
      ) {
        closedCoords.push(closedCoords[0]);
      }

      try {
        const polygon = turf.polygon([closedCoords]);
        const area = turf.area(polygon) / 1000000; // Convert to km
        const perimeter = turf.length(turf.polygonToLine(polygon), {
          units: "kilometers",
        });
        return { type: "area", value: area, perimeter: perimeter };
      } catch (error) {
        return null;
      }
    } else if (mode === "draw_rectangle" && coords && coords.length >= 4) {
      const polygon = turf.polygon([coords]);
      const area = turf.area(polygon) / 1000000; // Convert to km
      const perimeter = turf.length(turf.polygonToLine(polygon), {
        units: "kilometers",
      });
      return { type: "area", value: area, perimeter: perimeter };
    } else if (mode === "draw_radius" && coords && coords.length >= 2) {
      const center = turf.point(coords[0]);
      const edge = turf.point(coords[1]);
      const radius = turf.distance(center, edge, { units: "kilometers" });
      const area = Math.PI * radius * radius; // r
      return { type: "radius", value: radius, area: area };
    }
  } catch (e) {
    return null;
  }

  return null;
}

function formatMeasurements(measurements, units) {
  if (!measurements) return { primary: "", secondary: "" };

  const formatDistance = function (km) {
    let result = [];

    if (units === "metric" || units === "both") {
      if (km < 1) {
        result.push(`${(km * 1000).toFixed(0)} m`);
      } else {
        result.push(`${km.toFixed(2)} km`);
      }
    }

    if (units === "imperial" || units === "both") {
      const miles = km * 0.621371;
      if (miles < 0.1) {
        result.push(`${(miles * 5280).toFixed(0)} ft`);
      } else {
        result.push(`${miles.toFixed(2)} mi`);
      }
    }

    return result;
  };

  const formatArea = function (sqKm) {
    let result = [];

    if (units === "metric" || units === "both") {
      if (sqKm < 0.01) {
        result.push(`${(sqKm * 1000000).toFixed(0)} m`);
      } else if (sqKm < 1) {
        result.push(`${(sqKm * 100).toFixed(2)} ha`);
      } else {
        result.push(`${sqKm.toFixed(2)} km`);
      }
    }

    if (units === "imperial" || units === "both") {
      const sqMiles = sqKm * 0.386102;
      if (sqMiles < 0.001) {
        result.push(`${(sqMiles * 640).toFixed(2)} acres`);
      } else {
        result.push(`${sqMiles.toFixed(3)} mi`);
      }
    }

    return result;
  };

  if (measurements.type === "distance") {
    const formatted = formatDistance(measurements.value);
    return {
      primary: formatted[0] || "",
      secondary: formatted[1] || "",
    };
  } else if (measurements.type === "area") {
    const areaFormatted = formatArea(measurements.value);
    const perimeterFormatted = formatDistance(measurements.perimeter);

    if (units === "both") {
      return {
        primary: areaFormatted[0] || "",
        secondary: `${areaFormatted[1] || ""}  ${perimeterFormatted[0] || ""}`,
      };
    } else {
      return {
        primary: areaFormatted[0] || "",
        secondary: `Perimeter: ${perimeterFormatted[0] || ""}`,
      };
    }
  } else if (measurements.type === "radius") {
    const distFormatted = formatDistance(measurements.value);
    const areaFormatted = formatArea(measurements.area);

    return {
      primary: `Radius: ${distFormatted[0] || ""}`,
      secondary:
        units === "both"
          ? `${distFormatted[1] || ""}  ${areaFormatted[0] || ""}`
          : `Area: ${areaFormatted[0] || ""}`,
    };
  }

  return { primary: "", secondary: "" };
}

function updateMeasurementDisplay(box, measurements, units) {
  const primary = box.querySelector("#measurement-primary");
  const secondary = box.querySelector("#measurement-secondary");

  const formatted = formatMeasurements(measurements, units);

  if (formatted.primary) {
    primary.textContent = formatted.primary;
    secondary.textContent = formatted.secondary;
    box.style.display = "block";
  } else {
    box.style.display = "none";
  }
}

function initializeMeasurements(map, draw, units) {
  const measurementBox = createMeasurementBox(map);
  const DRAWING_MODES = [
    "draw_line_string",
    "draw_polygon",
    "draw_rectangle",
    "draw_radius",
    "draw_freehand",
  ];

  // Store original handlers
  const originalHandlers = {};

  DRAWING_MODES.forEach((mode) => {
    const modeObj = MapboxDraw.modes[mode];
    if (!modeObj) return;

    // Wrap onClick for polygon mode (better for click-based drawing)
    if (modeObj.onClick && mode === "draw_polygon") {
      originalHandlers[mode + "_onClick"] = modeObj.onClick;
      modeObj.onClick = function (state, e) {
        const result = originalHandlers[mode + "_onClick"].call(this, state, e);

        // For polygon mode, show measurements after each click
        if (
          state.polygon &&
          state.polygon.coordinates &&
          state.polygon.coordinates[0].length >= 3
        ) {
          const coords = state.polygon.coordinates[0];
          const measurements = calculateDrawingMeasurements(
            mode,
            state,
            coords,
          );
          updateMeasurementDisplay(measurementBox, measurements, units);
        }

        return result;
      };
    }

    // Wrap onMouseMove for real-time updates (lines, rectangles, radius)
    if (modeObj.onMouseMove && mode !== "draw_polygon") {
      originalHandlers[mode + "_onMouseMove"] = modeObj.onMouseMove;
      modeObj.onMouseMove = function (state, e) {
        originalHandlers[mode + "_onMouseMove"].call(this, state, e);

        let coords = null;
        if (state.line && state.line.coordinates) {
          coords = [...state.line.coordinates, [e.lngLat.lng, e.lngLat.lat]];
        } else if (state.rectangle && state.rectangle.coordinates) {
          coords = state.rectangle.coordinates[0];
        }

        if (coords) {
          const measurements = calculateDrawingMeasurements(
            mode,
            state,
            coords,
          );
          updateMeasurementDisplay(measurementBox, measurements, units);
        }
      };
    }

    // Wrap onDrag for freehand mode
    if (modeObj.onDrag) {
      originalHandlers[mode + "_onDrag"] = modeObj.onDrag;
      modeObj.onDrag = function (state, e) {
        const result = originalHandlers[mode + "_onDrag"].call(this, state, e);

        if (state.polygon && state.polygon.coordinates) {
          const coords = state.polygon.coordinates[0];
          if (coords.length >= 3) {
            const measurements = calculateDrawingMeasurements(
              mode,
              state,
              coords,
            );
            updateMeasurementDisplay(measurementBox, measurements, units);
          }
        }

        return result;
      };
    }
  });

  // Hide measurement box when drawing stops and handle button states
  map.on("draw.modechange", (e) => {
    if (e.mode === "simple_select") {
      measurementBox.style.display = "none";
      // Reset button states when switching to select mode
      const drawControlGroup = map
        .getContainer()
        .querySelector(".maplibregl-ctrl-group");
      if (drawControlGroup) {
        drawControlGroup
          .querySelectorAll("button")
          .forEach((btn) => btn.classList.remove("active"));
      }
    }
  });

  map.on("draw.create", () => {
    measurementBox.style.display = "none";
    // Reset button states when drawing is completed
    const drawControlGroup = map
      .getContainer()
      .querySelector(".maplibregl-ctrl-group");
    if (drawControlGroup) {
      drawControlGroup
        .querySelectorAll("button")
        .forEach((btn) => btn.classList.remove("active"));
    }
  });

  map.on("draw.delete", () => {
    measurementBox.style.display = "none";
  });

  // Special handling for freehand mode using data update events
  map.on("draw.update", (e) => {
    const currentMode = draw.getMode();

    if (currentMode === "draw_freehand" && e.features && e.features[0]) {
      const feature = e.features[0];
      if (
        feature.geometry.type === "Polygon" &&
        feature.geometry.coordinates[0].length >= 3
      ) {
        const coords = feature.geometry.coordinates[0];
        const measurements = calculateDrawingMeasurements(
          "draw_freehand",
          {},
          coords,
        );
        updateMeasurementDisplay(measurementBox, measurements, units);
      }
    }

    // Also handle editing mode - when features are being edited
    if (currentMode === "direct_select" && e.features && e.features[0]) {
      const feature = e.features[0];
      if (
        feature.geometry.type === "Polygon" &&
        feature.geometry.coordinates[0].length >= 3
      ) {
        const coords = feature.geometry.coordinates[0];
        const measurements = calculateDrawingMeasurements(
          "draw_polygon",
          {},
          coords,
        );
        updateMeasurementDisplay(measurementBox, measurements, units);
      } else if (
        feature.geometry.type === "LineString" &&
        feature.geometry.coordinates.length >= 2
      ) {
        const coords = feature.geometry.coordinates;
        const measurements = calculateDrawingMeasurements(
          "draw_line_string",
          {},
          coords,
        );
        updateMeasurementDisplay(measurementBox, measurements, units);
      }
    }
  });

  // Show measurements when selecting features for editing
  map.on("draw.selectionchange", (e) => {
    if (e.features && e.features.length > 0) {
      const feature = e.features[0];
      if (
        feature.geometry.type === "Polygon" &&
        feature.geometry.coordinates[0].length >= 3
      ) {
        const coords = feature.geometry.coordinates[0];
        const measurements = calculateDrawingMeasurements(
          "draw_polygon",
          {},
          coords,
        );
        updateMeasurementDisplay(measurementBox, measurements, units);
      } else if (
        feature.geometry.type === "LineString" &&
        feature.geometry.coordinates.length >= 2
      ) {
        const coords = feature.geometry.coordinates;
        const measurements = calculateDrawingMeasurements(
          "draw_line_string",
          {},
          coords,
        );
        updateMeasurementDisplay(measurementBox, measurements, units);
      }
    } else {
      // No features selected, hide measurement box
      measurementBox.style.display = "none";
    }
  });
}

function evaluateExpression(expression, properties) {
  if (!Array.isArray(expression)) {
    return expression;
  }

  const operator = expression[0];

  switch (operator) {
    case "get":
      return properties[expression[1]];
    case "concat":
      return expression
        .slice(1)
        .map((item) => evaluateExpression(item, properties))
        .join("");
    case "to-string":
      return String(evaluateExpression(expression[1], properties));
    case "to-number":
      return Number(evaluateExpression(expression[1], properties));
    case "number-format":
      const value = evaluateExpression(expression[1], properties);
      const options = expression[2] || {};

      // Handle locale option
      const locale = options.locale || "en-US";

      // Build Intl.NumberFormat options
      const formatOptions = {};

      // Style options
      if (options.style) formatOptions.style = options.style; // 'decimal', 'currency', 'percent', 'unit'
      if (options.currency) formatOptions.currency = options.currency;
      if (options.unit) formatOptions.unit = options.unit;

      // Digit options
      if (options.hasOwnProperty("min-fraction-digits")) {
        formatOptions.minimumFractionDigits = options["min-fraction-digits"];
      }
      if (options.hasOwnProperty("max-fraction-digits")) {
        formatOptions.maximumFractionDigits = options["max-fraction-digits"];
      }
      if (options.hasOwnProperty("min-integer-digits")) {
        formatOptions.minimumIntegerDigits = options["min-integer-digits"];
      }

      // Notation options
      if (options.notation) formatOptions.notation = options.notation; // 'standard', 'scientific', 'engineering', 'compact'
      if (options.compactDisplay)
        formatOptions.compactDisplay = options.compactDisplay; // 'short', 'long'

      // Grouping
      if (options.hasOwnProperty("useGrouping")) {
        formatOptions.useGrouping = options.useGrouping;
      }

      return new Intl.NumberFormat(locale, formatOptions).format(value);
    default:
      // For literals and other simple values
      return expression;
  }
}

function onMouseMoveTooltip(e, map, tooltipPopup, tooltipProperty, layerId) {
  if (e.features.length > 0) {
    // Query all features at this point to determine z-order
    // Features are returned in top-to-bottom rendering order
    const allFeatures = map.queryRenderedFeatures(e.point);

    // Find the topmost layer that has a tooltip
    let topmostLayerWithTooltip = null;
    for (let i = 0; i < allFeatures.length; i++) {
      const feature = allFeatures[i];
      const featureLayerId = feature.layer.id;

      // Check if this layer has a tooltip handler registered
      if (window._mapboxHandlers && window._mapboxHandlers[featureLayerId]) {
        topmostLayerWithTooltip = featureLayerId;
        break;
      }
    }

    // Only show tooltip if this is the topmost layer with a tooltip
    if (topmostLayerWithTooltip === layerId) {
      map.getCanvas().style.cursor = "pointer";

      // Clear any existing active tooltip first to prevent stacking
      if (window._activeTooltip && window._activeTooltip !== tooltipPopup) {
        window._activeTooltip.remove();
      }

      let description;

      // Check if tooltipProperty is an expression (array) or a simple property name (string)
      if (Array.isArray(tooltipProperty)) {
        // It's an expression, evaluate it
        description = evaluateExpression(
          tooltipProperty,
          e.features[0].properties,
        );
      } else {
        // It's a property name, get the value
        description = e.features[0].properties[tooltipProperty];
      }

      tooltipPopup.setLngLat(e.lngLat).setHTML(description).addTo(map);

      // Store reference to currently active tooltip
      window._activeTooltip = tooltipPopup;
    } else {
      // This layer is not topmost, hide tooltip if it was showing
      tooltipPopup.remove();
      if (window._activeTooltip === tooltipPopup) {
        delete window._activeTooltip;
      }
    }
  } else {
    tooltipPopup.remove();
    // If this was the active tooltip, clear the reference
    if (window._activeTooltip === tooltipPopup) {
      delete window._activeTooltip;
    }
  }
}

function onMouseLeaveTooltip(map, tooltipPopup) {
  map.getCanvas().style.cursor = "";
  tooltipPopup.remove();
  if (window._activeTooltip === tooltipPopup) {
    delete window._activeTooltip;
  }
}

function onClickPopup(e, map, popupProperty, layerId) {
  if (e.features.length > 0) {
    // Query all features at this point to determine z-order
    const allFeatures = map.queryRenderedFeatures(e.point);

    // Find the topmost layer that has a popup
    let topmostLayerWithPopup = null;
    for (let i = 0; i < allFeatures.length; i++) {
      const feature = allFeatures[i];
      const featureLayerId = feature.layer.id;

      // Check if this layer has a popup handler registered
      if (
        window._mapboxClickHandlers &&
        window._mapboxClickHandlers[featureLayerId]
      ) {
        topmostLayerWithPopup = featureLayerId;
        break;
      }
    }

    // Only show popup if this is the topmost layer with a popup
    if (topmostLayerWithPopup === layerId) {
      let description;

      // Check if popupProperty is an expression (array) or a simple property name (string)
      if (Array.isArray(popupProperty)) {
        // It's an expression, evaluate it
        description = evaluateExpression(
          popupProperty,
          e.features[0].properties,
        );
      } else {
        // It's a property name, get the value
        description = e.features[0].properties[popupProperty];
      }

      // Remove any existing popup for this layer
      if (window._mapboxPopups && window._mapboxPopups[layerId]) {
        window._mapboxPopups[layerId].remove();
      }

      // Create and show the popup
      const popup = new maplibregl.Popup({ maxWidth: "400px" })
        .setLngLat(e.lngLat)
        .setHTML(description)
        .addTo(map);

      // Store reference to this popup
      if (!window._mapboxPopups) {
        window._mapboxPopups = {};
      }
      window._mapboxPopups[layerId] = popup;

      // Remove reference when popup is closed
      popup.on("close", function () {
        if (window._mapboxPopups[layerId] === popup) {
          delete window._mapboxPopups[layerId];
        }
      });
    }
  }
}

// Helper function to generate draw styles based on parameters
function generateDrawStyles(styling) {
  if (!styling) return null;

  return [
    // Point styles
    {
      id: "gl-draw-point-active",
      type: "circle",
      filter: [
        "all",
        ["==", "$type", "Point"],
        ["==", "meta", "feature"],
        ["==", "active", "true"],
      ],
      paint: {
        "circle-radius": styling.vertex_radius + 2,
        "circle-color": styling.active_color,
      },
    },
    {
      id: "gl-draw-point",
      type: "circle",
      filter: [
        "all",
        ["==", "$type", "Point"],
        ["==", "meta", "feature"],
        ["==", "active", "false"],
      ],
      paint: {
        "circle-radius": styling.vertex_radius,
        "circle-color": styling.point_color,
      },
    },
    // Line styles
    {
      id: "gl-draw-line",
      type: "line",
      filter: ["all", ["==", "$type", "LineString"]],
      layout: {
        "line-cap": "round",
        "line-join": "round",
      },
      paint: {
        "line-color": [
          "case",
          ["==", ["get", "active"], "true"],
          styling.active_color,
          styling.line_color,
        ],
        "line-width": styling.line_width,
      },
    },
    // Polygon fill
    {
      id: "gl-draw-polygon-fill",
      type: "fill",
      filter: ["all", ["==", "$type", "Polygon"]],
      paint: {
        "fill-color": [
          "case",
          ["==", ["get", "active"], "true"],
          styling.active_color,
          styling.fill_color,
        ],
        "fill-outline-color": [
          "case",
          ["==", ["get", "active"], "true"],
          styling.active_color,
          styling.fill_color,
        ],
        "fill-opacity": styling.fill_opacity,
      },
    },
    // Polygon outline
    {
      id: "gl-draw-polygon-stroke",
      type: "line",
      filter: ["all", ["==", "$type", "Polygon"]],
      layout: {
        "line-cap": "round",
        "line-join": "round",
      },
      paint: {
        "line-color": [
          "case",
          ["==", ["get", "active"], "true"],
          styling.active_color,
          styling.line_color,
        ],
        "line-width": styling.line_width,
      },
    },
    // Midpoints
    {
      id: "gl-draw-polygon-midpoint",
      type: "circle",
      filter: ["all", ["==", "$type", "Point"], ["==", "meta", "midpoint"]],
      paint: {
        "circle-radius": 3,
        "circle-color": styling.active_color,
      },
    },
    // Vertex point halos
    {
      id: "gl-draw-vertex-halo-active",
      type: "circle",
      filter: ["all", ["==", "meta", "vertex"], ["==", "$type", "Point"]],
      paint: {
        "circle-radius": [
          "case",
          ["==", ["get", "active"], "true"],
          styling.vertex_radius + 4,
          styling.vertex_radius + 2,
        ],
        "circle-color": "#FFF",
      },
    },
    // Vertex points
    {
      id: "gl-draw-vertex-active",
      type: "circle",
      filter: ["all", ["==", "meta", "vertex"], ["==", "$type", "Point"]],
      paint: {
        "circle-radius": [
          "case",
          ["==", ["get", "active"], "true"],
          styling.vertex_radius + 2,
          styling.vertex_radius,
        ],
        "circle-color": styling.active_color,
      },
    },
  ];
}

// Helper function to add features from a source to draw
function addSourceFeaturesToDraw(draw, sourceId, map) {
  const mapId = map.getContainer().id;

  // First try to get data from our registry (more reliable across MapLibre/Mapbox)
  const storedData = getStoredSourceData(mapId, sourceId);
  if (storedData) {
    draw.add(storedData);
    return;
  }

  // Fallback to internal _data property (for backwards compatibility with Mapbox)
  const source = map.getSource(sourceId);
  if (source && source._data) {
    draw.add(source._data);
  } else {
    console.warn("Source not found or has no data:", sourceId);
  }
}

// Global registries for tracking user-added images and pending operations during style changes
if (!window._mapgl) {
  window._mapgl = {
    // Registry of user-added images per map: { mapId: { imageId: { url, options } } }
    userImages: {},
    // Queue of pending operations during style loading: { mapId: [] }
    pendingOperations: {},
    // Track which maps are currently loading a style: { mapId: true/false }
    styleLoading: {},
    // Registry of GeoJSON source data per map: { mapId: { sourceId: geojsonData } }
    sourceData: {}
  };
}

// Helper to store GeoJSON source data for later retrieval
function storeSourceData(mapId, sourceId, data) {
  if (!window._mapgl.sourceData[mapId]) {
    window._mapgl.sourceData[mapId] = {};
  }
  window._mapgl.sourceData[mapId][sourceId] = data;
}

// Helper to get stored GeoJSON source data
function getStoredSourceData(mapId, sourceId) {
  if (window._mapgl.sourceData[mapId]) {
    return window._mapgl.sourceData[mapId][sourceId];
  }
  return null;
}

// Helper to queue an operation or execute it immediately
function queueOrExecute(mapId, operation) {
  if (window._mapgl.styleLoading[mapId]) {
    if (!window._mapgl.pendingOperations[mapId]) {
      window._mapgl.pendingOperations[mapId] = [];
    }
    window._mapgl.pendingOperations[mapId].push(operation);
    console.log("[MapGL Debug] Queued operation during style load for map:", mapId);
  } else {
    operation();
  }
}

// Helper to execute all pending operations for a map
function executePendingOperations(mapId) {
  const pending = window._mapgl.pendingOperations[mapId];
  if (pending && pending.length > 0) {
    console.log("[MapGL Debug] Executing", pending.length, "pending operations for map:", mapId);
    pending.forEach(function(op) {
      try {
        op();
      } catch (err) {
        console.error("[MapGL Debug] Error executing pending operation:", err);
      }
    });
    window._mapgl.pendingOperations[mapId] = [];
  }
}

// Helper to register a user image
function registerUserImage(mapId, imageId, url, options) {
  if (!window._mapgl.userImages[mapId]) {
    window._mapgl.userImages[mapId] = {};
  }
  window._mapgl.userImages[mapId][imageId] = { url: url, options: options };
  console.log("[MapGL Debug] Registered user image:", imageId, "for map:", mapId);
}

// Helper to re-add all user images after style change
async function reAddUserImages(map, mapId) {
  const images = window._mapgl.userImages[mapId];
  if (!images) return;

  for (const imageId in images) {
    const imageInfo = images[imageId];
    try {
      const image = await map.loadImage(imageInfo.url);
      if (!map.hasImage(imageId)) {
        map.addImage(imageId, image.data, imageInfo.options);
        console.log("[MapGL Debug] Re-added user image after style change:", imageId);
      }
    } catch (error) {
      console.error("[MapGL Debug] Error re-adding image:", imageId, error);
    }
  }
}

// Screenshot capture functionality
async function captureMapScreenshot(map, options) {
  const container = map.getContainer();
  const hiddenElements = [];

  // Hide controls (nav, fullscreen, screenshot, etc.) but keep legends/attribution based on options
  if (options.hide_controls) {
    container.querySelectorAll('.maplibregl-ctrl-group, .mapboxgl-ctrl-group').forEach(el => {
      // Skip scale bar if include_scale_bar is true
      if (options.include_scale_bar && el.querySelector('.maplibregl-ctrl-scale, .mapboxgl-ctrl-scale')) {
        return;
      }
      hiddenElements.push({ element: el, display: el.style.display });
      el.style.display = 'none';
    });
    // Also hide layers control and measurement box
    container.querySelectorAll('.layers-control, .mapgl-measurement-box').forEach(el => {
      hiddenElements.push({ element: el, display: el.style.display });
      el.style.display = 'none';
    });
  }

  // Hide legends if requested
  if (!options.include_legend) {
    container.querySelectorAll('.mapboxgl-legend').forEach(el => {
      hiddenElements.push({ element: el, display: el.style.display });
      el.style.display = 'none';
    });
  }

  // Attribution is always included to comply with map provider TOS

  try {
    // Wait for map to be idle
    if (!map.loaded()) {
      await new Promise(resolve => map.once('idle', resolve));
    }

    // Force render and capture
    map.triggerRepaint();
    await new Promise(resolve => map.once('render', resolve));

    const canvas = await html2canvas(container, {
      useCORS: true,
      allowTaint: true,
      backgroundColor: null,
      logging: false,
      scale: options.image_scale || 1,
      onclone: function(clonedDoc, clonedElement) {
        // Copy WebGL canvas content to cloned canvas
        const originalCanvas = container.querySelector('canvas.maplibregl-canvas, canvas.mapboxgl-canvas');
        const clonedCanvas = clonedElement.querySelector('canvas.maplibregl-canvas, canvas.mapboxgl-canvas');
        if (originalCanvas && clonedCanvas) {
          const ctx = clonedCanvas.getContext('2d');
          if (ctx) {
            ctx.drawImage(originalCanvas, 0, 0);
          }
        }
      }
    });

    // Restore hidden elements
    hiddenElements.forEach(item => item.element.style.display = item.display);
    return canvas;

  } catch (error) {
    // Restore hidden elements even on error
    hiddenElements.forEach(item => item.element.style.display = item.display);
    throw error;
  }
}

function downloadScreenshot(canvas, filename) {
  const link = document.createElement('a');
  link.download = `${filename}.png`;
  link.href = canvas.toDataURL('image/png');
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
}

function createScreenshotControl(map, options, isMaplibre = true) {
  const ctrlPrefix = isMaplibre ? 'maplibregl' : 'mapboxgl';

  const btn = document.createElement("button");
  btn.className = `${ctrlPrefix}-ctrl-icon ${ctrlPrefix}-ctrl-screenshot`;
  btn.type = "button";
  btn.title = options.button_title || "Capture screenshot";
  btn.setAttribute("aria-label", options.button_title || "Capture screenshot");
  btn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/><circle cx="12" cy="13" r="4"/></svg>`;
  btn.style.cssText = "display:flex;justify-content:center;align-items:center;cursor:pointer;";

  const container = document.createElement("div");
  container.className = `${ctrlPrefix}-ctrl ${ctrlPrefix}-ctrl-group`;
  container.appendChild(btn);

  let capturing = false;
  btn.onclick = async () => {
    if (capturing) return;
    capturing = true;
    btn.style.opacity = "0.5";
    btn.style.cursor = "wait";

    try {
      const canvas = await captureMapScreenshot(map, {
        include_legend: options.include_legend !== false,
        hide_controls: options.hide_controls !== false,
        include_scale_bar: options.include_scale_bar !== false,
        image_scale: options.image_scale || 1
      });
      downloadScreenshot(canvas, options.filename || "map-screenshot");
    } catch (e) {
      console.error("Screenshot capture failed:", e);
    }

    btn.style.opacity = "1";
    btn.style.cursor = "pointer";
    capturing = false;
  };

  const controlObj = {
    onAdd: () => container,
    onRemove: () => {
      if (container.parentNode) {
        container.parentNode.removeChild(container);
      }
    }
  };

  return controlObj;
}

HTMLWidgets.widget({
  name: "maplibregl",

  type: "output",

  factory: function (el, width, height) {
    let map;
    let draw;

    return {
      renderValue: function (x) {
        if (typeof maplibregl === "undefined") {
          console.error("Maplibre GL JS is not loaded.");
          return;
        }

        // Clean up existing map if present to prevent control stacking on re-render
        if (map) {
          // Remove all controls from the old map
          if (map.controls && map.controls.length > 0) {
            map.controls.forEach(function (controlObj) {
              try {
                if (controlObj.control) {
                  map.removeControl(controlObj.control);
                }
              } catch (e) {
                // Control may already be removed
              }
            });
          }
          // Remove the old map
          try {
            map.remove();
          } catch (e) {
            // Map may already be removed
          }
          map = null;
        }

        let protocol = new pmtiles.Protocol({ metadata: true });
        maplibregl.addProtocol("pmtiles", protocol.tile);

        map = new maplibregl.Map({
          container: el.id,
          style: x.style,
          center: x.center,
          zoom: x.zoom,
          bearing: x.bearing,
          pitch: x.pitch,
          ...x.additional_params,
        });

        map.controls = [];
        map._initialStyleLoaded = false;

        map.on("style.load", function () {
          if (x.projection) {
            map.setProjection({ type: x.projection });
          }

          map.resize();

          if (HTMLWidgets.shinyMode) {
            map.on("load", function () {
              var bounds = map.getBounds();
              var center = map.getCenter();
              var zoom = map.getZoom();

              Shiny.setInputValue(el.id + "_zoom", zoom);
              Shiny.setInputValue(el.id + "_center", {
                lng: center.lng,
                lat: center.lat,
              });
              Shiny.setInputValue(el.id + "_bbox", {
                xmin: bounds.getWest(),
                ymin: bounds.getSouth(),
                xmax: bounds.getEast(),
                ymax: bounds.getNorth(),
              });
            });

            map.on("moveend", function (e) {
              var map = e.target;
              var bounds = map.getBounds();
              var center = map.getCenter();
              var zoom = map.getZoom();

              Shiny.onInputChange(el.id + "_zoom", zoom);
              Shiny.onInputChange(el.id + "_center", {
                lng: center.lng,
                lat: center.lat,
              });
              Shiny.onInputChange(el.id + "_bbox", {
                xmin: bounds.getWest(),
                ymin: bounds.getSouth(),
                xmax: bounds.getEast(),
                ymax: bounds.getNorth(),
              });
            });
          }

          // Set config properties if provided
          if (x.config_properties) {
            x.config_properties.forEach(function (config) {
              map.setConfigProperty(
                config.importId,
                config.configName,
                config.value,
              );
            });
          }

          if (x.markers) {
            if (!window.maplibreglMarkers) {
              window.maplibreglMarkers = [];
            }
            x.markers.forEach(function (marker) {
              const markerOptions = {
                color: marker.color,
                rotation: marker.rotation,
                draggable: marker.options.draggable || false,
                ...marker.options,
              };
              const mapMarker = new maplibregl.Marker(markerOptions)
                .setLngLat([marker.lng, marker.lat])
                .addTo(map);

              if (marker.popup) {
                mapMarker.setPopup(
                  new maplibregl.Popup({
                    offset: 25,
                    maxWidth: "400px",
                  }).setHTML(marker.popup),
                );
              }

              if (HTMLWidgets.shinyMode) {
                const markerId = marker.id;
                if (markerId) {
                  const lngLat = mapMarker.getLngLat();
                  Shiny.setInputValue(el.id + "_marker_" + markerId, {
                    id: markerId,
                    lng: lngLat.lng,
                    lat: lngLat.lat,
                  });

                  mapMarker.on("dragend", function () {
                    const lngLat = mapMarker.getLngLat();
                    Shiny.setInputValue(el.id + "_marker_" + markerId, {
                      id: markerId,
                      lng: lngLat.lng,
                      lat: lngLat.lat,
                    });
                  });
                }
              }

              window.maplibreglMarkers.push(mapMarker);
            });
          }

          // Add sources if provided
          if (x.sources) {
            x.sources.forEach(function (source) {
              if (source.type === "vector") {
                const sourceOptions = {
                  type: "vector",
                };
                // Add url or tiles
                if (source.url) {
                  sourceOptions.url = source.url;
                }
                if (source.tiles) {
                  sourceOptions.tiles = source.tiles;
                }
                // Add promoteId if provided
                if (source.promoteId) {
                  sourceOptions.promoteId = source.promoteId;
                }
                // Add any other additional options
                for (const [key, value] of Object.entries(source)) {
                  if (
                    !["id", "type", "url", "tiles", "promoteId"].includes(key)
                  ) {
                    sourceOptions[key] = value;
                  }
                }
                map.addSource(source.id, sourceOptions);
              } else if (source.type === "geojson") {
                const geojsonData = source.data;
                const sourceOptions = {
                  type: "geojson",
                  data: geojsonData,
                  generateId: source.generateId,
                };

                // Add additional options
                for (const [key, value] of Object.entries(source)) {
                  if (!["id", "type", "data", "generateId"].includes(key)) {
                    sourceOptions[key] = value;
                  }
                }

                map.addSource(source.id, sourceOptions);
                // Store GeoJSON data for later retrieval (e.g., for draw control)
                storeSourceData(el.id, source.id, geojsonData);
              } else if (source.type === "raster") {
                if (source.url) {
                  map.addSource(source.id, {
                    type: "raster",
                    url: source.url,
                    tileSize: source.tileSize,
                    maxzoom: source.maxzoom,
                  });
                } else if (source.tiles) {
                  map.addSource(source.id, {
                    type: "raster",
                    tiles: source.tiles,
                    tileSize: source.tileSize,
                    maxzoom: source.maxzoom,
                  });
                }
              } else if (source.type === "raster-dem") {
                map.addSource(source.id, {
                  type: "raster-dem",
                  url: source.url,
                  tileSize: source.tileSize,
                  maxzoom: source.maxzoom,
                });
              } else if (source.type === "image") {
                map.addSource(source.id, {
                  type: "image",
                  url: source.url,
                  coordinates: source.coordinates,
                });
              } else if (source.type === "video") {
                map.addSource(source.id, {
                  type: "video",
                  urls: source.urls,
                  coordinates: source.coordinates,
                });
              }
            });
          }

          function add_my_layers(layer) {
            try {
              const layerConfig = {
                id: layer.id,
                type: layer.type,
                source: layer.source,
                layout: layer.layout || {},
                paint: layer.paint || {},
              };

              // Check if source is an object and set generateId if source type is 'geojson'
              if (
                typeof layer.source === "object" &&
                layer.source.type === "geojson"
              ) {
                layerConfig.source.generateId = true;
              } else if (typeof layer.source === "string") {
                // Handle string source if needed
                layerConfig.source = layer.source;
              }

              if (layer.source_layer) {
                layerConfig["source-layer"] = layer.source_layer;
              }

              if (layer.slot) {
                layerConfig["slot"] = layer.slot;
              }

              if (layer.minzoom) {
                layerConfig["minzoom"] = layer.minzoom;
              }

              if (layer.maxzoom) {
                layerConfig["maxzoom"] = layer.maxzoom;
              }

              if (layer.filter) {
                layerConfig["filter"] = layer.filter;
              }

              if (layer.before_id) {
                map.addLayer(layerConfig, layer.before_id);
              } else {
                map.addLayer(layerConfig);
              }

              // Add popups or tooltips if provided
              if (layer.popup) {
                // Initialize popup tracking if it doesn't exist
                if (!window._mapboxPopups) {
                  window._mapboxPopups = {};
                }

                // Create click handler for this layer
                const clickHandler = function (e) {
                  onClickPopup(e, map, layer.popup, layer.id);
                };

                // Store these handler references so we can remove them later if needed
                if (!window._mapboxClickHandlers) {
                  window._mapboxClickHandlers = {};
                }
                window._mapboxClickHandlers[layer.id] = clickHandler;

                // Add the click handler
                map.on("click", layer.id, clickHandler);

                // Change cursor to pointer when hovering over the layer
                map.on("mouseenter", layer.id, function () {
                  map.getCanvas().style.cursor = "pointer";
                });

                // Change cursor back to default when leaving the layer
                map.on("mouseleave", layer.id, function () {
                  map.getCanvas().style.cursor = "";
                });
              }

              if (layer.tooltip) {
                const tooltip = new maplibregl.Popup({
                  closeButton: false,
                  closeOnClick: false,
                  maxWidth: "400px",
                });

                // Create a reference to the mousemove handler function.
                // We need to pass 'e', 'map', 'tooltip', 'layer.tooltip', and 'layer.id' to onMouseMoveTooltip.
                const mouseMoveHandler = function (e) {
                  onMouseMoveTooltip(e, map, tooltip, layer.tooltip, layer.id);
                };

                // Create a reference to the mouseleave handler function.
                // We need to pass 'map' and 'tooltip' to onMouseLeaveTooltip.
                const mouseLeaveHandler = function () {
                  onMouseLeaveTooltip(map, tooltip);
                };

                // Attach the named handler references, not anonymous functions.
                map.on("mousemove", layer.id, mouseMoveHandler);
                map.on("mouseleave", layer.id, mouseLeaveHandler);

                // Store these handler references so you can remove them later if needed
                if (!window._mapboxHandlers) {
                  window._mapboxHandlers = {};
                }
                window._mapboxHandlers[layer.id] = {
                  mousemove: mouseMoveHandler,
                  mouseleave: mouseLeaveHandler,
                };
              }

              // Add hover effect if provided
              if (layer.hover_options) {
                const jsHoverOptions = {};
                for (const [key, value] of Object.entries(
                  layer.hover_options,
                )) {
                  const jsKey = key.replace(/_/g, "-");
                  jsHoverOptions[jsKey] = value;
                }

                let hoveredFeatureId = null;

                map.on("mousemove", layer.id, function (e) {
                  if (e.features.length > 0) {
                    // Check if the feature has an id
                    const featureId = e.features[0].id;

                    // Only proceed if the feature has an id
                    if (featureId !== undefined && featureId !== null) {
                      if (hoveredFeatureId !== null) {
                        const featureState = {
                          source:
                            typeof layer.source === "string"
                              ? layer.source
                              : layer.id,
                          id: hoveredFeatureId,
                        };
                        if (layer.source_layer) {
                          featureState.sourceLayer = layer.source_layer;
                        }
                        map.setFeatureState(featureState, { hover: false });
                      }
                      hoveredFeatureId = featureId;
                      const featureState = {
                        source:
                          typeof layer.source === "string"
                            ? layer.source
                            : layer.id,
                        id: hoveredFeatureId,
                      };
                      if (layer.source_layer) {
                        featureState.sourceLayer = layer.source_layer;
                      }
                      map.setFeatureState(featureState, { hover: true });
                    }
                  }
                });

                map.on("mouseleave", layer.id, function () {
                  if (hoveredFeatureId !== null) {
                    const featureState = {
                      source:
                        typeof layer.source === "string"
                          ? layer.source
                          : layer.id,
                      id: hoveredFeatureId,
                    };
                    if (layer.source_layer) {
                      featureState.sourceLayer = layer.source_layer;
                    }
                    map.setFeatureState(featureState, { hover: false });
                  }
                  hoveredFeatureId = null;
                });

                Object.keys(jsHoverOptions).forEach(function (key) {
                  const originalPaint =
                    map.getPaintProperty(layer.id, key) || layer.paint[key];
                  map.setPaintProperty(layer.id, key, [
                    "case",
                    ["boolean", ["feature-state", "hover"], false],
                    jsHoverOptions[key],
                    originalPaint,
                  ]);
                });
              }
            } catch (e) {
              console.error("Failed to add layer: ", layer, e);
            }
          }
          if (x.h3j_sources) {
            x.h3j_sources.forEach(async function (source) {
              await map.addH3JSource(source.id, {
                data: source.url,
              });

              // A bit hacky?
              if (x.layers) {
                x.layers.forEach((layer) => add_my_layers(layer));
              }
            });
          }

          // Add layers if provided
          if (x.layers) {
            x.layers.forEach((layer) => add_my_layers(layer));
          }

          // Apply setFilter if provided
          if (x.setFilter) {
            x.setFilter.forEach(function (filter) {
              map.setFilter(filter.layer, filter.filter);
            });
          }

          // Apply moveLayer operations if provided
          if (x.moveLayer) {
            x.moveLayer.forEach(function (moveOp) {
              if (map.getLayer(moveOp.layer)) {
                if (moveOp.before) {
                  map.moveLayer(moveOp.layer, moveOp.before);
                } else {
                  map.moveLayer(moveOp.layer);
                }
              }
            });
          }

          // Set terrain if provided
          if (x.terrain) {
            map.setTerrain({
              source: x.terrain.source,
              exaggeration: x.terrain.exaggeration,
            });
          }

          // Set fog
          if (x.fog) {
            map.setFog(x.fog);
          }

          if (x.fitBounds) {
            map.fitBounds(x.fitBounds.bounds, x.fitBounds.options);
          }
          if (x.flyTo) {
            map.flyTo(x.flyTo);
          }
          if (x.easeTo) {
            map.easeTo(x.easeTo);
          }
          if (x.setCenter) {
            map.setCenter(x.setCenter);
          }
          if (x.setZoom) {
            map.setZoom(x.setZoom);
          }
          if (x.jumpTo) {
            map.jumpTo(x.jumpTo);
          }

          // Add controls only on initial style load to prevent duplication when set_style() is called
          if (!map._initialStyleLoaded) {
            // Add scale control if enabled
            if (x.scale_control) {
            const scaleControl = new maplibregl.ScaleControl({
              maxWidth: x.scale_control.maxWidth,
              unit: x.scale_control.unit,
            });
            map.addControl(scaleControl, x.scale_control.position);
            map.controls.push({ type: "scale", control: scaleControl });
          }

          // Add globe control if enabled
          if (x.globe_control) {
            const globeControl = new maplibregl.GlobeControl();
            map.addControl(globeControl, x.globe_control.position);
            map.controls.push({ type: "globe", control: globeControl });
          }

          // Add custom controls if any are defined
          if (x.custom_controls) {
            Object.keys(x.custom_controls).forEach(function (key) {
              const controlOptions = x.custom_controls[key];
              const customControlContainer = document.createElement("div");

              if (controlOptions.className) {
                customControlContainer.className = controlOptions.className;
              } else {
                customControlContainer.className =
                  "maplibregl-ctrl maplibregl-ctrl-group";
              }

              customControlContainer.innerHTML = controlOptions.html;

              const customControl = {
                onAdd: function () {
                  return customControlContainer;
                },
                onRemove: function () {
                  if (customControlContainer.parentNode) {
                    customControlContainer.parentNode.removeChild(
                      customControlContainer,
                    );
                  }
                },
              };

              map.addControl(
                customControl,
                controlOptions.position || "top-right",
              );
              map.controls.push({ type: key, control: customControl });
            });
          }

          // Add globe minimap if enabled
          if (x.globe_minimap && x.globe_minimap.enabled) {
            const globeMinimapOptions = {
              globeSize: x.globe_minimap.globe_size,
              landColor: x.globe_minimap.land_color,
              waterColor: x.globe_minimap.water_color,
              markerColor: x.globe_minimap.marker_color,
              markerSize: x.globe_minimap.marker_size,
            };
            const globeMinimap = new GlobeMinimap(globeMinimapOptions);
            map.addControl(globeMinimap, x.globe_minimap.position);
            map.controls.push({ type: "globe_minimap", control: globeMinimap });
          }

          if (x.setProjection) {
            x.setProjection.forEach(function (projectionConfig) {
              if (projectionConfig.projection) {
                const projection =
                  typeof projectionConfig.projection === "string"
                    ? { type: projectionConfig.projection }
                    : projectionConfig.projection;
                map.setProjection(projection);
              }
            });
          }

          // Add geocoder control if enabled
          if (x.geocoder_control) {
            const provider = x.geocoder_control.provider || "osm";
            let geocoder;

            if (provider === "maptiler") {
              // MapTiler geocoder
              const maptilerOptions = {
                apiKey: x.geocoder_control.api_key,
                maplibregl: maplibregl,
                ...x.geocoder_control,
              };

              // Create MapTiler geocoder
              geocoder = new maplibreglMaptilerGeocoder.GeocodingControl(
                maptilerOptions,
              );
            } else {
              // OSM/Nominatim geocoder (default)
              const geocoderApi = {
                forwardGeocode: async (config) => {
                  const features = [];
                  try {
                    const request = `https://nominatim.openstreetmap.org/search?q=${
                      config.query
                    }&format=geojson&polygon_geojson=1&addressdetails=1`;
                    const response = await fetch(request);
                    const geojson = await response.json();
                    for (const feature of geojson.features) {
                      const center = [
                        feature.bbox[0] +
                          (feature.bbox[2] - feature.bbox[0]) / 2,
                        feature.bbox[1] +
                          (feature.bbox[3] - feature.bbox[1]) / 2,
                      ];
                      const point = {
                        type: "Feature",
                        geometry: {
                          type: "Point",
                          coordinates: center,
                        },
                        place_name: feature.properties.display_name,
                        properties: feature.properties,
                        text: feature.properties.display_name,
                        place_type: ["place"],
                        center,
                      };
                      features.push(point);
                    }
                  } catch (e) {
                    console.error(`Failed to forwardGeocode with error: ${e}`);
                  }

                  return {
                    features,
                  };
                },
              };
              const geocoderOptions = {
                maplibregl: maplibregl,
                ...x.geocoder_control,
              };

              // Set default values if not provided
              if (!geocoderOptions.placeholder)
                geocoderOptions.placeholder = "Search";
              if (typeof geocoderOptions.collapsed === "undefined")
                geocoderOptions.collapsed = false;

              geocoder = new MaplibreGeocoder(geocoderApi, geocoderOptions);
            }

            map.addControl(
              geocoder,
              x.geocoder_control.position || "top-right",
            );
            map.controls.push({ type: "geocoder", control: geocoder });

            // Apply CSS fix for MapTiler geocoder to prevent cutoff
            if (provider === "maptiler") {
              setTimeout(() => {
                const controlContainer = document.querySelector(
                  ".maplibregl-ctrl-geocoder",
                );
                if (controlContainer) {
                  controlContainer.style.maxWidth = "300px";
                  controlContainer.style.width = "auto";
                }
              }, 100);
            }

            // Handle geocoder results in Shiny mode
            if (HTMLWidgets.shinyMode) {
              if (provider === "maptiler") {
                // MapTiler uses different event names
                geocoder.on("pick", function (e) {
                  Shiny.setInputValue(el.id + "_geocoder", {
                    result: e,
                    time: new Date(),
                  });
                });
              } else {
                // OSM geocoder
                geocoder.on("results", function (e) {
                  Shiny.setInputValue(el.id + "_geocoder", {
                    result: e,
                    time: new Date(),
                  });
                });
              }
            }
          }

          if (x.draw_control && x.draw_control.enabled) {
            MapboxDraw.constants.classes.CONTROL_BASE = "maplibregl-ctrl";
            MapboxDraw.constants.classes.CONTROL_PREFIX = "maplibregl-ctrl-";
            MapboxDraw.constants.classes.CONTROL_GROUP =
              "maplibregl-ctrl-group";

            let drawOptions = x.draw_control.options || {};

            // Generate styles if styling parameters provided
            if (x.draw_control.styling) {
              const generatedStyles = generateDrawStyles(
                x.draw_control.styling,
              );
              if (generatedStyles) {
                drawOptions.styles = generatedStyles;
              }
            }

            if (x.draw_control.freehand) {
              drawOptions = Object.assign({}, drawOptions, {
                modes: Object.assign({}, MapboxDraw.modes, {
                  draw_polygon: Object.assign(
                    {},
                    MapboxDraw.modes.draw_freehand,
                    {
                      // Store the simplify_freehand option on the map object
                      onSetup: function (opts) {
                        const state =
                          MapboxDraw.modes.draw_freehand.onSetup.call(
                            this,
                            opts,
                          );
                        this.map.simplify_freehand =
                          x.draw_control.simplify_freehand;
                        return state;
                      },
                    },
                  ),
                }),
                // defaultMode: 'draw_polygon' # Don't set the default yet
              });
            }

            // Add rectangle mode if enabled
            if (x.draw_control.rectangle) {
              if (!drawOptions.modes) {
                drawOptions.modes = Object.assign({}, MapboxDraw.modes);
              }
              drawOptions.modes.draw_rectangle =
                MapboxDraw.modes.draw_rectangle;
            }

            // Add radius mode if enabled
            if (x.draw_control.radius) {
              if (!drawOptions.modes) {
                drawOptions.modes = Object.assign({}, MapboxDraw.modes);
              }
              drawOptions.modes.draw_radius = MapboxDraw.modes.draw_radius;
            }

            // Fix MapLibre compatibility - ensure we always have custom styles
            if (!drawOptions.styles) {
              drawOptions.styles = generateDrawStyles({
                vertex_radius: 5,
                active_color: "#fbb03b",
                point_color: "#3bb2d0",
                line_color: "#3bb2d0",
                fill_color: "#3bb2d0",
                fill_opacity: 0.1,
                line_width: 2,
              });
            }

            draw = new MapboxDraw(drawOptions);
            map.addControl(draw, x.draw_control.position);
            map.controls.push({ type: "draw", control: draw });

            // Add lasso icon CSS for freehand mode
            if (x.draw_control.freehand) {
              if (!document.querySelector("#mapgl-freehand-lasso-styles")) {
                const style = document.createElement("style");
                style.id = "mapgl-freehand-lasso-styles";
                style.textContent = `
                  .mapbox-gl-draw_polygon {
                    background-image: url('data:image/svg+xml;utf8,%3Csvg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"%3E%3Cpath d="M 7 3 C 5 2.5, 3.5 3, 3 5 C 2.5 7, 3 8.5, 4 9.5 C 5 10.5, 5.5 11.5, 5 13 C 4.5 14.5, 5 15.5, 6.5 16 C 8 16.5, 9.5 16, 11 15 C 12.5 14, 13.5 13, 14.5 11.5 C 15.5 10, 16 8.5, 15.5 7 C 15 5.5, 14 4.5, 12.5 3.5 C 11 2.5, 9 2.5, 7 3 Z" fill="none" stroke="%23000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/%3E%3C/svg%3E') !important;
                  }
                `;
                document.head.appendChild(style);
              }

              // Update tooltip for freehand mode
              setTimeout(() => {
                const polygonButton = map
                  .getContainer()
                  .querySelector(".mapbox-gl-draw_polygon");
                if (polygonButton) {
                  polygonButton.title = "Freehand polygon tool (p)";
                }
              }, 100);
            }

            // Add rectangle icon CSS if rectangle mode is enabled
            if (x.draw_control.rectangle) {
              if (!document.querySelector("#mapgl-rectangle-styles")) {
                const style = document.createElement("style");
                style.id = "mapgl-rectangle-styles";
                style.textContent = `
                  .mapbox-gl-draw_rectangle {
                    background: transparent;
                    border: none;
                    cursor: pointer;
                    display: block;
                    height: 30px;
                    width: 30px;
                    padding: 0;
                    outline: none;
                    background-image: url('data:image/svg+xml;utf8,%3Csvg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"%3E%3Crect x="4" y="5" width="12" height="10" fill="none" stroke="%23000000" stroke-width="2"/%3E%3C/svg%3E') !important;
                    background-repeat: no-repeat !important;
                    background-position: center !important;
                  }
                  .mapbox-gl-draw_rectangle:hover {
                    background-color: rgba(0, 0, 0, 0.05);
                  }
                  .mapbox-gl-draw_rectangle.active {
                    background-color: rgba(0, 0, 0, 0.05);
                  }
                `;
                document.head.appendChild(style);
              }
            }

            // Add radius/circle icon CSS if radius mode is enabled
            if (x.draw_control.radius) {
              if (!document.querySelector("#mapgl-radius-styles")) {
                const style = document.createElement("style");
                style.id = "mapgl-radius-styles";
                style.textContent = `
                  .mapbox-gl-draw_radius {
                    background: transparent;
                    border: none;
                    cursor: pointer;
                    display: block;
                    height: 30px;
                    width: 30px;
                    padding: 0;
                    outline: none;
                    background-image: url('data:image/svg+xml;utf8,%3Csvg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"%3E%3Ccircle cx="10" cy="10" r="7" fill="none" stroke="%23000000" stroke-width="2"/%3E%3Ccircle cx="10" cy="10" r="1.5" fill="%23000000"/%3E%3C/svg%3E') !important;
                    background-repeat: no-repeat !important;
                    background-position: center !important;
                  }
                  .mapbox-gl-draw_radius:hover {
                    background-color: rgba(0, 0, 0, 0.05);
                  }
                  .mapbox-gl-draw_radius.active {
                    background-color: rgba(0, 0, 0, 0.05);
                  }
                `;
                document.head.appendChild(style);
              }
            }

            // Add event listeners
            map.on("draw.create", updateDrawnFeatures);
            map.on("draw.delete", updateDrawnFeatures);
            map.on("draw.update", updateDrawnFeatures);

            // Add measurement functionality if enabled
            if (x.draw_control.show_measurements) {
              initializeMeasurements(
                map,
                draw,
                x.draw_control.measurement_units,
              );
            }

            // Add initial features if provided
            if (x.draw_control.source) {
              addSourceFeaturesToDraw(draw, x.draw_control.source, map);
            }

            // Process any queued features
            if (x.draw_features_queue) {
              x.draw_features_queue.forEach(function (data) {
                if (data.clear_existing) {
                  draw.deleteAll();
                }
                addSourceFeaturesToDraw(draw, data.source, map);
              });
            }

            // Add custom mode buttons
            setTimeout(() => {
              const drawControlGroup = map
                .getContainer()
                .querySelector(".maplibregl-ctrl-group");

              if (drawControlGroup) {
                // Find the trash button to insert before it
                const trashBtn = drawControlGroup.querySelector(
                  ".mapbox-gl-draw_trash",
                );

                if (x.draw_control.rectangle) {
                  const rectangleBtn = document.createElement("button");
                  rectangleBtn.className = "mapbox-gl-draw_rectangle";
                  rectangleBtn.title = "Rectangle tool";
                  rectangleBtn.type = "button";
                  rectangleBtn.onclick = function () {
                    draw.changeMode("draw_rectangle");
                    // Update active state
                    drawControlGroup
                      .querySelectorAll("button")
                      .forEach((btn) => btn.classList.remove("active"));
                    rectangleBtn.classList.add("active");
                  };
                  // Insert before trash button if it exists, otherwise append
                  if (trashBtn) {
                    drawControlGroup.insertBefore(rectangleBtn, trashBtn);
                  } else {
                    drawControlGroup.appendChild(rectangleBtn);
                  }
                }

                if (x.draw_control.radius) {
                  const radiusBtn = document.createElement("button");
                  radiusBtn.className = "mapbox-gl-draw_radius";
                  radiusBtn.title = "Radius/Circle tool";
                  radiusBtn.type = "button";
                  radiusBtn.onclick = function () {
                    draw.changeMode("draw_radius");
                    // Update active state
                    drawControlGroup
                      .querySelectorAll("button")
                      .forEach((btn) => btn.classList.remove("active"));
                    radiusBtn.classList.add("active");
                  };
                  // Insert before trash button if it exists, otherwise append
                  if (trashBtn) {
                    drawControlGroup.insertBefore(radiusBtn, trashBtn);
                  } else {
                    drawControlGroup.appendChild(radiusBtn);
                  }
                }
              }
            }, 100);

            // Apply orientation styling
            if (x.draw_control.orientation === "horizontal") {
              const drawBar = map
                .getContainer()
                .querySelector(".maplibregl-ctrl-group");
              if (drawBar) {
                drawBar.style.display = "flex";
                drawBar.style.flexDirection = "row";
              }
            }

            // Add download button if requested
            if (x.draw_control.download_button) {
              // Add CSS for download button if not already added
              if (!document.querySelector("#mapgl-draw-download-styles")) {
                const style = document.createElement("style");
                style.id = "mapgl-draw-download-styles";
                style.textContent = `
                  .mapbox-gl-draw_download {
                    background: transparent;
                    border: none;
                    cursor: pointer;
                    display: block;
                    height: 30px;
                    width: 30px;
                    padding: 0;
                    outline: none;
                  }
                  .mapbox-gl-draw_download:hover {
                    background-color: rgba(0, 0, 0, 0.05);
                  }
                  .mapbox-gl-draw_download svg {
                    width: 20px;
                    height: 20px;
                    margin: 5px;
                    fill: #333;
                  }
                `;
                document.head.appendChild(style);
              }

              // Small delay to ensure Draw control is fully rendered
              setTimeout(() => {
                // Find the Draw control button group
                const drawButtons = map
                  .getContainer()
                  .querySelector(
                    ".maplibregl-ctrl-group:has(.mapbox-gl-draw_polygon)",
                  );

                if (drawButtons) {
                  // Create download button
                  const downloadBtn = document.createElement("button");
                  downloadBtn.className = "mapbox-gl-draw_download";
                  downloadBtn.title = "Download drawn features as GeoJSON";

                  // Add SVG download icon
                  downloadBtn.innerHTML = `
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                      <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                    </svg>
                  `;

                  downloadBtn.addEventListener("click", () => {
                    // Get all drawn features
                    const data = draw.getAll();

                    if (data.features.length === 0) {
                      alert(
                        "No features to download. Please draw something first!",
                      );
                      return;
                    }

                    // Convert to string with nice formatting
                    const dataStr = JSON.stringify(data, null, 2);

                    // Create blob and download
                    const blob = new Blob([dataStr], {
                      type: "application/json",
                    });
                    const url = URL.createObjectURL(blob);

                    const a = document.createElement("a");
                    a.href = url;
                    a.download = `${x.draw_control.download_filename}.geojson`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                  });

                  // Append to the Draw control button group
                  drawButtons.appendChild(downloadBtn);
                }
              }, 100);
            }
          }

          function updateDrawnFeatures() {
            if (draw) {
              var drawnFeatures = draw.getAll();
              if (HTMLWidgets.shinyMode) {
                Shiny.setInputValue(
                  el.id + "_drawn_features",
                  JSON.stringify(drawnFeatures),
                );
              }
              // Store drawn features in the widget's data
              if (el.querySelector) {
                var widget = HTMLWidgets.find("#" + el.id);
                if (widget) {
                  widget.drawFeatures = drawnFeatures;
                }
              }
            }
          }

          if (!x.add) {
            const existingLegends = el.querySelectorAll(".mapboxgl-legend");
            existingLegends.forEach((legend) => legend.remove());
          }

          if (x.legend_html && x.legend_css) {
            const legendCss = document.createElement("style");
            legendCss.innerHTML = x.legend_css;
            document.head.appendChild(legendCss);

            const legend = document.createElement("div");
            legend.innerHTML = x.legend_html;
            legend.classList.add("mapboxgl-legend");
            el.appendChild(legend);
          }

          // Initialize legend interactivity if configured
          if (x.legend_interactivity && x.legend_interactivity.length > 0) {
            x.legend_interactivity.forEach(function(config) {
              if (typeof initializeLegendInteractivity === "function") {
                initializeLegendInteractivity(map, el.id, config);
              }
            });
          }

          // Initialize draggable legends
          if (typeof initializeDraggableLegends === "function") {
            initializeDraggableLegends(el);
          }

          // Add fullscreen control if enabled
          if (x.fullscreen_control && x.fullscreen_control.enabled) {
            const position = x.fullscreen_control.position || "top-right";
            const fullscreen = new maplibregl.FullscreenControl();
            map.addControl(fullscreen, position);
            map.controls.push({ type: "fullscreen", control: fullscreen });
          }

          // Add geolocate control if enabled
          if (x.geolocate_control) {
            const geolocate = new maplibregl.GeolocateControl({
              positionOptions: x.geolocate_control.positionOptions,
              trackUserLocation: x.geolocate_control.trackUserLocation,
              showAccuracyCircle: x.geolocate_control.showAccuracyCircle,
              showUserLocation: x.geolocate_control.showUserLocation,
              showUserHeading: x.geolocate_control.showUserHeading,
              fitBoundsOptions: x.geolocate_control.fitBoundsOptions,
            });
            map.addControl(geolocate, x.geolocate_control.position);
            map.controls.push({ type: "geolocate", control: geolocate });

            if (HTMLWidgets.shinyMode) {
              geolocate.on("geolocate", function (event) {
                Shiny.setInputValue(el.id + "_geolocate", {
                  coords: event.coords,
                  time: new Date(),
                });
              });

              geolocate.on("trackuserlocationstart", function () {
                Shiny.setInputValue(el.id + "_geolocate_tracking", {
                  status: "start",
                  time: new Date(),
                });
              });

              geolocate.on("trackuserlocationend", function () {
                Shiny.setInputValue(el.id + "_geolocate_tracking", {
                  status: "end",
                  time: new Date(),
                });
              });

              geolocate.on("error", function (error) {
                if (error.error.code === 1) {
                  Shiny.setInputValue(el.id + "_geolocate_error", {
                    message: "Location permission denied",
                    time: new Date(),
                  });
                }
              });
            }
          }

          // Add navigation control if enabled
          if (x.navigation_control) {
            const nav = new maplibregl.NavigationControl({
              showCompass: x.navigation_control.show_compass,
              showZoom: x.navigation_control.show_zoom,
              visualizePitch: x.navigation_control.visualize_pitch,
            });
            map.addControl(nav, x.navigation_control.position);
            map.controls.push({ type: "navigation", control: nav });

            if (x.navigation_control.orientation === "horizontal") {
              const navBar = map
                .getContainer()
                .querySelector(
                  ".maplibregl-ctrl-group:not(.mapbox-gl-draw_ctrl-draw-btn)",
                );
              if (navBar) {
                navBar.style.display = "flex";
                navBar.style.flexDirection = "row";
              }
            }
          }

          // Add reset control if enabled
          if (x.reset_control) {
            const resetControl = document.createElement("button");
            resetControl.className =
              "maplibregl-ctrl-icon maplibregl-ctrl-reset";
            resetControl.type = "button";
            resetControl.setAttribute("aria-label", "Reset");
            resetControl.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg>';
            resetControl.style.cssText = "display:flex;justify-content:center;align-items:center;cursor:pointer;";

            const resetContainer = document.createElement("div");
            resetContainer.className = "maplibregl-ctrl maplibregl-ctrl-group";
            resetContainer.appendChild(resetControl);

            // Initialize with empty object, will be populated after map loads
            let initialView = {};

            // Capture the initial view after the map has loaded and all view operations are complete
            map.once("load", function () {
              initialView = {
                center: map.getCenter(),
                zoom: map.getZoom(),
                pitch: map.getPitch(),
                bearing: map.getBearing(),
                animate: x.reset_control.animate,
              };

              if (x.reset_control.duration) {
                initialView.duration = x.reset_control.duration;
              }
            });

            resetControl.onclick = function () {
              // Only reset if we have captured the initial view
              if (initialView.center) {
                map.easeTo(initialView);
              }
            };

            const resetControlObj = {
              onAdd: function () {
                return resetContainer;
              },
              onRemove: function () {
                resetContainer.parentNode.removeChild(resetContainer);
              },
            };

            map.addControl(resetControlObj, x.reset_control.position);

            map.controls.push({ type: "reset", control: resetControlObj });
          }

          // Add screenshot control if enabled
          if (x.screenshot_control) {
            const screenshotControlObj = createScreenshotControl(map, x.screenshot_control, true);
            map.addControl(screenshotControlObj, x.screenshot_control.position || "top-right");
            map.controls.push({ type: "screenshot", control: screenshotControlObj });
          }

          if (x.images && Array.isArray(x.images)) {
            const mapId = el.id;
            x.images.forEach(async function (imageInfo) {
              try {
                // Register the image for potential re-adding after style changes
                registerUserImage(mapId, imageInfo.id, imageInfo.url, imageInfo.options);
                const image = await map.loadImage(imageInfo.url);
                if (!map.hasImage(imageInfo.id)) {
                  map.addImage(imageInfo.id, image.data, imageInfo.options);
                }
              } catch (error) {
                console.error("Error loading image:", error);
              }
            });
          } else if (x.images) {
            console.error("x.images is not an array:", x.images);
          }

          // Add the layers control if provided
          if (x.layers_control) {
            const layersControl = document.createElement("div");
            layersControl.id = x.layers_control.control_id;
            layersControl.className = x.layers_control.collapsible
              ? "layers-control collapsible"
              : "layers-control";
            layersControl.style.position = "absolute";

            // Set the position correctly - fix position bug by using correct CSS positioning
            const position = x.layers_control.position || "top-left";
            if (position === "top-left") {
              layersControl.style.top =
                (x.layers_control.margin_top || 10) + "px";
              layersControl.style.left =
                (x.layers_control.margin_left || 10) + "px";
            } else if (position === "top-right") {
              layersControl.style.top =
                (x.layers_control.margin_top || 10) + "px";
              layersControl.style.right =
                (x.layers_control.margin_right || 10) + "px";
            } else if (position === "bottom-left") {
              layersControl.style.bottom =
                (x.layers_control.margin_bottom || 10) + "px";
              layersControl.style.left =
                (x.layers_control.margin_left || 10) + "px";
            } else if (position === "bottom-right") {
              layersControl.style.bottom =
                (x.layers_control.margin_bottom || 40) + "px";
              layersControl.style.right =
                (x.layers_control.margin_right || 10) + "px";
            }

            // Apply custom colors if provided
            if (x.layers_control.custom_colors) {
              const colors = x.layers_control.custom_colors;

              // Create a style element for custom colors
              const styleEl = document.createElement("style");
              let css = "";

              if (colors.background) {
                css += `#${x.layers_control.control_id} { background-color: ${colors.background}; }\n`;
              }

              if (colors.text) {
                css += `#${x.layers_control.control_id} a { color: ${colors.text}; }\n`;
              }

              if (colors.active) {
                css += `#${x.layers_control.control_id} a.active { background-color: ${colors.active}; }\n`;
                css += `#${x.layers_control.control_id} .toggle-button { background-color: ${colors.active}; }\n`;
              }

              if (colors.activeText) {
                css += `#${x.layers_control.control_id} a.active { color: ${colors.activeText}; }\n`;
                css += `#${x.layers_control.control_id} .toggle-button { color: ${colors.activeText}; }\n`;
              }

              if (colors.hover) {
                css += `#${x.layers_control.control_id} a:hover { background-color: ${colors.hover}; }\n`;
                css += `#${x.layers_control.control_id} .toggle-button:hover { background-color: ${colors.hover}; }\n`;
              }

              styleEl.textContent = css;
              document.head.appendChild(styleEl);
            }

            el.appendChild(layersControl);

            const layersList = document.createElement("div");
            layersList.className = "layers-list";
            layersControl.appendChild(layersList);

            // Fetch layers to be included in the control
            let layers =
              x.layers_control.layers ||
              map.getStyle().layers.map((layer) => layer.id);
            let layersConfig = x.layers_control.layers_config;

            // If we have a layers_config, use that; otherwise fall back to original behavior
            if (layersConfig && Array.isArray(layersConfig)) {
              layersConfig.forEach((config, index) => {
                const link = document.createElement("a");
                // Ensure config.ids is always an array
                const layerIds = Array.isArray(config.ids)
                  ? config.ids
                  : [config.ids];
                link.id = layerIds.join("-");
                link.href = "#";
                link.textContent = config.label;
                link.setAttribute("data-layer-ids", JSON.stringify(layerIds));
                link.setAttribute("data-layer-type", config.type);

                // Check if the first layer's visibility is set to "none" initially
                const firstLayerId = layerIds[0];
                const initialVisibility = map.getLayoutProperty(
                  firstLayerId,
                  "visibility",
                );
                link.className = initialVisibility === "none" ? "" : "active";

                // Also hide any associated legends if the layer is initially hidden
                if (initialVisibility === "none") {
                  layerIds.forEach((layerId) => {
                    const associatedLegends = document.querySelectorAll(
                      `.mapboxgl-legend[data-layer-id="${layerId}"]`,
                    );
                    associatedLegends.forEach((legend) => {
                      legend.style.display = "none";
                    });
                  });
                }

                // Show or hide layer(s) when the toggle is clicked
                link.onclick = function (e) {
                  e.preventDefault();
                  e.stopPropagation();

                  const layerIds = JSON.parse(
                    this.getAttribute("data-layer-ids"),
                  );
                  const firstLayerId = layerIds[0];
                  const visibility = map.getLayoutProperty(
                    firstLayerId,
                    "visibility",
                  );

                  // Toggle visibility for all layer IDs in the group
                  if (visibility === "visible") {
                    layerIds.forEach((layerId) => {
                      map.setLayoutProperty(layerId, "visibility", "none");
                      // Hide associated legends
                      const associatedLegends = document.querySelectorAll(
                        `.mapboxgl-legend[data-layer-id="${layerId}"]`,
                      );
                      associatedLegends.forEach((legend) => {
                        legend.style.display = "none";
                      });
                    });
                    this.className = "";
                  } else {
                    layerIds.forEach((layerId) => {
                      map.setLayoutProperty(layerId, "visibility", "visible");
                      // Show associated legends
                      const associatedLegends = document.querySelectorAll(
                        `.mapboxgl-legend[data-layer-id="${layerId}"]`,
                      );
                      associatedLegends.forEach((legend) => {
                        legend.style.display = "";
                      });
                    });
                    this.className = "active";
                  }
                };

                layersList.appendChild(link);
              });
            } else {
              // Fallback to original behavior for simple layer arrays
              // Ensure layers is always an array
              if (!Array.isArray(layers)) {
                layers = [layers];
              }

              layers.forEach((layerId, index) => {
                const link = document.createElement("a");
                link.id = layerId;
                link.href = "#";
                link.textContent = layerId;

                // Check if the layer visibility is set to "none" initially
                const initialVisibility = map.getLayoutProperty(
                  layerId,
                  "visibility",
                );
                link.className = initialVisibility === "none" ? "" : "active";

                // Also hide any associated legends if the layer is initially hidden
                if (initialVisibility === "none") {
                  const associatedLegends = document.querySelectorAll(
                    `.mapboxgl-legend[data-layer-id="${layerId}"]`,
                  );
                  associatedLegends.forEach((legend) => {
                    legend.style.display = "none";
                  });
                }

                // Show or hide layer when the toggle is clicked
                link.onclick = function (e) {
                  const clickedLayer = this.textContent;
                  e.preventDefault();
                  e.stopPropagation();

                  const visibility = map.getLayoutProperty(
                    clickedLayer,
                    "visibility",
                  );

                  // Toggle layer visibility by changing the layout object's visibility property
                  if (visibility === "visible") {
                    map.setLayoutProperty(clickedLayer, "visibility", "none");
                    this.className = "";

                    // Hide associated legends
                    const associatedLegends = document.querySelectorAll(
                      `.mapboxgl-legend[data-layer-id="${clickedLayer}"]`,
                    );
                    associatedLegends.forEach((legend) => {
                      legend.style.display = "none";
                    });
                  } else {
                    this.className = "active";
                    map.setLayoutProperty(
                      clickedLayer,
                      "visibility",
                      "visible",
                    );

                    // Show associated legends
                    const associatedLegends = document.querySelectorAll(
                      `.mapboxgl-legend[data-layer-id="${clickedLayer}"]`,
                    );
                    associatedLegends.forEach((legend) => {
                      legend.style.display = "";
                    });
                  }
                };

                layersList.appendChild(link);
              });
            }

            // Handle collapsible behavior
            if (x.layers_control.collapsible) {
              const toggleButton = document.createElement("div");
              toggleButton.className = "toggle-button";

              // Use stacked layers icon instead of text if requested
              if (x.layers_control.use_icon) {
                // Add icon-only class to the control for compact styling
                layersControl.classList.add("icon-only");

                // More GIS-like layers stack icon
                toggleButton.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polygon points="12 2 2 7 12 12 22 7 12 2"></polygon>
                                    <polyline points="2 17 12 22 22 17"></polyline>
                                    <polyline points="2 12 12 17 22 12"></polyline>
                                </svg>`;
                toggleButton.style.display = "flex";
                toggleButton.style.alignItems = "center";
                toggleButton.style.justifyContent = "center";
              } else {
                toggleButton.textContent = "Layers";
              }

              toggleButton.onclick = function () {
                layersControl.classList.toggle("open");
              };
              layersControl.insertBefore(toggleButton, layersList);
            }
          }

            // Mark initial style as loaded to prevent control duplication on subsequent set_style() calls
            map._initialStyleLoaded = true;
          }

          // If clusters are present, add event handling
          map.getStyle().layers.forEach((layer) => {
            if (layer.id.includes("-clusters")) {
              map.on("click", layer.id, async (e) => {
                const features = map.queryRenderedFeatures(e.point, {
                  layers: [layer.id],
                });
                const clusterId = features[0].properties.cluster_id;
                const zoom = await map
                  .getSource(layer.source)
                  .getClusterExpansionZoom(clusterId);
                map.easeTo({
                  center: features[0].geometry.coordinates,
                  zoom,
                });
              });

              map.on("mouseenter", layer.id, () => {
                map.getCanvas().style.cursor = "pointer";
              });
              map.on("mouseleave", layer.id, () => {
                map.getCanvas().style.cursor = "";
              });
            }
          });

          // Add click event listener in shinyMode
          if (HTMLWidgets.shinyMode) {
            map.on("click", function (e) {
              // Check if draw control is active and in a drawing mode
              let isDrawing = false;
              if (typeof draw !== "undefined" && draw) {
                const mode = draw.getMode();
                isDrawing =
                  mode === "draw_point" ||
                  mode === "draw_line_string" ||
                  mode === "draw_polygon";
              }

              // Only process feature clicks if not actively drawing
              if (!isDrawing) {
                const features = map.queryRenderedFeatures(e.point);

                if (features.length > 0) {
                  const feature = features[0];
                  Shiny.onInputChange(el.id + "_feature_click", {
                    id: feature.id,
                    properties: feature.properties,
                    layer: feature.layer.id,
                    lng: e.lngLat.lng,
                    lat: e.lngLat.lat,
                    time: new Date(),
                  });
                } else {
                  Shiny.onInputChange(el.id + "_feature_click", null);
                }
              }

              // Event listener for the map (always fire this)
              Shiny.onInputChange(el.id + "_click", {
                lng: e.lngLat.lng,
                lat: e.lngLat.lat,
                time: new Date(),
              });
            });

            // add hover listener for shinyMode if enabled
            if (x.hover_events && x.hover_events.enabled) {
              map.on("mousemove", function (e) {
                // Feature hover events
                if (x.hover_events.features) {
                  const options = x.hover_events.layer_id
                    ? {
                        layers: Array.isArray(x.hover_events.layer_id)
                          ? x.hover_events.layer_id
                          : x.hover_events.layer_id
                              .split(",")
                              .map((id) => id.trim()),
                      }
                    : undefined;
                  const features = map.queryRenderedFeatures(e.point, options);

                  if (features.length > 0) {
                    const feature = features[0];
                    Shiny.onInputChange(el.id + "_feature_hover", {
                      id: feature.id,
                      properties: feature.properties,
                      layer: feature.layer.id,
                      lng: e.lngLat.lng,
                      lat: e.lngLat.lat,
                      time: new Date(),
                    });
                  } else {
                    Shiny.onInputChange(el.id + "_feature_hover", null);
                  }
                }

                // Coordinate hover events
                if (x.hover_events.coordinates) {
                  Shiny.onInputChange(el.id + "_hover", {
                    lng: e.lngLat.lng,
                    lat: e.lngLat.lat,
                    time: new Date(),
                  });
                }
              });
            }
          }

          // Process turf operations for static maps
          if (x.turf_operations) {
            processTurfOperationsOnLoad(map, x.turf_operations, el.id);
          }

          el.map = map;
        });
        el.map = map;
      },

      getMap: function () {
        return map; // Return the map instance
      },

      getDraw: function () {
        return draw; // Return the draw instance
      },

      getDrawnFeatures: function () {
        return (
          this.drawFeatures || {
            type: "FeatureCollection",
            features: [],
          }
        );
      },

      resize: function (width, height) {
        if (map) {
          map.resize();
        }
      },
    };
  },
});

if (HTMLWidgets.shinyMode) {
  Shiny.addCustomMessageHandler("maplibre-proxy", function (data) {
    var widget = HTMLWidgets.find("#" + data.id);
    if (!widget) return;
    var map = widget.getMap();
    if (map) {
      var message = data.message;

      // Initialize layer state tracking if not already present
      if (!window._mapglLayerState) {
        window._mapglLayerState = {};
      }
      const mapId = map.getContainer().id;
      if (!window._mapglLayerState[mapId]) {
        window._mapglLayerState[mapId] = {
          filters: {}, // layerId -> filter expression
          paintProperties: {}, // layerId -> {propertyName -> value}
          layoutProperties: {}, // layerId -> {propertyName -> value}
          tooltips: {}, // layerId -> tooltip property
          popups: {}, // layerId -> popup property
          legends: {}, // legendId -> {html: string, css: string}
        };
      }
      const layerState = window._mapglLayerState[mapId];

      // Helper function to update drawn features
      function updateDrawnFeatures() {
        var drawControl = widget.drawControl || widget.getDraw();
        if (drawControl) {
          var drawnFeatures = drawControl.getAll();
          if (HTMLWidgets.shinyMode) {
            Shiny.setInputValue(
              data.id + "_drawn_features",
              JSON.stringify(drawnFeatures),
            );
          }
          // Store drawn features in the widget's data
          if (widget) {
            widget.drawFeatures = drawnFeatures;
          }
        }
      }
      if (message.type === "set_filter") {
        map.setFilter(message.layer, message.filter);
        // Track filter state for layer restoration
        layerState.filters[message.layer] = message.filter;
      } else if (message.type === "add_source") {
        if (message.source.type === "vector") {
          const sourceConfig = {
            type: "vector",
          };
          // Add url or tiles
          if (message.source.url) {
            sourceConfig.url = message.source.url;
          }
          if (message.source.tiles) {
            sourceConfig.tiles = message.source.tiles;
          }
          // Add promoteId if provided
          if (message.source.promoteId) {
            sourceConfig.promoteId = message.source.promoteId;
          }
          // Add any other properties from the source object
          Object.keys(message.source).forEach(function (key) {
            if (
              key !== "id" &&
              key !== "type" &&
              key !== "url" &&
              key !== "tiles" &&
              key !== "promoteId"
            ) {
              sourceConfig[key] = message.source[key];
            }
          });
          map.addSource(message.source.id, sourceConfig);
        } else if (message.source.type === "geojson") {
          const sourceConfig = {
            type: "geojson",
            data: message.source.data,
          };
          // Add any other properties
          Object.keys(message.source).forEach(function (key) {
            if (key !== "id" && key !== "type" && key !== "data") {
              sourceConfig[key] = message.source[key];
            }
          });
          map.addSource(message.source.id, sourceConfig);
          // Store GeoJSON data for later retrieval (e.g., for draw control)
          storeSourceData(mapId, message.source.id, message.source.data);
        } else {
          // For other source types, pass through remaining properties
          const sourceConfig = { type: message.source.type };
          Object.keys(message.source).forEach(function (key) {
            if (key !== "id") {
              sourceConfig[key] = message.source[key];
            }
          });
          map.addSource(message.source.id, sourceConfig);
        }
      } else if (message.type === "add_layer") {
        try {
          // Ensure paint and layout are objects, not null
          if (message.layer.paint === null) {
            message.layer.paint = {};
          }
          if (message.layer.layout === null) {
            message.layer.layout = {};
          }
          if (message.layer.before_id) {
            map.addLayer(message.layer, message.layer.before_id);
          } else {
            map.addLayer(message.layer);
          }

          // Add popups or tooltips if provided
          if (message.layer.popup) {
            // Initialize popup tracking if it doesn't exist
            if (!window._mapboxPopups) {
              window._mapboxPopups = {};
            }

            // Create click handler for this layer
            const clickHandler = function (e) {
              onClickPopup(e, map, message.layer.popup, message.layer.id);
            };

            // Store these handler references so we can remove them later if needed
            if (!window._mapboxClickHandlers) {
              window._mapboxClickHandlers = {};
            }
            window._mapboxClickHandlers[message.layer.id] = clickHandler;

            // Add the click handler
            map.on("click", message.layer.id, clickHandler);

            // Change cursor to pointer when hovering over the layer
            map.on("mouseenter", message.layer.id, function () {
              map.getCanvas().style.cursor = "pointer";
            });

            // Change cursor back to default when leaving the layer
            map.on("mouseleave", message.layer.id, function () {
              map.getCanvas().style.cursor = "";
            });
          }

          if (message.layer.tooltip) {
            const tooltip = new maplibregl.Popup({
              closeButton: false,
              closeOnClick: false,
              maxWidth: "400px",
            });

            // Define named handler functions:
            const mouseMoveHandler = function (e) {
              onMouseMoveTooltip(
                e,
                map,
                tooltip,
                message.layer.tooltip,
                message.layer.id,
              );
            };

            const mouseLeaveHandler = function () {
              onMouseLeaveTooltip(map, tooltip);
            };

            // Attach handlers by reference:
            map.on("mousemove", message.layer.id, mouseMoveHandler);
            map.on("mouseleave", message.layer.id, mouseLeaveHandler);

            // Store these handler references for later removal:
            if (!window._mapboxHandlers) {
              window._mapboxHandlers = {};
            }
            window._mapboxHandlers[message.layer.id] = {
              mousemove: mouseMoveHandler,
              mouseleave: mouseLeaveHandler,
            };
          }

          // Add hover effect if provided
          if (message.layer.hover_options) {
            const jsHoverOptions = {};
            for (const [key, value] of Object.entries(
              message.layer.hover_options,
            )) {
              const jsKey = key.replace(/_/g, "-");
              jsHoverOptions[jsKey] = value;
            }

            let hoveredFeatureId = null;

            map.on("mousemove", message.layer.id, function (e) {
              if (e.features.length > 0) {
                // Check if the feature has an id
                const featureId = e.features[0].id;

                // Only proceed if the feature has an id
                if (featureId !== undefined && featureId !== null) {
                  if (hoveredFeatureId !== null) {
                    const featureState = {
                      source:
                        typeof message.layer.source === "string"
                          ? message.layer.source
                          : message.layer.id,
                      id: hoveredFeatureId,
                    };
                    if (message.layer.source_layer) {
                      featureState.sourceLayer = message.layer.source_layer;
                    }
                    map.setFeatureState(featureState, { hover: false });
                  }
                  hoveredFeatureId = featureId;
                  const featureState = {
                    source:
                      typeof message.layer.source === "string"
                        ? message.layer.source
                        : message.layer.id,
                    id: hoveredFeatureId,
                  };
                  if (message.layer.source_layer) {
                    featureState.sourceLayer = message.layer.source_layer;
                  }
                  map.setFeatureState(featureState, { hover: true });
                }
              }
            });

            map.on("mouseleave", message.layer.id, function () {
              if (hoveredFeatureId !== null) {
                const featureState = {
                  source:
                    typeof message.layer.source === "string"
                      ? message.layer.source
                      : message.layer.id,
                  id: hoveredFeatureId,
                };
                if (message.layer.source_layer) {
                  featureState.sourceLayer = message.layer.source_layer;
                }
                map.setFeatureState(featureState, { hover: false });
              }
              hoveredFeatureId = null;
            });

            Object.keys(jsHoverOptions).forEach(function (key) {
              const originalPaint =
                map.getPaintProperty(message.layer.id, key) ||
                message.layer.paint[key];
              map.setPaintProperty(message.layer.id, key, [
                "case",
                ["boolean", ["feature-state", "hover"], false],
                jsHoverOptions[key],
                originalPaint,
              ]);
            });
          }
        } catch (e) {
          console.error("Failed to add layer via proxy: ", message.layer, e);
        }
      } else if (message.type === "remove_layer") {
        // If there's an active tooltip, remove it first
        if (window._activeTooltip) {
          window._activeTooltip.remove();
          delete window._activeTooltip;
        }

        // If there's an active popup for this layer, remove it
        // Check both message.layer and message.layer.id as keys due to different message formats
        if (window._mapboxPopups) {
          // First check if we have a popup stored with message.layer key
          if (window._mapboxPopups[message.layer]) {
            window._mapboxPopups[message.layer].remove();
            delete window._mapboxPopups[message.layer];
          }

          // Also check if we have a popup stored with message.layer.id key, which happens when added via add_layer
          if (
            message.layer &&
            message.layer.id &&
            window._mapboxPopups[message.layer.id]
          ) {
            window._mapboxPopups[message.layer.id].remove();
            delete window._mapboxPopups[message.layer.id];
          }
        }

        if (map.getLayer(message.layer)) {
          // Remove tooltip handlers
          if (window._mapboxHandlers && window._mapboxHandlers[message.layer]) {
            const handlers = window._mapboxHandlers[message.layer];
            if (handlers.mousemove) {
              map.off("mousemove", message.layer, handlers.mousemove);
            }
            if (handlers.mouseleave) {
              map.off("mouseleave", message.layer, handlers.mouseleave);
            }
            // Clean up the reference
            delete window._mapboxHandlers[message.layer];
          }

          // Remove click handlers for popups
          if (window._mapboxClickHandlers) {
            // First check for handlers stored with message.layer key
            if (window._mapboxClickHandlers[message.layer]) {
              map.off(
                "click",
                message.layer,
                window._mapboxClickHandlers[message.layer],
              );
              delete window._mapboxClickHandlers[message.layer];
            }

            // Also check for handlers stored with message.layer.id key from add_layer
            if (
              message.layer &&
              message.layer.id &&
              window._mapboxClickHandlers[message.layer.id]
            ) {
              map.off(
                "click",
                message.layer,
                window._mapboxClickHandlers[message.layer.id],
              );
              delete window._mapboxClickHandlers[message.layer.id];
            }
          }

          // Remove the layer
          map.removeLayer(message.layer);
        }
        if (map.getSource(message.layer)) {
          map.removeSource(message.layer);
        }

        // Clean up tracked layer state
        const mapId = map.getContainer().id;
        if (window._mapglLayerState && window._mapglLayerState[mapId]) {
          const layerState = window._mapglLayerState[mapId];
          delete layerState.filters[message.layer];
          delete layerState.paintProperties[message.layer];
          delete layerState.layoutProperties[message.layer];
          delete layerState.tooltips[message.layer];
          delete layerState.popups[message.layer];
          // Note: legends are not tied to specific layers, so we don't clear them here
        }
      } else if (message.type === "fit_bounds") {
        map.fitBounds(message.bounds, message.options);
      } else if (message.type === "fly_to") {
        map.flyTo(message.options);
      } else if (message.type === "ease_to") {
        map.easeTo(message.options);
      } else if (message.type === "set_center") {
        map.setCenter(message.center);
      } else if (message.type === "set_zoom") {
        map.setZoom(message.zoom);
      } else if (message.type === "jump_to") {
        map.jumpTo(message.options);
      } else if (message.type === "set_layout_property") {
        map.setLayoutProperty(message.layer, message.name, message.value);
        // Track layout property state for layer restoration
        if (!layerState.layoutProperties[message.layer]) {
          layerState.layoutProperties[message.layer] = {};
        }
        layerState.layoutProperties[message.layer][message.name] =
          message.value;
      } else if (message.type === "set_paint_property") {
        const layerId = message.layer;
        const propertyName = message.name;
        const newValue = message.value;

        // Check if the layer has hover options
        const layerStyle = map
          .getStyle()
          .layers.find((layer) => layer.id === layerId);
        const currentPaintProperty = map.getPaintProperty(
          layerId,
          propertyName,
        );

        if (
          currentPaintProperty &&
          Array.isArray(currentPaintProperty) &&
          currentPaintProperty[0] === "case"
        ) {
          // This property has hover options, so we need to preserve them
          const hoverValue = currentPaintProperty[2];
          const newPaintProperty = [
            "case",
            ["boolean", ["feature-state", "hover"], false],
            hoverValue,
            newValue,
          ];
          map.setPaintProperty(layerId, propertyName, newPaintProperty);
        } else {
          // No hover options, just set the new value directly
          map.setPaintProperty(layerId, propertyName, newValue);
        }
        // Track paint property state for layer restoration
        if (!layerState.paintProperties[layerId]) {
          layerState.paintProperties[layerId] = {};
        }
        layerState.paintProperties[layerId][propertyName] = newValue;
      } else if (message.type === "query_rendered_features") {
        // Query rendered features
        let queryOptions = {};
        if (message.layers) {
          // Ensure layers is always an array
          queryOptions.layers = Array.isArray(message.layers)
            ? message.layers
            : [message.layers];
        }
        if (message.filter) queryOptions.filter = message.filter;

        let features;
        if (message.geometry) {
          features = map.queryRenderedFeatures(message.geometry, queryOptions);
        } else {
          // No geometry specified - query entire viewport
          features = map.queryRenderedFeatures(queryOptions);
        }

        // Deduplicate features by id or by properties if no id
        const uniqueFeatures = new Map();
        features.forEach(function (feature) {
          let key;
          if (feature.id !== undefined && feature.id !== null) {
            key = feature.id;
          } else {
            // Create a key from properties if no id available
            key = JSON.stringify(feature.properties);
          }

          if (!uniqueFeatures.has(key)) {
            uniqueFeatures.set(key, feature);
          }
        });

        // Convert to GeoJSON FeatureCollection
        const deduplicatedFeatures = Array.from(uniqueFeatures.values());
        const featureCollection = {
          type: "FeatureCollection",
          features: deduplicatedFeatures,
        };

        Shiny.setInputValue(
          data.id + "_queried_features",
          JSON.stringify(featureCollection),
        );
      } else if (message.type === "add_legend") {
        // Extract legend ID from HTML to track it
        const legendIdMatch = message.html.match(/id="([^"]+)"/);
        const legendId = legendIdMatch ? legendIdMatch[1] : null;

        if (!message.add) {
          const existingLegends = document.querySelectorAll(
            `#${data.id} .mapboxgl-legend`,
          );
          existingLegends.forEach((legend) => legend.remove());

          // Clean up any existing legend styles that might have been added
          const legendStyles = document.querySelectorAll(
            `style[data-mapgl-legend-css="${data.id}"]`,
          );
          legendStyles.forEach((style) => style.remove());

          // Clear legend state when replacing all legends
          layerState.legends = {};
        }

        // Track legend state
        if (legendId) {
          layerState.legends[legendId] = {
            html: message.html,
            css: message.legend_css,
          };
        }

        const legendCss = document.createElement("style");
        legendCss.innerHTML = message.legend_css;
        legendCss.setAttribute("data-mapgl-legend-css", data.id); // Mark this style for later cleanup
        document.head.appendChild(legendCss);

        const legend = document.createElement("div");
        legend.innerHTML = message.html;
        legend.classList.add("mapboxgl-legend");
        document.getElementById(data.id).appendChild(legend);

        // Initialize legend interactivity if configured
        if (message.interactivity && typeof initializeLegendInteractivity === "function") {
          initializeLegendInteractivity(map, data.id, message.interactivity);
        }
      } else if (message.type === "set_config_property") {
        map.setConfigProperty(
          message.importId,
          message.configName,
          message.value,
        );
      } else if (message.type === "set_style") {
        // Default preserve_layers to true if not specified
        const preserveLayers = message.preserve_layers !== false;
        const mapId = map.getContainer().id;

        // Mark style as loading to queue any incoming operations
        window._mapgl.styleLoading[mapId] = true;
        console.log("[MapGL Debug] Style loading started for map:", mapId);

        console.log(
          "[MapGL Debug] set_style called with preserve_layers:",
          preserveLayers,
        );
        console.log(
          "[MapGL Debug] message.preserve_layers:",
          message.preserve_layers,
        );

        // If we should preserve layers and sources
        if (preserveLayers) {
          // Store the current style before changing it
          const currentStyle = map.getStyle();
          const userSourceIds = [];
          const userLayers = [];

          console.log(
            "[MapGL Debug] Current style sources:",
            Object.keys(currentStyle.sources),
          );
          console.log(
            "[MapGL Debug] Current style layers:",
            currentStyle.layers.map((l) => l.id),
          );

          // Store layer IDs we know were added by the user via R code
          // This is the most reliable way to identify user-added layers
          const knownUserLayerIds = [];

          // For each layer in the current style, determine if it's a user-added layer
          currentStyle.layers.forEach(function (layer) {
            const layerId = layer.id;

            // Critical: Check for nc_counties specifically since we know that's used in the test app
            if (layerId === "nc_counties") {
              console.log("[MapGL Debug] Found explicit test layer:", layerId);
              knownUserLayerIds.push(layerId);
              if (layer.source && !userSourceIds.includes(layer.source)) {
                console.log(
                  "[MapGL Debug] Found source from test layer:",
                  layer.source,
                );
                userSourceIds.push(layer.source);
              }
              return; // Skip other checks for this layer
            }

            // These are common patterns for user-added layers from R code
            if (
              // Specific layer IDs from the R package
              layerId.endsWith("_counties") ||
              layerId.endsWith("_label") ||
              layerId.endsWith("_layer") ||
              // Look for hover handlers - only user-added layers have these
              (window._mapboxHandlers && window._mapboxHandlers[layerId]) ||
              // If the layer ID contains these strings, it's likely user-added
              layerId.includes("user") ||
              layerId.includes("custom") ||
              // If the paint property has a hover case, it's user-added
              (layer.paint &&
                Object.values(layer.paint).some(
                  (value) =>
                    Array.isArray(value) &&
                    value[0] === "case" &&
                    Array.isArray(value[1]) &&
                    value[1][1] &&
                    Array.isArray(value[1][1]) &&
                    value[1][1][0] === "feature-state" &&
                    value[1][1][1] === "hover",
                ))
            ) {
              console.log("[MapGL Debug] Found user layer:", layerId);
              knownUserLayerIds.push(layerId);
              // Only include its source if it's not a base map source
              if (layer.source && !userSourceIds.includes(layer.source)) {
                const layerSource = currentStyle.sources[layer.source];
                const isBaseMapSource =
                  layerSource &&
                  layerSource.type === "vector" &&
                  (layer.source === "composite" ||
                    layer.source === "mapbox" ||
                    layer.source.startsWith("mapbox-") ||
                    layer.source === "openmaptiles" ||
                    layer.source.startsWith("carto") ||
                    layer.source.startsWith("maptiler"));

                if (!isBaseMapSource) {
                  console.log(
                    "[MapGL Debug] Found user source from layer:",
                    layer.source,
                  );
                  userSourceIds.push(layer.source);
                } else {
                  console.log(
                    "[MapGL Debug] Not adding base map source from layer:",
                    layer.source,
                  );
                }
              }
            }
          });

          // For each source, determine if it's a user-added source
          for (const sourceId in currentStyle.sources) {
            const source = currentStyle.sources[sourceId];

            console.log(
              "[MapGL Debug] Examining source:",
              sourceId,
              "type:",
              source.type,
            );

            // Strategy 1: All GeoJSON sources are likely user-added
            if (source.type === "geojson") {
              console.log("[MapGL Debug] Found user GeoJSON source:", sourceId);
              if (!userSourceIds.includes(sourceId)) {
                userSourceIds.push(sourceId);
              }
            }
            // Strategy 2: Check for source data URL patterns typical of R-generated data
            else if (
              source.url &&
              typeof source.url === "string" &&
              (source.url.includes("data:application/json") ||
                source.url.includes("blob:"))
            ) {
              console.log(
                "[MapGL Debug] Found user source with data URL:",
                sourceId,
              );
              if (!userSourceIds.includes(sourceId)) {
                userSourceIds.push(sourceId);
              }
            }
            // Strategy 3: Standard filtering - exclude common base map sources
            else if (
              sourceId !== "composite" &&
              sourceId !== "mapbox" &&
              !sourceId.startsWith("mapbox-") &&
              sourceId !== "openmaptiles" && // Common in MapLibre styles
              !(sourceId.startsWith("carto") && sourceId !== "carto-source") && // Filter CARTO base sources but keep user ones
              !(
                sourceId.startsWith("maptiler") && !sourceId.includes("user")
              ) && // Filter MapTiler sources but keep user ones
              !sourceId.includes("terrain") && // Common terrain sources
              !sourceId.includes("hillshade") && // Common hillshade sources
              !(sourceId.includes("basemap") && !sourceId.includes("user")) && // Filter basemap sources but keep user ones
              sourceId !== "satellite" && // Filter MapTiler satellite source specifically
              sourceId !== "aerial" // Filter aerial imagery sources
            ) {
              console.log(
                "[MapGL Debug] Found user source via filtering:",
                sourceId,
              );
              if (!userSourceIds.includes(sourceId)) {
                userSourceIds.push(sourceId);
              }
            } else {
              console.log(
                "[MapGL Debug] Filtered out base map source:",
                sourceId,
              );
            }

            // Store layer-specific handler references
            if (window._mapboxHandlers) {
              const handlers = window._mapboxHandlers;
              for (const layerId in handlers) {
                // Find layers associated with this source
                const layer = currentStyle.layers.find((l) => l.id === layerId);
                if (layer && layer.source === sourceId) {
                  layer._handlers = handlers[layerId];
                }
              }
            }
          }

          // Identify layers using user-added sources or known user layer IDs
          // ONLY include layers that use genuinely user-added sources (not base map sources)
          currentStyle.layers.forEach(function (layer) {
            // Check if this layer uses a genuine user source (not filtered out base map sources)
            const usesUserSource = userSourceIds.includes(layer.source);
            const isKnownUserLayer = knownUserLayerIds.includes(layer.id);

            // Additional check: exclude layers that use base map sources even if they were temporarily added to userSourceIds
            const layerSource = currentStyle.sources[layer.source];
            const isBaseMapSource =
              layerSource &&
              layerSource.type === "vector" &&
              (layer.source === "composite" ||
                layer.source === "mapbox" ||
                layer.source.startsWith("mapbox-") ||
                layer.source === "openmaptiles" ||
                layer.source.startsWith("carto") ||
                layer.source.startsWith("maptiler"));

            if ((usesUserSource || isKnownUserLayer) && !isBaseMapSource) {
              // Capture current visibility state (may differ from layer definition)
              const currentVisibility = map.getLayoutProperty(layer.id, 'visibility');
              if (currentVisibility !== undefined) {
                if (!layer.layout) {
                  layer.layout = {};
                }
                layer.layout.visibility = currentVisibility;
              }
              userLayers.push(layer);
              console.log(
                "[MapGL Debug] Including user layer:",
                layer.id,
                "source:",
                layer.source,
              );
            } else if (isBaseMapSource) {
              console.log(
                "[MapGL Debug] Excluding base map layer:",
                layer.id,
                "source:",
                layer.source,
              );
            }
          });

          // Log detected user sources and layers
          console.log("[MapGL Debug] Detected user sources:", userSourceIds);
          console.log(
            "[MapGL Debug] Detected user layers:",
            userLayers.map((l) => l.id),
          );
          console.log(
            "[MapGL Debug] Will preserve",
            userLayers.length,
            "user layers",
          );

          // Store them for potential use outside the onStyleLoad event
          // This helps in case the event timing is different in MapLibre
          if (!window._mapglPreservedData) {
            window._mapglPreservedData = {};
          }
          window._mapglPreservedData[map.getContainer().id] = {
            sources: userSourceIds.map((id) => ({
              id,
              source: currentStyle.sources[id],
            })),
            layers: userLayers,
          };

          // Set up event listener to re-add sources and layers after style loads
          const onStyleLoad = function () {
            console.log("[MapGL Debug] style.load event fired");

            // HACK: Reset layers control UI to show all layers as active
            const layersControl = document.querySelector('.layers-control');
            if (layersControl) {
              const layerLinks = layersControl.querySelectorAll('a');
              layerLinks.forEach(link => {
                link.className = 'active';
              });
            }

            try {
              // Re-add user sources
              userSourceIds.forEach(function (sourceId) {
                try {
                  if (!map.getSource(sourceId)) {
                    const source = currentStyle.sources[sourceId];
                    console.log("[MapGL Debug] Re-adding source:", sourceId);
                    map.addSource(sourceId, source);
                  }
                } catch (err) {
                  console.error(
                    "[MapGL Debug] Error re-adding source:",
                    sourceId,
                    err,
                  );
                }
              });

              // Re-add user layers
              userLayers.forEach(function (layer) {
                try {
                  if (!map.getLayer(layer.id)) {
                    console.log("[MapGL Debug] Re-adding layer:", layer.id);
                    map.addLayer(layer);

                    // Explicitly set visibility if it was set to 'none'
                    if (layer.layout && layer.layout.visibility === 'none') {
                      map.setLayoutProperty(layer.id, 'visibility', 'none');
                      console.log(`[MapGL Debug] Explicitly set ${layer.id} visibility to none`);
                    }

                    // Re-add event handlers for tooltips and hover effects
                    if (layer._handlers) {
                      const handlers = layer._handlers;

                      if (handlers.mousemove) {
                        console.log(
                          "[MapGL Debug] Re-adding mousemove handler for:",
                          layer.id,
                        );
                        map.on("mousemove", layer.id, handlers.mousemove);
                      }

                      if (handlers.mouseleave) {
                        console.log(
                          "[MapGL Debug] Re-adding mouseleave handler for:",
                          layer.id,
                        );
                        map.on("mouseleave", layer.id, handlers.mouseleave);
                      }
                    }

                    // Check if we need to restore tooltip handlers
                    const layerId = layer.id;
                    if (layerId === "nc_counties" || layer.tooltip) {
                      console.log(
                        "[MapGL Debug] Restoring tooltip for:",
                        layerId,
                      );

                      // Create a new tooltip popup
                      const tooltip = new maplibregl.Popup({
                        closeButton: false,
                        closeOnClick: false,
                        maxWidth: "400px",
                      });

                      // Re-add tooltip handlers
                      const tooltipProperty = layer.tooltip || "NAME";

                      const mouseMoveHandler = function (e) {
                        map.getCanvas().style.cursor = "pointer";
                        if (e.features.length > 0) {
                          const description =
                            e.features[0].properties[tooltipProperty];
                          tooltip
                            .setLngLat(e.lngLat)
                            .setHTML(description)
                            .addTo(map);
                        }
                      };

                      const mouseLeaveHandler = function () {
                        map.getCanvas().style.cursor = "";
                        tooltip.remove();
                      };

                      map.on("mousemove", layerId, mouseMoveHandler);
                      map.on("mouseleave", layerId, mouseLeaveHandler);

                      // Store these handlers
                      if (!window._mapboxHandlers) {
                        window._mapboxHandlers = {};
                      }
                      window._mapboxHandlers[layerId] = {
                        mousemove: mouseMoveHandler,
                        mouseleave: mouseLeaveHandler,
                      };
                    }

                    // Recreate hover states if needed
                    if (layer.paint) {
                      for (const key in layer.paint) {
                        const value = layer.paint[key];
                        if (
                          Array.isArray(value) &&
                          value[0] === "case" &&
                          Array.isArray(value[1]) &&
                          value[1][0] === "boolean" &&
                          value[1][1][0] === "feature-state" &&
                          value[1][1][1] === "hover"
                        ) {
                          // This is a hover-enabled paint property
                          map.setPaintProperty(layer.id, key, value);
                        }
                      }
                    }
                  }
                } catch (err) {
                  console.error(
                    "[MapGL Debug] Error re-adding layer:",
                    layer.id,
                    err,
                  );
                }
              });
            } catch (err) {
              console.error("[MapGL Debug] Error in style.load handler:", err);
            }

            // Clear any active tooltips before restoration to prevent stacking
            if (window._activeTooltip) {
              window._activeTooltip.remove();
              delete window._activeTooltip;
            }

            // Restore tracked layer modifications
            const mapId = map.getContainer().id;
            const savedLayerState =
              window._mapglLayerState && window._mapglLayerState[mapId];
            if (savedLayerState) {
              console.log(
                "[MapGL Debug] Restoring tracked layer modifications",
              );

              // Restore filters
              for (const layerId in savedLayerState.filters) {
                if (map.getLayer(layerId)) {
                  console.log(
                    "[MapGL Debug] Restoring filter for layer:",
                    layerId,
                  );
                  map.setFilter(layerId, savedLayerState.filters[layerId]);
                }
              }

              // Restore paint properties
              for (const layerId in savedLayerState.paintProperties) {
                if (map.getLayer(layerId)) {
                  const properties = savedLayerState.paintProperties[layerId];
                  for (const propertyName in properties) {
                    const savedValue = properties[propertyName];

                    console.log(
                      "[MapGL Debug] Restoring paint property:",
                      layerId,
                      propertyName,
                      savedValue,
                    );

                    // Check if layer has hover effects that need to be preserved
                    const currentValue = map.getPaintProperty(
                      layerId,
                      propertyName,
                    );
                    if (
                      currentValue &&
                      Array.isArray(currentValue) &&
                      currentValue[0] === "case"
                    ) {
                      // Preserve hover effects while updating base value
                      const hoverValue = currentValue[2];
                      const newPaintProperty = [
                        "case",
                        ["boolean", ["feature-state", "hover"], false],
                        hoverValue,
                        savedValue,
                      ];
                      map.setPaintProperty(
                        layerId,
                        propertyName,
                        newPaintProperty,
                      );
                    } else {
                      map.setPaintProperty(layerId, propertyName, savedValue);
                    }
                  }
                }
              }

              // Restore layout properties
              for (const layerId in savedLayerState.layoutProperties) {
                if (map.getLayer(layerId)) {
                  const properties = savedLayerState.layoutProperties[layerId];
                  for (const propertyName in properties) {
                    console.log(
                      "[MapGL Debug] Restoring layout property:",
                      layerId,
                      propertyName,
                      properties[propertyName],
                    );
                    map.setLayoutProperty(
                      layerId,
                      propertyName,
                      properties[propertyName],
                    );
                  }
                }
              }

              // Restore tooltips
              for (const layerId in savedLayerState.tooltips) {
                if (map.getLayer(layerId)) {
                  const tooltipProperty = savedLayerState.tooltips[layerId];
                  console.log(
                    "[MapGL Debug] Restoring tooltip:",
                    layerId,
                    tooltipProperty,
                  );

                  // Remove existing tooltip handlers first
                  if (
                    window._mapboxHandlers &&
                    window._mapboxHandlers[layerId]
                  ) {
                    if (window._mapboxHandlers[layerId].mousemove) {
                      map.off(
                        "mousemove",
                        layerId,
                        window._mapboxHandlers[layerId].mousemove,
                      );
                    }
                    if (window._mapboxHandlers[layerId].mouseleave) {
                      map.off(
                        "mouseleave",
                        layerId,
                        window._mapboxHandlers[layerId].mouseleave,
                      );
                    }
                  }

                  // Create new tooltip
                  const tooltip = new maplibregl.Popup({
                    closeButton: false,
                    closeOnClick: false,
                    maxWidth: "400px",
                  });

                  const mouseMoveHandler = function (e) {
                    onMouseMoveTooltip(
                      e,
                      map,
                      tooltip,
                      tooltipProperty,
                      layerId,
                    );
                  };

                  const mouseLeaveHandler = function () {
                    onMouseLeaveTooltip(map, tooltip);
                  };

                  map.on("mousemove", layerId, mouseMoveHandler);
                  map.on("mouseleave", layerId, mouseLeaveHandler);

                  // Store handler references
                  if (!window._mapboxHandlers) {
                    window._mapboxHandlers = {};
                  }
                  window._mapboxHandlers[layerId] = {
                    mousemove: mouseMoveHandler,
                    mouseleave: mouseLeaveHandler,
                  };
                }
              }

              // Restore popups
              for (const layerId in savedLayerState.popups) {
                if (map.getLayer(layerId)) {
                  const popupProperty = savedLayerState.popups[layerId];
                  console.log(
                    "[MapGL Debug] Restoring popup:",
                    layerId,
                    popupProperty,
                  );

                  // Remove existing popup handlers first
                  if (
                    window._mapboxClickHandlers &&
                    window._mapboxClickHandlers[layerId]
                  ) {
                    map.off(
                      "click",
                      layerId,
                      window._mapboxClickHandlers[layerId],
                    );
                  }

                  // Create new popup handler
                  const clickHandler = function (e) {
                    onClickPopup(e, map, popupProperty, layerId);
                  };

                  map.on("click", layerId, clickHandler);

                  // Add hover effects for cursor
                  map.on("mouseenter", layerId, function () {
                    map.getCanvas().style.cursor = "pointer";
                  });
                  map.on("mouseleave", layerId, function () {
                    map.getCanvas().style.cursor = "";
                  });

                  // Store handler reference
                  if (!window._mapboxClickHandlers) {
                    window._mapboxClickHandlers = {};
                  }
                  window._mapboxClickHandlers[layerId] = clickHandler;
                }
              }

              // Restore legends
              if (Object.keys(savedLayerState.legends).length > 0) {
                // Clear any existing legends first to prevent stacking
                const existingLegends = document.querySelectorAll(
                  `#${mapId} .mapboxgl-legend`,
                );
                existingLegends.forEach((legend) => legend.remove());

                // Clear existing legend styles
                const legendStyles = document.querySelectorAll(
                  `style[data-mapgl-legend-css="${mapId}"]`,
                );
                legendStyles.forEach((style) => style.remove());

                // Restore each legend
                for (const legendId in savedLayerState.legends) {
                  const legendData = savedLayerState.legends[legendId];
                  console.log("[MapGL Debug] Restoring legend:", legendId);

                  // Add legend CSS
                  const legendCss = document.createElement("style");
                  legendCss.innerHTML = legendData.css;
                  legendCss.setAttribute("data-mapgl-legend-css", mapId);
                  document.head.appendChild(legendCss);

                  // Add legend HTML
                  const legend = document.createElement("div");
                  legend.innerHTML = legendData.html;
                  legend.classList.add("mapboxgl-legend");
                  const mapContainer = document.getElementById(mapId);
                  if (mapContainer) {
                    mapContainer.appendChild(legend);
                  }
                }
              }
            }

            // Re-add user images after style change
            reAddUserImages(map, mapId);

            // Mark style loading as complete and execute any pending operations
            window._mapgl.styleLoading[mapId] = false;
            console.log("[MapGL Debug] Style loading completed for map:", mapId);
            executePendingOperations(mapId);

          };

          map.once("style.load", function() {
            // Wait for map to be fully idle before adding layers
            map.once("idle", onStyleLoad);
          });

          // Add a backup mechanism specific to MapLibre
          // Some MapLibre styles or versions may have different event timing
          if (userLayers.length > 0) {
            // Set a timeout to check if layers were added after a reasonable delay
            setTimeout(function () {
              try {
                console.log("[MapGL Debug] Running backup layer check");
                const mapId = map.getContainer().id;
                const preserved =
                  window._mapglPreservedData &&
                  window._mapglPreservedData[mapId];

                if (preserved) {
                  // Check if user layers were successfully restored
                  const firstLayerId = preserved.layers[0]?.id;
                  if (firstLayerId && !map.getLayer(firstLayerId)) {
                    console.log(
                      "[MapGL Debug] Backup restoration needed for layers",
                    );

                    // Re-add sources first
                    preserved.sources.forEach(function (src) {
                      try {
                        if (!map.getSource(src.id)) {
                          console.log(
                            "[MapGL Debug] Backup: adding source",
                            src.id,
                          );
                          map.addSource(src.id, src.source);
                        }
                      } catch (err) {
                        console.error(
                          "[MapGL Debug] Backup: error adding source",
                          src.id,
                          err,
                        );
                      }
                    });

                    // Then re-add layers
                    preserved.layers.forEach(function (layer) {
                      try {
                        if (!map.getLayer(layer.id)) {
                          console.log(
                            "[MapGL Debug] Backup: adding layer",
                            layer.id,
                          );
                          map.addLayer(layer);

                          // Check for nc_counties layer to restore tooltip
                          if (layer.id === "nc_counties") {
                            console.log(
                              "[MapGL Debug] Backup: restoring tooltip for",
                              layer.id,
                            );

                            // Create a new tooltip popup
                            const tooltip = new maplibregl.Popup({
                              closeButton: false,
                              closeOnClick: false,
                              maxWidth: "400px",
                            });

                            // Re-add tooltip handlers
                            const tooltipProperty = "NAME";

                            const mouseMoveHandler = function (e) {
                              map.getCanvas().style.cursor = "pointer";
                              if (e.features.length > 0) {
                                const description =
                                  e.features[0].properties[tooltipProperty];
                                tooltip
                                  .setLngLat(e.lngLat)
                                  .setHTML(description)
                                  .addTo(map);
                              }
                            };

                            const mouseLeaveHandler = function () {
                              map.getCanvas().style.cursor = "";
                              tooltip.remove();
                            };

                            map.on("mousemove", layer.id, mouseMoveHandler);
                            map.on("mouseleave", layer.id, mouseLeaveHandler);

                            // Store these handlers
                            if (!window._mapboxHandlers) {
                              window._mapboxHandlers = {};
                            }
                            window._mapboxHandlers[layer.id] = {
                              mousemove: mouseMoveHandler,
                              mouseleave: mouseLeaveHandler,
                            };
                          }

                          // Restore hover states
                          if (layer.paint) {
                            for (const key in layer.paint) {
                              const value = layer.paint[key];
                              if (
                                Array.isArray(value) &&
                                value[0] === "case" &&
                                Array.isArray(value[1]) &&
                                value[1][0] === "boolean" &&
                                value[1][1] &&
                                Array.isArray(value[1][1]) &&
                                value[1][1][0] === "feature-state" &&
                                value[1][1][1] === "hover"
                              ) {
                                // This is a hover-enabled paint property
                                console.log(
                                  "[MapGL Debug] Backup: restoring hover style for",
                                  layer.id,
                                  key,
                                );
                                map.setPaintProperty(layer.id, key, value);
                              }
                            }
                          }
                        }
                      } catch (err) {
                        console.error(
                          "[MapGL Debug] Backup: error adding layer",
                          layer.id,
                          err,
                        );
                      }
                    });

                    // Restore tracked layer modifications in backup
                    const mapId = map.getContainer().id;
                    const savedLayerState =
                      window._mapglLayerState && window._mapglLayerState[mapId];
                    if (savedLayerState) {
                      console.log(
                        "[MapGL Debug] Backup: restoring tracked layer modifications",
                      );

                      // Restore filters
                      for (const layerId in savedLayerState.filters) {
                        if (map.getLayer(layerId)) {
                          console.log(
                            "[MapGL Debug] Backup: restoring filter for layer:",
                            layerId,
                          );
                          map.setFilter(
                            layerId,
                            savedLayerState.filters[layerId],
                          );
                        }
                      }

                      // Restore paint properties
                      for (const layerId in savedLayerState.paintProperties) {
                        if (map.getLayer(layerId)) {
                          const properties =
                            savedLayerState.paintProperties[layerId];
                          for (const propertyName in properties) {
                            const savedValue = properties[propertyName];
                            console.log(
                              "[MapGL Debug] Backup: restoring paint property:",
                              layerId,
                              propertyName,
                              savedValue,
                            );

                            // Check if layer has hover effects that need to be preserved
                            const currentValue = map.getPaintProperty(
                              layerId,
                              propertyName,
                            );
                            if (
                              currentValue &&
                              Array.isArray(currentValue) &&
                              currentValue[0] === "case"
                            ) {
                              // Preserve hover effects while updating base value
                              const hoverValue = currentValue[2];
                              const newPaintProperty = [
                                "case",
                                ["boolean", ["feature-state", "hover"], false],
                                hoverValue,
                                savedValue,
                              ];
                              map.setPaintProperty(
                                layerId,
                                propertyName,
                                newPaintProperty,
                              );
                            } else {
                              map.setPaintProperty(
                                layerId,
                                propertyName,
                                savedValue,
                              );
                            }
                          }
                        }
                      }

                      // Restore layout properties
                      for (const layerId in savedLayerState.layoutProperties) {
                        if (map.getLayer(layerId)) {
                          const properties =
                            savedLayerState.layoutProperties[layerId];
                          for (const propertyName in properties) {
                            console.log(
                              "[MapGL Debug] Backup: restoring layout property:",
                              layerId,
                              propertyName,
                              properties[propertyName],
                            );
                            map.setLayoutProperty(
                              layerId,
                              propertyName,
                              properties[propertyName],
                            );
                          }
                        }
                      }

                      // Restore tooltips
                      for (const layerId in savedLayerState.tooltips) {
                        if (map.getLayer(layerId)) {
                          const tooltipProperty =
                            savedLayerState.tooltips[layerId];
                          console.log(
                            "[MapGL Debug] Backup: restoring tooltip:",
                            layerId,
                            tooltipProperty,
                          );

                          if (
                            window._mapboxHandlers &&
                            window._mapboxHandlers[layerId]
                          ) {
                            if (window._mapboxHandlers[layerId].mousemove) {
                              map.off(
                                "mousemove",
                                layerId,
                                window._mapboxHandlers[layerId].mousemove,
                              );
                            }
                            if (window._mapboxHandlers[layerId].mouseleave) {
                              map.off(
                                "mouseleave",
                                layerId,
                                window._mapboxHandlers[layerId].mouseleave,
                              );
                            }
                          }

                          const tooltip = new maplibregl.Popup({
                            closeButton: false,
                            closeOnClick: false,
                            maxWidth: "400px",
                          });

                          const mouseMoveHandler = function (e) {
                            onMouseMoveTooltip(
                              e,
                              map,
                              tooltip,
                              tooltipProperty,
                              layerId,
                            );
                          };

                          const mouseLeaveHandler = function () {
                            onMouseLeaveTooltip(map, tooltip);
                          };

                          map.on("mousemove", layerId, mouseMoveHandler);
                          map.on("mouseleave", layerId, mouseLeaveHandler);

                          if (!window._mapboxHandlers) {
                            window._mapboxHandlers = {};
                          }
                          window._mapboxHandlers[layerId] = {
                            mousemove: mouseMoveHandler,
                            mouseleave: mouseLeaveHandler,
                          };
                        }
                      }

                      // Restore popups
                      for (const layerId in savedLayerState.popups) {
                        if (map.getLayer(layerId)) {
                          const popupProperty = savedLayerState.popups[layerId];
                          console.log(
                            "[MapGL Debug] Backup: restoring popup:",
                            layerId,
                            popupProperty,
                          );

                          if (
                            window._mapboxClickHandlers &&
                            window._mapboxClickHandlers[layerId]
                          ) {
                            map.off(
                              "click",
                              layerId,
                              window._mapboxClickHandlers[layerId],
                            );
                          }

                          const clickHandler = function (e) {
                            onClickPopup(e, map, popupProperty, layerId);
                          };

                          map.on("click", layerId, clickHandler);
                          map.on("mouseenter", layerId, function () {
                            map.getCanvas().style.cursor = "pointer";
                          });
                          map.on("mouseleave", layerId, function () {
                            map.getCanvas().style.cursor = "";
                          });

                          if (!window._mapboxClickHandlers) {
                            window._mapboxClickHandlers = {};
                          }
                          window._mapboxClickHandlers[layerId] = clickHandler;
                        }
                      }

                      // Restore legends
                      if (Object.keys(savedLayerState.legends).length > 0) {
                        // Clear any existing legends first to prevent stacking
                        const existingLegends = document.querySelectorAll(
                          `#${mapId} .mapboxgl-legend`,
                        );
                        existingLegends.forEach((legend) => legend.remove());

                        // Clear existing legend styles
                        const legendStyles = document.querySelectorAll(
                          `style[data-mapgl-legend-css="${mapId}"]`,
                        );
                        legendStyles.forEach((style) => style.remove());

                        // Restore each legend
                        for (const legendId in savedLayerState.legends) {
                          const legendData = savedLayerState.legends[legendId];
                          console.log(
                            "[MapGL Debug] Backup: restoring legend:",
                            legendId,
                          );

                          // Add legend CSS
                          const legendCss = document.createElement("style");
                          legendCss.innerHTML = legendData.css;
                          legendCss.setAttribute(
                            "data-mapgl-legend-css",
                            mapId,
                          );
                          document.head.appendChild(legendCss);

                          // Add legend HTML
                          const legend = document.createElement("div");
                          legend.innerHTML = legendData.html;
                          legend.classList.add("mapboxgl-legend");
                          const mapContainer = document.getElementById(mapId);
                          if (mapContainer) {
                            mapContainer.appendChild(legend);
                          }
                        }
                      }
                    }
                  } else {
                    console.log(
                      "[MapGL Debug] Backup check: layers already restored properly",
                    );
                  }
                }
              } catch (err) {
                console.error(
                  "[MapGL Debug] Error in backup restoration:",
                  err,
                );
              }
            }, 500); // 500ms delay - faster recovery

            // Add a second backup with a bit more delay in case the first one fails
            setTimeout(function () {
              try {
                console.log("[MapGL Debug] Running second backup layer check");
                const mapId = map.getContainer().id;
                const preserved =
                  window._mapglPreservedData &&
                  window._mapglPreservedData[mapId];

                if (preserved) {
                  // Check if user layers were successfully restored
                  const firstLayerId = preserved.layers[0]?.id;
                  if (firstLayerId && !map.getLayer(firstLayerId)) {
                    console.log(
                      "[MapGL Debug] Second backup restoration needed",
                    );

                    // Re-add sources first
                    preserved.sources.forEach(function (src) {
                      try {
                        if (!map.getSource(src.id)) {
                          console.log(
                            "[MapGL Debug] Second backup: adding source",
                            src.id,
                          );
                          map.addSource(src.id, src.source);
                        }
                      } catch (err) {
                        console.error(
                          "[MapGL Debug] Second backup: error adding source",
                          src.id,
                          err,
                        );
                      }
                    });

                    // Then re-add layers
                    preserved.layers.forEach(function (layer) {
                      try {
                        if (!map.getLayer(layer.id)) {
                          console.log(
                            "[MapGL Debug] Second backup: adding layer",
                            layer.id,
                          );
                          map.addLayer(layer);

                          // Check for nc_counties layer to restore tooltip
                          if (layer.id === "nc_counties") {
                            console.log(
                              "[MapGL Debug] Second backup: restoring tooltip for",
                              layer.id,
                            );

                            // Create a new tooltip popup
                            const tooltip = new maplibregl.Popup({
                              closeButton: false,
                              closeOnClick: false,
                              maxWidth: "400px",
                            });

                            // Re-add tooltip handlers
                            const tooltipProperty = "NAME";

                            const mouseMoveHandler = function (e) {
                              map.getCanvas().style.cursor = "pointer";
                              if (e.features.length > 0) {
                                const description =
                                  e.features[0].properties[tooltipProperty];
                                tooltip
                                  .setLngLat(e.lngLat)
                                  .setHTML(description)
                                  .addTo(map);
                              }
                            };

                            const mouseLeaveHandler = function () {
                              map.getCanvas().style.cursor = "";
                              tooltip.remove();
                            };

                            map.on("mousemove", layer.id, mouseMoveHandler);
                            map.on("mouseleave", layer.id, mouseLeaveHandler);

                            // Store these handlers
                            if (!window._mapboxHandlers) {
                              window._mapboxHandlers = {};
                            }
                            window._mapboxHandlers[layer.id] = {
                              mousemove: mouseMoveHandler,
                              mouseleave: mouseLeaveHandler,
                            };
                          }

                          // Restore hover states
                          if (layer.paint) {
                            for (const key in layer.paint) {
                              const value = layer.paint[key];
                              if (
                                Array.isArray(value) &&
                                value[0] === "case" &&
                                Array.isArray(value[1]) &&
                                value[1][0] === "boolean" &&
                                value[1][1] &&
                                Array.isArray(value[1][1]) &&
                                value[1][1][0] === "feature-state" &&
                                value[1][1][1] === "hover"
                              ) {
                                // This is a hover-enabled paint property
                                console.log(
                                  "[MapGL Debug] Second backup: restoring hover style for",
                                  layer.id,
                                  key,
                                );
                                map.setPaintProperty(layer.id, key, value);
                              }
                            }
                          }
                        }
                      } catch (err) {
                        console.error(
                          "[MapGL Debug] Second backup: error adding layer",
                          layer.id,
                          err,
                        );
                      }
                    });

                    // Restore tracked layer modifications in second backup
                    const mapId = map.getContainer().id;
                    const savedLayerState =
                      window._mapglLayerState && window._mapglLayerState[mapId];
                    if (savedLayerState) {
                      console.log(
                        "[MapGL Debug] Second backup: restoring tracked layer modifications",
                      );

                      // Restore filters
                      for (const layerId in savedLayerState.filters) {
                        if (map.getLayer(layerId)) {
                          console.log(
                            "[MapGL Debug] Second backup: restoring filter for layer:",
                            layerId,
                          );
                          map.setFilter(
                            layerId,
                            savedLayerState.filters[layerId],
                          );
                        }
                      }

                      // Restore paint properties
                      for (const layerId in savedLayerState.paintProperties) {
                        if (map.getLayer(layerId)) {
                          const properties =
                            savedLayerState.paintProperties[layerId];
                          for (const propertyName in properties) {
                            const savedValue = properties[propertyName];
                            console.log(
                              "[MapGL Debug] Second backup: restoring paint property:",
                              layerId,
                              propertyName,
                              savedValue,
                            );

                            // Check if layer has hover effects that need to be preserved
                            const currentValue = map.getPaintProperty(
                              layerId,
                              propertyName,
                            );
                            if (
                              currentValue &&
                              Array.isArray(currentValue) &&
                              currentValue[0] === "case"
                            ) {
                              // Preserve hover effects while updating base value
                              const hoverValue = currentValue[2];
                              const newPaintProperty = [
                                "case",
                                ["boolean", ["feature-state", "hover"], false],
                                hoverValue,
                                savedValue,
                              ];
                              map.setPaintProperty(
                                layerId,
                                propertyName,
                                newPaintProperty,
                              );
                            } else {
                              map.setPaintProperty(
                                layerId,
                                propertyName,
                                savedValue,
                              );
                            }
                          }
                        }
                      }

                      // Restore layout properties
                      for (const layerId in savedLayerState.layoutProperties) {
                        if (map.getLayer(layerId)) {
                          const properties =
                            savedLayerState.layoutProperties[layerId];
                          for (const propertyName in properties) {
                            console.log(
                              "[MapGL Debug] Second backup: restoring layout property:",
                              layerId,
                              propertyName,
                              properties[propertyName],
                            );
                            map.setLayoutProperty(
                              layerId,
                              propertyName,
                              properties[propertyName],
                            );
                          }
                        }
                      }

                      // Restore tooltips
                      for (const layerId in savedLayerState.tooltips) {
                        if (map.getLayer(layerId)) {
                          const tooltipProperty =
                            savedLayerState.tooltips[layerId];
                          console.log(
                            "[MapGL Debug] Second backup: restoring tooltip:",
                            layerId,
                            tooltipProperty,
                          );

                          if (
                            window._mapboxHandlers &&
                            window._mapboxHandlers[layerId]
                          ) {
                            if (window._mapboxHandlers[layerId].mousemove) {
                              map.off(
                                "mousemove",
                                layerId,
                                window._mapboxHandlers[layerId].mousemove,
                              );
                            }
                            if (window._mapboxHandlers[layerId].mouseleave) {
                              map.off(
                                "mouseleave",
                                layerId,
                                window._mapboxHandlers[layerId].mouseleave,
                              );
                            }
                          }

                          const tooltip = new maplibregl.Popup({
                            closeButton: false,
                            closeOnClick: false,
                            maxWidth: "400px",
                          });

                          const mouseMoveHandler = function (e) {
                            onMouseMoveTooltip(
                              e,
                              map,
                              tooltip,
                              tooltipProperty,
                              layerId,
                            );
                          };

                          const mouseLeaveHandler = function () {
                            onMouseLeaveTooltip(map, tooltip);
                          };

                          map.on("mousemove", layerId, mouseMoveHandler);
                          map.on("mouseleave", layerId, mouseLeaveHandler);

                          if (!window._mapboxHandlers) {
                            window._mapboxHandlers = {};
                          }
                          window._mapboxHandlers[layerId] = {
                            mousemove: mouseMoveHandler,
                            mouseleave: mouseLeaveHandler,
                          };
                        }
                      }

                      // Restore popups
                      for (const layerId in savedLayerState.popups) {
                        if (map.getLayer(layerId)) {
                          const popupProperty = savedLayerState.popups[layerId];
                          console.log(
                            "[MapGL Debug] Second backup: restoring popup:",
                            layerId,
                            popupProperty,
                          );

                          if (
                            window._mapboxClickHandlers &&
                            window._mapboxClickHandlers[layerId]
                          ) {
                            map.off(
                              "click",
                              layerId,
                              window._mapboxClickHandlers[layerId],
                            );
                          }

                          const clickHandler = function (e) {
                            onClickPopup(e, map, popupProperty, layerId);
                          };

                          map.on("click", layerId, clickHandler);
                          map.on("mouseenter", layerId, function () {
                            map.getCanvas().style.cursor = "pointer";
                          });
                          map.on("mouseleave", layerId, function () {
                            map.getCanvas().style.cursor = "";
                          });

                          if (!window._mapboxClickHandlers) {
                            window._mapboxClickHandlers = {};
                          }
                          window._mapboxClickHandlers[layerId] = clickHandler;
                        }
                      }

                      // Restore legends
                      if (Object.keys(savedLayerState.legends).length > 0) {
                        // Clear any existing legends first to prevent stacking
                        const existingLegends = document.querySelectorAll(
                          `#${mapId} .mapboxgl-legend`,
                        );
                        existingLegends.forEach((legend) => legend.remove());

                        // Clear existing legend styles
                        const legendStyles = document.querySelectorAll(
                          `style[data-mapgl-legend-css="${mapId}"]`,
                        );
                        legendStyles.forEach((style) => style.remove());

                        // Restore each legend
                        for (const legendId in savedLayerState.legends) {
                          const legendData = savedLayerState.legends[legendId];
                          console.log(
                            "[MapGL Debug] Second backup: restoring legend:",
                            legendId,
                          );

                          // Add legend CSS
                          const legendCss = document.createElement("style");
                          legendCss.innerHTML = legendData.css;
                          legendCss.setAttribute(
                            "data-mapgl-legend-css",
                            mapId,
                          );
                          document.head.appendChild(legendCss);

                          // Add legend HTML
                          const legend = document.createElement("div");
                          legend.innerHTML = legendData.html;
                          legend.classList.add("mapboxgl-legend");
                          const mapContainer = document.getElementById(mapId);
                          if (mapContainer) {
                            mapContainer.appendChild(legend);
                          }
                        }
                      }
                    }
                  }
                }
              } catch (err) {
                console.error("[MapGL Debug] Error in second backup:", err);
              }
            }, 1000); // 1 second delay for second backup
          }
        }

        // Change the style
        console.log(
          "[MapGL Debug] About to call setStyle with:",
          message.style,
        );
        console.log("[MapGL Debug] setStyle diff option:", message.diff);
        map.setStyle(message.style, { diff: message.diff });

        if (message.config) {
          Object.keys(message.config).forEach(function (key) {
            map.setConfigProperty("basemap", key, message.config[key]);
          });
        }

        // For non-preserve mode, still need to handle style loading completion
        // to re-add images and execute pending operations
        if (!preserveLayers) {
          map.once("style.load", function() {
            map.once("idle", function() {
              // Re-add user images after style change
              reAddUserImages(map, mapId);

              // Mark style loading as complete and execute any pending operations
              window._mapgl.styleLoading[mapId] = false;
              console.log("[MapGL Debug] Style loading completed (non-preserve) for map:", mapId);
              executePendingOperations(mapId);
            });
          });
        }
      } else if (message.type === "add_navigation_control") {
        const nav = new maplibregl.NavigationControl({
          showCompass: message.options.show_compass,
          showZoom: message.options.show_zoom,
          visualizePitch: message.options.visualize_pitch,
        });
        map.addControl(nav, message.position);
        map.controls.push({ type: "navigation", control: nav });

        if (message.orientation === "horizontal") {
          const navBar = map
            .getContainer()
            .querySelector(
              ".maplibregl-ctrl-group:not(.mapbox-gl-draw_ctrl-draw-btn)",
            );
          if (navBar) {
            navBar.style.display = "flex";
            navBar.style.flexDirection = "row";
          }
        }
      } else if (message.type === "add_draw_control") {
        MapboxDraw.constants.classes.CONTROL_BASE = "maplibregl-ctrl";
        MapboxDraw.constants.classes.CONTROL_PREFIX = "maplibregl-ctrl-";
        MapboxDraw.constants.classes.CONTROL_GROUP = "maplibregl-ctrl-group";

        let drawOptions = message.options || {};

        // Generate styles if styling parameters provided
        if (message.styling) {
          const generatedStyles = generateDrawStyles(message.styling);
          if (generatedStyles) {
            drawOptions.styles = generatedStyles;
          }
        }

        if (message.freehand) {
          drawOptions = Object.assign({}, drawOptions, {
            modes: Object.assign({}, MapboxDraw.modes, {
              draw_polygon: MapboxDraw.modes.draw_freehand,
            }),
            // defaultMode: 'draw_polygon' # Don't set the default yet
          });
        }

        // Add rectangle mode if enabled
        if (message.rectangle) {
          drawOptions.modes = Object.assign(
            {},
            drawOptions.modes || MapboxDraw.modes,
            {
              draw_rectangle: MapboxDraw.modes.draw_rectangle,
            },
          );
        }

        // Add radius mode if enabled
        if (message.radius) {
          drawOptions.modes = Object.assign(
            {},
            drawOptions.modes || MapboxDraw.modes,
            {
              draw_radius: MapboxDraw.modes.draw_radius,
            },
          );
        }

        // Create the draw control
        var drawControl = new MapboxDraw(drawOptions);
        map.addControl(drawControl, message.position);
        map.controls.push({ type: "draw", control: drawControl });

        // Store the draw control on the widget for later access
        widget.drawControl = drawControl;

        // Add lasso icon CSS for freehand mode
        if (message.freehand) {
          if (!document.querySelector("#mapgl-freehand-lasso-styles")) {
            const style = document.createElement("style");
            style.id = "mapgl-freehand-lasso-styles";
            style.textContent = `
              .mapbox-gl-draw_polygon {
                background-image: url('data:image/svg+xml;utf8,%3Csvg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"%3E%3Cpath d="M 7 3 C 5 2.5, 3.5 3, 3 5 C 2.5 7, 3 8.5, 4 9.5 C 5 10.5, 5.5 11.5, 5 13 C 4.5 14.5, 5 15.5, 6.5 16 C 8 16.5, 9.5 16, 11 15 C 12.5 14, 13.5 13, 14.5 11.5 C 15.5 10, 16 8.5, 15.5 7 C 15 5.5, 14 4.5, 12.5 3.5 C 11 2.5, 9 2.5, 7 3 Z" fill="none" stroke="%23000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/%3E%3C/svg%3E') !important;
              }
            `;
            document.head.appendChild(style);
          }

          // Update tooltip for freehand mode
          setTimeout(() => {
            const polygonButton = map
              .getContainer()
              .querySelector(".mapbox-gl-draw_polygon");
            if (polygonButton) {
              polygonButton.title = "Freehand polygon tool (p)";
            }
          }, 100);
        }

        // Add rectangle icon CSS if rectangle mode is enabled
        if (message.rectangle) {
          if (!document.querySelector("#mapgl-rectangle-styles")) {
            const style = document.createElement("style");
            style.id = "mapgl-rectangle-styles";
            style.textContent = `
              .mapbox-gl-draw_rectangle {
                background: transparent;
                border: none;
                cursor: pointer;
                display: block;
                height: 30px;
                width: 30px;
                padding: 0;
                outline: none;
                background-image: url('data:image/svg+xml;utf8,%3Csvg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"%3E%3Crect x="4" y="5" width="12" height="10" fill="none" stroke="%23000000" stroke-width="2"/%3E%3C/svg%3E') !important;
                background-repeat: no-repeat !important;
                background-position: center !important;
              }
              .mapbox-gl-draw_rectangle:hover {
                background-color: rgba(0, 0, 0, 0.05);
              }
              .mapbox-gl-draw_rectangle.active {
                background-color: rgba(0, 0, 0, 0.05);
              }
            `;
            document.head.appendChild(style);
          }
        }

        // Add radius/circle icon CSS if radius mode is enabled
        if (message.radius) {
          if (!document.querySelector("#mapgl-radius-styles")) {
            const style = document.createElement("style");
            style.id = "mapgl-radius-styles";
            style.textContent = `
              .mapbox-gl-draw_radius {
                background: transparent;
                border: none;
                cursor: pointer;
                display: block;
                height: 30px;
                width: 30px;
                padding: 0;
                outline: none;
                background-image: url('data:image/svg+xml;utf8,%3Csvg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"%3E%3Ccircle cx="10" cy="10" r="7" fill="none" stroke="%23000000" stroke-width="2"/%3E%3Ccircle cx="10" cy="10" r="1.5" fill="%23000000"/%3E%3C/svg%3E') !important;
                background-repeat: no-repeat !important;
                background-position: center !important;
              }
              .mapbox-gl-draw_radius:hover {
                background-color: rgba(0, 0, 0, 0.05);
              }
              .mapbox-gl-draw_radius.active {
                background-color: rgba(0, 0, 0, 0.05);
              }
            `;
            document.head.appendChild(style);
          }
        }

        // Add event listeners
        map.on("draw.create", updateDrawnFeatures);
        map.on("draw.delete", updateDrawnFeatures);
        map.on("draw.update", updateDrawnFeatures);

        // Add measurement functionality if enabled
        if (message.show_measurements) {
          initializeMeasurements(map, drawControl, message.measurement_units);
        }

        // Add initial features if provided
        if (message.source) {
          addSourceFeaturesToDraw(drawControl, message.source, map);
        }

        // Add rectangle and radius buttons if enabled
        setTimeout(() => {
          const drawControlGroup = map
            .getContainer()
            .querySelector(
              ".maplibregl-ctrl-group:has(.mapbox-gl-draw_polygon)",
            );

          if (drawControlGroup) {
            // Find the trash button to insert before it
            const trashBtn = drawControlGroup.querySelector(
              ".mapbox-gl-draw_trash",
            );

            if (message.rectangle) {
              const rectangleBtn = document.createElement("button");
              rectangleBtn.className =
                "mapbox-gl-draw_rectangle maplibregl-ctrl-icon";
              rectangleBtn.title = "Rectangle tool";
              rectangleBtn.type = "button";
              rectangleBtn.onclick = function () {
                drawControl.changeMode("draw_rectangle");
                // Remove active class from all buttons and add to this one
                drawControlGroup
                  .querySelectorAll("button")
                  .forEach((b) => b.classList.remove("active"));
                rectangleBtn.classList.add("active");
              };
              // Insert before trash button if it exists, otherwise append
              if (trashBtn) {
                drawControlGroup.insertBefore(rectangleBtn, trashBtn);
              } else {
                drawControlGroup.appendChild(rectangleBtn);
              }
            }

            if (message.radius) {
              const radiusBtn = document.createElement("button");
              radiusBtn.className =
                "mapbox-gl-draw_radius maplibregl-ctrl-icon";
              radiusBtn.title = "Radius/Circle tool";
              radiusBtn.type = "button";
              radiusBtn.onclick = function () {
                drawControl.changeMode("draw_radius");
                // Remove active class from all buttons and add to this one
                drawControlGroup
                  .querySelectorAll("button")
                  .forEach((b) => b.classList.remove("active"));
                radiusBtn.classList.add("active");
              };
              // Insert before trash button if it exists, otherwise append
              if (trashBtn) {
                drawControlGroup.insertBefore(radiusBtn, trashBtn);
              } else {
                drawControlGroup.appendChild(radiusBtn);
              }
            }
          }
        }, 100);

        // Apply orientation styling
        if (message.orientation === "horizontal") {
          const drawBar = map
            .getContainer()
            .querySelector(".maplibregl-ctrl-group");
          if (drawBar) {
            drawBar.style.display = "flex";
            drawBar.style.flexDirection = "row";
          }
        }

        // Add download button if requested
        if (message.download_button) {
          // Add CSS for download button if not already added
          if (!document.querySelector("#mapgl-draw-download-styles")) {
            const style = document.createElement("style");
            style.id = "mapgl-draw-download-styles";
            style.textContent = `
              .mapbox-gl-draw_download {
                background: transparent;
                border: none;
                cursor: pointer;
                display: block;
                height: 30px;
                width: 30px;
                padding: 0;
                outline: none;
              }
              .mapbox-gl-draw_download:hover {
                background-color: rgba(0, 0, 0, 0.05);
              }
              .mapbox-gl-draw_download svg {
                width: 20px;
                height: 20px;
                margin: 5px;
                fill: #333;
              }
            `;
            document.head.appendChild(style);
          }

          // Small delay to ensure Draw control is fully rendered
          setTimeout(() => {
            // Find the Draw control button group
            const drawButtons = map
              .getContainer()
              .querySelector(
                ".maplibregl-ctrl-group:has(.mapbox-gl-draw_polygon)",
              );

            if (drawButtons) {
              // Create download button
              const downloadBtn = document.createElement("button");
              downloadBtn.className = "mapbox-gl-draw_download";
              downloadBtn.title = "Download drawn features as GeoJSON";

              // Add SVG download icon
              downloadBtn.innerHTML = `
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                  <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                </svg>
              `;

              downloadBtn.addEventListener("click", () => {
                // Get all drawn features
                const data = drawControl.getAll();

                if (data.features.length === 0) {
                  alert(
                    "No features to download. Please draw something first!",
                  );
                  return;
                }

                // Convert to string with nice formatting
                const dataStr = JSON.stringify(data, null, 2);

                // Create blob and download
                const blob = new Blob([dataStr], { type: "application/json" });
                const url = URL.createObjectURL(blob);

                const a = document.createElement("a");
                a.href = url;
                a.download = `${message.download_filename || "drawn-features"}.geojson`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
              });

              // Append to the Draw control button group
              drawButtons.appendChild(downloadBtn);
            }
          }, 100);
        }
      } else if (message.type === "get_drawn_features") {
        var drawControl = widget.drawControl || widget.getDraw();
        if (drawControl) {
          const features = drawControl.getAll();
          Shiny.setInputValue(
            data.id + "_drawn_features",
            JSON.stringify(features),
          );
        } else {
          Shiny.setInputValue(
            data.id + "_drawn_features",
            JSON.stringify(null),
          );
        }
      } else if (message.type === "clear_drawn_features") {
        var drawControl = widget.drawControl || widget.getDraw();
        if (drawControl) {
          drawControl.deleteAll();
          // Update the drawn features
          updateDrawnFeatures();
        }
      } else if (message.type.startsWith("turf_")) {
        // Delegate to shared turf operations module
        handleTurfOperation(map, message, data.id);
      } else if (message.type === "add_features_to_draw") {
        var drawControl = widget.drawControl || widget.getDraw();
        if (drawControl) {
          if (message.data.clear_existing) {
            drawControl.deleteAll();
          }
          addSourceFeaturesToDraw(drawControl, message.data.source, map);
          // Update the drawn features
          updateDrawnFeatures();
        } else {
          console.warn("Draw control not initialized");
        }
      } else if (message.type === "add_markers") {
        if (!window.maplibreMarkers) {
          window.maplibreMarkers = [];
        }
        message.markers.forEach(function (marker) {
          const markerOptions = {
            color: marker.color,
            rotation: marker.rotation,
            draggable: marker.options.draggable || false,
            ...marker.options,
          };
          const mapMarker = new maplibregl.Marker(markerOptions)
            .setLngLat([marker.lng, marker.lat])
            .addTo(map);

          if (marker.popup) {
            mapMarker.setPopup(
              new maplibregl.Popup({ offset: 25, maxWidth: "400px" }).setHTML(
                marker.popup,
              ),
            );
          }

          const markerId = marker.id;
          if (markerId) {
            const lngLat = mapMarker.getLngLat();
            Shiny.setInputValue(data.id + "_marker_" + markerId, {
              id: markerId,
              lng: lngLat.lng,
              lat: lngLat.lat,
            });

            mapMarker.on("dragend", function () {
              const lngLat = mapMarker.getLngLat();
              Shiny.setInputValue(data.id + "_marker_" + markerId, {
                id: markerId,
                lng: lngLat.lng,
                lat: lngLat.lat,
              });
            });
          }

          window.maplibreMarkers.push(mapMarker);
        });
      } else if (message.type === "clear_markers") {
        if (window.maplibreMarkers) {
          window.maplibreMarkers.forEach(function (marker) {
            marker.remove();
          });
          window.maplibreglMarkers = [];
        }
      } else if (message.type === "add_fullscreen_control") {
        const position = message.position || "top-right";
        const fullscreen = new maplibregl.FullscreenControl();
        map.addControl(fullscreen, position);
        map.controls.push({ type: "fullscreen", control: fullscreen });
      } else if (message.type === "add_scale_control") {
        const scaleControl = new maplibregl.ScaleControl({
          maxWidth: message.options.maxWidth,
          unit: message.options.unit,
        });
        map.addControl(scaleControl, message.options.position);
        map.controls.push({ type: "scale", control: scaleControl });
      } else if (message.type === "add_reset_control") {
        const resetControl = document.createElement("button");
        resetControl.className = "maplibregl-ctrl-icon maplibregl-ctrl-reset";
        resetControl.type = "button";
        resetControl.setAttribute("aria-label", "Reset");
        resetControl.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg>';
        resetControl.style.cssText = "display:flex;justify-content:center;align-items:center;cursor:pointer;";

        const resetContainer = document.createElement("div");
        resetContainer.className = "maplibregl-ctrl maplibregl-ctrl-group";
        resetContainer.appendChild(resetControl);

        const initialView = {
          center: map.getCenter(),
          zoom: map.getZoom(),
          pitch: map.getPitch(),
          bearing: map.getBearing(),
          animate: message.animate,
        };

        if (message.duration) {
          initialView.duration = message.duration;
        }

        resetControl.onclick = function () {
          map.easeTo(initialView);
        };

        const resetControlObj = {
          onAdd: function () {
            return resetContainer;
          },
          onRemove: function () {
            resetContainer.parentNode.removeChild(resetContainer);
          },
        };

        map.addControl(resetControlObj, message.position);

        map.controls.push({ type: "reset", control: resetControlObj });
      } else if (message.type === "add_screenshot_control") {
        const screenshotControlObj = createScreenshotControl(map, message.options, true);
        map.addControl(screenshotControlObj, message.options.position || "top-right");
        map.controls.push({ type: "screenshot", control: screenshotControlObj });
      } else if (message.type === "add_geolocate_control") {
        const geolocate = new maplibregl.GeolocateControl({
          positionOptions: message.options.positionOptions,
          trackUserLocation: message.options.trackUserLocation,
          showAccuracyCircle: message.options.showAccuracyCircle,
          showUserLocation: message.options.showUserLocation,
          showUserHeading: message.options.showUserHeading,
          fitBoundsOptions: message.options.fitBoundsOptions,
        });
        map.addControl(geolocate, message.options.position);
        map.controls.push({ type: "geolocate", control: geolocate });

        if (HTMLWidgets.shinyMode) {
          geolocate.on("geolocate", function (event) {
            Shiny.setInputValue(el.id + "_geolocate", {
              coords: event.coords,
              time: new Date(),
            });
          });

          geolocate.on("trackuserlocationstart", function () {
            Shiny.setInputValue(el.id + "_geolocate_tracking", {
              status: "start",
              time: new Date(),
            });
          });

          geolocate.on("trackuserlocationend", function () {
            Shiny.setInputValue(el.id + "_geolocate_tracking", {
              status: "end",
              time: new Date(),
            });
          });

          geolocate.on("error", function (error) {
            if (error.error.code === 1) {
              Shiny.setInputValue(el.id + "_geolocate_error", {
                message: "Location permission denied",
                time: new Date(),
              });
            }
          });
        }
      } else if (message.type === "add_geocoder_control") {
        const provider = message.options.provider || "osm";
        let geocoder;

        if (provider === "maptiler") {
          // MapTiler geocoder
          const maptilerOptions = {
            apiKey: message.options.api_key,
            maplibregl: maplibregl,
            ...message.options,
          };

          // Create MapTiler geocoder
          geocoder = new maplibreglMaptilerGeocoder.GeocodingControl(
            maptilerOptions,
          );
        } else {
          // OSM/Nominatim geocoder (default)
          const geocoderApi = {
            forwardGeocode: async (config) => {
              const features = [];
              try {
                const request = `https://nominatim.openstreetmap.org/search?q=${
                  config.query
                }&format=geojson&polygon_geojson=1&addressdetails=1`;
                const response = await fetch(request);
                const geojson = await response.json();
                for (const feature of geojson.features) {
                  const center = [
                    feature.bbox[0] + (feature.bbox[2] - feature.bbox[0]) / 2,
                    feature.bbox[1] + (feature.bbox[3] - feature.bbox[1]) / 2,
                  ];
                  const point = {
                    type: "Feature",
                    geometry: {
                      type: "Point",
                      coordinates: center,
                    },
                    place_name: feature.properties.display_name,
                    properties: feature.properties,
                    text: feature.properties.display_name,
                    place_type: ["place"],
                    center,
                  };
                  features.push(point);
                }
              } catch (e) {
                console.error(`Failed to forwardGeocode with error: ${e}`);
              }

              return {
                features,
              };
            },
          };
          geocoder = new MaplibreGeocoder(geocoderApi, {
            maplibregl: maplibregl,
            placeholder: message.options.placeholder,
            collapsed: message.options.collapsed,
          });
        }

        map.addControl(geocoder, message.options.position);
        map.controls.push({ type: "geocoder", control: geocoder });

        // Apply CSS fix for MapTiler geocoder to prevent cutoff
        if (provider === "maptiler") {
          setTimeout(() => {
            const controlContainer = document.querySelector(
              ".maplibregl-ctrl-geocoder",
            );
            if (controlContainer) {
              controlContainer.style.maxWidth = "300px";
              controlContainer.style.width = "auto";
            }
          }, 100);
        }

        // Handle geocoder results in Shiny mode
        if (HTMLWidgets.shinyMode) {
          if (provider === "maptiler") {
            // MapTiler uses different event names
            geocoder.on("pick", function (e) {
              Shiny.setInputValue(data.id + "_geocoder", {
                result: e,
                time: new Date(),
              });
            });
          } else {
            // OSM geocoder
            geocoder.on("result", function (e) {
              Shiny.setInputValue(data.id + "_geocoder", {
                result: e,
                time: new Date(),
              });
            });
          }
        }
      } else if (message.type === "add_layers_control") {
        const layersControl = document.createElement("div");
        layersControl.id = message.control_id;
        layersControl.className = message.collapsible
          ? "layers-control collapsible"
          : "layers-control";
        layersControl.style.position = "absolute";

        // Set the position correctly
        const position = message.position || "top-left";
        if (position === "top-left") {
          layersControl.style.top = (message.margin_top || 10) + "px";
          layersControl.style.left = (message.margin_left || 10) + "px";
        } else if (position === "top-right") {
          layersControl.style.top = (message.margin_top || 10) + "px";
          layersControl.style.right = (message.margin_right || 10) + "px";
        } else if (position === "bottom-left") {
          layersControl.style.bottom = (message.margin_bottom || 10) + "px";
          layersControl.style.left = (message.margin_left || 10) + "px";
        } else if (position === "bottom-right") {
          layersControl.style.bottom = (message.margin_bottom || 40) + "px";
          layersControl.style.right = (message.margin_right || 10) + "px";
        }

        // Apply custom colors if provided
        if (message.custom_colors) {
          const colors = message.custom_colors;

          // Create a style element for custom colors
          const styleEl = document.createElement("style");
          let css = "";

          if (colors.background) {
            css += `#${message.control_id} { background-color: ${colors.background}; }\n`;
          }

          if (colors.text) {
            css += `#${message.control_id} a { color: ${colors.text}; }\n`;
          }

          if (colors.active) {
            css += `#${message.control_id} a.active { background-color: ${colors.active}; }\n`;
            css += `#${message.control_id} .toggle-button { background-color: ${colors.active}; }\n`;
          }

          if (colors.activeText) {
            css += `#${message.control_id} a.active { color: ${colors.activeText}; }\n`;
            css += `#${message.control_id} .toggle-button { color: ${colors.activeText}; }\n`;
          }

          if (colors.hover) {
            css += `#${message.control_id} a:hover { background-color: ${colors.hover}; }\n`;
            css += `#${message.control_id} .toggle-button:hover { background-color: ${colors.hover}; }\n`;
          }

          styleEl.textContent = css;
          document.head.appendChild(styleEl);
        }

        const layersList = document.createElement("div");
        layersList.className = "layers-list";
        layersControl.appendChild(layersList);

        let layers = message.layers || [];
        let layersConfig = message.layers_config;

        // If we have a layers_config, use that; otherwise fall back to original behavior
        if (layersConfig && Array.isArray(layersConfig)) {
          layersConfig.forEach((config, index) => {
            const link = document.createElement("a");
            // Ensure config.ids is always an array
            const layerIds = Array.isArray(config.ids)
              ? config.ids
              : [config.ids];
            link.id = layerIds.join("-");
            link.href = "#";
            link.textContent = config.label;
            link.setAttribute("data-layer-ids", JSON.stringify(layerIds));
            link.setAttribute("data-layer-type", config.type);

            // Check if the first layer's visibility is set to "none" initially
            const firstLayerId = layerIds[0];
            const initialVisibility = map.getLayoutProperty(
              firstLayerId,
              "visibility",
            );
            link.className = initialVisibility === "none" ? "" : "active";

            // Also hide any associated legends if the layer is initially hidden
            if (initialVisibility === "none") {
              layerIds.forEach((layerId) => {
                const associatedLegends = document.querySelectorAll(
                  `.mapboxgl-legend[data-layer-id="${layerId}"]`,
                );
                associatedLegends.forEach((legend) => {
                  legend.style.display = "none";
                });
              });
            }

            // Show or hide layer(s) when the toggle is clicked
            link.onclick = function (e) {
              e.preventDefault();
              e.stopPropagation();

              const layerIds = JSON.parse(this.getAttribute("data-layer-ids"));
              const firstLayerId = layerIds[0];
              const visibility = map.getLayoutProperty(
                firstLayerId,
                "visibility",
              );

              // Toggle visibility for all layer IDs in the group
              if (visibility === "visible") {
                layerIds.forEach((layerId) => {
                  map.setLayoutProperty(layerId, "visibility", "none");
                  // Hide associated legends
                  const associatedLegends = document.querySelectorAll(
                    `.mapboxgl-legend[data-layer-id="${layerId}"]`,
                  );
                  associatedLegends.forEach((legend) => {
                    legend.style.display = "none";
                  });
                });
                this.className = "";
              } else {
                layerIds.forEach((layerId) => {
                  map.setLayoutProperty(layerId, "visibility", "visible");
                  // Show associated legends
                  const associatedLegends = document.querySelectorAll(
                    `.mapboxgl-legend[data-layer-id="${layerId}"]`,
                  );
                  associatedLegends.forEach((legend) => {
                    legend.style.display = "";
                  });
                });
                this.className = "active";
              }
            };

            layersList.appendChild(link);
          });
        } else {
          // Fallback to original behavior for simple layer arrays
          // Ensure layers is always an array
          if (!Array.isArray(layers)) {
            layers = [layers];
          }

          layers.forEach((layerId, index) => {
            const link = document.createElement("a");
            link.id = layerId;
            link.href = "#";
            link.textContent = layerId;

            // Check if the layer visibility is set to "none" initially
            const initialVisibility = map.getLayoutProperty(
              layerId,
              "visibility",
            );
            link.className = initialVisibility === "none" ? "" : "active";

            // Also hide any associated legends if the layer is initially hidden
            if (initialVisibility === "none") {
              const associatedLegends = document.querySelectorAll(
                `.mapboxgl-legend[data-layer-id="${layerId}"]`,
              );
              associatedLegends.forEach((legend) => {
                legend.style.display = "none";
              });
            }

            link.onclick = function (e) {
              const clickedLayer = this.textContent;
              e.preventDefault();
              e.stopPropagation();

              const visibility = map.getLayoutProperty(
                clickedLayer,
                "visibility",
              );

              if (visibility === "visible") {
                map.setLayoutProperty(clickedLayer, "visibility", "none");
                this.className = "";

                // Hide associated legends
                const associatedLegends = document.querySelectorAll(
                  `.mapboxgl-legend[data-layer-id="${clickedLayer}"]`,
                );
                associatedLegends.forEach((legend) => {
                  legend.style.display = "none";
                });
              } else {
                this.className = "active";
                map.setLayoutProperty(clickedLayer, "visibility", "visible");

                // Show associated legends
                const associatedLegends = document.querySelectorAll(
                  `.mapboxgl-legend[data-layer-id="${clickedLayer}"]`,
                );
                associatedLegends.forEach((legend) => {
                  legend.style.display = "";
                });
              }
            };

            layersList.appendChild(link);
          });
        }

        if (message.collapsible) {
          const toggleButton = document.createElement("div");
          toggleButton.className = "toggle-button";

          // Use stacked layers icon instead of text if requested
          if (message.use_icon) {
            // Add icon-only class to the control for compact styling
            layersControl.classList.add("icon-only");

            // More GIS-like layers stack icon
            toggleButton.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polygon points="12 2 2 7 12 12 22 7 12 2"></polygon>
                            <polyline points="2 17 12 22 22 17"></polyline>
                            <polyline points="2 12 12 17 22 12"></polyline>
                        </svg>`;
            toggleButton.style.display = "flex";
            toggleButton.style.alignItems = "center";
            toggleButton.style.justifyContent = "center";
          } else {
            toggleButton.textContent = "Layers";
          }

          toggleButton.onclick = function () {
            layersControl.classList.toggle("open");
          };
          layersControl.insertBefore(toggleButton, layersList);
        }

        const mapContainer = document.getElementById(data.id);
        if (mapContainer) {
          mapContainer.appendChild(layersControl);
        } else {
          console.error(`Cannot find map container with ID ${data.id}`);
        }
      } else if (message.type === "clear_legend") {
        if (message.ids && Array.isArray(message.ids)) {
          message.ids.forEach((id) => {
            const legend = document.querySelector(
              `#${data.id} div[id="${id}"]`,
            );
            if (legend) {
              legend.remove();
            }
            // Remove from legend state
            delete layerState.legends[id];
          });
        } else if (message.ids) {
          const legend = document.querySelector(
            `#${data.id} div[id="${message.ids}"]`,
          );
          if (legend) {
            legend.remove();
          }
          // Remove from legend state
          delete layerState.legends[message.ids];
        } else {
          const existingLegends = document.querySelectorAll(
            `#${data.id} .mapboxgl-legend`,
          );
          existingLegends.forEach((legend) => {
            legend.remove();
          });

          // Clear all legend state
          layerState.legends = {};
        }
      } else if (message.type === "clear_controls") {
        // If no specific controls specified, clear all
        if (!message.controls || message.controls.length === 0) {
          map.controls.forEach((controlObj) => {
            if (controlObj.control) {
              map.removeControl(controlObj.control);
            }
          });
          map.controls = [];

          const layersControl = document.querySelector(
            `#${data.id} .layers-control`,
          );
          if (layersControl) {
            layersControl.remove();
          }

          // Remove globe minimap if it exists
          const globeMinimap = document.querySelector(
            ".mapboxgl-ctrl-globe-minimap",
          );
          if (globeMinimap) {
            globeMinimap.remove();
          }
        } else {
          // Clear specific controls
          const controlsToRemove = Array.isArray(message.controls)
            ? message.controls
            : [message.controls];

          map.controls = map.controls.filter((controlObj) => {
            if (controlsToRemove.includes(controlObj.type)) {
              if (controlObj.control) {
                map.removeControl(controlObj.control);
              }
              return false; // Remove from array
            }
            return true; // Keep in array
          });

          // Handle special controls that aren't in the controls array
          controlsToRemove.forEach((controlType) => {
            if (controlType === "layers") {
              const layersControl = document.querySelector(
                `#${data.id} .layers-control`,
              );
              if (layersControl) {
                layersControl.remove();
              }
            } else if (controlType === "globe_minimap") {
              const globeMinimap = document.querySelector(
                ".mapboxgl-ctrl-globe-minimap",
              );
              if (globeMinimap) {
                globeMinimap.remove();
              }
            } else if (controlType === "draw") {
              // Hide measurement box when draw control is cleared
              const measurementBox = document.getElementById(
                `measurement-box-${map.getContainer().id}`,
              );
              if (measurementBox) {
                measurementBox.style.display = "none";
              }
            }
          });
        }
      } else if (message.type === "move_layer") {
        if (map.getLayer(message.layer)) {
          if (message.before) {
            map.moveLayer(message.layer, message.before);
          } else {
            map.moveLayer(message.layer);
          }
        } else {
          console.error("Layer not found:", message.layer);
        }
      } else if (message.type === "add_image") {
        const mapId = map.getContainer().id;

        // Helper function to actually add the image
        const doAddImage = function(imageId, url, options) {
          // Register the image for re-adding after style changes
          registerUserImage(mapId, imageId, url, options);

          map
            .loadImage(url)
            .then((image) => {
              if (!map.hasImage(imageId)) {
                map.addImage(imageId, image.data, options);
                console.log("[MapGL Debug] Added image via proxy:", imageId);
              }
            })
            .catch((error) => {
              console.error("Error loading image:", error);
            });
        };

        if (Array.isArray(message.images)) {
          message.images.forEach(function (imageInfo) {
            queueOrExecute(mapId, function() {
              doAddImage(imageInfo.id, imageInfo.url, imageInfo.options);
            });
          });
        } else if (message.url) {
          queueOrExecute(mapId, function() {
            doAddImage(message.imageId, message.url, message.options);
          });
        } else {
          console.error("Invalid image data:", message);
        }
      } else if (message.type === "set_tooltip") {
        const layerId = message.layer;
        const newTooltipProperty = message.tooltip;

        // Track tooltip state
        layerState.tooltips[layerId] = newTooltipProperty;

        // If there's an active tooltip open, remove it first
        if (window._activeTooltip) {
          window._activeTooltip.remove();
          delete window._activeTooltip;
        }

        // Remove old handlers if any
        if (window._mapboxHandlers && window._mapboxHandlers[layerId]) {
          const handlers = window._mapboxHandlers[layerId];
          if (handlers.mousemove) {
            map.off("mousemove", layerId, handlers.mousemove);
          }
          if (handlers.mouseleave) {
            map.off("mouseleave", layerId, handlers.mouseleave);
          }
          delete window._mapboxHandlers[layerId];
        }

        // Create a new tooltip popup
        const tooltip = new maplibregl.Popup({
          closeButton: false,
          closeOnClick: false,
          maxWidth: "400px",
        });

        // Define new handlers referencing the updated tooltip property
        const mouseMoveHandler = function (e) {
          onMouseMoveTooltip(e, map, tooltip, newTooltipProperty, layerId);
        };
        const mouseLeaveHandler = function () {
          onMouseLeaveTooltip(map, tooltip);
        };

        // Add the new event handlers
        map.on("mousemove", layerId, mouseMoveHandler);
        map.on("mouseleave", layerId, mouseLeaveHandler);

        // Store these handlers so we can remove/update them in the future
        if (!window._mapboxHandlers) {
          window._mapboxHandlers = {};
        }
        window._mapboxHandlers[layerId] = {
          mousemove: mouseMoveHandler,
          mouseleave: mouseLeaveHandler,
        };
      } else if (message.type === "set_popup") {
        const layerId = message.layer;
        const newPopupProperty = message.popup;

        // Track popup state
        layerState.popups[layerId] = newPopupProperty;

        // Remove any existing popup for this layer
        if (window._mapboxPopups && window._mapboxPopups[layerId]) {
          window._mapboxPopups[layerId].remove();
          delete window._mapboxPopups[layerId];
        }

        // Remove old click handler if any
        if (
          window._mapboxClickHandlers &&
          window._mapboxClickHandlers[layerId]
        ) {
          map.off("click", layerId, window._mapboxClickHandlers[layerId]);
          delete window._mapboxClickHandlers[layerId];
        }

        // Remove old hover handlers for cursor change
        map.off("mouseenter", layerId);
        map.off("mouseleave", layerId);

        // Create new click handler
        const clickHandler = function (e) {
          onClickPopup(e, map, newPopupProperty, layerId);
        };

        // Add the new event handler
        map.on("click", layerId, clickHandler);

        // Change cursor to pointer when hovering over the layer
        map.on("mouseenter", layerId, function () {
          map.getCanvas().style.cursor = "pointer";
        });

        // Change cursor back to default when leaving the layer
        map.on("mouseleave", layerId, function () {
          map.getCanvas().style.cursor = "";
        });

        // Store handler reference
        if (!window._mapboxClickHandlers) {
          window._mapboxClickHandlers = {};
        }
        window._mapboxClickHandlers[layerId] = clickHandler;
      } else if (message.type === "set_source") {
        const layerId = message.layer;
        const newData = message.source;
        const layerObject = map.getLayer(layerId);

        if (!layerObject) {
          console.error("Layer not found: ", layerId);
          return;
        }

        const sourceId = layerObject.source;
        const sourceObject = map.getSource(sourceId);

        if (!sourceObject) {
          console.error("Source not found: ", sourceId);
          return;
        }

        // Update the geojson data
        sourceObject.setData(newData);
      } else if (message.type === "set_projection") {
        if (map.loaded()) {
          const projection =
            typeof message.projection === "string"
              ? { type: message.projection }
              : message.projection;

          try {
            map.setProjection(projection);
          } catch (e) {
            console.error("Failed to set projection:", e);
          }
        } else {
          console.error("Map not loaded yet");
        }
      } else if (message.type === "add_globe_minimap") {
        const globeMinimapOptions = {
          globeSize: message.options.globe_size || 100,
          landColor: message.options.land_color || "#404040",
          waterColor: message.options.water_color || "#090909",
          markerColor: message.options.marker_color || "#1da1f2",
          markerSize: message.options.marker_size || 2,
        };
        const globeMinimap = new GlobeMinimap(globeMinimapOptions);
        map.addControl(globeMinimap, message.position || "bottom-left");
        map.controls.push({ type: "globe_minimap", control: globeMinimap });
      } else if (message.type === "add_globe_control") {
        const globeControl = new maplibregl.GlobeControl();
        map.addControl(globeControl, message.position);
        map.controls.push({ type: "globe", control: globeControl });
      } else if (message.type === "add_custom_control") {
        const controlOptions = message.options;
        const customControlContainer = document.createElement("div");

        if (controlOptions.className) {
          customControlContainer.className = controlOptions.className;
        } else {
          customControlContainer.className =
            "maplibregl-ctrl maplibregl-ctrl-group";
        }

        customControlContainer.innerHTML = controlOptions.html;

        const customControl = {
          onAdd: function () {
            return customControlContainer;
          },
          onRemove: function () {
            if (customControlContainer.parentNode) {
              customControlContainer.parentNode.removeChild(
                customControlContainer,
              );
            }
          },
        };

        map.addControl(customControl, controlOptions.position || "top-right");
        map.controls.push({ type: message.control_id, control: customControl });
      }
    }
  });
}
</script>
<p><style type="text/css">.layers-control {
background: #fff;
position: absolute;
z-index: 1;
border-radius: 4px;
width: 120px;
border: 1px solid rgba(0, 0, 0, 0.15);
font-family: "Open Sans", sans-serif;
margin: 0px;
box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
overflow: hidden;
transition: all 0.2s ease-in-out;
}
.layers-control a {
font-size: 13px;
color: #404040;
display: block;
margin: 0;
padding: 10px;
text-decoration: none;
border-bottom: 1px solid rgba(0, 0, 0, 0.1);
text-align: center;
transition: all 0.15s ease-in-out;
font-weight: normal;
}
.layers-control a:last-child {
border: none;
}
.layers-control a:hover {
background-color: #f8f8f8;
color: #1a1a1a;
}
.layers-control a.active {
background-color: #4a90e2;
color: #ffffff;
font-weight: 500;
}
.layers-control a.active:hover {
background: #3b7ed2;
}
.layers-control .toggle-button {
display: none;
background: #4a90e2;
color: #ffffff;
text-align: center;
cursor: pointer;
padding: 8px 0;
border-radius: 4px 4px 0 0;
font-weight: 500;
letter-spacing: 0.3px;
box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.05) inset;
transition: all 0.15s ease-in-out;
}
.layers-control .toggle-button:hover {
background: #3b7ed2;
}
.layers-control .layers-list {
display: block;
}
.layers-control.collapsible .toggle-button {
display: block;
border-bottom: 1px solid rgba(0, 0, 0, 0.25);
}
.layers-control.collapsible .layers-list {
display: none;
opacity: 0;
max-height: 0;
transition:
opacity 0.25s ease,
max-height 0.25s ease;
}
.layers-control.collapsible.open .layers-list {
display: block;
opacity: 1;
max-height: 500px; 
}

.layers-control.collapsible.icon-only {
width: auto;
min-width: 36px;
border-radius: 4px;
box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
transform: translateZ(
0
); 
}
.layers-control.collapsible.icon-only .toggle-button {
border-radius: 4px;
padding: 8px;
width: 36px;
height: 36px;
box-sizing: border-box;
margin: 0;
border-bottom: none;
display: flex;
align-items: center;
justify-content: center;
box-shadow: none;
}
.layers-control.collapsible.icon-only.open {
width: 120px;
box-shadow: 0 3px 10px rgba(0, 0, 0, 0.25);
}
.layers-control.collapsible.icon-only.open .toggle-button {
border-radius: 4px 4px 0 0;
border-bottom: 1px solid rgba(0, 0, 0, 0.1);
width: 100%;
}
</style></p>

</head>
<body style="background-color: white;">
<div id="htmlwidget_container">
  <div id="htmlwidget-2276687c6c628a94a5b1" style="width:100%;height:500px;" class="maplibregl html-widget"></div>
</div>
<script type="application/json" data-for="htmlwidget-2276687c6c628a94a5b1">{"x":{"style":"https://basemaps.cartocdn.com/gl/voyager-gl-style/style.json","center":[-80.40227400321464,27.07679827052297],"zoom":10,"bearing":0,"pitch":0,"projection":"globe","additional_params":[],"navigation_control":{"show_compass":true,"show_zoom":true,"visualize_pitch":false,"position":"top-right","orientation":"vertical"},"scale_control":{"position":"bottom-left","unit":"imperial","maxWidth":100},"fullscreen_control":{"enabled":true,"position":"top-right"},"draw_control":{"enabled":true,"position":"top-left","freehand":true,"simplify_freehand":false,"rectangle":false,"radius":false,"orientation":"vertical","options":[],"source":null,"download_button":false,"download_filename":"drawn-features","show_measurements":false,"measurement_units":"both","styling":{"point_color":"#3bb2d0","line_color":"#3bb2d0","fill_color":"#3bb2d0","fill_opacity":0.1,"active_color":"#fbb03b","vertex_radius":5,"line_width":2}},"layers":[{"id":"routes_C1","type":"line","source":{"type":"geojson","data":{"type":"FeatureCollection","features":[{"type":"Feature","properties":{"ID":45,"Name":"Federal Hwy","From":"Jonathan Dickinson Wy","To":"Dixie Hwy","Context_Class":"C1","Service_Capacity":3055.0,"AADT_2024":20439.0,"Peak_Hour_Vol_2024":989.0,"LOS_2024":"A","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C2","Service_Capacity_2023":2910.0,"AADT_2023":19846.0,"Peak_Hour_Vol_2023":916.2898200000002,"LOS_2023":"A/B","Growth_Rate_2023":0.005,"U_ID":"105-2","color":"#FF073A","width":3.8369952994135748,"los_color":"#39FF14","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FF073A; margin-bottom: 4px;'>Federal Hwy (ID: 45)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Jonathan Dickinson Wy  Dixie Hwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C1<br><span style='color: #71717a;'>AADT 2024: \u003c/span>20,439<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>989<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #39FF14; font-weight: bold;'>A\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #45\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FF073A; margin: 4px 0;'>Federal Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Jonathan Dickinson Wy  Dixie Hwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C1\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>3055\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FF073A;'>20,439\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>989\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #39FF14;'>A\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.10894012451172,27.02446937561035],[-80.1083755493164,27.022930145263672],[-80.10824584960938,27.022600173950195],[-80.10784149169922,27.021638870239258],[-80.10689544677734,27.019399642944336],[-80.10546875,27.01603889465332],[-80.10260009765625,27.00922966003418],[-80.10228729248047,27.00848960876465],[-80.10096740722656,27.00543975830078],[-80.10055541992188,27.0043888092041],[-80.0998764038086,27.002819061279297],[-80.0992202758789,27.001258850097656],[-80.09756469726563,26.997360229492188],[-80.09700012207031,26.996009826660156],[-80.09680938720703,26.996089935302734],[-80.09684753417969,26.99618911743164],[-80.0980453491211,26.999019622802734],[-80.09838104248047,26.999799728393555],[-80.09935760498047,27.00208854675293],[-80.10065460205078,27.005218505859375],[-80.103759765625,27.01255989074707],[-80.10432434082031,27.0137996673584],[-80.1046371459961,27.014549255371094],[-80.10499572753906,27.01538848876953],[-80.10595703125,27.017669677734375],[-80.1065444946289,27.0190486907959],[-80.107666015625,27.02174949645996],[-80.10842895507813,27.023609161376953],[-80.10872650146484,27.02448844909668],[-80.10894012451172,27.02515983581543],[-80.1094970703125,27.02699851989746],[-80.1103286743164,27.029748916625977],[-80.11124420166016,27.032718658447266],[-80.11151885986328,27.033599853515625],[-80.11178588867188,27.034460067749023],[-80.11190032958984,27.034879684448242],[-80.11255645751953,27.037109375],[-80.11331939697266,27.03963851928711],[-80.11351776123047,27.040258407592773],[-80.11392974853516,27.041099548339844],[-80.11442565917969,27.04184913635254],[-80.11470031738281,27.042179107666016],[-80.11486053466797,27.042369842529297],[-80.11521911621094,27.042739868164063],[-80.11553955078125,27.04302978515625],[-80.11589050292969,27.043319702148438],[-80.1165542602539,27.04378890991211],[-80.11705780029297,27.04408836364746],[-80.11937713623047,27.045499801635742],[-80.1198501586914,27.045780181884766]]}},{"type":"Feature","properties":{"ID":121,"Name":"Martin Hwy","From":"Fox Brown Rd","To":"Allapattah Rd","Context_Class":"C1","Service_Capacity":730.0,"AADT_2024":4725.0,"Peak_Hour_Vol_2024":229.0,"LOS_2024":"A","Growth_Rate_2024":0.051,"Comparison_2023":null,"Context_Class_2023":"C2","Service_Capacity_2023":730.0,"AADT_2023":4336.0,"Peak_Hour_Vol_2023":189.39648000000005,"LOS_2023":"A/B","Growth_Rate_2023":0.04193318771881582,"U_ID":"36","color":"#FF073A","width":2.393379369478342,"los_color":"#39FF14","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FF073A; margin-bottom: 4px;'>Martin Hwy (ID: 121)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Fox Brown Rd  Allapattah Rd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C1<br><span style='color: #71717a;'>AADT 2024: \u003c/span>4,725<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>229<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #39FF14; font-weight: bold;'>A\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #121\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FF073A; margin: 4px 0;'>Martin Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Fox Brown Rd  Allapattah Rd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C1\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>730\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FF073A;'>4,725\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>229\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #39FF14;'>A\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>5.1%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.5543212890625,27.16206932067871],[-80.547119140625,27.16206932067871],[-80.54524993896484,27.162059783935547],[-80.54227447509766,27.162078857421875],[-80.5387954711914,27.162078857421875],[-80.5275650024414,27.162029266357422],[-80.51895141601563,27.162010192871094],[-80.51561737060547,27.161989212036133],[-80.50434875488281,27.162010192871094],[-80.49723815917969,27.162010192871094],[-80.49380493164063,27.161998748779297],[-80.48583984375,27.161958694458008],[-80.48182678222656,27.161949157714844]]}}]},"generateId":true},"source_layer":null,"paint":{"line-color":"#FF073A","line-opacity":0.85,"line-translate-anchor":"map","line-width":4},"layout":{"visibility":"visible"},"slot":null,"minzoom":null,"maxzoom":null,"popup":"popup_html","tooltip":"tooltip_html","hover_options":null,"before_id":null,"filter":null},{"id":"routes_C2","type":"line","source":{"type":"geojson","data":{"type":"FeatureCollection","features":[{"type":"Feature","properties":{"ID":1,"Name":"96th St","From":"Citrus Blvd","To":"Bobcat Dr","Context_Class":"C2","Service_Capacity":585.0,"AADT_2024":4342.0,"Peak_Hour_Vol_2024":210.0,"LOS_2024":"B","Growth_Rate_2024":0.025,"Comparison_2023":null,"Context_Class_2023":"C2","Service_Capacity_2023":730.0,"AADT_2023":4677.0,"Peak_Hour_Vol_2023":275.4753,"LOS_2023":"C","Growth_Rate_2023":0.0501897046509685,"U_ID":"32","color":"#00F0FF","width":2.3581938723951557,"los_color":"#39FF14","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #00F0FF; margin-bottom: 4px;'>96th St (ID: 1)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Citrus Blvd  Bobcat Dr\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C2<br><span style='color: #71717a;'>AADT 2024: \u003c/span>4,342<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>210<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #39FF14; font-weight: bold;'>B\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #1\u003c/div><div style='font-size: 14px; font-weight: 600; color: #00F0FF; margin: 4px 0;'>96th St\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Citrus Blvd  Bobcat Dr\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C2\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>585\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #00F0FF;'>4,342\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>210\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #39FF14;'>B\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>2.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.31922149658203,27.088428497314453],[-80.31363677978516,27.088369369506836],[-80.30696868896484,27.088289260864258],[-80.30626678466797,27.08827018737793],[-80.30587768554688,27.088218688964844],[-80.30488586425781,27.08807945251465],[-80.30426788330078,27.0880184173584],[-80.3028793334961,27.08799934387207],[-80.30052947998047,27.087968826293945],[-80.29966735839844,27.08795928955078],[-80.29898071289063,27.088008880615234],[-80.29808807373047,27.088138580322266],[-80.29741668701172,27.088178634643555],[-80.29696655273438,27.08819007873535]]}},{"type":"Feature","properties":{"ID":3,"Name":"Allapattah Rd","From":"Warfield Blvd","To":"Martin Hwy","Context_Class":"C2","Service_Capacity":585.0,"AADT_2024":2663.0,"Peak_Hour_Vol_2024":129.0,"LOS_2024":"A","Growth_Rate_2024":0.071,"Comparison_2023":null,"Context_Class_2023":"C2","Service_Capacity_2023":730.0,"AADT_2023":2436.0,"Peak_Hour_Vol_2023":116.78184,"LOS_2023":"A/B","Growth_Rate_2023":0.06521932806621744,"U_ID":"12","color":"#00F0FF","width":2.2039472676884446,"los_color":"#39FF14","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #00F0FF; margin-bottom: 4px;'>Allapattah Rd (ID: 3)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Warfield Blvd  Martin Hwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C2<br><span style='color: #71717a;'>AADT 2024: \u003c/span>2,663<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>129<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #39FF14; font-weight: bold;'>A\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #3\u003c/div><div style='font-size: 14px; font-weight: 600; color: #00F0FF; margin: 4px 0;'>Allapattah Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Warfield Blvd  Martin Hwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C2\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>585\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #00F0FF;'>2,663\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>129\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #39FF14;'>A\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>7.1%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.4823989868164,27.030488967895508],[-80.48236083984375,27.030479431152344],[-80.48234558105469,27.03219985961914],[-80.48233795166016,27.035049438476563],[-80.48233032226563,27.03714942932129],[-80.48228454589844,27.043190002441406],[-80.48223876953125,27.054088592529297],[-80.48213958740234,27.07257843017578],[-80.48204803466797,27.081619262695313],[-80.48200988769531,27.083778381347656],[-80.48198699951172,27.0869197845459],[-80.48191833496094,27.089908599853516],[-80.48186492919922,27.095399856567383],[-80.48181915283203,27.098119735717773],[-80.4818115234375,27.100210189819336],[-80.48171997070313,27.10883903503418],[-80.48167419433594,27.1105899810791],[-80.48165130615234,27.113759994506836],[-80.48162078857422,27.11648941040039],[-80.48160552978516,27.117639541625977],[-80.48160552978516,27.117908477783203],[-80.48163604736328,27.11804962158203],[-80.48167419433594,27.11819839477539],[-80.48179626464844,27.118499755859375],[-80.48188018798828,27.118728637695313],[-80.48191833496094,27.11897850036621],[-80.48191833496094,27.119579315185547],[-80.48191833496094,27.123178482055664],[-80.48191833496094,27.129228591918945],[-80.48191833496094,27.132349014282227],[-80.48188018798828,27.133289337158203],[-80.48185729980469,27.134109497070313],[-80.48185729980469,27.13745880126953],[-80.48184967041016,27.140138626098633],[-80.48181915283203,27.14851951599121],[-80.48173522949219,27.152318954467773],[-80.48175048828125,27.15424919128418],[-80.48178100585938,27.15730857849121],[-80.48182678222656,27.161088943481445],[-80.48182678222656,27.161949157714844]]}},{"type":"Feature","properties":{"ID":4,"Name":"Allapattah Rd","From":"Martin Hwy","To":"St Lucie County","Context_Class":"C2","Service_Capacity":585.0,"AADT_2024":2325.0,"Peak_Hour_Vol_2024":113.0,"LOS_2024":"A","Growth_Rate_2024":0.054,"Comparison_2023":null,"Context_Class_2023":"C2","Service_Capacity_2023":730.0,"AADT_2023":2174.0,"Peak_Hour_Vol_2023":125.59198,"LOS_2023":"A/B","Growth_Rate_2023":0.05037535008472282,"U_ID":"13","color":"#00F0FF","width":2.172895836842186,"los_color":"#39FF14","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #00F0FF; margin-bottom: 4px;'>Allapattah Rd (ID: 4)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Martin Hwy  St Lucie County\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C2<br><span style='color: #71717a;'>AADT 2024: \u003c/span>2,325<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>113<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #39FF14; font-weight: bold;'>A\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #4\u003c/div><div style='font-size: 14px; font-weight: 600; color: #00F0FF; margin: 4px 0;'>Allapattah Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Martin Hwy  St Lucie County\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C2\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>585\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #00F0FF;'>2,325\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>113\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #39FF14;'>A\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>5.4%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.48182678222656,27.161949157714844],[-80.48182678222656,27.16061019897461],[-80.48179626464844,27.158748626708984],[-80.48173522949219,27.152679443359375],[-80.48175811767578,27.151418685913086],[-80.48181915283203,27.14851951599121],[-80.4818344116211,27.143159866333008],[-80.48184967041016,27.14004898071289],[-80.48185729980469,27.13469886779785],[-80.48188018798828,27.133289337158203],[-80.48191833496094,27.132349014282227],[-80.48191833496094,27.131359100341797],[-80.48191833496094,27.129058837890625],[-80.48191833496094,27.127439498901367],[-80.48191833496094,27.123720169067383],[-80.48192596435547,27.1204891204834],[-80.48191833496094,27.119089126586914],[-80.48189544677734,27.118860244750977],[-80.48185729980469,27.118648529052734],[-80.48167419433594,27.11819839477539],[-80.48160552978516,27.117908477783203],[-80.48162078857422,27.11656951904297],[-80.48167419433594,27.1105899810791],[-80.48173522949219,27.107479095458984],[-80.4817886352539,27.102279663085938],[-80.48181915283203,27.09840965270996],[-80.48185729980469,27.096248626708984],[-80.48189544677734,27.09161949157715],[-80.48191833496094,27.089908599853516],[-80.48194885253906,27.088489532470703],[-80.48198699951172,27.08708953857422],[-80.48199462890625,27.08618927001953],[-80.48200988769531,27.083778381347656],[-80.48202514648438,27.08255958557129],[-80.4820785522461,27.079139709472656],[-80.48210144042969,27.077699661254883],[-80.48212432861328,27.0733585357666],[-80.48217010498047,27.066669464111328],[-80.48221588134766,27.05678939819336],[-80.48224639892578,27.05143928527832],[-80.48233032226563,27.037710189819336],[-80.48234558105469,27.03219985961914],[-80.48236083984375,27.030479431152344],[-80.48223114013672,27.03044891357422],[-80.48199462890625,27.0303897857666],[-80.4814682006836,27.030208587646484],[-80.48101806640625,27.029998779296875],[-80.48059844970703,27.029748916625977],[-80.47993469238281,27.02931022644043],[-80.47650146484375,27.027029037475586],[-80.47344970703125,27.0250301361084],[-80.46612548828125,27.020170211791992],[-80.46347045898438,27.018388748168945],[-80.46160125732422,27.01715850830078],[-80.46123504638672,27.016908645629883],[-80.46028900146484,27.0162296295166],[-80.46026611328125,27.016149520874023],[-80.46012878417969,27.01599884033203],[-80.45984649658203,27.016300201416016],[-80.45967102050781,27.016429901123047],[-80.45955657958984,27.016469955444336],[-80.45941162109375,27.016489028930664],[-80.45903778076172,27.016489028930664],[-80.45256805419922,27.016510009765625],[-80.45219421386719,27.0164794921875],[-80.45205688476563,27.01645851135254],[-80.45201873779297,27.016559600830078],[-80.45183563232422,27.016889572143555],[-80.45166778564453,27.01719856262207],[-80.4515380859375,27.017379760742188],[-80.45124816894531,27.017709732055664],[-80.45093536376953,27.017959594726563],[-80.45073699951172,27.018098831176758],[-80.45037078857422,27.01828956604004],[-80.44779968261719,27.019189834594727],[-80.4450454711914,27.020139694213867],[-80.44219970703125,27.021120071411133],[-80.44136047363281,27.02140998840332],[-80.44026947021484,27.021808624267578],[-80.43862915039063,27.022388458251953],[-80.43360137939453,27.02412986755371],[-80.4303207397461,27.025360107421875],[-80.42716979980469,27.026479721069336],[-80.42019653320313,27.028949737548828],[-80.41519165039063,27.030729293823242],[-80.4122314453125,27.031768798828125],[-80.40753173828125,27.033430099487305],[-80.40583801269531,27.034029006958008],[-80.40400695800781,27.034669876098633],[-80.40412139892578,27.034809112548828],[-80.40412902832031,27.035179138183594],[-80.40412139892578,27.03553009033203],[-80.40409088134766,27.036788940429688],[-80.4040756225586,27.036970138549805],[-80.4040298461914,27.037328720092773],[-80.40391540527344,27.037519454956055],[-80.4029769897461,27.03778839111328],[-80.40326690673828,27.037778854370117],[-80.40348815917969,27.037858963012695],[-80.40362548828125,27.0380802154541],[-80.40374755859375,27.03826904296875],[-80.40388488769531,27.038318634033203],[-80.40449523925781,27.038339614868164],[-80.40591430664063,27.038330078125],[-80.4067153930664,27.038349151611328],[-80.40773010253906,27.038379669189453],[-80.40780639648438,27.038379669189453],[-80.4080810546875,27.03853988647461],[-80.40821075439453,27.03860855102539],[-80.40853118896484,27.038978576660156],[-80.40851593017578,27.039459228515625],[-80.40851593017578,27.041439056396484],[-80.40850830078125,27.045398712158203],[-80.40841674804688,27.052249908447266],[-80.40840148925781,27.054048538208008],[-80.40837860107422,27.056659698486328],[-80.40841674804688,27.05900001525879],[-80.4084243774414,27.060440063476563],[-80.40838623046875,27.066749572753906],[-80.40838623046875,27.068180084228516],[-80.40840911865234,27.07069969177246],[-80.40838623046875,27.07193946838379],[-80.40834045410156,27.07444953918457],[-80.40831756591797,27.078048706054688],[-80.40191650390625,27.078048706054688],[-80.3984375,27.078039169311523]]}},{"type":"Feature","properties":{"ID":9,"Name":"Bridge Rd","From":"Kanner Hwy","To":"Pratt Whitney Rd","Context_Class":"C2","Service_Capacity":585.0,"AADT_2024":1186.0,"Peak_Hour_Vol_2024":57.0,"LOS_2024":"A","Growth_Rate_2024":0.049,"Comparison_2023":null,"Context_Class_2023":"C2","Service_Capacity_2023":730.0,"AADT_2023":1212.0,"Peak_Hour_Vol_2023":69.32639999999999,"LOS_2023":"A/B","Growth_Rate_2023":0.06787809203255746,"U_ID":"20","color":"#00F0FF","width":2.06825802697861,"los_color":"#39FF14","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #00F0FF; margin-bottom: 4px;'>Bridge Rd (ID: 9)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Kanner Hwy  Pratt Whitney Rd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C2<br><span style='color: #71717a;'>AADT 2024: \u003c/span>1,186<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>57<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #39FF14; font-weight: bold;'>A\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #9\u003c/div><div style='font-size: 14px; font-weight: 600; color: #00F0FF; margin: 4px 0;'>Bridge Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Kanner Hwy  Pratt Whitney Rd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C2\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>585\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #00F0FF;'>1,186\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>57\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #39FF14;'>A\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>4.9%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.30558013916016,27.059219360351563],[-80.30542755126953,27.0589599609375],[-80.30532836914063,27.058879852294922],[-80.30523681640625,27.05883026123047],[-80.30508422851563,27.058778762817383],[-80.30211639404297,27.05879020690918],[-80.29438781738281,27.058818817138672],[-80.2889175415039,27.058839797973633],[-80.28665924072266,27.058849334716797],[-80.28402709960938,27.058818817138672],[-80.28012084960938,27.058778762817383],[-80.2631607055664,27.058578491210938]]}},{"type":"Feature","properties":{"ID":10,"Name":"Bridge Rd","From":"Pratt Whitney Rd","To":"I-95","Context_Class":"C2","Service_Capacity":585.0,"AADT_2024":4128.0,"Peak_Hour_Vol_2024":200.0,"LOS_2024":"B","Growth_Rate_2024":0.011,"Comparison_2023":null,"Context_Class_2023":"C2","Service_Capacity_2023":730.0,"AADT_2023":4606.0,"Peak_Hour_Vol_2023":278.663,"LOS_2023":"C","Growth_Rate_2023":0.04253987446799079,"U_ID":"21","color":"#00F0FF","width":2.338534090735098,"los_color":"#39FF14","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #00F0FF; margin-bottom: 4px;'>Bridge Rd (ID: 10)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Pratt Whitney Rd  I-95\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C2<br><span style='color: #71717a;'>AADT 2024: \u003c/span>4,128<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>200<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #39FF14; font-weight: bold;'>B\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #10\u003c/div><div style='font-size: 14px; font-weight: 600; color: #00F0FF; margin: 4px 0;'>Bridge Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Pratt Whitney Rd  I-95\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C2\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>585\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #00F0FF;'>4,128\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>200\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #39FF14;'>B\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>1.1%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.2631607055664,27.058578491210938],[-80.26250457763672,27.058549880981445],[-80.26207733154297,27.058488845825195],[-80.26155853271484,27.058380126953125],[-80.26123809814453,27.05828857421875],[-80.26062774658203,27.058069229125977],[-80.26023864746094,27.057889938354492],[-80.2598648071289,27.057680130004883],[-80.259521484375,27.057449340820313],[-80.25923156738281,27.057218551635742],[-80.25888061523438,27.05691909790039],[-80.25859832763672,27.05661964416504],[-80.25821685791016,27.05613899230957],[-80.25611114501953,27.052820205688477],[-80.25341796875,27.048559188842773],[-80.25291442871094,27.047760009765625],[-80.25212097167969,27.0465087890625],[-80.25183868408203,27.046138763427734],[-80.25151062011719,27.04578971862793],[-80.25125885009766,27.045568466186523],[-80.25086975097656,27.045259475708008],[-80.25052642822266,27.045019149780273],[-80.25016021728516,27.044818878173828],[-80.24945068359375,27.044498443603516],[-80.24919128417969,27.04439926147461],[-80.24856567382813,27.04422950744629],[-80.2481460571289,27.04414939880371],[-80.24771881103516,27.044109344482422],[-80.24715423583984,27.044078826904297],[-80.24420928955078,27.04405975341797],[-80.2436294555664,27.044050216674805],[-80.24193572998047,27.044038772583008],[-80.24068450927734,27.044050216674805],[-80.23945617675781,27.044050216674805],[-80.23839569091797,27.044038772583008],[-80.23738861083984,27.04401969909668],[-80.23532104492188,27.044029235839844],[-80.23397827148438,27.04401969909668],[-80.23076629638672,27.04399871826172],[-80.22979736328125,27.04399871826172],[-80.22917938232422,27.04399871826172],[-80.22917938232422,27.044118881225586],[-80.23070526123047,27.04412841796875],[-80.23175811767578,27.04412841796875],[-80.23403930664063,27.044139862060547]]}},{"type":"Feature","properties":{"ID":11,"Name":"Bridge Rd","From":"I-95","To":"Powerline Ave","Context_Class":"C2","Service_Capacity":585.0,"AADT_2024":10444.0,"Peak_Hour_Vol_2024":505.0,"LOS_2024":"C","Growth_Rate_2024":0.026,"Comparison_2023":null,"Context_Class_2023":"C2","Service_Capacity_2023":730.0,"AADT_2023":10060.0,"Peak_Hour_Vol_2023":656.7168,"LOS_2023":"D","Growth_Rate_2023":0.02337189017738894,"U_ID":"22","color":"#00F0FF","width":2.918773254122583,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #00F0FF; margin-bottom: 4px;'>Bridge Rd (ID: 11)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>I-95  Powerline Ave\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C2<br><span style='color: #71717a;'>AADT 2024: \u003c/span>10,444<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>505<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #11\u003c/div><div style='font-size: 14px; font-weight: 600; color: #00F0FF; margin: 4px 0;'>Bridge Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>I-95  Powerline Ave\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C2\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>585\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #00F0FF;'>10,444\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>505\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>2.6%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.23403930664063,27.044139862060547],[-80.23532104492188,27.04414939880371],[-80.2366943359375,27.044158935546875],[-80.23738861083984,27.044158935546875],[-80.23738861083984,27.04401969909668],[-80.23532104492188,27.044029235839844],[-80.23439025878906,27.04401969909668],[-80.23310089111328,27.044010162353516],[-80.2278060913086,27.04397964477539],[-80.22583770751953,27.04395866394043],[-80.22512817382813,27.04395866394043],[-80.22505950927734,27.04397964477539],[-80.22233581542969,27.04395866394043],[-80.2175064086914,27.043909072875977],[-80.21427917480469,27.04387855529785],[-80.20880126953125,27.043838500976563],[-80.20633697509766,27.04387855529785],[-80.20513153076172,27.04388999938965],[-80.19956970214844,27.04388999938965],[-80.1986312866211,27.04391860961914],[-80.19706726074219,27.04391860961914],[-80.19578552246094,27.04391860961914],[-80.1946792602539,27.043930053710938],[-80.19412994384766,27.043899536132813],[-80.19309997558594,27.043899536132813],[-80.1884994506836,27.04388999938965],[-80.18389892578125,27.043838500976563],[-80.1754150390625,27.04376983642578],[-80.16836547851563,27.043699264526367],[-80.16429901123047,27.043659210205078],[-80.16343688964844,27.043659210205078],[-80.1632308959961,27.04368019104004],[-80.1628646850586,27.04376983642578]]}},{"type":"Feature","properties":{"ID":20,"Name":"Citrus Blvd","From":"Minute Maid Rd","To":"96th St","Context_Class":"C2","Service_Capacity":585.0,"AADT_2024":3350.0,"Peak_Hour_Vol_2024":162.0,"LOS_2024":"A","Growth_Rate_2024":0.061,"Comparison_2023":null,"Context_Class_2023":"C2","Service_Capacity_2023":730.0,"AADT_2023":3298.0,"Peak_Hour_Vol_2023":188.74453999999997,"LOS_2023":"A/B","Growth_Rate_2023":0.07300085696955794,"U_ID":"45","color":"#00F0FF","width":2.267060678905544,"los_color":"#39FF14","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #00F0FF; margin-bottom: 4px;'>Citrus Blvd (ID: 20)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Minute Maid Rd  96th St\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C2<br><span style='color: #71717a;'>AADT 2024: \u003c/span>3,350<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>162<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #39FF14; font-weight: bold;'>A\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #20\u003c/div><div style='font-size: 14px; font-weight: 600; color: #00F0FF; margin: 4px 0;'>Citrus Blvd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Minute Maid Rd  96th St\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C2\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>585\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #00F0FF;'>3,350\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>162\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #39FF14;'>A\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>6.1%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.43354034423828,27.02414894104004],[-80.4303207397461,27.025360107421875],[-80.42716979980469,27.026479721069336],[-80.42019653320313,27.028949737548828],[-80.40320587158203,27.03495979309082],[-80.38880920410156,27.04006004333496],[-80.38766479492188,27.04041862487793],[-80.38703918457031,27.040569305419922],[-80.38639068603516,27.040679931640625],[-80.38594818115234,27.040719985961914],[-80.3853988647461,27.040760040283203],[-80.384521484375,27.040809631347656],[-80.38407897949219,27.04085922241211],[-80.38333892822266,27.040998458862305],[-80.38289642333984,27.041109085083008],[-80.38237762451172,27.041259765625],[-80.38179779052734,27.04146957397461],[-80.37957763671875,27.04239845275879],[-80.37702941894531,27.043498992919922],[-80.37173461914063,27.045740127563477],[-80.37137603759766,27.0458984375],[-80.3713150024414,27.0458984375],[-80.36918640136719,27.046810150146484],[-80.36888122558594,27.046939849853516],[-80.36860656738281,27.047048568725586],[-80.36827087402344,27.047189712524414],[-80.36626434326172,27.04789924621582],[-80.36270904541016,27.04916000366211],[-80.35929870605469,27.050369262695313],[-80.3509750366211,27.053308486938477],[-80.33407592773438,27.05929946899414],[-80.32691955566406,27.06182861328125],[-80.32451629638672,27.06268882751465],[-80.32392120361328,27.062959671020508],[-80.32354736328125,27.063148498535156],[-80.32306671142578,27.063438415527344],[-80.32271575927734,27.063678741455078],[-80.32221984863281,27.06406021118164],[-80.3218994140625,27.064329147338867],[-80.32145690917969,27.06477928161621],[-80.32120513916016,27.065059661865234],[-80.32103729248047,27.06525993347168],[-80.3207015991211,27.065719604492188],[-80.32035064697266,27.066259384155273],[-80.31987762451172,27.067150115966797],[-80.31956481933594,27.067869186401367],[-80.31936645507813,27.068429946899414],[-80.31922912597656,27.06894874572754],[-80.31909942626953,27.069568634033203],[-80.31901550292969,27.070079803466797],[-80.31895446777344,27.070959091186523],[-80.31887817382813,27.079219818115234],[-80.31888580322266,27.080209732055664],[-80.31893920898438,27.08112907409668],[-80.3189697265625,27.081329345703125],[-80.31898498535156,27.081520080566406],[-80.31917572021484,27.082979202270508],[-80.31926727294922,27.083969116210938],[-80.31927490234375,27.084558486938477],[-80.31927490234375,27.086170196533203],[-80.31924438476563,27.088428497314453]]}},{"type":"Feature","properties":{"ID":31,"Name":"Dixie Hwy","From":"Federal Hwy","To":"Water St","Context_Class":"C2","Service_Capacity":585.0,"AADT_2024":4280.0,"Peak_Hour_Vol_2024":207.0,"LOS_2024":"B","Growth_Rate_2024":0.046,"Comparison_2023":null,"Context_Class_2023":"C2","Service_Capacity_2023":730.0,"AADT_2023":4301.0,"Peak_Hour_Vol_2023":239.99579999999995,"LOS_2023":"TCEA","Growth_Rate_2023":0.05928517715833137,"U_ID":"47","color":"#00F0FF","width":2.352498047802055,"los_color":"#39FF14","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #00F0FF; margin-bottom: 4px;'>Dixie Hwy (ID: 31)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Federal Hwy  Water St\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C2<br><span style='color: #71717a;'>AADT 2024: \u003c/span>4,280<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>207<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #39FF14; font-weight: bold;'>B\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #31\u003c/div><div style='font-size: 14px; font-weight: 600; color: #00F0FF; margin: 4px 0;'>Dixie Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Federal Hwy  Water St\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C2\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>585\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #00F0FF;'>4,280\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>207\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #39FF14;'>B\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>4.6%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.1197509765625,27.045419692993164],[-80.11746978759766,27.044038772583008],[-80.11712646484375,27.0438289642334],[-80.11608123779297,27.04313850402832],[-80.11551666259766,27.042678833007813],[-80.11540985107422,27.042579650878906],[-80.11521911621094,27.042739868164063],[-80.11553955078125,27.04302978515625],[-80.11589050292969,27.043319702148438],[-80.11628723144531,27.043609619140625],[-80.11676788330078,27.04391860961914],[-80.11740112304688,27.044300079345703],[-80.1195068359375,27.04557991027832],[-80.11967468261719,27.045679092407227],[-80.1198501586914,27.045780181884766],[-80.11969757080078,27.04612922668457],[-80.11965942382813,27.046249389648438],[-80.11949920654297,27.046628952026367],[-80.11943054199219,27.046798706054688],[-80.11937713623047,27.046918869018555],[-80.11917114257813,27.04732894897461],[-80.11912536621094,27.04741859436035],[-80.1190185546875,27.0477294921875],[-80.11898040771484,27.04792022705078],[-80.11907958984375,27.04813003540039],[-80.11915588378906,27.048229217529297],[-80.11920928955078,27.048290252685547],[-80.11936950683594,27.04848861694336],[-80.11983489990234,27.0491886138916],[-80.12068176269531,27.050458908081055],[-80.12126159667969,27.05122947692871],[-80.12194061279297,27.052019119262695],[-80.1220474243164,27.052148818969727]]}},{"type":"Feature","properties":{"ID":66,"Name":"Fox Brown Rd","From":"Warfield Blvd","To":"Martin Hwy","Context_Class":"C2","Service_Capacity":585.0,"AADT_2024":443.0,"Peak_Hour_Vol_2024":21.0,"LOS_2024":"A","Growth_Rate_2024":0.05,"Comparison_2023":null,"Context_Class_2023":"C2","Service_Capacity_2023":730.0,"AADT_2023":425.0,"Peak_Hour_Vol_2023":26.367000000000004,"LOS_2023":"A/B","Growth_Rate_2023":0.05199787804331257,"U_ID":"60","color":"#00F0FF","width":2.0,"los_color":"#39FF14","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #00F0FF; margin-bottom: 4px;'>Fox Brown Rd (ID: 66)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Warfield Blvd  Martin Hwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C2<br><span style='color: #71717a;'>AADT 2024: \u003c/span>443<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>21<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #39FF14; font-weight: bold;'>A\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #66\u003c/div><div style='font-size: 14px; font-weight: 600; color: #00F0FF; margin: 4px 0;'>Fox Brown Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Warfield Blvd  Martin Hwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C2\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>585\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #00F0FF;'>443\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>21\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #39FF14;'>A\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.51494598388672,27.051408767700195],[-80.51399993896484,27.05078887939453],[-80.51336669921875,27.05035972595215],[-80.5130844116211,27.05069923400879],[-80.51290893554688,27.050918579101563],[-80.51265716552734,27.05124855041504],[-80.51248931884766,27.051618576049805],[-80.51239013671875,27.051939010620117],[-80.51235961914063,27.05219841003418],[-80.51235961914063,27.052509307861328],[-80.51240539550781,27.052799224853516],[-80.51249694824219,27.053070068359375],[-80.51258850097656,27.053268432617188],[-80.51274108886719,27.053508758544922],[-80.51287078857422,27.053678512573242],[-80.5131607055664,27.0539493560791],[-80.51349639892578,27.054189682006836],[-80.5140609741211,27.05447006225586],[-80.51428985595703,27.05463981628418],[-80.51451110839844,27.054840087890625],[-80.51464080810547,27.05501937866211],[-80.51477813720703,27.05529022216797],[-80.51488494873047,27.055559158325195],[-80.51494598388672,27.05583953857422],[-80.51496887207031,27.0562801361084],[-80.51496124267578,27.05746841430664],[-80.51494598388672,27.059160232543945],[-80.51493835449219,27.062519073486328],[-80.51487731933594,27.075599670410156],[-80.51480865478516,27.085229873657227],[-80.51483154296875,27.0856990814209],[-80.51484680175781,27.085899353027344],[-80.51496124267578,27.08656883239746],[-80.51499938964844,27.08724021911621],[-80.51499938964844,27.089509963989258],[-80.51496887207031,27.090579986572266],[-80.51496887207031,27.091299057006836],[-80.51496124267578,27.093050003051758],[-80.51494598388672,27.09735870361328],[-80.51493835449219,27.106538772583008],[-80.51493835449219,27.108570098876953],[-80.51496887207031,27.10894012451172],[-80.5150375366211,27.109399795532227],[-80.51516723632813,27.109899520874023],[-80.5152816772461,27.110219955444336],[-80.51548767089844,27.110679626464844],[-80.51596069335938,27.111509323120117],[-80.51731872558594,27.113819122314453],[-80.51866149902344,27.116079330444336],[-80.5206069946289,27.1193790435791],[-80.52305603027344,27.1235294342041],[-80.5234603881836,27.124168395996094],[-80.52375030517578,27.12451934814453],[-80.52413940429688,27.124919891357422],[-80.52447509765625,27.125219345092773],[-80.52486419677734,27.125490188598633],[-80.52560424804688,27.12596893310547],[-80.52616882324219,27.1264591217041],[-80.52640533447266,27.126718521118164],[-80.52658081054688,27.12693977355957],[-80.52690124511719,27.12744903564453],[-80.52890014648438,27.130578994750977],[-80.53074645996094,27.133499145507813],[-80.5319595336914,27.135379791259766],[-80.53276824951172,27.136518478393555],[-80.53350830078125,27.137479782104492],[-80.5368881225586,27.141738891601563],[-80.54100799560547,27.146928787231445],[-80.54216003417969,27.1483097076416],[-80.5426254272461,27.148868560791016],[-80.54303741455078,27.14931869506836],[-80.54447174072266,27.150798797607422],[-80.5457763671875,27.152158737182617],[-80.54627990722656,27.152599334716797],[-80.54682922363281,27.152978897094727],[-80.54908752441406,27.15437889099121],[-80.54986572265625,27.15485954284668],[-80.55033874511719,27.155189514160156],[-80.55069732666016,27.155519485473633],[-80.55101013183594,27.155868530273438],[-80.55218505859375,27.157588958740234],[-80.55332946777344,27.159278869628906],[-80.55363464355469,27.159809112548828],[-80.55387878417969,27.160348892211914],[-80.55419921875,27.161109924316406],[-80.55426788330078,27.16131019592285],[-80.5542984008789,27.16156005859375],[-80.5542984008789,27.16206932067871],[-80.5543212890625,27.16206932067871]]}},{"type":"Feature","properties":{"ID":74,"Name":"Green River Pkwy","From":"Jensen Beach Blvd","To":"St. Lucie County","Context_Class":"C2","Service_Capacity":585.0,"AADT_2024":10464.0,"Peak_Hour_Vol_2024":506.0,"LOS_2024":"C","Growth_Rate_2024":0.038,"Comparison_2023":null,"Context_Class_2023":"C2","Service_Capacity_2023":730.0,"AADT_2023":10443.0,"Peak_Hour_Vol_2023":572.38083,"LOS_2023":"D","Growth_Rate_2023":0.04770525051929408,"U_ID":"181","color":"#00F0FF","width":2.9206106168945505,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #00F0FF; margin-bottom: 4px;'>Green River Pkwy (ID: 74)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Jensen Beach Blvd  St. Lucie County\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C2<br><span style='color: #71717a;'>AADT 2024: \u003c/span>10,464<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>506<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #74\u003c/div><div style='font-size: 14px; font-weight: 600; color: #00F0FF; margin: 4px 0;'>Green River Pkwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Jensen Beach Blvd  St. Lucie County\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C2\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>585\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #00F0FF;'>10,464\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>506\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>3.8%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.2535171508789,27.245349884033203],[-80.25348663330078,27.245208740234375],[-80.25341796875,27.245220184326172],[-80.25267791748047,27.245208740234375],[-80.25159454345703,27.245189666748047],[-80.24771118164063,27.245140075683594],[-80.24678039550781,27.245119094848633],[-80.24534606933594,27.24510955810547],[-80.24365997314453,27.245100021362305],[-80.24353790283203,27.245149612426758],[-80.24331665039063,27.245140075683594],[-80.24279022216797,27.245140075683594],[-80.24103546142578,27.24510955810547],[-80.23865509033203,27.245079040527344],[-80.23661804199219,27.245038986206055],[-80.23611450195313,27.244979858398438],[-80.23590087890625,27.24493980407715],[-80.23551177978516,27.24481964111328],[-80.23495483398438,27.244598388671875],[-80.23443603515625,27.2443790435791],[-80.23391723632813,27.24422836303711],[-80.2336654663086,27.244190216064453],[-80.23259735107422,27.24403953552246],[-80.23220825195313,27.24397850036621],[-80.2315444946289,27.24382972717285],[-80.23117065429688,27.243688583374023],[-80.23075866699219,27.243549346923828],[-80.23046112060547,27.24346923828125],[-80.2298355102539,27.243398666381836],[-80.22954559326172,27.243398666381836],[-80.2292251586914,27.243410110473633],[-80.2288589477539,27.243459701538086],[-80.22854614257813,27.243539810180664],[-80.22787475585938,27.243728637695313],[-80.22760009765625,27.2437801361084],[-80.22753143310547,27.243709564208984],[-80.22740173339844,27.24367904663086],[-80.22732543945313,27.24367904663086],[-80.22725677490234,27.24371910095215],[-80.2271957397461,27.243789672851563],[-80.22716522216797,27.243879318237305],[-80.2270278930664,27.243959426879883],[-80.22674560546875,27.24403953552246],[-80.22590637207031,27.244279861450195],[-80.22545623779297,27.244409561157227],[-80.22529602050781,27.244449615478516],[-80.22518157958984,27.244258880615234],[-80.22500610351563,27.244009017944336],[-80.22492980957031,27.24388885498047],[-80.22435760498047,27.24312973022461],[-80.22410583496094,27.242839813232422],[-80.22357177734375,27.242300033569336],[-80.22342681884766,27.242149353027344],[-80.22309875488281,27.241649627685547],[-80.22283172607422,27.241230010986328],[-80.2225570678711,27.240768432617188],[-80.22245788574219,27.240570068359375],[-80.22203063964844,27.239660263061523],[-80.22174072265625,27.239028930664063],[-80.22032165527344,27.236059188842773],[-80.2189712524414,27.23318862915039],[-80.21834564208984,27.23185920715332],[-80.21810913085938,27.231399536132813],[-80.21768951416016,27.23050880432129],[-80.21730041503906,27.229719161987305],[-80.2165756225586,27.22835922241211],[-80.216064453125,27.227428436279297],[-80.21598052978516,27.227319717407227],[-80.2158203125,27.227149963378906],[-80.21532440185547,27.226669311523438],[-80.21432495117188,27.225719451904297],[-80.21369934082031,27.225099563598633],[-80.21299743652344,27.224079132080078],[-80.21279907226563,27.223779678344727],[-80.21267700195313,27.22355842590332],[-80.2125473022461,27.223268508911133],[-80.21171569824219,27.221439361572266],[-80.21147155761719,27.22093963623047],[-80.21112823486328,27.220190048217773],[-80.2107162475586,27.219268798828125],[-80.21012878417969,27.217998504638672],[-80.208984375,27.21595001220703],[-80.20858764648438,27.21525001525879],[-80.20795440673828,27.214099884033203],[-80.20756530761719,27.21327018737793],[-80.20735168457031,27.212879180908203],[-80.20706176757813,27.212438583374023],[-80.20616149902344,27.21103858947754],[-80.20543670654297,27.21002960205078],[-80.20384979248047,27.207828521728516],[-80.20182037353516,27.205080032348633],[-80.20085144042969,27.203399658203125],[-80.20056915283203,27.202899932861328],[-80.20205688476563,27.202199935913086],[-80.2025375366211,27.20197868347168],[-80.2027816772461,27.201929092407227],[-80.20320892333984,27.20170021057129],[-80.20352935791016,27.201509475708008],[-80.20372009277344,27.20138931274414],[-80.20437622070313,27.20098876953125],[-80.20636749267578,27.199798583984375],[-80.2068862915039,27.199508666992188],[-80.20724487304688,27.199298858642578],[-80.20794677734375,27.198938369750977],[-80.20887756347656,27.19847869873047],[-80.21063995361328,27.197689056396484],[-80.21199035644531,27.197139739990234],[-80.21184539794922,27.197078704833984],[-80.21158599853516,27.196868896484375],[-80.21110534667969,27.196470260620117],[-80.2109375,27.1962890625],[-80.21086120605469,27.196168899536133],[-80.21077728271484,27.19598960876465],[-80.21075439453125,27.19586944580078],[-80.21075439453125,27.195758819580078]]}},{"type":"Feature","properties":{"ID":97,"Name":"Kanner Hwy","From":"Conner's Hwy","To":"Warfield Blvd","Context_Class":"C2","Service_Capacity":585.0,"AADT_2024":2590.0,"Peak_Hour_Vol_2024":125.0,"LOS_2024":"A","Growth_Rate_2024":0.039,"Comparison_2023":null,"Context_Class_2023":"C2","Service_Capacity_2023":730.0,"AADT_2023":2170.0,"Peak_Hour_Vol_2023":100.7097,"LOS_2023":"A/B","Growth_Rate_2023":0.005,"U_ID":"125","color":"#00F0FF","width":2.1972408935707612,"los_color":"#39FF14","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #00F0FF; margin-bottom: 4px;'>Kanner Hwy (ID: 97)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Conner's Hwy  Warfield Blvd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C2<br><span style='color: #71717a;'>AADT 2024: \u003c/span>2,590<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>125<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #39FF14; font-weight: bold;'>A\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #97\u003c/div><div style='font-size: 14px; font-weight: 600; color: #00F0FF; margin: 4px 0;'>Kanner Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Conner's Hwy  Warfield Blvd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C2\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>585\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #00F0FF;'>2,590\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>125\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #39FF14;'>A\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>3.9%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.61442565917969,26.977819442749023],[-80.61492156982422,26.977689743041992],[-80.61505889892578,26.977689743041992],[-80.61519622802734,26.977739334106445],[-80.61528015136719,26.97780990600586],[-80.61534118652344,26.977890014648438],[-80.61541748046875,26.9781494140625],[-80.61661529541016,26.982139587402344],[-80.61703491210938,26.983539581298828],[-80.6170654296875,26.983718872070313],[-80.6170883178711,26.98387908935547],[-80.61705780029297,26.984079360961914],[-80.61698913574219,26.984270095825195],[-80.6168441772461,26.98444938659668],[-80.61666107177734,26.98457908630371],[-80.61653900146484,26.984628677368164],[-80.61629486083984,26.984708786010742],[-80.61579895019531,26.984798431396484],[-80.61524963378906,26.984899520874023],[-80.61376953125,26.985139846801758],[-80.6119155883789,26.985458374023438],[-80.60840606689453,26.9860897064209],[-80.6069564819336,26.986339569091797],[-80.60498046875,26.986679077148438],[-80.60334777832031,26.986928939819336],[-80.60237121582031,26.98703956604004],[-80.60066986083984,26.987199783325195],[-80.59971618652344,26.9872989654541],[-80.59917449951172,26.98737907409668],[-80.59833526611328,26.987579345703125],[-80.59751892089844,26.987838745117188],[-80.59711456298828,26.988008499145508],[-80.59645080566406,26.98832893371582],[-80.59281158447266,26.990148544311523],[-80.58715057373047,26.99298858642578],[-80.58367156982422,26.994810104370117],[-80.5815658569336,26.995880126953125],[-80.57852935791016,26.997398376464844],[-80.57438659667969,26.999469757080078],[-80.5489273071289,27.012189865112305],[-80.54744720458984,27.012929916381836],[-80.54684448242188,27.013198852539063],[-80.5462417602539,27.013429641723633],[-80.54582977294922,27.0135498046875],[-80.54536437988281,27.01365852355957],[-80.54428100585938,27.01384925842285],[-80.53533172607422,27.015329360961914],[-80.53047943115234,27.016128540039063],[-80.52713012695313,27.016679763793945],[-80.52619171142578,27.016759872436523],[-80.52562713623047,27.01677894592285],[-80.52466583251953,27.016759872436523],[-80.52381134033203,27.016679763793945],[-80.52281951904297,27.01651954650879],[-80.52208709716797,27.016340255737305],[-80.51873779296875,27.015419006347656],[-80.50110626220703,27.01055908203125],[-80.49913024902344,27.010028839111328],[-80.49816131591797,27.00979995727539],[-80.49708557128906,27.009599685668945],[-80.4933090209961,27.00912857055664],[-80.4889144897461,27.00857925415039],[-80.48152923583984,27.007678985595703],[-80.47677612304688,27.007089614868164],[-80.47432708740234,27.006799697875977],[-80.47317504882813,27.006710052490234],[-80.47209930419922,27.006698608398438],[-80.47100067138672,27.006738662719727],[-80.46971130371094,27.006858825683594],[-80.4688491821289,27.006988525390625],[-80.46820831298828,27.007099151611328],[-80.46736907958984,27.00728988647461],[-80.46654510498047,27.007509231567383],[-80.46611022949219,27.007638931274414],[-80.4644775390625,27.00819969177246],[-80.46186828613281,27.009119033813477],[-80.45952606201172,27.00994873046875],[-80.45819854736328,27.010438919067383],[-80.45427703857422,27.011829376220703],[-80.4522476196289,27.01253890991211],[-80.45188903808594,27.012680053710938],[-80.45153045654297,27.01280975341797],[-80.45137023925781,27.012828826904297],[-80.45117950439453,27.01289939880371],[-80.45083618164063,27.013010025024414],[-80.45073699951172,27.013038635253906],[-80.45054626464844,27.013090133666992],[-80.4502944946289,27.01306915283203],[-80.45008087158203,27.01297950744629],[-80.44987487792969,27.012800216674805],[-80.44983673095703,27.01276969909668],[-80.4498062133789,27.012739181518555],[-80.44945526123047,27.011878967285156],[-80.44913482666016,27.01116943359375],[-80.44850158691406,27.00973892211914],[-80.44841766357422,27.009469985961914],[-80.44841003417969,27.00937843322754],[-80.44841003417969,27.00922966003418],[-80.44847106933594,27.00901985168457],[-80.44853973388672,27.00889015197754],[-80.44863891601563,27.0087890625],[-80.44881439208984,27.008638381958008],[-80.4489517211914,27.00848960876465],[-80.44912719726563,27.008298873901367],[-80.44951629638672,27.008588790893555],[-80.45087432861328,27.00956916809082],[-80.45272064208984,27.010848999023438],[-80.45437622070313,27.012060165405273],[-80.45531463623047,27.012739181518555],[-80.45853424072266,27.01508903503418],[-80.4588394165039,27.015308380126953],[-80.45999145507813,27.01616859436035],[-80.46015167236328,27.016220092773438],[-80.46028900146484,27.0162296295166],[-80.46115112304688,27.016849517822266],[-80.4609603881836,27.017118453979492],[-80.4609146118164,27.017169952392578],[-80.46070098876953,27.017438888549805],[-80.4605712890625,27.017608642578125],[-80.46019744873047,27.018049240112305],[-80.46012115478516,27.01814842224121],[-80.46009826660156,27.018129348754883],[-80.46001434326172,27.01811981201172],[-80.45994567871094,27.018129348754883],[-80.45988464355469,27.018169403076172],[-80.45984649658203,27.018218994140625],[-80.4598388671875,27.018239974975586],[-80.45965576171875,27.018218994140625],[-80.45952606201172,27.01820945739746],[-80.4580078125,27.018178939819336],[-80.4580078125,27.017210006713867],[-80.4580307006836,27.016489028930664],[-80.45923614501953,27.016489028930664],[-80.45955657958984,27.016469955444336],[-80.45977020263672,27.016368865966797],[-80.45984649658203,27.016300201416016],[-80.46012878417969,27.01599884033203],[-80.45912170410156,27.01521873474121],[-80.45784759521484,27.01428985595703],[-80.45703125,27.013689041137695],[-80.45581817626953,27.01280975341797],[-80.454345703125,27.011730194091797]]}},{"type":"Feature","properties":{"ID":98,"Name":"Kanner Hwy","From":"Warfield Blvd","To":"Bridge Rd","Context_Class":"C2","Service_Capacity":585.0,"AADT_2024":3694.0,"Peak_Hour_Vol_2024":179.0,"LOS_2024":"A","Growth_Rate_2024":0.016,"Comparison_2023":null,"Context_Class_2023":"C2","Service_Capacity_2023":730.0,"AADT_2023":3653.0,"Peak_Hour_Vol_2023":182.83265000000003,"LOS_2023":"A/B","Growth_Rate_2023":0.01720892594892098,"U_ID":"126","color":"#00F0FF","width":2.2986633185833933,"los_color":"#39FF14","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #00F0FF; margin-bottom: 4px;'>Kanner Hwy (ID: 98)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Warfield Blvd  Bridge Rd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C2<br><span style='color: #71717a;'>AADT 2024: \u003c/span>3,694<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>179<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #39FF14; font-weight: bold;'>A\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #98\u003c/div><div style='font-size: 14px; font-weight: 600; color: #00F0FF; margin: 4px 0;'>Kanner Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Warfield Blvd  Bridge Rd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C2\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>585\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #00F0FF;'>3,694\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>179\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #39FF14;'>A\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>1.6%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.454345703125,27.011730194091797],[-80.45288848876953,27.010669708251953],[-80.4518051147461,27.00990867614746],[-80.45063781738281,27.00909996032715],[-80.45005798339844,27.008699417114258],[-80.44926452636719,27.008119583129883],[-80.44912719726563,27.008298873901367],[-80.4489517211914,27.00848960876465],[-80.44881439208984,27.008638381958008],[-80.44863891601563,27.0087890625],[-80.44853973388672,27.00889015197754],[-80.44847106933594,27.00901985168457],[-80.44842529296875,27.009140014648438],[-80.44841003417969,27.009300231933594],[-80.44841766357422,27.009469985961914],[-80.44850158691406,27.00973892211914],[-80.44913482666016,27.01116943359375],[-80.44945526123047,27.011878967285156],[-80.4498291015625,27.012760162353516],[-80.45005798339844,27.0132999420166],[-80.44931030273438,27.013568878173828],[-80.44852447509766,27.01384925842285],[-80.44694519042969,27.0144100189209],[-80.44667053222656,27.01453971862793],[-80.4462661743164,27.014699935913086],[-80.44554138183594,27.015018463134766],[-80.4444351196289,27.015579223632813],[-80.44236755371094,27.016708374023438],[-80.44149780273438,27.017169952392578],[-80.4404067993164,27.017778396606445],[-80.43943786621094,27.018308639526367],[-80.439208984375,27.01844024658203],[-80.4388198852539,27.018638610839844],[-80.43817138671875,27.018949508666992],[-80.43708038330078,27.019418716430664],[-80.43670654296875,27.019548416137695],[-80.43550872802734,27.01995849609375],[-80.42914581298828,27.022069931030273],[-80.42559051513672,27.023239135742188],[-80.42401885986328,27.02376937866211],[-80.42311096191406,27.024118423461914],[-80.42189025878906,27.024629592895508],[-80.42071533203125,27.02513885498047],[-80.41706848144531,27.02669906616211],[-80.41533660888672,27.027408599853516],[-80.41460418701172,27.0277099609375],[-80.413818359375,27.028018951416016],[-80.41062927246094,27.029150009155273],[-80.40986633300781,27.02943992614746],[-80.40728759765625,27.030349731445313],[-80.3979263305664,27.033668518066406],[-80.39274597167969,27.035499572753906],[-80.38729095458984,27.037429809570313],[-80.38639068603516,27.0377197265625],[-80.38618469238281,27.037778854370117],[-80.38556671142578,27.03790855407715],[-80.38499450683594,27.037988662719727],[-80.38431549072266,27.03805923461914],[-80.38359069824219,27.0380802154541],[-80.38191986083984,27.038028717041016],[-80.37998962402344,27.0379695892334],[-80.37894439697266,27.0379695892334],[-80.37802124023438,27.038068771362305],[-80.37723541259766,27.038219451904297],[-80.37435150146484,27.039039611816406],[-80.3697280883789,27.040369033813477],[-80.35773468017578,27.043859481811523],[-80.34835052490234,27.046579360961914],[-80.34300994873047,27.04813003540039],[-80.34138488769531,27.048599243164063],[-80.33739471435547,27.049728393554688],[-80.33490753173828,27.05046844482422],[-80.33118438720703,27.05156898498535],[-80.32946014404297,27.05206871032715],[-80.32720947265625,27.052719116210938],[-80.32466125488281,27.05345916748047],[-80.32042694091797,27.05467987060547],[-80.31961822509766,27.054899215698242],[-80.317626953125,27.055479049682617],[-80.31298828125,27.056819915771484],[-80.31018829345703,27.05769920349121],[-80.30609893798828,27.059040069580078],[-80.30558013916016,27.059219360351563]]}},{"type":"Feature","properties":{"ID":99,"Name":"Kanner Hwy","From":"Bridge Rd","To":"Waterside","Context_Class":"C2","Service_Capacity":765.0,"AADT_2024":3288.0,"Peak_Hour_Vol_2024":159.0,"LOS_2024":"A","Growth_Rate_2024":0.026,"Comparison_2023":null,"Context_Class_2023":"C2","Service_Capacity_2023":730.0,"AADT_2023":4251.0,"Peak_Hour_Vol_2023":230.74427999999995,"LOS_2023":"A/B","Growth_Rate_2023":0.08,"U_ID":"127","color":"#00F0FF","width":2.2613648543124434,"los_color":"#39FF14","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #00F0FF; margin-bottom: 4px;'>Kanner Hwy (ID: 99)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Bridge Rd  Waterside\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C2<br><span style='color: #71717a;'>AADT 2024: \u003c/span>3,288<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>159<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #39FF14; font-weight: bold;'>A\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #99\u003c/div><div style='font-size: 14px; font-weight: 600; color: #00F0FF; margin: 4px 0;'>Kanner Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Bridge Rd  Waterside\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C2\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>765\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #00F0FF;'>3,288\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>159\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #39FF14;'>A\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>2.6%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.30558013916016,27.059219360351563],[-80.3049545288086,27.059490203857422],[-80.30438995361328,27.05978012084961],[-80.3035888671875,27.060279846191406],[-80.30265045166016,27.060958862304688],[-80.30079650878906,27.062339782714844],[-80.29520416259766,27.066518783569336],[-80.29180908203125,27.069049835205078],[-80.2890853881836,27.07107925415039],[-80.28856658935547,27.071489334106445],[-80.28807830810547,27.07193946838379],[-80.28762817382813,27.072429656982422],[-80.28727722167969,27.072858810424805],[-80.28675079345703,27.073678970336914]]}},{"type":"Feature","properties":{"ID":120,"Name":"Martin Hwy","From":"Warfield Blvd","To":"Fox Brown Rd","Context_Class":"C2","Service_Capacity":585.0,"AADT_2024":4764.0,"Peak_Hour_Vol_2024":231.0,"LOS_2024":"B","Growth_Rate_2024":0.069,"Comparison_2023":null,"Context_Class_2023":"C2","Service_Capacity_2023":730.0,"AADT_2023":4358.0,"Peak_Hour_Vol_2023":184.5613,"LOS_2023":"A/B","Growth_Rate_2023":0.06301094076020441,"U_ID":"35","color":"#00F0FF","width":2.3969622268836797,"los_color":"#39FF14","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #00F0FF; margin-bottom: 4px;'>Martin Hwy (ID: 120)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Warfield Blvd  Fox Brown Rd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C2<br><span style='color: #71717a;'>AADT 2024: \u003c/span>4,764<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>231<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #39FF14; font-weight: bold;'>B\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #120\u003c/div><div style='font-size: 14px; font-weight: 600; color: #00F0FF; margin: 4px 0;'>Martin Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Warfield Blvd  Fox Brown Rd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C2\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>585\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #00F0FF;'>4,764\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>231\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #39FF14;'>B\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>6.9%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.6773452758789,27.159038543701172],[-80.67691040039063,27.160018920898438],[-80.67620086669922,27.161958694458008],[-80.67608642578125,27.16214942932129],[-80.67595672607422,27.162248611450195],[-80.67578125,27.16230010986328],[-80.67448425292969,27.162309646606445],[-80.67308044433594,27.16230010986328],[-80.66964721679688,27.16227912902832],[-80.65641784667969,27.162229537963867],[-80.65095520019531,27.162199020385742],[-80.63484954833984,27.162139892578125],[-80.62952423095703,27.162109375],[-80.62604522705078,27.162109375],[-80.62010955810547,27.162099838256836],[-80.61264038085938,27.16206932067871],[-80.60596466064453,27.162059783935547],[-80.60232543945313,27.162059783935547],[-80.59762573242188,27.16206932067871],[-80.59066772460938,27.162078857421875],[-80.58132934570313,27.162118911743164],[-80.57450866699219,27.162118911743164],[-80.56488800048828,27.162099838256836],[-80.56116485595703,27.162099838256836],[-80.55540466308594,27.162078857421875],[-80.5543212890625,27.16206932067871]]}},{"type":"Feature","properties":{"ID":122,"Name":"Martin Hwy","From":"Allapattah Rd","To":"I-95","Context_Class":"C2","Service_Capacity":585.0,"AADT_2024":7422.0,"Peak_Hour_Vol_2024":359.0,"LOS_2024":"C","Growth_Rate_2024":0.052,"Comparison_2023":null,"Context_Class_2023":"C2","Service_Capacity_2023":730.0,"AADT_2023":6885.0,"Peak_Hour_Vol_2023":332.95860000000005,"LOS_2023":"C","Growth_Rate_2023":0.04620233952486896,"U_ID":"37","color":"#00F0FF","width":2.6411477392782228,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #00F0FF; margin-bottom: 4px;'>Martin Hwy (ID: 122)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Allapattah Rd  I-95\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C2<br><span style='color: #71717a;'>AADT 2024: \u003c/span>7,422<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>359<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #122\u003c/div><div style='font-size: 14px; font-weight: 600; color: #00F0FF; margin: 4px 0;'>Martin Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Allapattah Rd  I-95\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C2\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>585\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #00F0FF;'>7,422\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>359\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>5.2%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.48182678222656,27.161949157714844],[-80.48141479492188,27.16193962097168],[-80.48114776611328,27.16191864013672],[-80.48060607910156,27.1618595123291],[-80.48027038574219,27.161828994750977],[-80.47909545898438,27.161828994750977],[-80.47504425048828,27.161828994750977],[-80.4723892211914,27.161819458007813],[-80.46173095703125,27.16180992126465],[-80.4328384399414,27.1617488861084],[-80.41291046142578,27.16162872314453],[-80.40531921386719,27.16160011291504],[-80.40265655517578,27.161588668823242],[-80.40149688720703,27.161579132080078],[-80.4013671875,27.16156005859375],[-80.40081024169922,27.161548614501953],[-80.39942932128906,27.161579132080078],[-80.39659118652344,27.16156005859375],[-80.3936996459961,27.16156005859375],[-80.3926773071289,27.161548614501953],[-80.39250946044922,27.161529541015625],[-80.3918685913086,27.16153907775879],[-80.39138793945313,27.161548614501953],[-80.39105987548828,27.161548614501953],[-80.39051055908203,27.16156005859375],[-80.3878402709961,27.161588668823242],[-80.38505554199219,27.16162872314453],[-80.38411712646484,27.161640167236328],[-80.38359069824219,27.16166877746582],[-80.38363647460938,27.161849975585938],[-80.38375854492188,27.16183853149414],[-80.38444519042969,27.16183853149414],[-80.38753509521484,27.161779403686523],[-80.3894271850586,27.1617488861084]]}},{"type":"Feature","properties":{"ID":156,"Name":"Pratt Whitney Rd","From":"Palm Beach County","To":"Bridge Rd","Context_Class":"C2","Service_Capacity":585.0,"AADT_2024":3630.0,"Peak_Hour_Vol_2024":176.0,"LOS_2024":"A","Growth_Rate_2024":0.021,"Comparison_2023":null,"Context_Class_2023":"C2","Service_Capacity_2023":730.0,"AADT_2023":4557.0,"Peak_Hour_Vol_2023":466.40895000000006,"LOS_2023":"D","Growth_Rate_2023":0.08,"U_ID":"28","color":"#00F0FF","width":2.292783757713096,"los_color":"#39FF14","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #00F0FF; margin-bottom: 4px;'>Pratt Whitney Rd (ID: 156)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Palm Beach County  Bridge Rd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C2<br><span style='color: #71717a;'>AADT 2024: \u003c/span>3,630<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>176<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #39FF14; font-weight: bold;'>A\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #156\u003c/div><div style='font-size: 14px; font-weight: 600; color: #00F0FF; margin: 4px 0;'>Pratt Whitney Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Palm Beach County  Bridge Rd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C2\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>585\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #00F0FF;'>3,630\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>176\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #39FF14;'>A\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>2.1%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.28768157958984,26.92984962463379],[-80.28770446777344,26.937358856201172],[-80.2877197265625,26.940719604492188],[-80.2876968383789,26.94080924987793],[-80.28768157958984,26.941530227661133],[-80.28768157958984,26.94198989868164],[-80.28768157958984,26.943510055541992],[-80.28765869140625,26.94392967224121],[-80.28759002685547,26.944778442382813],[-80.28754425048828,26.945209503173828],[-80.28752136230469,26.94586944580078],[-80.28753662109375,26.945968627929688],[-80.28753662109375,26.946378707885742],[-80.2874984741211,26.950288772583008],[-80.28746795654297,26.95395851135254],[-80.28743743896484,26.957229614257813],[-80.28736114501953,26.964139938354492],[-80.28731536865234,26.9689884185791],[-80.28728485107422,26.97188949584961],[-80.28726959228516,26.97247886657715],[-80.28720092773438,26.973129272460938],[-80.28705596923828,26.973918914794922],[-80.28692626953125,26.974458694458008],[-80.28678131103516,26.97494888305664],[-80.28665161132813,26.975299835205078],[-80.28641510009766,26.975849151611328],[-80.28617095947266,26.97637939453125],[-80.28594970703125,26.97677993774414],[-80.28559112548828,26.97736930847168],[-80.28490447998047,26.978368759155273],[-80.28389739990234,26.979869842529297],[-80.28065490722656,26.984649658203125],[-80.27520751953125,26.99268913269043],[-80.27005004882813,27.000308990478516],[-80.2654800415039,27.007049560546875],[-80.26480102539063,27.008039474487305],[-80.26454162597656,27.008440017700195],[-80.26409912109375,27.009140014648438],[-80.26356506347656,27.01015853881836],[-80.26327514648438,27.0108585357666],[-80.26298522949219,27.011709213256836],[-80.26287078857422,27.012168884277344],[-80.2627182006836,27.012840270996094],[-80.26263427734375,27.013269424438477],[-80.26255798339844,27.013948440551758],[-80.26251983642578,27.01447868347168],[-80.26250457763672,27.014999389648438],[-80.26271057128906,27.022668838500977],[-80.2627944946289,27.02614974975586],[-80.26290130615234,27.030010223388672],[-80.2630844116211,27.037839889526367],[-80.26322937011719,27.043058395385742],[-80.26325988769531,27.04416847229004],[-80.26323699951172,27.046449661254883],[-80.26316833496094,27.055389404296875],[-80.26314544677734,27.05722999572754],[-80.2631607055664,27.058578491210938]]}},{"type":"Feature","properties":{"ID":157,"Name":"Pratt Whitney Rd","From":"Bridge Rd","To":"Meadowlark Cir","Context_Class":"C2","Service_Capacity":585.0,"AADT_2024":4489.0,"Peak_Hour_Vol_2024":217.0,"LOS_2024":"B","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C2","Service_Capacity_2023":730.0,"AADT_2023":5438.0,"Peak_Hour_Vol_2023":302.29841999999996,"LOS_2023":"C","Growth_Rate_2023":0.04374889713447771,"U_ID":"29","color":"#00F0FF","width":2.37169848876912,"los_color":"#39FF14","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #00F0FF; margin-bottom: 4px;'>Pratt Whitney Rd (ID: 157)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Bridge Rd  Meadowlark Cir\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C2<br><span style='color: #71717a;'>AADT 2024: \u003c/span>4,489<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>217<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #39FF14; font-weight: bold;'>B\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #157\u003c/div><div style='font-size: 14px; font-weight: 600; color: #00F0FF; margin: 4px 0;'>Pratt Whitney Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Bridge Rd  Meadowlark Cir\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C2\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>585\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #00F0FF;'>4,489\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>217\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #39FF14;'>B\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.2631607055664,27.058578491210938],[-80.26311492919922,27.06797981262207]]}},{"type":"Feature","properties":{"ID":172,"Name":"Warfield Blvd","From":"Okeechobee County","To":"Fox Brown Rd","Context_Class":"C2","Service_Capacity":585.0,"AADT_2024":7450.0,"Peak_Hour_Vol_2024":361.0,"LOS_2024":"C","Growth_Rate_2024":0.033,"Comparison_2023":null,"Context_Class_2023":"C2","Service_Capacity_2023":730.0,"AADT_2023":7253.0,"Peak_Hour_Vol_2023":307.16455,"LOS_2023":"C","Growth_Rate_2023":0.03388013258111266,"U_ID":"143","color":"#00F0FF","width":2.6437200471589777,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #00F0FF; margin-bottom: 4px;'>Warfield Blvd (ID: 172)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Okeechobee County  Fox Brown Rd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C2<br><span style='color: #71717a;'>AADT 2024: \u003c/span>7,450<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>361<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #172\u003c/div><div style='font-size: 14px; font-weight: 600; color: #00F0FF; margin: 4px 0;'>Warfield Blvd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Okeechobee County  Fox Brown Rd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C2\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>585\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #00F0FF;'>7,450\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>361\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>3.3%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.65546417236328,27.144569396972656],[-80.64969635009766,27.140748977661133],[-80.64412689208984,27.1370792388916],[-80.62960052490234,27.12744903564453],[-80.62487030029297,27.12428855895996],[-80.607177734375,27.11256980895996],[-80.58271026611328,27.096349716186523],[-80.56098175048828,27.081939697265625],[-80.54873657226563,27.07383918762207],[-80.54383087158203,27.07056999206543],[-80.53074645996094,27.061908721923828],[-80.51494598388672,27.051408767700195]]}},{"type":"Feature","properties":{"ID":173,"Name":"Warfield Blvd","From":"Fox Brown Rd","To":"Allapattah Rd","Context_Class":"C2","Service_Capacity":585.0,"AADT_2024":8777.0,"Peak_Hour_Vol_2024":425.0,"LOS_2024":"C","Growth_Rate_2024":0.034,"Comparison_2023":null,"Context_Class_2023":"C2","Service_Capacity_2023":730.0,"AADT_2023":8597.0,"Peak_Hour_Vol_2023":362.10564,"LOS_2023":"C","Growth_Rate_2023":0.03752934493376214,"U_ID":"142","color":"#00F0FF","width":2.7656290670790526,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #00F0FF; margin-bottom: 4px;'>Warfield Blvd (ID: 173)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Fox Brown Rd  Allapattah Rd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C2<br><span style='color: #71717a;'>AADT 2024: \u003c/span>8,777<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>425<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #173\u003c/div><div style='font-size: 14px; font-weight: 600; color: #00F0FF; margin: 4px 0;'>Warfield Blvd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Fox Brown Rd  Allapattah Rd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C2\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>585\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #00F0FF;'>8,777\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>425\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>3.4%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.51494598388672,27.051408767700195],[-80.51399993896484,27.05078887939453],[-80.51274871826172,27.049949645996094],[-80.51044464111328,27.048429489135742],[-80.50526428222656,27.04498863220215],[-80.49679565429688,27.03936004638672],[-80.48925018310547,27.03434944152832],[-80.48492431640625,27.0314884185791],[-80.48455810546875,27.03125],[-80.4841079711914,27.03101921081543],[-80.4836196899414,27.030818939208984],[-80.48303985595703,27.030658721923828],[-80.4823989868164,27.030488967895508]]}},{"type":"Feature","properties":{"ID":176,"Name":"Warfield Blvd","From":"Citrus Blvd","To":"Kanner Hwy","Context_Class":"C2","Service_Capacity":2910.0,"AADT_2024":12868.0,"Peak_Hour_Vol_2024":623.0,"LOS_2024":"A","Growth_Rate_2024":0.032,"Comparison_2023":null,"Context_Class_2023":"C2","Service_Capacity_2023":2910.0,"AADT_2023":12617.0,"Peak_Hour_Vol_2023":544.54972,"LOS_2023":"A/B","Growth_Rate_2023":0.03485853197912902,"U_ID":"140","color":"#00F0FF","width":3.1414616220851004,"los_color":"#39FF14","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #00F0FF; margin-bottom: 4px;'>Warfield Blvd (ID: 176)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Citrus Blvd  Kanner Hwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C2<br><span style='color: #71717a;'>AADT 2024: \u003c/span>12,868<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>623<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #39FF14; font-weight: bold;'>A\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #176\u003c/div><div style='font-size: 14px; font-weight: 600; color: #00F0FF; margin: 4px 0;'>Warfield Blvd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Citrus Blvd  Kanner Hwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C2\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>2910\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #00F0FF;'>12,868\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>623\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #39FF14;'>A\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>3.2%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.46139526367188,27.017019271850586],[-80.46028900146484,27.0162296295166],[-80.46026611328125,27.016149520874023],[-80.46012878417969,27.01599884033203],[-80.45912170410156,27.01521873474121],[-80.45784759521484,27.01428985595703],[-80.45629119873047,27.013158798217773],[-80.4553451538086,27.012470245361328],[-80.454345703125,27.011730194091797]]}},{"type":"Feature","properties":{"ID":177,"Name":"Warfield Blvd","From":"Kanner Hwy","To":"Palm Beach County","Context_Class":"C2","Service_Capacity":2910.0,"AADT_2024":9678.0,"Peak_Hour_Vol_2024":468.0,"LOS_2024":"A","Growth_Rate_2024":0.068,"Comparison_2023":null,"Context_Class_2023":"C2","Service_Capacity_2023":2910.0,"AADT_2023":9176.0,"Peak_Hour_Vol_2023":413.8375999999999,"LOS_2023":"A/B","Growth_Rate_2023":0.07157623602022256,"U_ID":"139","color":"#00F0FF","width":2.8484022599562095,"los_color":"#39FF14","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #00F0FF; margin-bottom: 4px;'>Warfield Blvd (ID: 177)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Kanner Hwy  Palm Beach County\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C2<br><span style='color: #71717a;'>AADT 2024: \u003c/span>9,678<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>468<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #39FF14; font-weight: bold;'>A\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #177\u003c/div><div style='font-size: 14px; font-weight: 600; color: #00F0FF; margin: 4px 0;'>Warfield Blvd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Kanner Hwy  Palm Beach County\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C2\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>2910\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #00F0FF;'>9,678\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>468\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #39FF14;'>A\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>6.8%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.454345703125,27.011730194091797],[-80.45288848876953,27.010669708251953],[-80.4518051147461,27.00990867614746],[-80.45063781738281,27.00909996032715],[-80.45005798339844,27.008699417114258],[-80.44898986816406,27.00790023803711],[-80.447265625,27.00663948059082],[-80.44638061523438,27.006010055541992],[-80.44462585449219,27.00482940673828],[-80.44239044189453,27.003339767456055],[-80.44224548339844,27.003488540649414],[-80.44416046142578,27.004749298095703],[-80.44464111328125,27.00507926940918],[-80.44690704345703,27.00667953491211],[-80.44881439208984,27.008079528808594],[-80.44973754882813,27.00874900817871],[-80.45127868652344,27.009849548339844],[-80.4517593383789,27.010169982910156],[-80.45354461669922,27.011459350585938],[-80.45469665527344,27.01228904724121],[-80.45547485351563,27.012859344482422],[-80.45626068115234,27.01342010498047],[-80.45867919921875,27.01519012451172],[-80.45913696289063,27.015539169311523],[-80.45999145507813,27.01616859436035],[-80.4601058959961,27.01620864868164],[-80.460205078125,27.0162296295166],[-80.46028900146484,27.0162296295166],[-80.46115112304688,27.016849517822266],[-80.46131896972656,27.01696014404297],[-80.46192169189453,27.017370223999023],[-80.46316528320313,27.0181884765625],[-80.46369171142578,27.018539428710938],[-80.46488952636719,27.019338607788086],[-80.46696472167969,27.020729064941406],[-80.47354125976563,27.025089263916016],[-80.47650909423828,27.02703857421875],[-80.47998809814453,27.029348373413086],[-80.48072814941406,27.029829025268555],[-80.48117065429688,27.030078887939453],[-80.4815673828125,27.030248641967773],[-80.48214721679688,27.03042984008789],[-80.4828109741211,27.03059959411621],[-80.48333740234375,27.030738830566406],[-80.48387908935547,27.030920028686523],[-80.48436737060547,27.031139373779297],[-80.48477935791016,27.031389236450195],[-80.48672485351563,27.032678604125977],[-80.49459075927734,27.037899017333984],[-80.505126953125,27.044898986816406],[-80.50914764404297,27.047578811645508],[-80.51127624511719,27.048978805541992],[-80.51274871826172,27.049949645996094],[-80.51399993896484,27.05078887939453],[-80.51782989501953,27.053329467773438],[-80.52044677734375,27.055068969726563],[-80.52903747558594,27.06077003479004],[-80.54349517822266,27.07036018371582],[-80.54837036132813,27.073579788208008],[-80.55137634277344,27.075590133666992],[-80.55623626708984,27.078800201416016],[-80.55690002441406,27.079238891601563]]}}]},"generateId":true},"source_layer":null,"paint":{"line-color":"#00F0FF","line-opacity":0.85,"line-translate-anchor":"map","line-width":4},"layout":{"visibility":"visible"},"slot":null,"minzoom":null,"maxzoom":null,"popup":"popup_html","tooltip":"tooltip_html","hover_options":null,"before_id":null,"filter":null},{"id":"routes_C2T","type":"line","source":{"type":"geojson","data":{"type":"FeatureCollection","features":[{"type":"Feature","properties":{"ID":174,"Name":"Warfield Blvd","From":"Allapattah Rd","To":"Van Buren","Context_Class":"C2T","Service_Capacity":870.0,"AADT_2024":14587.0,"Peak_Hour_Vol_2024":738.0,"LOS_2024":"D","Growth_Rate_2024":0.034,"Comparison_2023":null,"Context_Class_2023":"C2_T","Service_Capacity_2023":940.0,"AADT_2023":14316.0,"Peak_Hour_Vol_2023":810.8582399999999,"LOS_2023":"C","Growth_Rate_2023":0.03793614003890155,"U_ID":"141-1","color":"#BC13FE","width":3.2993829523357476,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #BC13FE; margin-bottom: 4px;'>Warfield Blvd (ID: 174)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Allapattah Rd  Van Buren\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C2T<br><span style='color: #71717a;'>AADT 2024: \u003c/span>14,587<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>738<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>D\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #174\u003c/div><div style='font-size: 14px; font-weight: 600; color: #BC13FE; margin: 4px 0;'>Warfield Blvd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Allapattah Rd  Van Buren\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C2T\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>870\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #BC13FE;'>14,587\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>738\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>D\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>3.4%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.4823989868164,27.030488967895508],[-80.48199462890625,27.0303897857666],[-80.4814682006836,27.030208587646484],[-80.48101806640625,27.029998779296875],[-80.48059844970703,27.029748916625977],[-80.47993469238281,27.02931022644043],[-80.47917938232422,27.028820037841797],[-80.47650146484375,27.027029037475586],[-80.47516632080078,27.026168823242188],[-80.47220611572266,27.02420997619629]]}},{"type":"Feature","properties":{"ID":175,"Name":"Warfield Blvd","From":"Van Buren","To":"Citrus Blvd","Context_Class":"C2T","Service_Capacity":1790.0,"AADT_2024":14587.0,"Peak_Hour_Vol_2024":738.0,"LOS_2024":"C","Growth_Rate_2024":0.034,"Comparison_2023":null,"Context_Class_2023":"C2_T","Service_Capacity_2023":940.0,"AADT_2023":14316.0,"Peak_Hour_Vol_2023":810.8582399999999,"LOS_2023":"C","Growth_Rate_2023":0.03793614003890155,"U_ID":"141-2","color":"#BC13FE","width":3.2993829523357476,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #BC13FE; margin-bottom: 4px;'>Warfield Blvd (ID: 175)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Van Buren  Citrus Blvd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C2T<br><span style='color: #71717a;'>AADT 2024: \u003c/span>14,587<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>738<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #175\u003c/div><div style='font-size: 14px; font-weight: 600; color: #BC13FE; margin: 4px 0;'>Warfield Blvd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Van Buren  Citrus Blvd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C2T\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1790\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #BC13FE;'>14,587\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>738\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>3.4%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.47220611572266,27.02420997619629],[-80.4649887084961,27.0194091796875],[-80.46387481689453,27.01866912841797],[-80.46334075927734,27.018299102783203],[-80.462158203125,27.017528533935547],[-80.46139526367188,27.017019271850586]]}}]},"generateId":true},"source_layer":null,"paint":{"line-color":"#BC13FE","line-opacity":0.85,"line-translate-anchor":"map","line-width":4},"layout":{"visibility":"visible"},"slot":null,"minzoom":null,"maxzoom":null,"popup":"popup_html","tooltip":"tooltip_html","hover_options":null,"before_id":null,"filter":null},{"id":"routes_C3C","type":"line","source":{"type":"geojson","data":{"type":"FeatureCollection","features":[{"type":"Feature","properties":{"ID":17,"Name":"Britt Rd","From":"Pine Lake Dr","To":"Federal Hwy","Context_Class":"C3C","Service_Capacity":1125.0,"AADT_2024":3792.0,"Peak_Hour_Vol_2024":198.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":1125.0,"AADT_2023":4492.0,"Peak_Hour_Vol_2023":203.75712000000004,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"3","color":"#FFFF00","width":2.307666396166036,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Britt Rd (ID: 17)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Pine Lake Dr  Federal Hwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>3,792<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>198<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #17\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Britt Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Pine Lake Dr  Federal Hwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1125\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>3,792\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>198\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.27713775634766,27.23448944091797],[-80.27536010742188,27.23448944091797],[-80.27494049072266,27.234560012817383],[-80.27459716796875,27.23468017578125],[-80.27302551269531,27.23535919189453],[-80.27278137207031,27.235448837280273],[-80.27214813232422,27.23571014404297],[-80.2715072631836,27.236000061035156],[-80.27034759521484,27.236459732055664],[-80.26956176757813,27.23680877685547],[-80.26919555664063,27.236949920654297],[-80.26898956298828,27.23695945739746],[-80.2690200805664,27.237089157104492],[-80.26921081542969,27.237070083618164]]}},{"type":"Feature","properties":{"ID":22,"Name":"Commerce Ave","From":"Salerno Rd","To":"Monroe St","Context_Class":"C3C","Service_Capacity":855.0,"AADT_2024":6194.0,"Peak_Hour_Vol_2024":324.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":855.0,"AADT_2023":6257.0,"Peak_Hour_Vol_2023":297.2075,"LOS_2023":"TCEA","Growth_Rate_2023":0.005,"U_ID":"4","color":"#FFFF00","width":2.5283336650793893,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Commerce Ave (ID: 22)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Salerno Rd  Monroe St\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>6,194<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>324<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #22\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Commerce Ave\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Salerno Rd  Monroe St\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>855\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>6,194\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>324\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.1994400024414,27.144760131835938],[-80.20008850097656,27.146089553833008],[-80.20054626464844,27.147029876708984],[-80.20066833496094,27.147218704223633],[-80.20088958740234,27.14746856689453],[-80.20099639892578,27.14756965637207],[-80.20191955566406,27.14824867248535],[-80.20280456542969,27.1488094329834],[-80.20298767089844,27.148908615112305],[-80.20331573486328,27.149028778076172],[-80.20359802246094,27.149078369140625],[-80.20381927490234,27.14906883239746],[-80.20415496826172,27.14904022216797],[-80.20439910888672,27.149049758911133],[-80.20479583740234,27.149139404296875],[-80.20508575439453,27.14929962158203],[-80.20524597167969,27.1494197845459],[-80.20539855957031,27.149568557739258],[-80.20552062988281,27.14974021911621],[-80.20559692382813,27.149898529052734],[-80.20573425292969,27.150279998779297],[-80.20585632324219,27.150508880615234],[-80.20603942871094,27.150718688964844],[-80.20614624023438,27.15081024169922],[-80.20679473876953,27.15127944946289],[-80.20822143554688,27.152299880981445],[-80.20951080322266,27.153228759765625],[-80.2106704711914,27.1540584564209],[-80.2115707397461,27.154970169067383],[-80.21176147460938,27.155149459838867]]}},{"type":"Feature","properties":{"ID":23,"Name":"Commerce Ave","From":"Monroe St","To":"Indian St","Context_Class":"C3C","Service_Capacity":855.0,"AADT_2024":6915.0,"Peak_Hour_Vol_2024":361.0,"LOS_2024":"C","Growth_Rate_2024":0.006,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":855.0,"AADT_2023":6777.0,"Peak_Hour_Vol_2023":359.181,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"5","color":"#FFFF00","width":2.5945705930088345,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Commerce Ave (ID: 23)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Monroe St  Indian St\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>6,915<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>361<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #23\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Commerce Ave\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Monroe St  Indian St\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>855\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>6,915\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>361\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.6%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.21176147460938,27.155149459838867],[-80.21231079101563,27.155649185180664],[-80.21263122558594,27.155868530273438],[-80.21300506591797,27.156099319458008],[-80.21463775634766,27.157419204711914],[-80.21590423583984,27.158409118652344],[-80.21646118164063,27.15880012512207],[-80.21720123291016,27.15928840637207],[-80.21817016601563,27.159910202026367],[-80.21875762939453,27.16033935546875],[-80.21898651123047,27.160539627075195],[-80.21923065185547,27.160728454589844],[-80.21952056884766,27.160980224609375],[-80.2201156616211,27.161588668823242],[-80.22026062011719,27.161758422851563],[-80.22209930419922,27.163888931274414],[-80.22317504882813,27.165149688720703],[-80.22343444824219,27.1653995513916],[-80.2236099243164,27.165498733520508],[-80.22396087646484,27.16562843322754],[-80.22420501708984,27.165729522705078],[-80.22438049316406,27.165828704833984],[-80.22463989257813,27.16606903076172],[-80.22480773925781,27.166349411010742],[-80.2249984741211,27.166669845581055],[-80.22503662109375,27.166778564453125]]}},{"type":"Feature","properties":{"ID":40,"Name":"Dixie Hwy","From":"Indian St","To":"Monterey Rd","Context_Class":"C3C","Service_Capacity":1810.0,"AADT_2024":14657.0,"Peak_Hour_Vol_2024":766.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":1810.0,"AADT_2023":16596.0,"Peak_Hour_Vol_2023":858.0132000000001,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"55","color":"#FFFF00","width":3.3058137220376356,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Dixie Hwy (ID: 40)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Indian St  Monterey Rd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>14,657<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>766<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #40\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Dixie Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Indian St  Monterey Rd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1810\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>14,657\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>766\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.2217788696289,27.168039321899414],[-80.22352600097656,27.16977882385254],[-80.22359466552734,27.16990852355957],[-80.22371673583984,27.170040130615234],[-80.22396850585938,27.170289993286133],[-80.22420501708984,27.17055892944336],[-80.22493743896484,27.171308517456055],[-80.22545623779297,27.171838760375977],[-80.2261962890625,27.172578811645508],[-80.2266845703125,27.173049926757813],[-80.22697448730469,27.173250198364258],[-80.22740173339844,27.173460006713867],[-80.22858428955078,27.1739501953125],[-80.22888946533203,27.174129486083984],[-80.22924041748047,27.174388885498047],[-80.22975158691406,27.174888610839844],[-80.23189544677734,27.177059173583984],[-80.2354965209961,27.180660247802734],[-80.2362289428711,27.181398391723633],[-80.23624420166016,27.181379318237305]]}},{"type":"Feature","properties":{"ID":49,"Name":"Federal Hwy","From":"Dharlys St","To":"Osprey St","Context_Class":"C3C","Service_Capacity":1810.0,"AADT_2024":23757.0,"Peak_Hour_Vol_2024":1241.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":1810.0,"AADT_2023":23762.0,"Peak_Hour_Vol_2023":1551.1833599999998,"LOS_2023":"D","Growth_Rate_2023":0.005,"U_ID":"107","color":"#FFFF00","width":4.141813783283061,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Federal Hwy (ID: 49)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Dharlys St  Osprey St\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>23,757<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>1241<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #49\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Federal Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Dharlys St  Osprey St\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1810\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>23,757\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>1241\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.14727783203125,27.083358764648438],[-80.14956665039063,27.08635902404785],[-80.15496826171875,27.093429565429688],[-80.15853881835938,27.09807014465332],[-80.15898132324219,27.09861946105957],[-80.15921020507813,27.098899841308594],[-80.15933990478516,27.098819732666016]]}},{"type":"Feature","properties":{"ID":51,"Name":"Federal Hwy","From":"Seabranch Blvd","To":"Cove Rd","Context_Class":"C3C","Service_Capacity":2680.0,"AADT_2024":34500.0,"Peak_Hour_Vol_2024":1803.0,"LOS_2024":"C","Growth_Rate_2024":0.025,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":2680.0,"AADT_2023":30175.27641301871,"Peak_Hour_Vol_2023":1410.694172308625,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"108","color":"#FFFF00","width":5.128753196245656,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Federal Hwy (ID: 51)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Seabranch Blvd  Cove Rd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>34,500<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>1803<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #51\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Federal Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Seabranch Blvd  Cove Rd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>2680\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>34,500\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>1803\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>2.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.17823791503906,27.116819381713867],[-80.17813110351563,27.116748809814453],[-80.17798614501953,27.116939544677734],[-80.1788101196289,27.117448806762695],[-80.18154907226563,27.118989944458008],[-80.18717956542969,27.12213897705078],[-80.19178771972656,27.12472915649414],[-80.1934814453125,27.125669479370117],[-80.19384002685547,27.1258487701416],[-80.19490814208984,27.1264591217041],[-80.19498443603516,27.12653923034668],[-80.19585418701172,27.127029418945313],[-80.19686126708984,27.127578735351563],[-80.19831085205078,27.128368377685547],[-80.19999694824219,27.129308700561523],[-80.20101165771484,27.129899978637695],[-80.20240020751953,27.13066864013672],[-80.20321655273438,27.131149291992188],[-80.2041244506836,27.131750106811523],[-80.20452880859375,27.132049560546875],[-80.20479583740234,27.132278442382813],[-80.20584106445313,27.133169174194336],[-80.2060546875,27.133338928222656],[-80.20661926269531,27.133909225463867],[-80.20695495605469,27.134288787841797],[-80.20721435546875,27.134599685668945],[-80.20793151855469,27.135488510131836],[-80.20845031738281,27.136259078979492],[-80.20880889892578,27.13681983947754],[-80.20907592773438,27.13684844970703],[-80.20899963378906,27.13671875],[-80.2081069946289,27.13538932800293],[-80.2077407836914,27.134899139404297],[-80.20750427246094,27.1346492767334],[-80.20716094970703,27.134239196777344],[-80.2068862915039,27.133939743041992]]}},{"type":"Feature","properties":{"ID":52,"Name":"Federal Hwy","From":"Cove Rd","To":"Salerno Rd","Context_Class":"C3C","Service_Capacity":2680.0,"AADT_2024":31000.0,"Peak_Hour_Vol_2024":1620.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":2680.0,"AADT_2023":31913.596502955,"Peak_Hour_Vol_2023":1464.8340794856344,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"109","color":"#FFFF00","width":4.807214711151261,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Federal Hwy (ID: 52)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Cove Rd  Salerno Rd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>31,000<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>1620<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #52\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Federal Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Cove Rd  Salerno Rd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>2680\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>31,000\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>1620\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.2068862915039,27.133939743041992],[-80.20682525634766,27.13385009765625],[-80.20661926269531,27.133909225463867],[-80.20695495605469,27.134288787841797],[-80.20745849609375,27.13488006591797],[-80.20817565917969,27.135839462280273],[-80.20880889892578,27.13681983947754],[-80.21065521240234,27.139799118041992],[-80.21096801757813,27.140289306640625],[-80.21112823486328,27.140199661254883]]}},{"type":"Feature","properties":{"ID":53,"Name":"Federal Hwy","From":"Salerno Rd","To":"Monroe St","Context_Class":"C3C","Service_Capacity":2680.0,"AADT_2024":38627.0,"Peak_Hour_Vol_2024":2018.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":2680.0,"AADT_2023":39484.0,"Peak_Hour_Vol_2023":1704.1294400000002,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"110","color":"#FFFF00","width":5.507893004241246,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Federal Hwy (ID: 53)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Salerno Rd  Monroe St\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>38,627<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>2018<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #53\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Federal Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Salerno Rd  Monroe St\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>2680\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>38,627\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>2018\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.21112823486328,27.140199661254883],[-80.21096801757813,27.140289306640625],[-80.21128845214844,27.140789031982422],[-80.21148681640625,27.141109466552734],[-80.21184539794922,27.141679763793945],[-80.21244812011719,27.142648696899414],[-80.212890625,27.143369674682617],[-80.21337890625,27.144128799438477],[-80.21450805664063,27.145938873291016],[-80.21501159667969,27.146728515625],[-80.21678161621094,27.149580001831055],[-80.21717834472656,27.15022850036621],[-80.21754455566406,27.150848388671875],[-80.21804809570313,27.151639938354492],[-80.21812438964844,27.15176010131836],[-80.21826934814453,27.151689529418945]]}},{"type":"Feature","properties":{"ID":54,"Name":"Federal Hwy","From":"Monroe St","To":"Indian St","Context_Class":"C3C","Service_Capacity":2680.0,"AADT_2024":38000.0,"Peak_Hour_Vol_2024":1986.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":2680.0,"AADT_2023":36506.0,"Peak_Hour_Vol_2023":1726.7338,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"111","color":"#FFFF00","width":5.450291681340049,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Federal Hwy (ID: 54)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Monroe St  Indian St\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>38,000<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>1986<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #54\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Federal Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Monroe St  Indian St\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>2680\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>38,000\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>1986\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.21826934814453,27.151689529418945],[-80.21812438964844,27.15176010131836],[-80.21857452392578,27.152488708496094],[-80.21891021728516,27.15300941467285],[-80.21952819824219,27.153959274291992],[-80.22008514404297,27.15489959716797],[-80.22124481201172,27.156749725341797],[-80.22277069091797,27.159198760986328],[-80.22468566894531,27.16227912902832],[-80.22557830810547,27.163719177246094],[-80.22652435302734,27.16524887084961],[-80.2269287109375,27.1658992767334],[-80.22702026367188,27.166019439697266],[-80.22718811035156,27.165958404541016]]}},{"type":"Feature","properties":{"ID":55,"Name":"Federal Hwy","From":"Indian St","To":"Monterey Rd","Context_Class":"C3C","Service_Capacity":2680.0,"AADT_2024":43168.0,"Peak_Hour_Vol_2024":2256.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":2680.0,"AADT_2023":45276.0,"Peak_Hour_Vol_2023":2175.9645600000003,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"112","color":"#FFFF00","width":5.925066221616573,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Federal Hwy (ID: 55)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Indian St  Monterey Rd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>43,168<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>2256<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #55\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Federal Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Indian St  Monterey Rd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>2680\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>43,168\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>2256\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.22718811035156,27.165958404541016],[-80.22713470458984,27.16581916809082],[-80.2269287109375,27.1658992767334],[-80.227294921875,27.16646957397461],[-80.22821807861328,27.167919158935547],[-80.22966003417969,27.170228958129883],[-80.2302474975586,27.171138763427734],[-80.23099517822266,27.17214012145996],[-80.23182678222656,27.173059463500977],[-80.2333755493164,27.17462921142578],[-80.23797607421875,27.17926025390625],[-80.23873901367188,27.180028915405273],[-80.23951721191406,27.180818557739258],[-80.2396469116211,27.18069839477539],[-80.23957061767578,27.18062973022461],[-80.2388916015625,27.179948806762695],[-80.23860931396484,27.179668426513672],[-80.23761749267578,27.178638458251953],[-80.23690795898438,27.17790985107422]]}},{"type":"Feature","properties":{"ID":60,"Name":"Federal Hwy","From":"Joan Jefferson Wy","To":"Wright Blvd","Context_Class":"C3C","Service_Capacity":2680.0,"AADT_2024":58239.0,"Peak_Hour_Vol_2024":3043.0,"LOS_2024":"E","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":2815.0,"AADT_2023":58999.50917985181,"Peak_Hour_Vol_2023":2824.8964995313045,"LOS_2023":"E","Growth_Rate_2023":0.005,"U_ID":"116","color":"#FFFF00","width":7.309610938433035,"los_color":"#FF073A","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Federal Hwy (ID: 60)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Joan Jefferson Wy  Wright Blvd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>58,239<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>3043<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FF073A; font-weight: bold;'>E\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #60\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Federal Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Joan Jefferson Wy  Wright Blvd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>2680\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>58,239\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>3043\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FF073A;'>E\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.2569351196289,27.199199676513672],[-80.25696563720703,27.199199676513672],[-80.2569808959961,27.199289321899414],[-80.2569808959961,27.199378967285156],[-80.25701904296875,27.1995792388916],[-80.25715637207031,27.200119018554688],[-80.25750732421875,27.20115852355957],[-80.2579574584961,27.202579498291016],[-80.25825500488281,27.20380973815918],[-80.2584457397461,27.204710006713867],[-80.25862884521484,27.205718994140625],[-80.2587661743164,27.206649780273438],[-80.25901794433594,27.208768844604492],[-80.25926971435547,27.21017837524414],[-80.25936889648438,27.210668563842773],[-80.25972747802734,27.212129592895508],[-80.2598876953125,27.21269989013672],[-80.26021575927734,27.213729858398438],[-80.26056671142578,27.214698791503906],[-80.26074981689453,27.21516990661621],[-80.26084899902344,27.2154598236084],[-80.26101684570313,27.215898513793945]]}},{"type":"Feature","properties":{"ID":61,"Name":"Federal Hwy","From":"Wright Blvd","To":"Baker Rd","Context_Class":"C3C","Service_Capacity":2680.0,"AADT_2024":52500.0,"Peak_Hour_Vol_2024":2743.0,"LOS_2024":"E","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":2680.0,"AADT_2023":51265.0,"Peak_Hour_Vol_2023":2214.648,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"118","color":"#FFFF00","width":6.7823796910168275,"los_color":"#FF073A","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Federal Hwy (ID: 61)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Wright Blvd  Baker Rd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>52,500<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>2743<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FF073A; font-weight: bold;'>E\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #61\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Federal Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Wright Blvd  Baker Rd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>2680\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>52,500\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>2743\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FF073A;'>E\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.26101684570313,27.215898513793945],[-80.26187133789063,27.218090057373047],[-80.26229858398438,27.219249725341797],[-80.26346588134766,27.222349166870117],[-80.2636489868164,27.222379684448242]]}},{"type":"Feature","properties":{"ID":62,"Name":"Federal Hwy","From":"Baker Rd","To":"Britt Rd","Context_Class":"C3C","Service_Capacity":2680.0,"AADT_2024":52500.0,"Peak_Hour_Vol_2024":2743.0,"LOS_2024":"E","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":2680.0,"AADT_2023":47242.611392625,"Peak_Hour_Vol_2023":2203.39539535203,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"119","color":"#FFFF00","width":6.7823796910168275,"los_color":"#FF073A","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Federal Hwy (ID: 62)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Baker Rd  Britt Rd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>52,500<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>2743<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FF073A; font-weight: bold;'>E\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #62\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Federal Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Baker Rd  Britt Rd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>2680\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>52,500\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>2743\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FF073A;'>E\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.2636489868164,27.222379684448242],[-80.26346588134766,27.222349166870117],[-80.26359558105469,27.222660064697266],[-80.26361846923828,27.22279930114746],[-80.26380157470703,27.22325897216797],[-80.26406860351563,27.223968505859375],[-80.26427459716797,27.224529266357422],[-80.26483154296875,27.225969314575195],[-80.26554107666016,27.227859497070313],[-80.26642608642578,27.230199813842773],[-80.26687622070313,27.23137855529785],[-80.26741027832031,27.232818603515625],[-80.26832580566406,27.23520851135254],[-80.26898956298828,27.23695945739746],[-80.2690200805664,27.237089157104492],[-80.26921081542969,27.237070083618164]]}},{"type":"Feature","properties":{"ID":63,"Name":"Federal Hwy","From":"Britt Rd","To":"Jensen Beach Blvd","Context_Class":"C3C","Service_Capacity":2930.0,"AADT_2024":57000.0,"Peak_Hour_Vol_2024":2978.0,"LOS_2024":"E","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":2930.0,"AADT_2023":55790.0,"Peak_Hour_Vol_2023":2542.9082,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"120","color":"#FFFF00","width":7.19578631470962,"los_color":"#FF073A","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Federal Hwy (ID: 63)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Britt Rd  Jensen Beach Blvd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>57,000<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>2978<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FF073A; font-weight: bold;'>E\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #63\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Federal Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Britt Rd  Jensen Beach Blvd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>2930\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>57,000\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>2978\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FF073A;'>E\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.26922607421875,27.237070083618164],[-80.26919555664063,27.236949920654297],[-80.26898956298828,27.23695945739746],[-80.26913452148438,27.237388610839844],[-80.269775390625,27.239089965820313],[-80.27122497558594,27.24295997619629],[-80.27186584472656,27.24464988708496],[-80.272216796875,27.245569229125977],[-80.27247619628906,27.24557876586914]]}},{"type":"Feature","properties":{"ID":64,"Name":"Federal Hwy","From":"Jensen Beach Blvd","To":"Westmoreland Blvd","Context_Class":"C3C","Service_Capacity":3180.0,"AADT_2024":65754.0,"Peak_Hour_Vol_2024":3436.0,"LOS_2024":"E","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":3180.0,"AADT_2023":65367.0,"Peak_Hour_Vol_2023":2866.99662,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"121","color":"#FFFF00","width":8.0,"los_color":"#FF073A","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Federal Hwy (ID: 64)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Jensen Beach Blvd  Westmoreland Blvd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>65,754<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>3436<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FF073A; font-weight: bold;'>E\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #64\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Federal Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Jensen Beach Blvd  Westmoreland Blvd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>3180\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>65,754\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>3436\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FF073A;'>E\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.27247619628906,27.24557876586914],[-80.27297973632813,27.245498657226563],[-80.27324676513672,27.24542999267578],[-80.27342987060547,27.245349884033203],[-80.27362823486328,27.245229721069336],[-80.2738265991211,27.24553871154785],[-80.27459716796875,27.24675941467285],[-80.27479553222656,27.247108459472656],[-80.27507781982422,27.24757957458496],[-80.27474975585938,27.24778938293457],[-80.27433776855469,27.248029708862305],[-80.2740249633789,27.248258590698242],[-80.27378845214844,27.248289108276367],[-80.27471160888672,27.249649047851563],[-80.27478790283203,27.24976921081543],[-80.27616882324219,27.251798629760742],[-80.2762680053711,27.251930236816406],[-80.2763442993164,27.252079010009766],[-80.27713012695313,27.25322914123535],[-80.27767944335938,27.25404930114746],[-80.27835083007813,27.255020141601563],[-80.27886962890625,27.255769729614258],[-80.27958679199219,27.256818771362305],[-80.28067016601563,27.258419036865234],[-80.28089904785156,27.258769989013672],[-80.28131866455078,27.259368896484375],[-80.28153991699219,27.259288787841797],[-80.2815170288086,27.259260177612305]]}},{"type":"Feature","properties":{"ID":65,"Name":"Federal Hwy","From":"Westmoreland Blvd","To":"St Lucie County","Context_Class":"C3C","Service_Capacity":3180.0,"AADT_2024":62415.0,"Peak_Hour_Vol_2024":3261.0,"LOS_2024":"E","Growth_Rate_2024":0.007,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":3180.0,"AADT_2023":63100.0,"Peak_Hour_Vol_2023":2854.644,"LOS_2023":"C","Growth_Rate_2023":0.01123156033450434,"U_ID":"122","color":"#FFFF00","width":7.693252285219947,"los_color":"#FF073A","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Federal Hwy (ID: 65)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Westmoreland Blvd  St Lucie County\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>62,415<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>3261<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FF073A; font-weight: bold;'>E\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #65\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Federal Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Westmoreland Blvd  St Lucie County\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>3180\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>62,415\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>3261\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FF073A;'>E\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.7%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.2815170288086,27.259260177612305],[-80.28091430664063,27.25838851928711],[-80.28054809570313,27.257869720458984],[-80.2790756225586,27.255680084228516],[-80.27848052978516,27.254779815673828],[-80.27725982666016,27.252960205078125],[-80.27674865722656,27.252199172973633],[-80.27503967285156,27.249738693237305],[-80.2740249633789,27.248258590698242],[-80.27330780029297,27.247159957885742],[-80.2729263305664,27.246559143066406],[-80.27265930175781,27.24601936340332],[-80.27240753173828,27.245458602905273],[-80.27205657958984,27.244548797607422],[-80.27108764648438,27.24203872680664],[-80.26961517333984,27.238100051879883],[-80.26863098144531,27.235458374023438],[-80.2678451538086,27.233449935913086],[-80.26670837402344,27.230409622192383],[-80.26542663574219,27.22702980041504],[-80.26465606689453,27.22498893737793],[-80.26409912109375,27.22351837158203],[-80.26319122314453,27.221078872680664],[-80.26203155517578,27.218059539794922],[-80.26143646240234,27.21651840209961],[-80.2611312866211,27.215669631958008],[-80.26082611083984,27.214889526367188],[-80.2607192993164,27.214609146118164],[-80.26057434082031,27.21419906616211],[-80.26007843017578,27.212739944458008],[-80.259765625,27.21160888671875],[-80.25946807861328,27.210298538208008],[-80.25936126708984,27.209749221801758],[-80.25920104980469,27.208759307861328],[-80.25892639160156,27.20650863647461],[-80.25881958007813,27.20570945739746],[-80.25865936279297,27.2048397064209],[-80.25860595703125,27.204599380493164],[-80.25846862792969,27.203929901123047],[-80.25827026367188,27.203128814697266],[-80.25806427001953,27.202369689941406],[-80.2577896118164,27.201438903808594],[-80.25737762451172,27.200260162353516],[-80.25714874267578,27.199359893798828],[-80.257080078125,27.198848724365234],[-80.25703430175781,27.19809913635254],[-80.25704956054688,27.196998596191406],[-80.25706481933594,27.195968627929688]]}},{"type":"Feature","properties":{"ID":67,"Name":"Goldenrod Rd","From":"Britt Rd","To":"Jensen Beach Blvd","Context_Class":"C3C","Service_Capacity":1810.0,"AADT_2024":5221.0,"Peak_Hour_Vol_2024":273.0,"LOS_2024":"C","Growth_Rate_2024":0.017,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":1810.0,"AADT_2023":4960.0,"Peak_Hour_Vol_2023":280.9344,"LOS_2023":"C","Growth_Rate_2023":0.00770670913835558,"U_ID":"180","color":"#FFFF00","width":2.4389459662231476,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Goldenrod Rd (ID: 67)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Britt Rd  Jensen Beach Blvd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>5,221<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>273<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #67\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Goldenrod Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Britt Rd  Jensen Beach Blvd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1810\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>5,221\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>273\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>1.7%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.26725006103516,27.23785972595215],[-80.26726531982422,27.237810134887695],[-80.26725769042969,27.237709045410156],[-80.26719665527344,27.237628936767578],[-80.26712799072266,27.23760986328125],[-80.26699829101563,27.23760986328125],[-80.26692962646484,27.237659454345703],[-80.26689147949219,27.237730026245117],[-80.26689147949219,27.23781967163086],[-80.2669448852539,27.237899780273438],[-80.26700592041016,27.237939834594727],[-80.2670669555664,27.23794937133789],[-80.26716613769531,27.238208770751953],[-80.26751708984375,27.23925018310547],[-80.26758575439453,27.23944854736328],[-80.26770782470703,27.239620208740234],[-80.26795959472656,27.239870071411133],[-80.26811981201172,27.239990234375],[-80.26823425292969,27.24013900756836],[-80.26831817626953,27.240299224853516],[-80.26834869384766,27.24040985107422],[-80.26837921142578,27.240629196166992],[-80.26838684082031,27.240909576416016],[-80.26848602294922,27.241199493408203],[-80.26861572265625,27.241418838500977],[-80.26866912841797,27.241559982299805],[-80.2686767578125,27.241729736328125],[-80.26866912841797,27.24365997314453],[-80.26866149902344,27.24382972717285],[-80.2685775756836,27.24407958984375],[-80.2684555053711,27.244258880615234],[-80.268310546875,27.244388580322266],[-80.26799011230469,27.24462890625],[-80.26790618896484,27.244718551635742],[-80.26781463623047,27.24483871459961],[-80.2677993774414,27.2448787689209],[-80.26776885986328,27.24493980407715],[-80.2677001953125,27.245149612426758],[-80.2677001953125,27.24540901184082],[-80.2677001953125,27.24553871154785],[-80.26780700683594,27.245529174804688],[-80.26780700683594,27.245399475097656]]}},{"type":"Feature","properties":{"ID":69,"Name":"Goldenrod Rd","From":"Federal Hwy","To":"Westmoreland Blvd","Context_Class":"C3C","Service_Capacity":855.0,"AADT_2024":5213.0,"Peak_Hour_Vol_2024":272.0,"LOS_2024":"C","Growth_Rate_2024":0.024,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":1070.0,"AADT_2023":4795.0,"Peak_Hour_Vol_2023":244.7368,"LOS_2023":"C","Growth_Rate_2023":0.00852047166583869,"U_ID":"178","color":"#FFFF00","width":2.4382110211143604,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Goldenrod Rd (ID: 69)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Federal Hwy  Westmoreland Blvd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>5,213<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>272<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #69\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Goldenrod Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Federal Hwy  Westmoreland Blvd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>855\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>5,213\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>272\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>2.4%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.2764892578125,27.251819610595703],[-80.27685546875,27.251649856567383],[-80.27732849121094,27.251480102539063],[-80.27780151367188,27.25140953063965],[-80.27809143066406,27.251399993896484],[-80.27873992919922,27.25149917602539],[-80.27901458740234,27.251569747924805],[-80.27964782714844,27.251739501953125],[-80.27999877929688,27.251850128173828],[-80.28038787841797,27.252059936523438],[-80.28062438964844,27.252239227294922],[-80.28089904785156,27.252519607543945],[-80.2819595336914,27.254058837890625],[-80.28345489501953,27.25629997253418],[-80.2835693359375,27.256549835205078],[-80.28359985351563,27.25665855407715],[-80.2837142944336,27.257619857788086],[-80.2837905883789,27.258270263671875]]}},{"type":"Feature","properties":{"ID":76,"Name":"High Meadow Ave","From":"Golden Bear Way","To":"Martin Hwy","Context_Class":"C3C","Service_Capacity":1070.0,"AADT_2024":13598.0,"Peak_Hour_Vol_2024":710.0,"LOS_2024":"C","Growth_Rate_2024":0.007,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":1125.0,"AADT_2023":14293.0,"Peak_Hour_Vol_2023":1207.4726400000002,"LOS_2023":"E","Growth_Rate_2023":0.02091980712528784,"U_ID":"34","color":"#FFFF00","width":3.2085253632619315,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>High Meadow Ave (ID: 76)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Golden Bear Way  Martin Hwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>13,598<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>710<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #76\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>High Meadow Ave\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Golden Bear Way  Martin Hwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1070\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>13,598\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>710\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.7%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.29383087158203,27.146459579467773],[-80.29541778564453,27.14874839782715],[-80.29573059082031,27.149259567260742],[-80.29590606689453,27.149629592895508],[-80.29603576660156,27.149919509887695],[-80.29618835449219,27.150348663330078],[-80.2962875366211,27.15077018737793],[-80.2964096069336,27.151439666748047],[-80.29644012451172,27.151729583740234],[-80.29645538330078,27.152238845825195],[-80.29645538330078,27.15302848815918],[-80.29650115966797,27.153959274291992],[-80.2964859008789,27.155088424682617],[-80.29647064208984,27.156660079956055],[-80.29647064208984,27.157739639282227],[-80.29644775390625,27.158979415893555],[-80.29641723632813,27.159889221191406],[-80.29639434814453,27.16014862060547],[-80.29637908935547,27.161319732666016],[-80.29637908935547,27.161428451538086]]}},{"type":"Feature","properties":{"ID":80,"Name":"Indian St","From":"Kanner Hwy","To":"Willoughby Blvd","Context_Class":"C3C","Service_Capacity":1810.0,"AADT_2024":30534.0,"Peak_Hour_Vol_2024":1595.0,"LOS_2024":"D","Growth_Rate_2024":0.008,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":1900.0,"AADT_2023":31136.0,"Peak_Hour_Vol_2023":1787.82912,"LOS_2023":"D","Growth_Rate_2023":0.01525834601131803,"U_ID":"67","color":"#FFFF00","width":4.764404158564407,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Indian St (ID: 80)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Kanner Hwy  Willoughby Blvd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>30,534<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>1595<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>D\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #80\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Indian St\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Kanner Hwy  Willoughby Blvd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1810\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>30,534\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>1595\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>D\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.8%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.2469482421875,27.158309936523438],[-80.24691772460938,27.158248901367188],[-80.2467269897461,27.15829849243164],[-80.24601745605469,27.158559799194336],[-80.24332427978516,27.15958023071289],[-80.24022674560547,27.160768508911133],[-80.24000549316406,27.160869598388672],[-80.24008178710938,27.160980224609375],[-80.24018859863281,27.16092872619629]]}},{"type":"Feature","properties":{"ID":81,"Name":"Indian St","From":"Willoughby Blvd","To":"Federal Hwy","Context_Class":"C3C","Service_Capacity":1810.0,"AADT_2024":28735.0,"Peak_Hour_Vol_2024":1501.0,"LOS_2024":"C","Growth_Rate_2024":0.006,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":1900.0,"AADT_2023":30177.0,"Peak_Hour_Vol_2023":1295.49861,"LOS_2023":"C","Growth_Rate_2023":0.02024604310193001,"U_ID":"68","color":"#FFFF00","width":4.599133377225888,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Indian St (ID: 81)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Willoughby Blvd  Federal Hwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>28,735<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>1501<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #81\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Indian St\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Willoughby Blvd  Federal Hwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1810\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>28,735\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>1501\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.6%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.24018859863281,27.16092872619629],[-80.2401351928711,27.160808563232422],[-80.24000549316406,27.160869598388672],[-80.23844146728516,27.161468505859375],[-80.23701477050781,27.162019729614258],[-80.23463439941406,27.162948608398438],[-80.23310089111328,27.16353988647461],[-80.23201751708984,27.163969039916992],[-80.23189544677734,27.163990020751953],[-80.23104858398438,27.164329528808594],[-80.23050689697266,27.164539337158203],[-80.22901916503906,27.165128707885742],[-80.22713470458984,27.16581916809082],[-80.2262954711914,27.164480209350586],[-80.22571563720703,27.163589477539063],[-80.2253189086914,27.1629695892334],[-80.22486114501953,27.16223907470703],[-80.22468566894531,27.16227912902832],[-80.22529602050781,27.16326904296875],[-80.22557830810547,27.163719177246094],[-80.22652435302734,27.16524887084961],[-80.2269287109375,27.1658992767334],[-80.22702026367188,27.166019439697266],[-80.22718811035156,27.165958404541016]]}},{"type":"Feature","properties":{"ID":91,"Name":"Jack James Dr","From":"Kanner Hwy","To":"Blue Water Wy","Context_Class":"C3C","Service_Capacity":855.0,"AADT_2024":3024.0,"Peak_Hour_Vol_2024":158.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":1070.0,"AADT_2023":3572.0,"Peak_Hour_Vol_2023":251.79028,"LOS_2023":"C","Growth_Rate_2023":0.03340943948089436,"U_ID":"72","color":"#FFFF00","width":2.2371116657224666,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Jack James Dr (ID: 91)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Kanner Hwy  Blue Water Wy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>3,024<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>158<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #91\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Jack James Dr\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Kanner Hwy  Blue Water Wy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>855\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>3,024\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>158\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.26343536376953,27.106609344482422],[-80.26541900634766,27.105098724365234],[-80.26590728759766,27.104719161987305],[-80.26680755615234,27.104000091552734],[-80.26860046386719,27.102298736572266],[-80.26850891113281,27.102149963378906],[-80.26787567138672,27.10276985168457],[-80.26776885986328,27.102869033813477],[-80.2673568725586,27.103269577026367],[-80.26712036132813,27.10348892211914],[-80.2662582397461,27.104249954223633],[-80.26528930664063,27.104978561401367],[-80.26411437988281,27.10588836669922],[-80.26353454589844,27.10630989074707],[-80.26329040527344,27.106510162353516],[-80.26339721679688,27.106639862060547],[-80.26356506347656,27.106840133666992],[-80.26358795166016,27.106908798217773],[-80.26356506347656,27.107019424438477],[-80.2634048461914,27.10717010498047],[-80.26324462890625,27.107328414916992],[-80.26317596435547,27.10748863220215],[-80.26316833496094,27.10763931274414],[-80.26317596435547,27.10771942138672],[-80.26336669921875,27.10805892944336],[-80.26358795166016,27.10845947265625],[-80.26371765136719,27.108659744262695],[-80.26385498046875,27.108789443969727],[-80.2639389038086,27.108848571777344],[-80.26412963867188,27.108928680419922],[-80.26422882080078,27.108959197998047],[-80.26454162597656,27.108980178833008],[-80.26561737060547,27.108779907226563],[-80.26602935791016,27.108699798583984],[-80.2661361694336,27.10870933532715],[-80.26634979248047,27.108739852905273],[-80.2664566040039,27.108779907226563],[-80.26664733886719,27.10887908935547],[-80.26673126220703,27.108949661254883],[-80.2668685913086,27.10910987854004],[-80.2669677734375,27.10931968688965],[-80.26792907714844,27.111339569091797],[-80.2682876586914,27.112079620361328],[-80.26887512207031,27.113309860229492],[-80.27018737792969,27.116098403930664],[-80.27056884765625,27.11688995361328]]}},{"type":"Feature","properties":{"ID":92,"Name":"Jensen Beach Blvd","From":"Federal Hwy","To":"Green River Pkwy","Context_Class":"C3C","Service_Capacity":1810.0,"AADT_2024":25720.0,"Peak_Hour_Vol_2024":1344.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1850.0,"AADT_2023":24707.0,"Peak_Hour_Vol_2023":1334.1780000000003,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"15","color":"#FFFF00","width":4.322150939351717,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Jensen Beach Blvd (ID: 92)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Federal Hwy  Green River Pkwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>25,720<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>1344<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #92\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Jensen Beach Blvd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Federal Hwy  Green River Pkwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1810\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>25,720\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>1344\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.27247619628906,27.24557876586914],[-80.27240753173828,27.245458602905273],[-80.27217102050781,27.24542999267578],[-80.27105712890625,27.245418548583984],[-80.26959991455078,27.24540901184082],[-80.26839447021484,27.245399475097656],[-80.2673568725586,27.245399475097656],[-80.26384735107422,27.245349884033203],[-80.26197814941406,27.245328903198242],[-80.25794982910156,27.245269775390625],[-80.25532531738281,27.245229721069336],[-80.25341796875,27.245220184326172],[-80.2533950805664,27.245338439941406],[-80.2535171508789,27.245349884033203]]}},{"type":"Feature","properties":{"ID":93,"Name":"Jensen Beach Blvd","From":"Green River Pkwy","To":"Savannah Rd","Context_Class":"C3C","Service_Capacity":1810.0,"AADT_2024":25508.0,"Peak_Hour_Vol_2024":1333.0,"LOS_2024":"C","Growth_Rate_2024":0.014,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1945.0,"AADT_2023":24777.0,"Peak_Hour_Vol_2023":1155.59928,"LOS_2023":"C","Growth_Rate_2023":0.01006586583869073,"U_ID":"16","color":"#FFFF00","width":4.302674893968857,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Jensen Beach Blvd (ID: 93)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Green River Pkwy  Savannah Rd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>25,508<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>1333<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #93\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Jensen Beach Blvd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Green River Pkwy  Savannah Rd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1810\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>25,508\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>1333\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>1.4%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.2535171508789,27.245349884033203],[-80.25348663330078,27.245208740234375],[-80.25341796875,27.245220184326172],[-80.25267791748047,27.245208740234375],[-80.25159454345703,27.245189666748047],[-80.24771118164063,27.245140075683594],[-80.24678039550781,27.245119094848633],[-80.24534606933594,27.24510955810547],[-80.24365997314453,27.245100021362305],[-80.24353790283203,27.245149612426758],[-80.24331665039063,27.245140075683594],[-80.24279022216797,27.245140075683594],[-80.24103546142578,27.24510955810547],[-80.23865509033203,27.245079040527344],[-80.23661804199219,27.245038986206055],[-80.23629760742188,27.24500846862793]]}},{"type":"Feature","properties":{"ID":100,"Name":"Kanner Hwy","From":"Waterside","To":"Pratt Whitney Rd / 96th St","Context_Class":"C3C","Service_Capacity":1070.0,"AADT_2024":4272.0,"Peak_Hour_Vol_2024":223.0,"LOS_2024":"C","Growth_Rate_2024":0.08,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":1900.0,"AADT_2023":4251.0,"Peak_Hour_Vol_2023":230.74427999999995,"LOS_2023":"C","Growth_Rate_2023":0.0,"U_ID":"208","color":"#FFFF00","width":2.3517631026932677,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Kanner Hwy (ID: 100)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Waterside  Pratt Whitney Rd / 96th St\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>4,272<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>223<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #100\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Kanner Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Waterside  Pratt Whitney Rd / 96th St\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1070\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>4,272\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>223\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>8%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.28675079345703,27.073678970336914],[-80.28329467773438,27.07946014404297],[-80.28266906738281,27.08051872253418],[-80.28202056884766,27.08160972595215],[-80.28189086914063,27.081789016723633],[-80.28134155273438,27.08271026611328],[-80.28087615966797,27.0833797454834],[-80.28006744384766,27.084598541259766],[-80.27958679199219,27.085399627685547],[-80.27875518798828,27.086759567260742],[-80.27806854248047,27.087940216064453],[-80.27801513671875,27.08803939819336],[-80.27822875976563,27.088069915771484]]}},{"type":"Feature","properties":{"ID":102,"Name":"Kanner Hwy","From":"Locks Rd","To":"Jack James","Context_Class":"C3C","Service_Capacity":1810.0,"AADT_2024":21000.0,"Peak_Hour_Vol_2024":1097.0,"LOS_2024":"C","Growth_Rate_2024":0.018,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":1900.0,"AADT_2023":19212.717476783637,"Peak_Hour_Vol_2023":919.328531264097,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"128","color":"#FFFF00","width":3.888533325167277,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Kanner Hwy (ID: 102)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Locks Rd  Jack James\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>21,000<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>1097<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #102\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Kanner Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Locks Rd  Jack James\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1810\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>21,000\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>1097\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>1.8%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.26860046386719,27.102298736572266],[-80.26850891113281,27.102149963378906],[-80.26787567138672,27.10276985168457],[-80.26776885986328,27.102869033813477],[-80.2673568725586,27.103269577026367],[-80.26712036132813,27.10348892211914],[-80.2662582397461,27.104249954223633],[-80.26528930664063,27.104978561401367],[-80.26411437988281,27.10588836669922],[-80.26294708251953,27.106779098510742],[-80.26216125488281,27.10736846923828],[-80.26197052001953,27.107540130615234],[-80.2611312866211,27.108179092407227],[-80.2606201171875,27.108570098876953],[-80.26052856445313,27.10862922668457],[-80.26023864746094,27.10886001586914],[-80.25981903076172,27.10917854309082],[-80.25959777832031,27.109338760375977],[-80.25965118408203,27.10940933227539],[-80.25969696044922,27.109479904174805],[-80.26036834716797,27.108999252319336],[-80.26069641113281,27.108728408813477],[-80.26171875,27.10795021057129],[-80.26219940185547,27.107580184936523],[-80.2626953125,27.10717010498047],[-80.26343536376953,27.106609344482422]]}},{"type":"Feature","properties":{"ID":103,"Name":"Kanner Hwy","From":"Jack James","To":"Cove Rd","Context_Class":"C3C","Service_Capacity":2680.0,"AADT_2024":51494.0,"Peak_Hour_Vol_2024":2691.0,"LOS_2024":"E","Growth_Rate_2024":0.033,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":2815.0,"AADT_2023":50473.0,"Peak_Hour_Vol_2023":2650.8419599999997,"LOS_2023":"D","Growth_Rate_2023":0.01440094755104648,"U_ID":"129","color":"#FFFF00","width":6.689960343586838,"los_color":"#FF073A","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Kanner Hwy (ID: 103)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Jack James  Cove Rd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>51,494<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>2691<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FF073A; font-weight: bold;'>E\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #103\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Kanner Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Jack James  Cove Rd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>2680\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>51,494\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>2691\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FF073A;'>E\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>3.3%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.26343536376953,27.106609344482422],[-80.26541900634766,27.105098724365234],[-80.26590728759766,27.104719161987305],[-80.26680755615234,27.104000091552734],[-80.26860046386719,27.102298736572266],[-80.26850891113281,27.102149963378906],[-80.26787567138672,27.10276985168457],[-80.26776885986328,27.102869033813477],[-80.2673568725586,27.103269577026367],[-80.26712036132813,27.10348892211914],[-80.2662582397461,27.104249954223633],[-80.26528930664063,27.104978561401367],[-80.26411437988281,27.10588836669922],[-80.26294708251953,27.106779098510742],[-80.26216125488281,27.10736846923828],[-80.26197052001953,27.107540130615234],[-80.2611312866211,27.108179092407227],[-80.2606201171875,27.108570098876953],[-80.26052856445313,27.10862922668457],[-80.26023864746094,27.10886001586914],[-80.25934600830078,27.109539031982422],[-80.2586898803711,27.110118865966797],[-80.25796508789063,27.110809326171875],[-80.25701904296875,27.111848831176758],[-80.25643920898438,27.112598419189453],[-80.25580596923828,27.1135196685791],[-80.25513458251953,27.11452865600586],[-80.25439453125,27.115690231323242],[-80.2543716430664,27.11578941345215],[-80.25450897216797,27.115848541259766],[-80.25455474853516,27.115768432617188]]}},{"type":"Feature","properties":{"ID":104,"Name":"Kanner Hwy","From":"Cove Rd","To":"Salerno Rd","Context_Class":"C3C","Service_Capacity":2680.0,"AADT_2024":39805.0,"Peak_Hour_Vol_2024":2080.0,"LOS_2024":"C","Growth_Rate_2024":0.029,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":2815.0,"AADT_2023":41471.0,"Peak_Hour_Vol_2023":2116.67984,"LOS_2023":"C","Growth_Rate_2023":0.052,"U_ID":"130","color":"#FFFF00","width":5.616113671510159,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Kanner Hwy (ID: 104)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Cove Rd  Salerno Rd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>39,805<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>2080<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #104\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Kanner Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Cove Rd  Salerno Rd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>2680\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>39,805\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>2080\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>2.9%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.25455474853516,27.115768432617188],[-80.25457763671875,27.115739822387695],[-80.25439453125,27.115690231323242],[-80.2543716430664,27.11578941345215],[-80.254150390625,27.116249084472656],[-80.25393676757813,27.11665916442871],[-80.25377655029297,27.117090225219727],[-80.25347900390625,27.117868423461914],[-80.2532958984375,27.118459701538086],[-80.25312805175781,27.119089126586914],[-80.25299072265625,27.11972999572754],[-80.25287628173828,27.12027931213379],[-80.25254821777344,27.122468948364258],[-80.25231170654297,27.124099731445313],[-80.25228118896484,27.124109268188477]]}},{"type":"Feature","properties":{"ID":105,"Name":"Kanner Hwy","From":"Salerno Rd","To":"Indian St","Context_Class":"C3C","Service_Capacity":2680.0,"AADT_2024":35358.0,"Peak_Hour_Vol_2024":1847.0,"LOS_2024":"C","Growth_Rate_2024":0.027,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":2865.0,"AADT_2023":37689.0,"Peak_Hour_Vol_2023":1633.81815,"LOS_2023":"C","Growth_Rate_2023":0.021,"U_ID":"131","color":"#FFFF00","width":5.207576059163081,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Kanner Hwy (ID: 105)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Salerno Rd  Indian St\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>35,358<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>1847<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #105\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Kanner Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Salerno Rd  Indian St\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>2680\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>35,358\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>1847\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>2.7%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.25228118896484,27.124109268188477],[-80.25141906738281,27.124439239501953],[-80.25032043457031,27.124879837036133],[-80.24402618408203,27.127328872680664],[-80.2431869506836,27.127649307250977],[-80.24177551269531,27.128170013427734],[-80.2379379272461,27.12969970703125],[-80.23731994628906,27.129919052124023],[-80.23674011230469,27.13007926940918],[-80.23587799072266,27.130239486694336],[-80.23516082763672,27.13035011291504],[-80.23471069335938,27.130449295043945],[-80.23435974121094,27.13054847717285],[-80.2339096069336,27.130699157714844],[-80.23320770263672,27.13098907470703],[-80.23204040527344,27.131479263305664],[-80.23167419433594,27.13161849975586],[-80.23128509521484,27.131799697875977],[-80.23101043701172,27.131959915161133],[-80.23040008544922,27.132349014282227],[-80.22982025146484,27.132719039916992],[-80.22962951660156,27.132829666137695],[-80.22950744628906,27.132869720458984],[-80.2293472290039,27.132949829101563],[-80.22845458984375,27.133329391479492],[-80.2280502319336,27.13348960876465],[-80.22834777832031,27.13409996032715],[-80.22880554199219,27.135028839111328],[-80.22928619384766,27.136009216308594],[-80.2303695678711,27.138208389282227],[-80.23064422607422,27.1387996673584],[-80.23081970214844,27.13926887512207],[-80.23094177246094,27.139728546142578],[-80.23101043701172,27.14011001586914],[-80.23104858398438,27.1405086517334],[-80.23115539550781,27.141939163208008],[-80.23127746582031,27.143598556518555],[-80.23133850097656,27.14392852783203],[-80.23140716552734,27.14423942565918],[-80.23152923583984,27.14470863342285],[-80.23163604736328,27.14505958557129],[-80.23169708251953,27.145248413085938],[-80.2318344116211,27.14556884765625],[-80.23200988769531,27.145910263061523],[-80.23207092285156,27.146028518676758],[-80.23204803466797,27.146129608154297],[-80.232177734375,27.146469116210938],[-80.23231506347656,27.146808624267578],[-80.23272705078125,27.14760971069336],[-80.23281860351563,27.14781951904297],[-80.23321533203125,27.148670196533203],[-80.23344421386719,27.149198532104492],[-80.23365020751953,27.149778366088867],[-80.23381805419922,27.150558471679688],[-80.23405456542969,27.151988983154297],[-80.234130859375,27.152328491210938],[-80.2342758178711,27.152809143066406],[-80.23455810546875,27.153478622436523],[-80.23487091064453,27.154029846191406],[-80.23519134521484,27.154499053955078],[-80.23564147949219,27.155019760131836],[-80.2364273071289,27.155858993530273],[-80.2379379272461,27.15736961364746],[-80.23835754394531,27.15781021118164],[-80.23873138427734,27.158309936523438],[-80.23892974853516,27.158658981323242],[-80.23974609375,27.160329818725586],[-80.24008178710938,27.160980224609375],[-80.241455078125,27.160438537597656],[-80.2419662475586,27.160228729248047],[-80.2428970336914,27.15989875793457],[-80.24482727050781,27.159210205078125],[-80.24565887451172,27.158899307250977],[-80.24697875976563,27.15839958190918],[-80.2469482421875,27.158309936523438]]}},{"type":"Feature","properties":{"ID":106,"Name":"Kanner Hwy","From":"Indian St","To":"Monterey Rd","Context_Class":"C3C","Service_Capacity":2680.0,"AADT_2024":25569.0,"Peak_Hour_Vol_2024":1336.0,"LOS_2024":"C","Growth_Rate_2024":0.039,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":2680.0,"AADT_2023":25896.0,"Peak_Hour_Vol_2023":1336.0,"LOS_2023":"C","Growth_Rate_2023":0.039,"U_ID":"132","color":"#FFFF00","width":4.308278850423359,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Kanner Hwy (ID: 106)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Indian St  Monterey Rd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>25,569<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>1336<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #106\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Kanner Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Indian St  Monterey Rd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>2680\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>25,569\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>1336\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>3.9%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.2469482421875,27.158309936523438],[-80.24691772460938,27.158248901367188],[-80.2467269897461,27.15829849243164],[-80.24700164794922,27.158958435058594],[-80.24755859375,27.160280227661133],[-80.24813079833984,27.161579132080078],[-80.2487564086914,27.163108825683594],[-80.24932861328125,27.16448974609375],[-80.25013732910156,27.16640853881836],[-80.2506103515625,27.167518615722656],[-80.2510757446289,27.168560028076172],[-80.25148010253906,27.16958999633789],[-80.25167083740234,27.170089721679688],[-80.2520980834961,27.171459197998047],[-80.2522964477539,27.17218017578125],[-80.25244903564453,27.172828674316406],[-80.25260925292969,27.173540115356445],[-80.25291442871094,27.175758361816406],[-80.25306701660156,27.175769805908203],[-80.25305938720703,27.17572021484375]]}},{"type":"Feature","properties":{"ID":107,"Name":"Kanner Hwy","From":"Monterey Rd","To":"Federal Hwy","Context_Class":"C3C","Service_Capacity":2680.0,"AADT_2024":31696.0,"Peak_Hour_Vol_2024":1656.0,"LOS_2024":"C","Growth_Rate_2024":0.047,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":2815.0,"AADT_2023":27309.33074031507,"Peak_Hour_Vol_2023":1092.3732296126027,"LOS_2023":"C","Growth_Rate_2023":0.007,"U_ID":"133","color":"#FFFF00","width":4.871154935615746,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Kanner Hwy (ID: 107)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Monterey Rd  Federal Hwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>31,696<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>1656<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #107\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Kanner Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Monterey Rd  Federal Hwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>2680\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>31,696\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>1656\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>4.7%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.25305938720703,27.17572021484375],[-80.25305938720703,27.175649642944336],[-80.2529067993164,27.175640106201172],[-80.25293731689453,27.17603874206543],[-80.25302124023438,27.177518844604492],[-80.2530288696289,27.179109573364258],[-80.25302124023438,27.18307876586914],[-80.25299835205078,27.19101905822754]]}},{"type":"Feature","properties":{"ID":116,"Name":"Martin Downs Blvd","From":"Florida's Turnpike","To":"High Meadow Ave","Context_Class":"C3C","Service_Capacity":1810.0,"AADT_2024":20429.0,"Peak_Hour_Vol_2024":1067.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":1810.0,"AADT_2023":21489.0,"Peak_Hour_Vol_2023":939.92886,"LOS_2023":"C","Growth_Rate_2023":0.00945669742097687,"U_ID":"146","color":"#FFFF00","width":3.836076618027591,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Martin Downs Blvd (ID: 116)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Florida's Turnpike  High Meadow Ave\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>20,429<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>1067<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #116\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Martin Downs Blvd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Florida's Turnpike  High Meadow Ave\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1810\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>20,429\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>1067\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.30465698242188,27.161588668823242],[-80.3056411743164,27.161588668823242],[-80.30699157714844,27.16153907775879],[-80.30777740478516,27.161529541015625],[-80.30784606933594,27.161529541015625],[-80.30784606933594,27.161378860473633],[-80.30742645263672,27.161399841308594],[-80.3070297241211,27.161418914794922],[-80.30561828613281,27.16145896911621],[-80.30508422851563,27.161449432373047],[-80.30416107177734,27.161428451538086],[-80.30284118652344,27.161388397216797],[-80.30230712890625,27.161359786987305],[-80.30171966552734,27.16135025024414],[-80.30110931396484,27.161359786987305],[-80.30068969726563,27.161338806152344],[-80.30066680908203,27.161479949951172],[-80.30066680908203,27.16197967529297],[-80.30066680908203,27.162208557128906],[-80.30067443847656,27.162858963012695],[-80.30068969726563,27.1635684967041],[-80.30062866210938,27.16415023803711],[-80.30046844482422,27.164838790893555],[-80.30023956298828,27.16543960571289],[-80.30001068115234,27.165969848632813],[-80.2996597290039,27.16676902770996],[-80.29883575439453,27.168668746948242],[-80.29843139648438,27.169639587402344],[-80.29795837402344,27.17068862915039],[-80.29769897460938,27.171119689941406],[-80.29730987548828,27.171539306640625],[-80.29713439941406,27.171669006347656],[-80.29686737060547,27.171859741210938],[-80.2964096069336,27.172100067138672],[-80.29618835449219,27.17222023010254],[-80.29598999023438,27.172279357910156],[-80.29544830322266,27.17238998413086],[-80.2948989868164,27.17241859436035],[-80.29402160644531,27.172409057617188]]}},{"type":"Feature","properties":{"ID":124,"Name":"Martin Hwy","From":"Citrus Blvd / Newfield Pkwy","To":"Florida's Turnpike","Context_Class":"C3C","Service_Capacity":1810.0,"AADT_2024":22115.0,"Peak_Hour_Vol_2024":1156.0,"LOS_2024":"C","Growth_Rate_2024":0.008,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":1810.0,"AADT_2023":22005.0,"Peak_Hour_Vol_2023":1175.067,"LOS_2023":"C","Growth_Rate_2023":0.00828040750569436,"U_ID":"145","color":"#FFFF00","width":3.990966299704491,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Martin Hwy (ID: 124)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Citrus Blvd / Newfield Pkwy  Florida's Turnpike\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>22,115<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>1156<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #124\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Martin Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Citrus Blvd / Newfield Pkwy  Florida's Turnpike\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1810\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>22,115\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>1156\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.8%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.3188705444336,27.161588668823242],[-80.31884002685547,27.161399841308594],[-80.31755828857422,27.161399841308594],[-80.3152084350586,27.161388397216797],[-80.31388854980469,27.161418914794922],[-80.31143951416016,27.161399841308594],[-80.3095474243164,27.161409378051758],[-80.30839538574219,27.161388397216797],[-80.30775451660156,27.161388397216797],[-80.3072280883789,27.161409378051758],[-80.30551147460938,27.16145896911621],[-80.30448150634766,27.161428451538086],[-80.30320739746094,27.161399841308594],[-80.30230712890625,27.161359786987305],[-80.30229949951172,27.161529541015625],[-80.30317687988281,27.16156005859375],[-80.30403137207031,27.161588668823242],[-80.30465698242188,27.161588668823242]]}},{"type":"Feature","properties":{"ID":125,"Name":"Martin Hwy","From":"Florida's Turnpike","To":"High Meadow Ave","Context_Class":"C3C","Service_Capacity":1810.0,"AADT_2024":19056.0,"Peak_Hour_Vol_2024":996.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":1900.0,"AADT_2023":20434.0,"Peak_Hour_Vol_2023":1410.15034,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"38","color":"#FFFF00","width":3.70994166373199,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Martin Hwy (ID: 125)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Florida's Turnpike  High Meadow Ave\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>19,056<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>996<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #125\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Martin Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Florida's Turnpike  High Meadow Ave\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1810\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>19,056\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>996\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.30465698242188,27.161588668823242],[-80.3056411743164,27.161588668823242],[-80.30699157714844,27.16153907775879],[-80.30777740478516,27.161529541015625],[-80.30784606933594,27.161529541015625],[-80.30784606933594,27.161378860473633],[-80.30742645263672,27.161399841308594],[-80.3070297241211,27.161418914794922],[-80.30561828613281,27.16145896911621],[-80.30508422851563,27.161449432373047],[-80.30416107177734,27.161428451538086],[-80.30284118652344,27.161388397216797],[-80.30230712890625,27.161359786987305],[-80.30171966552734,27.16135025024414],[-80.30110931396484,27.161359786987305],[-80.30068969726563,27.161338806152344],[-80.29962921142578,27.161338806152344],[-80.29766082763672,27.161319732666016],[-80.29637908935547,27.161319732666016],[-80.29637908935547,27.161428451538086]]}},{"type":"Feature","properties":{"ID":126,"Name":"Martin Hwy","From":"High Meadow Ave","To":"Mapp Rd","Context_Class":"C3C","Service_Capacity":1810.0,"AADT_2024":22694.0,"Peak_Hour_Vol_2024":1186.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":1900.0,"AADT_2023":22867.0,"Peak_Hour_Vol_2023":1189.54134,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"41","color":"#FFFF00","width":4.044157951952963,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Martin Hwy (ID: 126)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>High Meadow Ave  Mapp Rd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>22,694<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>1186<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #126\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Martin Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>High Meadow Ave  Mapp Rd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1810\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>22,694\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>1186\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.29637908935547,27.161428451538086],[-80.29637908935547,27.161319732666016],[-80.29581451416016,27.16131019592285],[-80.29528045654297,27.16131019592285],[-80.29376983642578,27.161270141601563],[-80.29287719726563,27.1612491607666],[-80.291748046875,27.161239624023438],[-80.29090881347656,27.161230087280273],[-80.2907943725586,27.16131019592285],[-80.2900161743164,27.161298751831055],[-80.2895278930664,27.16128921508789],[-80.28827667236328,27.161279678344727],[-80.28636169433594,27.161270141601563],[-80.28434753417969,27.161239624023438],[-80.28385925292969,27.161230087280273],[-80.28364562988281,27.161169052124023],[-80.28353881835938,27.161169052124023],[-80.28328704833984,27.161169052124023],[-80.2828369140625,27.161149978637695],[-80.28176879882813,27.1611385345459],[-80.28031921386719,27.161128997802734],[-80.27684783935547,27.16109848022461],[-80.27415466308594,27.161088943481445],[-80.27117919921875,27.161048889160156],[-80.26945495605469,27.161039352416992],[-80.26934814453125,27.161039352416992],[-80.26934051513672,27.161190032958984],[-80.26940155029297,27.161190032958984]]}},{"type":"Feature","properties":{"ID":129,"Name":"Monroe St","From":"Federal Hwy","To":"Commerce Ave","Context_Class":"C3C","Service_Capacity":855.0,"AADT_2024":1655.0,"Peak_Hour_Vol_2024":86.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":1070.0,"AADT_2023":1620.0,"Peak_Hour_Vol_2023":113.643,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"82","color":"#FFFF00","width":2.111344183981259,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Monroe St (ID: 129)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Federal Hwy  Commerce Ave\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>1,655<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>86<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #129\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Monroe St\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Federal Hwy  Commerce Ave\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>855\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>1,655\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>86\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.21826934814453,27.151689529418945],[-80.21733856201172,27.152099609375],[-80.2153549194336,27.15287971496582],[-80.2151107788086,27.15298843383789],[-80.21503448486328,27.15304946899414],[-80.21498107910156,27.15312957763672],[-80.21475982666016,27.15361976623535],[-80.214599609375,27.15386962890625],[-80.21451568603516,27.153940200805664],[-80.21432495117188,27.15407943725586],[-80.21416473388672,27.1541690826416],[-80.21366882324219,27.154359817504883],[-80.2127685546875,27.154708862304688],[-80.21173095703125,27.155118942260742],[-80.21176147460938,27.155149459838867]]}},{"type":"Feature","properties":{"ID":130,"Name":"Monterey Rd","From":"Kanner Hwy","To":"Willoughby Blvd","Context_Class":"C3C","Service_Capacity":1810.0,"AADT_2024":25608.0,"Peak_Hour_Vol_2024":1338.0,"LOS_2024":"C","Growth_Rate_2024":0.027,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":1810.0,"AADT_2023":26408.0,"Peak_Hour_Vol_2023":1197.8668800000005,"LOS_2023":"C","Growth_Rate_2023":0.0412554129608127,"U_ID":"83","color":"#FFFF00","width":4.3118617078286965,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Monterey Rd (ID: 130)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Kanner Hwy  Willoughby Blvd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>25,608<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>1338<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #130\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Monterey Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Kanner Hwy  Willoughby Blvd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1810\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>25,608\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>1338\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>2.7%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.25305938720703,27.17572021484375],[-80.25305938720703,27.175649642944336],[-80.2529067993164,27.175640106201172],[-80.25235748291016,27.175640106201172],[-80.25068664550781,27.175649642944336],[-80.25030517578125,27.17568016052246],[-80.2498550415039,27.17568016052246],[-80.24897003173828,27.175668716430664],[-80.24762725830078,27.175668716430664],[-80.24730682373047,27.1756591796875],[-80.2469711303711,27.1756591796875]]}},{"type":"Feature","properties":{"ID":131,"Name":"Monterey Rd","From":"Willoughby Blvd","To":"Monterey Extension","Context_Class":"C3C","Service_Capacity":1810.0,"AADT_2024":25781.0,"Peak_Hour_Vol_2024":1347.0,"LOS_2024":"C","Growth_Rate_2024":0.008,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":1810.0,"AADT_2023":25813.0,"Peak_Hour_Vol_2023":1310.26788,"LOS_2023":"C","Growth_Rate_2023":0.01091600800206316,"U_ID":"84","color":"#FFFF00","width":4.327754895806219,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Monterey Rd (ID: 131)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Willoughby Blvd  Monterey Extension\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>25,781<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>1347<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #131\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Monterey Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Willoughby Blvd  Monterey Extension\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1810\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>25,781\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>1347\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.8%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.2469711303711,27.1756591796875],[-80.24435424804688,27.175628662109375],[-80.2418441772461,27.175600051879883],[-80.24054718017578,27.175588607788086],[-80.24041748046875,27.175548553466797]]}},{"type":"Feature","properties":{"ID":132,"Name":"Monterey Rd","From":"Monterey Extension","To":"Federal Hwy","Context_Class":"C3C","Service_Capacity":1810.0,"AADT_2024":18335.0,"Peak_Hour_Vol_2024":958.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":1900.0,"AADT_2023":18812.0,"Peak_Hour_Vol_2023":874.3817600000002,"LOS_2023":"C","Growth_Rate_2023":0.00919099286422109,"U_ID":"85","color":"#FFFF00","width":3.6437047358025447,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Monterey Rd (ID: 132)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Monterey Extension  Federal Hwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>18,335<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>958<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #132\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Monterey Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Monterey Extension  Federal Hwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1810\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>18,335\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>958\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.24041748046875,27.175548553466797],[-80.24016571044922,27.175519943237305],[-80.23997497558594,27.175519943237305],[-80.23944091796875,27.175539016723633],[-80.23931121826172,27.175569534301758],[-80.23908996582031,27.175579071044922],[-80.23873901367188,27.175579071044922],[-80.23844909667969,27.175579071044922],[-80.2373046875,27.175548553466797],[-80.23638153076172,27.17552947998047],[-80.23527526855469,27.175519943237305],[-80.2344970703125,27.175508499145508],[-80.23424530029297,27.175508499145508],[-80.23511505126953,27.176380157470703],[-80.2357406616211,27.17698860168457],[-80.23625946044922,27.177509307861328],[-80.237548828125,27.17881965637207],[-80.23793029785156,27.179208755493164],[-80.23826599121094,27.1795597076416],[-80.23942565917969,27.180728912353516],[-80.23951721191406,27.180818557739258],[-80.2396469116211,27.18069839477539],[-80.23929595947266,27.18035888671875],[-80.23870849609375,27.17976951599121],[-80.23770904541016,27.178739547729492],[-80.23690795898438,27.17790985107422]]}},{"type":"Feature","properties":{"ID":133,"Name":"Monterey Rd","From":"Federal Hwy","To":"Dixie Hwy","Context_Class":"C3C","Service_Capacity":1720.0,"AADT_2024":20257.0,"Peak_Hour_Vol_2024":1058.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":1900.0,"AADT_2023":20071.0,"Peak_Hour_Vol_2023":1264.07158,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"86","color":"#FFFF00","width":3.8202752981886663,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Monterey Rd (ID: 133)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Federal Hwy  Dixie Hwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>20,257<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>1058<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #133\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Monterey Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Federal Hwy  Dixie Hwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1720\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>20,257\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>1058\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.23690795898438,27.17790985107422],[-80.23686981201172,27.177860260009766],[-80.2366714477539,27.177928924560547],[-80.2366714477539,27.178089141845703],[-80.2366714477539,27.178159713745117],[-80.23664093017578,27.17940902709961],[-80.23661804199219,27.180368423461914],[-80.23655700683594,27.1806697845459],[-80.23645782470703,27.18096923828125],[-80.2363052368164,27.1812686920166],[-80.23624420166016,27.181379318237305]]}},{"type":"Feature","properties":{"ID":134,"Name":"Monterey Rd","From":"Dixie Hwy","To":"Ocean Blvd","Context_Class":"C3C","Service_Capacity":1810.0,"AADT_2024":19186.0,"Peak_Hour_Vol_2024":1002.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":1810.0,"AADT_2023":19912.0,"Peak_Hour_Vol_2023":893.65056,"LOS_2023":"C","Growth_Rate_2023":0.00614487819513742,"U_ID":"87","color":"#FFFF00","width":3.721884521749782,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Monterey Rd (ID: 134)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Dixie Hwy  Ocean Blvd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>19,186<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>1002<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #134\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Monterey Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Dixie Hwy  Ocean Blvd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1810\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>19,186\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>1002\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.23624420166016,27.181379318237305],[-80.23597717285156,27.181699752807617],[-80.23575592041016,27.181888580322266],[-80.2354507446289,27.18208885192871],[-80.23526000976563,27.182119369506836],[-80.23320770263672,27.182918548583984],[-80.23143005371094,27.183609008789063],[-80.23067474365234,27.18389892578125],[-80.22992706298828,27.184160232543945],[-80.22908020019531,27.184410095214844],[-80.22785949707031,27.184688568115234],[-80.2256088256836,27.185209274291992],[-80.22528839111328,27.1853084564209],[-80.22496795654297,27.185449600219727],[-80.2247543334961,27.185569763183594],[-80.22438049316406,27.185869216918945],[-80.22413635253906,27.186119079589844],[-80.2239990234375,27.18631935119629],[-80.22386169433594,27.186559677124023],[-80.22378540039063,27.18671989440918],[-80.22370147705078,27.18701934814453],[-80.22364807128906,27.18733024597168],[-80.22364807128906,27.18777847290039],[-80.22368621826172,27.18825912475586],[-80.22390747070313,27.19072914123535],[-80.2239761352539,27.191539764404297],[-80.22399139404297,27.191648483276367],[-80.22406005859375,27.191740036010742],[-80.2240982055664,27.19209861755371],[-80.22410583496094,27.19234848022461],[-80.22412109375,27.192649841308594],[-80.22415161132813,27.193300247192383],[-80.22415161132813,27.19365882873535],[-80.22413635253906,27.194700241088867],[-80.22410583496094,27.195919036865234],[-80.2240982055664,27.197349548339844]]}},{"type":"Feature","properties":{"ID":143,"Name":"Ocean Blvd","From":"Monterey Rd","To":"St Lucie Blvd","Context_Class":"C3C","Service_Capacity":1810.0,"AADT_2024":20313.0,"Peak_Hour_Vol_2024":1061.0,"LOS_2024":"C","Growth_Rate_2024":0.009,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":1900.0,"AADT_2023":20956.0,"Peak_Hour_Vol_2023":1110.668,"LOS_2023":"C","Growth_Rate_2023":0.019,"U_ID":"153","color":"#FFFF00","width":3.825419913950177,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Ocean Blvd (ID: 143)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Monterey Rd  St Lucie Blvd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>20,313<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>1061<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #143\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Ocean Blvd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Monterey Rd  St Lucie Blvd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1810\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>20,313\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>1061\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.9%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.2240982055664,27.197349548339844],[-80.22332763671875,27.197248458862305],[-80.22245025634766,27.197059631347656],[-80.22024536132813,27.19658851623535],[-80.21878051757813,27.1962890625],[-80.21808624267578,27.196178436279297],[-80.21743774414063,27.19611930847168],[-80.21683502197266,27.196088790893555],[-80.21630096435547,27.196088790893555],[-80.21572875976563,27.19611930847168],[-80.21517944335938,27.196178436279297],[-80.21454620361328,27.196279525756836],[-80.21434020996094,27.196319580078125],[-80.21424102783203,27.19631004333496],[-80.21411895751953,27.196298599243164],[-80.21306610107422,27.196609497070313],[-80.21239471435547,27.19685935974121],[-80.21184539794922,27.197078704833984],[-80.21199035644531,27.197139739990234]]}},{"type":"Feature","properties":{"ID":144,"Name":"Ocean Blvd","From":"St Lucie Blvd","To":"Sewalls Point Rd","Context_Class":"C3C","Service_Capacity":1810.0,"AADT_2024":21473.0,"Peak_Hour_Vol_2024":1122.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1945.0,"AADT_2023":23666.0,"Peak_Hour_Vol_2023":1134.54804,"LOS_2023":"C","Growth_Rate_2023":0.007,"U_ID":"154","color":"#FFFF00","width":3.931986954724319,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Ocean Blvd (ID: 144)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>St Lucie Blvd  Sewalls Point Rd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>21,473<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>1122<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #144\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Ocean Blvd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>St Lucie Blvd  Sewalls Point Rd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1810\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>21,473\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>1122\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.21199035644531,27.197139739990234],[-80.21184539794922,27.197078704833984],[-80.21170043945313,27.197139739990234],[-80.2112808227539,27.19729995727539],[-80.20990753173828,27.197879791259766],[-80.20851135253906,27.198530197143555],[-80.2078857421875,27.19883918762207],[-80.20735168457031,27.199138641357422],[-80.20713806152344,27.199230194091797],[-80.20706176757813,27.199270248413086],[-80.20674133300781,27.19944953918457],[-80.20601654052734,27.19985008239746],[-80.20414733886719,27.200979232788086],[-80.2037582397461,27.201210021972656],[-80.20272064208984,27.20180892944336],[-80.2025375366211,27.20197868347168],[-80.20230865478516,27.20207977294922],[-80.2014389038086,27.202489852905273],[-80.20056915283203,27.202899932861328],[-80.20059967041016,27.20294952392578]]}},{"type":"Feature","properties":{"ID":145,"Name":"Ocean Blvd","From":"Sewalls Point Rd","To":"Stuart Beach Entry","Context_Class":"C3C","Service_Capacity":1125.0,"AADT_2024":13747.0,"Peak_Hour_Vol_2024":718.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1165.0,"AADT_2023":14409.0,"Peak_Hour_Vol_2023":676.07028,"LOS_2023":"C","Growth_Rate_2023":0.015,"U_ID":"155","color":"#FFFF00","width":3.222213715913093,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Ocean Blvd (ID: 145)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Sewalls Point Rd  Stuart Beach Entry\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>13,747<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>718<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #145\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Ocean Blvd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Sewalls Point Rd  Stuart Beach Entry\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1125\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>13,747\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>718\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.20059967041016,27.20294952392578],[-80.20056915283203,27.202899932861328],[-80.2002182006836,27.203060150146484],[-80.19940948486328,27.203439712524414],[-80.1985855102539,27.20380973815918],[-80.19768524169922,27.204259872436523],[-80.19659423828125,27.20473861694336],[-80.19532775878906,27.205249786376953],[-80.19319152832031,27.206159591674805],[-80.19192504882813,27.206729888916016],[-80.19081115722656,27.207260131835938],[-80.189208984375,27.208059310913086],[-80.18844604492188,27.208459854125977],[-80.18753051757813,27.20895004272461],[-80.18658447265625,27.209428787231445],[-80.1856689453125,27.20987892150879],[-80.18511962890625,27.210140228271484],[-80.1849594116211,27.210159301757813],[-80.18473815917969,27.21025848388672],[-80.18428039550781,27.21047019958496],[-80.18293762207031,27.21109962463379],[-80.18165588378906,27.211698532104492],[-80.18042755126953,27.212289810180664],[-80.17964172363281,27.212678909301758],[-80.1795654296875,27.212739944458008],[-80.17923736572266,27.212900161743164],[-80.17901611328125,27.213029861450195],[-80.17871856689453,27.21323013305664],[-80.17852020263672,27.213388442993164],[-80.17820739746094,27.213659286499023],[-80.17788696289063,27.21402931213379],[-80.1777572631836,27.214168548583984],[-80.17755126953125,27.214479446411133],[-80.17744445800781,27.214670181274414],[-80.17723846435547,27.215179443359375],[-80.17720031738281,27.215309143066406],[-80.1771011352539,27.215728759765625],[-80.17643737792969,27.215728759765625],[-80.17623138427734,27.21571922302246],[-80.17610931396484,27.215700149536133],[-80.17607116699219,27.215660095214844],[-80.17572784423828,27.215089797973633],[-80.17570495605469,27.21504020690918],[-80.17557525634766,27.21510887145996],[-80.17546844482422,27.214948654174805],[-80.17517852783203,27.21446990966797],[-80.17472839355469,27.21367835998535],[-80.17464447021484,27.213708877563477],[-80.17462158203125,27.213748931884766],[-80.17462921142578,27.21377944946289],[-80.17498016357422,27.21440887451172]]}},{"type":"Feature","properties":{"ID":160,"Name":"Salerno Rd","From":"Willoughby Blvd","To":"Avalon Dr","Context_Class":"C3C","Service_Capacity":1125.0,"AADT_2024":9417.0,"Peak_Hour_Vol_2024":492.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C4","Service_Capacity_2023":915.0,"AADT_2023":9026.0,"Peak_Hour_Vol_2023":544.44832,"LOS_2023":"D","Growth_Rate_2023":0.005,"U_ID":"98-1","color":"#FFFF00","width":2.8244246757820273,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Salerno Rd (ID: 160)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Willoughby Blvd  Avalon Dr\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>9,417<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>492<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #160\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Salerno Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Willoughby Blvd  Avalon Dr\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1125\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>9,417\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>492\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.2280502319336,27.13348960876465],[-80.22666931152344,27.134048461914063],[-80.22599792480469,27.13433837890625],[-80.2250747680664,27.13469886779785],[-80.22429656982422,27.135019302368164],[-80.22399139404297,27.13515853881836],[-80.22349548339844,27.1353702545166],[-80.22333526611328,27.135379791259766],[-80.22323608398438,27.135419845581055],[-80.22315979003906,27.135438919067383],[-80.2225341796875,27.135679244995117],[-80.22224426269531,27.135818481445313],[-80.22174835205078,27.136030197143555],[-80.22023010253906,27.13665008544922],[-80.2199478149414,27.136730194091797],[-80.21990966796875,27.136699676513672],[-80.21981811523438,27.13667869567871],[-80.21956634521484,27.13675880432129],[-80.21875762939453,27.137088775634766],[-80.2186050415039,27.13715934753418],[-80.21852111816406,27.137218475341797],[-80.21846008300781,27.137338638305664],[-80.21810913085938,27.137489318847656],[-80.21805572509766,27.137588500976563],[-80.21804809570313,27.13755989074707]]}},{"type":"Feature","properties":{"ID":164,"Name":"Savannah Rd","From":"Dixie Hwy","To":"Park Pl","Context_Class":"C3C","Service_Capacity":1070.0,"AADT_2024":8684.0,"Peak_Hour_Vol_2024":454.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1165.0,"AADT_2023":8521.0,"Peak_Hour_Vol_2023":391.1139,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"42-1","color":"#FFFF00","width":2.7570853301894016,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Savannah Rd (ID: 164)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Dixie Hwy  Park Pl\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>8,684<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>454<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #164\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Savannah Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Dixie Hwy  Park Pl\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1070\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>8,684\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>454\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.24734497070313,27.22056007385254],[-80.24626922607422,27.221399307250977],[-80.24594116210938,27.22165870666504],[-80.24555969238281,27.221920013427734],[-80.24531555175781,27.22205924987793],[-80.24478149414063,27.222318649291992],[-80.24382781982422,27.222639083862305],[-80.2408447265625,27.22361946105957],[-80.23932647705078,27.224140167236328],[-80.23902893066406,27.224279403686523],[-80.23848724365234,27.22458839416504],[-80.23815155029297,27.22484016418457],[-80.23783111572266,27.225109100341797],[-80.23749542236328,27.2254695892334],[-80.23741912841797,27.225608825683594],[-80.23729705810547,27.22572898864746],[-80.23725128173828,27.225818634033203],[-80.2371597290039,27.225969314575195]]}},{"type":"Feature","properties":{"ID":178,"Name":"Westmoreland Blvd","From":"St Lucie County","To":"Federal Hwy","Context_Class":"C3C","Service_Capacity":1125.0,"AADT_2024":11524.0,"Peak_Hour_Vol_2024":602.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":1125.0,"AADT_2023":11299.0,"Peak_Hour_Vol_2023":550.48728,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"117","color":"#FFFF00","width":3.017990843808853,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Westmoreland Blvd (ID: 178)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>St Lucie County  Federal Hwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>11,524<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>602<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #178\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Westmoreland Blvd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>St Lucie County  Federal Hwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1125\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>11,524\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>602\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.28479766845703,27.25821876525879],[-80.28453826904297,27.25823974609375],[-80.28399658203125,27.25823974609375],[-80.28351593017578,27.258298873901367],[-80.2830581665039,27.25840950012207],[-80.28267669677734,27.258529663085938],[-80.28205108642578,27.25881004333496],[-80.2818603515625,27.25891876220703],[-80.28142547607422,27.2591495513916],[-80.28120422363281,27.259239196777344],[-80.28131866455078,27.259368896484375],[-80.28168487548828,27.25996971130371],[-80.28190612792969,27.260318756103516],[-80.2830581665039,27.26219940185547],[-80.28324890136719,27.262149810791016],[-80.2828369140625,27.261438369750977],[-80.28255462646484,27.260969161987305],[-80.28202056884766,27.260019302368164],[-80.2815170288086,27.259260177612305]]}},{"type":"Feature","properties":{"ID":179,"Name":"Willoughby Blvd","From":"Cove Rd","To":"Salerno Rd","Context_Class":"C3C","Service_Capacity":1070.0,"AADT_2024":4255.0,"Peak_Hour_Vol_2024":222.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":1125.0,"AADT_2023":3669.0,"Peak_Hour_Vol_2023":305.11404000000005,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"162","color":"#FFFF00","width":2.350201344337095,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Willoughby Blvd (ID: 179)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Cove Rd  Salerno Rd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>4,255<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>222<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #179\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Willoughby Blvd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Cove Rd  Salerno Rd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1070\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>4,255\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>222\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.22277069091797,27.127729415893555],[-80.2236099243164,27.127389907836914],[-80.22500610351563,27.126829147338867],[-80.22515869140625,27.126739501953125],[-80.2256851196289,27.12653923034668],[-80.22716522216797,27.12594985961914],[-80.2279281616211,27.125659942626953],[-80.2280044555664,27.125659942626953],[-80.22825622558594,27.12558937072754],[-80.22985076904297,27.125059127807617],[-80.23023986816406,27.124919891357422],[-80.2304458618164,27.12533950805664],[-80.23049926757813,27.125450134277344],[-80.23147583007813,27.127408981323242],[-80.2316665649414,27.127788543701172],[-80.23307800292969,27.130720138549805],[-80.23320770263672,27.13098907470703],[-80.23250579833984,27.13127899169922],[-80.23217010498047,27.13142967224121],[-80.23152923583984,27.13167953491211],[-80.23123931884766,27.1318302154541],[-80.23070526123047,27.132139205932617],[-80.2298583984375,27.132699966430664],[-80.22962951660156,27.132829666137695],[-80.22941589355469,27.132909774780273],[-80.2288589477539,27.133169174194336],[-80.2280502319336,27.13348960876465]]}},{"type":"Feature","properties":{"ID":182,"Name":"Willoughby Blvd","From":"Indian St","To":"Monterey Rd","Context_Class":"C3C","Service_Capacity":1810.0,"AADT_2024":10900.0,"Peak_Hour_Vol_2024":570.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":1810.0,"AADT_2023":10900.0,"Peak_Hour_Vol_2023":570.0,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"159","color":"#FFFF00","width":2.9606651253234526,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FFFF00; margin-bottom: 4px;'>Willoughby Blvd (ID: 182)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Indian St  Monterey Rd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3C<br><span style='color: #71717a;'>AADT 2024: \u003c/span>10,900<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>570<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #182\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FFFF00; margin: 4px 0;'>Willoughby Blvd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Indian St  Monterey Rd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1810\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FFFF00;'>10,900\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>570\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.24018859863281,27.16092872619629],[-80.2401351928711,27.160808563232422],[-80.24000549316406,27.160869598388672],[-80.24010467529297,27.161039352416992],[-80.24037170410156,27.16145896911621],[-80.24060821533203,27.161758422851563],[-80.24089050292969,27.162019729614258],[-80.24124145507813,27.162260055541992],[-80.24137115478516,27.162328720092773],[-80.24169158935547,27.16250991821289],[-80.24193572998047,27.16269874572754],[-80.24211883544922,27.162858963012695],[-80.24237823486328,27.16313934326172],[-80.2425765991211,27.163419723510742],[-80.24266815185547,27.1635799407959],[-80.24288940429688,27.164039611816406],[-80.24433898925781,27.16701889038086],[-80.2445068359375,27.16737937927246],[-80.24462890625,27.167739868164063],[-80.24472045898438,27.168128967285156],[-80.2447509765625,27.16844940185547],[-80.24473571777344,27.169578552246094],[-80.2447280883789,27.169979095458984],[-80.24473571777344,27.17057991027832],[-80.24478149414063,27.170799255371094],[-80.2448501586914,27.171058654785156],[-80.24497985839844,27.17133903503418],[-80.24514770507813,27.171598434448242],[-80.2454605102539,27.17194938659668],[-80.24608612060547,27.1724796295166],[-80.24641418457031,27.172809600830078],[-80.24663543701172,27.17314910888672],[-80.24669647216797,27.173269271850586],[-80.24678802490234,27.17348861694336],[-80.24686431884766,27.173789978027344],[-80.24688720703125,27.174028396606445],[-80.24688720703125,27.174428939819336],[-80.24688720703125,27.17486000061035],[-80.2469482421875,27.175039291381836],[-80.2469253540039,27.1756591796875],[-80.2469711303711,27.1756591796875]]}}]},"generateId":true},"source_layer":null,"paint":{"line-color":"#FFFF00","line-opacity":0.85,"line-translate-anchor":"map","line-width":4},"layout":{"visibility":"visible"},"slot":null,"minzoom":null,"maxzoom":null,"popup":"popup_html","tooltip":"tooltip_html","hover_options":null,"before_id":null,"filter":null},{"id":"routes_C3R","type":"line","source":{"type":"geojson","data":{"type":"FeatureCollection","features":[{"type":"Feature","properties":{"ID":2,"Name":"96th St","From":"Bobcat Dr","To":"Kanner Hwy","Context_Class":"C3R","Service_Capacity":1100.0,"AADT_2024":8107.0,"Peak_Hour_Vol_2024":410.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1165.0,"AADT_2023":8959.0,"Peak_Hour_Vol_2023":430.5695400000001,"LOS_2023":"C","Growth_Rate_2023":0.02596241199929827,"U_ID":"31","color":"#39FF14","width":2.7040774142181254,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>96th St (ID: 2)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Bobcat Dr  Kanner Hwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>8,107<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>410<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #2\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>96th St\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Bobcat Dr  Kanner Hwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1100\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>8,107\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>410\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.29696655273438,27.08819007873535],[-80.2947769165039,27.08816909790039],[-80.2933578491211,27.08816909790039],[-80.2904281616211,27.0881290435791],[-80.28942108154297,27.0881290435791],[-80.28887939453125,27.088138580322266],[-80.28863525390625,27.088109970092773],[-80.2859115600586,27.088088989257813],[-80.28482055664063,27.08807945251465],[-80.28421020507813,27.08807945251465],[-80.28395080566406,27.088048934936523],[-80.2814712524414,27.088008880615234],[-80.27851867675781,27.087968826293945],[-80.27839660644531,27.087839126586914],[-80.27835845947266,27.08778953552246],[-80.278564453125,27.08742904663086],[-80.27925872802734,27.086278915405273],[-80.27923583984375,27.086219787597656],[-80.27949523925781,27.085739135742188],[-80.27960968017578,27.085529327392578],[-80.27961730957031,27.085479736328125],[-80.27958679199219,27.085399627685547],[-80.27912902832031,27.086139678955078],[-80.27806854248047,27.087940216064453],[-80.27801513671875,27.08803939819336],[-80.27822875976563,27.088069915771484]]}},{"type":"Feature","properties":{"ID":5,"Name":"Baker Rd","From":"Federal Hwy","To":"Green River Pkwy","Context_Class":"C3R","Service_Capacity":1100.0,"AADT_2024":5820.0,"Peak_Hour_Vol_2024":294.0,"LOS_2024":"C","Growth_Rate_2024":0.017,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1165.0,"AADT_2023":5610.0,"Peak_Hour_Vol_2023":246.0546,"LOS_2023":"C","Growth_Rate_2023":0.01198148272608623,"U_ID":"2","color":"#39FF14","width":2.4939749812435883,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Baker Rd (ID: 5)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Federal Hwy  Green River Pkwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>5,820<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>294<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #5\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Baker Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Federal Hwy  Green River Pkwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1100\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>5,820\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>294\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>1.7%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.2636489868164,27.222379684448242],[-80.26346588134766,27.222349166870117],[-80.2630615234375,27.222349166870117],[-80.26194763183594,27.222318649291992],[-80.26033020019531,27.222299575805664],[-80.25794982910156,27.222259521484375],[-80.25727081298828,27.222148895263672],[-80.2564468383789,27.222129821777344],[-80.25364685058594,27.22209930419922],[-80.2533950805664,27.222089767456055],[-80.2531509399414,27.22209930419922],[-80.25308990478516,27.222089767456055],[-80.25302124023438,27.222049713134766],[-80.25299072265625,27.222009658813477],[-80.25291442871094,27.221988677978516],[-80.25284576416016,27.222000122070313],[-80.25279998779297,27.222028732299805]]}},{"type":"Feature","properties":{"ID":6,"Name":"Beach Rd","From":"Palm Beach County","To":"Bridge Rd","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":1972.0,"Peak_Hour_Vol_2024":100.0,"LOS_2024":"C","Growth_Rate_2024":0.02,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":890.0,"AADT_2023":1669.0,"Peak_Hour_Vol_2023":85.61970000000001,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"166","color":"#39FF14","width":2.140466383916951,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Beach Rd (ID: 6)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Palm Beach County  Bridge Rd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>1,972<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>100<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #6\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Beach Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Palm Beach County  Bridge Rd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>1,972\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>100\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>2%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.11331176757813,27.059938430786133],[-80.11402893066406,27.061399459838867],[-80.11428833007813,27.061969757080078],[-80.1145248413086,27.062759399414063],[-80.11477661132813,27.06352996826172],[-80.11494445800781,27.063919067382813],[-80.1150894165039,27.064199447631836],[-80.11531066894531,27.064498901367188],[-80.11564636230469,27.064908981323242],[-80.11579132080078,27.06511878967285],[-80.11595916748047,27.065488815307617],[-80.11625671386719,27.06624984741211]]}},{"type":"Feature","properties":{"ID":7,"Name":"Berry Ave","From":"Golden Bear Wy","To":"Martin Hwy","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":3338.0,"Peak_Hour_Vol_2024":169.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":890.0,"AADT_2023":3620.0,"Peak_Hour_Vol_2023":193.308,"LOS_2023":"C","Growth_Rate_2023":0.00940198812832737,"U_ID":"164","color":"#39FF14","width":2.265958261242363,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Berry Ave (ID: 7)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Golden Bear Wy  Martin Hwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>3,338<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>169<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #7\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Berry Ave\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Golden Bear Wy  Martin Hwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>3,338\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>169\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.2858657836914,27.14992904663086],[-80.2857894897461,27.159229278564453],[-80.28577423095703,27.16071891784668],[-80.28580474853516,27.161270141601563]]}},{"type":"Feature","properties":{"ID":8,"Name":"Berry Ave","From":"Martin Hwy","To":"Sunset Tr","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":1949.0,"Peak_Hour_Vol_2024":99.0,"LOS_2024":"C","Growth_Rate_2024":0.015,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":890.0,"AADT_2023":2149.0,"Peak_Hour_Vol_2023":104.2265,"LOS_2023":"C","Growth_Rate_2023":0.04399750834178984,"U_ID":"163","color":"#39FF14","width":2.138353416729188,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Berry Ave (ID: 8)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Martin Hwy  Sunset Tr\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>1,949<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>99<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #8\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Berry Ave\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Martin Hwy  Sunset Tr\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>1,949\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>99\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>1.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.28580474853516,27.161298751831055],[-80.28580474853516,27.16227912902832],[-80.28582763671875,27.162649154663086],[-80.28582763671875,27.163089752197266],[-80.28582763671875,27.163488388061523],[-80.28582000732422,27.164058685302734],[-80.28580474853516,27.166099548339844],[-80.28577423095703,27.16853904724121]]}},{"type":"Feature","properties":{"ID":12,"Name":"Bridge Rd","From":"Powerline Ave","To":"Lantana Ave","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":12336.0,"Peak_Hour_Vol_2024":624.0,"LOS_2024":"C","Growth_Rate_2024":0.031,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":890.0,"AADT_2023":11249.0,"Peak_Hour_Vol_2023":623.6445600000001,"LOS_2023":"TCEA","Growth_Rate_2023":0.01551853185381513,"U_ID":"23-1","color":"#39FF14","width":3.0925877723507527,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Bridge Rd (ID: 12)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Powerline Ave  Lantana Ave\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>12,336<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>624<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #12\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Bridge Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Powerline Ave  Lantana Ave\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>12,336\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>624\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>3.1%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.1628646850586,27.04376983642578],[-80.1624755859375,27.043930053710938],[-80.15687561035156,27.04692840576172],[-80.15446472167969,27.04823875427246],[-80.153076171875,27.048969268798828],[-80.15182495117188,27.049638748168945],[-80.14918518066406,27.05105972290039],[-80.14815521240234,27.05160903930664],[-80.14791107177734,27.051769256591797],[-80.14769744873047,27.051939010620117],[-80.14750671386719,27.052120208740234],[-80.14741516113281,27.052139282226563],[-80.14730072021484,27.052318572998047],[-80.14701843261719,27.052919387817383],[-80.146484375,27.05406951904297],[-80.14612579345703,27.05484962463379],[-80.14567565917969,27.055789947509766],[-80.14543914794922,27.056108474731445],[-80.14514923095703,27.056360244750977],[-80.14476776123047,27.056589126586914],[-80.14443969726563,27.05672836303711],[-80.14440155029297,27.056779861450195],[-80.14363098144531,27.057069778442383],[-80.14276885986328,27.057369232177734],[-80.141845703125,27.057689666748047],[-80.14183807373047,27.057668685913086]]}},{"type":"Feature","properties":{"ID":18,"Name":"Causeway Blvd","From":"Indian River Dr","To":"Ocean Blvd","Context_Class":"C3R","Service_Capacity":1100.0,"AADT_2024":12871.0,"Peak_Hour_Vol_2024":651.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1110.0,"AADT_2023":13568.0,"Peak_Hour_Vol_2023":762.25024,"LOS_2023":"C","Growth_Rate_2023":0.01776907416831497,"U_ID":"150","color":"#39FF14","width":3.141737226500896,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Causeway Blvd (ID: 18)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Indian River Dr  Ocean Blvd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>12,871<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>651<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #18\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Causeway Blvd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Indian River Dr  Ocean Blvd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1100\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>12,871\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>651\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.22786712646484,27.250789642333984],[-80.22798156738281,27.250789642333984],[-80.2280502319336,27.250768661499023],[-80.22811889648438,27.25074005126953],[-80.22811889648438,27.250709533691406],[-80.22809600830078,27.250598907470703],[-80.22802734375,27.250530242919922],[-80.22796630859375,27.250518798828125],[-80.22787475585938,27.250539779663086],[-80.2278060913086,27.250598907470703],[-80.2278060913086,27.250638961791992],[-80.22782135009766,27.25067901611328],[-80.22750854492188,27.250808715820313],[-80.2269058227539,27.25096893310547],[-80.22637176513672,27.251110076904297],[-80.22516632080078,27.251440048217773],[-80.22393798828125,27.25181007385254],[-80.22303771972656,27.252099990844727],[-80.22298431396484,27.25218963623047],[-80.22283935546875,27.252229690551758],[-80.22264862060547,27.252300262451172],[-80.2222671508789,27.252418518066406],[-80.2216567993164,27.25261878967285],[-80.2209243774414,27.252840042114258],[-80.21842956542969,27.253549575805664],[-80.2153549194336,27.25433921813965],[-80.21409606933594,27.254690170288086],[-80.21167755126953,27.255338668823242],[-80.21094512939453,27.255508422851563],[-80.210205078125,27.25562858581543],[-80.20948028564453,27.255708694458008],[-80.20849609375,27.255760192871094],[-80.20368957519531,27.255708694458008],[-80.2008056640625,27.255680084228516],[-80.20072174072266,27.255640029907227],[-80.19847869873047,27.255619049072266],[-80.19821166992188,27.255619049072266],[-80.1979751586914,27.25558853149414],[-80.19795989990234,27.255569458007813],[-80.19793701171875,27.25555992126465],[-80.19792175292969,27.25554847717285],[-80.19786071777344,27.25554847717285],[-80.19780731201172,27.255569458007813],[-80.19776916503906,27.25558853149414],[-80.19776916503906,27.25566864013672],[-80.19780731201172,27.255739212036133],[-80.19783782958984,27.255760192871094],[-80.19790649414063,27.255760192871094],[-80.19799041748047,27.255739212036133],[-80.19800567626953,27.255699157714844],[-80.19800567626953,27.25568962097168]]}},{"type":"Feature","properties":{"ID":19,"Name":"Citrus Blvd","From":"Warfield Blvd","To":"Minute Maid Rd","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":3026.0,"Peak_Hour_Vol_2024":153.0,"LOS_2024":"C","Growth_Rate_2024":0.017,"Comparison_2023":null,"Context_Class_2023":"C2","Service_Capacity_2023":730.0,"AADT_2023":3253.0,"Peak_Hour_Vol_2023":186.78725999999995,"LOS_2023":"A/B","Growth_Rate_2023":0.03978300384821609,"U_ID":"44","color":"#39FF14","width":2.2372954019996634,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Citrus Blvd (ID: 19)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Warfield Blvd  Minute Maid Rd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>3,026<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>153<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #19\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Citrus Blvd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Warfield Blvd  Minute Maid Rd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>3,026\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>153\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>1.7%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.46139526367188,27.017019271850586],[-80.46028900146484,27.0162296295166],[-80.46026611328125,27.016149520874023],[-80.46012878417969,27.01599884033203],[-80.45984649658203,27.016300201416016],[-80.45977020263672,27.016368865966797],[-80.45955657958984,27.016469955444336],[-80.45923614501953,27.016489028930664],[-80.4580307006836,27.016489028930664],[-80.45341491699219,27.016510009765625],[-80.45233917236328,27.016498565673828],[-80.45219421386719,27.0164794921875],[-80.45205688476563,27.01645851135254],[-80.45201873779297,27.016559600830078],[-80.45183563232422,27.016889572143555],[-80.45166778564453,27.01719856262207],[-80.45143127441406,27.017518997192383],[-80.45124816894531,27.017709732055664],[-80.45093536376953,27.017959594726563],[-80.45056915283203,27.018199920654297],[-80.45008850097656,27.018400192260742],[-80.44670867919922,27.019569396972656],[-80.4432373046875,27.02077865600586],[-80.4419174194336,27.021209716796875],[-80.4411849975586,27.021469116210938],[-80.44004821777344,27.021888732910156],[-80.43778991699219,27.02267837524414],[-80.43354034423828,27.02414894104004]]}},{"type":"Feature","properties":{"ID":21,"Name":"Citrus Blvd","From":"96th St","To":"Martin Hwy","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":4706.0,"Peak_Hour_Vol_2024":238.0,"LOS_2024":"C","Growth_Rate_2024":0.02,"Comparison_2023":null,"Context_Class_2023":"C2","Service_Capacity_2023":730.0,"AADT_2023":4663.0,"Peak_Hour_Vol_2023":221.16609000000005,"LOS_2023":"A/B","Growth_Rate_2023":0.02231519326127551,"U_ID":"46","color":"#39FF14","width":2.3916338748449726,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Citrus Blvd (ID: 21)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>96th St  Martin Hwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>4,706<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>238<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #21\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Citrus Blvd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>96th St  Martin Hwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>4,706\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>238\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>2%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.31924438476563,27.088428497314453],[-80.31916809082031,27.09564971923828],[-80.31909942626953,27.102949142456055],[-80.31900024414063,27.115718841552734],[-80.31898498535156,27.11779022216797],[-80.31900024414063,27.119958877563477],[-80.31900787353516,27.121639251708984],[-80.31903076171875,27.1240291595459],[-80.3190689086914,27.127119064331055],[-80.31908416748047,27.129518508911133],[-80.31910705566406,27.130958557128906],[-80.3191146850586,27.13239860534668],[-80.31909942626953,27.134119033813477],[-80.31907653808594,27.1361083984375],[-80.31908416748047,27.13715934753418],[-80.31908416748047,27.138978958129883],[-80.31903839111328,27.144088745117188],[-80.31901550292969,27.146129608154297],[-80.31897735595703,27.15203857421875],[-80.3189468383789,27.154930114746094],[-80.31893920898438,27.15683937072754],[-80.31890869140625,27.158519744873047],[-80.31891632080078,27.159448623657227],[-80.31890106201172,27.159910202026367],[-80.31885528564453,27.160419464111328],[-80.3188247680664,27.160869598388672],[-80.31884002685547,27.161399841308594],[-80.3188705444336,27.161588668823242]]}},{"type":"Feature","properties":{"ID":24,"Name":"Country Club Dr","From":"Palm Beach County","To":"Island Way","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":3092.0,"Peak_Hour_Vol_2024":156.0,"LOS_2024":"C","Growth_Rate_2024":0.018,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":890.0,"AADT_2023":3016.0,"Peak_Hour_Vol_2023":131.04520000000002,"LOS_2023":"C","Growth_Rate_2023":0.01631042901615087,"U_ID":"6","color":"#39FF14","width":2.2433586991471572,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Country Club Dr (ID: 24)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Palm Beach County  Island Way\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>3,092<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>156<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #24\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Country Club Dr\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Palm Beach County  Island Way\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>3,092\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>156\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>1.8%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.1963882446289,26.337848663330078],[-80.19622802734375,26.337549209594727],[-80.19596862792969,26.337299346923828],[-80.19571685791016,26.337148666381836],[-80.19546508789063,26.336809158325195],[-80.19542694091797,26.336679458618164],[-80.19532012939453,26.33670997619629],[-80.19522094726563,26.336729049682617],[-80.19493865966797,26.336729049682617],[-80.19464874267578,26.336618423461914],[-80.1944580078125,26.336580276489258],[-80.19429016113281,26.336599349975586],[-80.1941146850586,26.336658477783203],[-80.19369506835938,26.336999893188477],[-80.1922607421875,26.337799072265625],[-80.19124603271484,26.338369369506836],[-80.19029998779297,26.338869094848633],[-80.1899642944336,26.339048385620117],[-80.18963623046875,26.339189529418945],[-80.18892669677734,26.339519500732422],[-80.18879699707031,26.33957862854004],[-80.18865966796875,26.339550018310547],[-80.18834686279297,26.339599609375],[-80.18753051757813,26.339670181274414],[-80.18560791015625,26.339679718017578],[-80.18441009521484,26.339679718017578],[-80.18403625488281,26.33972930908203],[-80.18277740478516,26.339908599853516],[-80.18193817138672,26.339920043945313],[-80.1790542602539,26.33989906311035],[-80.17536926269531,26.339929580688477],[-80.17185974121094,26.339929580688477],[-80.17108917236328,26.339929580688477],[-80.17109680175781,26.340648651123047],[-80.17112731933594,26.341609954833984],[-80.17121124267578,26.34733009338379],[-80.17119598388672,26.34819984436035],[-80.17119598388672,26.349088668823242],[-80.1712417602539,26.35257911682129],[-80.1712875366211,26.353939056396484],[-80.17131805419922,26.354848861694336],[-80.17135620117188,26.357379913330078],[-80.17137145996094,26.358619689941406],[-80.17134094238281,26.35887908935547],[-80.17134094238281,26.35940933227539],[-80.17135620117188,26.360658645629883],[-80.17139434814453,26.360769271850586],[-80.1714096069336,26.361238479614258],[-80.17144775390625,26.36393928527832],[-80.1714859008789,26.365530014038086],[-80.1715316772461,26.367300033569336],[-80.17151641845703,26.367839813232422],[-80.17137908935547,26.367849349975586],[-80.17124938964844,26.367849349975586],[-80.170654296875,26.367849349975586],[-80.16913604736328,26.36785888671875],[-80.16900634765625,26.368539810180664],[-80.16899871826172,26.36882972717285],[-80.16899108886719,26.3693790435791],[-80.1689682006836,26.370328903198242],[-80.16891479492188,26.37047004699707],[-80.16889953613281,26.370969772338867],[-80.16886901855469,26.371870040893555],[-80.16893005371094,26.373859405517578],[-80.16899108886719,26.37411880493164],[-80.16915893554688,26.374408721923828],[-80.16947174072266,26.374710083007813],[-80.1700668334961,26.37510871887207],[-80.17035675048828,26.37533950805664],[-80.1706314086914,26.375709533691406],[-80.17070770263672,26.375900268554688],[-80.17073822021484,26.376049041748047],[-80.17082977294922,26.376150131225586],[-80.17083740234375,26.37701988220215],[-80.17084503173828,26.37765884399414],[-80.17086791992188,26.37925910949707],[-80.1708755493164,26.380329132080078],[-80.17093658447266,26.384199142456055],[-80.17096710205078,26.386280059814453],[-80.17106628417969,26.393089294433594],[-80.17109680175781,26.395349502563477],[-80.1712417602539,26.403718948364258],[-80.17134857177734,26.410280227661133],[-80.17151641845703,26.420759201049805],[-80.17157745361328,26.42409896850586],[-80.17164611816406,26.425649642944336],[-80.1717758178711,26.426969528198242],[-80.17206573486328,26.42881965637207],[-80.17224884033203,26.429719924926758],[-80.17301177978516,26.43321990966797],[-80.1737289428711,26.436599731445313],[-80.17398071289063,26.438209533691406],[-80.17408752441406,26.439199447631836],[-80.1741714477539,26.440309524536133],[-80.1742172241211,26.44186019897461],[-80.17427062988281,26.444488525390625],[-80.17437744140625,26.450349807739258],[-80.1745376586914,26.45825958251953],[-80.17464447021484,26.46350860595703],[-80.1747055053711,26.46640968322754],[-80.17469787597656,26.4678897857666],[-80.17462158203125,26.469478607177734],[-80.17450714111328,26.470619201660156],[-80.17428588867188,26.47201919555664],[-80.17411804199219,26.472888946533203],[-80.1737289428711,26.474899291992188],[-80.17337799072266,26.4766788482666],[-80.17298889160156,26.478639602661133],[-80.17282104492188,26.47968864440918],[-80.172607421875,26.481409072875977],[-80.17251586914063,26.482580184936523],[-80.1724853515625,26.484399795532227],[-80.1724853515625,26.49496841430664],[-80.17250061035156,26.505229949951172],[-80.17250061035156,26.516748428344727],[-80.1725082397461,26.52145004272461],[-80.17251586914063,26.523418426513672],[-80.1724853515625,26.52509880065918],[-80.17250061035156,26.52764892578125],[-80.17261505126953,26.537710189819336],[-80.1727066040039,26.54494857788086],[-80.1728286743164,26.553190231323242],[-80.17285919189453,26.556249618530273],[-80.17293548583984,26.558019638061523],[-80.17308807373047,26.563129425048828],[-80.17308044433594,26.565608978271484],[-80.17314147949219,26.568559646606445],[-80.17316436767578,26.571319580078125],[-80.17322540283203,26.57663917541504],[-80.17322540283203,26.577289581298828],[-80.17325592041016,26.580909729003906],[-80.17330932617188,26.58469009399414],[-80.17322540283203,26.586139678955078],[-80.17324829101563,26.58778953552246],[-80.1733169555664,26.592208862304688],[-80.17345428466797,26.602689743041992],[-80.17346954345703,26.60430908203125],[-80.17351531982422,26.606769561767578],[-80.17361450195313,26.6083984375],[-80.17364501953125,26.612890243530273],[-80.17366790771484,26.615949630737305],[-80.17366790771484,26.61676025390625],[-80.17364501953125,26.617578506469727],[-80.17364501953125,26.61823844909668],[-80.17366790771484,26.620319366455078],[-80.17367553710938,26.62078857421875],[-80.17373657226563,26.62347984313965],[-80.17379760742188,26.63127899169922],[-80.17389678955078,26.63698959350586],[-80.17393493652344,26.64073944091797],[-80.1740951538086,26.653579711914063],[-80.1741714477539,26.658430099487305],[-80.1741943359375,26.662439346313477],[-80.17414855957031,26.663469314575195],[-80.17398834228516,26.66485023498535],[-80.17372131347656,26.666229248046875],[-80.17347717285156,26.66714859008789],[-80.17311096191406,26.668310165405273],[-80.1726303100586,26.66952896118164],[-80.17219543457031,26.670459747314453],[-80.17184448242188,26.671138763427734],[-80.17142486572266,26.6718692779541],[-80.17086791992188,26.67276954650879],[-80.17008972167969,26.67388916015625],[-80.16900634765625,26.675439834594727],[-80.16690063476563,26.678449630737305],[-80.16461944580078,26.681779861450195],[-80.16305541992188,26.684040069580078],[-80.16217803955078,26.685298919677734],[-80.1612548828125,26.6865291595459],[-80.16004943847656,26.687978744506836],[-80.15911865234375,26.688989639282227],[-80.15694427490234,26.691219329833984],[-80.154541015625,26.69369888305664],[-80.15040588378906,26.697959899902344],[-80.14617919921875,26.70233917236328],[-80.14183807373047,26.706829071044922],[-80.1408462524414,26.707948684692383],[-80.14020538330078,26.708759307861328],[-80.13971710205078,26.70941925048828],[-80.13911437988281,26.71031951904297],[-80.13846588134766,26.711408615112305],[-80.13784790039063,26.71259880065918],[-80.13713836669922,26.71422004699707],[-80.13671875,26.715370178222656],[-80.13652038574219,26.71599006652832],[-80.13626861572266,26.716949462890625],[-80.1360855102539,26.71769905090332],[-80.13591766357422,26.718639373779297],[-80.13578033447266,26.71963882446289],[-80.13563537597656,26.72163963317871],[-80.13553619384766,26.723838806152344],[-80.13526153564453,26.73019027709961],[-80.13475036621094,26.741649627685547],[-80.13428497314453,26.751968383789063],[-80.1340103149414,26.75830841064453],[-80.13362884521484,26.763858795166016],[-80.13218688964844,26.784259796142578],[-80.13192749023438,26.788209915161133],[-80.13179016113281,26.7918701171875],[-80.13143157958984,26.80095863342285],[-80.13048553466797,26.825389862060547],[-80.13005828857422,26.83624839782715],[-80.12957000732422,26.84910011291504],[-80.1290054321289,26.86353874206543],[-80.12874603271484,26.87042999267578],[-80.12871551513672,26.871959686279297],[-80.12873840332031,26.873048782348633],[-80.12882995605469,26.874238967895508],[-80.12899780273438,26.875749588012695],[-80.12934112548828,26.877639770507813],[-80.12960052490234,26.87874984741211],[-80.1298599243164,26.87969970703125],[-80.13015747070313,26.880659103393555],[-80.1306381225586,26.882009506225586],[-80.13158416748047,26.884260177612305],[-80.13328552246094,26.888139724731445],[-80.13645935058594,26.895368576049805],[-80.13829803466797,26.899568557739258],[-80.13936614990234,26.902009963989258],[-80.14183044433594,26.907609939575195],[-80.14432525634766,26.91330909729004],[-80.14904022216797,26.92401885986328],[-80.15217590332031,26.931188583374023],[-80.15383911132813,26.934968948364258],[-80.15397644042969,26.935279846191406],[-80.15404510498047,26.935449600219727],[-80.1540298461914,26.935609817504883],[-80.1540298461914,26.935619354248047],[-80.15409088134766,26.935779571533203],[-80.15428161621094,26.936359405517578],[-80.15438842773438,26.93675994873047],[-80.15438079833984,26.937108993530273],[-80.15433502197266,26.937389373779297],[-80.15414428710938,26.93783950805664],[-80.15391540527344,26.938289642333984],[-80.1537857055664,26.938589096069336],[-80.15377807617188,26.938779830932617],[-80.15381622314453,26.939008712768555],[-80.15397644042969,26.939279556274414],[-80.15422821044922,26.939489364624023],[-80.154541015625,26.93960952758789],[-80.15489959716797,26.939619064331055],[-80.15557098388672,26.93939971923828],[-80.15577697753906,26.939329147338867],[-80.15706634521484,26.9388484954834],[-80.15750122070313,26.938579559326172],[-80.15776062011719,26.938308715820313],[-80.15792083740234,26.938148498535156],[-80.15798950195313,26.937959671020508],[-80.1580581665039,26.937549591064453],[-80.1580810546875,26.93705940246582],[-80.1580810546875,26.936429977416992],[-80.15802764892578,26.934829711914063],[-80.1564712524414,26.934799194335938],[-80.15519714355469,26.934768676757813],[-80.1544189453125,26.93474006652832],[-80.15333557128906,26.934669494628906],[-80.15121459960938,26.93454933166504],[-80.14596557617188,26.934268951416016],[-80.14431762695313,26.93423843383789],[-80.14244842529297,26.934249877929688],[-80.13958740234375,26.934309005737305],[-80.13961791992188,26.934879302978516],[-80.1396713256836,26.935449600219727],[-80.13975524902344,26.93577003479004],[-80.13993835449219,26.93608856201172],[-80.14025115966797,26.936418533325195],[-80.14054107666016,26.93661880493164],[-80.1407241821289,26.936729431152344],[-80.14109802246094,26.936859130859375],[-80.14144897460938,26.93692970275879],[-80.1419448852539,26.93692970275879],[-80.1427001953125,26.936738967895508],[-80.14396667480469,26.936359405517578],[-80.14434051513672,26.93631935119629],[-80.14485168457031,26.936368942260742],[-80.14508056640625,26.936439514160156],[-80.14557647705078,26.93667984008789],[-80.14734649658203,26.93777847290039],[-80.1477279663086,26.938030242919922],[-80.14825439453125,26.938419342041016],[-80.14865112304688,26.93876838684082],[-80.14920806884766,26.93943977355957],[-80.1494369506836,26.939788818359375],[-80.14962005615234,26.94011878967285],[-80.14986419677734,26.9406795501709],[-80.15003967285156,26.94124984741211],[-80.15016174316406,26.942079544067383],[-80.15010833740234,26.947750091552734],[-80.15007019042969,26.951648712158203],[-80.1500244140625,26.95384979248047],[-80.15005493164063,26.95458984375],[-80.15007019042969,26.955860137939453],[-80.15007019042969,26.956138610839844],[-80.15007019042969,26.956600189208984],[-80.1500244140625,26.95671844482422],[-80.1500015258789,26.956798553466797],[-80.14995574951172,26.956819534301758],[-80.14990997314453,26.956890106201172],[-80.14990997314453,26.956979751586914],[-80.14998626708984,26.957069396972656],[-80.15005493164063,26.957239151000977],[-80.1500015258789,26.957569122314453],[-80.14985656738281,26.958078384399414],[-80.14921569824219,26.95928955078125],[-80.14900970458984,26.959848403930664],[-80.14894104003906,26.960128784179688],[-80.14876556396484,26.96095848083496],[-80.14862823486328,26.96154022216797],[-80.1483383178711,26.962398529052734],[-80.14797973632813,26.963369369506836],[-80.14706420898438,26.96552848815918],[-80.146728515625,26.96630859375],[-80.1466293334961,26.966609954833984],[-80.14662170410156,26.966838836669922],[-80.14665985107422,26.967199325561523],[-80.14672088623047,26.967418670654297],[-80.14692687988281,26.9677791595459],[-80.14741516113281,26.9685001373291],[-80.14749908447266,26.96870994567871],[-80.14752960205078,26.96889877319336],[-80.14747619628906,26.969188690185547],[-80.14741516113281,26.96929931640625],[-80.14720153808594,26.969579696655273],[-80.14643859863281,26.970399856567383],[-80.14619445800781,26.970640182495117],[-80.14598846435547,26.97075843811035],[-80.1457290649414,26.9708194732666],[-80.14464569091797,26.970809936523438],[-80.14237976074219,26.970788955688477],[-80.14215087890625,26.970779418945313],[-80.14179992675781,26.970829010009766],[-80.14151763916016,26.970989227294922],[-80.13977813720703,26.972339630126953],[-80.1378173828125,26.973878860473633],[-80.13602447509766,26.975269317626953],[-80.1346206665039,26.976268768310547],[-80.13443756103516,26.976369857788086],[-80.13409423828125,26.976499557495117],[-80.13370513916016,26.976558685302734],[-80.1331558227539,26.976558685302734],[-80.1307373046875,26.976558685302734],[-80.12802124023438,26.97657012939453],[-80.1277847290039,26.97675895690918]]}},{"type":"Feature","properties":{"ID":25,"Name":"Country Club Dr","From":"Island Way","To":"Little Club Dr","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":3710.0,"Peak_Hour_Vol_2024":188.0,"LOS_2024":"C","Growth_Rate_2024":0.011,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":890.0,"AADT_2023":3692.0,"Peak_Hour_Vol_2023":156.28236,"LOS_2023":"C","Growth_Rate_2023":0.01257405717935245,"U_ID":"27","color":"#39FF14","width":2.300133208800968,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Country Club Dr (ID: 25)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Island Way  Little Club Dr\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>3,710<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>188<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #25\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Country Club Dr\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Island Way  Little Club Dr\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>3,710\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>188\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>1.1%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.1278076171875,26.97677993774414],[-80.12863159179688,26.977519989013672],[-80.12910461425781,26.977949142456055],[-80.12926483154297,26.978139877319336],[-80.12928771972656,26.97818946838379],[-80.12928771972656,26.97894859313965],[-80.12931060791016,26.98130989074707],[-80.12931823730469,26.982759475708008],[-80.12931823730469,26.98383903503418],[-80.12931823730469,26.984708786010742],[-80.12889862060547,26.98472023010254],[-80.12884521484375,26.984758377075195],[-80.12882995605469,26.98482894897461],[-80.12866973876953,26.98509979248047],[-80.12857055664063,26.985198974609375],[-80.12847137451172,26.985288619995117],[-80.12834930419922,26.98535919189453],[-80.1280746459961,26.985429763793945],[-80.12787628173828,26.98543930053711],[-80.12628936767578,26.985429763793945],[-80.1245346069336,26.985389709472656]]}},{"type":"Feature","properties":{"ID":26,"Name":"County Line Rd","From":"Little Club Dr","To":"Federal Hwy","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":2724.0,"Peak_Hour_Vol_2024":138.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":890.0,"AADT_2023":2525.0,"Peak_Hour_Vol_2023":126.8055,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"7","color":"#39FF14","width":2.2095512241429467,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>County Line Rd (ID: 26)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Little Club Dr  Federal Hwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>2,724<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>138<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #26\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>County Line Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Little Club Dr  Federal Hwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>2,724\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>138\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.10221099853516,26.970680236816406],[-80.0942611694336,26.970609664916992],[-80.08953857421875,26.970548629760742],[-80.08753967285156,26.97052001953125],[-80.08739471435547,26.97052001953125],[-80.08726501464844,26.970579147338867],[-80.08757019042969,26.971458435058594],[-80.08843994140625,26.9739990234375],[-80.08855438232422,26.973979949951172],[-80.08822631835938,26.972990036010742],[-80.08799743652344,26.9722900390625],[-80.08740997314453,26.97056007385254]]}},{"type":"Feature","properties":{"ID":27,"Name":"Cove Rd","From":"Kanner Highway","To":"Willoughby Blvd","Context_Class":"C3R","Service_Capacity":1100.0,"AADT_2024":14364.0,"Peak_Hour_Vol_2024":727.0,"LOS_2024":"C","Growth_Rate_2024":0.007,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1165.0,"AADT_2023":14459.0,"Peak_Hour_Vol_2023":877.5167100000001,"LOS_2023":"C","Growth_Rate_2023":0.01072482292933108,"U_ID":"8","color":"#39FF14","width":3.2788963574283043,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Cove Rd (ID: 27)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Kanner Highway  Willoughby Blvd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>14,364<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>727<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #27\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Cove Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Kanner Highway  Willoughby Blvd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1100\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>14,364\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>727\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.7%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.25455474853516,27.115768432617188],[-80.25457763671875,27.115739822387695],[-80.25439453125,27.115690231323242],[-80.254150390625,27.115589141845703],[-80.25373077392578,27.115549087524414],[-80.25345611572266,27.115558624267578],[-80.25323486328125,27.115589141845703],[-80.25291442871094,27.11570930480957],[-80.25157165527344,27.11625862121582],[-80.2502670288086,27.11686897277832],[-80.24971771240234,27.11709976196289],[-80.24884796142578,27.117429733276367],[-80.24874114990234,27.11749839782715],[-80.24822998046875,27.117719650268555],[-80.24747467041016,27.118040084838867],[-80.246826171875,27.11833953857422],[-80.24662780761719,27.118450164794922],[-80.24388122558594,27.11958885192871],[-80.2436752319336,27.119659423828125],[-80.24363708496094,27.119659423828125],[-80.24140930175781,27.120439529418945],[-80.23963928222656,27.121078491210938],[-80.23806762695313,27.121728897094727],[-80.23632049560547,27.12242889404297],[-80.23394012451172,27.12335968017578],[-80.23155975341797,27.12432861328125],[-80.23021697998047,27.124858856201172],[-80.23049926757813,27.125450134277344],[-80.2316665649414,27.127788543701172],[-80.23307800292969,27.130720138549805],[-80.23320770263672,27.13098907470703],[-80.23250579833984,27.13127899169922],[-80.23217010498047,27.13142967224121],[-80.23152923583984,27.13167953491211],[-80.23123931884766,27.1318302154541],[-80.23070526123047,27.132139205932617],[-80.2298583984375,27.132699966430664],[-80.22962951660156,27.132829666137695],[-80.22941589355469,27.132909774780273],[-80.2288589477539,27.133169174194336],[-80.2280502319336,27.13348960876465],[-80.22761535644531,27.132768630981445],[-80.22713470458984,27.132080078125],[-80.22700500488281,27.131908416748047],[-80.22676849365234,27.131669998168945],[-80.2262954711914,27.13123893737793],[-80.22596740722656,27.13098907470703],[-80.22531127929688,27.13055992126465],[-80.22467041015625,27.130149841308594],[-80.22425842285156,27.12980842590332],[-80.22383117675781,27.1294002532959],[-80.22361755371094,27.129169464111328],[-80.22327423095703,27.12872886657715],[-80.22306060791016,27.128389358520508],[-80.22288513183594,27.128108978271484],[-80.22269439697266,27.12775993347168],[-80.22277069091797,27.127729415893555]]}},{"type":"Feature","properties":{"ID":28,"Name":"Cove Rd","From":"Willoughby Blvd","To":"Federal Hwy","Context_Class":"C3R","Service_Capacity":1100.0,"AADT_2024":16445.0,"Peak_Hour_Vol_2024":832.0,"LOS_2024":"C","Growth_Rate_2024":0.013,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1165.0,"AADT_2023":16452.0,"Peak_Hour_Vol_2023":778.50864,"LOS_2023":"C","Growth_Rate_2023":0.01589931522258969,"U_ID":"188","color":"#39FF14","width":3.4700739538515717,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Cove Rd (ID: 28)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Willoughby Blvd  Federal Hwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>16,445<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>832<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #28\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Cove Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Willoughby Blvd  Federal Hwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1100\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>16,445\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>832\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>1.3%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.22277069091797,27.127729415893555],[-80.2236099243164,27.127389907836914],[-80.22500610351563,27.126829147338867],[-80.22515869140625,27.126739501953125],[-80.2256851196289,27.12653923034668],[-80.22716522216797,27.12594985961914],[-80.2279281616211,27.125659942626953],[-80.2280044555664,27.125659942626953],[-80.22825622558594,27.12558937072754],[-80.22985076904297,27.125059127807617],[-80.23023986816406,27.124919891357422],[-80.2304458618164,27.12533950805664],[-80.23049926757813,27.125450134277344],[-80.23147583007813,27.127408981323242],[-80.2316665649414,27.127788543701172],[-80.23307800292969,27.130720138549805],[-80.23320770263672,27.13098907470703],[-80.23250579833984,27.13127899169922],[-80.23217010498047,27.13142967224121],[-80.23152923583984,27.13167953491211],[-80.23123931884766,27.1318302154541],[-80.23070526123047,27.132139205932617],[-80.2298583984375,27.132699966430664],[-80.22962951660156,27.132829666137695],[-80.22941589355469,27.132909774780273],[-80.2288589477539,27.133169174194336],[-80.22721862792969,27.13382911682129],[-80.22599792480469,27.13433837890625],[-80.2250747680664,27.13469886779785],[-80.22429656982422,27.135019302368164],[-80.22399139404297,27.13515853881836],[-80.22349548339844,27.1353702545166],[-80.22333526611328,27.135379791259766],[-80.22323608398438,27.135419845581055],[-80.22315979003906,27.135438919067383],[-80.2225341796875,27.135679244995117],[-80.22224426269531,27.135818481445313],[-80.22095489501953,27.13633918762207],[-80.22023010253906,27.13665008544922],[-80.2199478149414,27.136730194091797],[-80.21990966796875,27.136699676513672],[-80.21981811523438,27.13667869567871],[-80.2197494506836,27.136699676513672],[-80.21875762939453,27.137088775634766],[-80.21852111816406,27.137218475341797],[-80.21846008300781,27.137338638305664],[-80.21810913085938,27.137489318847656],[-80.21805572509766,27.137588500976563],[-80.2171859741211,27.137908935546875],[-80.21621704101563,27.13827896118164],[-80.212890625,27.139530181884766],[-80.2115249633789,27.140039443969727],[-80.21115112304688,27.140178680419922],[-80.21038055419922,27.138938903808594],[-80.2092514038086,27.137128829956055],[-80.20899963378906,27.13671875],[-80.2081069946289,27.13538932800293],[-80.2077407836914,27.134899139404297],[-80.20750427246094,27.1346492767334],[-80.20691680908203,27.133970260620117],[-80.2068862915039,27.133939743041992]]}},{"type":"Feature","properties":{"ID":30,"Name":"Cove Rd","From":"Dixie Hwy","To":"End","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":5604.0,"Peak_Hour_Vol_2024":284.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":890.0,"AADT_2023":5247.0,"Peak_Hour_Vol_2023":312.30144000000007,"LOS_2023":"TCEA","Growth_Rate_2023":0.005,"U_ID":"10","color":"#39FF14","width":2.4741314633063345,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Cove Rd (ID: 30)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Dixie Hwy  End\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>5,604<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>284<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #30\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Cove Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Dixie Hwy  End\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>5,604\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>284\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.1902847290039,27.1405086517334],[-80.19026947021484,27.140459060668945],[-80.1902084350586,27.140419006347656],[-80.1900863647461,27.14042854309082],[-80.19002532958984,27.14048957824707],[-80.19001770019531,27.1405086517334],[-80.18991088867188,27.14052963256836],[-80.18962097167969,27.140649795532227],[-80.18953704833984,27.140718460083008],[-80.18856048583984,27.141109466552734],[-80.18621826171875,27.14202880859375],[-80.1820068359375,27.14369010925293],[-80.1785888671875,27.14501953125]]}},{"type":"Feature","properties":{"ID":33,"Name":"Dixie Hwy","From":"Lares Ave","To":"Osprey St","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":7609.0,"Peak_Hour_Vol_2024":385.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":890.0,"AADT_2023":7574.0,"Peak_Hour_Vol_2023":505.11006,"LOS_2023":"TCEA","Growth_Rate_2023":0.005,"U_ID":"48","color":"#39FF14","width":2.658327081196123,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Dixie Hwy (ID: 33)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Lares Ave  Osprey St\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>7,609<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>385<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #33\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Dixie Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Lares Ave  Osprey St\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>7,609\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>385\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.13530731201172,27.06698989868164],[-80.1357192993164,27.067489624023438],[-80.1360092163086,27.067899703979492],[-80.1363296508789,27.068429946899414],[-80.13655853271484,27.068889617919922],[-80.13800048828125,27.072208404541016],[-80.13851928710938,27.07341957092285],[-80.1407470703125,27.078569412231445],[-80.14300537109375,27.083778381347656],[-80.14485168457031,27.088058471679688],[-80.14569091796875,27.089969635009766],[-80.14637756347656,27.091598510742188],[-80.14753723144531,27.094289779663086],[-80.14785766601563,27.094989776611328],[-80.14814758300781,27.095640182495117],[-80.1482162475586,27.0958194732666],[-80.14885711669922,27.0972900390625],[-80.14910888671875,27.09779930114746],[-80.14942932128906,27.098379135131836],[-80.14985656738281,27.099069595336914],[-80.15031433105469,27.09977912902832],[-80.1511001586914,27.100988388061523],[-80.1514892578125,27.101598739624023]]}},{"type":"Feature","properties":{"ID":34,"Name":"Dixie Hwy","From":"Osprey St","To":"Heritage Blvd","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":6980.0,"Peak_Hour_Vol_2024":353.0,"LOS_2024":"C","Growth_Rate_2024":0.011,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1110.0,"AADT_2023":7070.0,"Peak_Hour_Vol_2023":385.7392,"LOS_2023":"C","Growth_Rate_2023":0.01753921021992122,"U_ID":"49","color":"#39FF14","width":2.6005420220177307,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Dixie Hwy (ID: 34)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Osprey St  Heritage Blvd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>6,980<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>353<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #34\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Dixie Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Osprey St  Heritage Blvd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>6,980\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>353\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>1.1%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.1514892578125,27.101598739624023],[-80.1517562866211,27.10202980041504],[-80.152587890625,27.10331916809082],[-80.15491485595703,27.10689926147461],[-80.15676879882813,27.109758377075195],[-80.15888977050781,27.112979888916016],[-80.16122436523438,27.11656951904297],[-80.162109375,27.117908477783203]]}},{"type":"Feature","properties":{"ID":35,"Name":"Dixie Hwy","From":"Heritage Blvd","To":"Cove Rd","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":7807.0,"Peak_Hour_Vol_2024":395.0,"LOS_2024":"C","Growth_Rate_2024":0.018,"Comparison_2023":null,"Context_Class_2023":"C2","Service_Capacity_2023":730.0,"AADT_2023":7701.0,"Peak_Hour_Vol_2023":344.38872,"LOS_2023":"C","Growth_Rate_2023":0.01883964376333136,"U_ID":"50","color":"#39FF14","width":2.676516972638606,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Dixie Hwy (ID: 35)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Heritage Blvd  Cove Rd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>7,807<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>395<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #35\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Dixie Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Heritage Blvd  Cove Rd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>7,807\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>395\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>1.8%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.162109375,27.117908477783203],[-80.16346740722656,27.120019912719727],[-80.16549682617188,27.123138427734375],[-80.16838073730469,27.127578735351563],[-80.16963958740234,27.12952995300293],[-80.16971588134766,27.12980842590332],[-80.16970825195313,27.130239486694336],[-80.16976165771484,27.130409240722656],[-80.17002868652344,27.130868911743164],[-80.17037963867188,27.131380081176758],[-80.17064666748047,27.131698608398438],[-80.17106628417969,27.132129669189453],[-80.17138671875,27.13239860534668],[-80.17171478271484,27.132638931274414],[-80.17208862304688,27.132869720458984],[-80.1723861694336,27.13302993774414],[-80.17282104492188,27.133230209350586],[-80.17347717285156,27.133468627929688],[-80.17914581298828,27.135379791259766],[-80.18132019042969,27.136119842529297],[-80.18479919433594,27.13728904724121],[-80.18608093261719,27.13772964477539],[-80.18663024902344,27.137969970703125],[-80.1870346069336,27.138208389282227],[-80.18923950195313,27.139780044555664],[-80.18981170654297,27.140209197998047],[-80.19002532958984,27.14048957824707],[-80.19001770019531,27.140520095825195],[-80.19002532958984,27.14056968688965],[-80.19005584716797,27.140609741210938],[-80.19015502929688,27.14065933227539],[-80.19021606445313,27.140640258789063],[-80.19026947021484,27.140600204467773],[-80.19029998779297,27.140539169311523]]}},{"type":"Feature","properties":{"ID":36,"Name":"Dixie Hwy","From":"Cove Rd","To":"Salerno Rd","Context_Class":"C3R","Service_Capacity":1100.0,"AADT_2024":12078.0,"Peak_Hour_Vol_2024":611.0,"LOS_2024":"TCEA","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C4","Service_Capacity_2023":870.0,"AADT_2023":12000.0,"Peak_Hour_Vol_2023":498.0,"LOS_2023":"TCEA","Growth_Rate_2023":0.005,"U_ID":"51","color":"#39FF14","width":3.068885792592366,"los_color":"#FF073A","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Dixie Hwy (ID: 36)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Cove Rd  Salerno Rd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>12,078<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>611<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FF073A; font-weight: bold;'>TCEA\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #36\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Dixie Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Cove Rd  Salerno Rd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1100\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>12,078\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>611\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FF073A;'>TCEA\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.19029998779297,27.140539169311523],[-80.19026947021484,27.14046859741211],[-80.19023895263672,27.14042854309082],[-80.19017028808594,27.140409469604492],[-80.19010162353516,27.140419006347656],[-80.19002532958984,27.14048957824707],[-80.19002532958984,27.14056968688965],[-80.19010925292969,27.140649795532227],[-80.19015502929688,27.14065933227539],[-80.190185546875,27.14065933227539],[-80.1905517578125,27.140758514404297],[-80.19107055664063,27.141128540039063],[-80.19213104248047,27.14188003540039],[-80.19217681884766,27.141948699951172],[-80.19255065917969,27.142250061035156],[-80.192626953125,27.142349243164063],[-80.19271087646484,27.142459869384766],[-80.19281005859375,27.142669677734375],[-80.19291687011719,27.142778396606445],[-80.19303131103516,27.142858505249023],[-80.1933364868164,27.143030166625977],[-80.19378662109375,27.143360137939453],[-80.19452667236328,27.14383888244629],[-80.19474792480469,27.14400863647461],[-80.19500732421875,27.14419937133789],[-80.1951675415039,27.144319534301758],[-80.19522094726563,27.144418716430664],[-80.19581604003906,27.14484977722168],[-80.19661712646484,27.14542007446289],[-80.19710540771484,27.145750045776367],[-80.19745635986328,27.145999908447266],[-80.19747924804688,27.14596939086914]]}},{"type":"Feature","properties":{"ID":38,"Name":"Dixie Hwy","From":"St Lucie Blvd","To":"Jefferson St","Context_Class":"C3R","Service_Capacity":1100.0,"AADT_2024":13535.0,"Peak_Hour_Vol_2024":685.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":890.0,"AADT_2023":13746.0,"Peak_Hour_Vol_2023":727.43832,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"53","color":"#39FF14","width":3.202737670530232,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Dixie Hwy (ID: 38)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>St Lucie Blvd  Jefferson St\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>13,535<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>685<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #38\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Dixie Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>St Lucie Blvd  Jefferson St\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1100\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>13,535\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>685\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.20230102539063,27.14920997619629],[-80.20227813720703,27.149158477783203],[-80.2020492553711,27.14897918701172],[-80.2017593383789,27.148778915405273],[-80.20167541503906,27.148839950561523],[-80.20160675048828,27.1489200592041],[-80.2016372680664,27.14900016784668],[-80.20208740234375,27.14933967590332],[-80.20243835449219,27.149410247802734],[-80.20254516601563,27.149410247802734],[-80.20279693603516,27.14958953857422],[-80.2043685913086,27.150718688964844],[-80.20613861083984,27.15199851989746],[-80.20829010009766,27.1535587310791],[-80.20838928222656,27.15365982055664],[-80.20853424072266,27.153779983520508],[-80.20880889892578,27.15399932861328],[-80.20896911621094,27.154150009155273],[-80.20943450927734,27.15447998046875],[-80.21004486083984,27.154949188232422],[-80.21054077148438,27.155439376831055],[-80.21141815185547,27.156330108642578],[-80.21150970458984,27.15645980834961],[-80.2121810913086,27.15782928466797],[-80.21263885498047,27.158769607543945],[-80.21276092529297,27.158979415893555],[-80.212890625,27.159149169921875],[-80.21432495117188,27.160598754882813],[-80.21446990966797,27.16073989868164],[-80.21460723876953,27.160789489746094],[-80.21472930908203,27.16090965270996],[-80.21492004394531,27.16109848022461],[-80.21515655517578,27.16135025024414]]}},{"type":"Feature","properties":{"ID":43,"Name":"Farm Rd","From":"Martin Luther King Jr Dr","To":"Palm Wy","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":3264.0,"Peak_Hour_Vol_2024":165.0,"LOS_2024":"C","Growth_Rate_2024":0.03,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":855.0,"AADT_2023":3396.0,"Peak_Hour_Vol_2023":141.27360000000002,"LOS_2023":"C","Growth_Rate_2023":0.04784056834973316,"U_ID":"58","color":"#39FF14","width":2.259160018986082,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Farm Rd (ID: 43)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Martin Luther King Jr Dr  Palm Wy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>3,264<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>165<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #43\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Farm Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Martin Luther King Jr Dr  Palm Wy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>3,264\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>165\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>3%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.48580169677734,27.0214786529541],[-80.4850845336914,27.021398544311523],[-80.48391723632813,27.02138900756836],[-80.48197174072266,27.021398544311523],[-80.48163604736328,27.02136993408203],[-80.48136138916016,27.021318435668945],[-80.47782897949219,27.020408630371094],[-80.47594451904297,27.01991844177246],[-80.47452545166016,27.019559860229492],[-80.47371673583984,27.019350051879883],[-80.4732894897461,27.01927947998047],[-80.47196960449219,27.019208908081055],[-80.46971893310547,27.019100189208984],[-80.46805572509766,27.01900863647461],[-80.46781158447266,27.019039154052734],[-80.46762084960938,27.01919937133789],[-80.46743774414063,27.01943016052246],[-80.46723937988281,27.019689559936523]]}},{"type":"Feature","properties":{"ID":44,"Name":"Federal Hwy","From":"Palm Beach County","To":"Jonathan Dickinson Wy","Context_Class":"C3R","Service_Capacity":1850.0,"AADT_2024":20439.0,"Peak_Hour_Vol_2024":1034.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C2","Service_Capacity_2023":2910.0,"AADT_2023":19846.0,"Peak_Hour_Vol_2023":916.2898200000002,"LOS_2023":"A/B","Growth_Rate_2023":0.005,"U_ID":"105-1","color":"#39FF14","width":3.8369952994135748,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Federal Hwy (ID: 44)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Palm Beach County  Jonathan Dickinson Wy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>20,439<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>1034<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #44\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Federal Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Palm Beach County  Jonathan Dickinson Wy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1850\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>20,439\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>1034\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.25666809082031,27.193220138549805],[-80.25635528564453,27.192829132080078],[-80.25616455078125,27.192649841308594],[-80.25579833984375,27.19236946105957],[-80.25545501708984,27.19217872619629],[-80.25416564941406,27.191579818725586],[-80.25299835205078,27.19101905822754],[-80.2511978149414,27.190168380737305],[-80.24932861328125,27.189279556274414],[-80.24803161621094,27.188678741455078],[-80.24746704101563,27.188369750976563],[-80.24723815917969,27.188228607177734],[-80.24659729003906,27.187768936157227],[-80.24639892578125,27.18756866455078],[-80.24464416503906,27.185810089111328],[-80.24214935302734,27.18328857421875],[-80.24089050292969,27.181968688964844],[-80.23995971679688,27.181018829345703],[-80.2388916015625,27.179948806762695],[-80.23710632324219,27.178110122680664],[-80.23572540283203,27.17671012878418],[-80.23523712158203,27.17624855041504],[-80.2332763671875,27.174259185791016],[-80.2322769165039,27.173259735107422],[-80.23162841796875,27.172590255737305],[-80.2314453125,27.1723690032959],[-80.23080444335938,27.171598434448242],[-80.23030853271484,27.17091941833496],[-80.22966003417969,27.169919967651367],[-80.22891998291016,27.168668746948242],[-80.22856903076172,27.16815948486328],[-80.22773742675781,27.16683006286621],[-80.22718811035156,27.165958404541016],[-80.22713470458984,27.16581916809082],[-80.22669982910156,27.16510009765625],[-80.22644805908203,27.164709091186523],[-80.22624969482422,27.164409637451172],[-80.22561645507813,27.16343879699707],[-80.22439575195313,27.161489486694336],[-80.22413635253906,27.161039352416992],[-80.22357940673828,27.160139083862305],[-80.22269439697266,27.158769607543945],[-80.22151947021484,27.156858444213867],[-80.2202377319336,27.15483856201172],[-80.22019958496094,27.15471839904785],[-80.219970703125,27.154359817504883],[-80.2196044921875,27.153779983520508],[-80.21875,27.152408599853516],[-80.2177505493164,27.15081024169922],[-80.2168960571289,27.14946937561035],[-80.21614074707031,27.14822006225586],[-80.21559143066406,27.147310256958008],[-80.2151107788086,27.14657974243164],[-80.21487426757813,27.14617919921875],[-80.2145004272461,27.145599365234375],[-80.21366119384766,27.14423942565918],[-80.21297454833984,27.143138885498047],[-80.21186065673828,27.141319274902344],[-80.21038055419922,27.138938903808594],[-80.2092514038086,27.137128829956055],[-80.20899963378906,27.13671875],[-80.2081069946289,27.13538932800293],[-80.2077407836914,27.134899139404297],[-80.20750427246094,27.1346492767334],[-80.20691680908203,27.133970260620117],[-80.20661926269531,27.133628845214844],[-80.2062759399414,27.133270263671875],[-80.20574951171875,27.132780075073242],[-80.20539855957031,27.132478713989258],[-80.20487976074219,27.13205909729004],[-80.20427703857422,27.131589889526367],[-80.2036361694336,27.131168365478516],[-80.20263671875,27.130529403686523],[-80.20186614990234,27.13010025024414],[-80.19661712646484,27.127168655395508],[-80.19515991210938,27.1263484954834],[-80.19229125976563,27.124759674072266],[-80.18647766113281,27.12150001525879],[-80.18508911132813,27.120729446411133],[-80.18460083007813,27.12044906616211],[-80.18296813964844,27.119529724121094],[-80.17982482910156,27.117769241333008],[-80.17904663085938,27.117319107055664],[-80.17813110351563,27.116748809814453],[-80.17733001708984,27.116138458251953],[-80.17655944824219,27.115549087524414],[-80.17568969726563,27.11475944519043],[-80.17277526855469,27.111989974975586],[-80.17169952392578,27.11096954345703],[-80.16989135742188,27.10921859741211],[-80.16954803466797,27.10887908935547],[-80.1690444946289,27.108388900756836],[-80.16746520996094,27.106840133666992],[-80.16613006591797,27.10552978515625],[-80.16455078125,27.104000091552734],[-80.16344451904297,27.1028995513916],[-80.16136169433594,27.100839614868164],[-80.16019439697266,27.099699020385742],[-80.15956115722656,27.09906005859375],[-80.1590805053711,27.09851837158203],[-80.15825653076172,27.09747886657715],[-80.15702819824219,27.09587860107422],[-80.154541015625,27.092639923095703],[-80.15094757080078,27.087940216064453],[-80.14750671386719,27.08344841003418],[-80.14688873291016,27.082469940185547],[-80.14672088623047,27.082189559936523],[-80.14657592773438,27.081989288330078],[-80.14649963378906,27.081809997558594],[-80.14599609375,27.08078956604004],[-80.14569091796875,27.080068588256836],[-80.14533996582031,27.079288482666016],[-80.14384460449219,27.07583999633789],[-80.14310455322266,27.074169158935547],[-80.14266967773438,27.073148727416992],[-80.14048767089844,27.06814956665039],[-80.13935089111328,27.065519332885742],[-80.13887786865234,27.06441879272461],[-80.13842010498047,27.063379287719727],[-80.13762664794922,27.061569213867188],[-80.13717651367188,27.060529708862305],[-80.13700103759766,27.060089111328125],[-80.13668823242188,27.059419631958008],[-80.13604736328125,27.05797004699707],[-80.13545989990234,27.05661964416504],[-80.13520812988281,27.056119918823242],[-80.13492584228516,27.055639266967773],[-80.13463592529297,27.055219650268555],[-80.13439178466797,27.054889678955078],[-80.1338882446289,27.054359436035156],[-80.13359069824219,27.054100036621094],[-80.13327026367188,27.053829193115234],[-80.1329345703125,27.053579330444336],[-80.13259887695313,27.0533390045166],[-80.13201904296875,27.052978515625],[-80.13059997558594,27.052120208740234],[-80.12478637695313,27.048608779907227],[-80.12329864501953,27.04768943786621],[-80.1223373413086,27.046998977661133],[-80.12133026123047,27.046369552612305],[-80.11979675292969,27.04545021057129],[-80.11746978759766,27.044038772583008],[-80.11712646484375,27.0438289642334],[-80.11608123779297,27.04313850402832],[-80.11551666259766,27.042678833007813],[-80.11516571044922,27.042339324951172],[-80.11477661132813,27.041898727416992],[-80.11449432373047,27.041519165039063],[-80.1142349243164,27.041118621826172],[-80.11392974853516,27.040550231933594],[-80.11377716064453,27.040180206298828],[-80.11346435546875,27.03936004638672],[-80.11325073242188,27.03866958618164],[-80.1127700805664,27.037059783935547],[-80.11170959472656,27.033498764038086],[-80.11054992675781,27.02972984313965],[-80.10894012451172,27.02446937561035]]}},{"type":"Feature","properties":{"ID":46,"Name":"Federal Hwy","From":"Dixie Hwy","To":"Olympus St","Context_Class":"C3R","Service_Capacity":1850.0,"AADT_2024":18100.0,"Peak_Hour_Vol_2024":916.0,"LOS_2024":"C","Growth_Rate_2024":0.01,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1850.0,"AADT_2023":16983.495,"Peak_Hour_Vol_2023":876.3483419999999,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"106-1","color":"#39FF14","width":3.6221157232319214,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Federal Hwy (ID: 46)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Dixie Hwy  Olympus St\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>18,100<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>916<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #46\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Federal Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Dixie Hwy  Olympus St\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1850\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>18,100\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>916\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>1%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.1198501586914,27.045780181884766],[-80.13138580322266,27.0527400970459],[-80.13236999511719,27.0533390045166],[-80.13275909423828,27.053598403930664],[-80.13321685791016,27.0539493560791],[-80.13365173339844,27.05432891845703],[-80.13408660888672,27.0548095703125],[-80.13456726074219,27.05537986755371],[-80.13482666015625,27.055749893188477],[-80.13499450683594,27.056028366088867]]}},{"type":"Feature","properties":{"ID":50,"Name":"Federal Hwy","From":"Osprey St","To":"Seabranch Blvd","Context_Class":"C3R","Service_Capacity":1850.0,"AADT_2024":26500.0,"Peak_Hour_Vol_2024":1341.0,"LOS_2024":"C","Growth_Rate_2024":0.024,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1850.0,"AADT_2023":25849.605,"Peak_Hour_Vol_2023":1158.0623040000005,"LOS_2023":"C","Growth_Rate_2023":0.0232508926384265,"U_ID":"176","color":"#39FF14","width":4.393808087458468,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Federal Hwy (ID: 50)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Osprey St  Seabranch Blvd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>26,500<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>1341<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #50\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Federal Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Osprey St  Seabranch Blvd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1850\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>26,500\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>1341\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>2.4%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.15933990478516,27.098819732666016],[-80.15921020507813,27.098899841308594],[-80.15943145751953,27.099088668823242],[-80.15963745117188,27.09929847717285],[-80.160400390625,27.100069046020508],[-80.16207885742188,27.101728439331055],[-80.1631088256836,27.10274887084961],[-80.16363525390625,27.103248596191406],[-80.16828155517578,27.107818603515625],[-80.17103576660156,27.110538482666016],[-80.17156982421875,27.111059188842773],[-80.17161560058594,27.11113929748535],[-80.17218017578125,27.1116886138916],[-80.1729965209961,27.112489700317383],[-80.17607879638672,27.11543846130371],[-80.17630004882813,27.115650177001953],[-80.17695617675781,27.11618995666504],[-80.1773910522461,27.11650848388672],[-80.1781005859375,27.11701011657715],[-80.17823791503906,27.116819381713867]]}},{"type":"Feature","properties":{"ID":68,"Name":"Goldenrod Rd","From":"Jensen Beach Blvd","To":"Federal Hwy","Context_Class":"C3R","Service_Capacity":1100.0,"AADT_2024":6654.0,"Peak_Hour_Vol_2024":337.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":1125.0,"AADT_2023":6621.0,"Peak_Hour_Vol_2023":342.30570000000006,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"177","color":"#39FF14","width":2.5705930088346527,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Goldenrod Rd (ID: 68)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Jensen Beach Blvd  Federal Hwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>6,654<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>337<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #68\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Goldenrod Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Jensen Beach Blvd  Federal Hwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1100\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>6,654\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>337\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.26780700683594,27.245399475097656],[-80.2677001953125,27.24540901184082],[-80.2677001953125,27.24553871154785],[-80.26770782470703,27.245698928833008],[-80.26776123046875,27.245779037475586],[-80.26776123046875,27.245920181274414],[-80.26774597167969,27.247068405151367],[-80.26782989501953,27.247398376464844],[-80.26822662353516,27.24827003479004],[-80.26871490478516,27.249229431152344],[-80.26889038085938,27.249479293823242],[-80.26908111572266,27.249698638916016],[-80.26911926269531,27.24972915649414],[-80.26924133300781,27.249849319458008],[-80.26958465576172,27.250089645385742],[-80.2701416015625,27.250398635864258],[-80.27050018310547,27.250699996948242],[-80.27066802978516,27.25088882446289],[-80.27108764648438,27.25157928466797],[-80.27136993408203,27.251890182495117],[-80.27162170410156,27.252079010009766],[-80.27169036865234,27.25212860107422],[-80.27215576171875,27.252389907836914],[-80.27240753173828,27.252470016479492],[-80.27276611328125,27.25255012512207],[-80.27311706542969,27.25259017944336],[-80.2737808227539,27.2525691986084],[-80.2745361328125,27.25252914428711],[-80.2750244140625,27.252470016479492],[-80.27539825439453,27.25235939025879],[-80.27555847167969,27.252309799194336],[-80.2762680053711,27.251930236816406],[-80.2764892578125,27.251819610595703]]}},{"type":"Feature","properties":{"ID":70,"Name":"Gomez Ave","From":"Bridge Rd","To":"Crossrip St","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":3354.0,"Peak_Hour_Vol_2024":170.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1110.0,"AADT_2023":3565.0,"Peak_Hour_Vol_2023":156.3609,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"61","color":"#39FF14","width":2.2674281514599377,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Gomez Ave (ID: 70)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Bridge Rd  Crossrip St\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>3,354<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>170<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #70\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Gomez Ave\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Bridge Rd  Crossrip St\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>3,354\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>170\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.12890625,27.062158584594727],[-80.13019561767578,27.06169891357422],[-80.13043975830078,27.06161880493164],[-80.13086700439453,27.062089920043945],[-80.1316909790039,27.062990188598633],[-80.13175964355469,27.063030242919922],[-80.13288116455078,27.064289093017578],[-80.13528442382813,27.066959381103516],[-80.1357192993164,27.067489624023438],[-80.1360092163086,27.067899703979492],[-80.1363296508789,27.068429946899414],[-80.13655853271484,27.068889617919922],[-80.13800048828125,27.072208404541016],[-80.13933563232422,27.075300216674805],[-80.14191436767578,27.081289291381836],[-80.14411926269531,27.086380004882813],[-80.14569091796875,27.089969635009766],[-80.14753723144531,27.094289779663086],[-80.14785766601563,27.094989776611328],[-80.14765167236328,27.095029830932617],[-80.14743041992188,27.095129013061523],[-80.14563751220703,27.09575843811035]]}},{"type":"Feature","properties":{"ID":71,"Name":"Gomez Ave","From":"Crossrip St","To":"Osprey St","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":1212.0,"Peak_Hour_Vol_2024":61.0,"LOS_2024":"C","Growth_Rate_2024":0.026,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1110.0,"AADT_2023":1211.0,"Peak_Hour_Vol_2023":58.32176,"LOS_2023":"C","Growth_Rate_2023":0.0326392631816057,"U_ID":"62","color":"#39FF14","width":2.0706465985821683,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Gomez Ave (ID: 71)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Crossrip St  Osprey St\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>1,212<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>61<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #71\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Gomez Ave\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Crossrip St  Osprey St\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>1,212\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>61\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>2.6%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.14563751220703,27.09575843811035],[-80.1463394165039,27.097429275512695],[-80.14682006835938,27.098508834838867],[-80.14727783203125,27.099550247192383],[-80.1484603881836,27.102279663085938],[-80.14859008789063,27.10260009765625]]}},{"type":"Feature","properties":{"ID":72,"Name":"Green River Pkwy","From":"Dixie Hwy","To":"Baker Rd","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":8512.0,"Peak_Hour_Vol_2024":431.0,"LOS_2024":"C","Growth_Rate_2024":0.045,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":890.0,"AADT_2023":8789.0,"Peak_Hour_Vol_2023":479.17628,"LOS_2023":"C","Growth_Rate_2023":0.06495684897478293,"U_ID":"189","color":"#39FF14","width":2.741284010350477,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Green River Pkwy (ID: 72)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Dixie Hwy  Baker Rd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>8,512<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>431<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #72\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Green River Pkwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Dixie Hwy  Baker Rd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>8,512\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>431\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>4.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.25383758544922,27.219980239868164],[-80.25350952148438,27.22049903869629],[-80.25334167480469,27.2208194732666],[-80.25326538085938,27.221010208129883],[-80.25297546386719,27.221710205078125],[-80.25287628173828,27.221988677978516],[-80.25281524658203,27.222009658813477],[-80.25277709960938,27.22205924987793],[-80.25276947021484,27.222108840942383],[-80.2527847290039,27.222158432006836],[-80.25286865234375,27.222209930419922],[-80.25296783447266,27.222209930419922],[-80.25302124023438,27.222169876098633],[-80.2530288696289,27.222108840942383],[-80.2530288696289,27.22205924987793]]}},{"type":"Feature","properties":{"ID":73,"Name":"Green River Pkwy","From":"Baker Rd","To":"Jensen Beach Blvd","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":9877.0,"Peak_Hour_Vol_2024":500.0,"LOS_2024":"C","Growth_Rate_2024":0.034,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1110.0,"AADT_2023":9706.0,"Peak_Hour_Vol_2023":670.87872,"LOS_2023":"C","Growth_Rate_2023":0.03861727414176563,"U_ID":"190","color":"#39FF14","width":2.8666840195372907,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Green River Pkwy (ID: 73)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Baker Rd  Jensen Beach Blvd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>9,877<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>500<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #73\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Green River Pkwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Baker Rd  Jensen Beach Blvd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>9,877\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>500\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>3.4%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.2530288696289,27.22205924987793],[-80.25299835205078,27.222028732299805],[-80.25294494628906,27.222000122070313],[-80.25287628173828,27.221988677978516],[-80.25281524658203,27.222009658813477],[-80.25277709960938,27.22205924987793],[-80.25276947021484,27.222108840942383],[-80.2527847290039,27.222158432006836],[-80.25281524658203,27.22218894958496],[-80.2528076171875,27.222620010375977],[-80.2527847290039,27.22296905517578],[-80.25277709960938,27.225229263305664],[-80.25274658203125,27.225358963012695],[-80.25271606445313,27.22595977783203],[-80.25271606445313,27.226940155029297],[-80.25274658203125,27.227319717407227],[-80.25275421142578,27.227468490600586],[-80.25279998779297,27.227569580078125],[-80.25281524658203,27.227779388427734],[-80.2528305053711,27.22793960571289],[-80.2528305053711,27.229089736938477],[-80.2528305053711,27.231128692626953],[-80.25281524658203,27.23365020751953],[-80.25281524658203,27.236169815063477],[-80.25284576416016,27.23672866821289],[-80.25293731689453,27.23712921142578],[-80.25300598144531,27.237348556518555],[-80.25341796875,27.238399505615234],[-80.25350952148438,27.238840103149414],[-80.2535400390625,27.239269256591797],[-80.25352478027344,27.23992919921875],[-80.25350952148438,27.2413387298584],[-80.25348663330078,27.24226951599121],[-80.25345611572266,27.242528915405273],[-80.2534408569336,27.243379592895508],[-80.25342559814453,27.244709014892578],[-80.25341796875,27.245220184326172],[-80.2533950805664,27.245338439941406],[-80.2535171508789,27.245349884033203]]}},{"type":"Feature","properties":{"ID":75,"Name":"High Meadow Ave","From":"I-95","To":"Golden Bear Way","Context_Class":"C3R","Service_Capacity":1100.0,"AADT_2024":13598.0,"Peak_Hour_Vol_2024":688.0,"LOS_2024":"C","Growth_Rate_2024":0.007,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":1125.0,"AADT_2023":14293.0,"Peak_Hour_Vol_2023":1207.4726400000002,"LOS_2023":"E","Growth_Rate_2023":0.02091980712528784,"U_ID":"34","color":"#39FF14","width":3.2085253632619315,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>High Meadow Ave (ID: 75)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>I-95  Golden Bear Way\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>13,598<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>688<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #75\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>High Meadow Ave\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>I-95  Golden Bear Way\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1100\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>13,598\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>688\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.7%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.27996063232422,27.125530242919922],[-80.27906036376953,27.124168395996094],[-80.27810668945313,27.12274932861328],[-80.2779312133789,27.122509002685547],[-80.27777862548828,27.122379302978516],[-80.27752685546875,27.12225914001465],[-80.2773666381836,27.12221908569336],[-80.27719116210938,27.122209548950195],[-80.2770767211914,27.12221908569336],[-80.27688598632813,27.122268676757813],[-80.27619171142578,27.12248992919922],[-80.27578735351563,27.12257957458496],[-80.27540588378906,27.122589111328125],[-80.27517700195313,27.12257957458496],[-80.27485656738281,27.122509002685547],[-80.27462005615234,27.12242889404297],[-80.27447509765625,27.122379302978516],[-80.27434539794922,27.12238883972168],[-80.2740707397461,27.12224006652832],[-80.27362823486328,27.121990203857422],[-80.27330017089844,27.121789932250977],[-80.27234649658203,27.121219635009766],[-80.27149963378906,27.120668411254883],[-80.27037048339844,27.1198787689209],[-80.2696762084961,27.119369506835938],[-80.26934814453125,27.119098663330078],[-80.26839447021484,27.11833953857422],[-80.26725006103516,27.117319107055664],[-80.26649475097656,27.116588592529297],[-80.26615905761719,27.116249084472656],[-80.2653579711914,27.11540985107422],[-80.2646713256836,27.1146297454834],[-80.26426696777344,27.11414909362793],[-80.26409149169922,27.113920211791992],[-80.2640609741211,27.113759994506836],[-80.26382446289063,27.11343002319336],[-80.26338958740234,27.112789154052734],[-80.26301574707031,27.11219024658203],[-80.26284790039063,27.111820220947266],[-80.26277923583984,27.111568450927734],[-80.26272583007813,27.111249923706055],[-80.26274108886719,27.110960006713867],[-80.26277160644531,27.110750198364258],[-80.26296997070313,27.10999870300293],[-80.2632064819336,27.10910987854004],[-80.26322174072266,27.108869552612305],[-80.26316833496094,27.108610153198242],[-80.26309967041016,27.10845947265625],[-80.26300048828125,27.108308792114258],[-80.26255798339844,27.10787010192871],[-80.2623062133789,27.10765838623047],[-80.26219940185547,27.107580184936523],[-80.26197052001953,27.107540130615234],[-80.2611312866211,27.108179092407227],[-80.2606201171875,27.108570098876953],[-80.26026153564453,27.10883903503418],[-80.25981903076172,27.10917854309082],[-80.25959777832031,27.109338760375977],[-80.25965118408203,27.10940933227539],[-80.25969696044922,27.109479904174805],[-80.2605209350586,27.110458374023438],[-80.2608413696289,27.110849380493164],[-80.2610855102539,27.111169815063477],[-80.26174926757813,27.111919403076172],[-80.26290893554688,27.113258361816406],[-80.26380920410156,27.114290237426758],[-80.26387023925781,27.114349365234375],[-80.26399993896484,27.1143798828125],[-80.26435852050781,27.114830017089844],[-80.26513671875,27.115699768066406],[-80.26593017578125,27.11652946472168],[-80.2668685913086,27.117448806762695],[-80.26770782470703,27.118209838867188],[-80.26912689208984,27.119388580322266],[-80.2702865600586,27.120269775390625],[-80.271728515625,27.121238708496094],[-80.27291870117188,27.121978759765625],[-80.2742691040039,27.122739791870117],[-80.27559661865234,27.1234188079834],[-80.27569580078125,27.123559951782227],[-80.27589416503906,27.123680114746094],[-80.27620697021484,27.123958587646484],[-80.27642059326172,27.12425994873047],[-80.27659606933594,27.1246395111084],[-80.27672576904297,27.125028610229492],[-80.27687072753906,27.125459671020508],[-80.27693939208984,27.125598907470703],[-80.2770767211914,27.12575912475586],[-80.27725982666016,27.12588882446289],[-80.27745819091797,27.125978469848633],[-80.27761840820313,27.125999450683594],[-80.27787780761719,27.126008987426758],[-80.2782974243164,27.12598991394043],[-80.27886962890625,27.125959396362305],[-80.27916717529297,27.12594985961914],[-80.27943420410156,27.125978469848633],[-80.27971649169922,27.12605857849121],[-80.2799301147461,27.126169204711914],[-80.28022766113281,27.126419067382813],[-80.28035736083984,27.126569747924805],[-80.28057861328125,27.127029418945313],[-80.28076171875,27.127349853515625],[-80.28089141845703,27.12759017944336],[-80.28099060058594,27.12775993347168],[-80.28107452392578,27.12782859802246],[-80.2813949584961,27.1282901763916],[-80.28165435791016,27.128679275512695],[-80.2825698852539,27.130029678344727],[-80.28330993652344,27.131099700927734],[-80.28364562988281,27.131669998168945],[-80.28412628173828,27.132429122924805],[-80.28480529785156,27.133520126342773],[-80.2853775024414,27.134328842163086],[-80.28569793701172,27.1347599029541],[-80.28607940673828,27.135229110717773],[-80.28673553466797,27.136058807373047],[-80.28746032714844,27.137039184570313],[-80.28836822509766,27.138349533081055],[-80.291748046875,27.143329620361328],[-80.29222106933594,27.14402961730957],[-80.29344940185547,27.14583969116211],[-80.29377746582031,27.146339416503906],[-80.29383087158203,27.146459579467773]]}},{"type":"Feature","properties":{"ID":77,"Name":"High Meadow Ave","From":"Martin Hwy","To":"Martin Downs Blvd","Context_Class":"C3R","Service_Capacity":1100.0,"AADT_2024":12061.0,"Peak_Hour_Vol_2024":610.0,"LOS_2024":"C","Growth_Rate_2024":0.021,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1165.0,"AADT_2023":9701.0,"Peak_Hour_Vol_2023":514.153,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"33","color":"#39FF14","width":3.0673240342361927,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>High Meadow Ave (ID: 77)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Martin Hwy  Martin Downs Blvd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>12,061<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>610<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #77\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>High Meadow Ave\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Martin Hwy  Martin Downs Blvd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1100\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>12,061\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>610\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>2.1%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.29637908935547,27.161428451538086],[-80.2976303100586,27.161449432373047],[-80.3002700805664,27.161479949951172],[-80.30066680908203,27.161479949951172],[-80.30066680908203,27.16197967529297],[-80.30066680908203,27.162208557128906],[-80.30068969726563,27.163410186767578],[-80.30067443847656,27.163768768310547],[-80.30059051513672,27.164379119873047],[-80.30046844482422,27.164838790893555],[-80.30023956298828,27.16543960571289],[-80.2998046875,27.16642951965332],[-80.29843139648438,27.169639587402344],[-80.29795837402344,27.17068862915039],[-80.2978286743164,27.17091941833496],[-80.29769897460938,27.171119689941406],[-80.29730987548828,27.171539306640625],[-80.29686737060547,27.171859741210938],[-80.2964096069336,27.172100067138672],[-80.29618835449219,27.17222023010254],[-80.29598999023438,27.172279357910156],[-80.29544830322266,27.17238998413086],[-80.2952880859375,27.172409057617188],[-80.29402160644531,27.172409057617188]]}},{"type":"Feature","properties":{"ID":78,"Name":"High Meadow Ave","From":"Martin Downs Blvd","To":"Murphy Rd","Context_Class":"C3R","Service_Capacity":1100.0,"AADT_2024":12790.0,"Peak_Hour_Vol_2024":647.0,"LOS_2024":"C","Growth_Rate_2024":0.006,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1165.0,"AADT_2023":12673.0,"Peak_Hour_Vol_2023":533.78676,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"63","color":"#39FF14","width":3.134295907274425,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>High Meadow Ave (ID: 78)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Martin Downs Blvd  Murphy Rd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>12,790<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>647<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #78\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>High Meadow Ave\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Martin Downs Blvd  Murphy Rd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1100\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>12,790\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>647\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.6%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.29399871826172,27.172399520874023],[-80.29387664794922,27.172378540039063],[-80.29386138916016,27.17255973815918],[-80.29386138916016,27.172880172729492],[-80.2938003540039,27.174348831176758],[-80.29377746582031,27.175230026245117],[-80.29377746582031,27.1752986907959],[-80.29381561279297,27.17544937133789],[-80.29377746582031,27.17582893371582],[-80.29375457763672,27.176908493041992],[-80.293701171875,27.1823787689209],[-80.29367065429688,27.184589385986328],[-80.29373168945313,27.18509864807129],[-80.29387664794922,27.185890197753906],[-80.29389953613281,27.18604850769043],[-80.29390716552734,27.186248779296875],[-80.2938003540039,27.186458587646484],[-80.29378509521484,27.18647003173828],[-80.29376983642578,27.18647003173828],[-80.29373931884766,27.18648910522461],[-80.293701171875,27.18655014038086],[-80.293701171875,27.186609268188477],[-80.29371643066406,27.186668395996094],[-80.29377746582031,27.18671989440918],[-80.29389953613281,27.18671989440918],[-80.29393768310547,27.186729431152344],[-80.2939682006836,27.186668395996094],[-80.29399871826172,27.18659019470215],[-80.29397583007813,27.18651008605957],[-80.2939682006836,27.186498641967773]]}},{"type":"Feature","properties":{"ID":79,"Name":"Horseshoe Point Rd","From":"Dixie Hwy","To":"Kubin Ave","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":5665.0,"Peak_Hour_Vol_2024":287.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C4","Service_Capacity_2023":695.0,"AADT_2023":5457.0,"Peak_Hour_Vol_2023":228.48459000000005,"LOS_2023":"D","Growth_Rate_2023":0.005,"U_ID":"64","color":"#39FF14","width":2.4797354197608366,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Horseshoe Point Rd (ID: 79)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Dixie Hwy  Kubin Ave\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>5,665<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>287<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #79\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Horseshoe Point Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Dixie Hwy  Kubin Ave\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>5,665\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>287\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.18309020996094,27.149869918823242],[-80.17715454101563,27.152179718017578]]}},{"type":"Feature","properties":{"ID":85,"Name":"Indian River Dr","From":"Palmer St","To":"Dixie Hwy","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":9417.0,"Peak_Hour_Vol_2024":477.0,"LOS_2024":"C","Growth_Rate_2024":0.046,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1110.0,"AADT_2023":8559.0,"Peak_Hour_Vol_2023":338.25168,"LOS_2023":"C","Growth_Rate_2023":0.0332614593595848,"U_ID":"65","color":"#39FF14","width":2.8244246757820273,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Indian River Dr (ID: 85)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Palmer St  Dixie Hwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>9,417<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>477<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #85\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Indian River Dr\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Palmer St  Dixie Hwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>9,417\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>477\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>4.6%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.21240997314453,27.222959518432617],[-80.212646484375,27.223480224609375],[-80.21271514892578,27.22365951538086],[-80.2128677368164,27.223888397216797],[-80.21334075927734,27.22458839416504],[-80.2136459350586,27.225038528442383],[-80.21402740478516,27.225439071655273],[-80.21519470214844,27.22654914855957],[-80.2156753540039,27.227008819580078],[-80.21601867675781,27.22736930847168],[-80.21630096435547,27.22783851623535],[-80.2165298461914,27.228269577026367],[-80.21727752685547,27.229679107666016],[-80.21760559082031,27.23036003112793],[-80.21788787841797,27.230939865112305],[-80.21820068359375,27.231538772583008],[-80.21857452392578,27.23236846923828],[-80.21873474121094,27.232698440551758]]}},{"type":"Feature","properties":{"ID":86,"Name":"Indian River Dr","From":"Dixie Hwy","To":"Jensen Beach Blvd","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":10692.0,"Peak_Hour_Vol_2024":541.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":890.0,"AADT_2023":11042.0,"Peak_Hour_Vol_2023":674.1141000000001,"LOS_2023":"C","Growth_Rate_2023":0.01215652816939805,"U_ID":"137","color":"#39FF14","width":2.9415565524949856,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Indian River Dr (ID: 86)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Dixie Hwy  Jensen Beach Blvd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>10,692<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>541<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #86\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Indian River Dr\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Dixie Hwy  Jensen Beach Blvd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>10,692\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>541\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.21873474121094,27.232698440551758],[-80.21931457519531,27.233949661254883],[-80.21998596191406,27.23535919189453],[-80.22075653076172,27.23695945739746],[-80.22193145751953,27.239429473876953],[-80.22216796875,27.239959716796875],[-80.2225112915039,27.24066925048828],[-80.22264099121094,27.24094009399414],[-80.22286987304688,27.24129867553711],[-80.223388671875,27.24209976196289],[-80.22364044189453,27.242359161376953],[-80.22419738769531,27.242929458618164],[-80.22444915771484,27.243228912353516],[-80.2249984741211,27.243999481201172],[-80.22529602050781,27.244449615478516],[-80.22526550292969,27.24445915222168]]}},{"type":"Feature","properties":{"ID":88,"Name":"Indian River Dr","From":"Causeway Blvd","To":"St. Lucie County","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":8306.0,"Peak_Hour_Vol_2024":420.0,"LOS_2024":"C","Growth_Rate_2024":0.047,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":890.0,"AADT_2023":8265.12,"Peak_Hour_Vol_2023":555.4160640000001,"LOS_2023":"C","Growth_Rate_2023":0.05725519723573913,"U_ID":"14","color":"#39FF14","width":2.722359173799207,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Indian River Dr (ID: 88)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Causeway Blvd  St. Lucie County\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>8,306<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>420<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #88\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Indian River Dr\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Causeway Blvd  St. Lucie County\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>8,306\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>420\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>4.7%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.22786712646484,27.250789642333984],[-80.22798156738281,27.250789642333984],[-80.2280502319336,27.250768661499023],[-80.22811889648438,27.25074005126953],[-80.22811889648438,27.250709533691406],[-80.22809600830078,27.250598907470703],[-80.22802734375,27.250530242919922],[-80.22796630859375,27.250518798828125],[-80.2278060913086,27.250329971313477],[-80.2277603149414,27.250139236450195],[-80.22755432128906,27.24955940246582],[-80.22744750976563,27.249319076538086],[-80.2269515991211,27.248350143432617],[-80.22657012939453,27.247629165649414],[-80.2262954711914,27.247079849243164],[-80.22589111328125,27.245960235595703],[-80.22570037841797,27.245498657226563],[-80.22557067871094,27.245208740234375],[-80.22545623779297,27.244850158691406],[-80.22529602050781,27.244449615478516],[-80.22509002685547,27.24411964416504],[-80.22489929199219,27.24384880065918],[-80.22431945800781,27.243080139160156],[-80.22409057617188,27.24281883239746],[-80.22348022460938,27.24220848083496],[-80.223388671875,27.24209976196289],[-80.22300720214844,27.241498947143555],[-80.22264099121094,27.24094009399414],[-80.22241973876953,27.24049949645996],[-80.22197723388672,27.239559173583984],[-80.22053527832031,27.236509323120117],[-80.21979522705078,27.23495864868164],[-80.21920013427734,27.23369026184082],[-80.21888732910156,27.233009338378906],[-80.21857452392578,27.23236846923828],[-80.21820068359375,27.231538772583008],[-80.21788787841797,27.230939865112305],[-80.21760559082031,27.23036003112793],[-80.21727752685547,27.229679107666016],[-80.21688079833984,27.22892951965332],[-80.21630096435547,27.22783851623535],[-80.21601867675781,27.22736930847168],[-80.2156753540039,27.227008819580078],[-80.21480560302734,27.226179122924805],[-80.21390533447266,27.225309371948242],[-80.2136459350586,27.225038528442383],[-80.21334075927734,27.22458839416504],[-80.2128677368164,27.223888397216797],[-80.21271514892578,27.22365951538086],[-80.212646484375,27.223480224609375],[-80.21240997314453,27.222959518432617],[-80.2120590209961,27.222179412841797],[-80.21163177490234,27.22123908996582],[-80.21138000488281,27.220748901367188],[-80.21106719970703,27.220048904418945],[-80.2105941772461,27.2189998626709],[-80.21026611328125,27.21828842163086],[-80.21006774902344,27.21786880493164],[-80.20954132080078,27.2169189453125],[-80.20830535888672,27.21474838256836],[-80.20809173583984,27.214340209960938],[-80.20784759521484,27.21385955810547],[-80.20746612548828,27.213069915771484],[-80.20601654052734,27.21082878112793],[-80.2037582397461,27.20771026611328],[-80.20193481445313,27.205228805541992],[-80.2017593383789,27.20496940612793],[-80.20127868652344,27.204139709472656],[-80.20067596435547,27.20306968688965],[-80.20056915283203,27.202899932861328],[-80.2014389038086,27.202489852905273],[-80.20230865478516,27.20207977294922],[-80.2025375366211,27.20197868347168],[-80.2027816772461,27.201929092407227],[-80.20331573486328,27.20163917541504],[-80.2038803100586,27.201290130615234],[-80.20585632324219,27.200088500976563],[-80.20710754394531,27.199378967285156],[-80.20862579345703,27.198598861694336],[-80.21026611328125,27.19784927368164],[-80.2110366821289,27.197519302368164],[-80.21160125732422,27.197288513183594],[-80.21199035644531,27.197139739990234],[-80.21184539794922,27.197078704833984],[-80.21122741699219,27.196578979492188],[-80.21104431152344,27.196409225463867],[-80.2109146118164,27.196258544921875],[-80.21083068847656,27.196109771728516],[-80.21076965332031,27.19594955444336],[-80.21075439453125,27.195758819580078]]}},{"type":"Feature","properties":{"ID":89,"Name":"Island Way","From":"Palm Beach County","To":"Jupiter Road","Context_Class":"C3R","Service_Capacity":1100.0,"AADT_2024":5263.0,"Peak_Hour_Vol_2024":266.0,"LOS_2024":"C","Growth_Rate_2024":0.032,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1110.0,"AADT_2023":5107.0,"Peak_Hour_Vol_2023":452.22485,"LOS_2023":"C","Growth_Rate_2023":0.03254112895056349,"U_ID":"182","color":"#39FF14","width":2.4428044280442807,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Island Way (ID: 89)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Palm Beach County  Jupiter Road\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>5,263<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>266<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #89\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Island Way\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Palm Beach County  Jupiter Road\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1100\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>5,263\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>266\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>3.2%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.29830169677734,27.198728561401367],[-80.296630859375,27.198688507080078],[-80.29647827148438,27.19866943359375],[-80.29603576660156,27.198570251464844],[-80.29582977294922,27.19862937927246],[-80.29594421386719,27.198129653930664],[-80.29605865478516,27.1977596282959],[-80.29613494873047,27.19757843017578],[-80.29642486572266,27.196949005126953],[-80.29693603515625,27.195388793945313],[-80.2970199584961,27.19495964050293],[-80.297119140625,27.194189071655273],[-80.2973861694336,27.19305992126465],[-80.29750061035156,27.19236946105957],[-80.29769134521484,27.190879821777344],[-80.29766845703125,27.190488815307617],[-80.29756927490234,27.1900691986084],[-80.29743957519531,27.189809799194336],[-80.29727172851563,27.189559936523438],[-80.29703521728516,27.189319610595703],[-80.29685974121094,27.189178466796875],[-80.29664611816406,27.18902015686035],[-80.2962417602539,27.188650131225586],[-80.29583740234375,27.188148498535156],[-80.29548645019531,27.187679290771484],[-80.29515075683594,27.18729019165039],[-80.2949447631836,27.187129974365234],[-80.29470825195313,27.186988830566406],[-80.29438781738281,27.18684959411621],[-80.29413604736328,27.186779022216797],[-80.29397583007813,27.186649322509766],[-80.29399871826172,27.186569213867188],[-80.29396057128906,27.18648910522461],[-80.29390716552734,27.186248779296875],[-80.29388427734375,27.185989379882813],[-80.29380798339844,27.18549919128418],[-80.2936782836914,27.18475914001465],[-80.29368591308594,27.182899475097656],[-80.29374694824219,27.17776870727539],[-80.29378509521484,27.175628662109375],[-80.29381561279297,27.17544937133789],[-80.29387664794922,27.1752986907959],[-80.29388427734375,27.175230026245117],[-80.2939682006836,27.174758911132813],[-80.29399871826172,27.174449920654297],[-80.29397583007813,27.17369842529297],[-80.29402160644531,27.172409057617188],[-80.29402923583984,27.17116928100586],[-80.29407501220703,27.170398712158203],[-80.29409790039063,27.170059204101563],[-80.29407501220703,27.169939041137695],[-80.29410552978516,27.169538497924805],[-80.29415130615234,27.168899536132813],[-80.294189453125,27.168209075927734],[-80.29423522949219,27.167558670043945],[-80.29428100585938,27.166460037231445],[-80.29439544677734,27.16584014892578],[-80.29450988769531,27.165529251098633],[-80.29463958740234,27.165258407592773],[-80.2948989868164,27.164838790893555],[-80.2950210571289,27.1646785736084],[-80.29557800292969,27.16408920288086],[-80.29586791992188,27.163700103759766],[-80.29603576660156,27.163410186767578],[-80.29618835449219,27.163049697875977],[-80.29629516601563,27.162670135498047],[-80.29635620117188,27.16227912902832],[-80.29641723632813,27.159889221191406],[-80.29644775390625,27.158979415893555],[-80.29647064208984,27.156660079956055],[-80.29650115966797,27.153959274291992],[-80.29645538330078,27.15302848815918],[-80.29645538330078,27.152238845825195],[-80.2964096069336,27.151439666748047],[-80.2962875366211,27.15077018737793],[-80.29618835449219,27.150348663330078],[-80.29590606689453,27.149629592895508],[-80.29573059082031,27.149259567260742],[-80.29541778564453,27.14874839782715],[-80.2944107055664,27.14729881286621],[-80.29383087158203,27.146459579467773],[-80.29377746582031,27.146339416503906],[-80.29346466064453,27.1458797454834],[-80.29312896728516,27.145368576049805],[-80.29181671142578,27.143428802490234],[-80.28836822509766,27.138349533081055],[-80.28731536865234,27.13684844970703],[-80.28673553466797,27.136049270629883],[-80.2857894897461,27.13488006591797],[-80.28524780273438,27.1341495513916],[-80.28472900390625,27.133399963378906],[-80.28389739990234,27.13204002380371],[-80.28386688232422,27.131868362426758],[-80.28373718261719,27.13163948059082],[-80.2833480834961,27.130970001220703],[-80.28164672851563,27.128469467163086],[-80.28118896484375,27.127779006958008],[-80.28108978271484,27.12759017944336],[-80.28084564208984,27.12718963623047],[-80.28015899658203,27.125839233398438],[-80.27906036376953,27.124168395996094],[-80.27810668945313,27.12274932861328],[-80.2779312133789,27.122509002685547],[-80.27777862548828,27.122379302978516],[-80.27752685546875,27.12225914001465],[-80.2773666381836,27.12221908569336],[-80.27719116210938,27.122209548950195],[-80.27688598632813,27.122268676757813],[-80.27619171142578,27.12248992919922],[-80.27578735351563,27.12257957458496],[-80.27540588378906,27.122589111328125],[-80.27517700195313,27.12257957458496],[-80.27485656738281,27.122509002685547],[-80.27462005615234,27.12242889404297],[-80.27447509765625,27.122379302978516],[-80.27434539794922,27.12238883972168],[-80.2740707397461,27.12224006652832],[-80.27362823486328,27.121990203857422],[-80.27330017089844,27.121789932250977],[-80.27234649658203,27.121219635009766],[-80.27149963378906,27.120668411254883],[-80.27037048339844,27.1198787689209],[-80.26934814453125,27.119098663330078],[-80.26839447021484,27.11833953857422],[-80.26725006103516,27.117319107055664],[-80.26615905761719,27.116249084472656],[-80.2653579711914,27.11540985107422],[-80.2646713256836,27.1146297454834],[-80.26351928710938,27.11319923400879],[-80.26274871826172,27.112138748168945],[-80.2617416381836,27.110578536987305],[-80.26116943359375,27.109619140625],[-80.26036071777344,27.10805892944336],[-80.25984954833984,27.106948852539063],[-80.2593002319336,27.105588912963867],[-80.25902557373047,27.104848861694336],[-80.25865936279297,27.103689193725586],[-80.25590515136719,27.095169067382813],[-80.25515747070313,27.09296989440918],[-80.25460052490234,27.091480255126953],[-80.25396728515625,27.089929580688477],[-80.25275421142578,27.087160110473633],[-80.2502212524414,27.08148956298828],[-80.24736785888672,27.075149536132813],[-80.24465942382813,27.069149017333984],[-80.24409484863281,27.06797981262207],[-80.2433853149414,27.06658935546875],[-80.2425308227539,27.06501007080078],[-80.24179077148438,27.063749313354492],[-80.2405776977539,27.06171989440918],[-80.23889923095703,27.058929443359375],[-80.23770904541016,27.05694007873535],[-80.23700714111328,27.055620193481445],[-80.2367172241211,27.05499839782715],[-80.23619079589844,27.053659439086914],[-80.23591613769531,27.05280876159668],[-80.2357406616211,27.05217933654785],[-80.23548889160156,27.051109313964844],[-80.23526763916016,27.049758911132813],[-80.23501586914063,27.048078536987305],[-80.23453521728516,27.04469871520996],[-80.23374938964844,27.039159774780273],[-80.23311614990234,27.034778594970703],[-80.23285675048828,27.033218383789063],[-80.23265838623047,27.032339096069336],[-80.23242950439453,27.03143882751465],[-80.23200988769531,27.03019905090332],[-80.23162078857422,27.02924919128418],[-80.23118591308594,27.028329849243164],[-80.23065948486328,27.027339935302734],[-80.230224609375,27.026628494262695],[-80.22979736328125,27.02597999572754],[-80.22914123535156,27.02505874633789],[-80.22863006591797,27.0244197845459],[-80.22805786132813,27.023759841918945],[-80.22747039794922,27.023128509521484],[-80.22689056396484,27.02254867553711],[-80.22528076171875,27.021089553833008],[-80.22478485107422,27.020658493041992],[-80.22240447998047,27.018569946289063],[-80.21878814697266,27.015378952026367],[-80.21554565429688,27.01253890991211],[-80.20919036865234,27.006959915161133],[-80.19661712646484,26.995939254760742],[-80.19526672363281,26.994779586791992],[-80.1945571899414,26.994159698486328],[-80.19326782226563,26.992979049682617],[-80.1921157836914,26.991809844970703],[-80.1908950805664,26.990419387817383],[-80.18970489501953,26.988880157470703],[-80.18875885009766,26.98758888244629],[-80.18568420410156,26.983369827270508],[-80.18217468261719,26.978538513183594],[-80.1795883178711,26.97500991821289],[-80.17573547363281,26.96971893310547],[-80.1737060546875,26.96693992614746],[-80.17263793945313,26.965438842773438],[-80.1719970703125,26.964488983154297],[-80.17160034179688,26.963838577270508],[-80.17070770263672,26.962358474731445],[-80.16983032226563,26.960899353027344],[-80.1689453125,26.959558486938477],[-80.1676254272461,26.957698822021484],[-80.16455078125,26.953439712524414],[-80.16331481933594,26.95176887512207],[-80.16283416748047,26.95121955871582],[-80.16236114501953,26.950708389282227],[-80.1617660522461,26.950149536132813],[-80.15889739990234,26.94761848449707],[-80.15673065185547,26.945690155029297],[-80.15499114990234,26.944149017333984],[-80.15420532226563,26.943439483642578],[-80.15372467041016,26.942930221557617],[-80.15306091308594,26.942119598388672],[-80.15245056152344,26.94116973876953],[-80.15211486816406,26.94053840637207],[-80.15180969238281,26.939809799194336],[-80.15161895751953,26.939298629760742],[-80.15142822265625,26.938629150390625],[-80.15126037597656,26.937990188598633],[-80.15081024169922,26.936269760131836],[-80.15020751953125,26.934040069580078],[-80.15026092529297,26.93391990661621],[-80.15023803710938,26.933818817138672],[-80.15023040771484,26.93355941772461],[-80.1502456665039,26.933420181274414],[-80.15030670166016,26.93324851989746],[-80.15042114257813,26.933090209960938],[-80.15055084228516,26.93297004699707],[-80.15087890625,26.932788848876953],[-80.15105438232422,26.932748794555664],[-80.15135955810547,26.93276023864746],[-80.15152740478516,26.932798385620117],[-80.15172576904297,26.932889938354492],[-80.15194702148438,26.93307876586914],[-80.15203094482422,26.933198928833008],[-80.15211486816406,26.933368682861328],[-80.15216064453125,26.933568954467773],[-80.15214538574219,26.933698654174805],[-80.15211486816406,26.933849334716797],[-80.15196990966797,26.934120178222656],[-80.15187072753906,26.934228897094727],[-80.15177917480469,26.93429946899414],[-80.15152740478516,26.934429168701172],[-80.15113830566406,26.934490203857422],[-80.15084075927734,26.934499740600586],[-80.15079498291016,26.93450927734375],[-80.1500244140625,26.934478759765625],[-80.14920043945313,26.934438705444336],[-80.14775085449219,26.934349060058594],[-80.1463851928711,26.93429946899414],[-80.14576721191406,26.93425941467285],[-80.14456176757813,26.93423843383789],[-80.14263916015625,26.934249877929688],[-80.1412353515625,26.934268951416016],[-80.13977813720703,26.934289932250977],[-80.13958740234375,26.934309005737305],[-80.13959503173828,26.934490203857422],[-80.13961791992188,26.93484878540039],[-80.1396484375,26.935298919677734],[-80.13968658447266,26.93549919128418],[-80.13980865478516,26.93587875366211],[-80.14007568359375,26.936269760131836],[-80.14043426513672,26.936559677124023],[-80.14064025878906,26.936668395996094],[-80.14097595214844,26.936819076538086],[-80.14144134521484,26.936920166015625],[-80.14183044433594,26.936939239501953],[-80.14225006103516,26.93686866760254],[-80.1427993774414,26.93671989440918],[-80.14384460449219,26.936389923095703],[-80.14421081542969,26.936328887939453],[-80.14473724365234,26.936349868774414],[-80.14495849609375,26.936399459838867],[-80.1452407836914,26.936498641967773],[-80.14595794677734,26.93692970275879],[-80.14702606201172,26.937580108642578],[-80.14796447753906,26.938188552856445],[-80.14852142333984,26.938650131225586],[-80.14904022216797,26.939208984375],[-80.1494369506836,26.939788818359375],[-80.14972686767578,26.940340042114258],[-80.14994812011719,26.940908432006836],[-80.15000915527344,26.941129684448242],[-80.15008544921875,26.941499710083008],[-80.150146484375,26.941919326782227],[-80.1501693725586,26.942258834838867],[-80.15013885498047,26.945308685302734],[-80.15010833740234,26.947568893432617],[-80.15007019042969,26.951210021972656],[-80.1500473022461,26.95176887512207],[-80.15003967285156,26.95315933227539],[-80.1500244140625,26.95384979248047],[-80.15005493164063,26.953899383544922],[-80.15005493164063,26.95517921447754],[-80.15007019042969,26.956600189208984],[-80.15000915527344,26.956798553466797],[-80.14997863769531,26.956809997558594],[-80.14991760253906,26.95686912536621],[-80.14990997314453,26.956958770751953],[-80.14997100830078,26.957048416137695],[-80.15000915527344,26.95707893371582],[-80.15005493164063,26.957239151000977],[-80.1500244140625,26.957378387451172],[-80.14994812011719,26.957799911499023],[-80.14990997314453,26.95793914794922],[-80.14974975585938,26.95831871032715],[-80.14930725097656,26.95911979675293],[-80.14923858642578,26.95924949645996],[-80.14910888671875,26.959548950195313],[-80.14897155761719,26.95996856689453],[-80.14888763427734,26.960378646850586],[-80.14863586425781,26.96150016784668],[-80.14811706542969,26.9630184173584],[-80.1469955444336,26.965700149536133],[-80.1467056274414,26.966360092163086],[-80.14663696289063,26.96657943725586],[-80.14662170410156,26.966798782348633],[-80.14666748046875,26.96725845336914],[-80.14677429199219,26.967529296875],[-80.14691162109375,26.96773910522461],[-80.14727783203125,26.968299865722656],[-80.14746856689453,26.968608856201172],[-80.14751434326172,26.968778610229492],[-80.14751434326172,26.969009399414063],[-80.14749908447266,26.96912956237793],[-80.14744567871094,26.969249725341797],[-80.14730834960938,26.969449996948242],[-80.14696502685547,26.969829559326172],[-80.146240234375,26.970609664916992],[-80.1460952758789,26.9707088470459],[-80.1458511352539,26.97079849243164],[-80.1456069946289,26.970829010009766],[-80.14476013183594,26.970829010009766],[-80.14247131347656,26.97079849243164],[-80.14229583740234,26.970779418945313],[-80.1421890258789,26.970779418945313],[-80.14192962646484,26.97079849243164],[-80.14170837402344,26.970869064331055],[-80.1415786743164,26.97093963623047],[-80.14131927490234,26.971139907836914],[-80.13903045654297,26.972929000854492],[-80.13758850097656,26.97406005859375]]}},{"type":"Feature","properties":{"ID":90,"Name":"Island Way","From":"Jupiter Road","To":"Country Club Dr","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":5911.0,"Peak_Hour_Vol_2024":299.0,"LOS_2024":"C","Growth_Rate_2024":0.04,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":890.0,"AADT_2023":5548.0,"Peak_Hour_Vol_2023":260.64504,"LOS_2023":"C","Growth_Rate_2023":0.03391968622944685,"U_ID":"66","color":"#39FF14","width":2.5023349818560425,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Island Way (ID: 90)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Jupiter Road  Country Club Dr\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>5,911<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>299<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #90\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Island Way\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Jupiter Road  Country Club Dr\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>5,911\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>299\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>4%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.13758850097656,26.97406005859375],[-80.13597106933594,26.975318908691406],[-80.1347885131836,26.97614860534668],[-80.13449096679688,26.97633934020996],[-80.1341781616211,26.976478576660156],[-80.13399505615234,26.976530075073242],[-80.13359832763672,26.976558685302734],[-80.1328353881836,26.976558685302734],[-80.1306381225586,26.976558685302734],[-80.12823486328125,26.976558685302734],[-80.12805938720703,26.976558685302734],[-80.12800598144531,26.976579666137695],[-80.1277847290039,26.97675895690918]]}},{"type":"Feature","properties":{"ID":101,"Name":"Kanner Hwy","From":"Pratt Whitney Rd / 96th St","To":"Locks Rd","Context_Class":"C3R","Service_Capacity":1850.0,"AADT_2024":21000.0,"Peak_Hour_Vol_2024":1063.0,"LOS_2024":"C","Growth_Rate_2024":0.08,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1945.0,"AADT_2023":14334.827350608,"Peak_Hour_Vol_2023":888.902644011202,"LOS_2023":"C","Growth_Rate_2023":0.01554390510467151,"U_ID":"175","color":"#39FF14","width":3.888533325167277,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Kanner Hwy (ID: 101)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Pratt Whitney Rd / 96th St  Locks Rd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>21,000<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>1063<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #101\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Kanner Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Pratt Whitney Rd / 96th St  Locks Rd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1850\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>21,000\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>1063\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>8%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.27822875976563,27.088069915771484],[-80.27825164794922,27.08795928955078],[-80.27835845947266,27.08778953552246],[-80.2790298461914,27.086658477783203],[-80.27925872802734,27.086278915405273],[-80.27923583984375,27.08624839782715],[-80.27923583984375,27.08622932434082],[-80.27935028076172,27.085988998413086],[-80.27958679199219,27.085569381713867],[-80.27961730957031,27.085498809814453],[-80.27959442138672,27.085439682006836],[-80.27958679199219,27.085399627685547],[-80.2791976928711,27.086029052734375],[-80.27880859375,27.086669921875],[-80.27820587158203,27.087678909301758],[-80.27801513671875,27.08803939819336],[-80.27791595458984,27.088159561157227],[-80.27783966064453,27.088329315185547],[-80.27765655517578,27.088619232177734],[-80.27733612060547,27.089149475097656],[-80.27627563476563,27.09096908569336],[-80.27560424804688,27.09208869934082],[-80.27508544921875,27.092998504638672],[-80.27456665039063,27.094018936157227],[-80.27383422851563,27.09541893005371],[-80.2730941772461,27.09686851501465],[-80.27267456054688,27.097679138183594],[-80.27218627929688,27.098529815673828],[-80.27164459228516,27.09929847717285],[-80.27104949951172,27.099958419799805],[-80.27082824707031,27.100189208984375],[-80.27032470703125,27.100658416748047],[-80.26925659179688,27.101499557495117],[-80.2690658569336,27.10165023803711],[-80.26850891113281,27.102149963378906],[-80.26860046386719,27.102298736572266]]}},{"type":"Feature","properties":{"ID":109,"Name":"Little Club Wy","From":"Country Club Dr","To":"Wooden Bridge Wy","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":2636.0,"Peak_Hour_Vol_2024":133.0,"LOS_2024":"C","Growth_Rate_2024":0.03,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1110.0,"AADT_2023":2309.0,"Peak_Hour_Vol_2023":95.38479,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"74","color":"#39FF14","width":2.201466827946288,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Little Club Wy (ID: 109)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Country Club Dr  Wooden Bridge Wy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>2,636<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>133<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #109\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Little Club Wy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Country Club Dr  Wooden Bridge Wy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>2,636\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>133\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>3%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.12931823730469,26.982759475708008],[-80.12810516357422,26.982738494873047],[-80.12787628173828,26.982749938964844],[-80.12767791748047,26.982830047607422],[-80.1274642944336,26.982999801635742],[-80.127197265625,26.98320960998535],[-80.12710571289063,26.983259201049805],[-80.12680053710938,26.98328971862793],[-80.12557983398438,26.983280181884766],[-80.12397766113281,26.983259201049805],[-80.12149047851563,26.98324966430664],[-80.12118530273438,26.98324966430664]]}},{"type":"Feature","properties":{"ID":110,"Name":"Locks Rd","From":"Canal St","To":"Kanner Hwy","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":3453.0,"Peak_Hour_Vol_2024":175.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1110.0,"AADT_2023":3682.0,"Peak_Hour_Vol_2023":170.8448,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"75","color":"#39FF14","width":2.276523097181179,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Locks Rd (ID: 110)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Canal St  Kanner Hwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>3,453<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>175<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #110\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Locks Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Canal St  Kanner Hwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>3,453\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>175\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.28400421142578,27.111330032348633],[-80.28340148925781,27.110809326171875],[-80.28289794921875,27.110328674316406],[-80.28279113769531,27.110179901123047],[-80.28268432617188,27.110029220581055],[-80.28245544433594,27.109508514404297],[-80.28135681152344,27.107179641723633],[-80.2811050415039,27.106658935546875],[-80.28093719482422,27.106279373168945],[-80.28044891357422,27.105308532714844],[-80.28004455566406,27.104488372802734],[-80.27967834472656,27.103689193725586],[-80.27930450439453,27.10297966003418],[-80.27920532226563,27.10280990600586],[-80.27916717529297,27.102739334106445],[-80.27899169921875,27.10266876220703],[-80.27877807617188,27.10264015197754],[-80.27845764160156,27.10264015197754],[-80.2782211303711,27.102649688720703],[-80.2767105102539,27.10264015197754],[-80.2743911743164,27.102619171142578],[-80.26937103271484,27.10257911682129],[-80.26900482177734,27.102569580078125],[-80.26890563964844,27.1025390625],[-80.2688217163086,27.10249900817871],[-80.26860046386719,27.102298736572266]]}},{"type":"Feature","properties":{"ID":111,"Name":"MacArthur Blvd","From":"Sailfish Point","To":"Ocean Blvd","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":5620.0,"Peak_Hour_Vol_2024":284.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1110.0,"AADT_2023":5756.0,"Peak_Hour_Vol_2023":341.67616000000004,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"76","color":"#39FF14","width":2.4756013535239085,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>MacArthur Blvd (ID: 111)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Sailfish Point  Ocean Blvd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>5,620<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>284<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #111\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>MacArthur Blvd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Sailfish Point  Ocean Blvd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>5,620\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>284\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.16082763671875,27.185009002685547],[-80.1607666015625,27.185298919677734],[-80.16075897216797,27.18548011779785],[-80.1607666015625,27.185659408569336],[-80.16082763671875,27.186418533325195],[-80.16092681884766,27.18783950805664],[-80.16085815429688,27.187990188598633],[-80.16070556640625,27.188119888305664],[-80.16053009033203,27.188268661499023],[-80.1604995727539,27.1883487701416],[-80.16057586669922,27.188730239868164],[-80.16062927246094,27.188879013061523],[-80.16073608398438,27.189289093017578],[-80.16079711914063,27.18941879272461],[-80.16085052490234,27.189498901367188],[-80.16096496582031,27.189640045166016],[-80.16118621826172,27.189828872680664],[-80.16159057617188,27.19015884399414],[-80.16169738769531,27.19032859802246],[-80.1617202758789,27.19040870666504],[-80.16175842285156,27.19055938720703],[-80.1617660522461,27.19063949584961],[-80.16175842285156,27.190799713134766],[-80.16166687011719,27.19108009338379],[-80.16165924072266,27.191160202026367],[-80.16165924072266,27.191179275512695],[-80.16166687011719,27.1912784576416],[-80.16175079345703,27.191450119018555],[-80.16178131103516,27.191509246826172],[-80.16181945800781,27.19158935546875],[-80.16189575195313,27.191740036010742],[-80.16221618652344,27.192468643188477],[-80.16250610351563,27.193119049072266],[-80.16260528564453,27.193309783935547],[-80.16282653808594,27.193639755249023],[-80.16315460205078,27.193939208984375],[-80.16326904296875,27.194108963012695],[-80.16344451904297,27.194499969482422],[-80.16368103027344,27.195009231567383],[-80.16381072998047,27.19536018371582],[-80.16387176513672,27.19561004638672],[-80.16389465332031,27.195789337158203],[-80.16400146484375,27.196109771728516],[-80.16410064697266,27.196378707885742],[-80.16414642333984,27.196470260620117],[-80.1642074584961,27.19658851623535],[-80.16458129882813,27.197158813476563],[-80.16500854492188,27.197589874267578],[-80.16513061523438,27.1977596282959],[-80.1653060913086,27.198139190673828],[-80.16545104980469,27.198570251464844],[-80.16571807861328,27.19931983947754],[-80.16577911376953,27.199499130249023],[-80.16590881347656,27.199979782104492],[-80.16596984863281,27.200119018554688],[-80.16622924804688,27.20060920715332],[-80.16681671142578,27.201648712158203],[-80.1672592163086,27.20240020751953],[-80.16825103759766,27.204050064086914],[-80.16893005371094,27.20509910583496],[-80.16942596435547,27.205829620361328],[-80.1695556640625,27.205978393554688],[-80.16963958740234,27.2060489654541],[-80.16976165771484,27.20611000061035],[-80.17012786865234,27.20616912841797],[-80.17035675048828,27.20623016357422],[-80.17053985595703,27.206329345703125],[-80.17068481445313,27.20646858215332],[-80.1709213256836,27.206798553466797],[-80.17118072509766,27.20732879638672],[-80.17155456542969,27.207799911499023],[-80.17192077636719,27.208370208740234],[-80.17216491699219,27.20880889892578],[-80.17227935791016,27.208959579467773],[-80.17243957519531,27.20909881591797],[-80.17263793945313,27.209199905395508],[-80.17274475097656,27.209228515625],[-80.17308044433594,27.209259033203125],[-80.17469024658203,27.209280014038086],[-80.17557525634766,27.20926856994629],[-80.17665100097656,27.209280014038086],[-80.17705535888672,27.20928955078125],[-80.17750549316406,27.209339141845703],[-80.17779541015625,27.209400177001953],[-80.17823791503906,27.209518432617188],[-80.1787109375,27.209699630737305],[-80.17901611328125,27.20985984802246],[-80.17961120605469,27.210248947143555],[-80.17997741699219,27.210599899291992],[-80.18014526367188,27.210708618164063],[-80.18030548095703,27.210859298706055],[-80.1805191040039,27.211050033569336],[-80.18067932128906,27.21122932434082],[-80.1808090209961,27.2114200592041],[-80.1811294555664,27.211999893188477]]}},{"type":"Feature","properties":{"ID":112,"Name":"Mapp Rd","From":"South End","To":"Martin Hwy","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":5110.0,"Peak_Hour_Vol_2024":259.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1110.0,"AADT_2023":5981.0,"Peak_Hour_Vol_2023":324.58887000000004,"LOS_2023":"C","Growth_Rate_2023":0.03381669468555581,"U_ID":"77","color":"#39FF14","width":2.4287486028387253,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Mapp Rd (ID: 112)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>South End  Martin Hwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>5,110<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>259<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #112\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Mapp Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>South End  Martin Hwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>5,110\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>259\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.2322769165039,27.24190902709961],[-80.23475646972656,27.241939544677734],[-80.23603820800781,27.2419490814209],[-80.2363510131836,27.2419490814209],[-80.2363510131836,27.24152946472168],[-80.23635864257813,27.240459442138672],[-80.23636627197266,27.23845863342285],[-80.23638153076172,27.236968994140625],[-80.23636627197266,27.235288619995117],[-80.23636627197266,27.232858657836914],[-80.23636627197266,27.231868743896484],[-80.23638153076172,27.231689453125],[-80.23639678955078,27.230459213256836],[-80.2364501953125,27.230449676513672],[-80.23649597167969,27.230419158935547],[-80.23652648925781,27.230379104614258],[-80.23652648925781,27.230329513549805],[-80.23651123046875,27.230268478393555],[-80.23645782470703,27.230228424072266],[-80.23639678955078,27.230209350585938],[-80.23638916015625,27.230209350585938],[-80.23648834228516,27.229429244995117],[-80.23665618896484,27.227828979492188],[-80.23670959472656,27.22735023498535],[-80.23677062988281,27.22694969177246],[-80.23683166503906,27.226699829101563],[-80.2369384765625,27.226398468017578],[-80.23709869384766,27.226058959960938],[-80.23725128173828,27.225818634033203],[-80.23729705810547,27.22572898864746],[-80.23741912841797,27.225608825683594],[-80.23749542236328,27.2254695892334],[-80.23768615722656,27.225250244140625],[-80.23783111572266,27.225109100341797],[-80.23815155029297,27.22484016418457],[-80.23848724365234,27.22458839416504],[-80.23902893066406,27.224279403686523],[-80.23932647705078,27.224140167236328],[-80.2408447265625,27.22361946105957],[-80.24382781982422,27.222639083862305],[-80.24478149414063,27.222318649291992],[-80.24531555175781,27.22205924987793],[-80.24555969238281,27.221920013427734],[-80.24594116210938,27.22165870666504],[-80.24626922607422,27.221399307250977],[-80.24737548828125,27.220539093017578],[-80.24837493896484,27.21977996826172],[-80.24855041503906,27.21967887878418],[-80.24874114990234,27.2196102142334],[-80.24906158447266,27.219579696655273],[-80.25010681152344,27.219579696655273],[-80.25056457519531,27.219579696655273],[-80.25222778320313,27.219579696655273],[-80.25294494628906,27.2195987701416],[-80.25328826904297,27.219688415527344],[-80.25338745117188,27.21971893310547],[-80.25383758544922,27.219980239868164],[-80.25503540039063,27.218549728393555],[-80.25527954101563,27.218259811401367],[-80.2560806274414,27.217378616333008],[-80.25688171386719,27.216489791870117],[-80.25746154785156,27.21588897705078],[-80.25756072998047,27.215789794921875],[-80.25786590576172,27.215829849243164],[-80.25806427001953,27.215839385986328],[-80.2586898803711,27.215869903564453],[-80.2593994140625,27.21588897705078],[-80.26030731201172,27.21592903137207],[-80.26103973388672,27.21595001220703],[-80.2612075805664,27.215879440307617],[-80.2611312866211,27.215669631958008],[-80.26085662841797,27.2149600982666],[-80.26082611083984,27.214889526367188],[-80.2607192993164,27.214609146118164],[-80.26060485839844,27.21430015563965],[-80.26039123535156,27.213668823242188],[-80.26007843017578,27.212739944458008],[-80.25994110107422,27.21225929260254],[-80.25956726074219,27.210779190063477],[-80.25936126708984,27.209749221801758],[-80.25920104980469,27.208759307861328],[-80.25907897949219,27.2077693939209],[-80.25892639160156,27.20650863647461],[-80.25881958007813,27.20570945739746],[-80.25865936279297,27.2048397064209],[-80.25860595703125,27.204599380493164],[-80.25846862792969,27.203929901123047],[-80.25811767578125,27.20254898071289],[-80.2577896118164,27.201438903808594],[-80.25737762451172,27.200260162353516],[-80.25714874267578,27.199359893798828],[-80.257080078125,27.198848724365234],[-80.25703430175781,27.19809913635254],[-80.257080078125,27.19525909423828],[-80.25708770751953,27.194589614868164],[-80.25701141357422,27.193988800048828],[-80.2569808959961,27.193880081176758],[-80.25701141357422,27.193769454956055],[-80.25702667236328,27.193309783935547],[-80.25701141357422,27.19232940673828],[-80.25701904296875,27.18954849243164],[-80.25704956054688,27.187009811401367],[-80.25704956054688,27.18526840209961],[-80.25711059570313,27.17723846435547],[-80.25711822509766,27.176198959350586],[-80.25719451904297,27.17586898803711],[-80.25727844238281,27.175739288330078],[-80.25747680664063,27.175708770751953],[-80.2578353881836,27.175628662109375],[-80.258056640625,27.175559997558594],[-80.2598648071289,27.174718856811523],[-80.2606201171875,27.174358367919922],[-80.26371765136719,27.172889709472656],[-80.26374816894531,27.172868728637695],[-80.26384735107422,27.172760009765625],[-80.2644271850586,27.172489166259766],[-80.2644271850586,27.172269821166992],[-80.26443481445313,27.171998977661133],[-80.26445007324219,27.168859481811523],[-80.26445770263672,27.165008544921875],[-80.26446533203125,27.162099838256836],[-80.26448059082031,27.16132926940918],[-80.26448059082031,27.161218643188477],[-80.2650375366211,27.161218643188477],[-80.26664733886719,27.161209106445313],[-80.2682113647461,27.16119956970215],[-80.26934051513672,27.161190032958984],[-80.26940155029297,27.161190032958984]]}},{"type":"Feature","properties":{"ID":114,"Name":"Mapp Rd","From":"Martin Downs Blvd","To":"Matheson Ave","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":4920.0,"Peak_Hour_Vol_2024":249.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1110.0,"AADT_2023":4849.0,"Peak_Hour_Vol_2023":251.37216000000004,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"79","color":"#39FF14","width":2.4112936565050296,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Mapp Rd (ID: 114)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Martin Downs Blvd  Matheson Ave\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>4,920<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>249<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #114\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Mapp Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Martin Downs Blvd  Matheson Ave\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>4,920\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>249\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.26937103271484,27.17234992980957],[-80.27035522460938,27.172378540039063],[-80.27180480957031,27.172399520874023],[-80.27568817138672,27.17241859436035],[-80.27687072753906,27.172439575195313],[-80.2777099609375,27.172439575195313],[-80.27771759033203,27.172748565673828],[-80.27772521972656,27.173358917236328],[-80.27772521972656,27.173830032348633],[-80.2777099609375,27.176719665527344],[-80.27769470214844,27.17767906188965],[-80.27733612060547,27.184669494628906],[-80.27729034423828,27.186559677124023]]}},{"type":"Feature","properties":{"ID":115,"Name":"Mapp Rd","From":"Matheson Ave","To":"North End","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":6714.0,"Peak_Hour_Vol_2024":340.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1110.0,"AADT_2023":7457.0,"Peak_Hour_Vol_2023":304.2456,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"80","color":"#39FF14","width":2.5761050971505566,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Mapp Rd (ID: 115)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Matheson Ave  North End\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>6,714<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>340<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #115\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Mapp Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Matheson Ave  North End\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>6,714\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>340\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.27729034423828,27.186559677124023],[-80.27733612060547,27.184619903564453],[-80.27764129638672,27.17871856689453],[-80.27769470214844,27.17767906188965],[-80.27771759033203,27.175569534301758],[-80.27772521972656,27.17367935180664],[-80.2777099609375,27.172439575195313],[-80.2777099609375,27.172258377075195],[-80.2768783569336,27.172258377075195],[-80.27469635009766,27.172239303588867],[-80.27294921875,27.172229766845703],[-80.27180480957031,27.17224884033203],[-80.27022552490234,27.17224884033203],[-80.26934814453125,27.172258377075195],[-80.26934051513672,27.1717586517334],[-80.26934814453125,27.17137908935547],[-80.2693862915039,27.16916847229004],[-80.26940155029297,27.165618896484375],[-80.26940155029297,27.16391944885254],[-80.2694091796875,27.162670135498047],[-80.2694091796875,27.161909103393555],[-80.26944732666016,27.16180992126465],[-80.26944732666016,27.161609649658203],[-80.26945495605469,27.161039352416992],[-80.26950073242188,27.160579681396484],[-80.26950073242188,27.16033935546875],[-80.26950073242188,27.16020965576172],[-80.26945495605469,27.160049438476563],[-80.26947021484375,27.159528732299805],[-80.26948547363281,27.158668518066406]]}},{"type":"Feature","properties":{"ID":117,"Name":"Martin Downs Blvd","From":"High Meadow Ave","To":"Matheson Ave","Context_Class":"C3R","Service_Capacity":1850.0,"AADT_2024":29422.0,"Peak_Hour_Vol_2024":1489.0,"LOS_2024":"C","Growth_Rate_2024":0.015,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1850.0,"AADT_2023":31000.0,"Peak_Hour_Vol_2023":1255.5,"LOS_2023":"C","Growth_Rate_2023":0.03237044062450733,"U_ID":"147","color":"#39FF14","width":4.662246788442989,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Martin Downs Blvd (ID: 117)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>High Meadow Ave  Matheson Ave\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>29,422<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>1489<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #117\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Martin Downs Blvd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>High Meadow Ave  Matheson Ave\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1850\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>29,422\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>1489\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>1.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.29399871826172,27.172399520874023],[-80.29387664794922,27.172378540039063],[-80.29348754882813,27.172378540039063],[-80.29290008544922,27.1723690032959],[-80.28916931152344,27.17234992980957],[-80.28662872314453,27.172319412231445],[-80.28533935546875,27.17230987548828],[-80.2835693359375,27.172319412231445],[-80.28205108642578,27.172298431396484],[-80.27930450439453,27.172279357910156],[-80.2777099609375,27.172258377075195],[-80.2777099609375,27.172439575195313]]}},{"type":"Feature","properties":{"ID":118,"Name":"Martin Downs Blvd","From":"Matheson Ave","To":"Mapp Rd","Context_Class":"C3R","Service_Capacity":1850.0,"AADT_2024":35000.0,"Peak_Hour_Vol_2024":1771.0,"LOS_2024":"D","Growth_Rate_2024":0.013,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1850.0,"AADT_2023":32527.94048598415,"Peak_Hour_Vol_2023":1723.98084575716,"LOS_2023":"D","Growth_Rate_2023":0.005,"U_ID":"148","color":"#39FF14","width":5.174687265544854,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Martin Downs Blvd (ID: 118)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Matheson Ave  Mapp Rd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>35,000<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>1771<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>D\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #118\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Martin Downs Blvd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Matheson Ave  Mapp Rd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1850\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>35,000\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>1771\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>D\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>1.3%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.2777099609375,27.172439575195313],[-80.2777099609375,27.172258377075195],[-80.2768783569336,27.172258377075195],[-80.27469635009766,27.172239303588867],[-80.27294921875,27.172229766845703],[-80.27180480957031,27.17224884033203],[-80.27022552490234,27.17224884033203],[-80.26934814453125,27.172258377075195],[-80.26937103271484,27.17234992980957]]}},{"type":"Feature","properties":{"ID":123,"Name":"Martin Hwy","From":"I-95","To":"Citrus Blvd / Newfield Pkwy","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":15200.0,"Peak_Hour_Vol_2024":769.0,"LOS_2024":"C","Growth_Rate_2024":0.02,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1110.0,"AADT_2023":14984.100434176016,"Peak_Hour_Vol_2023":744.4101095698645,"LOS_2023":"C","Growth_Rate_2023":0.02105256413991463,"U_ID":"144","color":"#39FF14","width":3.355698121296566,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Martin Hwy (ID: 123)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>I-95  Citrus Blvd / Newfield Pkwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>15,200<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>769<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #123\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Martin Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>I-95  Citrus Blvd / Newfield Pkwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>15,200\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>769\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>2%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.3894271850586,27.1617488861084],[-80.39138793945313,27.16172981262207],[-80.39485168457031,27.16172981262207],[-80.39640808105469,27.161739349365234],[-80.39662170410156,27.161739349365234],[-80.39659118652344,27.16156005859375],[-80.3936996459961,27.16156005859375],[-80.3926773071289,27.161548614501953],[-80.39250946044922,27.161529541015625],[-80.3918685913086,27.16153907775879],[-80.39138793945313,27.161548614501953],[-80.39105987548828,27.161548614501953],[-80.39051055908203,27.16156005859375],[-80.3878402709961,27.161588668823242],[-80.38505554199219,27.16162872314453],[-80.38411712646484,27.161640167236328],[-80.38359069824219,27.16166877746582],[-80.38196563720703,27.161828994750977],[-80.38124084472656,27.16187858581543],[-80.38054656982422,27.16187858581543],[-80.37925720214844,27.161849975585938],[-80.37825012207031,27.16183853149414],[-80.37816619873047,27.1618595123291],[-80.37581634521484,27.161849975585938],[-80.36956024169922,27.16179847717285],[-80.36309814453125,27.161758422851563],[-80.35147857666016,27.16168975830078],[-80.33430480957031,27.16153907775879],[-80.3284683227539,27.16153907775879],[-80.32730865478516,27.161548614501953],[-80.32691955566406,27.161548614501953],[-80.32661437988281,27.16152000427246],[-80.3237075805664,27.1614990234375],[-80.32331085205078,27.1614990234375],[-80.32323455810547,27.161479949951172],[-80.32312774658203,27.161468505859375],[-80.32154083251953,27.161449432373047],[-80.31929779052734,27.161409378051758],[-80.31884002685547,27.161399841308594],[-80.3188705444336,27.161588668823242]]}},{"type":"Feature","properties":{"ID":127,"Name":"Martin Hwy","From":"Mapp Rd","To":"Kanner Hwy","Context_Class":"C3R","Service_Capacity":1850.0,"AADT_2024":24489.0,"Peak_Hour_Vol_2024":1239.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":1900.0,"AADT_2023":24744.0,"Peak_Hour_Vol_2023":1442.5752000000002,"LOS_2023":"C","Growth_Rate_2023":0.00811335598824247,"U_ID":"191","color":"#39FF14","width":4.209061260737089,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Martin Hwy (ID: 127)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Mapp Rd  Kanner Hwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>24,489<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>1239<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #127\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Martin Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Mapp Rd  Kanner Hwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1850\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>24,489\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>1239\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.26940155029297,27.161190032958984],[-80.2743911743164,27.161218643188477],[-80.28031921386719,27.161270141601563],[-80.28282928466797,27.161298751831055],[-80.28353118896484,27.16128921508789],[-80.28364562988281,27.16128921508789],[-80.28385925292969,27.161230087280273],[-80.28434753417969,27.161239624023438],[-80.28521728515625,27.1612491607666],[-80.28636169433594,27.161270141601563],[-80.28827667236328,27.161279678344727],[-80.2907943725586,27.16131019592285],[-80.2909164428711,27.161359786987305],[-80.29268646240234,27.16136932373047],[-80.29390716552734,27.161388397216797],[-80.29582977294922,27.161428451538086],[-80.29637908935547,27.161428451538086],[-80.29637908935547,27.161319732666016],[-80.29639434814453,27.16014862060547],[-80.29642486572266,27.159488677978516],[-80.29647064208984,27.157739639282227],[-80.29650115966797,27.154619216918945],[-80.29647827148438,27.153438568115234],[-80.29645538330078,27.15302848815918],[-80.29645538330078,27.152368545532227],[-80.29644012451172,27.151729583740234],[-80.29637908935547,27.1512393951416],[-80.29622650146484,27.1505184173584],[-80.29618835449219,27.150348663330078],[-80.29603576660156,27.149919509887695],[-80.29573059082031,27.149259567260742],[-80.29541778564453,27.14874839782715],[-80.29512786865234,27.148319244384766],[-80.29417419433594,27.14695930480957],[-80.29383087158203,27.146459579467773],[-80.29377746582031,27.146339416503906],[-80.29346466064453,27.1458797454834],[-80.29312896728516,27.145368576049805],[-80.2927017211914,27.144729614257813],[-80.28836822509766,27.138349533081055],[-80.28691864013672,27.136289596557617],[-80.28617095947266,27.13534927368164],[-80.28544616699219,27.13443946838379],[-80.28485870361328,27.133588790893555],[-80.2842788696289,27.13266944885254],[-80.28389739990234,27.13204002380371],[-80.28386688232422,27.131868362426758],[-80.28373718261719,27.13163948059082],[-80.2833480834961,27.130970001220703],[-80.28205871582031,27.129039764404297],[-80.28118896484375,27.127779006958008],[-80.28096008300781,27.127378463745117],[-80.28070831298828,27.12691879272461],[-80.28015899658203,27.125839233398438],[-80.27971649169922,27.125139236450195],[-80.27933502197266,27.12457847595215],[-80.27801513671875,27.12261962890625],[-80.27781677246094,27.12240982055664],[-80.27764129638672,27.122299194335938],[-80.27745056152344,27.12224006652832],[-80.27729034423828,27.122209548950195],[-80.27698516845703,27.12224006652832],[-80.27642822265625,27.12240982055664],[-80.27595520019531,27.122549057006836],[-80.2755355834961,27.12259864807129],[-80.27517700195313,27.12257957458496],[-80.27485656738281,27.122509002685547],[-80.27471160888672,27.122459411621094],[-80.27447509765625,27.122379302978516],[-80.27434539794922,27.12238883972168],[-80.2740707397461,27.12224006652832],[-80.27362823486328,27.121990203857422],[-80.27278900146484,27.12150001525879],[-80.27202606201172,27.12101936340332],[-80.27091979980469,27.12027931213379],[-80.26995849609375,27.119579315185547],[-80.26947784423828,27.11920928955078],[-80.2685546875,27.118459701538086],[-80.26748657226563,27.117528915405273],[-80.26689910888672,27.116979598999023],[-80.26641845703125,27.116519927978516],[-80.26551818847656,27.11557960510254],[-80.26481628417969,27.11479949951172],[-80.26451873779297,27.11444854736328],[-80.26426696777344,27.11414909362793],[-80.26409149169922,27.113920211791992],[-80.2640609741211,27.113759994506836],[-80.26382446289063,27.11343002319336],[-80.26351928710938,27.11298942565918],[-80.26311492919922,27.112348556518555],[-80.26290893554688,27.111968994140625],[-80.26280975341797,27.1116886138916],[-80.26274871826172,27.11138916015625],[-80.26272583007813,27.11102867126465],[-80.26278686523438,27.11067008972168],[-80.26317596435547,27.109209060668945],[-80.26322174072266,27.10894012451172],[-80.26317596435547,27.108659744262695],[-80.26306915283203,27.1083984375],[-80.26287841796875,27.108169555664063],[-80.26255798339844,27.10787010192871],[-80.26248168945313,27.10771942138672],[-80.26243591308594,27.10763931274414],[-80.26242065429688,27.107559204101563],[-80.2624282836914,27.107500076293945],[-80.26239776611328,27.10740852355957],[-80.2626953125,27.10717010498047],[-80.26339721679688,27.106639862060547],[-80.26362609863281,27.106470108032227],[-80.26535034179688,27.10515022277832],[-80.26620483398438,27.10449981689453],[-80.26680755615234,27.104000091552734],[-80.26734161376953,27.10348892211914],[-80.2674789428711,27.10335922241211],[-80.26860046386719,27.102298736572266],[-80.26935577392578,27.10162925720215],[-80.27021026611328,27.100969314575195],[-80.27070617675781,27.100549697875977],[-80.2713851928711,27.0998592376709],[-80.27169799804688,27.099498748779297],[-80.2719497680664,27.09918975830078],[-80.27214050292969,27.098918914794922],[-80.27268981933594,27.098039627075195],[-80.27304077148438,27.097349166870117],[-80.27400970458984,27.095468521118164],[-80.27472686767578,27.09406852722168],[-80.27526092529297,27.093059539794922],[-80.27574920654297,27.0921688079834],[-80.27616119384766,27.091480255126953],[-80.27745819091797,27.089309692382813],[-80.2779769897461,27.088489532470703],[-80.27822875976563,27.088069915771484],[-80.27825164794922,27.08795928955078],[-80.278564453125,27.08742904663086],[-80.27925872802734,27.086278915405273],[-80.2802505493164,27.084619522094727],[-80.28089904785156,27.083518981933594],[-80.28147888183594,27.082550048828125],[-80.2818603515625,27.0819091796875],[-80.28193664550781,27.081748962402344],[-80.2828598022461,27.0802001953125],[-80.28334045410156,27.079389572143555],[-80.28514862060547,27.076358795166016],[-80.28694152832031,27.0733585357666],[-80.28746795654297,27.072608947753906],[-80.2878189086914,27.072208404541016],[-80.2884292602539,27.071609497070313],[-80.28884887695313,27.071258544921875],[-80.2916488647461,27.06915855407715],[-80.29927825927734,27.06346893310547],[-80.3018569946289,27.06155014038086],[-80.30329895019531,27.060489654541016],[-80.30384826660156,27.060110092163086],[-80.30422973632813,27.059879302978516],[-80.30477142333984,27.059579849243164],[-80.30535125732422,27.059309005737305],[-80.30583953857422,27.05912971496582],[-80.30725860595703,27.05864906311035],[-80.31208038330078,27.057098388671875],[-80.31402587890625,27.0565185546875],[-80.31893157958984,27.055099487304688],[-80.32119750976563,27.054458618164063],[-80.3257064819336,27.053150177001953],[-80.32965087890625,27.05200958251953],[-80.3349609375,27.05044937133789],[-80.33690643310547,27.049869537353516],[-80.34024047851563,27.048938751220703],[-80.34368896484375,27.04793930053711],[-80.35064697265625,27.045909881591797],[-80.3587646484375,27.043560028076172],[-80.3622055053711,27.042558670043945],[-80.37059783935547,27.040119171142578],[-80.3748550415039,27.038898468017578],[-80.37626647949219,27.038488388061523],[-80.37732696533203,27.038198471069336],[-80.37812805175781,27.038049697875977],[-80.37879943847656,27.037979125976563],[-80.37918090820313,27.037960052490234],[-80.38024139404297,27.037979125976563],[-80.38288879394531,27.038068771362305],[-80.38385009765625,27.0380802154541],[-80.38446807861328,27.038049697875977],[-80.38558959960938,27.03790855407715],[-80.38624572753906,27.03775978088379],[-80.3873291015625,27.03740882873535],[-80.39368438720703,27.03516960144043],[-80.398681640625,27.03339958190918],[-80.4093017578125,27.029640197753906],[-80.41067504882813,27.029129028320313],[-80.41423034667969,27.027870178222656],[-80.41648864746094,27.02692985534668],[-80.417724609375,27.026418685913086],[-80.421630859375,27.024749755859375],[-80.42241668701172,27.024410247802734],[-80.42343139648438,27.023988723754883],[-80.42434692382813,27.023658752441406],[-80.42589569091797,27.02313995361328],[-80.42740631103516,27.022640228271484],[-80.43276977539063,27.020858764648438],[-80.43682861328125,27.01951026916504],[-80.43740844726563,27.019289016723633],[-80.43850708007813,27.018798828125],[-80.4394760131836,27.01828956604004],[-80.44242858886719,27.016679763793945],[-80.44448852539063,27.015548706054688],[-80.4454574584961,27.015058517456055],[-80.44570922851563,27.01494026184082],[-80.44639587402344,27.014638900756836],[-80.44667053222656,27.01453971862793],[-80.44681549072266,27.014509201049805],[-80.44758605957031,27.014240264892578],[-80.44941711425781,27.013599395751953],[-80.45135498046875,27.01289939880371],[-80.45153045654297,27.01280975341797],[-80.45198822021484,27.01263999938965],[-80.45418548583984,27.011859893798828],[-80.45796966552734,27.01051902770996],[-80.46119689941406,27.00935935974121],[-80.46337127685547,27.008588790893555],[-80.4656982421875,27.007768630981445],[-80.4665298461914,27.007509231567383],[-80.46778106689453,27.00718879699707],[-80.46863555908203,27.00701904296875],[-80.46927642822266,27.006919860839844],[-80.4706802368164,27.006759643554688],[-80.4719009399414,27.006698608398438],[-80.47293090820313,27.006710052490234],[-80.47372436523438,27.006738662719727],[-80.4742660522461,27.006790161132813],[-80.47589111328125,27.00697898864746],[-80.47623443603516,27.00701904296875],[-80.48051452636719,27.007549285888672],[-80.48851776123047,27.008529663085938],[-80.49668884277344,27.009538650512695],[-80.49762725830078,27.009689331054688],[-80.49884033203125,27.00994873046875],[-80.50051879882813,27.010398864746094],[-80.51667785644531,27.014860153198242],[-80.52201080322266,27.016319274902344],[-80.52275085449219,27.016498565673828],[-80.5237808227539,27.016679763793945],[-80.52455139160156,27.016748428344727],[-80.52550506591797,27.016788482666016],[-80.52608489990234,27.016769409179688],[-80.52691650390625,27.016698837280273],[-80.52845001220703,27.016469955444336],[-80.5301742553711,27.01618003845215],[-80.53512573242188,27.015369415283203],[-80.54383087158203,27.01392936706543],[-80.54522705078125,27.013689041137695],[-80.54570007324219,27.013578414916992],[-80.54610443115234,27.013469696044922],[-80.54671478271484,27.013248443603516],[-80.54719543457031,27.013050079345703],[-80.54888916015625,27.012208938598633],[-80.5606460571289,27.006328582763672],[-80.5733413696289,27.0],[-80.5775146484375,26.997909545898438],[-80.58074951171875,26.996299743652344],[-80.58353424072266,26.994869232177734],[-80.58699798583984,26.993059158325195],[-80.59234619140625,26.990379333496094],[-80.59590148925781,26.98859977722168],[-80.59713745117188,26.987998962402344],[-80.59781646728516,26.987730026245117],[-80.59825897216797,26.987598419189453],[-80.59854888916016,26.987520217895508],[-80.59912109375,26.987388610839844],[-80.60003662109375,26.987258911132813],[-80.60147094726563,26.987119674682617],[-80.60296630859375,26.986968994140625],[-80.6043472290039,26.986780166625977],[-80.60814666748047,26.98613929748535],[-80.61210632324219,26.98542022705078],[-80.6152114868164,26.984899520874023],[-80.61567687988281,26.984819412231445],[-80.615966796875,26.984769821166992],[-80.61643981933594,26.984668731689453],[-80.61676025390625,26.984529495239258],[-80.61689758300781,26.984390258789063],[-80.61702728271484,26.984189987182617],[-80.6170883178711,26.983980178833008],[-80.61708068847656,26.983779907226563],[-80.61705017089844,26.983549118041992],[-80.61685943603516,26.982929229736328],[-80.61541748046875,26.9781494140625],[-80.61534118652344,26.9778995513916],[-80.61529541015625,26.977828979492188],[-80.615234375,26.97776985168457],[-80.61507415771484,26.977689743041992],[-80.61493682861328,26.977689743041992],[-80.61447143554688,26.97780990600586],[-80.61431121826172,26.97784996032715]]}},{"type":"Feature","properties":{"ID":128,"Name":"Matheson Ave","From":"Martin Downs Blvd","To":"Mapp Rd","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":5593.0,"Peak_Hour_Vol_2024":283.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1110.0,"AADT_2023":6332.0,"Peak_Hour_Vol_2023":325.02155999999997,"LOS_2023":"C","Growth_Rate_2023":0.02020887605099952,"U_ID":"81","color":"#39FF14","width":2.473120913781752,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Matheson Ave (ID: 128)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Martin Downs Blvd  Mapp Rd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>5,593<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>283<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #128\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Matheson Ave\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Martin Downs Blvd  Mapp Rd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>5,593\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>283\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.2777099609375,27.172439575195313],[-80.27772521972656,27.17367935180664],[-80.27771759033203,27.175569534301758],[-80.27769470214844,27.17767906188965],[-80.27764129638672,27.17871856689453],[-80.27733612060547,27.184619903564453],[-80.27729034423828,27.186559677124023]]}},{"type":"Feature","properties":{"ID":135,"Name":"Murphy Rd","From":"Mapp Rd","To":"High Meadow Ave","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":5628.0,"Peak_Hour_Vol_2024":285.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1110.0,"AADT_2023":5474.0,"Peak_Hour_Vol_2023":302.05532,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"89","color":"#39FF14","width":2.4763362986326958,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Murphy Rd (ID: 135)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Mapp Rd  High Meadow Ave\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>5,628<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>285<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #135\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Murphy Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Mapp Rd  High Meadow Ave\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>5,628\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>285\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.27729034423828,27.186559677124023],[-80.27729034423828,27.18659019470215],[-80.27753448486328,27.18659019470215],[-80.2785415649414,27.186630249023438],[-80.2818374633789,27.18665885925293],[-80.28443908691406,27.186689376831055],[-80.2864990234375,27.186708450317383],[-80.29127502441406,27.186729431152344],[-80.29364776611328,27.186748504638672],[-80.2938003540039,27.18671989440918],[-80.29386138916016,27.18671989440918],[-80.29390716552734,27.18671989440918],[-80.2939453125,27.186729431152344],[-80.29397583007813,27.18665885925293],[-80.29399871826172,27.18657875061035],[-80.2939682006836,27.186498641967773]]}},{"type":"Feature","properties":{"ID":136,"Name":"Murphy Rd","From":"High Meadow Ave","To":"St Lucie County","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":10513.0,"Peak_Hour_Vol_2024":532.0,"LOS_2024":"C","Growth_Rate_2024":0.016,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1110.0,"AADT_2023":9804.0,"Peak_Hour_Vol_2023":858.8303999999999,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"90","color":"#39FF14","width":2.925112155685872,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Murphy Rd (ID: 136)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>High Meadow Ave  St Lucie County\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>10,513<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>532<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #136\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Murphy Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>High Meadow Ave  St Lucie County\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>10,513\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>532\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>1.6%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.2939453125,27.186479568481445],[-80.29389953613281,27.18604850769043],[-80.29387664794922,27.185890197753906],[-80.29373168945313,27.18509864807129],[-80.29367065429688,27.184589385986328],[-80.293701171875,27.1823787689209],[-80.29375457763672,27.176908493041992],[-80.29377746582031,27.17582893371582],[-80.29381561279297,27.17544937133789],[-80.29387664794922,27.175270080566406],[-80.29391479492188,27.175058364868164],[-80.29399871826172,27.17447853088379],[-80.29400634765625,27.17409896850586],[-80.29397583007813,27.17369842529297],[-80.29399108886719,27.173358917236328],[-80.29400634765625,27.172569274902344],[-80.29402160644531,27.172409057617188],[-80.29387664794922,27.172378540039063],[-80.29339599609375,27.172378540039063],[-80.29248046875,27.1723690032959],[-80.28852844238281,27.17234992980957],[-80.28654479980469,27.172319412231445],[-80.28443145751953,27.172298431396484],[-80.28337097167969,27.172319412231445],[-80.2820053100586,27.172298431396484],[-80.27881622314453,27.172269821166992],[-80.27294921875,27.172229766845703],[-80.27180480957031,27.17224884033203],[-80.27022552490234,27.17224884033203],[-80.26934814453125,27.172258377075195],[-80.26911926269531,27.17230987548828],[-80.26824951171875,27.17228889465332],[-80.26654052734375,27.172279357910156],[-80.26544952392578,27.17224884033203],[-80.26502990722656,27.172298431396484],[-80.26469421386719,27.17238998413086],[-80.26384735107422,27.172760009765625],[-80.26368713378906,27.172788619995117],[-80.26348114013672,27.172889709472656],[-80.26139068603516,27.173879623413086],[-80.25995635986328,27.174549102783203],[-80.25870513916016,27.175138473510742],[-80.2582015991211,27.175378799438477],[-80.25785827636719,27.175498962402344],[-80.2574462890625,27.175600051879883],[-80.25715637207031,27.175640106201172],[-80.25690460205078,27.1756591796875],[-80.25527954101563,27.1756591796875],[-80.25382995605469,27.175649642944336],[-80.25267028808594,27.175640106201172],[-80.25202941894531,27.175640106201172],[-80.25068664550781,27.175649642944336],[-80.25030517578125,27.17568016052246],[-80.24939727783203,27.175668716430664],[-80.24818420410156,27.175668716430664],[-80.24739074707031,27.1756591796875],[-80.24468994140625,27.175628662109375],[-80.24054718017578,27.175588607788086],[-80.24002075195313,27.1756591796875],[-80.23981475830078,27.17572021484375],[-80.23942565917969,27.17588996887207],[-80.23908996582031,27.17609977722168],[-80.23858642578125,27.176488876342773],[-80.23728942871094,27.177518844604492],[-80.23686981201172,27.177860260009766],[-80.2366714477539,27.177928924560547],[-80.23667907714844,27.178058624267578],[-80.2366714477539,27.178098678588867],[-80.2366714477539,27.178138732910156],[-80.23665618896484,27.178239822387695],[-80.23662567138672,27.179948806762695],[-80.2365951538086,27.18048858642578],[-80.23656463623047,27.18062973022461],[-80.23648071289063,27.180898666381836],[-80.23641967773438,27.181089401245117],[-80.2362289428711,27.181398391723633],[-80.23600006103516,27.181678771972656],[-80.23587036132813,27.181808471679688],[-80.23565673828125,27.181968688964844],[-80.2354507446289,27.18208885192871],[-80.23529815673828,27.182098388671875],[-80.23527526855469,27.182109832763672],[-80.23506927490234,27.18218994140625],[-80.23253631591797,27.18317985534668],[-80.2306900024414,27.18389892578125],[-80.22988891601563,27.18416976928711],[-80.22908020019531,27.184410095214844],[-80.22808074951172,27.18463897705078],[-80.2260971069336,27.18509864807129],[-80.22551727294922,27.185230255126953],[-80.2251205444336,27.185379028320313],[-80.22483825683594,27.18552017211914],[-80.224609375,27.185678482055664],[-80.22444915771484,27.185810089111328],[-80.2242202758789,27.1860294342041],[-80.22404479980469,27.18623924255371],[-80.22390747070313,27.18647003173828],[-80.2237548828125,27.186819076538086],[-80.22367095947266,27.187179565429688],[-80.22364044189453,27.187509536743164],[-80.2237777709961,27.18922996520996],[-80.22396850585938,27.191429138183594],[-80.22399139404297,27.191648483276367],[-80.22406005859375,27.191740036010742],[-80.22409057617188,27.192018508911133],[-80.2240982055664,27.19219970703125],[-80.22410583496094,27.192359924316406],[-80.22412109375,27.19295883178711],[-80.22415161132813,27.193470001220703],[-80.22415161132813,27.194049835205078],[-80.22412872314453,27.195049285888672],[-80.22410583496094,27.196800231933594],[-80.2240982055664,27.197349548339844],[-80.22364807128906,27.19729995727539],[-80.22343444824219,27.197269439697266],[-80.22281646728516,27.197139739990234],[-80.22047424316406,27.196640014648438],[-80.21895599365234,27.196319580078125],[-80.21817016601563,27.196189880371094],[-80.21693420410156,27.196088790893555],[-80.21660614013672,27.196088790893555],[-80.21580505371094,27.19611930847168],[-80.2154769897461,27.196149826049805],[-80.21469116210938,27.196258544921875],[-80.21434020996094,27.196319580078125],[-80.2142105102539,27.19631004333496],[-80.21411895751953,27.196298599243164],[-80.21398162841797,27.196338653564453],[-80.21331024169922,27.196529388427734],[-80.21282958984375,27.19668960571289],[-80.21240997314453,27.19685935974121],[-80.21170043945313,27.197139739990234],[-80.21062469482422,27.197568893432617],[-80.2093505859375,27.198139190673828],[-80.20838928222656,27.198589324951172],[-80.20782470703125,27.198869705200195],[-80.20738983154297,27.19911003112793],[-80.20735168457031,27.199138641357422],[-80.20713806152344,27.199230194091797],[-80.20690155029297,27.199359893798828],[-80.2066650390625,27.199480056762695],[-80.20573425292969,27.200008392333984],[-80.2039794921875,27.201078414916992],[-80.20343780517578,27.201398849487305],[-80.20272064208984,27.20180892944336],[-80.2025375366211,27.20197868347168],[-80.20230865478516,27.20207977294922],[-80.2014389038086,27.202489852905273],[-80.20056915283203,27.202899932861328],[-80.2004165649414,27.20265007019043],[-80.20028686523438,27.202409744262695],[-80.20008850097656,27.20207977294922],[-80.19964599609375,27.201309204101563],[-80.19790649414063,27.19828987121582],[-80.19861602783203,27.197948455810547],[-80.19877624511719,27.197818756103516],[-80.19903564453125,27.19740867614746],[-80.19918060302734,27.197269439697266],[-80.1993179321289,27.197189331054688],[-80.20012664794922,27.196819305419922],[-80.20108032226563,27.196409225463867],[-80.2013168334961,27.19631004333496],[-80.20135498046875,27.19639015197754]]}},{"type":"Feature","properties":{"ID":137,"Name":"Newfield Pkwy","From":"Port St Lucie Blvd","To":"Farmer Dr","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":6069.0,"Peak_Hour_Vol_2024":307.0,"LOS_2024":"C","Growth_Rate_2024":0.024,"Comparison_2023":null,"Context_Class_2023":"C2","Service_Capacity_2023":730.0,"AADT_2023":5815.0,"Peak_Hour_Vol_2023":507.068,"LOS_2023":"D","Growth_Rate_2023":0.01910773247378294,"U_ID":"187-1","color":"#39FF14","width":2.5168501477545897,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Newfield Pkwy (ID: 137)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Port St Lucie Blvd  Farmer Dr\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>6,069<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>307<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #137\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Newfield Pkwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Port St Lucie Blvd  Farmer Dr\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>6,069\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>307\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>2.4%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.21151733398438,27.19356918334961],[-80.2115478515625,27.193389892578125],[-80.21155548095703,27.193239212036133],[-80.21157836914063,27.191598892211914],[-80.21158599853516,27.190319061279297],[-80.2115707397461,27.19001007080078],[-80.21150970458984,27.18937873840332],[-80.21139526367188,27.188629150390625],[-80.2111587524414,27.186948776245117],[-80.21109008789063,27.1865291595459],[-80.21102905273438,27.186338424682617],[-80.2109146118164,27.186128616333008],[-80.21076965332031,27.185930252075195],[-80.21067810058594,27.185850143432617],[-80.21041107177734,27.185598373413086],[-80.20956420898438,27.18486976623535],[-80.20885467529297,27.184249877929688],[-80.20846557617188,27.183868408203125],[-80.2081298828125,27.183460235595703],[-80.20790100097656,27.18313980102539],[-80.20745849609375,27.18254852294922],[-80.20732116699219,27.182239532470703],[-80.20724487304688,27.18199920654297],[-80.20711517333984,27.181459426879883],[-80.20703125,27.181289672851563],[-80.20691680908203,27.181148529052734],[-80.20685577392578,27.18109893798828],[-80.20665740966797,27.180978775024414],[-80.20602416992188,27.180728912353516],[-80.20362854003906,27.17976951599121],[-80.20240783691406,27.179279327392578],[-80.20230865478516,27.179208755493164],[-80.20214080810547,27.179079055786133],[-80.20207977294922,27.178958892822266],[-80.20198822021484,27.178770065307617],[-80.20182037353516,27.17844009399414],[-80.20108795166016,27.176939010620117],[-80.20088958740234,27.176538467407227],[-80.20079040527344,27.176408767700195],[-80.2006607055664,27.176279067993164],[-80.20079040527344,27.17613983154297],[-80.2009506225586,27.176029205322266],[-80.20336151123047,27.17508888244629],[-80.20539855957031,27.17430877685547],[-80.20691680908203,27.17371940612793],[-80.20993041992188,27.17255973815918],[-80.21142578125,27.17198944091797],[-80.21495819091797,27.170608520507813],[-80.21788024902344,27.16948890686035],[-80.21869659423828,27.169189453125],[-80.22042846679688,27.168569564819336],[-80.22209930419922,27.167909622192383],[-80.22503662109375,27.166778564453125],[-80.22666931152344,27.16615867614746],[-80.22718811035156,27.165958404541016],[-80.22798156738281,27.165679931640625],[-80.22822570800781,27.165550231933594],[-80.22886657714844,27.16530990600586],[-80.23027038574219,27.164779663085938],[-80.23217010498047,27.164039611816406],[-80.23316955566406,27.16362953186035],[-80.23395538330078,27.163330078125],[-80.23860931396484,27.161548614501953],[-80.24073028564453,27.16071891784668],[-80.2419662475586,27.160228729248047],[-80.24520874023438,27.159069061279297],[-80.24565887451172,27.158899307250977],[-80.24697875976563,27.15839958190918],[-80.24662780761719,27.157529830932617],[-80.24585723876953,27.155649185180664],[-80.24557495117188,27.154918670654297],[-80.245361328125,27.154298782348633],[-80.2451171875,27.153549194335938],[-80.2448959350586,27.152599334716797],[-80.24479675292969,27.152019500732422],[-80.24468994140625,27.151159286499023],[-80.24465942382813,27.150739669799805],[-80.24462890625,27.1500301361084],[-80.24464416503906,27.149188995361328],[-80.24470520019531,27.14842987060547],[-80.24478149414063,27.147850036621094],[-80.24497985839844,27.146739959716797],[-80.24510955810547,27.146209716796875],[-80.24528503417969,27.14560890197754],[-80.24549102783203,27.145029067993164],[-80.24586486816406,27.144079208374023],[-80.24662780761719,27.142478942871094],[-80.24746704101563,27.140729904174805],[-80.24748992919922,27.140640258789063],[-80.24784851074219,27.139869689941406],[-80.24798583984375,27.139589309692383],[-80.2491683959961,27.137100219726563],[-80.24988555908203,27.135608673095703],[-80.25045776367188,27.134389877319336],[-80.25074005126953,27.133718490600586],[-80.25094604492188,27.133129119873047],[-80.25116729736328,27.13243865966797],[-80.25142669677734,27.131439208984375],[-80.25151062011719,27.130979537963867],[-80.2516098022461,27.130338668823242],[-80.25191497802734,27.128019332885742],[-80.25228118896484,27.12571907043457],[-80.25238037109375,27.125080108642578],[-80.25252532958984,27.12401008605957],[-80.25289154052734,27.121469497680664],[-80.25321960449219,27.11932945251465],[-80.25345611572266,27.11846923828125],[-80.254150390625,27.116628646850586],[-80.25450897216797,27.115848541259766],[-80.2550277709961,27.115009307861328],[-80.25544738769531,27.114389419555664],[-80.25603485107422,27.113489151000977],[-80.25660705566406,27.112668991088867],[-80.25732421875,27.11176872253418],[-80.258056640625,27.11096954345703],[-80.25841522216797,27.11063003540039],[-80.25896453857422,27.110090255737305],[-80.25969696044922,27.109479904174805],[-80.26056671142578,27.10883903503418],[-80.2608642578125,27.108610153198242],[-80.26219940185547,27.107580184936523],[-80.2626953125,27.10717010498047],[-80.26339721679688,27.106639862060547],[-80.26404571533203,27.10614013671875],[-80.26541900634766,27.105098724365234],[-80.26590728759766,27.104719161987305],[-80.26680755615234,27.104000091552734],[-80.26860046386719,27.102298736572266],[-80.26935577392578,27.10162925720215],[-80.27021026611328,27.100969314575195],[-80.27070617675781,27.100549697875977],[-80.2713851928711,27.0998592376709],[-80.27169799804688,27.099498748779297],[-80.2719497680664,27.09918975830078],[-80.27214050292969,27.098918914794922],[-80.27268981933594,27.098039627075195],[-80.27362823486328,27.096208572387695],[-80.27427673339844,27.094959259033203],[-80.27526092529297,27.093059539794922],[-80.27574920654297,27.0921688079834],[-80.27604675292969,27.091659545898438],[-80.27668762207031,27.09058952331543],[-80.27745819091797,27.089309692382813],[-80.2779769897461,27.088489532470703],[-80.27822875976563,27.088069915771484],[-80.27861022949219,27.088029861450195],[-80.27906799316406,27.088048934936523],[-80.27961730957031,27.08807945251465],[-80.27999877929688,27.088058471679688],[-80.28092956542969,27.088058471679688],[-80.28187561035156,27.088098526000977],[-80.28245544433594,27.088088989257813],[-80.28387451171875,27.088098526000977],[-80.2841796875,27.088088989257813],[-80.28421020507813,27.08807945251465],[-80.2845458984375,27.08807945251465],[-80.2859115600586,27.088088989257813],[-80.28863525390625,27.088109970092773],[-80.28887939453125,27.088138580322266],[-80.28942108154297,27.0881290435791],[-80.2904281616211,27.0881290435791],[-80.29149627685547,27.088138580322266],[-80.2933578491211,27.08816909790039],[-80.2947769165039,27.08816909790039],[-80.29696655273438,27.08819007873535],[-80.29741668701172,27.088178634643555],[-80.29808807373047,27.088138580322266],[-80.29898071289063,27.088008880615234],[-80.29966735839844,27.08795928955078],[-80.30052947998047,27.087968826293945],[-80.3028793334961,27.08799934387207],[-80.30426788330078,27.0880184173584],[-80.30488586425781,27.08807945251465],[-80.30587768554688,27.088218688964844],[-80.30626678466797,27.08827018737793],[-80.30696868896484,27.088289260864258],[-80.31363677978516,27.088369369506836],[-80.31924438476563,27.088428497314453],[-80.31927490234375,27.086170196533203],[-80.31927490234375,27.084558486938477],[-80.31926727294922,27.083969116210938],[-80.31917572021484,27.082979202270508],[-80.31898498535156,27.081520080566406],[-80.3189697265625,27.081329345703125],[-80.31893920898438,27.08112907409668],[-80.31888580322266,27.080209732055664],[-80.31887817382813,27.079219818115234],[-80.31893157958984,27.07406997680664],[-80.31895446777344,27.070959091186523],[-80.31901550292969,27.070079803466797],[-80.31914520263672,27.069278717041016],[-80.31936645507813,27.068429946899414],[-80.31956481933594,27.067869186401367],[-80.31987762451172,27.067150115966797],[-80.32035064697266,27.066259384155273],[-80.3207015991211,27.065719604492188],[-80.32103729248047,27.06525993347168],[-80.32120513916016,27.065059661865234],[-80.32145690917969,27.06477928161621],[-80.3218994140625,27.064329147338867],[-80.32221984863281,27.06406021118164],[-80.32271575927734,27.063678741455078],[-80.32306671142578,27.063438415527344],[-80.32354736328125,27.063148498535156],[-80.32392120361328,27.062959671020508],[-80.32451629638672,27.06268882751465],[-80.32691955566406,27.06182861328125],[-80.33275604248047,27.05975914001465],[-80.335205078125,27.05889892578125],[-80.34855651855469,27.05415916442871],[-80.35284423828125,27.052648544311523],[-80.36827087402344,27.047189712524414],[-80.36918640136719,27.046810150146484],[-80.3713150024414,27.0458984375],[-80.37137603759766,27.0458984375],[-80.37173461914063,27.045740127563477],[-80.37469482421875,27.04448890686035],[-80.37957763671875,27.04239845275879],[-80.38179779052734,27.04146957397461],[-80.38237762451172,27.041259765625],[-80.38289642333984,27.041109085083008],[-80.38333892822266,27.040998458862305],[-80.38407897949219,27.04085922241211],[-80.384521484375,27.040809631347656],[-80.3853988647461,27.040760040283203],[-80.38594818115234,27.040719985961914],[-80.38639068603516,27.040679931640625],[-80.38703918457031,27.040569305419922],[-80.38766479492188,27.04041862487793],[-80.38880920410156,27.04006004333496],[-80.39012145996094,27.039588928222656],[-80.39466094970703,27.037988662719727],[-80.40137481689453,27.035598754882813],[-80.40269470214844,27.035139083862305],[-80.40320587158203,27.03495979309082],[-80.40400695800781,27.034669876098633],[-80.40412139892578,27.034809112548828],[-80.40412902832031,27.035179138183594],[-80.40409851074219,27.036428451538086],[-80.4040756225586,27.036970138549805],[-80.4040298461914,27.037328720092773],[-80.40391540527344,27.037519454956055],[-80.4029769897461,27.03778839111328],[-80.40326690673828,27.037778854370117],[-80.40348815917969,27.037858963012695],[-80.40362548828125,27.0380802154541],[-80.40374755859375,27.03826904296875],[-80.40388488769531,27.038318634033203],[-80.40449523925781,27.038339614868164],[-80.40591430664063,27.038330078125],[-80.40773010253906,27.038379669189453],[-80.40780639648438,27.038379669189453],[-80.4080810546875,27.03853988647461],[-80.40821075439453,27.03860855102539],[-80.40853118896484,27.038978576660156],[-80.40851593017578,27.039459228515625],[-80.40851593017578,27.040359497070313],[-80.40851593017578,27.042518615722656],[-80.40848541259766,27.04755973815918],[-80.40840911865234,27.05261993408203],[-80.40837860107422,27.0556697845459],[-80.40840911865234,27.058279037475586],[-80.40841674804688,27.06079864501953],[-80.40838623046875,27.067459106445313],[-80.40840911865234,27.07069969177246],[-80.40835571289063,27.073549270629883],[-80.40834045410156,27.074989318847656],[-80.40831756591797,27.078048706054688],[-80.40629577636719,27.078060150146484],[-80.40399932861328,27.078039169311523],[-80.39982604980469,27.078039169311523],[-80.3984375,27.078039169311523]]}},{"type":"Feature","properties":{"ID":140,"Name":"Newfield Pkwy","From":"Saw Palmetto Dr","To":"Martin Hwy","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":6069.0,"Peak_Hour_Vol_2024":307.0,"LOS_2024":"C","Growth_Rate_2024":0.024,"Comparison_2023":null,"Context_Class_2023":"C2","Service_Capacity_2023":730.0,"AADT_2023":5815.0,"Peak_Hour_Vol_2023":507.068,"LOS_2023":"D","Growth_Rate_2023":0.01910773247378294,"U_ID":"187-4","color":"#39FF14","width":2.5168501477545897,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Newfield Pkwy (ID: 140)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Saw Palmetto Dr  Martin Hwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>6,069<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>307<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #140\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Newfield Pkwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Saw Palmetto Dr  Martin Hwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>6,069\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>307\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>2.4%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.26362609863281,27.171289443969727],[-80.26333618164063,27.170888900756836],[-80.26329040527344,27.17078971862793],[-80.26443481445313,27.17078971862793],[-80.26443481445313,27.169818878173828],[-80.26445007324219,27.16790008544922],[-80.26446533203125,27.16404914855957],[-80.26446533203125,27.161588668823242],[-80.26448059082031,27.161218643188477],[-80.26529693603516,27.161209106445313],[-80.26835632324219,27.16119956970215],[-80.2705078125,27.161209106445313],[-80.27658081054688,27.161239624023438],[-80.28242492675781,27.16128921508789],[-80.28315734863281,27.161298751831055],[-80.28364562988281,27.16128921508789],[-80.28385925292969,27.161230087280273],[-80.28414916992188,27.161239624023438],[-80.28472137451172,27.1612491607666],[-80.28509521484375,27.1612491607666]]}},{"type":"Feature","properties":{"ID":146,"Name":"Ocean Blvd","From":"Stuart Beach Entry","To":"Jensen Beach Blvd","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":8479.0,"Peak_Hour_Vol_2024":429.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1165.0,"AADT_2023":8438.796437487299,"Peak_Hour_Vol_2023":410.12550686188274,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"156","color":"#39FF14","width":2.7382523617767296,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Ocean Blvd (ID: 146)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Stuart Beach Entry  Jensen Beach Blvd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>8,479<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>429<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #146\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Ocean Blvd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Stuart Beach Entry  Jensen Beach Blvd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>8,479\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>429\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.17498016357422,27.21440887451172],[-80.1754150390625,27.215158462524414],[-80.17544555664063,27.21516990661621],[-80.17550659179688,27.21514892578125],[-80.17557525634766,27.21510887145996],[-80.17570495605469,27.21504020690918],[-80.17572784423828,27.215089797973633],[-80.176025390625,27.21558952331543],[-80.17607116699219,27.215660095214844],[-80.17610931396484,27.215700149536133],[-80.17623138427734,27.21571922302246],[-80.17643737792969,27.215728759765625],[-80.1771011352539,27.215728759765625],[-80.17705535888672,27.216299057006836],[-80.17710876464844,27.216848373413086],[-80.17721557617188,27.217350006103516],[-80.17739868164063,27.21780014038086],[-80.17755126953125,27.218109130859375],[-80.17807006835938,27.218948364257813],[-80.1784896850586,27.21963882446289],[-80.1786880493164,27.219989776611328],[-80.17919158935547,27.22102928161621],[-80.17958068847656,27.221818923950195],[-80.18000030517578,27.222679138183594],[-80.18006896972656,27.222740173339844],[-80.18071746826172,27.223918914794922],[-80.18099975585938,27.224430084228516],[-80.18098449707031,27.224510192871094],[-80.18106842041016,27.224720001220703],[-80.18184661865234,27.226139068603516],[-80.18223571777344,27.226839065551758],[-80.18229675292969,27.226900100708008],[-80.18277740478516,27.22780990600586],[-80.1832046508789,27.22863006591797],[-80.18328094482422,27.228839874267578],[-80.18423461914063,27.230649948120117],[-80.18492126464844,27.231969833374023],[-80.18576049804688,27.233549118041992],[-80.18592834472656,27.23386001586914],[-80.18599700927734,27.233909606933594],[-80.1862564086914,27.234390258789063],[-80.18638610839844,27.23464012145996],[-80.1863784790039,27.234689712524414],[-80.18644714355469,27.234819412231445],[-80.18689727783203,27.23567008972168],[-80.18780517578125,27.23736000061035],[-80.18846130371094,27.238529205322266],[-80.18860626220703,27.238800048828125],[-80.18867492675781,27.238889694213867],[-80.1888656616211,27.239238739013672],[-80.19037628173828,27.24199867248535],[-80.19342041015625,27.24744987487793],[-80.19369506835938,27.24795913696289],[-80.19482421875,27.24995994567871],[-80.19483947753906,27.250049591064453],[-80.19517517089844,27.250749588012695],[-80.19551849365234,27.251359939575195],[-80.1962890625,27.25273895263672],[-80.19660949707031,27.25326919555664],[-80.19674682617188,27.253599166870117],[-80.1970443725586,27.254119873046875],[-80.19715118408203,27.25432014465332],[-80.19776916503906,27.25558853149414],[-80.19776916503906,27.255619049072266],[-80.19776916503906,27.255659103393555],[-80.19780731201172,27.255739212036133],[-80.19783782958984,27.255760192871094],[-80.1978988647461,27.255760192871094],[-80.1979751586914,27.255739212036133],[-80.19800567626953,27.255708694458008],[-80.19800567626953,27.25568962097168]]}},{"type":"Feature","properties":{"ID":147,"Name":"Ocean Blvd","From":"Jensen Beach Blvd","To":"St Lucie County","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":14456.0,"Peak_Hour_Vol_2024":731.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1165.0,"AADT_2023":14790.0,"Peak_Hour_Vol_2023":880.0050000000001,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"157","color":"#39FF14","width":3.287348226179357,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Ocean Blvd (ID: 147)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Jensen Beach Blvd  St Lucie County\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>14,456<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>731<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #147\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Ocean Blvd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Jensen Beach Blvd  St Lucie County\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>14,456\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>731\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.19800567626953,27.25568962097168],[-80.19800567626953,27.25562858581543],[-80.19796752929688,27.255569458007813],[-80.19792175292969,27.25555992126465],[-80.1978988647461,27.25554847717285],[-80.19778442382813,27.255390167236328],[-80.19694519042969,27.253738403320313],[-80.19633483886719,27.252599716186523],[-80.19564056396484,27.251319885253906],[-80.1952896118164,27.250688552856445],[-80.19488525390625,27.250019073486328],[-80.19482421875,27.24995994567871],[-80.19361114501953,27.247798919677734],[-80.19332885742188,27.247289657592773],[-80.19097137451172,27.24306869506836],[-80.18888854980469,27.23927879333496],[-80.18875122070313,27.2390193939209],[-80.18863677978516,27.238779067993164],[-80.18822479248047,27.237918853759766],[-80.18756866455078,27.2366886138916],[-80.1868667602539,27.235429763793945],[-80.18644714355469,27.234668731689453],[-80.18638610839844,27.23464012145996],[-80.1862564086914,27.234390258789063],[-80.18599700927734,27.233909606933594],[-80.18599700927734,27.23386001586914],[-80.18599700927734,27.233829498291016],[-80.18567657470703,27.233219146728516],[-80.18502044677734,27.23192024230957],[-80.18452453613281,27.231019973754883],[-80.18364715576172,27.229389190673828],[-80.18325805664063,27.228679656982422],[-80.1832046508789,27.22863006591797],[-80.18277740478516,27.22780990600586],[-80.18229675292969,27.226900100708008],[-80.18228912353516,27.226829528808594],[-80.18193817138672,27.226099014282227],[-80.18157958984375,27.225479125976563],[-80.18126678466797,27.224868774414063],[-80.18106079101563,27.224489212036133],[-80.18099975585938,27.224430084228516],[-80.18011474609375,27.222829818725586],[-80.18006896972656,27.222740173339844],[-80.18006134033203,27.222660064697266],[-80.179931640625,27.222379684448242],[-80.17935943603516,27.221208572387695],[-80.17855834960938,27.2195987701416],[-80.17771911621094,27.218238830566406],[-80.17753601074219,27.21790885925293],[-80.17742919921875,27.217679977416992],[-80.17730712890625,27.21731948852539],[-80.17717742919922,27.216798782348633],[-80.17713928222656,27.21636962890625],[-80.17713928222656,27.216110229492188],[-80.17720794677734,27.215599060058594],[-80.17733001708984,27.21518898010254],[-80.17752075195313,27.214698791503906],[-80.17776489257813,27.214269638061523],[-80.1778793334961,27.214088439941406],[-80.17788696289063,27.21402931213379],[-80.17798614501953,27.213909149169922],[-80.17813110351563,27.213748931884766],[-80.17832946777344,27.21354866027832],[-80.17865753173828,27.21327018737793],[-80.17881774902344,27.213159561157227],[-80.17913055419922,27.21295928955078],[-80.17935943603516,27.212839126586914],[-80.1795654296875,27.212739944458008],[-80.1796646118164,27.212718963623047],[-80.18061828613281,27.212299346923828],[-80.18115997314453,27.212039947509766],[-80.18204498291016,27.211618423461914],[-80.18376922607422,27.210819244384766],[-80.18476104736328,27.210350036621094],[-80.18505859375,27.2101993560791],[-80.18511962890625,27.210140228271484],[-80.18531799316406,27.210039138793945],[-80.18560791015625,27.209909439086914],[-80.18580627441406,27.209810256958008],[-80.18622589111328,27.209609985351563],[-80.1875991821289,27.208919525146484],[-80.18938446044922,27.207969665527344],[-80.19116973876953,27.207088470458984],[-80.19169616699219,27.206829071044922],[-80.1926498413086,27.20639991760254],[-80.1946792602539,27.20551872253418],[-80.19619750976563,27.20490837097168],[-80.19678497314453,27.20465850830078],[-80.19783020019531,27.20418930053711],[-80.19800567626953,27.20410919189453],[-80.1987075805664,27.203779220581055],[-80.19966888427734,27.203319549560547],[-80.20205688476563,27.202199935913086],[-80.2025375366211,27.20197868347168],[-80.2027816772461,27.201929092407227],[-80.20320892333984,27.20170021057129],[-80.20352935791016,27.201509475708008],[-80.20372009277344,27.20138931274414],[-80.20437622070313,27.20098876953125],[-80.20636749267578,27.199798583984375],[-80.20724487304688,27.199298858642578],[-80.20887756347656,27.19847869873047],[-80.21063995361328,27.197689056396484],[-80.21196746826172,27.1971492767334]]}},{"type":"Feature","properties":{"ID":148,"Name":"Osprey St","From":"Federal Hwy","To":"Dixie Hwy","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":6095.0,"Peak_Hour_Vol_2024":308.0,"LOS_2024":"C","Growth_Rate_2024":0.032,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1110.0,"AADT_2023":5871.0,"Peak_Hour_Vol_2023":237.7755,"LOS_2023":"C","Growth_Rate_2023":0.03065796440999269,"U_ID":"91","color":"#39FF14","width":2.519238719358148,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Osprey St (ID: 148)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Federal Hwy  Dixie Hwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>6,095<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>308<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #148\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Osprey St\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Federal Hwy  Dixie Hwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>6,095\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>308\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>3.2%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.15933990478516,27.098819732666016],[-80.1590805053711,27.09895896911621],[-80.15857696533203,27.09912872314453],[-80.15681457519531,27.099760055541992],[-80.15345764160156,27.100919723510742],[-80.1514892578125,27.101598739624023]]}},{"type":"Feature","properties":{"ID":149,"Name":"Osprey St","From":"Dixie Hwy","To":"Gomez Ave","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":2369.0,"Peak_Hour_Vol_2024":120.0,"LOS_2024":"C","Growth_Rate_2024":0.042,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1110.0,"AADT_2023":2270.0,"Peak_Hour_Vol_2023":110.322,"LOS_2023":"C","Growth_Rate_2023":0.04193923879011807,"U_ID":"92","color":"#39FF14","width":2.176938034940515,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Osprey St (ID: 149)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Dixie Hwy  Gomez Ave\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>2,369<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>120<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #149\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Osprey St\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Dixie Hwy  Gomez Ave\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>2,369\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>120\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>4.2%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.1514892578125,27.101598739624023],[-80.14972686767578,27.102209091186523],[-80.14859008789063,27.10260009765625]]}},{"type":"Feature","properties":{"ID":151,"Name":"Palm City Rd","From":"Monterey Rd","To":"Federal Hwy","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":8089.0,"Peak_Hour_Vol_2024":409.0,"LOS_2024":"C","Growth_Rate_2024":0.006,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":890.0,"AADT_2023":7871.0,"Peak_Hour_Vol_2023":393.70742,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"94","color":"#39FF14","width":2.7024237877233546,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Palm City Rd (ID: 151)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Monterey Rd  Federal Hwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>8,089<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>409<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #151\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Palm City Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Monterey Rd  Federal Hwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>8,089\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>409\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.6%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.25730895996094,27.175729751586914],[-80.25765991210938,27.17568016052246],[-80.2579345703125,27.175600051879883],[-80.2581787109375,27.175508499145508],[-80.25975036621094,27.174779891967773],[-80.26057434082031,27.174379348754883],[-80.26358795166016,27.172958374023438],[-80.26374816894531,27.172868728637695],[-80.26384735107422,27.172760009765625],[-80.2644271850586,27.172489166259766],[-80.26485443115234,27.172338485717773],[-80.26528930664063,27.172269821166992],[-80.2654800415039,27.17224884033203],[-80.26528930664063,27.172269821166992],[-80.26485443115234,27.172338485717773],[-80.2644271850586,27.172489166259766],[-80.26384735107422,27.172760009765625],[-80.26371765136719,27.172779083251953],[-80.26355743408203,27.172849655151367],[-80.26348876953125,27.172880172729492],[-80.26319122314453,27.173019409179688],[-80.26160430908203,27.173768997192383],[-80.26084899902344,27.174129486083984],[-80.25997161865234,27.17453956604004],[-80.25895690917969,27.175020217895508],[-80.25809478759766,27.175418853759766],[-80.25782012939453,27.175519943237305],[-80.25749969482422,27.175588607788086],[-80.25701904296875,27.175649642944336],[-80.25399017333984,27.175649642944336],[-80.2529067993164,27.175640106201172],[-80.25299072265625,27.176939010620117],[-80.25302124023438,27.177799224853516],[-80.2530288696289,27.17879867553711],[-80.25302124023438,27.18069839477539],[-80.25300598144531,27.18515968322754],[-80.25299072265625,27.18964958190918],[-80.25299835205078,27.19101905822754],[-80.25299072265625,27.19114875793457],[-80.25309753417969,27.191219329833984],[-80.25408172607422,27.191679000854492],[-80.25532531738281,27.19226837158203],[-80.25560760498047,27.19240951538086],[-80.255859375,27.19256019592285],[-80.25605010986328,27.19270896911621],[-80.25619506835938,27.19285011291504],[-80.25643920898438,27.193119049072266],[-80.2565689086914,27.193309783935547],[-80.25667572021484,27.19322967529297]]}},{"type":"Feature","properties":{"ID":152,"Name":"Palmer St","From":"Dixie Hwy","To":"Indian River Dr","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":4224.0,"Peak_Hour_Vol_2024":214.0,"LOS_2024":"C","Growth_Rate_2024":0.063,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1110.0,"AADT_2023":3375.0,"Peak_Hour_Vol_2023":211.68,"LOS_2023":"C","Growth_Rate_2023":0.02057151234336762,"U_ID":"168","color":"#39FF14","width":2.3473534320405447,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Palmer St (ID: 152)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Dixie Hwy  Indian River Dr\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>4,224<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>214<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #152\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Palmer St\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Dixie Hwy  Indian River Dr\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>4,224\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>214\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>6.3%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.22113800048828,27.22304916381836],[-80.22097778320313,27.22307014465332],[-80.22063446044922,27.223159790039063],[-80.22042846679688,27.223119735717773],[-80.22039794921875,27.223098754882813],[-80.22039031982422,27.22308921813965],[-80.2203598022461,27.22307014465332],[-80.22032165527344,27.22304916381836],[-80.2202377319336,27.22304916381836],[-80.22016906738281,27.223079681396484],[-80.22013854980469,27.223119735717773],[-80.22013092041016,27.223129272460938],[-80.2197265625,27.223098754882813],[-80.21949005126953,27.22300910949707],[-80.21894073486328,27.222990036010742],[-80.21833801269531,27.222990036010742],[-80.21673583984375,27.222978591918945],[-80.21399688720703,27.222959518432617],[-80.2135009765625,27.22296905517578],[-80.21293640136719,27.222949981689453],[-80.21240997314453,27.222959518432617]]}},{"type":"Feature","properties":{"ID":154,"Name":"Pomeroy St","From":"Kanner Hwy","To":"Willoughby Blvd","Context_Class":"C3R","Service_Capacity":1155.0,"AADT_2024":10567.0,"Peak_Hour_Vol_2024":535.0,"LOS_2024":"C","Growth_Rate_2024":0.038,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1110.0,"AADT_2023":10189.0,"Peak_Hour_Vol_2023":509.95945,"LOS_2023":"C","Growth_Rate_2023":0.03787940999578576,"U_ID":"183","color":"#39FF14","width":2.9300730351701856,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Pomeroy St (ID: 154)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Kanner Hwy  Willoughby Blvd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>10,567<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>535<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #154\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Pomeroy St\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Kanner Hwy  Willoughby Blvd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1155\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>10,567\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>535\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>3.8%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.24510955810547,27.146209716796875],[-80.24312591552734,27.14579963684082],[-80.24251556396484,27.145750045776367],[-80.24103546142578,27.145750045776367],[-80.24060821533203,27.14577865600586],[-80.24006652832031,27.145870208740234],[-80.23939514160156,27.145978927612305],[-80.23905944824219,27.145999908447266],[-80.23861694335938,27.145978927612305],[-80.23799896240234,27.145959854125977],[-80.23758697509766,27.14600944519043],[-80.23728942871094,27.146089553833008],[-80.23664855957031,27.146329879760742],[-80.23516845703125,27.146888732910156],[-80.23426055908203,27.147239685058594],[-80.2328109741211,27.147798538208008],[-80.23285675048828,27.147918701171875],[-80.23298645019531,27.147869110107422]]}},{"type":"Feature","properties":{"ID":155,"Name":"Pomeroy St","From":"Willoughby Blvd","To":"Federal Hwy","Context_Class":"C3R","Service_Capacity":1155.0,"AADT_2024":9765.0,"Peak_Hour_Vol_2024":494.0,"LOS_2024":"C","Growth_Rate_2024":0.024,"Comparison_2023":null,"Context_Class_2023":"C4","Service_Capacity_2023":915.0,"AADT_2023":9651.0,"Peak_Hour_Vol_2023":486.4104,"LOS_2023":"D","Growth_Rate_2023":0.02665759312371096,"U_ID":"184","color":"#39FF14","width":2.85639478801427,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Pomeroy St (ID: 155)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Willoughby Blvd  Federal Hwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>9,765<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>494<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #155\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Pomeroy St\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Willoughby Blvd  Federal Hwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1155\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>9,765\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>494\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>2.4%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.23298645019531,27.147869110107422],[-80.23292541503906,27.14775848388672],[-80.2328109741211,27.147798538208008],[-80.23126983642578,27.148408889770508],[-80.23035430908203,27.148759841918945],[-80.22998046875,27.148889541625977],[-80.22928619384766,27.149078369140625],[-80.2282485961914,27.14946937561035],[-80.22522735595703,27.150650024414063],[-80.22502136230469,27.150758743286133],[-80.22490692138672,27.15083885192871],[-80.22470092773438,27.151029586791992],[-80.22454833984375,27.15121841430664],[-80.22417449951172,27.151958465576172],[-80.22371673583984,27.152929306030273],[-80.22357177734375,27.153160095214844],[-80.223388671875,27.153369903564453],[-80.22320556640625,27.15350914001465],[-80.22303009033203,27.15361976623535],[-80.22286987304688,27.15369987487793],[-80.22248840332031,27.153839111328125],[-80.22178649902344,27.154109954833984],[-80.22111511230469,27.15437889099121],[-80.22019958496094,27.15471839904785],[-80.22003173828125,27.1547794342041],[-80.22004699707031,27.15481948852539],[-80.2203369140625,27.15530014038086],[-80.22135925292969,27.15692901611328],[-80.22203826904297,27.158029556274414],[-80.22235107421875,27.158519744873047],[-80.22257995605469,27.1585693359375],[-80.2221450805664,27.157878875732422],[-80.22175598144531,27.157249450683594],[-80.2209243774414,27.155920028686523],[-80.22023010253906,27.15479850769043]]}},{"type":"Feature","properties":{"ID":158,"Name":"Pratt Whitney Rd","From":"Meadowlark Cir","To":"Kanner Hwy","Context_Class":"C3R","Service_Capacity":1100.0,"AADT_2024":6374.0,"Peak_Hour_Vol_2024":323.0,"LOS_2024":"C","Growth_Rate_2024":0.01,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1165.0,"AADT_2023":6310.8876130995595,"Peak_Hour_Vol_2023":301.029339144849,"LOS_2023":"C","Growth_Rate_2023":0.00973533256705261,"U_ID":"30","color":"#39FF14","width":2.544869930027101,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Pratt Whitney Rd (ID: 158)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Meadowlark Cir  Kanner Hwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>6,374<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>323<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #158\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Pratt Whitney Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Meadowlark Cir  Kanner Hwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1100\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>6,374\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>323\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>1%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.26311492919922,27.06797981262207],[-80.26310729980469,27.072229385375977],[-80.26310729980469,27.072830200195313],[-80.26307678222656,27.073450088500977],[-80.26298522949219,27.075519561767578],[-80.2627944946289,27.079509735107422],[-80.26266479492188,27.08142852783203],[-80.26264953613281,27.082489013671875],[-80.26266479492188,27.08319854736328],[-80.26271057128906,27.083459854125977],[-80.26278686523438,27.083839416503906],[-80.26288604736328,27.084178924560547],[-80.26295471191406,27.084409713745117],[-80.26311492919922,27.08477020263672],[-80.26336669921875,27.08521842956543],[-80.26362609863281,27.08561897277832],[-80.26388549804688,27.08592987060547],[-80.26409149169922,27.086158752441406],[-80.26445770263672,27.086509704589844],[-80.26477813720703,27.086769104003906],[-80.26512908935547,27.08700942993164],[-80.26567840576172,27.087318420410156],[-80.2662582397461,27.08757972717285],[-80.2668685913086,27.087779998779297],[-80.26749420166016,27.087919235229492],[-80.26802825927734,27.08797836303711],[-80.26856994628906,27.088008880615234],[-80.27069091796875,27.0880184173584],[-80.27344512939453,27.08803939819336],[-80.2737045288086,27.088069915771484],[-80.27485656738281,27.088069915771484],[-80.27655029296875,27.088029861450195],[-80.27713775634766,27.088058471679688],[-80.27801513671875,27.08803939819336],[-80.27822875976563,27.088069915771484]]}},{"type":"Feature","properties":{"ID":159,"Name":"Salerno Rd","From":"Kanner Hwy","To":"Willoughby Blvd","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":8557.0,"Peak_Hour_Vol_2024":433.0,"LOS_2024":"C","Growth_Rate_2024":0.018,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1110.0,"AADT_2023":8049.0,"Peak_Hour_Vol_2023":433.8411,"LOS_2023":"C","Growth_Rate_2023":0.00688802515678377,"U_ID":"97","color":"#39FF14","width":2.7454180765874048,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Salerno Rd (ID: 159)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Kanner Hwy  Willoughby Blvd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>8,557<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>433<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #159\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Salerno Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Kanner Hwy  Willoughby Blvd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>8,557\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>433\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>1.8%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.25228118896484,27.124109268188477],[-80.25141906738281,27.124439239501953],[-80.25032043457031,27.124879837036133],[-80.24402618408203,27.127328872680664],[-80.2431869506836,27.127649307250977],[-80.24177551269531,27.128170013427734],[-80.2379379272461,27.12969970703125],[-80.23731994628906,27.129919052124023],[-80.23674011230469,27.13007926940918],[-80.23587799072266,27.130239486694336],[-80.23516082763672,27.13035011291504],[-80.23471069335938,27.130449295043945],[-80.23435974121094,27.13054847717285],[-80.2339096069336,27.130699157714844],[-80.23320770263672,27.13098907470703],[-80.23204040527344,27.131479263305664],[-80.23167419433594,27.13161849975586],[-80.23128509521484,27.131799697875977],[-80.23101043701172,27.131959915161133],[-80.23040008544922,27.132349014282227],[-80.22982025146484,27.132719039916992],[-80.22962951660156,27.132829666137695],[-80.22950744628906,27.132869720458984],[-80.2293472290039,27.132949829101563],[-80.22845458984375,27.133329391479492],[-80.2280502319336,27.13348960876465]]}},{"type":"Feature","properties":{"ID":161,"Name":"Salerno Rd","From":"Avalon Dr","To":"Federal Hwy","Context_Class":"C3R","Service_Capacity":1155.0,"AADT_2024":9417.0,"Peak_Hour_Vol_2024":477.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C4","Service_Capacity_2023":915.0,"AADT_2023":9026.0,"Peak_Hour_Vol_2023":544.44832,"LOS_2023":"D","Growth_Rate_2023":0.005,"U_ID":"98-2","color":"#39FF14","width":2.8244246757820273,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Salerno Rd (ID: 161)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Avalon Dr  Federal Hwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>9,417<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>477<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #161\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Salerno Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Avalon Dr  Federal Hwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1155\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>9,417\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>477\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.21804809570313,27.13755989074707],[-80.21805572509766,27.137588500976563],[-80.21784973144531,27.137659072875977],[-80.21669006347656,27.138099670410156],[-80.21454620361328,27.138898849487305],[-80.21112823486328,27.140199661254883]]}},{"type":"Feature","properties":{"ID":165,"Name":"Savannah Rd","From":"Park Pl","To":"NE 24th St","Context_Class":"C3R","Service_Capacity":1100.0,"AADT_2024":8684.0,"Peak_Hour_Vol_2024":439.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1165.0,"AADT_2023":8521.0,"Peak_Hour_Vol_2023":391.1139,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"42-2","color":"#39FF14","width":2.7570853301894016,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Savannah Rd (ID: 165)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Park Pl  NE 24th St\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>8,684<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>439<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #165\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Savannah Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Park Pl  NE 24th St\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1100\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>8,684\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>439\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.2371597290039,27.225969314575195],[-80.23697662353516,27.226308822631836],[-80.23686981201172,27.226598739624023],[-80.23681640625,27.22673988342285],[-80.23677062988281,27.226999282836914],[-80.2366714477539,27.22766876220703],[-80.23661804199219,27.228208541870117],[-80.23645782470703,27.229740142822266],[-80.23638153076172,27.230209350585938],[-80.23636627197266,27.230209350585938],[-80.23633575439453,27.2302188873291],[-80.23628997802734,27.230239868164063],[-80.23626708984375,27.230289459228516],[-80.23625946044922,27.23033905029297],[-80.23627471923828,27.230388641357422],[-80.23632049560547,27.23042869567871],[-80.23636627197266,27.230449676513672],[-80.23638916015625,27.230459213256836],[-80.23639678955078,27.230649948120117],[-80.23638916015625,27.23137855529785],[-80.23636627197266,27.231779098510742],[-80.23636627197266,27.23288917541504],[-80.23636627197266,27.233949661254883]]}},{"type":"Feature","properties":{"ID":166,"Name":"Savannah Rd","From":"NE 24th St","To":"Jensen Beach Blvd","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":10010.0,"Peak_Hour_Vol_2024":507.0,"LOS_2024":"C","Growth_Rate_2024":0.008,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1165.0,"AADT_2023":9649.0,"Peak_Hour_Vol_2023":436.52076,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"43","color":"#39FF14","width":2.878902481970878,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Savannah Rd (ID: 166)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>NE 24th St  Jensen Beach Blvd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>10,010<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>507<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #166\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Savannah Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>NE 24th St  Jensen Beach Blvd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>10,010\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>507\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.8%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.23636627197266,27.233949661254883],[-80.23636627197266,27.23587989807129],[-80.23636627197266,27.236740112304688],[-80.23638916015625,27.23724937438965],[-80.23636627197266,27.2381591796875],[-80.23635864257813,27.240129470825195],[-80.2363510131836,27.2419490814209],[-80.23633575439453,27.244369506835938],[-80.236328125,27.24500846862793],[-80.23629760742188,27.24500846862793]]}},{"type":"Feature","properties":{"ID":167,"Name":"Seabranch Blvd","From":"Doubletree Dr","To":"Federal Hwy","Context_Class":"C3R","Service_Capacity":1850.0,"AADT_2024":6161.0,"Peak_Hour_Vol_2024":312.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1850.0,"AADT_2023":5904.0,"Peak_Hour_Vol_2023":269.10432,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"102","color":"#39FF14","width":2.525302016505642,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Seabranch Blvd (ID: 167)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Doubletree Dr  Federal Hwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>6,161<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>312<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #167\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Seabranch Blvd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Doubletree Dr  Federal Hwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1850\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>6,161\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>312\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.20381927490234,27.09977912902832],[-80.2037582397461,27.099668502807617],[-80.2037353515625,27.099679946899414],[-80.2032470703125,27.09990882873535],[-80.20272827148438,27.1002197265625],[-80.20198059082031,27.100698471069336],[-80.20148468017578,27.10095977783203],[-80.2010498046875,27.10114860534668],[-80.20024108886719,27.101398468017578],[-80.19964599609375,27.101518630981445],[-80.19902801513672,27.10157012939453],[-80.19873809814453,27.101579666137695],[-80.19744873046875,27.101518630981445],[-80.19454956054688,27.10133934020996],[-80.19224548339844,27.101200103759766],[-80.19143676757813,27.101219177246094],[-80.19066619873047,27.101299285888672],[-80.18852996826172,27.1016788482666],[-80.18612670898438,27.102128982543945],[-80.18572998046875,27.102258682250977],[-80.18545532226563,27.102359771728516],[-80.18500518798828,27.10257911682129],[-80.18463134765625,27.102819442749023],[-80.18424987792969,27.10312843322754],[-80.18386840820313,27.103519439697266],[-80.18360137939453,27.10388946533203],[-80.18341064453125,27.104209899902344],[-80.18319702148438,27.10470962524414],[-80.18316650390625,27.104808807373047],[-80.18306732177734,27.105249404907227],[-80.18302917480469,27.105588912963867],[-80.18302154541016,27.105899810791016],[-80.1830062866211,27.106719970703125],[-80.18299102783203,27.10740852355957],[-80.18293762207031,27.107879638671875],[-80.18291473388672,27.10797882080078],[-80.18277740478516,27.108749389648438],[-80.18251037597656,27.10965919494629],[-80.18222045898438,27.110368728637695],[-80.18193817138672,27.111040115356445],[-80.18170166015625,27.111799240112305],[-80.1815185546875,27.112499237060547],[-80.18126678466797,27.113550186157227],[-80.18115997314453,27.1140193939209],[-80.18103790283203,27.114398956298828],[-80.18093872070313,27.11458969116211],[-80.18067169189453,27.11495018005371],[-80.18061065673828,27.114999771118164],[-80.18048858642578,27.115108489990234],[-80.18019104003906,27.11528968811035],[-80.17903137207031,27.115829467773438],[-80.17876434326172,27.115999221801758],[-80.17863464355469,27.11612892150879],[-80.17835998535156,27.1164493560791],[-80.17798614501953,27.116939544677734],[-80.1781005859375,27.11701011657715],[-80.17823791503906,27.116819381713867]]}},{"type":"Feature","properties":{"ID":168,"Name":"Sewalls Pt Rd","From":"Ocean Blvd","To":"Palmer St","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":12094.0,"Peak_Hour_Vol_2024":612.0,"LOS_2024":"C","Growth_Rate_2024":0.05,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1110.0,"AADT_2023":11397.0,"Peak_Hour_Vol_2023":476.3946,"LOS_2023":"C","Growth_Rate_2023":0.04667646889191523,"U_ID":"103","color":"#39FF14","width":3.0703556828099403,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Sewalls Pt Rd (ID: 168)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Ocean Blvd  Palmer St\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>12,094<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>612<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #168\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Sewalls Pt Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Ocean Blvd  Palmer St\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>12,094\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>612\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.20059967041016,27.20294952392578],[-80.19989776611328,27.201740264892578],[-80.19964599609375,27.201309204101563],[-80.19928741455078,27.2006893157959],[-80.19939422607422,27.20064926147461],[-80.20042419433594,27.20016860961914],[-80.2006607055664,27.200069427490234],[-80.20149993896484,27.199689865112305],[-80.20159149169922,27.199668884277344],[-80.20166015625,27.19965934753418],[-80.20166778564453,27.19944953918457]]}},{"type":"Feature","properties":{"ID":169,"Name":"Skyline Dr","From":"Jensen Beach Blvd","To":"Indian River Dr","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":1770.0,"Peak_Hour_Vol_2024":90.0,"LOS_2024":"C","Growth_Rate_2024":0.016,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1110.0,"AADT_2023":1846.0,"Peak_Hour_Vol_2023":98.07798,"LOS_2023":"C","Growth_Rate_2023":0.03096734861908134,"U_ID":"170","color":"#39FF14","width":2.1219090199200745,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Skyline Dr (ID: 169)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Jensen Beach Blvd  Indian River Dr\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>1,770<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>90<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #169\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Skyline Dr\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Jensen Beach Blvd  Indian River Dr\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>1,770\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>90\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>1.6%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.2292251586914,27.243410110473633],[-80.22882843017578,27.24346923828125],[-80.22824096679688,27.243629455566406],[-80.22787475585938,27.243728637695313],[-80.22760009765625,27.2437801361084],[-80.22753143310547,27.243709564208984],[-80.22748565673828,27.243688583374023],[-80.22732543945313,27.24367904663086],[-80.22725677490234,27.24371910095215],[-80.2271957397461,27.243789672851563],[-80.22716522216797,27.243879318237305],[-80.22716522216797,27.243919372558594],[-80.22721862792969,27.24397850036621],[-80.22728729248047,27.244029998779297],[-80.22727966308594,27.244089126586914],[-80.22726440429688,27.24420928955078],[-80.22726440429688,27.24424934387207],[-80.22732543945313,27.24441909790039],[-80.2274169921875,27.24466896057129],[-80.22757720947266,27.245229721069336],[-80.22774505615234,27.245859146118164],[-80.22802734375,27.246728897094727],[-80.22840881347656,27.24802017211914],[-80.22882080078125,27.24936866760254],[-80.22882843017578,27.24953842163086],[-80.22882080078125,27.2497501373291],[-80.2287368774414,27.250028610229492],[-80.2286605834961,27.25016975402832],[-80.22859954833984,27.250268936157227],[-80.2284164428711,27.250469207763672],[-80.22831726074219,27.250539779663086],[-80.22817993164063,27.250558853149414],[-80.22808074951172,27.250568389892578],[-80.22805786132813,27.25054931640625],[-80.22802734375,27.250530242919922],[-80.22796630859375,27.250518798828125],[-80.22787475585938,27.250539779663086],[-80.2278060913086,27.250598907470703],[-80.2278060913086,27.250638961791992],[-80.22782897949219,27.25071907043457],[-80.22786712646484,27.250789642333984],[-80.2279052734375,27.25079917907715],[-80.22798156738281,27.25088882446289],[-80.22802734375,27.250938415527344],[-80.22815704345703,27.25128936767578],[-80.2285385131836,27.252180099487305],[-80.22870635986328,27.2525691986084],[-80.22887420654297,27.25303840637207],[-80.22915649414063,27.2537899017334],[-80.22947692871094,27.254549026489258],[-80.2298812866211,27.255449295043945],[-80.2303466796875,27.25636863708496],[-80.23051452636719,27.256790161132813],[-80.23072052001953,27.257740020751953],[-80.23081970214844,27.25811004638672],[-80.23089599609375,27.25834846496582],[-80.23104095458984,27.258689880371094],[-80.23228454589844,27.26080894470215]]}},{"type":"Feature","properties":{"ID":170,"Name":"St Lucie Blvd","From":"Dixie Hwy","To":"Indian St","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":3249.0,"Peak_Hour_Vol_2024":164.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1110.0,"AADT_2023":3899.0,"Peak_Hour_Vol_2023":194.24818,"LOS_2023":"C","Growth_Rate_2023":0.042,"U_ID":"173","color":"#39FF14","width":2.257781996907106,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>St Lucie Blvd (ID: 170)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Dixie Hwy  Indian St\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>3,249<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>164<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #170\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>St Lucie Blvd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Dixie Hwy  Indian St\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>3,249\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>164\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.20230102539063,27.14920997619629],[-80.20227813720703,27.149158477783203],[-80.2020492553711,27.14897918701172],[-80.2017593383789,27.148778915405273],[-80.20167541503906,27.148839950561523],[-80.20160675048828,27.1489200592041],[-80.2016372680664,27.14900016784668],[-80.20208740234375,27.14933967590332],[-80.20204162597656,27.14952850341797],[-80.201904296875,27.149808883666992],[-80.20157623291016,27.150388717651367],[-80.201416015625,27.15066909790039],[-80.20063018798828,27.152069091796875],[-80.20025634765625,27.15275001525879],[-80.20013427734375,27.153059005737305],[-80.20011138916016,27.153240203857422],[-80.20008850097656,27.153318405151367],[-80.20008850097656,27.15353012084961],[-80.20011138916016,27.1546688079834],[-80.20011138916016,27.157480239868164],[-80.20008850097656,27.1575984954834],[-80.20001983642578,27.157779693603516],[-80.19990539550781,27.157928466796875],[-80.19908142089844,27.158788681030273],[-80.197998046875,27.159839630126953],[-80.19786834716797,27.15997886657715],[-80.19767761230469,27.160188674926758],[-80.19757080078125,27.16033935546875],[-80.19744110107422,27.160619735717773],[-80.19728088378906,27.160860061645508],[-80.19712829589844,27.161039352416992],[-80.1968765258789,27.161258697509766],[-80.1961898803711,27.161909103393555],[-80.19593048095703,27.162139892578125],[-80.19562530517578,27.162429809570313],[-80.19549560546875,27.16259002685547],[-80.19544982910156,27.162710189819336],[-80.19544982910156,27.162818908691406],[-80.1954574584961,27.16288948059082],[-80.19551849365234,27.163040161132813],[-80.1956787109375,27.16329002380371],[-80.19593811035156,27.163660049438477],[-80.19677734375,27.164888381958008],[-80.1978988647461,27.166540145874023],[-80.1982650756836,27.16705894470215],[-80.19837951660156,27.16718864440918],[-80.19851684570313,27.16728973388672],[-80.19877624511719,27.167428970336914],[-80.2000961303711,27.16802978515625],[-80.20096588134766,27.168428421020508],[-80.20234680175781,27.16905975341797],[-80.20446014404297,27.170019149780273],[-80.20536041259766,27.17045021057129],[-80.20560455322266,27.170528411865234],[-80.20571899414063,27.17053985595703],[-80.20611572265625,27.170499801635742],[-80.20730590820313,27.170379638671875],[-80.20795440673828,27.17030906677246],[-80.20849609375,27.170259475708008],[-80.20867919921875,27.170249938964844],[-80.20878601074219,27.170259475708008],[-80.20890808105469,27.170379638671875],[-80.20899963378906,27.170568466186523],[-80.2092514038086,27.171098709106445],[-80.20946502685547,27.171520233154297],[-80.20958709716797,27.171689987182617],[-80.20989990234375,27.171979904174805],[-80.21026611328125,27.172338485717773],[-80.21033477783203,27.172409057617188]]}},{"type":"Feature","properties":{"ID":171,"Name":"St Lucie Blvd","From":"Indian St","To":"Ocean Blvd","Context_Class":"C3R","Service_Capacity":880.0,"AADT_2024":6303.0,"Peak_Hour_Vol_2024":319.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1110.0,"AADT_2023":7602.0,"Peak_Hour_Vol_2023":378.73164,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"101","color":"#39FF14","width":2.538347292186615,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>St Lucie Blvd (ID: 171)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Indian St  Ocean Blvd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>6,303<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>319<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #171\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>St Lucie Blvd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Indian St  Ocean Blvd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>880\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>6,303\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>319\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.21033477783203,27.172409057617188],[-80.20761108398438,27.17344856262207],[-80.20562744140625,27.174209594726563],[-80.20114135742188,27.175949096679688],[-80.20085906982422,27.17607879638672],[-80.20072174072266,27.176219940185547],[-80.2006607055664,27.176279067993164],[-80.20073699951172,27.176359176635742],[-80.20085144042969,27.17647933959961],[-80.2010498046875,27.176868438720703],[-80.20166778564453,27.178138732910156],[-80.20201110839844,27.178829193115234],[-80.20214080810547,27.179079055786133],[-80.20234680175781,27.179248809814453],[-80.20259857177734,27.179359436035156],[-80.20336151123047,27.179658889770508],[-80.2056884765625,27.18058967590332],[-80.20649719238281,27.180910110473633],[-80.20675659179688,27.181028366088867],[-80.20684814453125,27.181089401245117],[-80.20697021484375,27.181209564208984],[-80.20707702636719,27.181379318237305],[-80.20714569091797,27.18157958984375],[-80.2072982788086,27.18218994140625],[-80.2073745727539,27.182369232177734],[-80.20756530761719,27.182708740234375],[-80.20777130126953,27.18297004699707],[-80.20829010009766,27.183658599853516],[-80.20867156982422,27.184080123901367],[-80.2094955444336,27.1848201751709],[-80.21013641357422,27.18536949157715],[-80.2105941772461,27.185779571533203],[-80.2107162475586,27.185869216918945],[-80.21086120605469,27.186038970947266],[-80.21099090576172,27.186248779296875],[-80.2110595703125,27.186429977416992],[-80.21112823486328,27.186748504638672],[-80.21133422851563,27.188228607177734],[-80.21149444580078,27.189319610595703],[-80.2115707397461,27.189970016479492],[-80.21158599853516,27.190319061279297],[-80.21157836914063,27.19145965576172],[-80.21155548095703,27.193069458007813],[-80.21154022216797,27.193498611450195],[-80.2114486694336,27.193788528442383],[-80.21106719970703,27.1948299407959],[-80.21078491210938,27.19556999206543],[-80.21074676513672,27.195838928222656],[-80.21076965332031,27.19594955444336],[-80.21083068847656,27.196109771728516],[-80.2109146118164,27.196258544921875],[-80.21104431152344,27.196409225463867],[-80.21122741699219,27.196578979492188],[-80.21184539794922,27.197078704833984],[-80.21199035644531,27.197139739990234]]}},{"type":"Feature","properties":{"ID":180,"Name":"Willoughby Blvd","From":"Salerno Rd","To":"Pomeroy St","Context_Class":"C3R","Service_Capacity":1100.0,"AADT_2024":8805.0,"Peak_Hour_Vol_2024":446.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1165.0,"AADT_2023":8977.0,"Peak_Hour_Vol_2023":487.63064,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"161","color":"#39FF14","width":2.7682013749598076,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Willoughby Blvd (ID: 180)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Salerno Rd  Pomeroy St\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>8,805<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>446<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #180\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Willoughby Blvd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Salerno Rd  Pomeroy St\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1100\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>8,805\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>446\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.2280502319336,27.13348960876465],[-80.22969818115234,27.13684844970703],[-80.2304458618164,27.138368606567383],[-80.23070526123047,27.138938903808594],[-80.23085021972656,27.139339447021484],[-80.23096466064453,27.139909744262695],[-80.2310562133789,27.14065933227539],[-80.2311782836914,27.14202880859375],[-80.23125457763672,27.143299102783203],[-80.23131561279297,27.14385986328125],[-80.23143005371094,27.144329071044922],[-80.23155975341797,27.14478874206543],[-80.23165893554688,27.145139694213867],[-80.2319107055664,27.145709991455078],[-80.23207092285156,27.146028518676758],[-80.23204803466797,27.146129608154297],[-80.232177734375,27.146469116210938],[-80.23231506347656,27.146799087524414],[-80.23240661621094,27.146968841552734],[-80.2328109741211,27.147798538208008],[-80.23285675048828,27.147918701171875],[-80.23298645019531,27.147869110107422]]}},{"type":"Feature","properties":{"ID":181,"Name":"Willoughby Blvd","From":"Pomeroy St","To":"Indian St","Context_Class":"C3R","Service_Capacity":1850.0,"AADT_2024":10378.0,"Peak_Hour_Vol_2024":525.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1945.0,"AADT_2023":10277.0,"Peak_Hour_Vol_2023":517.44695,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"160","color":"#39FF14","width":2.9127099569750885,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #39FF14; margin-bottom: 4px;'>Willoughby Blvd (ID: 181)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Pomeroy St  Indian St\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C3R<br><span style='color: #71717a;'>AADT 2024: \u003c/span>10,378<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>525<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #181\u003c/div><div style='font-size: 14px; font-weight: 600; color: #39FF14; margin: 4px 0;'>Willoughby Blvd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Pomeroy St  Indian St\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C3R\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1850\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #39FF14;'>10,378\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>525\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.23298645019531,27.147869110107422],[-80.23292541503906,27.14775848388672],[-80.2328109741211,27.147798538208008],[-80.23285675048828,27.147918701171875],[-80.23321533203125,27.148670196533203],[-80.23336791992188,27.14900016784668],[-80.23353576660156,27.149438858032227],[-80.23371124267578,27.150039672851563],[-80.23387145996094,27.150829315185547],[-80.23406982421875,27.15203857421875],[-80.23416900634766,27.1524600982666],[-80.23432159423828,27.15291976928711],[-80.23440551757813,27.153148651123047],[-80.23465728759766,27.153669357299805],[-80.23495483398438,27.1541690826416],[-80.23519897460938,27.154508590698242],[-80.23543548583984,27.15479850769043],[-80.23577117919922,27.15515899658203],[-80.23668670654297,27.156108856201172],[-80.23797607421875,27.15740966796875],[-80.2384262084961,27.157888412475586],[-80.23878479003906,27.15839958190918],[-80.23897552490234,27.158748626708984],[-80.2399673461914,27.160768508911133],[-80.24000549316406,27.160869598388672],[-80.24008178710938,27.160980224609375],[-80.24018859863281,27.16092872619629]]}}]},"generateId":true},"source_layer":null,"paint":{"line-color":"#39FF14","line-opacity":0.85,"line-translate-anchor":"map","line-width":4},"layout":{"visibility":"visible"},"slot":null,"minzoom":null,"maxzoom":null,"popup":"popup_html","tooltip":"tooltip_html","hover_options":null,"before_id":null,"filter":null},{"id":"routes_C4","type":"line","source":{"type":"geojson","data":{"type":"FeatureCollection","features":[{"type":"Feature","properties":{"ID":13,"Name":"Bridge Rd","From":"Lantana Ave","To":"Federal Hwy","Context_Class":"C4","Service_Capacity":870.0,"AADT_2024":12336.0,"Peak_Hour_Vol_2024":645.0,"LOS_2024":"D","Growth_Rate_2024":0.031,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":890.0,"AADT_2023":11249.0,"Peak_Hour_Vol_2023":623.6445600000001,"LOS_2023":"TCEA","Growth_Rate_2023":0.01551853185381513,"U_ID":"23-2","color":"#FF10F0","width":3.0925877723507527,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FF10F0; margin-bottom: 4px;'>Bridge Rd (ID: 13)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Lantana Ave  Federal Hwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C4<br><span style='color: #71717a;'>AADT 2024: \u003c/span>12,336<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>645<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>D\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #13\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FF10F0; margin: 4px 0;'>Bridge Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Lantana Ave  Federal Hwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C4\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>870\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FF10F0;'>12,336\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>645\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>D\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>3.1%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.14183807373047,27.057668685913086],[-80.141845703125,27.057689666748047],[-80.14112091064453,27.05794906616211],[-80.14071655273438,27.058069229125977],[-80.13955688476563,27.058460235595703],[-80.13887786865234,27.058670043945313],[-80.13787078857422,27.05902862548828],[-80.13668823242188,27.059419631958008]]}},{"type":"Feature","properties":{"ID":14,"Name":"Bridge Rd","From":"Federal Hwy","To":"Dixie Hwy","Context_Class":"C4","Service_Capacity":695.0,"AADT_2024":8109.0,"Peak_Hour_Vol_2024":424.0,"LOS_2024":"TCEA","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C4","Service_Capacity_2023":695.0,"AADT_2023":8379.0,"Peak_Hour_Vol_2023":484.13862,"LOS_2023":"TCEA","Growth_Rate_2023":0.005,"U_ID":"24","color":"#FF10F0","width":2.7042611504953222,"los_color":"#FF073A","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FF10F0; margin-bottom: 4px;'>Bridge Rd (ID: 14)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Federal Hwy  Dixie Hwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C4<br><span style='color: #71717a;'>AADT 2024: \u003c/span>8,109<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>424<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FF073A; font-weight: bold;'>TCEA\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #14\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FF10F0; margin: 4px 0;'>Bridge Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Federal Hwy  Dixie Hwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C4\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>695\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FF10F0;'>8,109\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>424\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FF073A;'>TCEA\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.13666534423828,27.059429168701172],[-80.13529968261719,27.05990982055664],[-80.13447570800781,27.060209274291992],[-80.13282012939453,27.06079864501953],[-80.13108825683594,27.061399459838867],[-80.13047790527344,27.061599731445313]]}},{"type":"Feature","properties":{"ID":15,"Name":"Bridge Rd","From":"Dixie Hwy","To":"Gomez Ave","Context_Class":"C4","Service_Capacity":695.0,"AADT_2024":7884.0,"Peak_Hour_Vol_2024":412.0,"LOS_2024":"D","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C4","Service_Capacity_2023":695.0,"AADT_2023":7845.0,"Peak_Hour_Vol_2023":396.9570000000001,"LOS_2023":"TCEA","Growth_Rate_2023":0.005,"U_ID":"25","color":"#FF10F0","width":2.683590819310683,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FF10F0; margin-bottom: 4px;'>Bridge Rd (ID: 15)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Dixie Hwy  Gomez Ave\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C4<br><span style='color: #71717a;'>AADT 2024: \u003c/span>7,884<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>412<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>D\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #15\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FF10F0; margin: 4px 0;'>Bridge Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Dixie Hwy  Gomez Ave\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C4\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>695\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FF10F0;'>7,884\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>412\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>D\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.13047790527344,27.061599731445313],[-80.12890625,27.062158584594727]]}},{"type":"Feature","properties":{"ID":16,"Name":"Bridge Rd","From":"Gomez Ave","To":"Beach Rd","Context_Class":"C4","Service_Capacity":695.0,"AADT_2024":4930.0,"Peak_Hour_Vol_2024":258.0,"LOS_2024":"D","Growth_Rate_2024":0.008,"Comparison_2023":null,"Context_Class_2023":"C4","Service_Capacity_2023":695.0,"AADT_2023":4572.0,"Peak_Hour_Vol_2023":259.36956000000004,"LOS_2023":"D","Growth_Rate_2023":0.005,"U_ID":"26","color":"#FF10F0","width":2.4122123378910136,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FF10F0; margin-bottom: 4px;'>Bridge Rd (ID: 16)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Gomez Ave  Beach Rd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C4<br><span style='color: #71717a;'>AADT 2024: \u003c/span>4,930<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>258<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>D\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #16\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FF10F0; margin: 4px 0;'>Bridge Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Gomez Ave  Beach Rd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C4\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>695\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FF10F0;'>4,930\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>258\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>D\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.8%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.12890625,27.062158584594727],[-80.12776947021484,27.06254005432129],[-80.12500762939453,27.063508987426758],[-80.12435913085938,27.063730239868164],[-80.12378692626953,27.064008712768555],[-80.12303161621094,27.064369201660156],[-80.1224594116211,27.064579010009766],[-80.12179565429688,27.064800262451172],[-80.12140655517578,27.064918518066406],[-80.12083435058594,27.065038681030273],[-80.12037658691406,27.065139770507813],[-80.1194076538086,27.065380096435547],[-80.11824035644531,27.065698623657227],[-80.11625671386719,27.06624984741211]]}},{"type":"Feature","properties":{"ID":29,"Name":"Cove Rd","From":"Federal Hwy","To":"Dixie Hwy","Context_Class":"C4","Service_Capacity":695.0,"AADT_2024":13049.0,"Peak_Hour_Vol_2024":682.0,"LOS_2024":"D","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C4","Service_Capacity_2023":870.0,"AADT_2023":13949.0,"Peak_Hour_Vol_2023":495.1894999999999,"LOS_2023":"TCEA","Growth_Rate_2023":0.01464366061205235,"U_ID":"9","color":"#FF10F0","width":3.1580897551714107,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FF10F0; margin-bottom: 4px;'>Cove Rd (ID: 29)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Federal Hwy  Dixie Hwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C4<br><span style='color: #71717a;'>AADT 2024: \u003c/span>13,049<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>682<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>D\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #29\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FF10F0; margin: 4px 0;'>Cove Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Federal Hwy  Dixie Hwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C4\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>695\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FF10F0;'>13,049\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>682\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>D\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.2068862915039,27.133939743041992],[-80.20682525634766,27.13385009765625],[-80.20661926269531,27.133909225463867],[-80.20602416992188,27.1341495513916],[-80.20447540283203,27.1347599029541],[-80.20439147949219,27.134849548339844],[-80.20431518554688,27.134859085083008],[-80.2031478881836,27.135318756103516],[-80.20257568359375,27.135549545288086],[-80.20246887207031,27.135629653930664],[-80.20196533203125,27.135818481445313],[-80.20030975341797,27.136478424072266],[-80.1993408203125,27.136869430541992],[-80.19723510742188,27.1376895904541],[-80.19400024414063,27.138959884643555],[-80.1913070678711,27.140018463134766],[-80.19053649902344,27.140348434448242],[-80.19036102294922,27.14035987854004],[-80.19020080566406,27.140419006347656],[-80.19012451171875,27.140419006347656],[-80.19007873535156,27.14042854309082],[-80.19002532958984,27.140499114990234],[-80.1900405883789,27.140588760375977],[-80.19012451171875,27.14065933227539],[-80.190185546875,27.14065933227539],[-80.19024658203125,27.1406192779541],[-80.19027709960938,27.140579223632813],[-80.1902847290039,27.140520095825195]]}},{"type":"Feature","properties":{"ID":32,"Name":"Dixie Hwy","From":"Water St","To":"Lares Ave","Context_Class":"C4","Service_Capacity":695.0,"AADT_2024":4280.0,"Peak_Hour_Vol_2024":224.0,"LOS_2024":"TCEA","Growth_Rate_2024":0.046,"Comparison_2023":null,"Context_Class_2023":"C2","Service_Capacity_2023":730.0,"AADT_2023":4301.0,"Peak_Hour_Vol_2023":239.99579999999995,"LOS_2023":"TCEA","Growth_Rate_2023":0.05928517715833137,"U_ID":"47","color":"#FF10F0","width":2.352498047802055,"los_color":"#FF073A","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FF10F0; margin-bottom: 4px;'>Dixie Hwy (ID: 32)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Water St  Lares Ave\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C4<br><span style='color: #71717a;'>AADT 2024: \u003c/span>4,280<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>224<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FF073A; font-weight: bold;'>TCEA\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #32\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FF10F0; margin: 4px 0;'>Dixie Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Water St  Lares Ave\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C4\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>695\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FF10F0;'>4,280\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>224\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FF073A;'>TCEA\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>4.6%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.1220474243164,27.052148818969727],[-80.12675476074219,27.05739974975586],[-80.12899780273438,27.05990982055664],[-80.12928009033203,27.060258865356445],[-80.12989044189453,27.06097984313965],[-80.13058471679688,27.06178855895996],[-80.13103485107422,27.062299728393555],[-80.1316146850586,27.062910079956055],[-80.13170623779297,27.06300926208496],[-80.13175964355469,27.063030242919922],[-80.1321792602539,27.063499450683594],[-80.13322448730469,27.064668655395508],[-80.13512420654297,27.066789627075195],[-80.13530731201172,27.06698989868164]]}},{"type":"Feature","properties":{"ID":37,"Name":"Dixie Hwy","From":"Salerno Rd","To":"St. Lucie Blvd","Context_Class":"C4","Service_Capacity":870.0,"AADT_2024":16984.0,"Peak_Hour_Vol_2024":887.0,"LOS_2024":"TCEA","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C4","Service_Capacity_2023":870.0,"AADT_2023":16817.0,"Peak_Hour_Vol_2023":703.28694,"LOS_2023":"TCEA","Growth_Rate_2023":0.005,"U_ID":"52","color":"#FF10F0","width":3.5195908805561085,"los_color":"#FF073A","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FF10F0; margin-bottom: 4px;'>Dixie Hwy (ID: 37)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Salerno Rd  St. Lucie Blvd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C4<br><span style='color: #71717a;'>AADT 2024: \u003c/span>16,984<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>887<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FF073A; font-weight: bold;'>TCEA\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #37\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FF10F0; margin: 4px 0;'>Dixie Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Salerno Rd  St. Lucie Blvd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C4\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>870\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FF10F0;'>16,984\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>887\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FF073A;'>TCEA\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.19747924804688,27.14596939086914],[-80.19745635986328,27.145999908447266],[-80.19762420654297,27.146108627319336],[-80.1981201171875,27.146459579467773],[-80.19861602783203,27.146820068359375],[-80.1998291015625,27.1476993560791],[-80.20008087158203,27.14790916442871],[-80.20042419433594,27.14811897277832],[-80.20133972167969,27.148618698120117],[-80.20145416259766,27.148710250854492],[-80.20153045654297,27.148788452148438],[-80.2016372680664,27.14900016784668],[-80.20208740234375,27.14933967590332],[-80.20218658447266,27.14935874938965],[-80.20223999023438,27.14931869506836],[-80.20228576660156,27.149269104003906],[-80.20230102539063,27.14920997619629]]}},{"type":"Feature","properties":{"ID":39,"Name":"Dixie Hwy","From":"Jefferson St","To":"Indian St","Context_Class":"C4","Service_Capacity":1345.0,"AADT_2024":17123.0,"Peak_Hour_Vol_2024":895.0,"LOS_2024":"TCEA","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C4","Service_Capacity_2023":1790.0,"AADT_2023":17816.0,"Peak_Hour_Vol_2023":781.40976,"LOS_2023":"TCEA","Growth_Rate_2023":0.005,"U_ID":"54","color":"#FF10F0","width":3.532360551821286,"los_color":"#FF073A","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FF10F0; margin-bottom: 4px;'>Dixie Hwy (ID: 39)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Jefferson St  Indian St\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C4<br><span style='color: #71717a;'>AADT 2024: \u003c/span>17,123<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>895<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FF073A; font-weight: bold;'>TCEA\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #39\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FF10F0; margin: 4px 0;'>Dixie Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Jefferson St  Indian St\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C4\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1345\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FF10F0;'>17,123\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>895\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FF073A;'>TCEA\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.21515655517578,27.16135025024414],[-80.21588897705078,27.162078857421875],[-80.21707153320313,27.163278579711914],[-80.21924591064453,27.165470123291016],[-80.2217788696289,27.168039321899414]]}},{"type":"Feature","properties":{"ID":41,"Name":"Dixie Hwy","From":"Monterey Rd","To":"Fifth St","Context_Class":"C4","Service_Capacity":695.0,"AADT_2024":6989.0,"Peak_Hour_Vol_2024":365.0,"LOS_2024":"D","Growth_Rate_2024":0.008,"Comparison_2023":null,"Context_Class_2023":"C4","Service_Capacity_2023":870.0,"AADT_2023":6220.0,"Peak_Hour_Vol_2023":346.32959999999997,"LOS_2023":"D","Growth_Rate_2023":0.005,"U_ID":"57","color":"#FF10F0","width":2.601368835265116,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FF10F0; margin-bottom: 4px;'>Dixie Hwy (ID: 41)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Monterey Rd  Fifth St\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C4<br><span style='color: #71717a;'>AADT 2024: \u003c/span>6,989<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>365<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>D\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #41\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FF10F0; margin: 4px 0;'>Dixie Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Monterey Rd  Fifth St\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C4\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>695\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FF10F0;'>6,989\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>365\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>D\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.8%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.23624420166016,27.181379318237305],[-80.2362289428711,27.181398391723633],[-80.23668670654297,27.181819915771484],[-80.23778533935547,27.182838439941406],[-80.23786926269531,27.182878494262695],[-80.23802947998047,27.183029174804688],[-80.23835754394531,27.183319091796875],[-80.23928833007813,27.184249877929688],[-80.24089813232422,27.18587875366211],[-80.24269104003906,27.18768882751465],[-80.24279022216797,27.187789916992188],[-80.24298858642578,27.187938690185547],[-80.24319458007813,27.187990188598633],[-80.24346923828125,27.188030242919922],[-80.24359130859375,27.188079833984375],[-80.24378967285156,27.18824005126953],[-80.24528503417969,27.189748764038086],[-80.24720001220703,27.191659927368164],[-80.24842834472656,27.192890167236328],[-80.24861907958984,27.19312858581543],[-80.24935913085938,27.193880081176758],[-80.2501449584961,27.194669723510742],[-80.25029754638672,27.194778442382813],[-80.25133514404297,27.195819854736328]]}},{"type":"Feature","properties":{"ID":42,"Name":"Dixie Hwy","From":"Savannah Rd","To":"Indian River Dr","Context_Class":"C4","Service_Capacity":870.0,"AADT_2024":6558.0,"Peak_Hour_Vol_2024":343.0,"LOS_2024":"TCEA","Growth_Rate_2024":0.04,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":890.0,"AADT_2023":5353.0,"Peak_Hour_Vol_2023":231.03548000000004,"LOS_2023":"TCEA","Growth_Rate_2023":0.005,"U_ID":"136","color":"#FF10F0","width":2.5617736675292067,"los_color":"#FF073A","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FF10F0; margin-bottom: 4px;'>Dixie Hwy (ID: 42)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Savannah Rd  Indian River Dr\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C4<br><span style='color: #71717a;'>AADT 2024: \u003c/span>6,558<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>343<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FF073A; font-weight: bold;'>TCEA\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #42\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FF10F0; margin: 4px 0;'>Dixie Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Savannah Rd  Indian River Dr\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C4\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>870\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FF10F0;'>6,558\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>343\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FF073A;'>TCEA\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>4%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.24734497070313,27.220529556274414],[-80.24655151367188,27.22031021118164],[-80.24639892578125,27.22024917602539],[-80.24626922607422,27.220178604125977],[-80.24607849121094,27.22003936767578],[-80.24573516845703,27.219749450683594],[-80.24562072753906,27.219688415527344],[-80.24543762207031,27.21963882446289],[-80.24486541748047,27.2196102142334],[-80.24109649658203,27.2195987701416],[-80.24009704589844,27.219589233398438],[-80.23981475830078,27.219558715820313],[-80.23941040039063,27.219558715820313],[-80.2379150390625,27.219558715820313],[-80.23727416992188,27.21954917907715],[-80.23722076416016,27.21953010559082],[-80.23719787597656,27.21950912475586],[-80.23716735839844,27.21949005126953],[-80.23706817626953,27.219478607177734],[-80.23703002929688,27.219499588012695],[-80.23694610595703,27.219539642333984],[-80.23565673828125,27.21954917907715],[-80.23403930664063,27.219539642333984],[-80.23384094238281,27.219579696655273],[-80.23358917236328,27.21957015991211],[-80.23313903808594,27.21957015991211],[-80.23204040527344,27.21957015991211],[-80.2318115234375,27.219589233398438],[-80.2316665649414,27.21963882446289],[-80.2315902709961,27.219688415527344],[-80.2314682006836,27.219799041748047],[-80.23139953613281,27.219900131225586],[-80.23136901855469,27.219980239868164],[-80.23133850097656,27.220138549804688],[-80.23133850097656,27.22062873840332],[-80.2313461303711,27.221458435058594],[-80.23136138916016,27.22182846069336],[-80.23131561279297,27.222089767456055],[-80.23125457763672,27.2222900390625],[-80.23114776611328,27.222518920898438],[-80.23099517822266,27.222719192504883],[-80.2308349609375,27.222858428955078],[-80.23062133789063,27.222999572753906],[-80.23047637939453,27.223058700561523],[-80.23028564453125,27.223129272460938],[-80.23015594482422,27.223159790039063],[-80.22993469238281,27.22317886352539],[-80.22889709472656,27.223159790039063],[-80.22625732421875,27.223129272460938],[-80.22290802001953,27.223079681396484],[-80.22139739990234,27.22304916381836],[-80.22097778320313,27.22307014465332],[-80.22063446044922,27.223159790039063],[-80.22042846679688,27.223119735717773],[-80.22039794921875,27.223098754882813],[-80.22039031982422,27.22308921813965],[-80.2203598022461,27.22307014465332],[-80.22032165527344,27.22304916381836],[-80.2202377319336,27.22304916381836],[-80.22016906738281,27.223079681396484],[-80.2201156616211,27.2231502532959],[-80.2201156616211,27.22319984436035],[-80.22014617919922,27.223249435424805],[-80.22019958496094,27.223299026489258],[-80.2202377319336,27.22332000732422],[-80.22026062011719,27.22332000732422],[-80.22026062011719,27.224519729614258],[-80.22027587890625,27.22464942932129],[-80.22026062011719,27.22498893737793],[-80.22020721435547,27.22610855102539],[-80.22017669677734,27.228389739990234],[-80.22016906738281,27.228988647460938],[-80.22013092041016,27.229249954223633],[-80.22003936767578,27.229389190673828],[-80.21987915039063,27.229528427124023],[-80.2197265625,27.2296085357666],[-80.21943664550781,27.229719161987305],[-80.21929931640625,27.229768753051758],[-80.2191162109375,27.2298583984375],[-80.21888732910156,27.230098724365234],[-80.21882629394531,27.23027992248535],[-80.21881866455078,27.23073959350586],[-80.21881103515625,27.231609344482422],[-80.21882629394531,27.232439041137695],[-80.21871948242188,27.23265838623047],[-80.21873474121094,27.232698440551758]]}},{"type":"Feature","properties":{"ID":47,"Name":"Federal Hwy","From":"Olympus St","To":"Bridge Rd","Context_Class":"C4","Service_Capacity":1790.0,"AADT_2024":18100.0,"Peak_Hour_Vol_2024":946.0,"LOS_2024":"C","Growth_Rate_2024":0.01,"Comparison_2023":null,"Context_Class_2023":"C3R","Service_Capacity_2023":1850.0,"AADT_2023":16983.495,"Peak_Hour_Vol_2023":876.3483419999999,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"106-2","color":"#FF10F0","width":3.6221157232319214,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FF10F0; margin-bottom: 4px;'>Federal Hwy (ID: 47)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Olympus St  Bridge Rd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C4<br><span style='color: #71717a;'>AADT 2024: \u003c/span>18,100<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>946<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #47\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FF10F0; margin: 4px 0;'>Federal Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Olympus St  Bridge Rd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C4\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1790\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FF10F0;'>18,100\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>946\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>1%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.13499450683594,27.056028366088867],[-80.13530731201172,27.056598663330078],[-80.13555145263672,27.05712890625],[-80.13623046875,27.05875015258789],[-80.13658142089844,27.059518814086914],[-80.13668823242188,27.059490203857422]]}},{"type":"Feature","properties":{"ID":48,"Name":"Federal Hwy","From":"Bridge Rd","To":"Dharlys St","Context_Class":"C4","Service_Capacity":1790.0,"AADT_2024":23757.0,"Peak_Hour_Vol_2024":1241.0,"LOS_2024":"D","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":1810.0,"AADT_2023":23762.0,"Peak_Hour_Vol_2023":1551.1833599999998,"LOS_2023":"D","Growth_Rate_2023":0.005,"U_ID":"107","color":"#FF10F0","width":4.141813783283061,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FF10F0; margin-bottom: 4px;'>Federal Hwy (ID: 48)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Bridge Rd  Dharlys St\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C4<br><span style='color: #71717a;'>AADT 2024: \u003c/span>23,757<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>1241<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>D\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #48\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FF10F0; margin: 4px 0;'>Federal Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Bridge Rd  Dharlys St\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C4\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1790\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FF10F0;'>23,757\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>1241\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>D\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.13666534423828,27.059429168701172],[-80.13655090332031,27.05946922302246],[-80.13658142089844,27.059518814086914],[-80.13674926757813,27.05990982055664],[-80.13701629638672,27.060529708862305],[-80.13775634765625,27.062179565429688],[-80.13811492919922,27.06300926208496],[-80.13920593261719,27.06553840637207],[-80.1402816772461,27.068029403686523],[-80.14193725585938,27.071849822998047],[-80.14323425292969,27.074838638305664],[-80.14427947998047,27.07720947265625],[-80.14550018310547,27.080039978027344],[-80.14586639404297,27.080888748168945],[-80.14635467529297,27.08186912536621],[-80.14656066894531,27.082239151000977],[-80.1467514038086,27.082550048828125],[-80.14727783203125,27.083358764648438]]}},{"type":"Feature","properties":{"ID":56,"Name":"Federal Hwy","From":"Monterey Rd","To":"Cutoff Rd","Context_Class":"C4","Service_Capacity":2810.0,"AADT_2024":35064.0,"Peak_Hour_Vol_2024":1832.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C4","Service_Capacity_2023":2810.0,"AADT_2023":36743.0,"Peak_Hour_Vol_2023":1752.6411,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"113","color":"#FF10F0","width":5.180566826415152,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FF10F0; margin-bottom: 4px;'>Federal Hwy (ID: 56)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Monterey Rd  Cutoff Rd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C4<br><span style='color: #71717a;'>AADT 2024: \u003c/span>35,064<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>1832<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #56\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FF10F0; margin: 4px 0;'>Federal Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Monterey Rd  Cutoff Rd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C4\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>2810\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FF10F0;'>35,064\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>1832\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.23690795898438,27.17790985107422],[-80.23572540283203,27.17671012878418],[-80.23523712158203,27.17624855041504],[-80.2332763671875,27.174259185791016],[-80.2322769165039,27.173259735107422],[-80.23162841796875,27.172590255737305],[-80.2314453125,27.1723690032959],[-80.23080444335938,27.171598434448242],[-80.23030853271484,27.17091941833496],[-80.22966003417969,27.169919967651367],[-80.22891998291016,27.168668746948242],[-80.22856903076172,27.16815948486328],[-80.22773742675781,27.16683006286621],[-80.22718811035156,27.165958404541016],[-80.22713470458984,27.16581916809082],[-80.22669982910156,27.16510009765625],[-80.22644805908203,27.164709091186523],[-80.22624969482422,27.164409637451172],[-80.22561645507813,27.16343879699707],[-80.22439575195313,27.161489486694336],[-80.22413635253906,27.161039352416992],[-80.22357940673828,27.160139083862305],[-80.22269439697266,27.158769607543945],[-80.22151947021484,27.156858444213867],[-80.2202377319336,27.15483856201172],[-80.22019958496094,27.15471839904785],[-80.219970703125,27.154359817504883],[-80.2196044921875,27.153779983520508],[-80.21875,27.152408599853516],[-80.2177505493164,27.15081024169922],[-80.2168960571289,27.14946937561035],[-80.21614074707031,27.14822006225586],[-80.21559143066406,27.147310256958008],[-80.2151107788086,27.14657974243164],[-80.21487426757813,27.14617919921875],[-80.2145004272461,27.145599365234375],[-80.21366119384766,27.14423942565918],[-80.21297454833984,27.143138885498047],[-80.21186065673828,27.141319274902344],[-80.21038055419922,27.138938903808594],[-80.2092514038086,27.137128829956055],[-80.20899963378906,27.13671875],[-80.2081069946289,27.13538932800293],[-80.2077407836914,27.134899139404297],[-80.20750427246094,27.1346492767334],[-80.20691680908203,27.133970260620117],[-80.20661926269531,27.133628845214844],[-80.2062759399414,27.133270263671875],[-80.20574951171875,27.132780075073242],[-80.20539855957031,27.132478713989258],[-80.20487976074219,27.13205909729004],[-80.20427703857422,27.131589889526367],[-80.2036361694336,27.131168365478516],[-80.20263671875,27.130529403686523],[-80.20186614990234,27.13010025024414],[-80.19661712646484,27.127168655395508],[-80.19515991210938,27.1263484954834],[-80.19229125976563,27.124759674072266],[-80.18647766113281,27.12150001525879],[-80.18508911132813,27.120729446411133],[-80.18460083007813,27.12044906616211],[-80.18296813964844,27.119529724121094],[-80.17982482910156,27.117769241333008],[-80.17904663085938,27.117319107055664],[-80.17813110351563,27.116748809814453],[-80.17733001708984,27.116138458251953],[-80.17655944824219,27.115549087524414],[-80.17568969726563,27.11475944519043],[-80.17277526855469,27.111989974975586],[-80.17169952392578,27.11096954345703],[-80.16989135742188,27.10921859741211],[-80.16954803466797,27.10887908935547],[-80.1690444946289,27.108388900756836],[-80.16746520996094,27.106840133666992],[-80.16613006591797,27.10552978515625],[-80.16455078125,27.104000091552734],[-80.16344451904297,27.1028995513916],[-80.16136169433594,27.100839614868164],[-80.16019439697266,27.099699020385742],[-80.15956115722656,27.09906005859375],[-80.1590805053711,27.09851837158203],[-80.15825653076172,27.09747886657715],[-80.15702819824219,27.09587860107422],[-80.154541015625,27.092639923095703],[-80.14840698242188,27.084619522094727],[-80.14750671386719,27.08344841003418],[-80.14688873291016,27.082469940185547],[-80.14672088623047,27.082189559936523],[-80.14657592773438,27.081989288330078],[-80.14649963378906,27.081809997558594],[-80.14599609375,27.08078956604004],[-80.14569091796875,27.080068588256836],[-80.14533996582031,27.079288482666016],[-80.14384460449219,27.07583999633789],[-80.14310455322266,27.074169158935547],[-80.14266967773438,27.073148727416992],[-80.14048767089844,27.06814956665039],[-80.13935089111328,27.065519332885742],[-80.13887786865234,27.06441879272461],[-80.13842010498047,27.063379287719727],[-80.13762664794922,27.061569213867188],[-80.13713073730469,27.060388565063477]]}},{"type":"Feature","properties":{"ID":57,"Name":"Federal Hwy","From":"Cutoff Rd","To":"Kanner Hwy","Context_Class":"C4","Service_Capacity":2810.0,"AADT_2024":39500.0,"Peak_Hour_Vol_2024":2064.0,"LOS_2024":"C","Growth_Rate_2024":0.039,"Comparison_2023":null,"Context_Class_2023":"C4","Service_Capacity_2023":2810.0,"AADT_2023":33378.0,"Peak_Hour_Vol_2023":1336.45512,"LOS_2023":"C","Growth_Rate_2023":0.00579020752389047,"U_ID":"114","color":"#FF10F0","width":5.588093889237648,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FF10F0; margin-bottom: 4px;'>Federal Hwy (ID: 57)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Cutoff Rd  Kanner Hwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C4<br><span style='color: #71717a;'>AADT 2024: \u003c/span>39,500<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>2064<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #57\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FF10F0; margin: 4px 0;'>Federal Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Cutoff Rd  Kanner Hwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C4\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>2810\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FF10F0;'>39,500\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>2064\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>3.9%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.13713073730469,27.060388565063477],[-80.13668823242188,27.059419631958008],[-80.13655090332031,27.05946922302246],[-80.13658142089844,27.059518814086914],[-80.13674926757813,27.05990982055664],[-80.13701629638672,27.060529708862305],[-80.13775634765625,27.062179565429688],[-80.1386947631836,27.06437873840332],[-80.13970947265625,27.066699981689453],[-80.14138793945313,27.070579528808594],[-80.1426773071289,27.07353973388672],[-80.14379119873047,27.07608985900879],[-80.14427947998047,27.07720947265625],[-80.14525604248047,27.079479217529297],[-80.14550018310547,27.080039978027344],[-80.14586639404297,27.080888748168945],[-80.14635467529297,27.08186912536621],[-80.14656066894531,27.082239151000977],[-80.1467514038086,27.082550048828125],[-80.14727783203125,27.083358764648438],[-80.14820861816406,27.084569931030273],[-80.14956665039063,27.08635902404785],[-80.15496826171875,27.093429565429688],[-80.15853881835938,27.09807014465332],[-80.15898132324219,27.09861946105957],[-80.15921020507813,27.098899841308594],[-80.15943145751953,27.099088668823242],[-80.15963745117188,27.09929847717285],[-80.15972137451172,27.09937858581543],[-80.16043853759766,27.100109100341797],[-80.16146087646484,27.101119995117188],[-80.1635513305664,27.10318946838379],[-80.16568756103516,27.105268478393555],[-80.16754913330078,27.107099533081055],[-80.17071533203125,27.110219955444336],[-80.17103576660156,27.110538482666016],[-80.17156982421875,27.111059188842773],[-80.17161560058594,27.11113929748535],[-80.17218017578125,27.1116886138916],[-80.17242431640625,27.1119384765625],[-80.17330169677734,27.11277961730957],[-80.17557525634766,27.11496925354004],[-80.17630004882813,27.115650177001953],[-80.1773910522461,27.11650848388672],[-80.1781005859375,27.11701011657715],[-80.17919921875,27.1176700592041],[-80.18212890625,27.119308471679688],[-80.18746948242188,27.122289657592773],[-80.19247436523438,27.12512969970703],[-80.19310760498047,27.125459671020508],[-80.19375610351563,27.125829696655273],[-80.19490814208984,27.1264591217041],[-80.19498443603516,27.12653923034668],[-80.19567108154297,27.126930236816406],[-80.19636535644531,27.127300262451172],[-80.19690704345703,27.127599716186523],[-80.19851684570313,27.128469467163086],[-80.20025634765625,27.12946891784668],[-80.2013168334961,27.130069732666016],[-80.2025375366211,27.130748748779297],[-80.2032470703125,27.131168365478516],[-80.20399475097656,27.13165855407715],[-80.20450592041016,27.132028579711914],[-80.20527648925781,27.13266944885254],[-80.20584106445313,27.133169174194336],[-80.2060546875,27.133338928222656],[-80.20671844482422,27.134008407592773],[-80.2072982788086,27.13469886779785],[-80.20804595947266,27.13566017150879],[-80.20862579345703,27.136539459228516],[-80.20917510986328,27.137409210205078],[-80.21128845214844,27.140789031982422],[-80.21192169189453,27.141788482666016],[-80.212890625,27.143369674682617],[-80.21337890625,27.144128799438477],[-80.21430969238281,27.14560890197754],[-80.21487426757813,27.14651870727539],[-80.21549987792969,27.14752960205078],[-80.21717834472656,27.15022850036621],[-80.21754455566406,27.150848388671875],[-80.21804809570313,27.151639938354492],[-80.21891021728516,27.15300941467285],[-80.21952819824219,27.153959274291992],[-80.22008514404297,27.15489959716797],[-80.2219009399414,27.157798767089844],[-80.2234878540039,27.160369873046875],[-80.22652435302734,27.16524887084961],[-80.22821807861328,27.167919158935547],[-80.22966003417969,27.170228958129883],[-80.2302474975586,27.171138763427734],[-80.23099517822266,27.17214012145996],[-80.23182678222656,27.173059463500977],[-80.2333755493164,27.17462921142578],[-80.23797607421875,27.17926025390625],[-80.24042510986328,27.181739807128906],[-80.24311828613281,27.18446922302246],[-80.24565887451172,27.18703842163086],[-80.24628448486328,27.187660217285156],[-80.24665832519531,27.187990188598633],[-80.2470703125,27.188289642333984],[-80.24737548828125,27.18846893310547],[-80.24763488769531,27.188629150390625],[-80.24800109863281,27.18878936767578],[-80.24923706054688,27.18937873840332],[-80.25093841552734,27.190189361572266],[-80.25177001953125,27.19057846069336],[-80.2520980834961,27.19072914123535],[-80.25309753417969,27.191219329833984],[-80.25312805175781,27.19108009338379],[-80.25299835205078,27.19101905822754]]}},{"type":"Feature","properties":{"ID":58,"Name":"Federal Hwy","From":"Kanner Hwy","To":"Palm City Rd","Context_Class":"C4","Service_Capacity":2810.0,"AADT_2024":48048.0,"Peak_Hour_Vol_2024":2511.0,"LOS_2024":"D","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C4","Service_Capacity_2023":2810.0,"AADT_2023":47809.0,"Peak_Hour_Vol_2023":1792.8375,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"115","color":"#FF10F0","width":6.373382737976757,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FF10F0; margin-bottom: 4px;'>Federal Hwy (ID: 58)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Kanner Hwy  Palm City Rd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C4<br><span style='color: #71717a;'>AADT 2024: \u003c/span>48,048<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>2511<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>D\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #58\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FF10F0; margin: 4px 0;'>Federal Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Kanner Hwy  Palm City Rd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C4\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>2810\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FF10F0;'>48,048\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>2511\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>D\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.25299835205078,27.19101905822754],[-80.25299072265625,27.19114875793457],[-80.25309753417969,27.191219329833984],[-80.25408172607422,27.191679000854492],[-80.25532531738281,27.19226837158203],[-80.25560760498047,27.19240951538086],[-80.255859375,27.19256019592285],[-80.25605010986328,27.19270896911621],[-80.25619506835938,27.19285011291504],[-80.25643920898438,27.193119049072266],[-80.2565689086914,27.193309783935547],[-80.25667572021484,27.19322967529297]]}},{"type":"Feature","properties":{"ID":59,"Name":"Federal Hwy","From":"Palm City Rd","To":"Joan Jefferson Wy","Context_Class":"C4","Service_Capacity":2810.0,"AADT_2024":54164.0,"Peak_Hour_Vol_2024":2830.0,"LOS_2024":"E","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C4","Service_Capacity_2023":2810.0,"AADT_2023":56184.0,"Peak_Hour_Vol_2023":2177.69184,"LOS_2023":"C","Growth_Rate_2023":0.00581014294572934,"U_ID":"179","color":"#FF10F0","width":6.935248273644562,"los_color":"#FF073A","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FF10F0; margin-bottom: 4px;'>Federal Hwy (ID: 59)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Palm City Rd  Joan Jefferson Wy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C4<br><span style='color: #71717a;'>AADT 2024: \u003c/span>54,164<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>2830<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FF073A; font-weight: bold;'>E\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #59\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FF10F0; margin: 4px 0;'>Federal Hwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Palm City Rd  Joan Jefferson Wy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C4\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>2810\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FF10F0;'>54,164\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>2830\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FF073A;'>E\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.25667572021484,27.19322967529297],[-80.2565689086914,27.193309783935547],[-80.25666809082031,27.193479537963867],[-80.25677490234375,27.193708419799805],[-80.25688171386719,27.194028854370117],[-80.25691986083984,27.194210052490234],[-80.2569351196289,27.194408416748047],[-80.2569351196289,27.195188522338867],[-80.25691986083984,27.196178436279297],[-80.25689697265625,27.198379516601563],[-80.25695037841797,27.198938369750977],[-80.25696563720703,27.199199676513672],[-80.2569351196289,27.199199676513672]]}},{"type":"Feature","properties":{"ID":82,"Name":"Indian St","From":"Federal Hwy","To":"Commerce Ave","Context_Class":"C4","Service_Capacity":1790.0,"AADT_2024":23852.0,"Peak_Hour_Vol_2024":1246.0,"LOS_2024":"D","Growth_Rate_2024":0.013,"Comparison_2023":null,"Context_Class_2023":"C4","Service_Capacity_2023":1790.0,"AADT_2023":24486.0,"Peak_Hour_Vol_2023":1071.01764,"LOS_2023":"C","Growth_Rate_2023":0.02287525575424731,"U_ID":"69","color":"#FF10F0","width":4.150541256449909,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FF10F0; margin-bottom: 4px;'>Indian St (ID: 82)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Federal Hwy  Commerce Ave\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C4<br><span style='color: #71717a;'>AADT 2024: \u003c/span>23,852<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>1246<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>D\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #82\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FF10F0; margin: 4px 0;'>Indian St\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Federal Hwy  Commerce Ave\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C4\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1790\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FF10F0;'>23,852\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>1246\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>D\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>1.3%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.22718811035156,27.165958404541016],[-80.22713470458984,27.16581916809082],[-80.22669982910156,27.16510009765625],[-80.22644805908203,27.164709091186523],[-80.2258071899414,27.163740158081055],[-80.22554779052734,27.163339614868164],[-80.22518920898438,27.162769317626953],[-80.22486114501953,27.16223907470703],[-80.2247314453125,27.162269592285156],[-80.22461700439453,27.162309646606445],[-80.22444915771484,27.162368774414063],[-80.22390747070313,27.162578582763672],[-80.22171783447266,27.16343879699707],[-80.22306060791016,27.16499900817871],[-80.22332000732422,27.165298461914063],[-80.22354888916016,27.165470123291016],[-80.22371673583984,27.165550231933594],[-80.22420501708984,27.165729522705078],[-80.22449493408203,27.165929794311523],[-80.22463989257813,27.16606903076172],[-80.2247543334961,27.166250228881836],[-80.22493743896484,27.166568756103516],[-80.22503662109375,27.166778564453125]]}},{"type":"Feature","properties":{"ID":83,"Name":"Indian St","From":"Commerce Ave","To":"Dixie Hwy","Context_Class":"C4","Service_Capacity":1790.0,"AADT_2024":24137.0,"Peak_Hour_Vol_2024":1261.0,"LOS_2024":"D","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C4","Service_Capacity_2023":1790.0,"AADT_2023":25398.0,"Peak_Hour_Vol_2023":1122.5916000000002,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"70","color":"#FF10F0","width":4.176723675950452,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FF10F0; margin-bottom: 4px;'>Indian St (ID: 83)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Commerce Ave  Dixie Hwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C4<br><span style='color: #71717a;'>AADT 2024: \u003c/span>24,137<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>1261<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>D\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #83\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FF10F0; margin: 4px 0;'>Indian St\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Commerce Ave  Dixie Hwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C4\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1790\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FF10F0;'>24,137\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>1261\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>D\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.22503662109375,27.166778564453125],[-80.22666931152344,27.16615867614746],[-80.22718811035156,27.165958404541016],[-80.22713470458984,27.16581916809082],[-80.2269287109375,27.1658992767334],[-80.2249984741211,27.166669845581055],[-80.22377014160156,27.16714859008789],[-80.2216796875,27.16792869567871],[-80.2217788696289,27.168039321899414]]}},{"type":"Feature","properties":{"ID":84,"Name":"Indian St","From":"Dixie Hwy","To":"St Lucie Blvd","Context_Class":"C4","Service_Capacity":695.0,"AADT_2024":5810.0,"Peak_Hour_Vol_2024":304.0,"LOS_2024":"D","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C4","Service_Capacity_2023":870.0,"AADT_2023":6583.0,"Peak_Hour_Vol_2023":334.94304,"LOS_2023":"TCEA","Growth_Rate_2023":0.005,"U_ID":"71","color":"#FF10F0","width":2.4930562998576042,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FF10F0; margin-bottom: 4px;'>Indian St (ID: 84)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Dixie Hwy  St Lucie Blvd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C4<br><span style='color: #71717a;'>AADT 2024: \u003c/span>5,810<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>304<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>D\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #84\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FF10F0; margin: 4px 0;'>Indian St\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Dixie Hwy  St Lucie Blvd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C4\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>695\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FF10F0;'>5,810\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>304\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>D\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.2217788696289,27.168039321899414],[-80.2216796875,27.16792869567871],[-80.22116088867188,27.168128967285156],[-80.21939086914063,27.1688289642334],[-80.21853637695313,27.16916847229004],[-80.21786499023438,27.169458389282227],[-80.21773529052734,27.169538497924805],[-80.21495819091797,27.170608520507813],[-80.21142578125,27.17198944091797],[-80.21033477783203,27.172409057617188]]}},{"type":"Feature","properties":{"ID":87,"Name":"Indian River Dr","From":"Jensen Beach Blvd","To":"Causeway Blvd","Context_Class":"C4","Service_Capacity":695.0,"AADT_2024":5823.0,"Peak_Hour_Vol_2024":304.0,"LOS_2024":"TCEA","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C4","Service_Capacity_2023":695.0,"AADT_2023":5911.0,"Peak_Hour_Vol_2023":317.36159,"LOS_2023":"TCEA","Growth_Rate_2023":0.005,"U_ID":"138","color":"#FF10F0","width":2.4942505856593837,"los_color":"#FF073A","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FF10F0; margin-bottom: 4px;'>Indian River Dr (ID: 87)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Jensen Beach Blvd  Causeway Blvd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C4<br><span style='color: #71717a;'>AADT 2024: \u003c/span>5,823<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>304<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FF073A; font-weight: bold;'>TCEA\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #87\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FF10F0; margin: 4px 0;'>Indian River Dr\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Jensen Beach Blvd  Causeway Blvd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C4\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>695\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FF10F0;'>5,823\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>304\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FF073A;'>TCEA\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.22526550292969,27.24445915222168],[-80.22529602050781,27.244449615478516],[-80.22534942626953,27.244569778442383],[-80.22557067871094,27.245208740234375],[-80.22579956054688,27.245729446411133],[-80.22594451904297,27.246129989624023],[-80.22622680664063,27.246898651123047],[-80.22638702392578,27.247268676757813],[-80.22657775878906,27.247650146484375],[-80.22721862792969,27.248859405517578],[-80.2275161743164,27.249460220336914],[-80.22764587402344,27.249799728393555],[-80.22779083251953,27.2502384185791],[-80.22782135009766,27.250438690185547],[-80.22782897949219,27.250568389892578],[-80.2278060913086,27.250598907470703],[-80.2278060913086,27.250638961791992],[-80.22782897949219,27.25071907043457],[-80.22786712646484,27.250789642333984]]}},{"type":"Feature","properties":{"ID":94,"Name":"Jensen Beach Blvd","From":"Savannah Rd","To":"Skyline Dr","Context_Class":"C4","Service_Capacity":1790.0,"AADT_2024":21149.0,"Peak_Hour_Vol_2024":1105.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C4","Service_Capacity_2023":1790.0,"AADT_2023":21241.0,"Peak_Hour_Vol_2023":994.0788,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"17","color":"#FF10F0","width":3.9022216778184378,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FF10F0; margin-bottom: 4px;'>Jensen Beach Blvd (ID: 94)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Savannah Rd  Skyline Dr\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C4<br><span style='color: #71717a;'>AADT 2024: \u003c/span>21,149<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>1105<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #94\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FF10F0; margin: 4px 0;'>Jensen Beach Blvd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Savannah Rd  Skyline Dr\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C4\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1790\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FF10F0;'>21,149\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>1105\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.23629760742188,27.24500846862793],[-80.23583984375,27.244918823242188],[-80.23526763916016,27.24472999572754],[-80.23477935791016,27.24452018737793],[-80.23420715332031,27.244308471679688],[-80.23381042480469,27.244218826293945],[-80.23346710205078,27.244159698486328],[-80.23259735107422,27.24403953552246],[-80.23211669921875,27.243959426879883],[-80.23143005371094,27.243789672851563],[-80.2309799194336,27.243619918823242],[-80.2305908203125,27.24350929260254],[-80.23043060302734,27.24346923828125],[-80.23020935058594,27.24342918395996],[-80.22979736328125,27.243398666381836],[-80.2292251586914,27.243410110473633]]}},{"type":"Feature","properties":{"ID":95,"Name":"Jensen Beach Blvd","From":"Skyline Dr","To":"Pineapple Way","Context_Class":"C4","Service_Capacity":1790.0,"AADT_2024":19500.0,"Peak_Hour_Vol_2024":1019.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C4","Service_Capacity_2023":1790.0,"AADT_2023":19136.0,"Peak_Hour_Vol_2023":868.5830400000001,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"18","color":"#FF10F0","width":3.750731117269679,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FF10F0; margin-bottom: 4px;'>Jensen Beach Blvd (ID: 95)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Skyline Dr  Pineapple Way\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C4<br><span style='color: #71717a;'>AADT 2024: \u003c/span>19,500<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>1019<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #95\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FF10F0; margin: 4px 0;'>Jensen Beach Blvd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Skyline Dr  Pineapple Way\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C4\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1790\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FF10F0;'>19,500\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>1019\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.2292251586914,27.243410110473633],[-80.22882843017578,27.24346923828125],[-80.22824096679688,27.243629455566406],[-80.22787475585938,27.243728637695313],[-80.22760009765625,27.2437801361084],[-80.22753143310547,27.243709564208984],[-80.22748565673828,27.243688583374023],[-80.22732543945313,27.24367904663086],[-80.22725677490234,27.24371910095215],[-80.2271957397461,27.243789672851563],[-80.22716522216797,27.243879318237305],[-80.22716522216797,27.243919372558594],[-80.22721862792969,27.24397850036621],[-80.22732543945313,27.24403953552246],[-80.22737884521484,27.24403953552246]]}},{"type":"Feature","properties":{"ID":96,"Name":"Jensen Beach Blvd","From":"Pineapple Wy","To":"Indian River Dr","Context_Class":"C4","Service_Capacity":695.0,"AADT_2024":10088.0,"Peak_Hour_Vol_2024":527.0,"LOS_2024":"TCEA","Growth_Rate_2024":0.025,"Comparison_2023":null,"Context_Class_2023":"C4","Service_Capacity_2023":870.0,"AADT_2023":9681.0,"Peak_Hour_Vol_2023":394.9848,"LOS_2023":"TCEA","Growth_Rate_2023":0.02067820559220856,"U_ID":"19","color":"#FF10F0","width":2.8860681967815527,"los_color":"#FF073A","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FF10F0; margin-bottom: 4px;'>Jensen Beach Blvd (ID: 96)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Pineapple Wy  Indian River Dr\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C4<br><span style='color: #71717a;'>AADT 2024: \u003c/span>10,088<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>527<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FF073A; font-weight: bold;'>TCEA\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #96\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FF10F0; margin: 4px 0;'>Jensen Beach Blvd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Pineapple Wy  Indian River Dr\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C4\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>695\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FF10F0;'>10,088\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>527\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FF073A;'>TCEA\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>2.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.22737884521484,27.24403953552246],[-80.22745513916016,27.244029998779297],[-80.22757720947266,27.243968963623047],[-80.22761535644531,27.243879318237305],[-80.22760009765625,27.243789672851563],[-80.22757720947266,27.243759155273438],[-80.22750091552734,27.24370002746582],[-80.22737121582031,27.24367904663086],[-80.22727966308594,27.243709564208984],[-80.22722625732422,27.243749618530273],[-80.22718048095703,27.24382972717285],[-80.22716522216797,27.243898391723633],[-80.22702026367188,27.243959426879883],[-80.22654724121094,27.244089126586914],[-80.22577667236328,27.244319915771484],[-80.22526550292969,27.24445915222168]]}},{"type":"Feature","properties":{"ID":108,"Name":"Lares Ave","From":"Bridge Rd","To":"Dixie Hwy","Context_Class":"C4","Service_Capacity":695.0,"AADT_2024":2667.0,"Peak_Hour_Vol_2024":139.0,"LOS_2024":"TCEA","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C4","Service_Capacity_2023":695.0,"AADT_2023":2692.0,"Peak_Hour_Vol_2023":138.9072,"LOS_2023":"TCEA","Growth_Rate_2023":0.005,"U_ID":"172","color":"#FF10F0","width":2.2043147402428382,"los_color":"#FF073A","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FF10F0; margin-bottom: 4px;'>Lares Ave (ID: 108)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Bridge Rd  Dixie Hwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C4<br><span style='color: #71717a;'>AADT 2024: \u003c/span>2,667<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>139<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FF073A; font-weight: bold;'>TCEA\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #108\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FF10F0; margin: 4px 0;'>Lares Ave\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Bridge Rd  Dixie Hwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C4\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>695\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FF10F0;'>2,667\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>139\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FF073A;'>TCEA\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.13282012939453,27.06079864501953],[-80.13412475585938,27.06378936767578],[-80.13475799560547,27.06523895263672],[-80.13504028320313,27.065839767456055],[-80.13526916503906,27.066429138183594],[-80.13536834716797,27.066669464111328],[-80.13545989990234,27.06686019897461],[-80.13528442382813,27.066959381103516],[-80.13530731201172,27.06698989868164]]}},{"type":"Feature","properties":{"ID":113,"Name":"Mapp Rd","From":"Martin Hwy","To":"Martin Downs Blvd","Context_Class":"C4","Service_Capacity":695.0,"AADT_2024":11734.0,"Peak_Hour_Vol_2024":613.0,"LOS_2024":"TCEA","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C4","Service_Capacity_2023":870.0,"AADT_2023":11817.844104305264,"Peak_Hour_Vol_2023":563.711163775361,"LOS_2023":"TCEA","Growth_Rate_2023":0.005,"U_ID":"78","color":"#FF10F0","width":3.037283152914517,"los_color":"#FF073A","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FF10F0; margin-bottom: 4px;'>Mapp Rd (ID: 113)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Martin Hwy  Martin Downs Blvd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C4<br><span style='color: #71717a;'>AADT 2024: \u003c/span>11,734<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>613<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FF073A; font-weight: bold;'>TCEA\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #113\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FF10F0; margin: 4px 0;'>Mapp Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Martin Hwy  Martin Downs Blvd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C4\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>695\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FF10F0;'>11,734\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>613\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FF073A;'>TCEA\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.26940155029297,27.161190032958984],[-80.2743911743164,27.161218643188477],[-80.27572631835938,27.161230087280273],[-80.27658081054688,27.161239624023438],[-80.2765884399414,27.161109924316406],[-80.27420806884766,27.161088943481445],[-80.2717514038086,27.16105842590332],[-80.26992797851563,27.161039352416992],[-80.26934814453125,27.161039352416992],[-80.26934051513672,27.161609649658203],[-80.26934814453125,27.16180992126465],[-80.26937103271484,27.16187858581543],[-80.2694091796875,27.161909103393555],[-80.2694091796875,27.162168502807617],[-80.2694091796875,27.163118362426758],[-80.26940155029297,27.16408920288086],[-80.26940155029297,27.166038513183594],[-80.26937866210938,27.16986846923828],[-80.26934051513672,27.17160987854004],[-80.26934814453125,27.172258377075195],[-80.26937103271484,27.17234992980957]]}},{"type":"Feature","properties":{"ID":119,"Name":"Martin Downs Blvd","From":"Mapp Rd","To":"Kanner Hwy","Context_Class":"C4","Service_Capacity":1790.0,"AADT_2024":35795.0,"Peak_Hour_Vol_2024":1870.0,"LOS_2024":"E","Growth_Rate_2024":0.006,"Comparison_2023":null,"Context_Class_2023":"C3C","Service_Capacity_2023":1900.0,"AADT_2023":35988.0,"Peak_Hour_Vol_2023":2131.20936,"LOS_2023":"E","Growth_Rate_2023":0.00878264331793987,"U_ID":"149","color":"#FF10F0","width":5.247722435730582,"los_color":"#FF073A","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FF10F0; margin-bottom: 4px;'>Martin Downs Blvd (ID: 119)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Mapp Rd  Kanner Hwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C4<br><span style='color: #71717a;'>AADT 2024: \u003c/span>35,795<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>1870<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FF073A; font-weight: bold;'>E\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #119\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FF10F0; margin: 4px 0;'>Martin Downs Blvd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Mapp Rd  Kanner Hwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C4\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1790\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FF10F0;'>35,795\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>1870\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FF073A;'>E\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.6%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.26937103271484,27.17234992980957],[-80.27035522460938,27.172378540039063],[-80.27180480957031,27.172399520874023],[-80.27568817138672,27.17241859436035],[-80.27899169921875,27.172449111938477],[-80.28203582763672,27.1724796295166],[-80.28570556640625,27.17249870300293],[-80.2878646850586,27.17251968383789]]}},{"type":"Feature","properties":{"ID":138,"Name":"Newfield Pkwy","From":"Farmer Dr","To":"84th / Newfield Ave","Context_Class":"C4","Service_Capacity":1790.0,"AADT_2024":6069.0,"Peak_Hour_Vol_2024":317.0,"LOS_2024":"C","Growth_Rate_2024":0.024,"Comparison_2023":null,"Context_Class_2023":"C2","Service_Capacity_2023":730.0,"AADT_2023":5815.0,"Peak_Hour_Vol_2023":507.068,"LOS_2023":"D","Growth_Rate_2023":0.01910773247378294,"U_ID":"187-2","color":"#FF10F0","width":2.5168501477545897,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FF10F0; margin-bottom: 4px;'>Newfield Pkwy (ID: 138)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Farmer Dr  84th / Newfield Ave\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C4<br><span style='color: #71717a;'>AADT 2024: \u003c/span>6,069<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>317<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #138\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FF10F0; margin: 4px 0;'>Newfield Pkwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Farmer Dr  84th / Newfield Ave\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C4\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1790\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FF10F0;'>6,069\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>317\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>2.4%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.3984375,27.078039169311523]]}},{"type":"Feature","properties":{"ID":139,"Name":"Newfield Pkwy","From":"84th / Newfield Ave","To":"Saw Palmetto Dr","Context_Class":"C4","Service_Capacity":1790.0,"AADT_2024":6069.0,"Peak_Hour_Vol_2024":317.0,"LOS_2024":"C","Growth_Rate_2024":0.024,"Comparison_2023":null,"Context_Class_2023":"C2","Service_Capacity_2023":730.0,"AADT_2023":5815.0,"Peak_Hour_Vol_2023":507.068,"LOS_2023":"D","Growth_Rate_2023":0.01910773247378294,"U_ID":"187-3","color":"#FF10F0","width":2.5168501477545897,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FF10F0; margin-bottom: 4px;'>Newfield Pkwy (ID: 139)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>84th / Newfield Ave  Saw Palmetto Dr\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C4<br><span style='color: #71717a;'>AADT 2024: \u003c/span>6,069<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>317<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #139\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FF10F0; margin: 4px 0;'>Newfield Pkwy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>84th / Newfield Ave  Saw Palmetto Dr\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C4\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1790\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FF10F0;'>6,069\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>317\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>2.4%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.3984375,27.078039169311523],[-80.40399932861328,27.078039169311523],[-80.40629577636719,27.078060150146484],[-80.40831756591797,27.078048706054688],[-80.40834045410156,27.074989318847656],[-80.40835571289063,27.073549270629883],[-80.40840911865234,27.07069969177246],[-80.40838623046875,27.067459106445313],[-80.40840148925781,27.06513023376465],[-80.4084243774414,27.059539794921875],[-80.40840911865234,27.058279037475586],[-80.40837860107422,27.0556697845459],[-80.408447265625,27.050628662109375],[-80.40850830078125,27.044679641723633],[-80.40851593017578,27.040359497070313],[-80.40853118896484,27.038978576660156],[-80.40821075439453,27.03860855102539],[-80.4080810546875,27.03853988647461],[-80.40780639648438,27.038379669189453],[-80.40773010253906,27.038379669189453],[-80.4067153930664,27.038349151611328],[-80.40591430664063,27.038330078125],[-80.40449523925781,27.038339614868164],[-80.40388488769531,27.038318634033203],[-80.40374755859375,27.03826904296875],[-80.40362548828125,27.0380802154541],[-80.40348815917969,27.037858963012695],[-80.40326690673828,27.037778854370117],[-80.4029769897461,27.03778839111328],[-80.40391540527344,27.037519454956055],[-80.4040298461914,27.037328720092773],[-80.4040756225586,27.036970138549805],[-80.40409851074219,27.036428451538086],[-80.40412902832031,27.035179138183594],[-80.40412139892578,27.034809112548828],[-80.40400695800781,27.034669876098633],[-80.40320587158203,27.03495979309082],[-80.40306854248047,27.035009384155273],[-80.40269470214844,27.035139083862305],[-80.40210723876953,27.035348892211914],[-80.3980712890625,27.036779403686523],[-80.38880920410156,27.04006004333496],[-80.38766479492188,27.04041862487793],[-80.38703918457031,27.040569305419922],[-80.38639068603516,27.040679931640625],[-80.38594818115234,27.040719985961914],[-80.3853988647461,27.040760040283203],[-80.384521484375,27.040809631347656],[-80.38407897949219,27.04085922241211],[-80.38333892822266,27.040998458862305],[-80.38289642333984,27.041109085083008],[-80.38237762451172,27.041259765625],[-80.38179779052734,27.04146957397461],[-80.37957763671875,27.04239845275879],[-80.37702941894531,27.043498992919922],[-80.37173461914063,27.045740127563477],[-80.37137603759766,27.0458984375],[-80.3713150024414,27.0458984375],[-80.36918640136719,27.046810150146484],[-80.36888122558594,27.046939849853516],[-80.36860656738281,27.047048568725586],[-80.36827087402344,27.047189712524414],[-80.36626434326172,27.04789924621582],[-80.36270904541016,27.04916000366211],[-80.35929870605469,27.050369262695313],[-80.3509750366211,27.053308486938477],[-80.34461975097656,27.055559158325195],[-80.33407592773438,27.05929946899414],[-80.32691955566406,27.06182861328125],[-80.32451629638672,27.06268882751465],[-80.32392120361328,27.062959671020508],[-80.32354736328125,27.063148498535156],[-80.32306671142578,27.063438415527344],[-80.32271575927734,27.063678741455078],[-80.32221984863281,27.06406021118164],[-80.3218994140625,27.064329147338867],[-80.32145690917969,27.06477928161621],[-80.32120513916016,27.065059661865234],[-80.32103729248047,27.06525993347168],[-80.3207015991211,27.065719604492188],[-80.32035064697266,27.066259384155273],[-80.31987762451172,27.067150115966797],[-80.31956481933594,27.067869186401367],[-80.31936645507813,27.068429946899414],[-80.31922912597656,27.06894874572754],[-80.31909942626953,27.069568634033203],[-80.31901550292969,27.070079803466797],[-80.31895446777344,27.070959091186523],[-80.31887817382813,27.079219818115234],[-80.31888580322266,27.080209732055664],[-80.31893920898438,27.08112907409668],[-80.3189697265625,27.081329345703125],[-80.31898498535156,27.081520080566406],[-80.31917572021484,27.082979202270508],[-80.31926727294922,27.083969116210938],[-80.31927490234375,27.084558486938477],[-80.31927490234375,27.086170196533203],[-80.31924438476563,27.088428497314453],[-80.31920623779297,27.091468811035156],[-80.31912994384766,27.09947967529297],[-80.31908416748047,27.10474967956543],[-80.31903839111328,27.110380172729492],[-80.31900024414063,27.115718841552734],[-80.31898498535156,27.11779022216797],[-80.31900024414063,27.119958877563477],[-80.31900787353516,27.121639251708984],[-80.31903076171875,27.12335968017578],[-80.31903839111328,27.124879837036133],[-80.3190689086914,27.127479553222656],[-80.31909942626953,27.129959106445313],[-80.3191146850586,27.13239860534668],[-80.31907653808594,27.1361083984375],[-80.31908416748047,27.13715934753418],[-80.31908416748047,27.138978958129883],[-80.31903839111328,27.144088745117188],[-80.31898498535156,27.15030860900879],[-80.3189468383789,27.154930114746094],[-80.31893920898438,27.15683937072754],[-80.31890869140625,27.158519744873047],[-80.31891632080078,27.159448623657227],[-80.31890106201172,27.159910202026367],[-80.31885528564453,27.160419464111328],[-80.3188247680664,27.160869598388672],[-80.31884002685547,27.161399841308594],[-80.31627655029297,27.161388397216797],[-80.3152084350586,27.161388397216797],[-80.31452941894531,27.161409378051758],[-80.31299591064453,27.161418914794922],[-80.31072998046875,27.161409378051758],[-80.30784606933594,27.161378860473633],[-80.3070297241211,27.161418914794922],[-80.30561828613281,27.16145896911621],[-80.30508422851563,27.161449432373047],[-80.30416107177734,27.161428451538086],[-80.30284118652344,27.161388397216797],[-80.30230712890625,27.161359786987305],[-80.30171966552734,27.16135025024414],[-80.30110931396484,27.161359786987305],[-80.30068969726563,27.161338806152344],[-80.30066680908203,27.161479949951172],[-80.30066680908203,27.16197967529297],[-80.30066680908203,27.162208557128906],[-80.30067443847656,27.162858963012695],[-80.30068969726563,27.1635684967041],[-80.30062866210938,27.16415023803711],[-80.30046844482422,27.164838790893555],[-80.30023956298828,27.16543960571289],[-80.30001068115234,27.165969848632813],[-80.2996597290039,27.16676902770996],[-80.29883575439453,27.168668746948242],[-80.29843139648438,27.169639587402344],[-80.29795837402344,27.17068862915039],[-80.29769897460938,27.171119689941406],[-80.29730987548828,27.171539306640625],[-80.29713439941406,27.171669006347656],[-80.29686737060547,27.171859741210938],[-80.2964096069336,27.172100067138672],[-80.29618835449219,27.17222023010254],[-80.29598999023438,27.172279357910156],[-80.29544830322266,27.17238998413086],[-80.2948989868164,27.17241859436035],[-80.29402160644531,27.172409057617188],[-80.29387664794922,27.172378540039063],[-80.29348754882813,27.172378540039063],[-80.29290008544922,27.1723690032959],[-80.29145050048828,27.172359466552734],[-80.28746032714844,27.17232894897461],[-80.28533935546875,27.17230987548828],[-80.2835693359375,27.172319412231445],[-80.28284454345703,27.17230987548828],[-80.28062438964844,27.17228889465332],[-80.27440643310547,27.172239303588867],[-80.27265167236328,27.172229766845703],[-80.271484375,27.17224884033203],[-80.26934814453125,27.172258377075195],[-80.26911926269531,27.17230987548828],[-80.26866149902344,27.172298431396484],[-80.2677993774414,27.17228889465332],[-80.26612854003906,27.172269821166992],[-80.26528930664063,27.172269821166992],[-80.26485443115234,27.172338485717773],[-80.2644271850586,27.172489166259766],[-80.26443481445313,27.171998977661133],[-80.26443481445313,27.17078971862793],[-80.26329040527344,27.17078971862793],[-80.2633056640625,27.170839309692383],[-80.26338958740234,27.17095947265625],[-80.26362609863281,27.171289443969727]]}},{"type":"Feature","properties":{"ID":141,"Name":"Ocean Blvd","From":"Flagler Ave","To":"Palm Beach Rd","Context_Class":"C4","Service_Capacity":915.0,"AADT_2024":9215.0,"Peak_Hour_Vol_2024":481.0,"LOS_2024":"D","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C4","Service_Capacity_2023":915.0,"AADT_2023":9241.0,"Peak_Hour_Vol_2023":498.45954000000006,"LOS_2023":"D","Growth_Rate_2023":0.005,"U_ID":"151","color":"#FF10F0","width":2.805867311785151,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FF10F0; margin-bottom: 4px;'>Ocean Blvd (ID: 141)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Flagler Ave  Palm Beach Rd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C4<br><span style='color: #71717a;'>AADT 2024: \u003c/span>9,215<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>481<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>D\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #141\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FF10F0; margin: 4px 0;'>Ocean Blvd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Flagler Ave  Palm Beach Rd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C4\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>915\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FF10F0;'>9,215\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>481\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>D\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.25263977050781,27.197778701782227],[-80.25273895263672,27.197769165039063],[-80.25277709960938,27.197729110717773],[-80.25279998779297,27.19767951965332],[-80.25279998779297,27.197629928588867],[-80.25276947021484,27.197589874267578],[-80.25271606445313,27.197559356689453],[-80.25265502929688,27.19754981994629],[-80.25262451171875,27.19754981994629],[-80.2525405883789,27.197538375854492],[-80.25247955322266,27.197509765625],[-80.25235748291016,27.197528839111328],[-80.25200653076172,27.197538375854492],[-80.25096130371094,27.197538375854492],[-80.24862670898438,27.197528839111328],[-80.24359893798828,27.197500228881836],[-80.2423095703125,27.19748878479004],[-80.24198150634766,27.197509765625],[-80.23854064941406,27.197500228881836],[-80.23809814453125,27.19748878479004],[-80.23773956298828,27.197460174560547],[-80.23731994628906,27.197460174560547],[-80.23652648925781,27.19746971130371]]}},{"type":"Feature","properties":{"ID":142,"Name":"Ocean Blvd","From":"Palm Beach Rd","To":"Monterey Rd","Context_Class":"C4","Service_Capacity":1790.0,"AADT_2024":11614.0,"Peak_Hour_Vol_2024":607.0,"LOS_2024":"C","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C4","Service_Capacity_2023":1880.0,"AADT_2023":11882.0,"Peak_Hour_Vol_2023":580.79216,"LOS_2023":"C","Growth_Rate_2023":0.005,"U_ID":"152","color":"#FF10F0","width":3.026258976282709,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FF10F0; margin-bottom: 4px;'>Ocean Blvd (ID: 142)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Palm Beach Rd  Monterey Rd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C4<br><span style='color: #71717a;'>AADT 2024: \u003c/span>11,614<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>607<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>C\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #142\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FF10F0; margin: 4px 0;'>Ocean Blvd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Palm Beach Rd  Monterey Rd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C4\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>1790\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FF10F0;'>11,614\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>607\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>C\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.23652648925781,27.19746971130371],[-80.23590850830078,27.19744873046875],[-80.23572540283203,27.19744873046875],[-80.23561096191406,27.197500228881836],[-80.23490905761719,27.197500228881836],[-80.23382568359375,27.197460174560547],[-80.23236083984375,27.197439193725586],[-80.23062133789063,27.197439193725586],[-80.22816467285156,27.197429656982422],[-80.22509002685547,27.197420120239258],[-80.22412109375,27.197349548339844]]}},{"type":"Feature","properties":{"ID":150,"Name":"Palm Beach Rd","From":"Monterey Rd","To":"Ocean Blvd","Context_Class":"C4","Service_Capacity":915.0,"AADT_2024":8421.0,"Peak_Hour_Vol_2024":440.0,"LOS_2024":"D","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C4","Service_Capacity_2023":915.0,"AADT_2023":8379.0,"Peak_Hour_Vol_2023":508.77288,"LOS_2023":"D","Growth_Rate_2023":0.005,"U_ID":"93","color":"#FF10F0","width":2.7329240097380225,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FF10F0; margin-bottom: 4px;'>Palm Beach Rd (ID: 150)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Monterey Rd  Ocean Blvd\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C4<br><span style='color: #71717a;'>AADT 2024: \u003c/span>8,421<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>440<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>D\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #150\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FF10F0; margin: 4px 0;'>Palm Beach Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Monterey Rd  Ocean Blvd\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C4\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>915\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FF10F0;'>8,421\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>440\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>D\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.23624420166016,27.181379318237305],[-80.2362289428711,27.181398391723633],[-80.23638153076172,27.181659698486328],[-80.23654174804688,27.18208885192871],[-80.23662567138672,27.1823787689209],[-80.23665618896484,27.182600021362305],[-80.23667907714844,27.183629989624023],[-80.23664093017578,27.185718536376953],[-80.2365951538086,27.187910079956055],[-80.23655700683594,27.191329956054688],[-80.2365493774414,27.19236946105957],[-80.23656463623047,27.19308853149414],[-80.23654174804688,27.193449020385742],[-80.23654174804688,27.19447898864746],[-80.23654174804688,27.195369720458984],[-80.23652648925781,27.19577980041504],[-80.23651123046875,27.195838928222656],[-80.23648834228516,27.19615936279297],[-80.2364501953125,27.196800231933594],[-80.2364501953125,27.197519302368164]]}},{"type":"Feature","properties":{"ID":153,"Name":"Pineapple Wy","From":"Jensen Beach Blvd","To":"Indian River Dr","Context_Class":"C4","Service_Capacity":695.0,"AADT_2024":11593.0,"Peak_Hour_Vol_2024":606.0,"LOS_2024":"TCEA","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C4","Service_Capacity_2023":870.0,"AADT_2023":11309.0,"Peak_Hour_Vol_2023":607.97184,"LOS_2023":"TCEA","Growth_Rate_2023":0.005,"U_ID":"40","color":"#FF10F0","width":3.0243297453721425,"los_color":"#FF073A","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FF10F0; margin-bottom: 4px;'>Pineapple Wy (ID: 153)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Jensen Beach Blvd  Indian River Dr\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C4<br><span style='color: #71717a;'>AADT 2024: \u003c/span>11,593<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>606<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FF073A; font-weight: bold;'>TCEA\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #153\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FF10F0; margin: 4px 0;'>Pineapple Wy\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Jensen Beach Blvd  Indian River Dr\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C4\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>695\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FF10F0;'>11,593\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>606\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FF073A;'>TCEA\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.22737884521484,27.24403953552246],[-80.22745513916016,27.244029998779297],[-80.22757720947266,27.243968963623047],[-80.22761535644531,27.243879318237305],[-80.22760009765625,27.243789672851563],[-80.22757720947266,27.243759155273438],[-80.22750091552734,27.24370002746582],[-80.22737121582031,27.24367904663086],[-80.22727966308594,27.243709564208984],[-80.22722625732422,27.243749618530273],[-80.22718048095703,27.24382972717285],[-80.22716522216797,27.243898391723633],[-80.22718811035156,27.24394989013672],[-80.22728729248047,27.244029998779297],[-80.22726440429688,27.24424934387207],[-80.22732543945313,27.244428634643555],[-80.22755432128906,27.245168685913086],[-80.22766876220703,27.24553871154785],[-80.22782135009766,27.24603843688965],[-80.22822570800781,27.24740982055664],[-80.22876739501953,27.24917984008789],[-80.22882080078125,27.2493896484375],[-80.22882843017578,27.249658584594727],[-80.22879791259766,27.249839782714844],[-80.228759765625,27.249988555908203],[-80.22859954833984,27.250268936157227],[-80.22834777832031,27.250539779663086],[-80.228271484375,27.25054931640625],[-80.22808074951172,27.250568389892578],[-80.2280502319336,27.250539779663086],[-80.2280044555664,27.250518798828125],[-80.2279281616211,27.250518798828125],[-80.22782897949219,27.250568389892578],[-80.2278060913086,27.250619888305664],[-80.22783660888672,27.250749588012695],[-80.2279052734375,27.25079917907715],[-80.22801971435547,27.25078010559082],[-80.22809600830078,27.25075912475586],[-80.22811889648438,27.25071907043457],[-80.22811889648438,27.250699996948242]]}},{"type":"Feature","properties":{"ID":162,"Name":"Salerno Rd","From":"Federal Hwy","To":"Commerce Ave","Context_Class":"C4","Service_Capacity":870.0,"AADT_2024":9453.0,"Peak_Hour_Vol_2024":494.0,"LOS_2024":"D","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C4","Service_Capacity_2023":870.0,"AADT_2023":8798.0,"Peak_Hour_Vol_2023":373.0352,"LOS_2023":"TCEA","Growth_Rate_2023":0.005,"U_ID":"99","color":"#FF10F0","width":2.82773192877157,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FF10F0; margin-bottom: 4px;'>Salerno Rd (ID: 162)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Federal Hwy  Commerce Ave\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C4<br><span style='color: #71717a;'>AADT 2024: \u003c/span>9,453<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>494<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>D\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #162\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FF10F0; margin: 4px 0;'>Salerno Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Federal Hwy  Commerce Ave\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C4\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>870\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FF10F0;'>9,453\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>494\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>D\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.21112823486328,27.140199661254883],[-80.21096801757813,27.140289306640625],[-80.21061706542969,27.140419006347656],[-80.21025085449219,27.140560150146484],[-80.20906066894531,27.140979766845703],[-80.20610046386719,27.142148971557617],[-80.20366668701172,27.143108367919922],[-80.1994400024414,27.144760131835938]]}},{"type":"Feature","properties":{"ID":163,"Name":"Salerno Rd","From":"Commerce Ave","To":"Dixie Hwy","Context_Class":"C4","Service_Capacity":870.0,"AADT_2024":8119.0,"Peak_Hour_Vol_2024":424.0,"LOS_2024":"D","Growth_Rate_2024":0.005,"Comparison_2023":null,"Context_Class_2023":"C4","Service_Capacity_2023":870.0,"AADT_2023":7166.0,"Peak_Hour_Vol_2023":290.22299999999996,"LOS_2023":"TCEA","Growth_Rate_2023":0.005,"U_ID":"100","color":"#FF10F0","width":2.7051798318813063,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FF10F0; margin-bottom: 4px;'>Salerno Rd (ID: 163)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Commerce Ave  Dixie Hwy\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C4<br><span style='color: #71717a;'>AADT 2024: \u003c/span>8,119<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>424<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>D\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #163\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FF10F0; margin: 4px 0;'>Salerno Rd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Commerce Ave  Dixie Hwy\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C4\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>870\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FF10F0;'>8,119\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>424\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>D\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.5%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.1994400024414,27.144760131835938],[-80.19844818115234,27.145139694213867],[-80.19815063476563,27.145278930664063],[-80.19796752929688,27.145448684692383],[-80.19784545898438,27.145578384399414],[-80.19771575927734,27.145750045776367],[-80.19747924804688,27.14596939086914]]}},{"type":"Feature","properties":{"ID":183,"Name":"Wright Blvd","From":"Federal Hwy","To":"Dixie Highway","Context_Class":"C4","Service_Capacity":695.0,"AADT_2024":10962.0,"Peak_Hour_Vol_2024":573.0,"LOS_2024":"D","Growth_Rate_2024":0.009,"Comparison_2023":null,"Context_Class_2023":"C4","Service_Capacity_2023":915.0,"AADT_2023":10602.0,"Peak_Hour_Vol_2023":525.43512,"LOS_2023":"D","Growth_Rate_2023":0.005,"U_ID":"171","color":"#FF10F0","width":2.9663609499165533,"los_color":"#FFFF00","tooltip_html":"<div style='font-family: system-ui; padding: 8px; background: #09090b; color: #fafafa; border-radius: 6px;'><div style='font-weight: 600; color: #FF10F0; margin-bottom: 4px;'>Wright Blvd (ID: 183)\u003c/div><div style='color: #a1a1aa; font-size: 11px;'>Federal Hwy  Dixie Highway\u003c/div><div style='margin-top: 6px; font-size: 10px;'><span style='color: #71717a;'>Context: \u003c/span>C4<br><span style='color: #71717a;'>AADT 2024: \u003c/span>10,962<br><span style='color: #71717a;'>Peak Hour Vol: \u003c/span>573<br><span style='color: #71717a;'>LOS: \u003c/span><span style='color: #FFFF00; font-weight: bold;'>D\u003c/span>\u003c/div>\u003c/div>","popup_html":"<div style='font-family: system-ui; width: 220px; background: #09090b; color: #fafafa; border-radius: 6px; padding: 12px;'><div style='font-size: 9px; color: #71717a;'>SEGMENT #183\u003c/div><div style='font-size: 14px; font-weight: 600; color: #FF10F0; margin: 4px 0;'>Wright Blvd\u003c/div><div style='font-size: 11px; color: #a1a1aa; margin-bottom: 8px;'>Federal Hwy  Dixie Highway\u003c/div><div style='border-top: 1px solid #27272a; padding-top: 8px; font-size: 10px;'><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Context Class\u003c/span><span style='font-weight: 600;'>C4\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Service Capacity\u003c/span><span style='font-weight: 600;'>695\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>AADT 2024\u003c/span><span style='font-weight: 600; color: #FF10F0;'>10,962\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>Peak Hour Volume\u003c/span><span style='font-weight: 600;'>573\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between; margin-bottom: 4px;'><span style='color: #71717a;'>LOS 2024\u003c/span><span style='font-weight: 700; color: #FFFF00;'>D\u003c/span>\u003c/div><div style='display: flex; justify-content: space-between;'><span style='color: #71717a;'>Growth Rate\u003c/span><span style='font-weight: 600;'>0.9%\u003c/span>\u003c/div>\u003c/div>\u003c/div>"},"geometry":{"type":"LineString","coordinates":[[-80.2612075805664,27.215879440307617],[-80.26103973388672,27.21595001220703],[-80.260498046875,27.21592903137207],[-80.26005554199219,27.215919494628906],[-80.25907897949219,27.215869903564453],[-80.25823974609375,27.215848922729492],[-80.2579116821289,27.215829849243164],[-80.25756072998047,27.215789794921875],[-80.25760650634766,27.215740203857422]]}}]},"generateId":true},"source_layer":null,"paint":{"line-color":"#FF10F0","line-opacity":0.85,"line-translate-anchor":"map","line-width":4},"layout":{"visibility":"visible"},"slot":null,"minzoom":null,"maxzoom":null,"popup":"popup_html","tooltip":"tooltip_html","hover_options":null,"before_id":null,"filter":null},{"id":"nodes_from","type":"circle","source":{"type":"geojson","data":{"type":"FeatureCollection","features":[{"type":"Feature","properties":{"ID":1,"Name":"96th St","From":"Citrus Blvd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 1\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>96th St & Citrus Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.319220973327,27.088414992713]}},{"type":"Feature","properties":{"ID":2,"Name":"96th St","From":"Bobcat Dr","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 2\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>96th St & Bobcat Dr\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.296950005133,27.088156997733]}},{"type":"Feature","properties":{"ID":3,"Name":"Allapattah Rd","From":"Warfield Blvd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 3\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Allapattah Rd & Warfield Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.482407324241,27.03048221163]}},{"type":"Feature","properties":{"ID":4,"Name":"Allapattah Rd","From":"Martin Hwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 4\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Allapattah Rd & Martin Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.481841964872,27.161950979923]}},{"type":"Feature","properties":{"ID":5,"Name":"Baker Rd","From":"Federal Hwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 5\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Baker Rd & Federal Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.263653397683,27.222356296714]}},{"type":"Feature","properties":{"ID":6,"Name":"Beach Rd","From":"Palm Beach County","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 6\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Beach Rd & Palm Beach County\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.113319018908,27.059930980699]}},{"type":"Feature","properties":{"ID":7,"Name":"Berry Ave","From":"Golden Bear Wy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 7\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Berry Ave & Golden Bear Wy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.285895029216,27.149928019918]}},{"type":"Feature","properties":{"ID":8,"Name":"Berry Ave","From":"Martin Hwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 8\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Berry Ave & Martin Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.28583493097,27.161296018009]}},{"type":"Feature","properties":{"ID":9,"Name":"Bridge Rd","From":"Kanner Hwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 9\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Bridge Rd & Kanner Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.305578671538,27.059225182542]}},{"type":"Feature","properties":{"ID":10,"Name":"Bridge Rd","From":"Pratt Whitney Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 10\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Bridge Rd & Pratt Whitney Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.263140006113,27.058580991374]}},{"type":"Feature","properties":{"ID":11,"Name":"Bridge Rd","From":"I-95","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 11\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Bridge Rd & I-95\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.234041977783,27.044142995516]}},{"type":"Feature","properties":{"ID":12,"Name":"Bridge Rd","From":"Powerline Ave","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 12\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Bridge Rd & Powerline Ave\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.162871992291,27.043767989168]}},{"type":"Feature","properties":{"ID":13,"Name":"Bridge Rd","From":"Lantana Ave","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 13\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Bridge Rd & Lantana Ave\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.141838025368,27.057668998399]}},{"type":"Feature","properties":{"ID":14,"Name":"Bridge Rd","From":"Federal Hwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 14\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Bridge Rd & Federal Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.136681059439,27.059455307694]}},{"type":"Feature","properties":{"ID":15,"Name":"Bridge Rd","From":"Dixie Hwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 15\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Bridge Rd & Dixie Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.130485491888,27.061607319425]}},{"type":"Feature","properties":{"ID":16,"Name":"Bridge Rd","From":"Gomez Ave","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 16\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Bridge Rd & Gomez Ave\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.128913968862,27.062146988261]}},{"type":"Feature","properties":{"ID":17,"Name":"Britt Rd","From":"Pine Lake Dr","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 17\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Britt Rd & Pine Lake Dr\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.277122026438,27.234492999145]}},{"type":"Feature","properties":{"ID":18,"Name":"Causeway Blvd","From":"Indian River Dr","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 18\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Causeway Blvd & Indian River Dr\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.227880692216,27.25077509752]}},{"type":"Feature","properties":{"ID":19,"Name":"Citrus Blvd","From":"Warfield Blvd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 19\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Citrus Blvd & Warfield Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.461431695363,27.016974900391]}},{"type":"Feature","properties":{"ID":20,"Name":"Citrus Blvd","From":"Minute Maid Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 20\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Citrus Blvd & Minute Maid Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.433534039386,27.024128016561]}},{"type":"Feature","properties":{"ID":21,"Name":"Citrus Blvd","From":"96th St","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 21\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Citrus Blvd & 96th St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.319220973327,27.088414992713]}},{"type":"Feature","properties":{"ID":22,"Name":"Commerce Ave","From":"Salerno Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 22\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Commerce Ave & Salerno Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.199432009924,27.144743016523]}},{"type":"Feature","properties":{"ID":23,"Name":"Commerce Ave","From":"Monroe St","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 23\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Commerce Ave & Monroe St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.211761035124,27.155146006101]}},{"type":"Feature","properties":{"ID":24,"Name":"Country Club Dr","From":"Palm Beach County","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 24\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Country Club Dr & Palm Beach County\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.196384661051,26.337848523314]}},{"type":"Feature","properties":{"ID":25,"Name":"Country Club Dr","From":"Island Way","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 25\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Country Club Dr & Island Way\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.12778702198,26.97679100883]}},{"type":"Feature","properties":{"ID":26,"Name":"County Line Rd","From":"Little Club Dr","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 26\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>County Line Rd & Little Club Dr\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.102213797642,26.970682462191]}},{"type":"Feature","properties":{"ID":27,"Name":"Cove Rd","From":"Kanner Highway","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 27\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Cove Rd & Kanner Highway\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.254566911727,27.115773608496]}},{"type":"Feature","properties":{"ID":28,"Name":"Cove Rd","From":"Willoughby Blvd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 28\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Cove Rd & Willoughby Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.222758008271,27.127704996209]}},{"type":"Feature","properties":{"ID":29,"Name":"Cove Rd","From":"Federal Hwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 29\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Cove Rd & Federal Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.206896765254,27.133935097202]}},{"type":"Feature","properties":{"ID":30,"Name":"Cove Rd","From":"Dixie Hwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 30\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Cove Rd & Dixie Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.190292885616,27.140505210096]}},{"type":"Feature","properties":{"ID":31,"Name":"Dixie Hwy","From":"Federal Hwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 31\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Dixie Hwy & Federal Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.119744334426,27.045420481379]}},{"type":"Feature","properties":{"ID":32,"Name":"Dixie Hwy","From":"Water St","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 32\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Dixie Hwy & Water St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.122046507952,27.052152113548]}},{"type":"Feature","properties":{"ID":33,"Name":"Dixie Hwy","From":"Lares Ave","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 33\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Dixie Hwy & Lares Ave\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.135301733453,27.066990680558]}},{"type":"Feature","properties":{"ID":34,"Name":"Dixie Hwy","From":"Osprey St","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 34\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Dixie Hwy & Osprey St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.151485093008,27.101586189634]}},{"type":"Feature","properties":{"ID":35,"Name":"Dixie Hwy","From":"Heritage Blvd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 35\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Dixie Hwy & Heritage Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.16210597016,27.117919710985]}},{"type":"Feature","properties":{"ID":36,"Name":"Dixie Hwy","From":"Cove Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 36\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Dixie Hwy & Cove Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.190295484006,27.140546113784]}},{"type":"Feature","properties":{"ID":37,"Name":"Dixie Hwy","From":"Salerno Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 37\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Dixie Hwy & Salerno Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.197491934615,27.145981107441]}},{"type":"Feature","properties":{"ID":38,"Name":"Dixie Hwy","From":"St Lucie Blvd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 38\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Dixie Hwy & St Lucie Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.20230901437,27.149191292538]}},{"type":"Feature","properties":{"ID":39,"Name":"Dixie Hwy","From":"Jefferson St","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 39\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Dixie Hwy & Jefferson St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.215154113348,27.161356619169]}},{"type":"Feature","properties":{"ID":40,"Name":"Dixie Hwy","From":"Indian St","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 40\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Dixie Hwy & Indian St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.221790401368,27.168041396499]}},{"type":"Feature","properties":{"ID":41,"Name":"Dixie Hwy","From":"Monterey Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 41\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Dixie Hwy & Monterey Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.236244574299,27.181375286161]}},{"type":"Feature","properties":{"ID":42,"Name":"Dixie Hwy","From":"Savannah Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 42\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Dixie Hwy & Savannah Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.247340202447,27.220556785921]}},{"type":"Feature","properties":{"ID":43,"Name":"Farm Rd","From":"Martin Luther King Jr Dr","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 43\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Farm Rd & Martin Luther King Jr Dr\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.485816998633,27.021478999882]}},{"type":"Feature","properties":{"ID":44,"Name":"Federal Hwy","From":"Palm Beach County","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 44\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Palm Beach County\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.256667500481,27.193218999167]}},{"type":"Feature","properties":{"ID":45,"Name":"Federal Hwy","From":"Jonathan Dickinson Wy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 45\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Jonathan Dickinson Wy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.108957830867,27.024467316002]}},{"type":"Feature","properties":{"ID":46,"Name":"Federal Hwy","From":"Dixie Hwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 46\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Dixie Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.11984181596,27.045777718092]}},{"type":"Feature","properties":{"ID":47,"Name":"Federal Hwy","From":"Olympus St","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 47\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Olympus St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.135009205032,27.056038215317]}},{"type":"Feature","properties":{"ID":48,"Name":"Federal Hwy","From":"Bridge Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 48\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Bridge Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.136681059439,27.059455307694]}},{"type":"Feature","properties":{"ID":49,"Name":"Federal Hwy","From":"Dharlys St","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 49\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Dharlys St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.147271761739,27.083351485004]}},{"type":"Feature","properties":{"ID":50,"Name":"Federal Hwy","From":"Osprey St","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 50\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Osprey St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.159331895485,27.098830806603]}},{"type":"Feature","properties":{"ID":51,"Name":"Federal Hwy","From":"Seabranch Blvd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 51\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Seabranch Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.178232919508,27.11683890648]}},{"type":"Feature","properties":{"ID":52,"Name":"Federal Hwy","From":"Cove Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 52\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Cove Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.206896765254,27.133935097202]}},{"type":"Feature","properties":{"ID":53,"Name":"Federal Hwy","From":"Salerno Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 53\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Salerno Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.211125016311,27.140196001688]}},{"type":"Feature","properties":{"ID":54,"Name":"Federal Hwy","From":"Monroe St","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 54\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Monroe St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.218267571283,27.15169031506]}},{"type":"Feature","properties":{"ID":55,"Name":"Federal Hwy","From":"Indian St","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 55\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Indian St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.227195974545,27.165978987313]}},{"type":"Feature","properties":{"ID":56,"Name":"Federal Hwy","From":"Monterey Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 56\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Monterey Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.236910600326,27.177909117741]}},{"type":"Feature","properties":{"ID":57,"Name":"Federal Hwy","From":"Cutoff Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 57\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Cutoff Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.137098178348,27.060398146791]}},{"type":"Feature","properties":{"ID":58,"Name":"Federal Hwy","From":"Kanner Hwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 58\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Kanner Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.252984827502,27.191013385165]}},{"type":"Feature","properties":{"ID":59,"Name":"Federal Hwy","From":"Palm City Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 59\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Palm City Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.256667500481,27.193218999167]}},{"type":"Feature","properties":{"ID":60,"Name":"Federal Hwy","From":"Joan Jefferson Wy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 60\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Joan Jefferson Wy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.2569446062,27.199195799045]}},{"type":"Feature","properties":{"ID":61,"Name":"Federal Hwy","From":"Wright Blvd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 61\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Wright Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.261012092354,27.215899716698]}},{"type":"Feature","properties":{"ID":62,"Name":"Federal Hwy","From":"Baker Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 62\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Baker Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.263653397683,27.222356296714]}},{"type":"Feature","properties":{"ID":63,"Name":"Federal Hwy","From":"Britt Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 63\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Britt Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.269213197878,27.237075589242]}},{"type":"Feature","properties":{"ID":64,"Name":"Federal Hwy","From":"Jensen Beach Blvd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 64\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Jensen Beach Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.272463197015,27.245571402482]}},{"type":"Feature","properties":{"ID":65,"Name":"Federal Hwy","From":"Westmoreland Blvd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 65\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Westmoreland Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.281510371846,27.259265420613]}},{"type":"Feature","properties":{"ID":66,"Name":"Fox Brown Rd","From":"Warfield Blvd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 66\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Fox Brown Rd & Warfield Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.514962803812,27.051421882143]}},{"type":"Feature","properties":{"ID":67,"Name":"Goldenrod Rd","From":"Britt Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 67\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Goldenrod Rd & Britt Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.267228991849,27.237848505489]}},{"type":"Feature","properties":{"ID":68,"Name":"Goldenrod Rd","From":"Jensen Beach Blvd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 68\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Goldenrod Rd & Jensen Beach Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.267810570201,27.245400788842]}},{"type":"Feature","properties":{"ID":69,"Name":"Goldenrod Rd","From":"Federal Hwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 69\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Goldenrod Rd & Federal Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.276492880786,27.251815585071]}},{"type":"Feature","properties":{"ID":70,"Name":"Gomez Ave","From":"Bridge Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 70\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Gomez Ave & Bridge Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.128913968862,27.062146988261]}},{"type":"Feature","properties":{"ID":71,"Name":"Gomez Ave","From":"Crossrip St","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 71\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Gomez Ave & Crossrip St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.145614994758,27.095748990353]}},{"type":"Feature","properties":{"ID":72,"Name":"Green River Pkwy","From":"Dixie Hwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 72\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Green River Pkwy & Dixie Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.253857299804,27.219973195912]}},{"type":"Feature","properties":{"ID":73,"Name":"Green River Pkwy","From":"Baker Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 73\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Green River Pkwy & Baker Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.253026820837,27.222072485472]}},{"type":"Feature","properties":{"ID":74,"Name":"Green River Pkwy","From":"Jensen Beach Blvd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 74\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Green River Pkwy & Jensen Beach Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.253503499671,27.245333314522]}},{"type":"Feature","properties":{"ID":75,"Name":"High Meadow Ave","From":"I-95","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 75\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>High Meadow Ave & I-95\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.280001090796,27.125506277215]}},{"type":"Feature","properties":{"ID":76,"Name":"High Meadow Ave","From":"Golden Bear Way","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 76\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>High Meadow Ave & Golden Bear Way\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.293843001264,27.146450996933]}},{"type":"Feature","properties":{"ID":77,"Name":"High Meadow Ave","From":"Martin Hwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 77\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>High Meadow Ave & Martin Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.296360505883,27.161448484828]}},{"type":"Feature","properties":{"ID":78,"Name":"High Meadow Ave","From":"Martin Downs Blvd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 78\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>High Meadow Ave & Martin Downs Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.294003682348,27.172383683348]}},{"type":"Feature","properties":{"ID":79,"Name":"Horseshoe Point Rd","From":"Dixie Hwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 79\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Horseshoe Point Rd & Dixie Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.18308995973,27.14986679498]}},{"type":"Feature","properties":{"ID":80,"Name":"Indian St","From":"Kanner Hwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 80\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Indian St & Kanner Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.246955724548,27.158311515655]}},{"type":"Feature","properties":{"ID":81,"Name":"Indian St","From":"Willoughby Blvd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 81\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Indian St & Willoughby Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.240210974701,27.160924993065]}},{"type":"Feature","properties":{"ID":82,"Name":"Indian St","From":"Federal Hwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 82\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Indian St & Federal Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.227195974545,27.165978987313]}},{"type":"Feature","properties":{"ID":83,"Name":"Indian St","From":"Commerce Ave","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 83\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Indian St & Commerce Ave\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.225055990845,27.166777992233]}},{"type":"Feature","properties":{"ID":84,"Name":"Indian St","From":"Dixie Hwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 84\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Indian St & Dixie Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.221790401368,27.168041396499]}},{"type":"Feature","properties":{"ID":85,"Name":"Indian River Dr","From":"Palmer St","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 85\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Indian River Dr & Palmer St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.21240199926,27.222969013836]}},{"type":"Feature","properties":{"ID":86,"Name":"Indian River Dr","From":"Dixie Hwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 86\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Indian River Dr & Dixie Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.218780962852,27.232689004034]}},{"type":"Feature","properties":{"ID":87,"Name":"Indian River Dr","From":"Jensen Beach Blvd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 87\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Indian River Dr & Jensen Beach Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.225273585052,27.244469098395]}},{"type":"Feature","properties":{"ID":88,"Name":"Indian River Dr","From":"Causeway Blvd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 88\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Indian River Dr & Causeway Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.227880692216,27.25077509752]}},{"type":"Feature","properties":{"ID":89,"Name":"Island Way","From":"Palm Beach County","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 89\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Island Way & Palm Beach County\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.298299220444,27.198717156319]}},{"type":"Feature","properties":{"ID":90,"Name":"Island Way","From":"Jupiter Road","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 90\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Island Way & Jupiter Road\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.137588987191,26.974055993824]}},{"type":"Feature","properties":{"ID":91,"Name":"Jack James Dr","From":"Kanner Hwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 91\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Jack James Dr & Kanner Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.263439072419,27.106603806422]}},{"type":"Feature","properties":{"ID":92,"Name":"Jensen Beach Blvd","From":"Federal Hwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 92\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Jensen Beach Blvd & Federal Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.272463197015,27.245571402482]}},{"type":"Feature","properties":{"ID":93,"Name":"Jensen Beach Blvd","From":"Green River Pkwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 93\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Jensen Beach Blvd & Green River Pkwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.253503499671,27.245333314522]}},{"type":"Feature","properties":{"ID":94,"Name":"Jensen Beach Blvd","From":"Savannah Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 94\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Jensen Beach Blvd & Savannah Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.23629385989,27.245013796373]}},{"type":"Feature","properties":{"ID":95,"Name":"Jensen Beach Blvd","From":"Skyline Dr","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 95\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Jensen Beach Blvd & Skyline Dr\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.229226993504,27.243398184536]}},{"type":"Feature","properties":{"ID":96,"Name":"Jensen Beach Blvd","From":"Pineapple Wy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 96\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Jensen Beach Blvd & Pineapple Wy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.227382974805,27.244064001014]}},{"type":"Feature","properties":{"ID":97,"Name":"Kanner Hwy","From":"Conner's Hwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 97\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Kanner Hwy & Conner's Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.61441743775,26.977816786141]}},{"type":"Feature","properties":{"ID":98,"Name":"Kanner Hwy","From":"Warfield Blvd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 98\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Kanner Hwy & Warfield Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.454342533115,27.011744089896]}},{"type":"Feature","properties":{"ID":99,"Name":"Kanner Hwy","From":"Bridge Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 99\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Kanner Hwy & Bridge Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.305578671538,27.059225182542]}},{"type":"Feature","properties":{"ID":100,"Name":"Kanner Hwy","From":"Waterside","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 100\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Kanner Hwy & Waterside\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.286739673599,27.073673907236]}},{"type":"Feature","properties":{"ID":101,"Name":"Kanner Hwy","From":"Pratt Whitney Rd / 96th St","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 101\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Kanner Hwy & Pratt Whitney Rd / 96th St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.278232293333,27.088059013285]}},{"type":"Feature","properties":{"ID":102,"Name":"Kanner Hwy","From":"Locks Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 102\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Kanner Hwy & Locks Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.268609617031,27.10230850014]}},{"type":"Feature","properties":{"ID":103,"Name":"Kanner Hwy","From":"Jack James","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 103\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Kanner Hwy & Jack James\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.263439072419,27.106603806422]}},{"type":"Feature","properties":{"ID":104,"Name":"Kanner Hwy","From":"Cove Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 104\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Kanner Hwy & Cove Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.254566911727,27.115773608496]}},{"type":"Feature","properties":{"ID":105,"Name":"Kanner Hwy","From":"Salerno Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 105\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Kanner Hwy & Salerno Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.252275886132,27.124112219142]}},{"type":"Feature","properties":{"ID":106,"Name":"Kanner Hwy","From":"Indian St","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 106\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Kanner Hwy & Indian St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.246955724548,27.158311515655]}},{"type":"Feature","properties":{"ID":107,"Name":"Kanner Hwy","From":"Monterey Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 107\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Kanner Hwy & Monterey Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.253046602129,27.175723620307]}},{"type":"Feature","properties":{"ID":108,"Name":"Lares Ave","From":"Bridge Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 108\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Lares Ave & Bridge Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.132817840265,27.060803201544]}},{"type":"Feature","properties":{"ID":109,"Name":"Little Club Wy","From":"Country Club Dr","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 109\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Little Club Wy & Country Club Dr\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.129348989636,26.982758001882]}},{"type":"Feature","properties":{"ID":110,"Name":"Locks Rd","From":"Canal St","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 110\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Locks Rd & Canal St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.284018991647,27.111326003033]}},{"type":"Feature","properties":{"ID":111,"Name":"MacArthur Blvd","From":"Sailfish Point","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 111\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>MacArthur Blvd & Sailfish Point\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.160807697177,27.185015211434]}},{"type":"Feature","properties":{"ID":112,"Name":"Mapp Rd","From":"South End","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 112\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Mapp Rd & South End\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.232284160334,27.241921132185]}},{"type":"Feature","properties":{"ID":113,"Name":"Mapp Rd","From":"Martin Hwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 113\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Mapp Rd & Martin Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.269397264472,27.161188981105]}},{"type":"Feature","properties":{"ID":114,"Name":"Mapp Rd","From":"Martin Downs Blvd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 114\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Mapp Rd & Martin Downs Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.269346470139,27.17235929201]}},{"type":"Feature","properties":{"ID":115,"Name":"Mapp Rd","From":"Matheson Ave","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 115\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Mapp Rd & Matheson Ave\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.277283964808,27.186563013674]}},{"type":"Feature","properties":{"ID":116,"Name":"Martin Downs Blvd","From":"Florida's Turnpike","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 116\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Martin Downs Blvd & Florida's Turnpike\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.304661439874,27.16158158945]}},{"type":"Feature","properties":{"ID":117,"Name":"Martin Downs Blvd","From":"High Meadow Ave","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 117\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Martin Downs Blvd & High Meadow Ave\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.294003682348,27.172383683348]}},{"type":"Feature","properties":{"ID":118,"Name":"Martin Downs Blvd","From":"Matheson Ave","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 118\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Martin Downs Blvd & Matheson Ave\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.277716973926,27.172451995859]}},{"type":"Feature","properties":{"ID":119,"Name":"Martin Downs Blvd","From":"Mapp Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 119\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Martin Downs Blvd & Mapp Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.269346470139,27.17235929201]}},{"type":"Feature","properties":{"ID":120,"Name":"Martin Hwy","From":"Warfield Blvd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 120\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Martin Hwy & Warfield Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.677327812033,27.159047195296]}},{"type":"Feature","properties":{"ID":121,"Name":"Martin Hwy","From":"Fox Brown Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 121\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Martin Hwy & Fox Brown Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.554317012687,27.16207071541]}},{"type":"Feature","properties":{"ID":122,"Name":"Martin Hwy","From":"Allapattah Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 122\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Martin Hwy & Allapattah Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.481841964872,27.161950979923]}},{"type":"Feature","properties":{"ID":123,"Name":"Martin Hwy","From":"I-95","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 123\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Martin Hwy & I-95\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.389428297239,27.161764482577]}},{"type":"Feature","properties":{"ID":124,"Name":"Martin Hwy","From":"Citrus Blvd / Newfield Pkwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 124\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Martin Hwy & Citrus Blvd / Newfield Pkwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.318892235085,27.161585403216]}},{"type":"Feature","properties":{"ID":125,"Name":"Martin Hwy","From":"Florida's Turnpike","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 125\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Martin Hwy & Florida's Turnpike\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.304661439874,27.16158158945]}},{"type":"Feature","properties":{"ID":126,"Name":"Martin Hwy","From":"High Meadow Ave","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 126\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Martin Hwy & High Meadow Ave\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.296360505883,27.161448484828]}},{"type":"Feature","properties":{"ID":127,"Name":"Martin Hwy","From":"Mapp Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 127\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Martin Hwy & Mapp Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.269397264472,27.161188981105]}},{"type":"Feature","properties":{"ID":128,"Name":"Matheson Ave","From":"Martin Downs Blvd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 128\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Matheson Ave & Martin Downs Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.277716973926,27.172451995859]}},{"type":"Feature","properties":{"ID":129,"Name":"Monroe St","From":"Federal Hwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 129\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Monroe St & Federal Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.218267571283,27.15169031506]}},{"type":"Feature","properties":{"ID":130,"Name":"Monterey Rd","From":"Kanner Hwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 130\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Monterey Rd & Kanner Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.253046602129,27.175723620307]}},{"type":"Feature","properties":{"ID":131,"Name":"Monterey Rd","From":"Willoughby Blvd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 131\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Monterey Rd & Willoughby Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.246969889964,27.175648602273]}},{"type":"Feature","properties":{"ID":132,"Name":"Monterey Rd","From":"Monterey Extension","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 132\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Monterey Rd & Monterey Extension\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.240415996053,27.175559083547]}},{"type":"Feature","properties":{"ID":133,"Name":"Monterey Rd","From":"Federal Hwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 133\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Monterey Rd & Federal Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.236910600326,27.177909117741]}},{"type":"Feature","properties":{"ID":134,"Name":"Monterey Rd","From":"Dixie Hwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 134\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Monterey Rd & Dixie Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.236244574299,27.181375286161]}},{"type":"Feature","properties":{"ID":135,"Name":"Murphy Rd","From":"Mapp Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 135\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Murphy Rd & Mapp Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.277283964808,27.186563013674]}},{"type":"Feature","properties":{"ID":136,"Name":"Murphy Rd","From":"High Meadow Ave","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 136\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Murphy Rd & High Meadow Ave\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.29395498349,27.186501993419]}},{"type":"Feature","properties":{"ID":137,"Name":"Newfield Pkwy","From":"Port St Lucie Blvd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 137\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Newfield Pkwy & Port St Lucie Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.211506876367,27.193567055615]}},{"type":"Feature","properties":{"ID":138,"Name":"Newfield Pkwy","From":"Farmer Dr","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 138\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Newfield Pkwy & Farmer Dr\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.398464013427,27.081622458589]}},{"type":"Feature","properties":{"ID":139,"Name":"Newfield Pkwy","From":"84th / Newfield Ave","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 139\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Newfield Pkwy & 84th / Newfield Ave\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.398464013427,27.081622458589]}},{"type":"Feature","properties":{"ID":140,"Name":"Newfield Pkwy","From":"Saw Palmetto Dr","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 140\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Newfield Pkwy & Saw Palmetto Dr\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.26363719305,27.17128710186]}},{"type":"Feature","properties":{"ID":141,"Name":"Ocean Blvd","From":"Flagler Ave","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 141\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Ocean Blvd & Flagler Ave\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.252642594396,27.197788016497]}},{"type":"Feature","properties":{"ID":142,"Name":"Ocean Blvd","From":"Palm Beach Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 142\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Ocean Blvd & Palm Beach Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.236511035001,27.197512000425]}},{"type":"Feature","properties":{"ID":143,"Name":"Ocean Blvd","From":"Monterey Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 143\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Ocean Blvd & Monterey Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.224121911556,27.197373699023]}},{"type":"Feature","properties":{"ID":144,"Name":"Ocean Blvd","From":"St Lucie Blvd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 144\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Ocean Blvd & St Lucie Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.211980138073,27.197163816168]}},{"type":"Feature","properties":{"ID":145,"Name":"Ocean Blvd","From":"Sewalls Point Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 145\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Ocean Blvd & Sewalls Point Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.200601369236,27.202949382925]}},{"type":"Feature","properties":{"ID":146,"Name":"Ocean Blvd","From":"Stuart Beach Entry","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 146\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Ocean Blvd & Stuart Beach Entry\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.17502,27.21439]}},{"type":"Feature","properties":{"ID":147,"Name":"Ocean Blvd","From":"Jensen Beach Blvd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 147\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Ocean Blvd & Jensen Beach Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.198017479944,27.255690580819]}},{"type":"Feature","properties":{"ID":148,"Name":"Osprey St","From":"Federal Hwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 148\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Osprey St & Federal Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.159331895485,27.098830806603]}},{"type":"Feature","properties":{"ID":149,"Name":"Osprey St","From":"Dixie Hwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 149\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Osprey St & Dixie Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.151485093008,27.101586189634]}},{"type":"Feature","properties":{"ID":150,"Name":"Palm Beach Rd","From":"Monterey Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 150\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Palm Beach Rd & Monterey Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.236244574299,27.181375286161]}},{"type":"Feature","properties":{"ID":151,"Name":"Palm City Rd","From":"Monterey Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 151\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Palm City Rd & Monterey Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.257311230645,27.175721189555]}},{"type":"Feature","properties":{"ID":152,"Name":"Palmer St","From":"Dixie Hwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 152\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Palmer St & Dixie Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.221143066986,27.223071608331]}},{"type":"Feature","properties":{"ID":153,"Name":"Pineapple Wy","From":"Jensen Beach Blvd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 153\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Pineapple Wy & Jensen Beach Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.227382974805,27.244064001014]}},{"type":"Feature","properties":{"ID":154,"Name":"Pomeroy St","From":"Kanner Hwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 154\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Pomeroy St & Kanner Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.245097959528,27.146190990296]}},{"type":"Feature","properties":{"ID":155,"Name":"Pomeroy St","From":"Willoughby Blvd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 155\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Pomeroy St & Willoughby Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.232986025621,27.147871017059]}},{"type":"Feature","properties":{"ID":156,"Name":"Pratt Whitney Rd","From":"Palm Beach County","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 156\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Pratt Whitney Rd & Palm Beach County\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.287670676436,26.929853674281]}},{"type":"Feature","properties":{"ID":157,"Name":"Pratt Whitney Rd","From":"Bridge Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 157\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Pratt Whitney Rd & Bridge Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.263140006113,27.058580991374]}},{"type":"Feature","properties":{"ID":158,"Name":"Pratt Whitney Rd","From":"Meadowlark Cir","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 158\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Pratt Whitney Rd & Meadowlark Cir\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.263115028042,27.067968010468]}},{"type":"Feature","properties":{"ID":159,"Name":"Salerno Rd","From":"Kanner Hwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 159\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Salerno Rd & Kanner Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.252275886132,27.124112219142]}},{"type":"Feature","properties":{"ID":160,"Name":"Salerno Rd","From":"Willoughby Blvd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 160\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Salerno Rd & Willoughby Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.228060986953,27.133489012315]}},{"type":"Feature","properties":{"ID":161,"Name":"Salerno Rd","From":"Avalon Dr","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 161\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Salerno Rd & Avalon Dr\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.21804796542,27.137558007211]}},{"type":"Feature","properties":{"ID":162,"Name":"Salerno Rd","From":"Federal Hwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 162\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Salerno Rd & Federal Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.211125016311,27.140196001688]}},{"type":"Feature","properties":{"ID":163,"Name":"Salerno Rd","From":"Commerce Ave","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 163\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Salerno Rd & Commerce Ave\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.199432009924,27.144743016523]}},{"type":"Feature","properties":{"ID":164,"Name":"Savannah Rd","From":"Dixie Hwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 164\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Savannah Rd & Dixie Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.247340202447,27.220556785921]}},{"type":"Feature","properties":{"ID":165,"Name":"Savannah Rd","From":"Park Pl","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 165\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Savannah Rd & Park Pl\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.237138170872,27.225957788737]}},{"type":"Feature","properties":{"ID":166,"Name":"Savannah Rd","From":"NE 24th St","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 166\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Savannah Rd & NE 24th St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.236355802154,27.233942517654]}},{"type":"Feature","properties":{"ID":167,"Name":"Seabranch Blvd","From":"Doubletree Dr","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 167\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Seabranch Blvd & Doubletree Dr\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.203820020055,27.099776997743]}},{"type":"Feature","properties":{"ID":168,"Name":"Sewalls Pt Rd","From":"Ocean Blvd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 168\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Sewalls Pt Rd & Ocean Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.200601369236,27.202949382925]}},{"type":"Feature","properties":{"ID":169,"Name":"Skyline Dr","From":"Jensen Beach Blvd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 169\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Skyline Dr & Jensen Beach Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.229226993504,27.243398184536]}},{"type":"Feature","properties":{"ID":170,"Name":"St Lucie Blvd","From":"Dixie Hwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 170\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>St Lucie Blvd & Dixie Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.20230901437,27.149191292538]}},{"type":"Feature","properties":{"ID":171,"Name":"St Lucie Blvd","From":"Indian St","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 171\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>St Lucie Blvd & Indian St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.21032001833,27.172406985039]}},{"type":"Feature","properties":{"ID":172,"Name":"Warfield Blvd","From":"Okeechobee County","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 172\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Warfield Blvd & Okeechobee County\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.655474495198,27.144563217873]}},{"type":"Feature","properties":{"ID":173,"Name":"Warfield Blvd","From":"Fox Brown Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 173\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Warfield Blvd & Fox Brown Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.514962803812,27.051421882143]}},{"type":"Feature","properties":{"ID":174,"Name":"Warfield Blvd","From":"Allapattah Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 174\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Warfield Blvd & Allapattah Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.482407324241,27.03048221163]}},{"type":"Feature","properties":{"ID":175,"Name":"Warfield Blvd","From":"Van Buren","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 175\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Warfield Blvd & Van Buren\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.472195064869,27.024210997403]}},{"type":"Feature","properties":{"ID":176,"Name":"Warfield Blvd","From":"Citrus Blvd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 176\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Warfield Blvd & Citrus Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.461431695363,27.016974900391]}},{"type":"Feature","properties":{"ID":177,"Name":"Warfield Blvd","From":"Kanner Hwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 177\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Warfield Blvd & Kanner Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.454342533115,27.011744089896]}},{"type":"Feature","properties":{"ID":178,"Name":"Westmoreland Blvd","From":"St Lucie County","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 178\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Westmoreland Blvd & St Lucie County\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.284797653851,27.258210445955]}},{"type":"Feature","properties":{"ID":179,"Name":"Willoughby Blvd","From":"Cove Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 179\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Willoughby Blvd & Cove Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.222758008271,27.127704996209]}},{"type":"Feature","properties":{"ID":180,"Name":"Willoughby Blvd","From":"Salerno Rd","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 180\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Willoughby Blvd & Salerno Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.228060986953,27.133489012315]}},{"type":"Feature","properties":{"ID":181,"Name":"Willoughby Blvd","From":"Pomeroy St","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 181\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Willoughby Blvd & Pomeroy St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.232986025621,27.147871017059]}},{"type":"Feature","properties":{"ID":182,"Name":"Willoughby Blvd","From":"Indian St","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 182\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Willoughby Blvd & Indian St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.240210974701,27.160924993065]}},{"type":"Feature","properties":{"ID":183,"Name":"Wright Blvd","From":"Federal Hwy","node_type":"From","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>START NODE\u003c/div><div style='font-weight: 600; color: #FF073A;'>ID: 183\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Wright Blvd & Federal Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.261197332414,27.21587008667]}}]},"generateId":true},"source_layer":null,"paint":{"circle-color":"#FF073A","circle-opacity":1,"circle-radius":6,"circle-stroke-color":"#FFFFFF","circle-stroke-width":2,"circle-translate-anchor":"map"},"layout":{"visibility":"visible"},"slot":null,"minzoom":null,"maxzoom":null,"popup":null,"tooltip":"tooltip_html","hover_options":null,"before_id":null,"filter":null},{"id":"nodes_to","type":"circle","source":{"type":"geojson","data":{"type":"FeatureCollection","features":[{"type":"Feature","properties":{"ID":1,"Name":"96th St","To":"Bobcat Dr","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 1\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>96th St & Bobcat Dr\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.296950005133,27.088156997733]}},{"type":"Feature","properties":{"ID":2,"Name":"96th St","To":"Kanner Hwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 2\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>96th St & Kanner Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.278232293333,27.088059013285]}},{"type":"Feature","properties":{"ID":3,"Name":"Allapattah Rd","To":"Martin Hwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 3\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Allapattah Rd & Martin Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.481841964872,27.161950979923]}},{"type":"Feature","properties":{"ID":4,"Name":"Allapattah Rd","To":"St Lucie County","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 4\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Allapattah Rd & St Lucie County\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.398464013427,27.081622458589]}},{"type":"Feature","properties":{"ID":5,"Name":"Baker Rd","To":"Green River Pkwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 5\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Baker Rd & Green River Pkwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.252799671261,27.222043190721]}},{"type":"Feature","properties":{"ID":6,"Name":"Beach Rd","To":"Bridge Rd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 6\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Beach Rd & Bridge Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.116255618686,27.066243811076]}},{"type":"Feature","properties":{"ID":7,"Name":"Berry Ave","To":"Martin Hwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 7\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Berry Ave & Martin Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.28583493097,27.161296018009]}},{"type":"Feature","properties":{"ID":8,"Name":"Berry Ave","To":"Sunset Tr","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 8\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Berry Ave & Sunset Tr\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.285776006191,27.168528007888]}},{"type":"Feature","properties":{"ID":9,"Name":"Bridge Rd","To":"Pratt Whitney Rd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 9\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Bridge Rd & Pratt Whitney Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.263140006113,27.058580991374]}},{"type":"Feature","properties":{"ID":10,"Name":"Bridge Rd","To":"I-95","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 10\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Bridge Rd & I-95\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.234041977783,27.044142995516]}},{"type":"Feature","properties":{"ID":11,"Name":"Bridge Rd","To":"Powerline Ave","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 11\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Bridge Rd & Powerline Ave\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.162871992291,27.043767989168]}},{"type":"Feature","properties":{"ID":12,"Name":"Bridge Rd","To":"Lantana Ave","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 12\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Bridge Rd & Lantana Ave\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.141838025368,27.057668998399]}},{"type":"Feature","properties":{"ID":13,"Name":"Bridge Rd","To":"Federal Hwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 13\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Bridge Rd & Federal Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.136681059439,27.059455307694]}},{"type":"Feature","properties":{"ID":14,"Name":"Bridge Rd","To":"Dixie Hwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 14\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Bridge Rd & Dixie Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.130485491888,27.061607319425]}},{"type":"Feature","properties":{"ID":15,"Name":"Bridge Rd","To":"Gomez Ave","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 15\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Bridge Rd & Gomez Ave\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.128913968862,27.062146988261]}},{"type":"Feature","properties":{"ID":16,"Name":"Bridge Rd","To":"Beach Rd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 16\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Bridge Rd & Beach Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.116255618686,27.066243811076]}},{"type":"Feature","properties":{"ID":17,"Name":"Britt Rd","To":"Federal Hwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 17\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Britt Rd & Federal Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.269213197878,27.237075589242]}},{"type":"Feature","properties":{"ID":18,"Name":"Causeway Blvd","To":"Ocean Blvd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 18\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Causeway Blvd & Ocean Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.198017479944,27.255690580819]}},{"type":"Feature","properties":{"ID":19,"Name":"Citrus Blvd","To":"Minute Maid Rd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 19\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Citrus Blvd & Minute Maid Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.433534039386,27.024128016561]}},{"type":"Feature","properties":{"ID":20,"Name":"Citrus Blvd","To":"96th St","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 20\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Citrus Blvd & 96th St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.319220973327,27.088414992713]}},{"type":"Feature","properties":{"ID":21,"Name":"Citrus Blvd","To":"Martin Hwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 21\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Citrus Blvd & Martin Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.318892235085,27.161585403216]}},{"type":"Feature","properties":{"ID":22,"Name":"Commerce Ave","To":"Monroe St","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 22\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Commerce Ave & Monroe St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.211761035124,27.155146006101]}},{"type":"Feature","properties":{"ID":23,"Name":"Commerce Ave","To":"Indian St","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 23\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Commerce Ave & Indian St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.225055990845,27.166777992233]}},{"type":"Feature","properties":{"ID":24,"Name":"Country Club Dr","To":"Island Way","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 24\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Country Club Dr & Island Way\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.12778702198,26.97679100883]}},{"type":"Feature","properties":{"ID":25,"Name":"Country Club Dr","To":"Little Club Dr","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 25\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Country Club Dr & Little Club Dr\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.124559989257,26.985379986924]}},{"type":"Feature","properties":{"ID":26,"Name":"County Line Rd","To":"Federal Hwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 26\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>County Line Rd & Federal Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.087417932268,26.970553112668]}},{"type":"Feature","properties":{"ID":27,"Name":"Cove Rd","To":"Willoughby Blvd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 27\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Cove Rd & Willoughby Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.222758008271,27.127704996209]}},{"type":"Feature","properties":{"ID":28,"Name":"Cove Rd","To":"Federal Hwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 28\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Cove Rd & Federal Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.206896765254,27.133935097202]}},{"type":"Feature","properties":{"ID":29,"Name":"Cove Rd","To":"Dixie Hwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 29\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Cove Rd & Dixie Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.190292885616,27.140505210096]}},{"type":"Feature","properties":{"ID":30,"Name":"Cove Rd","To":"End","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 30\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Cove Rd & End\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.178572700081,27.144995131169]}},{"type":"Feature","properties":{"ID":31,"Name":"Dixie Hwy","To":"Water St","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 31\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Dixie Hwy & Water St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.122046507952,27.052152113548]}},{"type":"Feature","properties":{"ID":32,"Name":"Dixie Hwy","To":"Lares Ave","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 32\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Dixie Hwy & Lares Ave\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.135301733453,27.066990680558]}},{"type":"Feature","properties":{"ID":33,"Name":"Dixie Hwy","To":"Osprey St","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 33\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Dixie Hwy & Osprey St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.151485093008,27.101586189634]}},{"type":"Feature","properties":{"ID":34,"Name":"Dixie Hwy","To":"Heritage Blvd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 34\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Dixie Hwy & Heritage Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.16210597016,27.117919710985]}},{"type":"Feature","properties":{"ID":35,"Name":"Dixie Hwy","To":"Cove Rd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 35\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Dixie Hwy & Cove Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.190295484006,27.140546113784]}},{"type":"Feature","properties":{"ID":36,"Name":"Dixie Hwy","To":"Salerno Rd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 36\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Dixie Hwy & Salerno Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.197491934615,27.145981107441]}},{"type":"Feature","properties":{"ID":37,"Name":"Dixie Hwy","To":"St. Lucie Blvd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 37\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Dixie Hwy & St. Lucie Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.20230901437,27.149191292538]}},{"type":"Feature","properties":{"ID":38,"Name":"Dixie Hwy","To":"Jefferson St","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 38\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Dixie Hwy & Jefferson St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.215154113348,27.161356619169]}},{"type":"Feature","properties":{"ID":39,"Name":"Dixie Hwy","To":"Indian St","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 39\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Dixie Hwy & Indian St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.221790401368,27.168041396499]}},{"type":"Feature","properties":{"ID":40,"Name":"Dixie Hwy","To":"Monterey Rd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 40\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Dixie Hwy & Monterey Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.236244574299,27.181375286161]}},{"type":"Feature","properties":{"ID":41,"Name":"Dixie Hwy","To":"Fifth St","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 41\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Dixie Hwy & Fifth St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.251350021107,27.195824010855]}},{"type":"Feature","properties":{"ID":42,"Name":"Dixie Hwy","To":"Indian River Dr","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 42\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Dixie Hwy & Indian River Dr\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.218780962852,27.232689004034]}},{"type":"Feature","properties":{"ID":43,"Name":"Farm Rd","To":"Palm Wy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 43\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Farm Rd & Palm Wy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.467255022594,27.019699018923]}},{"type":"Feature","properties":{"ID":44,"Name":"Federal Hwy","To":"Jonathan Dickinson Wy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 44\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Jonathan Dickinson Wy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.108957830867,27.024467316002]}},{"type":"Feature","properties":{"ID":45,"Name":"Federal Hwy","To":"Dixie Hwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 45\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Dixie Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.11984181596,27.045777718092]}},{"type":"Feature","properties":{"ID":46,"Name":"Federal Hwy","To":"Olympus St","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 46\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Olympus St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.135009205032,27.056038215317]}},{"type":"Feature","properties":{"ID":47,"Name":"Federal Hwy","To":"Bridge Rd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 47\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Bridge Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.136681059439,27.059455307694]}},{"type":"Feature","properties":{"ID":48,"Name":"Federal Hwy","To":"Dharlys St","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 48\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Dharlys St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.147271761739,27.083351485004]}},{"type":"Feature","properties":{"ID":49,"Name":"Federal Hwy","To":"Osprey St","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 49\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Osprey St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.159331895485,27.098830806603]}},{"type":"Feature","properties":{"ID":50,"Name":"Federal Hwy","To":"Seabranch Blvd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 50\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Seabranch Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.178232919508,27.11683890648]}},{"type":"Feature","properties":{"ID":51,"Name":"Federal Hwy","To":"Cove Rd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 51\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Cove Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.206896765254,27.133935097202]}},{"type":"Feature","properties":{"ID":52,"Name":"Federal Hwy","To":"Salerno Rd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 52\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Salerno Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.211125016311,27.140196001688]}},{"type":"Feature","properties":{"ID":53,"Name":"Federal Hwy","To":"Monroe St","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 53\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Monroe St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.218267571283,27.15169031506]}},{"type":"Feature","properties":{"ID":54,"Name":"Federal Hwy","To":"Indian St","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 54\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Indian St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.227195974545,27.165978987313]}},{"type":"Feature","properties":{"ID":55,"Name":"Federal Hwy","To":"Monterey Rd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 55\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Monterey Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.236910600326,27.177909117741]}},{"type":"Feature","properties":{"ID":56,"Name":"Federal Hwy","To":"Cutoff Rd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 56\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Cutoff Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.137098178348,27.060398146791]}},{"type":"Feature","properties":{"ID":57,"Name":"Federal Hwy","To":"Kanner Hwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 57\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Kanner Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.252984827502,27.191013385165]}},{"type":"Feature","properties":{"ID":58,"Name":"Federal Hwy","To":"Palm City Rd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 58\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Palm City Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.256667500481,27.193218999167]}},{"type":"Feature","properties":{"ID":59,"Name":"Federal Hwy","To":"Joan Jefferson Wy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 59\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Joan Jefferson Wy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.2569446062,27.199195799045]}},{"type":"Feature","properties":{"ID":60,"Name":"Federal Hwy","To":"Wright Blvd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 60\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Wright Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.261012092354,27.215899716698]}},{"type":"Feature","properties":{"ID":61,"Name":"Federal Hwy","To":"Baker Rd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 61\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Baker Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.263653397683,27.222356296714]}},{"type":"Feature","properties":{"ID":62,"Name":"Federal Hwy","To":"Britt Rd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 62\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Britt Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.269213197878,27.237075589242]}},{"type":"Feature","properties":{"ID":63,"Name":"Federal Hwy","To":"Jensen Beach Blvd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 63\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Jensen Beach Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.272463197015,27.245571402482]}},{"type":"Feature","properties":{"ID":64,"Name":"Federal Hwy","To":"Westmoreland Blvd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 64\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & Westmoreland Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.281510371846,27.259265420613]}},{"type":"Feature","properties":{"ID":65,"Name":"Federal Hwy","To":"St Lucie County","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 65\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Federal Hwy & St Lucie County\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.257040159897,27.195986410229]}},{"type":"Feature","properties":{"ID":66,"Name":"Fox Brown Rd","To":"Martin Hwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 66\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Fox Brown Rd & Martin Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.554317012687,27.16207071541]}},{"type":"Feature","properties":{"ID":67,"Name":"Goldenrod Rd","To":"Jensen Beach Blvd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 67\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Goldenrod Rd & Jensen Beach Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.267810570201,27.245400788842]}},{"type":"Feature","properties":{"ID":68,"Name":"Goldenrod Rd","To":"Federal Hwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 68\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Goldenrod Rd & Federal Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.276492880786,27.251815585071]}},{"type":"Feature","properties":{"ID":69,"Name":"Goldenrod Rd","To":"Westmoreland Blvd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 69\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Goldenrod Rd & Westmoreland Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.283776419369,27.258255904195]}},{"type":"Feature","properties":{"ID":70,"Name":"Gomez Ave","To":"Crossrip St","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 70\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Gomez Ave & Crossrip St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.145614994758,27.095748990353]}},{"type":"Feature","properties":{"ID":71,"Name":"Gomez Ave","To":"Osprey St","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 71\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Gomez Ave & Osprey St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.148598030279,27.102595999419]}},{"type":"Feature","properties":{"ID":72,"Name":"Green River Pkwy","To":"Baker Rd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 72\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Green River Pkwy & Baker Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.253026820837,27.222072485472]}},{"type":"Feature","properties":{"ID":73,"Name":"Green River Pkwy","To":"Jensen Beach Blvd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 73\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Green River Pkwy & Jensen Beach Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.253503499671,27.245333314522]}},{"type":"Feature","properties":{"ID":74,"Name":"Green River Pkwy","To":"St. Lucie County","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 74\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Green River Pkwy & St. Lucie County\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.210761996084,27.195761020852]}},{"type":"Feature","properties":{"ID":75,"Name":"High Meadow Ave","To":"Golden Bear Way","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 75\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>High Meadow Ave & Golden Bear Way\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.293843001264,27.146450996933]}},{"type":"Feature","properties":{"ID":76,"Name":"High Meadow Ave","To":"Martin Hwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 76\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>High Meadow Ave & Martin Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.296360505883,27.161448484828]}},{"type":"Feature","properties":{"ID":77,"Name":"High Meadow Ave","To":"Martin Downs Blvd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 77\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>High Meadow Ave & Martin Downs Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.294003682348,27.172383683348]}},{"type":"Feature","properties":{"ID":78,"Name":"High Meadow Ave","To":"Murphy Rd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 78\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>High Meadow Ave & Murphy Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.29395498349,27.186501993419]}},{"type":"Feature","properties":{"ID":79,"Name":"Horseshoe Point Rd","To":"Kubin Ave","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 79\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Horseshoe Point Rd & Kubin Ave\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.177170010366,27.152170011379]}},{"type":"Feature","properties":{"ID":80,"Name":"Indian St","To":"Willoughby Blvd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 80\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Indian St & Willoughby Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.240210974701,27.160924993065]}},{"type":"Feature","properties":{"ID":81,"Name":"Indian St","To":"Federal Hwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 81\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Indian St & Federal Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.227195974545,27.165978987313]}},{"type":"Feature","properties":{"ID":82,"Name":"Indian St","To":"Commerce Ave","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 82\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Indian St & Commerce Ave\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.225055990845,27.166777992233]}},{"type":"Feature","properties":{"ID":83,"Name":"Indian St","To":"Dixie Hwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 83\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Indian St & Dixie Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.221790401368,27.168041396499]}},{"type":"Feature","properties":{"ID":84,"Name":"Indian St","To":"St Lucie Blvd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 84\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Indian St & St Lucie Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.21032001833,27.172406985039]}},{"type":"Feature","properties":{"ID":85,"Name":"Indian River Dr","To":"Dixie Hwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 85\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Indian River Dr & Dixie Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.218780962852,27.232689004034]}},{"type":"Feature","properties":{"ID":86,"Name":"Indian River Dr","To":"Jensen Beach Blvd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 86\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Indian River Dr & Jensen Beach Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.225273585052,27.244469098395]}},{"type":"Feature","properties":{"ID":87,"Name":"Indian River Dr","To":"Causeway Blvd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 87\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Indian River Dr & Causeway Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.227880692216,27.25077509752]}},{"type":"Feature","properties":{"ID":88,"Name":"Indian River Dr","To":"St. Lucie County","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 88\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Indian River Dr & St. Lucie County\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.210761996084,27.195761020852]}},{"type":"Feature","properties":{"ID":89,"Name":"Island Way","To":"Jupiter Road","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 89\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Island Way & Jupiter Road\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.137588987191,26.974055993824]}},{"type":"Feature","properties":{"ID":90,"Name":"Island Way","To":"Country Club Dr","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 90\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Island Way & Country Club Dr\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.12778702198,26.97679100883]}},{"type":"Feature","properties":{"ID":91,"Name":"Jack James Dr","To":"Blue Water Wy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 91\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Jack James Dr & Blue Water Wy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.270556984595,27.116897998898]}},{"type":"Feature","properties":{"ID":92,"Name":"Jensen Beach Blvd","To":"Green River Pkwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 92\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Jensen Beach Blvd & Green River Pkwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.253503499671,27.245333314522]}},{"type":"Feature","properties":{"ID":93,"Name":"Jensen Beach Blvd","To":"Savannah Rd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 93\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Jensen Beach Blvd & Savannah Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.23629385989,27.245013796373]}},{"type":"Feature","properties":{"ID":94,"Name":"Jensen Beach Blvd","To":"Skyline Dr","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 94\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Jensen Beach Blvd & Skyline Dr\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.229226993504,27.243398184536]}},{"type":"Feature","properties":{"ID":95,"Name":"Jensen Beach Blvd","To":"Pineapple Way","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 95\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Jensen Beach Blvd & Pineapple Way\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.227382974805,27.244064001014]}},{"type":"Feature","properties":{"ID":96,"Name":"Jensen Beach Blvd","To":"Indian River Dr","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 96\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Jensen Beach Blvd & Indian River Dr\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.225273585052,27.244469098395]}},{"type":"Feature","properties":{"ID":97,"Name":"Kanner Hwy","To":"Warfield Blvd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 97\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Kanner Hwy & Warfield Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.454342533115,27.011744089896]}},{"type":"Feature","properties":{"ID":98,"Name":"Kanner Hwy","To":"Bridge Rd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 98\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Kanner Hwy & Bridge Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.305578671538,27.059225182542]}},{"type":"Feature","properties":{"ID":99,"Name":"Kanner Hwy","To":"Waterside","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 99\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Kanner Hwy & Waterside\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.286739673599,27.073673907236]}},{"type":"Feature","properties":{"ID":100,"Name":"Kanner Hwy","To":"Pratt Whitney Rd / 96th St","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 100\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Kanner Hwy & Pratt Whitney Rd / 96th St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.278232293333,27.088059013285]}},{"type":"Feature","properties":{"ID":101,"Name":"Kanner Hwy","To":"Locks Rd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 101\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Kanner Hwy & Locks Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.268609617031,27.10230850014]}},{"type":"Feature","properties":{"ID":102,"Name":"Kanner Hwy","To":"Jack James","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 102\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Kanner Hwy & Jack James\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.263439072419,27.106603806422]}},{"type":"Feature","properties":{"ID":103,"Name":"Kanner Hwy","To":"Cove Rd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 103\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Kanner Hwy & Cove Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.254566911727,27.115773608496]}},{"type":"Feature","properties":{"ID":104,"Name":"Kanner Hwy","To":"Salerno Rd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 104\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Kanner Hwy & Salerno Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.252275886132,27.124112219142]}},{"type":"Feature","properties":{"ID":105,"Name":"Kanner Hwy","To":"Indian St","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 105\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Kanner Hwy & Indian St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.246955724548,27.158311515655]}},{"type":"Feature","properties":{"ID":106,"Name":"Kanner Hwy","To":"Monterey Rd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 106\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Kanner Hwy & Monterey Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.253046602129,27.175723620307]}},{"type":"Feature","properties":{"ID":107,"Name":"Kanner Hwy","To":"Federal Hwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 107\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Kanner Hwy & Federal Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.252984827502,27.191013385165]}},{"type":"Feature","properties":{"ID":108,"Name":"Lares Ave","To":"Dixie Hwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 108\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Lares Ave & Dixie Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.135301733453,27.066990680558]}},{"type":"Feature","properties":{"ID":109,"Name":"Little Club Wy","To":"Wooden Bridge Wy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 109\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Little Club Wy & Wooden Bridge Wy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.121185015943,26.983234010163]}},{"type":"Feature","properties":{"ID":110,"Name":"Locks Rd","To":"Kanner Hwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 110\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Locks Rd & Kanner Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.268609617031,27.10230850014]}},{"type":"Feature","properties":{"ID":111,"Name":"MacArthur Blvd","To":"Ocean Blvd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 111\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>MacArthur Blvd & Ocean Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.181130962531,27.211999700969]}},{"type":"Feature","properties":{"ID":112,"Name":"Mapp Rd","To":"Martin Hwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 112\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Mapp Rd & Martin Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.269397264472,27.161188981105]}},{"type":"Feature","properties":{"ID":113,"Name":"Mapp Rd","To":"Martin Downs Blvd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 113\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Mapp Rd & Martin Downs Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.269346470139,27.17235929201]}},{"type":"Feature","properties":{"ID":114,"Name":"Mapp Rd","To":"Matheson Ave","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 114\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Mapp Rd & Matheson Ave\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.277283964808,27.186563013674]}},{"type":"Feature","properties":{"ID":115,"Name":"Mapp Rd","To":"North End","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 115\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Mapp Rd & North End\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.269484993629,27.158670794604]}},{"type":"Feature","properties":{"ID":116,"Name":"Martin Downs Blvd","To":"High Meadow Ave","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 116\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Martin Downs Blvd & High Meadow Ave\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.294003682348,27.172383683348]}},{"type":"Feature","properties":{"ID":117,"Name":"Martin Downs Blvd","To":"Matheson Ave","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 117\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Martin Downs Blvd & Matheson Ave\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.277716973926,27.172451995859]}},{"type":"Feature","properties":{"ID":118,"Name":"Martin Downs Blvd","To":"Mapp Rd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 118\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Martin Downs Blvd & Mapp Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.269346470139,27.17235929201]}},{"type":"Feature","properties":{"ID":119,"Name":"Martin Downs Blvd","To":"Kanner Hwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 119\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Martin Downs Blvd & Kanner Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.287868054302,27.172510331252]}},{"type":"Feature","properties":{"ID":120,"Name":"Martin Hwy","To":"Fox Brown Rd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 120\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Martin Hwy & Fox Brown Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.554317012687,27.16207071541]}},{"type":"Feature","properties":{"ID":121,"Name":"Martin Hwy","To":"Allapattah Rd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 121\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Martin Hwy & Allapattah Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.481841964872,27.161950979923]}},{"type":"Feature","properties":{"ID":122,"Name":"Martin Hwy","To":"I-95","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 122\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Martin Hwy & I-95\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.389428297239,27.161764482577]}},{"type":"Feature","properties":{"ID":123,"Name":"Martin Hwy","To":"Citrus Blvd / Newfield Pkwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 123\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Martin Hwy & Citrus Blvd / Newfield Pkwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.318892235085,27.161585403216]}},{"type":"Feature","properties":{"ID":124,"Name":"Martin Hwy","To":"Florida's Turnpike","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 124\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Martin Hwy & Florida's Turnpike\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.304661439874,27.16158158945]}},{"type":"Feature","properties":{"ID":125,"Name":"Martin Hwy","To":"High Meadow Ave","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 125\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Martin Hwy & High Meadow Ave\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.296360505883,27.161448484828]}},{"type":"Feature","properties":{"ID":126,"Name":"Martin Hwy","To":"Mapp Rd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 126\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Martin Hwy & Mapp Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.269397264472,27.161188981105]}},{"type":"Feature","properties":{"ID":127,"Name":"Martin Hwy","To":"Kanner Hwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 127\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Martin Hwy & Kanner Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.614306333952,26.977850095177]}},{"type":"Feature","properties":{"ID":128,"Name":"Matheson Ave","To":"Mapp Rd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 128\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Matheson Ave & Mapp Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.277283964808,27.186563013674]}},{"type":"Feature","properties":{"ID":129,"Name":"Monroe St","To":"Commerce Ave","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 129\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Monroe St & Commerce Ave\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.211761035124,27.155146006101]}},{"type":"Feature","properties":{"ID":130,"Name":"Monterey Rd","To":"Willoughby Blvd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 130\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Monterey Rd & Willoughby Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.246969889964,27.175648602273]}},{"type":"Feature","properties":{"ID":131,"Name":"Monterey Rd","To":"Monterey Extension","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 131\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Monterey Rd & Monterey Extension\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.240415996053,27.175559083547]}},{"type":"Feature","properties":{"ID":132,"Name":"Monterey Rd","To":"Federal Hwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 132\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Monterey Rd & Federal Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.236910600326,27.177909117741]}},{"type":"Feature","properties":{"ID":133,"Name":"Monterey Rd","To":"Dixie Hwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 133\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Monterey Rd & Dixie Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.236244574299,27.181375286161]}},{"type":"Feature","properties":{"ID":134,"Name":"Monterey Rd","To":"Ocean Blvd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 134\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Monterey Rd & Ocean Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.224121911556,27.197373699023]}},{"type":"Feature","properties":{"ID":135,"Name":"Murphy Rd","To":"High Meadow Ave","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 135\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Murphy Rd & High Meadow Ave\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.29395498349,27.186501993419]}},{"type":"Feature","properties":{"ID":136,"Name":"Murphy Rd","To":"St Lucie County","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 136\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Murphy Rd & St Lucie County\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.201355115586,27.196394407054]}},{"type":"Feature","properties":{"ID":137,"Name":"Newfield Pkwy","To":"Farmer Dr","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 137\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Newfield Pkwy & Farmer Dr\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.398464013427,27.081622458589]}},{"type":"Feature","properties":{"ID":138,"Name":"Newfield Pkwy","To":"84th / Newfield Ave","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 138\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Newfield Pkwy & 84th / Newfield Ave\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.398464013427,27.081622458589]}},{"type":"Feature","properties":{"ID":139,"Name":"Newfield Pkwy","To":"Saw Palmetto Dr","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 139\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Newfield Pkwy & Saw Palmetto Dr\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.26363719305,27.17128710186]}},{"type":"Feature","properties":{"ID":140,"Name":"Newfield Pkwy","To":"Martin Hwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 140\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Newfield Pkwy & Martin Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.285104576535,27.161171635]}},{"type":"Feature","properties":{"ID":141,"Name":"Ocean Blvd","To":"Palm Beach Rd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 141\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Ocean Blvd & Palm Beach Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.236511035001,27.197512000425]}},{"type":"Feature","properties":{"ID":142,"Name":"Ocean Blvd","To":"Monterey Rd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 142\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Ocean Blvd & Monterey Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.224121911556,27.197373699023]}},{"type":"Feature","properties":{"ID":143,"Name":"Ocean Blvd","To":"St Lucie Blvd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 143\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Ocean Blvd & St Lucie Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.211980138073,27.197163816168]}},{"type":"Feature","properties":{"ID":144,"Name":"Ocean Blvd","To":"Sewalls Point Rd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 144\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Ocean Blvd & Sewalls Point Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.200601369236,27.202949382925]}},{"type":"Feature","properties":{"ID":145,"Name":"Ocean Blvd","To":"Stuart Beach Entry","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 145\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Ocean Blvd & Stuart Beach Entry\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.17502,27.21439]}},{"type":"Feature","properties":{"ID":146,"Name":"Ocean Blvd","To":"Jensen Beach Blvd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 146\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Ocean Blvd & Jensen Beach Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.198017479944,27.255690580819]}},{"type":"Feature","properties":{"ID":147,"Name":"Ocean Blvd","To":"St Lucie County","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 147\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Ocean Blvd & St Lucie County\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.211980138073,27.197163816168]}},{"type":"Feature","properties":{"ID":148,"Name":"Osprey St","To":"Dixie Hwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 148\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Osprey St & Dixie Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.151485093008,27.101586189634]}},{"type":"Feature","properties":{"ID":149,"Name":"Osprey St","To":"Gomez Ave","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 149\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Osprey St & Gomez Ave\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.148598030279,27.102595999419]}},{"type":"Feature","properties":{"ID":150,"Name":"Palm Beach Rd","To":"Ocean Blvd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 150\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Palm Beach Rd & Ocean Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.236511035001,27.197512000425]}},{"type":"Feature","properties":{"ID":151,"Name":"Palm City Rd","To":"Federal Hwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 151\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Palm City Rd & Federal Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.256667500481,27.193218999167]}},{"type":"Feature","properties":{"ID":152,"Name":"Palmer St","To":"Indian River Dr","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 152\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Palmer St & Indian River Dr\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.21240199926,27.222969013836]}},{"type":"Feature","properties":{"ID":153,"Name":"Pineapple Wy","To":"Indian River Dr","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 153\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Pineapple Wy & Indian River Dr\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.228091413261,27.250699995668]}},{"type":"Feature","properties":{"ID":154,"Name":"Pomeroy St","To":"Willoughby Blvd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 154\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Pomeroy St & Willoughby Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.232986025621,27.147871017059]}},{"type":"Feature","properties":{"ID":155,"Name":"Pomeroy St","To":"Federal Hwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 155\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Pomeroy St & Federal Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.220217621056,27.154804820733]}},{"type":"Feature","properties":{"ID":156,"Name":"Pratt Whitney Rd","To":"Bridge Rd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 156\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Pratt Whitney Rd & Bridge Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.263140006113,27.058580991374]}},{"type":"Feature","properties":{"ID":157,"Name":"Pratt Whitney Rd","To":"Meadowlark Cir","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 157\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Pratt Whitney Rd & Meadowlark Cir\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.263115028042,27.067968010468]}},{"type":"Feature","properties":{"ID":158,"Name":"Pratt Whitney Rd","To":"Kanner Hwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 158\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Pratt Whitney Rd & Kanner Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.278232293333,27.088059013285]}},{"type":"Feature","properties":{"ID":159,"Name":"Salerno Rd","To":"Willoughby Blvd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 159\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Salerno Rd & Willoughby Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.228060986953,27.133489012315]}},{"type":"Feature","properties":{"ID":160,"Name":"Salerno Rd","To":"Avalon Dr","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 160\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Salerno Rd & Avalon Dr\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.21804796542,27.137558007211]}},{"type":"Feature","properties":{"ID":161,"Name":"Salerno Rd","To":"Federal Hwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 161\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Salerno Rd & Federal Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.211125016311,27.140196001688]}},{"type":"Feature","properties":{"ID":162,"Name":"Salerno Rd","To":"Commerce Ave","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 162\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Salerno Rd & Commerce Ave\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.199432009924,27.144743016523]}},{"type":"Feature","properties":{"ID":163,"Name":"Salerno Rd","To":"Dixie Hwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 163\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Salerno Rd & Dixie Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.197491934615,27.145981107441]}},{"type":"Feature","properties":{"ID":164,"Name":"Savannah Rd","To":"Park Pl","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 164\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Savannah Rd & Park Pl\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.237138170872,27.225957788737]}},{"type":"Feature","properties":{"ID":165,"Name":"Savannah Rd","To":"NE 24th St","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 165\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Savannah Rd & NE 24th St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.236355802154,27.233942517654]}},{"type":"Feature","properties":{"ID":166,"Name":"Savannah Rd","To":"Jensen Beach Blvd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 166\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Savannah Rd & Jensen Beach Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.23629385989,27.245013796373]}},{"type":"Feature","properties":{"ID":167,"Name":"Seabranch Blvd","To":"Federal Hwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 167\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Seabranch Blvd & Federal Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.178232919508,27.11683890648]}},{"type":"Feature","properties":{"ID":168,"Name":"Sewalls Pt Rd","To":"Palmer St","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 168\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Sewalls Pt Rd & Palmer St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.20227,27.19949]}},{"type":"Feature","properties":{"ID":169,"Name":"Skyline Dr","To":"Indian River Dr","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 169\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Skyline Dr & Indian River Dr\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.232286974896,27.260809283359]}},{"type":"Feature","properties":{"ID":170,"Name":"St Lucie Blvd","To":"Indian St","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 170\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>St Lucie Blvd & Indian St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.21032001833,27.172406985039]}},{"type":"Feature","properties":{"ID":171,"Name":"St Lucie Blvd","To":"Ocean Blvd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 171\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>St Lucie Blvd & Ocean Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.211980138073,27.197163816168]}},{"type":"Feature","properties":{"ID":172,"Name":"Warfield Blvd","To":"Fox Brown Rd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 172\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Warfield Blvd & Fox Brown Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.514962803812,27.051421882143]}},{"type":"Feature","properties":{"ID":173,"Name":"Warfield Blvd","To":"Allapattah Rd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 173\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Warfield Blvd & Allapattah Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.482407324241,27.03048221163]}},{"type":"Feature","properties":{"ID":174,"Name":"Warfield Blvd","To":"Van Buren","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 174\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Warfield Blvd & Van Buren\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.472195064869,27.024210997403]}},{"type":"Feature","properties":{"ID":175,"Name":"Warfield Blvd","To":"Citrus Blvd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 175\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Warfield Blvd & Citrus Blvd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.461431695363,27.016974900391]}},{"type":"Feature","properties":{"ID":176,"Name":"Warfield Blvd","To":"Kanner Hwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 176\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Warfield Blvd & Kanner Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.454342533115,27.011744089896]}},{"type":"Feature","properties":{"ID":177,"Name":"Warfield Blvd","To":"Palm Beach County","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 177\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Warfield Blvd & Palm Beach County\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.556901999699,27.079238872273]}},{"type":"Feature","properties":{"ID":178,"Name":"Westmoreland Blvd","To":"Federal Hwy","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 178\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Westmoreland Blvd & Federal Hwy\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.281510371846,27.259265420613]}},{"type":"Feature","properties":{"ID":179,"Name":"Willoughby Blvd","To":"Salerno Rd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 179\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Willoughby Blvd & Salerno Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.228060986953,27.133489012315]}},{"type":"Feature","properties":{"ID":180,"Name":"Willoughby Blvd","To":"Pomeroy St","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 180\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Willoughby Blvd & Pomeroy St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.232986025621,27.147871017059]}},{"type":"Feature","properties":{"ID":181,"Name":"Willoughby Blvd","To":"Indian St","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 181\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Willoughby Blvd & Indian St\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.240210974701,27.160924993065]}},{"type":"Feature","properties":{"ID":182,"Name":"Willoughby Blvd","To":"Monterey Rd","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 182\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Willoughby Blvd & Monterey Rd\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.246969889964,27.175648602273]}},{"type":"Feature","properties":{"ID":183,"Name":"Wright Blvd","To":"Dixie Highway","node_type":"To","tooltip_html":"<div style='font-family: system-ui; padding: 6px; background: #09090b; color: #fafafa; border-radius: 4px;'><div style='font-size: 9px; color: #71717a;'>END NODE\u003c/div><div style='font-weight: 600; color: #39FF14;'>ID: 183\u003c/div><div style='font-size: 11px; color: #a1a1aa;'>Wright Blvd & Dixie Highway\u003c/div>\u003c/div>"},"geometry":{"type":"Point","coordinates":[-80.257607195646,27.215745112494]}}]},"generateId":true},"source_layer":null,"paint":{"circle-color":"#39FF14","circle-opacity":1,"circle-radius":6,"circle-stroke-color":"#FFFFFF","circle-stroke-width":2,"circle-translate-anchor":"map"},"layout":{"visibility":"visible"},"slot":null,"minzoom":null,"maxzoom":null,"popup":null,"tooltip":"tooltip_html","hover_options":null,"before_id":null,"filter":null},{"id":"county_boundary_fill","type":"fill","source":{"type":"geojson","data":{"type":"FeatureCollection","features":[{"type":"Feature","properties":{"GEOID":"12085","NAME":"Martin County, Florida","B02001_001E":160464.0,"B02001_001M":null,"B02001_002E":129803.0,"B02001_002M":1352.0,"B02001_003E":8071.0,"B02001_003M":434.0,"B02001_004E":773.0,"B02001_004M":379.0,"B02001_005E":2271.0,"B02001_005M":197.0,"B02001_006E":51.0,"B02001_006M":53.0,"B02001_007E":5227.0,"B02001_007M":1184.0,"B02001_008E":14268.0,"B02001_008M":1527.0,"B02001_009E":10800.0,"B02001_009M":1359.0,"B02001_010E":3468.0,"B02001_010M":738.0},"geometry":{"type":"MultiPolygon","coordinates":[[[[-80.685636,27.114689],[-80.683751,27.116279],[-80.677427,27.121619],[-80.67768,27.158472],[-80.677691,27.159296],[-80.677862,27.205988],[-80.580466,27.206029],[-80.481413,27.20637],[-80.415705,27.205889],[-80.40033,27.205775],[-80.375938,27.205584],[-80.371989,27.206105],[-80.356355,27.205916],[-80.339391,27.205691],[-80.33193,27.205734],[-80.331821,27.205724],[-80.28551,27.206025],[-80.285448,27.210695],[-80.285373,27.22541],[-80.285072,27.231002],[-80.285546,27.231153],[-80.289492,27.23522],[-80.291843,27.236932],[-80.292717,27.238793],[-80.292606,27.240636],[-80.292532,27.240972],[-80.292991,27.241984],[-80.288079,27.241956],[-80.28795,27.243884],[-80.285312,27.243919],[-80.284856,27.260262],[-80.284771,27.263723],[-80.284175,27.263723],[-80.283936,27.263727],[-80.283069,27.263831],[-80.266134,27.263504],[-80.254844,27.263296],[-80.244266,27.26301],[-80.23367,27.26306],[-80.224028,27.263024],[-80.210553,27.263052],[-80.209848,27.263099],[-80.201229,27.263035],[-80.1994351436366,27.263023139554],[-80.19309,27.249546],[-80.1743112285018,27.215853486887],[-80.16147,27.192814],[-80.159826,27.188392],[-80.160029,27.186768],[-80.157773,27.179223],[-80.153375,27.169308],[-80.1565902018064,27.1645578680799],[-80.157556,27.163131],[-80.155785,27.158526],[-80.150719,27.147297],[-80.14982,27.143557],[-80.145287,27.132194],[-80.143581,27.125735],[-80.142085,27.11979],[-80.138605,27.111517],[-80.133736,27.101863],[-80.1319635529154,27.0989205422107],[-80.1313240342658,27.0978588706674],[-80.126669,27.090131],[-80.1250725338412,27.0872703623461],[-80.116772,27.072397],[-80.115106,27.066627],[-80.111729,27.06053],[-80.093909,27.018587],[-80.088859210821,26.9980111492497],[-80.086174,26.98707],[-80.081008,26.974165],[-80.079948827411,26.9705170314788],[-80.083263,26.970534],[-80.083858,26.970551],[-80.086688,26.970632],[-80.087262,26.970547],[-80.08741,26.970535],[-80.088369,26.970519],[-80.089626,26.970534],[-80.094199,26.970585],[-80.095211,26.970594],[-80.097182,26.970613],[-80.102016,26.970665],[-80.108917,26.970756],[-80.110115,26.970834],[-80.110359,26.970834],[-80.121071,26.970834],[-80.125678,26.970934],[-80.126265,26.970934],[-80.135711,26.970924],[-80.139705,26.970939],[-80.141758,26.97094],[-80.14176,26.97088],[-80.141917,26.966769],[-80.142007,26.95664],[-80.166455,26.956634],[-80.16711,26.956627],[-80.167843,26.956634],[-80.190639,26.956682],[-80.223127,26.956867],[-80.25474,26.957119],[-80.255831,26.957261],[-80.287428,26.957841],[-80.374839,26.958386],[-80.38469,26.958382],[-80.443787,26.957675],[-80.482405,26.957947],[-80.580237,26.957934],[-80.618063,26.957833],[-80.885639,26.958919],[-80.685636,27.114689]]]]}}]},"generateId":true},"source_layer":null,"paint":{"fill-antialias":true,"fill-color":"#00F0FF","fill-opacity":0.05,"fill-translate-anchor":"map"},"layout":{"visibility":"visible"},"slot":null,"minzoom":null,"maxzoom":null,"popup":null,"tooltip":"Martin County, FL","hover_options":null,"before_id":null,"filter":null},{"id":"county_boundary","type":"line","source":{"type":"geojson","data":{"type":"FeatureCollection","features":[{"type":"Feature","properties":{"GEOID":"12085","NAME":"Martin County, Florida","B02001_001E":160464.0,"B02001_001M":null,"B02001_002E":129803.0,"B02001_002M":1352.0,"B02001_003E":8071.0,"B02001_003M":434.0,"B02001_004E":773.0,"B02001_004M":379.0,"B02001_005E":2271.0,"B02001_005M":197.0,"B02001_006E":51.0,"B02001_006M":53.0,"B02001_007E":5227.0,"B02001_007M":1184.0,"B02001_008E":14268.0,"B02001_008M":1527.0,"B02001_009E":10800.0,"B02001_009M":1359.0,"B02001_010E":3468.0,"B02001_010M":738.0},"geometry":{"type":"MultiPolygon","coordinates":[[[[-80.685636,27.114689],[-80.683751,27.116279],[-80.677427,27.121619],[-80.67768,27.158472],[-80.677691,27.159296],[-80.677862,27.205988],[-80.580466,27.206029],[-80.481413,27.20637],[-80.415705,27.205889],[-80.40033,27.205775],[-80.375938,27.205584],[-80.371989,27.206105],[-80.356355,27.205916],[-80.339391,27.205691],[-80.33193,27.205734],[-80.331821,27.205724],[-80.28551,27.206025],[-80.285448,27.210695],[-80.285373,27.22541],[-80.285072,27.231002],[-80.285546,27.231153],[-80.289492,27.23522],[-80.291843,27.236932],[-80.292717,27.238793],[-80.292606,27.240636],[-80.292532,27.240972],[-80.292991,27.241984],[-80.288079,27.241956],[-80.28795,27.243884],[-80.285312,27.243919],[-80.284856,27.260262],[-80.284771,27.263723],[-80.284175,27.263723],[-80.283936,27.263727],[-80.283069,27.263831],[-80.266134,27.263504],[-80.254844,27.263296],[-80.244266,27.26301],[-80.23367,27.26306],[-80.224028,27.263024],[-80.210553,27.263052],[-80.209848,27.263099],[-80.201229,27.263035],[-80.1994351436366,27.263023139554],[-80.19309,27.249546],[-80.1743112285018,27.215853486887],[-80.16147,27.192814],[-80.159826,27.188392],[-80.160029,27.186768],[-80.157773,27.179223],[-80.153375,27.169308],[-80.1565902018064,27.1645578680799],[-80.157556,27.163131],[-80.155785,27.158526],[-80.150719,27.147297],[-80.14982,27.143557],[-80.145287,27.132194],[-80.143581,27.125735],[-80.142085,27.11979],[-80.138605,27.111517],[-80.133736,27.101863],[-80.1319635529154,27.0989205422107],[-80.1313240342658,27.0978588706674],[-80.126669,27.090131],[-80.1250725338412,27.0872703623461],[-80.116772,27.072397],[-80.115106,27.066627],[-80.111729,27.06053],[-80.093909,27.018587],[-80.088859210821,26.9980111492497],[-80.086174,26.98707],[-80.081008,26.974165],[-80.079948827411,26.9705170314788],[-80.083263,26.970534],[-80.083858,26.970551],[-80.086688,26.970632],[-80.087262,26.970547],[-80.08741,26.970535],[-80.088369,26.970519],[-80.089626,26.970534],[-80.094199,26.970585],[-80.095211,26.970594],[-80.097182,26.970613],[-80.102016,26.970665],[-80.108917,26.970756],[-80.110115,26.970834],[-80.110359,26.970834],[-80.121071,26.970834],[-80.125678,26.970934],[-80.126265,26.970934],[-80.135711,26.970924],[-80.139705,26.970939],[-80.141758,26.97094],[-80.14176,26.97088],[-80.141917,26.966769],[-80.142007,26.95664],[-80.166455,26.956634],[-80.16711,26.956627],[-80.167843,26.956634],[-80.190639,26.956682],[-80.223127,26.956867],[-80.25474,26.957119],[-80.255831,26.957261],[-80.287428,26.957841],[-80.374839,26.958386],[-80.38469,26.958382],[-80.443787,26.957675],[-80.482405,26.957947],[-80.580237,26.957934],[-80.618063,26.957833],[-80.885639,26.958919],[-80.685636,27.114689]]]]}}]},"generateId":true},"source_layer":null,"paint":{"line-color":"#00F0FF","line-opacity":0.8,"line-translate-anchor":"map","line-width":3},"layout":{"visibility":"visible"},"slot":null,"minzoom":null,"maxzoom":null,"popup":null,"tooltip":null,"hover_options":null,"before_id":null,"filter":null}],"layers_control":{"control_id":"layers-control-479c6","position":"top-left","layers":["routes_C1","routes_C2","routes_C2T","routes_C3C","routes_C3R","routes_C4","nodes_from","nodes_to","county_boundary"],"layers_config":null,"collapsible":true,"use_icon":true,"custom_colors":null,"margin_top":null,"margin_right":null,"margin_bottom":null,"margin_left":null}},"evals":[],"jsHooks":{"render":[{"code":"\n    function(el, x) {\n      // Add legend HTML to the map container\n      var legendDiv = document.createElement('div');\n      legendDiv.innerHTML = `<div id=\"context-legend\" style=\"position: absolute; bottom: 40px; right: 10px; background: rgba(9, 9, 11, 0.9); padding: 12px 16px; border-radius: 8px; font-family: system-ui, sans-serif; font-size: 11px; color: #fafafa; box-shadow: 0 4px 12px rgba(0,0,0,0.5); max-width: 180px; z-index: 1000;\"><div style=\"font-weight: 600; margin-bottom: 10px; color: #a1a1aa; font-size: 10px;\">CONTEXT CLASSIFICATION<\/div><div class=\"legend-item\" data-layer=\"routes_C1\" style=\"display: flex; align-items: center; margin-bottom: 6px; cursor: pointer; padding: 4px 6px; border-radius: 4px; transition: background 0.2s;\" onmouseover=\"this.style.background='rgba(255,255,255,0.1)'\" onmouseout=\"this.style.background='transparent'\"><div style=\"width: 16px; height: 4px; background: #FF073A; border-radius: 2px; margin-right: 8px;\"><\/div><span>C1<\/span><\/div><div class=\"legend-item\" data-layer=\"routes_C2\" style=\"display: flex; align-items: center; margin-bottom: 6px; cursor: pointer; padding: 4px 6px; border-radius: 4px; transition: background 0.2s;\" onmouseover=\"this.style.background='rgba(255,255,255,0.1)'\" onmouseout=\"this.style.background='transparent'\"><div style=\"width: 16px; height: 4px; background: #00F0FF; border-radius: 2px; margin-right: 8px;\"><\/div><span>C2<\/span><\/div><div class=\"legend-item\" data-layer=\"routes_C2T\" style=\"display: flex; align-items: center; margin-bottom: 6px; cursor: pointer; padding: 4px 6px; border-radius: 4px; transition: background 0.2s;\" onmouseover=\"this.style.background='rgba(255,255,255,0.1)'\" onmouseout=\"this.style.background='transparent'\"><div style=\"width: 16px; height: 4px; background: #BC13FE; border-radius: 2px; margin-right: 8px;\"><\/div><span>C2T<\/span><\/div><div class=\"legend-item\" data-layer=\"routes_C3C\" style=\"display: flex; align-items: center; margin-bottom: 6px; cursor: pointer; padding: 4px 6px; border-radius: 4px; transition: background 0.2s;\" onmouseover=\"this.style.background='rgba(255,255,255,0.1)'\" onmouseout=\"this.style.background='transparent'\"><div style=\"width: 16px; height: 4px; background: #FFFF00; border-radius: 2px; margin-right: 8px;\"><\/div><span>C3C<\/span><\/div><div class=\"legend-item\" data-layer=\"routes_C3R\" style=\"display: flex; align-items: center; margin-bottom: 6px; cursor: pointer; padding: 4px 6px; border-radius: 4px; transition: background 0.2s;\" onmouseover=\"this.style.background='rgba(255,255,255,0.1)'\" onmouseout=\"this.style.background='transparent'\"><div style=\"width: 16px; height: 4px; background: #39FF14; border-radius: 2px; margin-right: 8px;\"><\/div><span>C3R<\/span><\/div><div class=\"legend-item\" data-layer=\"routes_C4\" style=\"display: flex; align-items: center; margin-bottom: 6px; cursor: pointer; padding: 4px 6px; border-radius: 4px; transition: background 0.2s;\" onmouseover=\"this.style.background='rgba(255,255,255,0.1)'\" onmouseout=\"this.style.background='transparent'\"><div style=\"width: 16px; height: 4px; background: #FF10F0; border-radius: 2px; margin-right: 8px;\"><\/div><span>C4<\/span><\/div><div style=\"border-top: 1px solid #27272a; margin: 8px 0; padding-top: 8px;\"><div style=\"font-weight: 600; margin-bottom: 8px; color: #a1a1aa; font-size: 10px;\">NODES<\/div><div class=\"legend-item\" data-layer=\"nodes_from\" style=\"display: flex; align-items: center; margin-bottom: 6px; cursor: pointer; padding: 4px 6px; border-radius: 4px;\"><div style=\"width: 10px; height: 10px; background: #FF073A; border-radius: 50%; border: 2px solid #fff; margin-right: 8px;\"><\/div><span>From (Start)<\/span><\/div><div class=\"legend-item\" data-layer=\"nodes_to\" style=\"display: flex; align-items: center; margin-bottom: 6px; cursor: pointer; padding: 4px 6px; border-radius: 4px;\"><div style=\"width: 10px; height: 10px; background: #39FF14; border-radius: 50%; border: 2px solid #fff; margin-right: 8px;\"><\/div><span>To (End)<\/span><\/div><\/div><div style=\"border-top: 1px solid #27272a; margin: 8px 0; padding-top: 8px;\"><div style=\"font-weight: 600; margin-bottom: 8px; color: #a1a1aa; font-size: 10px;\">BOUNDARY<\/div><div class=\"legend-item\" data-layer=\"county_boundary\" style=\"display: flex; align-items: center; margin-bottom: 6px; cursor: pointer; padding: 4px 6px; border-radius: 4px;\"><div style=\"width: 14px; height: 14px; background: transparent; border: 2px solid #00F0FF; margin-right: 8px;\"><\/div><span>Martin County<\/span><\/div><\/div><\/div>`;\n      el.appendChild(legendDiv.firstChild);\n\n      // Wait for map to be ready then add click handlers\n      var checkMap = setInterval(function() {\n        // Find the map instance - mapgl stores it on the element\n        var map = null;\n        if (el.widget && el.widget.map) {\n          map = el.widget.map;\n        } else if (el._map) {\n          map = el._map;\n        } else if (window.maplibregl) {\n          // Try to find map in the element's children\n          var mapContainer = el.querySelector('.maplibregl-map');\n          if (mapContainer && mapContainer._maplibre) {\n            map = mapContainer._maplibre;\n          }\n        }\n\n        if (!map || !map.isStyleLoaded || !map.isStyleLoaded()) {\n          return; // Keep waiting\n        }\n\n        clearInterval(checkMap);\n        console.log('Map found, adding legend handlers');\n\n        // Track layer visibility state\n        var layerVisibility = {};\n\n        // Add click handlers to all legend items\n        var legendItems = document.querySelectorAll('.legend-item');\n        legendItems.forEach(function(item) {\n          var layerId = item.getAttribute('data-layer');\n          if (!layerId) return;\n\n          // Initialize as visible\n          layerVisibility[layerId] = true;\n\n          item.addEventListener('click', function() {\n            var isVisible = layerVisibility[layerId];\n            var newVisibility = isVisible ? 'none' : 'visible';\n\n            try {\n              // Toggle the main layer\n              if (map.getLayer(layerId)) {\n                map.setLayoutProperty(layerId, 'visibility', newVisibility);\n              }\n\n              // Also toggle fill layer for county boundary\n              if (layerId === 'county_boundary' && map.getLayer('county_boundary_fill')) {\n                map.setLayoutProperty('county_boundary_fill', 'visibility', newVisibility);\n              }\n\n              // Update visual state\n              layerVisibility[layerId] = !isVisible;\n              item.style.opacity = isVisible ? '0.4' : '1';\n\n              // Add/remove strikethrough\n              var textSpan = item.querySelector('span');\n              if (textSpan) {\n                textSpan.style.textDecoration = isVisible ? 'line-through' : 'none';\n              }\n\n              console.log('Toggled layer:', layerId, 'to', newVisibility);\n            } catch(e) {\n              console.error('Error toggling layer:', layerId, e);\n            }\n          });\n        });\n      }, 200);\n    }\n  ","data":null}]}}</script>
<script type="application/htmlwidget-sizing" data-for="htmlwidget-2276687c6c628a94a5b1">{"viewer":{"width":"100%","height":"100vh","padding":0,"fill":false},"browser":{"width":"100%","height":"100vh","padding":0,"fill":false}}</script>
</body>
</html>
